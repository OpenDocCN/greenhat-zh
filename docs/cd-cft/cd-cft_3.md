# 第四部分。程序员群？

一排排的隔间，排列在漫长而单调的行列中。灵魂农场。不切实际的日程安排、糟糕的管理和灾难性的软件的职场苦役。没有自然光线和糟糕的咖啡。

欢迎来到软件工厂。

一些程序员是自由职业者，从一个办公室跳到另一个办公室。一些人在家里编写开源代码以娱乐自己。但大多数人被束缚在令人沮丧的软件工厂中，为着一个他们仍然充满热情的事业服刑。

我们是一群有趣的人：天生反社会，更喜欢与编译器和网络浏览器的陪伴。然而，为了创作软件杰作，我们被迫合作，这与我们的自然本能相悖。正如我们将看到的，你软件的质量取决于你程序员的素质以及他们的协作。如果没有在现实世界中应对的策略，你将陷入困境。

本节探讨了文化和动态如何影响你的代码形状。我们将看到：

第十六章

强大程序员的必要技能和个人品质。

第十七章

如何作为一个有效和高效的软件团队工作。

第十八章

管理多个程序员之间共享的源代码：如何避免灾难和痛苦。

那么，程序员的集体名词是什么？它当然不是*蜂群*：我们远没有那么快，也远没有那么有组织。它也不是*狮群*：我们既没有狮子那么凶猛，也不太可能创造出值得夸耀的东西。答案（至少对于 C 家族程序员来说）是明确的：程序员的集体名词是*一排*。

# 第十六章。代码猴子

### *培养正确的编程态度和方法*

我们只是高级的猴子，在非常普通的一颗恒星的一个小行星上。但我们能理解宇宙。这使得我们非常特别。

--斯蒂芬·霍金

快速问答：需要多少程序员来换一个灯泡？它是：

1.  无。灯泡并没有坏；这是一个节能特性。

1.  只有一个，但可能需要一整夜的时间，以及大量的披萨和咖啡。

1.  二十个。一个来修复最初的问题，十九个来调试产生的混乱.^([1])

正确的答案是什么？这取决于谁来做这项工作。不同的程序员以不同的方式工作，并且会有他们自己独特的解决问题的方法。总有*不止一种方法可以做到*，^([2]) 不同程序员的态度将导致他们做出非常不同的决定。

在这本书的整个过程中，我们一直在识别优秀程序员的正确态度。这一章专门关注这一点：我们将研究程序员的正确和错误态度，并确定成功编程的关键因素。这包括我们如何处理编码任务，以及我们如何与其他程序员相处。我们将得出一些关于什么使最佳程序员令人惊讶的结论。

# 猴子生意

软件工厂住着一群奇怪的怪人和社会不适应者，即**代码猴子**。任何严肃的软件系统都是由这些人建造的，他们拥有不同的技能水平和态度，共同朝着共同的目标努力。

我们如何合作以及我们编写的代码类型，将不可避免地受到我们对工作的态度以及技术能力的影响。如果每个人都勤奋、务实、努力工作，我们的软件会好得多——按时交付、预算合理、没有错误。但我们并不完美，不幸的是，这在我们的代码中有所体现。

为了制定应对策略，我将带领大家进行一次导游之旅，参观一个程序员刻板印象的画廊。这些都是基于我在软件工厂遇到的人的类型。当然，这是一个必要的通用列表；你们会知道有些程序员不属于这里列出的类别，甚至同时符合几个描述。

尽管如此，这种无耻的分类突出了重要的事实，并展示了我们如何改进。我们将看到：

+   什么激励着不同类型的代码猴子

+   如何与他们每个人合作

+   每个代码猴子如何提升自己

+   我们可以从他们每个人身上学到什么

阅读每个代码猴子的描述时，请问自己：

+   你是这种类型的程序员吗？这个描述与你的编程风格有多接近？你可以从中学到什么来改进你的编码方法？

+   你认识多少这样的人？他们是你的亲密同事吗？你如何更好地与他们合作？

## 渴望的程序员

![渴望的程序员](img/tagoreillycom20080909nostarchimages207508.png.jpg)

我们将从这位先生开始，因为他^([3])可能体现了本书大多数阅读者的特质。渴望的程序员快速而短暂；他思考的是代码。一个冲动、天生的程序员，一旦头脑中形成想法，就会立即编写代码。他不会退后思考。因此，尽管渴望的程序员确实拥有非常好的技术技能，但他所编写的代码从未展现出他的真正潜力。

渴望的程序员经常尝试使用新的功能或习语，因为它们很时尚。他尝试新技巧的愿望意味着他在不合适的情况下也会应用技术。

**优点**

渴望的程序员在代码数量上很有效率。他们编写了大量的代码。他们喜欢学习新事物，对编程非常热情——甚至可以说是充满激情。渴望的程序员热爱他的工作，并且真心**想要**编写好的代码。

**弱点**

由于他无拘无束的热情，热心的程序员急躁，在匆忙进入代码编辑器之前没有思考。他确实写了很多代码，但由于他写得很快，所以存在缺陷——热心的程序员花费**大量时间**进行调试。一点前瞻性思维可以防止许多愚蠢的错误和许多时间来纠正粗心大意的小错误。

不幸的是，热心的程序员是一个糟糕的调试员。就像他匆忙进入编码一样，他会直接跳入调试。他不是有条理的，所以他会花费大量时间在死胡同里追查错误。

他对时间的估计能力很差。当一切顺利时，他会对情况做出合理的估计，但事情从来不会**按照计划进行**；他总是比预期花费更长的时间。

**如果你是其中一员，应该怎么做**

不要失去那份热情——这是程序员最好的特性之一。因为你的快乐在于看到程序运行并退后欣赏代码的美丽，找出实际的方法来做这件事。将单元测试作为代码开发的一个组成部分是一个很好的主意。但它主要归结为这条简单的建议：**停下来思考**。不要急躁。制定出对你有帮助的个人纪律，即使是像在便利贴上写上*THINK*并把它贴在显示器上这样基本的事情！

**如何与他们合作**

当他们工作得好的时候，这些人是一些最好的编程伙伴。关键是把他们的能量引导到有生产力的代码上，而不是无意义的挥霍。他们在结对编程中合作得很好。

询问一个热心的程序员他每天在做什么以及他的计划。对他的设计表示兴趣——这将鼓励他真正思考！如果你依赖一个热心的程序员的代码，请要求早期预发布版本，并要求查看他的单元测试。

热心的程序员从适当的管理中受益，这有助于他的纪律。确保他的时间被仔细地安排在项目计划中（你不需要亲自规划他的时间）。

## 代码猴子

![The Code Monkey](img/tagoreillycom20080909nostarchimages207510.png.jpg)

如果你需要无限数量的猴子，这些人将是你的首选。（不过我不建议这样做；你将需要挑选猴子**很长时间**！）

代码猴子编写的是稳固但缺乏灵感的代码。给定一个任务，他会忠诚地一步步完成，准备接受下一个任务。由于他们的低级工作，这些人也被称为**苦力程序员**。

代码猴子们性格内向。害怕争取好工作，他们在一些不引人注目的项目中边缘化。他们作为维护程序员，在先驱们编写令人兴奋的替代品时，保持老旧代码库的运行。

一个初级代码猴子在时间和指导的帮助下可以学习和进步，但他被分配了低风险的任务。一个年长的代码猴子可能已经停滞不前，并作为代码猴子退休。他会很乐意这样做。

**优点**

给他们一项任务，他们会完成它——相当不错，相当准时。代码猴子是可靠的，在关键时刻通常能够付出额外的努力。

与渴望的程序员不同，代码猴子是时间估算高手。他们是条理清晰且细致的。

**弱点**

尽管代码猴子小心谨慎且条理清晰，但他们不*跳出思维定式*。他们缺乏设计灵感和直觉。代码猴子会无条件的遵循现有的代码设计规范，而不是解决任何潜在的问题。由于他们不负责设计，他们不会对出现的问题承担责任，通常也不会主动去调查和修复这些问题。

教会代码猴子新东西很难；他们根本不感兴趣。

**如果你是其中一员，应该怎么做**

你想探索新的领域并扩大你的责任吗？如果是这样，开始通过个人项目练习来加强你的技能。找一些书来学习新技术。

推动承担更多责任，并主动提出参与设计工作。在你的当前工作中采取主动——尽早识别可能的失败点，并制定避免它们的计划。

**如何与他们合作**

不要轻视代码猴子，即使你拥有更强的技术技能或更大的责任。鼓励他——赞美他的代码，并教他提高工作效率的技术。

考虑周到地编写代码，使维护程序员（即维护代码猴子）的工作尽可能容易。

## 大师

![大师](img/tagoreillycom20080909nostarchimages207512.png.jpg)

这就是传说中的神秘天才：一个程序巫师。大师通常很安静、谦逊，甚至有点古怪.^([4]) 他编写出色的代码，但与凡人沟通不佳。

大师被单独留下来处理基础工作：框架、架构、内核等。他受到同事应有的尊重（有时甚至有些恐惧）。

全知全能，大师无所不知，无所不见。在任何技术讨论中，他都会出现，并发表他的专业意见。

**优点**

大师是经验丰富的魔术师。他们知道所有的现代技术，并了解哪些旧技巧更好。（大师最初发明了所有酷炫的技术。）他们拥有丰富的经验，并编写成熟且易于维护的代码。

一个好大师是一位出色的导师——从他那里可以学到很多东西。

**弱点**

很少有大师擅长沟通。他们并不总是口吃，但他们的想法飞快，水平远超常人，所以很难跟上他们。与大师的对话会让你感到愚蠢、困惑，或者两者兼而有之。

大师的沟通技巧越差，他作为导师的表现就越糟糕。大师们很难理解为什么别人不知道得和他们一样多，或者思考得不够快。

**如果你是其中一员，应该怎么做**

尝试从你的云端下来，生活在现实世界中。不要期望每个人都像你一样快，或者用和你一样的方式思考。解释某事简单明了需要很多技巧。练习这一点。

**如何与他们合作**

如果你遇到了一位大师，就要向他学习。吸收你能吸收的一切——不仅仅是技术方面的。成为大师需要一定的气质和个性——知识但不要傲慢。注意这一点。

## 半大师

![半大师](img/tagoreillycom20080909nostarchimages207514.png.jpg)

半大师**认为自己**是天才。他不是。他谈得头头是道，但都是废话。

这可能是最危险类型的代码猴子；半大师很难被发现，直到破坏已经造成。管理者认为他是天才，因为他听起来很有说服力，自信满满。

半大师通常比大师更聒噪。他更自吹自擂，更自以为是。他自封为权威。**(另一方面，大师是由他们的同行**认可的专家。)

**优点**

假设半大师没有任何优点，但他的巨大优势是他对自己的信念。信任自己的能力，确信你写的代码质量高。然而……

**弱点**

半大师的巨大弱点是他对自己的**信念**。他高估了自己的能力，他的决定将危及你项目的成功。他是一个严重的负担。

即使半大师已经转移到新的领域，他也会继续困扰你。你将留下他糟糕的设计和过于聪明的代码的后果。

**如果你是这种人应该怎么做**

现在，诚实地评估你的技能。不要过分夸大自己。野心是好事；假装成你不是的人是不对的。

你可能并非有意为之，所以对于你能做什么和不能做什么要客观。更多地关注你软件的质量，而不是你看起来多么重要或聪明。

**如何与他们合作**

要非常、非常小心。

一旦你识别出半大师，你就赢得了半场战斗。他大部分能造成的破坏都会在你还没有完全了解他的时候发生。仔细观察半大师：你必须过滤掉他说的垃圾话，与他有缺陷的设计搏斗，检查他糟糕的代码。

## 傲慢的天才

![傲慢的天才](img/tagoreillycom20080909nostarchimages207516.png.jpg)

这个人是大师种类的一个微妙但重要的变化。他是一个杀手级的程序员，他速度快、效率高，写的代码质量好。他不是完全的大师，但他很受欢迎。**但是**，因为他太清楚自己的技能，所以他自负、傲慢、贬低他人。

天才极其好斗，因为他通常是对的，总是必须推广自己的正确观点，而不仅仅是别人的错误观点。他已经习惯了这一点。最令人烦恼的是，大多数时候，他**确实**是对的，所以你注定会输给他。如果你是对的，他会继续争论，直到争论转移到他**确实**是对的某个问题上。

**优势**

天才拥有相当的技术技能。他可以提供强大的技术领导力，并在每个人都同意他时催化团队。

**劣势**

天才不喜欢被证明是错的，他们认为他们必须**始终**是对的。他们觉得自己有义务充当权威；天才对一切了如指掌。他们永远不会说**我不知道**，完全绕过了谦卑。

**如果你是天才，你应该怎么做**

并非每个人都达到神一般的地位，但有很多值得尊敬的优秀程序员。认识到这一点。练习谦卑，尊重他人的观点。

寻找那些可能拥有更丰富观点的人，并向他们学习。永远不要假装或掩饰你的不成熟——诚实地面对你所知和所不知。

**如何与他们合作**

*确实*要尊重天才，并尊重他周围的**其他程序员**。避免与他发生无建设性的争吵。但坚守立场——坚持你的合理观点和看法。不要被他吓倒。与技术天才讨论技术问题可以使你成为一名更好的程序员；只是首先学会控制你的情绪。如果你知道自己是对的，就争取盟友来帮助与他争论。

注意并避免自己变得傲慢或好斗。

**个人特质**

这种程序员态度的分类并不特别科学。心理学家已经设计了更正式的性格分类；权威地称呼你为怪人。他们并不专注于软件开发世界，但确实为程序员的行为提供了有价值的见解。

*迈尔斯-布里格斯类型指标*可能是最受欢迎的工具。（布里格斯 80）它将你的性格分解为四个维度：外向（E）或内向（I）；感觉（S）或直觉（N）；思考（T）或情感（F）；以及判断（J）或感知（P）。这种分类产生了一个四字母的描述符；ISTJ 对于程序员来说很常见。

贝尔宾的团队角色是一种态度分类，定义为*以特定方式行为、贡献和与他人互动的倾向*。（贝尔宾 81）这是一种描述你的自然社交行为和建立关系能力的方法，以确定它如何帮助或阻碍团队进步。它显示了你的性格类型如何影响你的团队合作技能。贝尔宾确定了九种具体的行为角色：三个以行动为导向，三个以人为导向，以及三个以头脑为导向。理解这些使我们能够从具有互补技能的人中构建有效的团队；如果每个程序员都是协调者，那么什么都不会完成。

这两种人格分类学都没有与我程序员分类的一对一映射。它们也明显缺乏灵长类动物。

## **牛仔**

![牛仔](img/tagoreillycom20080909nostarchimages207518.png.jpg)

牛仔是一个糟糕的程序员，他积极地避免艰苦的工作。他会找到尽可能多的捷径。有些人会错误地将这个人归类为*黑客*。他并不是在传统意义上的*黑客*。*黑客*是极客们用来自豪地描述一个英勇的程序员的一个术语.^([5])

牛仔直接跳入代码，并做最少的努力来解决眼前的问题。他不会在乎这并不是一个非常好的解决方案，如果它破坏了代码结构，或者不会满足未来的需求。

牛仔急于完成每个任务并继续下一个。如果他读过一点关于流程的内容，他会称之为敏捷编程。这实际上只是懒惰。

**优点**

牛仔的代码*是有效的*，但并不特别优雅。牛仔喜欢学习新事物，但很少有时间去做（因为这太像艰苦的工作了）。

**缺点**

你会花费很长时间清理牛仔留下的烂摊子。他的后果是一个不愉快的地方。牛仔的代码总是需要后续的修复、重做和重构。他们使用的技巧有限，并且没有真正的工程技能。

**如果你是其中之一，应该怎么做**

在正确的意义上学习*黑客*代码。为你的工作感到自豪，并花更多的时间在上面。承认你的不足，并努力改进。

**如何与他们合作**

永远不要进入牛仔的房子；如果他的代码可以作为一个依据，那将会是一个 DIY 灾难！理解他们并不是恶意的人，只是有点懒惰。组织他们的代码审查。让他进行结对编程。（牛仔可能和渴望的程序员合作得很好；如果你想看到羽毛飞舞，就让他和规划者配对。）

## **规划者**

![规划者](img/tagoreillycom20080909nostarchimages207520.png.jpg)

规划者思考得太多，以至于在开始编写任何代码之前，项目就已经被搁置了。

的确，你*必须*提前规划并建立一致的设计，但这个人会围绕自己形成一个无法穿透的茧，拒绝与外界接触，直到他完成。与此同时，周围的一切都在变化。

学识渊博，规划者学习和阅读了很多。一个常见的亚种是流程小丑；他了解所有的“正确开发流程”，但在截止日期或完成任务方面很弱。（流程小丑最终会成为中层管理者，然后他们就会被解雇。）

**优点**

他们确实设计。他们确实思考。他们不会编写无脑的代码。

**缺点**

当规划师开始工作，存在一个很大的风险是*过度设计*。他倾向于创建非常复杂的系统。规划师是*分析瘫痪*的关键原因——开发变得更加关注方法和建模，而不是原型设计和创造解决方案。规划师喜欢生成无尽的文档，每隔一小时就召开会议。

他花了很多时间思考，但做事情的时间不够。他知道很多，但并不是所有都从理论跃迁到实践。

**如果你是其中一员，该怎么办**

在一开始就创建细致的设计是很重要的，但考虑逐步开发和原型设计作为验证设计的方法。有时，直到你真正开始实施，你才能承诺一个设计。只有那时，你才会欣赏到所有的问题。

努力在规划和行动之间建立更好的平衡。安慰自己，花太多时间设计总比写出糟糕的代码要好——后者更难修复。

**如何与他们合作**

提前就规划师工作的所有里程碑和截止日期达成一致。加入一个*设计完成*的里程碑；规划师会很高兴它被认可为重要的任务，并会鼓励他按时完成设计工作。这通常足以使规划师采取行动。

避免与规划师开会。你将花费一个小时争论如何决定议程。

## 老手

![老手](img/tagoreillycom20080909nostarchimages207522.png.jpg)

这位老兄是老派的资深程序员。坐下来，听他回忆那些美好的旧时光，当时他使用穿孔卡片，机器没有足够的内存来存储整数加法的结果。

老手要么很高兴自己还在做他最喜欢的事情，要么因为无数次错过晋升而感到痛苦。他见过了所有的事情，知道所有答案，而且不会学习新技巧（他会告诉你没有什么新东西可以学；我们只是重新包装了旧想法）。他不愿意学习新语言：“我不需要 C++。我可以用汇编语言过得很好，非常感谢。”

老手不乐意忍受傻瓜。他有点古怪，容易烦躁。

**优势**

他编程多年，因此积累了相当的经验和智慧。老手对编码有一个成熟的方法。他已经学会了哪些品质使程序变得好或坏，以及如何避免常见的陷阱。

**劣势**

老手不愿意学习新技术。对那些承诺很多但实际交付很少的时尚想法感到厌倦，他有点迟钝，可能对改变有抵触。

多年的公司无能让他几乎没有耐心。他经历了无数紧迫的最后期限和不合理的经理。

**如果你是其中一员，该怎么办**

不要对年轻、更有热情的程序员过于评判。你曾经和他们一样，你的代码也不差，对吧？

**如何与他们合作**

*你们这些年轻的程序员不知道你们有多幸运*。不要与老程序员纠缠，否则你会知道他是如何在软件工厂中生存这么长时间的。明智地选择与他战斗，向他表示尊重，但把他当作一个同伴，而不是一个神。

理解老程序员的动机。找出他是出于热爱编程，还是因为处于职业死胡同。

## 狂热者

![狂热者](img/tagoreillycom20080909nostarchimages207524.png.jpg)

狂热者是被洗脑的皈依者，一个盲目认为 BigCo 生产的每样东西都是优秀的门徒。青少年有摇滚明星崇拜；程序员有自己的偶像。在热情洋溢中，狂热者自告奋勇成为无偿的技术传教士。他会试图将 BigCo 的产品融入到他接受的每一个任务中。

狂热者只追随 BigCo，排斥所有其他方法，并且很少了解替代方案。任何在当前 BigCo 产品线中不是优秀的，都肯定会在下一个版本中得到修复，我们必须立即升级到这个版本。⁶

**优点**

他对 BigCo 的产品了如指掌，并会基于它们产生真正优秀的设计。他在该技术上是富有成效的，但并不一定是最高效的——其他不熟悉的方法可能更有效。

**弱点**

作为狂热者，他既不客观也不实际。可能存在更好的非 BigCo 设计，他会错过。更糟糕的是，狂热者对 BigCo 的持续抱怨。

**如果你是狂热者该怎么办**

没有人期望你离开你钟爱的 BigCo。了解其技术和知道如何部署它们是有价值的。但不要成为技术教条主义者。拥抱不同的方法和新的思维方式。不要带着优越感看待它们或预先判断它们。

**如何与他们合作**

不要与狂热者进行哲学争论。不要试图解释你偏好的技术的优点——他不会听的。小心：与这个人的一次对话可能会让你也变成狂热者。他具有传染性。

狂热者通常是无害的（并且从远处观看很有趣），除非你的项目处于关键设计阶段。在这个阶段，提供对问题领域的清晰、无偏见的观点，并坚持对所有实现方法进行彻底评估。记住：他可能是对的。

如果你遇到愚蠢的争论，就用你准备充分、准确、详细的信息来反驳，关于你方法的优势和他的方法的弱点。

## 单一文化程序员

![单一文化程序员](img/tagoreillycom20080909nostarchimages207526.png.jpg)

这是典型的极客，一个生活在技术中、呼吸着技术的男人。这是他的一生；他可能梦寐以求。

单一文化程序员有一个显著的一心多用的大脑。他把工作带回家，回来时已经设计并编写了整个系统，修复了所有主要错误，并制定了如何实施项目其余部分计划。在你吃早餐之前，他已经全部完成了。

**优点**

单一文化程序员专注且坚定。他会确保项目能够成功，或者他会拼尽全力。他愿意投入大量的额外努力，在截止日期临近时，他非常有用。

**弱点**

他期望别人像他一样痴迷和专注，并可能不赞成那些不是这样的人。他最大的危险是忽视事情，因为他总是离问题太近。

**如果你是其中一员怎么办**

开始集邮——或者任何东西——以帮助你放松。*只工作不玩耍，聪明孩子也变傻*。但你可能根本不在乎。

**如何与他们合作**

这些人很好合作。他们的热情具有传染性，当他们加入时，项目会迅速推进。但不要让他们接管。如果有机会，单一文化程序员也会做你所有的任务！虽然听起来不错，但你将不得不维护外来的代码。这不值得麻烦。

不要担心他们缺乏个人生活，也不要感到有压力要花所有的时间在项目上——有时最好的设计工具就是放松的夜晚。

## 懒散者

![懒散者](img/tagoreillycom20080909nostarchimages207528.png.jpg)

懒散者是工作懒惰的懒虫。他很难被发现，因为他学会了让自己看起来工作负担很重。他的“设计”是打单人纸牌，他的“研究”是浏览网上的跑车，他的“实施”是忙于自己的事情。懒散者积极避免所有任务。（哦，我太忙了，根本没时间做那件事。）

更微妙的懒散者只会做他想做的事情或他认为应该做的事情，而不是他应该做的事情。尽管他一直在工作，但他永远不会完成他的工作。

懒散者知道如何享受乐趣。他聚会过多，通常可以在他的桌子下找到他睡觉。他的饮食主要由咖啡组成，除了午餐时间，那时你会在酒吧找到他。

这个人可能会变得疲惫不堪；太多的失败项目已经杀死了他工作的欲望。

**优点**

至少他知道如何享受乐趣。

**弱点**

懒散者是一个明显的缺点。很难证明他在偷懒——一些难题确实需要一段时间才能解决。程序员可能并不是在偷懒；他可能只是没有足够的技能快速解决问题。

**如果你是其中一员怎么办**

修炼你的道德，开始付出一些努力。或者学会忍受罪恶感。

**如何与他们合作**

最好不要抱怨懒散者——你也有自己的缺点。他会在适当的时候得到应有的惩罚。

采取措施证明你正在有效地工作，并且延误是懒散者的责任。可能有助于保持你工作的系统日记。一套明确的截止日期通常足以让懒散者开始工作。即使是在绝望中，也不要开始写他的东西。他只会期望你下次这样做。

避免自己过度劳累；工作时尽量保持乐趣。也许你应该有时和他一起去酒吧。

## 不情愿的团队领导者

![不情愿的团队领导者](img/tagoreillycom20080909nostarchimages207530.png.jpg)

这是组织经典案例；一个在没有任何进一步技术晋升途径的情况下被晋升为团队领导者的开发者。

你可以明显看出他在这角色中感到不舒服。他没有正确的技能集，而且他努力保持跟进。他是一个程序员，他想要编程。这个人不是天生的组织者或人群管理者，而且他是个糟糕的沟通者。

大多数程序员都是糟糕的领导者。真正优秀的软件团队领导者很少；这需要一种既技术又组织的特定技能集。

不情愿的团队领导者通常非常温和且犹豫不决——否则他怎么会同意接受这份工作？他夹在开发团队和管理层之间，承担着进度延误和软件质量差的责备。他的表情变得越来越焦虑，直到最终精疲力竭。

**优势**

不情愿的团队领导者对程序员的困境有真正的同情——他曾经在那里，现在希望回到那里。他通常非常愿意承担责任，以防止程序员被管理层欺负。正如他不好于分配工作一样，他也不擅长分配责任。

**劣势**

当一个团队领导者试图编写代码时，结果将是糟糕的。他永远没有足够的时间去编写、设计或仔细测试。他天真地计划在团队领导职责的同时，用一整天的时间进行编码。他无法完成所有工作，因此不情愿的团队领导者不得不在办公室待得越来越久，试图跟上进度。他无法很好地组织，无法向经理解释事情，也无法正确管理团队成员。

**如果你是其中一员，应该怎么做**

快速接受培训。

如果你在这个角色中不开心，争取职业变动。这并不是承认失败；做自己不喜欢且不擅长的事情而精疲力竭是毫无意义的。并不是每个人都有管理技能和热情。转到你既有技能又有热情的领域。

如果你喜欢艰巨的任务，试着整理你公司的晋升路径。让公司认识到，管理职位**不应**是高级开发人员之后的下一步。很少有程序员能成为合格的管理者；他们的思维方式不正确。

**如何与他们合作**

要有同情心，尽你所能去帮助团队领导。按时提交报告，并尽量按计划完成工作。如果你可能错过截止日期，尽早通知团队领导，以便他可以做出相应的计划。

## 你

![你](img/tagoreillycom20080909nostarchimages207532.png.jpg)

为了礼貌起见，我们不再多谈这个奇怪的家伙。遗憾的是，有些人已经无法帮助了……

* * *

^([1]) 这不是玩笑：我有一个朋友，她一生中只换过两次灯泡。第一次，玻璃碎片洒满了地毯。第二次，电工不得不之后安装一个新的灯座。

^([2]) Perl 程序员的座右铭。

^([3]) 我将描述所有代码猴子为男性，没有其他原因，只是为了行文的清晰性。

^([4]) 好吧，至少比“正常”程序员更奇怪。*古怪*可能是更礼貌的说法。

^([5]) 它也被无知的人滥用，错误地用来指代*黑客*——未经许可就闯入计算机系统的人。参见第 228 页的"CRACKER VS. HACKER"。

^([6]) 狂热者不仅崇拜软件供应商。狂热者可能是一个开源倡导者，或者渴望过时的软件包。

# 理想程序员

从这个混乱的局面来看，很明显我们是一个奇怪的群体。我们应该努力成为哪种代码猴子？哪种代码猴子鸡尾酒能创造出*理想程序员*？

不幸的是，在现实世界中，没有完美的程序员——这个怪物是一个都市传说。因此，这是一个学术问题，但找到答案将给我们一个目标去追求。

传说中的理想程序员是以下部分：

**政治家**

他必须要有外交手腕，能够处理这些奇怪的代码猴子的恶习以及软件工厂中居住的许多其他生物——经理、测试员、支持人员、客户、用户等等。

**关系型**

他与他人的合作良好。他对自己的代码没有领地意识，如果任务是为了公共利益，他不怕动手。他沟通能力强——他既能倾听也能交谈。

**艺术型**

他能够设计优雅的解决方案，并欣赏高质量实现的美学方面。

**技术天才**

他编写的是稳固、工业级的代码。他拥有广泛的技术技能，并懂得何时以及如何应用它们。

再次阅读这个列表，很明显我们应该成为什么样的人。如果你还没有意识到，我会明确指出：理想的程序员是一个

![理想程序员](img/tagoreillycom20080909nostarchimages207534.png.jpg)

好吧，那是一个值得追求的目标。

# 那又如何？

只有最聪明和最愚蠢的人永远不会改变。

-- 孔子

当你盯着这些代码猴子的笼子看，并嘲笑他们时，这很有趣，但对此你该怎么办？如果你什么都不做，那么这仅仅是一种娱乐；你将离开，继续做你一直以来的愚蠢事情。

要作为程序员改进，你必须改变。改变是困难的——它与我们本性相悖。俗话说，豹子不会改变它的斑点。如果他改变了，他就不再是豹子了。也许这就是关键。我们中更多的人应该成为野牛或犀牛。

抽空思考以下问题。你可能会发现使用本章末尾的*行动清单*来记录你的答案很有用。

1.  你最像哪种代码猴子？如果你诚实，你身上可能都有一点。找出最能描述你的那一个或两个。

1.  你的特别优势和劣势是什么？

1.  再次审视你的代码猴子描述，看看你可以做出哪些实际改变。哪些具体技巧能帮助你克服不良态度？你如何利用你的优点？

**关键概念**

*了解你是什么样的程序员。确定如何利用你的优势并弥补你的劣势*。

# 最愚蠢的人

为了帮助我们思考所需的变化类型，我们能从每个代码猴子那里学到什么教训？我们都有各自的个性缺陷，但这个总结显示了一些良好的态度和几个需要改进的常见领域。要成为一名优秀的程序员，你必须学会

![最愚蠢的人](img/tagoreillycom20080909nostarchimages207536.png.jpg)

那就是：

**团队玩家**

学习与他人有效合作。尽量理解每位同事的独特特点，并学习如何更好地应对他们。

**诚实且谦逊**

对你的能力保持现实：了解你的优势和劣势。不要假装你更有能力。采取一种寻求帮助他人并有效与他们合作的态度。

**持续改进**

无论你知道多少，你有多少经验，你的代码有多好，总有更多要学习的东西，新的技能要掌握，不良态度要克服。孔子说：“真正的知识是知道自己的无知。”承认你不是完美的。一个优秀的程序员处于不断改进的状态。

**体贴**

训练自己始终思考你在做什么。当你没有注意时，愚蠢的错误就会悄悄进来。始终使用你的大脑。在你写每一行代码之前，考虑你在做什么。然后回读你所写的，即使它只是一个简单的更改。

**敏锐**

尽量保持渴望的编码者的热情。如果你热爱学习新技能，那么继续阅读并继续练习。如果你在定期休息时工作得最好，那么计划你的假期！如果你喜欢面对新挑战，那么将自己置于最能激发你的位置。

如果你变得沉闷无聊，你的态度会变差，你的代码质量也会受到影响。

# 简而言之

达尔文人，尽管行为良好，充其量只是一个剃了毛的猴子！

--吉尔伯特和萨利文

程序员是一种社会性生物（考虑到他们缺乏社交技巧，这很奇怪）。他们出于必要性而社交；没有紧密合作的程序员团队，你无法创建优秀的大型软件系统（无论是部门、公司还是开源文化）。

每个程序员都有自己的缺点和独特之处。他们潜在的态度影响着他们的编程能力，塑造了他们对代码和与队友关系的处理方式。

如果你想要成为一名杰出的程序员，你需要培养正确的积极态度。记住：目标是成为一个**笨拙的实践者**。

| 好程序员…… | 坏程序员…… |
| --- | --- |

|

+   是**PRAT**：政治家、关系型、艺术型和技术型

+   是**PRAT**：政治家、关系型、艺术型和技术型

|

+   不对编写好代码感兴趣

+   不擅长团队合作

+   尽量表现得比他们实际更好

+   停滞不前——他们不寻求自我改进

|

# 参见

第十七章

深入讨论团队动态。

![参见](img/tagoreillycom20080909nostarchimages207538.png.jpg)

# 行动计划表

看一下下面的行动计划表。花点时间填写它，并找出如何将你所学应用到实践中。

![行动计划表](img/tagoreillycom20080909nostarchimages207540.png)

# 激发思考

在第 532 页的"附录 A"部分可以找到对这些问题的详细讨论。

## 深思熟虑

1.  改变一个灯泡需要多少程序员？

1.  是热情但技能不足（不是无能）更好，还是非常有才华但缺乏动力更好？

    1.  谁会编写更好的代码？

    1.  哪个程序员更好？（不是同一件事。）

        是你的技术能力还是你的态度对塑造你编写的代码影响更大？

1.  我们编写的程序有多种不同类型，通过代码“遗产”来区分。以下类型代码的编写有何不同？

    1.  一个“玩具”程序

    1.  一个全新的系统

    1.  扩展现有系统

    1.  对旧代码库的维护工作

1.  如果编程是一种艺术，那么考虑和计划与直觉和直觉之间的正确平衡是什么？你是通过直觉还是通过计划来编程？

## 个人化思考

1.  如果你还没有做，请仔细填写上一页的行动计划表。确保你找出如何改进，并开始付诸行动！

1.  这里有一个有趣的游戏，你可以为你的开发团队设置，以帮助每个程序员找出他们自然的编码方法。

**团队**

如果你们很多人，可以分成三到五人的小团队。

**任务**

你是一支程序员团队，负责开发以下新产品。在可用的时间内，设计系统。解释你将如何将其拆分为组件，并在团队成员之间安排工作。

你现在不必编写代码（尽管如果你能展示一个工作原型可能会得到一些加分！），不要陷入完美主义（没有时间）；只需开始设计一些能工作的东西。

**系统**

由于 NASA 的大规模裁员，你成了整个团队，负责编写下一个火星探测器的控制软件。它必须能够：

+   驾车四处转转

+   拍照

+   测量大气条件

+   与地球控制通信

+   非常可靠

**时间限制**

这里是最好玩的部分。你只有五分钟时间。当然，这完全不合理，但它是我们项目时间表的绝佳隐喻。（只是看看时间的流逝……）

**之后**

看看人们是如何协作的。哪些团队最成功？哪些失败了？为什么？不同的人是如何处理任务的？这个任务的结果并不像人们尝试去完成它那样重要。

回答这类问题将清楚地显示出每个团队成员最像哪种代码猴子。

# 第十七章。我们站在一起

### **团队合作与个体程序员**

成功公式中最重要的单一因素是知道如何与人相处。

——西奥多·罗斯福

周六晚上，你正准备吃爆米花、喝饮料，准备看电影。也许你已经说服了一些毫无察觉的非计算机极客和你一起看。你没有告诉他们那是《黑客帝国》，对吧？

你正在观看的制作是众多致力于创造最终电影的团队付出的巨大努力的成果。虽然你可能看不到，但投入了成千上万的人时（人日，以及“神话”人月）。

当你看一些电影时，你可能会想知道他们是否真的应该费这个功夫。

将那庞大的协调努力与我们的软件开发方式进行比较。如果你试图自己制作一部电影，结果会很糟糕。没有人能独自制作一部电影——或者至少，不能制作一部好电影。要将完整的、编辑过的电影送到电视上需要更多的努力：市场营销、制造、分销、零售等等。也许你可以自己制作一个完整的“专业”软件包，但这需要非常长的时间。在商业世界中，谁会给你这样一个风险合同？

在大多数职业中，优质的产品是良好团队合作的成果。软件开发也不例外。事实上，团队合作对于项目的生存至关重要。一个效率低下的团队会迅速扼杀任何软件开发活动，让进步依赖于少数几个在巨大困难中工作的敬业人士。成为一名优秀的软件工程师不仅仅是成为一名优秀的程序员。你可能能在不到五行代码的情况下计算出 PI 的荒谬精度。做得好。但还有许多其他技能是必需的，其中之一就是团队合作。

**关键概念**

*团队合作是* 高质量软件开发者的一项基本技能。

在本章中，我们将探讨团队合作在我们程序员中的应用。我们将研究构成良好团队合作的因素以及我们如何提高团队效率。

# 我们的团队——整体图景

多年来，许多不同类型的团队共同合作，生产出软件产品。它们从高度正式的团队（办公室里的西装人士），具有严格的结构和定义的过程，到开源运动的新前沿工作，任何人都可以贡献，并且根据其价值进行变更。

这两种工作方法都取得了巨大的成功，也都遭遇了巨大的失败。IBM OS/360 和 Linux 内核分别是各自阵营的显著成功案例。阿丽亚娜 5 号是一次传奇性的失败——这个欧洲发射器在首次发射时爆炸，因为两个软件团队误解了正式定义的接口。Mozilla 是一个有趣的开放源代码失败案例——当网景开源其代码时，他们期望快速的开发和改进。与其它开源项目相比，Mozilla 几年的开发令人失望。

软件开发者通常参与不同层次的团队，每个团队都有不同的动态，需要不同水平的贡献。考虑以下场景：

+   你正在创建一个独特的软件组件，它是更大项目的一部分。你可以独立开发它，或者作为程序员团队的一部分：团队一。

+   该组件将融入更广泛的产品中。所有参与该产品的人员（包括任何硬件设计师、软件开发者、测试员以及其它非工程角色，如管理和营销）组成了团队二。

+   你也是一家可能同时开发许多不同产品的公司的成员——团队三。

在现实中，任何合理的大型软件开发公司都有更多层次的团队合作。这些层次在图 17-1 中展示，以及不同动态的例子。当不同团队互动时，团队间的动态引入了最复杂的团队合作考虑因素：政治和管理错误困扰着组织内部的协作。尽管一个公司实际上是一个大团队，但部门之间和群体之间有“他们和我们”的心态是很常见的。这不是有效产品开发的好环境。

![团队合作层次](img/tagoreillycom20080909nostarchimages207542.png.jpg)

**图 17-1. 团队合作的层次**

作为程序员，我们直接参与较小的团队活动层面：在我们的日常开发团队中。我们对这个层面有最大的控制和影响力。这是我们负责的层面，我们有权力做出设计和实现决策，并报告团队进度。程序员对高级团队的影响较小，但我们受到团队合作“大范围”的影响，就像我们受到团队合作“小范围”的影响一样，即使它不是那么明显。

开发团队的大小决定了共享软件开发工作的动态和性质，以及团队在组织食物链中的位置。一个单独的工程师负责所有的软件架构、设计和实现工作。在非常小的组织中，他们可能还需要负责收集需求并制定和执行详尽的测试计划。

一旦更多的开发者加入到这个组合中，编程任务的本质就会发生变化。它不再仅仅是关于编码技能；它需要社交互动、协调和沟通技巧。这就是你的团队合作技能会影响你构建的软件——无论是好是坏的地方。

**关键概念**

*你开发团队内部和外部的互动都会影响你产生的代码。注意它们是如何影响你的工作的*。

# 团队组织

软件开发团队的架构不可避免地受到管理方法和成员之间责任划分的影响。这两个因素自然会决定你工作的代码量和单元的大小。这表明我们产生的代码是由我们团队的架构所塑造的。

## 管理方法

一个项目可能以平等的方式管理，没有任何编码者比其他编码者更重要，或者在一个超级程序员/经理的领导下。编程团队可以被视为软件生产线的一部分：从上游团队接收设计，他们按照规格生产代码。1] 开明的软件工程师被赋予更多的自主权和责任。

任务可以在长期计划中提前分配数月（这些计划可能会迅速过时和不准确），或者通过在开发者完成上一个工作包时分配每个工作包来实现即时分配。程序员可能单独在其系统的各个部分工作，或者通过*结对编程*来分担责任和知识。

## 责任分工

责任轴决定了如何将开发工作分配给程序员：

+   在*垂直团队组织*中，你雇佣了一支通才团队，他们在许多角色中都有技能。他们各自被分配了一部分工作，并从头到尾实施它——从架构和设计，到实施和集成，再到开发测试和文档。

    这种方法的主要优势是开发者能够获得更广泛的技能，并在整个软件系统中变得更加经验丰富。每个特性都有一个关键开发者，因此在设计和实现上具有凝聚力。然而，通才昂贵且难以找到。他们不是所有领域的专家，因此解决某些问题需要更长的时间。由于由不同的开发者实现，因此不同特性之间的凝聚力可能较低。客户必须与更多的人合作，因为没有特定的联络点——每个开发者都需要提供输入以界定需求并验证设计。

    要使这种团队合作有效，你必须定义共同的标准和指南。你必须有良好的沟通以防止人们重复造轮子。必须尽早达成共识，确定一个共同的架构，否则将会出现混乱和随意性的系统。

+   相比之下，*水平组织团队*由一支专家团队组成，每个开发任务在他们之间分配，并在适当的时候使用他们的各自专长。由于每个工作方面（需求收集、设计、编码等）都是由专家完成的，因此应该具有更高的质量。

这与垂直安排有许多相反的特征：我们在不同的工作包之间建立凝聚力，但存在风险，即由于更多的人参与，每个工作包的凝聚力可能较差。团队外部的互动（与客户或其他公司部门）由少数专家完成。这对团队本身和外部联系来说更容易管理。

**一切都在对偶形式中进行**

结对编程是一种协作软件开发方法，在敏捷开发圈子中特别流行。它声称可以使程序员更有效率：更快地产生代码，错误更少。

两位开发者一起编码——在同一时间，在同一终端上。当一个人（驾驶员）输入代码时，另一个人（领航员）思考正在执行的内容，并充当第二双眼睛，在错误有机会出现之前将其消除。这对组合会定期交换角色。领航员能看到驾驶员可能忽略的后果，从而消除专注于正在输入的代码时的常见危险。两个人会想到解决任何问题的多种方法，因此更有可能找到最佳的代码设计。正因为这种不同寻常的紧密合作，结对编程最适合具有积极态度的才华横溢的程序员。

研究表明，一旦经过培训，两位程序员在特定任务上的生产力将超过两倍。根据《经济学人》杂志发布的数据，“犹他大学盐湖城的劳里·威廉姆斯表明，结对程序员比两个独立的个人程序员慢 15%，但产生的错误少 15%。由于测试和调试通常比初始编程成本高得多，这是一个令人印象深刻的结果。”（经济学人 01）

结对编程有许多优点。它促进了知识转移和辅导，增加了你的专注力（你不太可能做白日梦、打长途电话或走神），增加了纪律性，并减少了中断（与一个盯着空旷空间发呆的单个程序员相比，你不太可能打断两个紧密合作的程序员）。它作为一个早期的实时检查机制——即时代码审查——并带来更好的代码的好处。它是一个社会过程；有了合适的人，它可以提高士气（尽管当两个人相互摩擦时可能会造成灾难）。程序员们更深入地了解彼此，并更好地理解如何一起工作。结对编程促进了集体代码所有权，传播良好的编码文化和价值观，并强调开发过程。

你必须小心确保专家们协调得很好，并且他们能够看到每个工作包的终点，否则他们的工作将目光短浅。由于许多人在每个开发过程中参与，团队管理起来更困难；有更多的流程。这种安排需要良好的沟通、定义的过程和开发者之间的顺利交接。

没有一种“正确”的组织形式。哪一种最适合取决于团队成员、团队规模和工作的性质。实用安排可能位于中间。

## 组织和代码结构

团队的组织不可避免地会影响其产生的代码。这在软件传说中被称为康威定律。简单地说，它说：“如果你有四个小组在编写编译器，你将得到一个四遍编译器。”你的代码不可避免地会采取你互动团队的架构和动态。主要软件组件位于团队聚集的地方，它们的沟通遵循团队互动。当小组紧密合作时，组件通信简单且定义明确。当团队分离时，代码的交互笨拙。

我们自然地旨在在每个团队的工作之间创建明确的接口，以促进我们与该团队的互动。即使在某些情况下，深入到另一个组件的内部部分可能是一个有效且更好的方法，我们也会这样做。这样，团队可以培养任意划分；尽管我们的意图良好，但设计决策是由团队组成所强加的。

当然，封装和抽象本身并没有错；但它们必须出于正确的理由而设计。实际上，你应该让正在构建的代码来定义团队成员和组织。

**关键概念**

*围绕你正在构建的代码组织你的团队，而不是围绕团队组织你的代码*。

* * *

^([1]) 在这里，管理层期望的是可替代的商品级程序员，即“粗工程序员”。参见第 298 页的“代码猴子”。

# 团队协作工具

有一些基础工具帮助我们组织一个运作良好的软件团队。它们促进了协作，并有助于将联合开发从混乱提升到一个运转良好的机器。单独来看，它们不会使你成为一个指挥官级程序员团队，但它们是每个精英团队所依赖的军火库——有效软件开发者互动的先决条件。

**源代码控制**

开发团队围绕着源代码，这就是它所在的地方。源代码控制有助于协调谁在做什么以及何时做，提供了最终的最新代码快照，并允许你管理变更、撤销错误，并确保没有人错过源代码更新。在 100 人以上的团队和单人项目中，你都需要它。

**故障数据库**

我们已经探讨了它是如何帮助开发的（参见第 147 页的“故障跟踪系统”），但请注意它是如何促进团队间互动的：故障跟踪系统充当测试和开发之间的枢纽。它有助于组织测试和修复工作，优先处理故障，将问题分配给个人，并跟踪软件中的待修复问题。它确定了哪些故障是当前开发者的责任，哪些是测试者的。

**群件**

一个团队需要有效的沟通基础设施，尤其是在地理上分散的情况下。一个集中的日历、通讯录和会议预订系统提供了一个数字化的行政骨干。

你还需要一个机制来共享和协作文档。考虑使用维基（基于网络的社区文档工具）和内部新闻组（具有永久存储功能的电子邮件讨论板）来促进团队互动。

**一种方法**

建立一个定义明确且普遍理解的开发方法非常重要，否则工作将变得混乱，并且是临时性的。一个开发者会发布代码，而另一个会拒绝放手，直到代码经过彻底测试和调试。一个开发者会停止所有编码，直到生产出一个复杂详细的规范，而另一个会直接进入代码的原型设计。圣战是由比这更小的事情引起的。

一种方法定义了开发过程的细节，谁负责什么工作，以及工作是如何传递的。有了这个，每个开发者都知道期望什么，以及如何作为团队的一部分工作。你必须根据团队的大小、你正在生产的代码类型、人才、经验和人们的动态选择一个适当的方法。这在本章的第二十二章中有所描述。

**项目计划**

要以可预测、及时的方式产生任何工作，你需要一些组织。这是由项目计划提供的，详细说明了在开发过程中谁在做什么。为了有用，计划必须基于合理的估计，并随着任何所需的变化而保持更新。

程序员在估计方面臭名昭著地差，而经理在规划方面也臭名昭著地差。我们不应该被迫按照不切实际的项目计划工作。这是一个真正困难的问题，我们在第二十一章中进行了剖析。

# 团队疾病

从失败中恢复往往比从成功中建设更容易。

--迈克尔·艾斯纳

即使有优秀的程序员和出色的组织，你仍然可能有一个功能失调的团队。团队未能产生结果的原因有很多，就像我们给不同种类的程序员贴上标签一样，我们也可以识别出注定要失败的开发团队类别——以便了解我们能从他们身上学到什么。

这里有一些经典的团队灾难。在每种情况下，我们将看到：

+   特定的毁灭之路

+   警告信号（这样你就可以识别出你正在走向这个方向）

+   如何扭转陷入那条特定困境的团队

+   如何在那个团队环境中成为一名成功的程序员（有时甚至*尽管*团队）^([2])

希望你不会在以下列表中认出你当前的团队。

## 巴别塔

![巴别塔](img/tagoreillycom20080909nostarchimages207544.png.jpg)

就像圣经中的建造者一样，一个巴别塔式的团队遭受了巨大的沟通崩溃。一旦程序员无法沟通，开发工作就注定要失败——如果有什么能工作，那更可能是运气而不是设计。

在沟通无效的情况下，人们会做出错误的假设。工作片段会遗漏，潜在的错误案例会被忽视，错误会被遗忘，程序员会重复工作，接口会被误用，问题没有得到解决，微小的偏差，如果不被注意，会逐渐演变成巨大的项目延误，因为没有人监控进度。

原始的巴别塔建造者因多种口语语言而分裂.^([3]) 然而，跨国项目很少受到巴别塔综合症的影响——因为需要跨越语言障碍，人们会更加努力地沟通。

不仅不同的口语语言可以分隔开发者。不同的背景、方法、编程语言，甚至不同的个性都会导致团队成员之间相互误解。一个小小的困惑种子，如果得不到控制，最终会生根发芽；怨恨和挫败感会逐渐积累。在最糟糕的情况下，巴别塔团队最终会完全停止交流，每个程序员都坐在自己的角落里，做着自己的事情。

这种问题可能存在于直接软件团队内部，也可能存在于相互作用的团队之间。当开发者未能与测试人员交谈或管理层与开发脱节时，就会发生跨团队巴别塔综合症。

**警告信号**

当一个开发者懒得询问另一个开发者关于某事，觉得不值得费力时，你就知道你的团队正走向巴别塔。这种感觉会随着缺乏详细规范和模糊的代码契约而悄悄蔓延。你会看到太少或太多的电子邮件飞来飞去。太多的电子邮件意味着每个人都大声喊叫，没有人倾听：没有人有时间跟上不断的信息轰炸。

在通往巴别塔的道路上，没有团队会议，没有人确切知道项目中的情况。如果你随机挑选一个人，他们无法告诉你开发是否按计划进行。

**扭转局势**

与人们交谈。继续吧——打开闸门！很快他们都会这么做。

一旦问题恶化，巴别塔态度就很难纠正，因为士气已经被拖到了前所未有的低点，冷漠盛行，没有人相信改变是可能的。最有效的策略是努力提升团队士气，让开发者更加紧密地团结在一起。做一些社交活动来打破团队的沉闷：考虑团队建设练习，甚至简单的集体外出饮酒。有一天买披萨作为午餐，并与团队分享。

然后制定一些策略来强迫人们相互交流。创建小型焦点小组来规划新功能。让两个人负责一项设计工作。引入结对编程。

**成功策略**

面对这类问题，要写出优秀的代码，你必须非常自律。在开始一个工作包之前，确保它被严格定义。如果需要，自己编写规范，并将其发送给所有相关人员以获得他们的认可（提供评论的时间限制，说明没有反馈即视为同意）。然后，当你成功时，因为你会满足约定的规范，所以会变得清晰。

完全锁定所有外部代码接口，以便不会对您所依赖的内容或人们可以期待您代码的内容产生混淆。

## 独裁制

![独裁制](img/tagoreillycom20080909nostarchimages207546.png.jpg)

这是原始的*独角戏*，一个由意志坚定、个性强烈的领导者带领的团队，他通常是技术高超的程序员。其他程序员需要成为唯唯诺诺的人，即使他们不愿意，也要无条件地遵循独裁者的命令。

在某些团队中，这种方法运作得很好——有一个明智的仁慈领导者，以及尊重他的团队。当独裁者的个性不支持他的职位，或者当他在技术上标准不高时（参见第 300 页的“半神”），问题就会出现。如果他的自我意识阻碍了团队，团队就会陷入麻烦：他们会怨恨他，并且陷入挫败的停滞。

当这种团队有意为之时，它是一个等级制度，有明确的权威线。这种结构被 Frederick Brooks 比作*外科团队*。（Brooks 95）外科团队将最合格的、技术最精湛的个人，即首席外科医生，放在最上面：作为代码编写者，*不是*管理者。他执行大部分开发工作，如果发生不好的事情（如果病人死亡），他将承担最终责任。他有一支精心挑选的团队作为后盾。这包括一位执行较小、风险较低任务的初级外科医生，支持首席外科医生，并学习这一行。团队还涉及软件上的麻醉师、护士，以及可能更多初级外科医生学习技能（例如，缝合病人）。

这种团队存在两种危险。第一种是当外部压力迫使独裁者更多地扮演管理者的角色时；他的技术专长几乎保证了缺乏管理技能。他的焦点将远离软件，项目将崩溃。第二种危险是一个自封的独裁者，团队并不认可他。由于团队既没有结构也没有准备支持他的领导，工作流程将停滞。

**警示信号**

这种团队结构往往会缓慢而微妙地发展，一个潜在的独裁者会逐渐调整他的工作焦点，并假定他的权威水平。当你经常发现自己说：

+   *没有咨询我就不能做这件事……*。

+   *哦……如果我们这样做，他们会抱怨的*。

+   *但是……说我们必须先做……*。

**转折点**

如果你有一个不称职的独裁者作为团队领导者，那么你必须处理这种情况。否则，团队会在这个权威的暴君手下僵化。要么与他一起解决这些问题（坦白说，这不太可能成功——改变很难，尤其是对于那些自视甚高的人），要么通过向经理提出这个问题来将他从宝座上拉下来。

在推翻国王之后，你需要团队重组或一个新的国王。顶尖的外科医生很难找到，所以可能最好是重组团队。

**成功策略**

在一个（功能性的或功能失调的）独裁统治中，确定你的权力和责任水平。与真正有影响力的那个人讨论这个问题——你的经理或团队领导者。

然而，一旦你确立了你的正当开发角色，你（和其他程序员）仍然必须倾听并与独裁者合作，即使你不喜欢他的当前位置。否则，你们将无法很好地合作，也不会写出互补的代码。设计上必须有共识，否则软件将无法工作。

不要对独裁者无礼或粗鲁；这只会降低团队士气，让你更加愤怒。

## 发展民主

![发展民主](img/tagoreillycom20080909nostarchimages207548.png.jpg)

有句古老的谚语说，*人人生而平等*，在这里这一点得到了体现。这是一个由同等地位的人组成的团队——具有相似技能水平和互补个性的程序员们，他们以非等级的方式组织自己。这在企业界是一种不寻常的生物，企业界期望有人必须是老板。自我组织的团队的想法似乎是一种异端。然而，它已经被证明是一种可以很好地工作的团队模式。一些民主团队通过定期从他们中间选举出领导者，基于在这个项目阶段谁的需求技能最高，来管理团队。通常没有明确的领导者，所有决定都是通过共识做出的。开源开发通常遵循这种模式。

我们往往忘记了这句谚语的另一半：人人生而平等，但通过实践会逐渐分离。要使这种团队文化发挥作用，需要一套特殊的个人。以这种值得赞扬的原则为基础的团队的危险在于，随着团队的增长或当某个成员离开（那个将团队凝聚在一起做出决策的人）时，事情开始变得混乱。团队可能会失去焦点，无法达成一致，无法及时产生结果。在最坏的情况下，团队会永远争论一个单一的问题，沉思自己的肚脐，实际上从未取得任何成就。

在无休止的会议和循环讨论中，团队面临*分析瘫痪*的危险：专注于过程，而不是项目的交付。就像真正的民主一样，真正的团队业务可能会在政治斗争的海洋中迷失。

如果你有一个无效的团队领导，他无法做出决定，你可能会意外地陷入发展民主。这种笨拙的领导者会慢慢地自己退出，而自己没有意识到。沮丧的团队最终会共同接管他的角色——迫使做出决定并选择发展方向。

即使是有意建立的，民主在危机中也是一个特别困难的团队结构。如果个性摩擦阻止了选举出适合该情况的正确领导者，那么必须引入外部领导者来引导项目。

**警示信号**

你可以从一英里外闻到病态的民主的味道：决策速度像石头一样下降。如果有软件团队领导，那么每个人都会绕过他，而不是被他的犹豫不决所阻碍。他现在只是一个名义上的领导者；没有人认可他的权威或他实现任何事物的能力。

没有领导，没有人被分配负责每个任务；不清楚谁应该确保任务的完成，因此什么也不做。可能过去几周都没有完成规范，也没有明显的进展。

在猖獗的发展民主中，最小的决定都会迫使团队进入委员会模式，并需要几天时间才能得出结论。或者做出决定：比如说，先说“是”，直到我们决定做其他事情。“让你的‘是’就是‘是’，你的‘不’就是‘不’”，^([5]) 否则你将花费大量时间拆毁旧代码并重新编写，每当有人改变主意时。

你可能还会注意到，初级程序员感到被排斥，因为他们永远不会被选为领导者。

**转折点**

民主旨在消除一个特定的瓶颈：所有决定都必须由老板做出，而老板并不总是做出这些决定的最合适人选（尤其是当老板不是技术人员时）。在一个功能失调的民主中，没有决策过程，任何级别都没有做出决定。为了回到健康的民主，确保领导可以在团队中自由移动，并且更换领导是容易的。除非你有足够的潜在领导者，否则不要试图运行民主。

就像任何其他滑落的项目一样，确保问题对每个人都是可见的，无论是开发者还是经理。确保清楚谁应该对这个问题的责任——特别是如果这不是你的责任！

你可以通过展示一些坚定的意志来尝试纠正犹豫不决的民主；不要满足于让事情不断滑落。你可能会被命名为麻烦制造者，但最终你也会被命名为一个取得成果的人。但是，要小心成为半独裁者的风险作为反作用。

**成功策略**

为了你自己的精神健康，避免犹豫不决的人——那些无法决定最简单事情的人。

确保你被分配到项目的一个明确部分，并且有明确和现实的截止日期。这是对抗不确定领导波动的主要锚点。

## 卫星站

![卫星站](img/tagoreillycom20080909nostarchimages207550.png.jpg)

一个卫星团队——与主要开发团队分开——呈现了一个充满潜在痛苦和陷阱的世界。当团队的一部分物理上分离，就像被切断的肢体一样，作为一个整体工作变得困难。

卫星可能是一个完整的周边部门，或者是你直接软件团队中分离到不同地点的一部分。*远程办公*（在家工作）是一个特殊情况，卫星中只有一个人。

高层管理人员在总部以外的办公室并不罕见，但由于他们对日常编程活动的影响很小，这并不成问题。然而，如果开发团队中有一部分离得很远，那么你需要采取措施确保项目成功。你必须有意识地这样做——分割的团队不会偶然地一起工作。

编程需要紧密的团队合作，因为我们的代码片段必须紧密交互。任何威胁我们人际互动的东西也会威胁到我们的代码。卫星团队带来了这些威胁：

+   物理上分割的开发团队失去了在咖啡机旁自然发生的非正式、自发的对话。轻松动态合作的机遇消失了。随着它一起消失的是共享洞察力和对代码的团队理解。

+   开发过程中缺乏凝聚力。每个地点的本地实践和开发文化都会有所不同（即使只有细微的差别）。不一致的方法使得交接工作变得更加复杂。

+   由于你对卫星团队中的人不太了解，不可避免地存在信任和熟悉度的缺乏。出现了一种“他们和我们”的态度。

+   有句古老的谚语说，“眼不见，心不念。”当你不经常看到卫星程序员时，你会忘记他们，你不知道他们的进度，你也不会考虑你的工作是否对他们产生影响（技术上或程序上）。

+   卫星团队使得简单的对话变得困难。你需要更加关注其他程序员的日程安排；当他们开会或度假时。

+   跨国项目引入了时区问题。团队之间的沟通窗口较小，而黑暗期较长。

**警告信号**

地理上分割的团队很明显，但也要警惕同一办公室内的分离团队。将开发者分到不同的房间或甚至走廊的另一边，人为地造成了阻碍协作的隔阂。

要注意部门之间的分离。这同样可能造成损害。例如，测试团队通常与开发者分开，有时在另一间办公室或建筑物的不同部分。这真是个遗憾；它阻碍了团队之间的基本互动，结果是质量保证过程并不流畅。

**扭转局势**

卫星站团队并不一定注定失败；它只需要仔细的监控和管理。问题并非不可克服，但肯定是不方便的——如果可能的话，避免它们。

一个基本的生存策略是在项目早期让所有团队成员面对面交流。这有助于建立融洽、信任和理解。定期的会议甚至更好。当团队聚集时提供食物和饮料；这会让人们感到放松，并营造一个更社交的氛围。

将卫星安排得使其工作需要与母船的最小协作和协调。这将最小化任何通信问题的影响。

通过在早期定义不同站点工作之间的接口来避免代码交互问题。但要注意不要围绕团队设计你的代码；你可能不会创建最合适的设计。编程是一个做出实用选择的过程，所以要选择得当。

在卫星中，群件成为使沟通有效的必备工具。同时考虑在站点之间使用即时消息通信。记住：不要害怕电话！

**成功策略**

如果你必须与远程人员合作，确保你非常了解他们——无论是个人还是职业上。这会有很大的不同。你会知道他们如何反应，以及他们何时真诚或讽刺。努力对卫星程序员友好——当他们只在不方便的时候给你打电话时，很容易被误认为是一个脾气暴躁的白痴。

确保你确切地知道谁不在现场。了解每个人的名字，并找出他们做什么以及如何联系他们。努力提高你的沟通技巧。当你需要时，不要害怕联系某人：想想如果他们坐在你旁边，你会不会和他们交谈。

## 大峡谷

![大峡谷](img/tagoreillycom20080909nostarchimages207552.png.jpg)

这个团队由技能水平和经验处于光谱两端成员组成。存在明显的技能差距；高级开发人员和初级开发者之间的鸿沟尚未弥合，因此形成了两个截然不同的派系。在几乎每一个大峡谷团队中，这既是社会现象也是技术现象：初级程序员之间互相社交，而高级程序员之间也互相社交。当高级开发者坐在一个据点，而初级开发者在一个单独的贫民窟时，这并没有得到帮助。

大峡谷文化的形成往往具有历史性：一个项目开始时只有少数几位有经验的开发者，他们必须迅速建立架构并推出概念验证代码。他们自然地坐在一起，学会作为一个快速、团结的单元工作。随着项目的进展，需要更多的程序员，新成员被引入。由于现有的办公布局，他们被安排在边缘位置，并分配较小的编程任务，以便学习系统的结构。

如果不仔细检查，资深开发者会采取优越的态度，并俯视新程序员。他们分配一些小而繁琐的工作，并继续进行有趣的宏大设计工作。资深开发者认为，教一个新手了解大局需要过长的时间，这在某种程度上是正确的。这样，新程序员就永远没有机会获得责任和进行更有趣的编程。他们感到沮丧和幻灭。

新程序员想要学习这一行业，拥有青春的热情，并对编程充满激情。资深程序员可能有一个非常不同的（可能更世故的？）世界观，有管理或更高级开发角色的抱负。这些不同的个人动机将派系推向不同的方向。

**警示信号**

观察你所在的团队如何成长。仔细观察成员的构成和他们在工作分配中的情况。监控你团队的社交动态；不健康的团队会形成小圈子。

**转折点**

大峡谷问题在于团队没有融合；存在极端的派系。解决办法很简单：采用能够使他们融合的策略。例如：

+   改变座位安排，使派系相互交错。这可能消耗宝贵的开发时间，但一天的时间移动办公桌可能会赢得数周的生产力。

+   介绍团队会议以传播信息。

+   开始结对编程，混合资深和新程序员。让新手来驾驶，而资深程序员导航。这对资深程序员是一种纪律，对新手则是教育性的。

+   开始一个导师计划来培训新程序员。虽然这会强调技能差距，但它也会迫使派系更接近。

+   看看所有开发者的职位名称——它们是否培养了一种危险且不必要的等级制度？

**成功策略**

将每个人都视为平等，视为同伴。

+   如果你是一名资深程序员，要认识到新程序员需要学习。你曾经也是一个新手，并不理解世界是如何运作的。不要独占所有有趣的编程任务。愿意让别人承担责任。

+   如果你是一名新程序员，请要求更具挑战性的任务。寻求学习。尽可能好地完成当前任务；这将证明你已准备好承担更大的责任。

## 流沙

![流沙](img/tagoreillycom20080909nostarchimages207554.png.jpg)

只需一个人，一个坏苹果，一个不受控制的成员，就能让一个团队陷入困境。你需要一群优秀的程序员来组成一个优秀的团队，但只需要一个糟糕的程序员就能毁掉一个团队。一个陷入泥潭的团队无意中触犯了一个不规矩的成员。这可能是微妙的：可能没有人注意到问题开始的地方，而肇事者无意造成任何伤害。

你可能因为多种原因陷入泥潭：

+   一个技术上 *不称职的程序员*（可能是我们在第 302 页看到的牛仔程序员）加入了团队。这个人不容易立即被发现，在他编写糟糕的代码时，没有人会注意到。定时炸弹已经埋下，项目将停滞不前，直到他的混乱被清除并替换。

+   一个 *士气低落* 的成员就像是一片小小的乌云，使整个团队士气低落，吸走了所有的热情和快乐。在几周内，没有人愿意编写任何代码，他们都在考虑跳下最近的桥梁。

+   一个 *管理不善* 的管理者正在执行与优秀管理者完全相反的行动，不断改变决策，改变优先级，调整时间表，并向客户承诺不可能实现的事情。团队成员不知道自己处于什么位置，因为脚下的地面总是在移动。

+   一个 *时间扭曲* 程序员正在扭曲相对论定律，使得时间在他周围变慢。任何向他靠近的事物都需要一个异常漫长的时间来处理。他的决策停滞不前，编码工作无法完成，会议总是迟到，因为他无法准时开始。总有一个很好的理由——也许他正在做其他非常重要的工作——但他积累了大量任务，却从未着手处理。最终，其他程序员会感到厌倦，绕过他。

在一个泥潭团队中，一个成员的弱点可以迅速摧毁整个团队的生产力。当肇事者处于食物链的高层时，这尤其危险。他的责任越大，后果就越严重。

**警告信号**

寻找那个与团队格格不入的人。他是每个人都抱怨的人^([6])，或者那个总是独自工作的程序员（因为每个人都避开他）。

**扭转**

最激烈但可能也是最容易的解决办法是消除泥潭的原因。但首先你必须识别他，有时这相当困难。不公平解雇的呼声让管理者感到害怕，他们不太愿意因为少数人无法与他相处而解雇某人。要使这个计划发生，需要一些非常严重的无能。

因此，你必须找到一种方法来最小化他可能造成的混乱，或者找出更好地将他融入团队的方法。

**成功策略**

最重要的是：不要成为泥潭！^([7])

假设你不是，尽量尽可能多地保护自己免受沙坑团队成员的影响。为了你的血压，限制与他互动。不要过多依赖他的代码，并尽可能避免他的输入。不要被他的不良习惯所吸引，也不要对他过度反应——采取完全相反的行动，使事情变得更糟。

**工作中的糟糕管理者**

开发者是一个很好的团队。他们喜欢他们的工作。他们工作非常努力。遗憾的是，他们（最多）只有平庸的管理。

有一天早上，经理（看起来他那天特别倒霉）召开会议，抱怨开发者们不理解“现实世界”，他们偷懒，而且他们从未达到他设定的（不可能的）截止日期（因为他已经卖出了不存在的产品）。他注意到人们有时不在核心工作时间工作，从现在起每个人都必须这样做。否则。

这进行得非常顺利。

那天下午，程序员们一点工作都没做。什么都没做。他们决定严格按照核心工作时间工作：不再有无偿加班。我估计这位经理一挥手就至少减少了 50%的生产力和士气。

## 麦哲伦

![麦哲伦](img/tagoreillycom20080909nostarchimages207556.png.jpg)

就像一群可爱、毛茸茸的动物，有着从最近的悬崖上跳下去的疯狂冲动，这个团队非常愿意——甚至渴望——满足他们所接受的简报。即使简报是虚假的。

这个团队由非常信任、非常忠诚的成员组成。他们在技术上很胜任，但看不到他们具体指令之外的东西。他们的热情和渴望值得赞扬，但没有一个有远见的成员——一个会问“为什么”，会看到规格之外真正需求的人——这个团队始终处于危险之中，可能会交付所要求的东西，而不是真正需要的东西。

麦哲伦团队特别容易受到初创公司需求的影响。这种疾病始于管理者说：“快速写这段代码；我们稍后会正确地重做。”后来永远不会到来；相反，麦哲伦们听到：“公司需要更多的代码，快速，所以也赶紧快速加上去。”不久，团队文化变成了有人播放音乐时就跳舞。工作逐渐变得越来越困难，任务越来越艰巨，代码库质量不断下降。

最终，这个团队发现自己身处 60 英尺悬崖的底部，一片狼藉。游戏结束。

**警告信号**

如果你对你目前正在工作的规格不满意，你可能在一个麦哲伦团队中。如果你对当前项目没有信心，你只是一个代码雇佣兵。当你发现自己听着空洞的承诺，被不合理的工作所承诺，而且没有人争论或指出计划的缺陷时，你肯定是在麦哲伦国家。我们希望你在那里过得愉快。

**转型**

回顾你团队目前正在做的事情。不要停止工作，但看看从客户需求到最终交付的全过程。你正在工作的代码能提供最终所需的东西吗？它是一个短视的修补，不能经受住多年在你的代码库或多年使用中的考验吗？

**成功策略**

对你被分配的工作提出质疑。理解其动机。坚持良好的编程原则，并且永远不要相信除非你能看到它被安排在你相信的计划上，否则你将被允许稍后修复代码。

* * *

^([2]) 我并不声称这些策略能解决团队的一般问题；它们是故意采取的短视方法，以最小化问题的风险来完成任务。

^([3]) 创世记 11:1-9

^([4]) 通常这个人是一个技术专家，如贝尔宾团队角色定义的那样。

^([5]) 马太福音 5:37，除非你是巴别塔的建造者，在这种情况下，你的“是”可能是 Oui，你的“不”可能是 Nein！

^([6]) 他们会在他背后抱怨，这是将团队拖入泥潭的一部分。没有人直面问题。没有人喜欢搅动局面。面对他的努力将比任何人都愿意投入的努力更多。

^([7]) 路加福音 6:42

# 优秀团队合作的个人技能和特点

当没有人关心谁得到赞誉时，所能完成的事情真是令人惊讶。

--罗伯特·耶茨

当然，并非每个团队都是注定要失败的。现在，让我们看看如何理清这个混乱，如何正确行事。在本章的其余部分，我们将探讨提高你的软件开发团队的技术，并希望避免这些陷阱。虽然工具和技术确实有助于提高生产力，但最大的收益与人与人之间及其工作的人类方面有关。

每个软件团队都由个人组成。为了开始提高你团队的表现，你可以从身边开始——通过解决你对团队和联合开发工作的态度。我们并非都是管理者，所以这实际上是我们能有所影响的真正主要领域。

要成为一名高质量的程序员，你必须是一名高质量的团队成员。在我们可以考虑他的编程语言熟练度或设计能力之前，一个有效的团队成员必须发展一系列非技术技能、特点和态度。

## 沟通

没有沟通，团队合作就死了。各个部分不能作为一个整体移动，没有沟通。目标和愿景不能共享，没有沟通。项目确实因为缺乏良好的沟通而失败。

团队内部沟通以多种方式进行：个人工程师之间的对话，电话，会议，书面规范，电子邮件往来，报告和即时消息。有时我们甚至用图片进行沟通！每种媒介都有特定的使用动态，最适合特定类型的讨论。

最有效的沟通应该涉及（或至少对相关方可见）所有相关方。它应该足够详细，但不应消耗太多时间或精力。它应该在合适的媒介中进行——例如，设计决策应该记录在书面规范中，而不是口头达成并口头传播。

我们已经看到代码本身也是一种沟通形式。程序员*必须*能够良好地沟通。这需要良好的输入和输出——即能够：

+   编写明确的规范，清晰地描述想法，并保持简洁。

+   正确阅读和理解规范，仔细倾听，并理解你所被告知的内容。

除了团队内部沟通外，我们还必须考虑团队之间的沟通。在大多数公司中常见的糟糕沟通的典型例子存在于市场营销部门和工程师之间。如果市场营销部门不询问工程师什么可行，那么它就会销售公司无法制造的产品。这个问题是循环的：一旦发生并且人们受到了伤害，两个团队就很少再互相交谈（因为怨恨）。然后它就会一次又一次地发生。

**关键概念**

*清晰的沟通渠道对于高效团队至关重要。它们必须建立并培养。优秀的程序员能够良好地沟通*。

## 谦逊

这是我们的职业中经常缺乏的一种基本特征。

谦逊的程序员希望为团队做出贡献。他们不会偷懒，让其他人做所有的工作。他们不相信自己是唯一有才能做出有价值贡献的人。

你不能把所有的好工作都留给自己；一个人做所有的事情是不可能的。你必须愿意让其他团队成员做出贡献——即使是你*想要*做的事情。

你应该倾听并重视他人的意见。你的观点不是唯一的，解决方案也不是唯一的。你并不一定知道解决每个问题的唯一或最佳方式。倾听他人，*尊重他们*，重视他们的工作，并向他们学习。

## 处理冲突

我们必须现实：有些人无法避免互相挑拨。在这种情况下，我们必须在态度上成熟和负责任，并学会避免（或学会解决）冲突情况。冲突和敌意会严重降低团队的表现。

然而，利用和引导的冲突可以是团队合作的重大成功因素。相互刺激和挑衅的队友能产生最佳的设计。分歧可以作为精炼过程，确保想法的有效性。知道你的工作将受到批判性的审视，这让你保持专注。

保持这种冲突的建设性——在严格的专业水平上，*而不是*个人层面上。

**沟通中断**

在我们高度互联的世界中，有众多沟通方式，我们必须学会有效地使用它们来支持和促进团队互动。关键在于理解它们的特定动态、礼仪和个体优点。

**电话**

最好用于需要紧急响应的沟通，电话会打断你正在做的事情。因此，对于非紧急事项来说，被打扰是不方便的：请使用另一种方法。随着移动电话的使用，我们比以前更加互联；这既是祝福也是诅咒。

由于只有音频，你无法看到对方的脸部或他们的微妙肢体语言提示。在电话中误解某人并得出错误结论很容易。

太多的技术人员害怕使用电话。不要害怕：对于紧急沟通来说，它是无价的。

**电子邮件**

一种异步的、非带外通信媒介。你可以指定紧急程度，但电子邮件永远不会立即到达；它不是实时对话。它是一种丰富的媒介，允许你快速发送附件并在方便的时候回复。它通常用于向多个收件人发送备忘录式的广播。

你的电子邮件历史提供了一个相对持久的通信记录。

电子邮件是一种极其强大的沟通机制。

你必须学会将电子邮件作为一种工具来使用，而不是成为它的奴隶。不要每收到一封新邮件就打开；你的编码工作会被频繁打断，你的生产力会受到影响。指定阅读邮件的时间，并坚持下去。

**即时消息**

一种快速、对话式的媒介，比电子邮件需要更多的关注，但比电话更容易被忽视或置于一旁。它是一个有趣且有用的中间地带。

**书面报告**

书面报告比电子邮件沟通更少对话性，但更永久。书面报告和规范是正式文件（见第十九章）。

他们需要更长的时间来准备，因此更难误解。书面报告通常会被审查和同意，因此它们更具约束力。

**会议**

尽管有所有这些现代技术魔法，但面对面交流仍然是快速有效地解决问题的好方法。程序员们往往试图避免人际互动（我们天生就不是社交物种！），但会议在我们的团队合作中占有宝贵的位置。我们将在第 340 页的"面对你的命运"中更详细地探讨这一点。

## 学习与适应性

你必须不断地学习新的技术技能，但你也必须学会团队合作。这不是天生的礼物。一个新的团队必须学习如何一起工作，了解每个成员的反应，每个成员的优缺点，以及如何利用个人技能为团队带来好处（有关更多信息，请参阅第 341 页的"团队成长"）。

爱默生写道：“我遇到的每一个人都在某种程度上比我优越。”看看你能从你的同伴那里得到什么。从他们所知道的东西中学习，了解他们的性格，了解他们的反应。学会与他们沟通。在所有层面上寻求他们的批评，从正式的代码审查到他们在谈话中提供的随意意见。

适应性与学习紧密相连。如果团队有一个开发者目前无法满足的需求，而且不可能引入外部资源，那么就需要找到解决方案。适应性的程序员能够快速学习新技能来填补空缺并为团队服务。

## 了解你的局限性

如果你承诺做你知道你做不到的工作，或者你发现你无法完成的工作，那么你应该尽快让你的经理知道这一点。否则，你将无法交付你的项目部分，整个团队将因此受到影响。

许多人认为承认无能是弱点的标志。不是的。承认你的局限性比成为团队中的失败点更好。一个好的经理会提供额外的资源来帮助你完成工作，在这个过程中，你将学会你之前缺乏的新技能。

# 团队合作原则

这些是关键团队信条，一旦融入你团队的 DNA 中，就会改变你编写软件的方式。它们将焦点从个人转移到软件及其协作开发。记住：为了让这些原则在你团队中有效，你必须有意识地朝着它们改变；不要只是同意它们是好的想法，然后继续像以前一样编码。

## 集体代码所有权

许多程序员对自己的工作非常具有领地性。这是自然的：编程是一个非常个人化和创造性的行为。当我们精心制作出一个优雅的模块时，我们不想让任何人践踏它，破坏这个杰作。那将是亵渎。

但有效的团队合作要求我们在进入软件工厂之前放下自我。不要抱怨“弗雷德篡改了我的代码。”这是一个团队努力的结果：代码不属于你，它属于团队。没有这种态度，每个程序员都会建立自己的帝国，而不是一个成功的软件系统。

**关键概念**

*没有任何程序员拥有代码库的任何部分。团队中的每个人都能够访问整个代码库，并且可以适当地对其进行修改*。

在这种文化下，团队保护自己免受小程序员国王的危险，每个程序员都统治着自己的代码岛屿。如果没有人被允许看到某个人的代码，当那个人离开项目时会发生什么？失去一个本地专家将严重损害团队。

对于你生产的代码感到一种家长式的责任感，保护它，并希望培育它，这并不错。但这一点必须与健康的团队焦点相结合。与其说是**所有权**，不如说是代码的**监护权**。监护人不拥有他们的责任，他们是受托代表所有者维护它们。监护人对代码的维护、除草和照顾边界负有主要责任。通常监护人是所有更改的执行者，尽管受信任的团队成员也可以进行更改，这些更改最终将由监护人验证。这是一种对代码的建设性方法，并且将对团队大有裨益。

## 尊重他人的代码

即使在没有代码所有权的开明开发文化中，你也必须仍然尊重他人的代码。不要随意对其进行篡改。这一点在他们在工作时尤其正确。你不能在另一个程序员的脚下改变某些东西；这会造成无法言喻的混乱。

尊重他人的代码意味着你应该尊重目前存在的呈现风格和设计选择。不要随意进行不适当的修改。尊重错误处理的方法。适当地注释你的更改。

避免制作那些你在代码审查中会感到尴尬的快速修复。这些修复在你需要快速让代码工作并且对其他地方进行微小调整时悄悄出现。如果你忘记整理这些调整，那么你就已经降低了别人的代码质量。即使是临时修改也必须表现出尊重。

## 代码规范

为了协作开发出合理的代码，你的团队**必须**有一套代码规范。这些规范规定了程序员必须遵循的代码标准，确保系统中的每一部分都达到一定的最低质量。

在代码布局上避免引起争论是很重要的（尽管所有代码遵循一种风格会更好）。然而，对于代码文档的标准和机制、语言使用和常用习语、接口创建的行为以及架构设计，必须达成共识。

即使没有这样的指南，仍然有一些团队：就像不成文的传统一样。这种隐含知识的问题是新团队成员的代码在他或她融入代码文化之前不会与现有代码库匹配。

## 定义成功

为了让他们觉得自己在取得成就，并且他们在一起工作得很好，团队成员需要一套明确的目标和目标。这必须不仅仅是项目计划中的里程碑，尽管里程碑*可以*是好的激励因素：定义许多小里程碑作为短期目标，并在达到它们时庆祝。

你必须定义成功的标准，这样团队就知道它是什么样子以及如何实现它。对你当前的项目来说，成功意味着什么？是按时交付工作，达到一定的质量，^([8])让客户满意，带来特定的收入，还是具有特定的错误数量？优先考虑这些因素，并让程序员知道他们开发工作的主要动机。这将改变他们的行为和做事方式。

## 定义责任

所有有效的团队都有一个明确的结构和清晰的责任。这并不意味着你的团队必须是一个毫无希望的等级制度，有着严格的等级秩序和多层管理。团队结构必须清晰且易于识别。它应该是清晰的：

+   谁对重要决策有最终决定权？谁负责预算，谁负责招聘/解雇决策，谁负责优先排序任务，谁批准设计，签署代码发布，管理进度，等等？这些不一定是团队内部的职位，但这些都是团队必须了解的职位。

+   如果项目是一个无法弥补的灾难，责任在哪里，谁的脑袋会滚？

+   成员的*责任*和*问责制*是什么？他们被分配了哪些个人权限，对他们有什么期望，他们要对谁负责？

## 避免疲劳

没有团队应该设定不可能实现的目标。对你即将着手的项目进行理智检查——知道失败不可避免是最缺乏激励的事情。

观察工作是如何在程序员之间分配的。避免将所有困难的工作或高风险的工作都分配给少数人。这是一个常见的错误，尤其是在团队培养程序员国王时。如果他们因为加班工作或担心错误的影响而筋疲力尽，他们将危及项目并打击团队的士气。

当团队表现良好且努力工作时，要向团队表示祝贺。公开地做这件事。不断向团队成员提供赞扬和鼓励。一些支持和热情是多么令人耳目一新。

打乱人们的职责；不要强迫某人反复做同一类任务，直到他们感到无聊并放弃。给每个人一个学习和培养新技能的机会。“改变就像休息一样好。”即使没有机会减缓发展步伐，一点多样性也可以防止程序员疲劳。

* * *

^([8]) 你将如何衡量这一点？

# 团队生命周期

聚在一起是开始，保持在一起是进步，一起工作是成功。

--亨利·福特

重要的是要从软件团队整个生命周期的角度看待它们。团队不是从地洞中突然出现的，它们也不会永远存在。

**关键概念**

*成功的团队是有意培养和管理的；它们不是偶然发生的*。

团队生活有四个不同的阶段：创建、成长、工作和关闭。在每个阶段，活动的重点都不同。有时你可能需要以不同的顺序迭代这些阶段几次，但每个团队都会经历每个阶段。主开发项目团队内的子团队将经历一个类似的过程；这是一个递归模型。我们将在下一节中详细探讨每个阶段。

## 团队创建

有一个新的项目即将到来。它需要一个开发团队。*各就各位。准备。出发*。由当权者任命一位领导者，他的责任是团结团队。成员可能来自其他团队或专门为这个项目雇佣。无论人们来自哪里，他们都必须作为一个有效的团队融合在一起——项目的成功（以及领导者的工作）取决于这一点！

所以一切从这里开始。组建确立了核心团队成员。在这个早期阶段，团队还没有开始认真工作，也没有真正团结起来。在团队形成过程中有许多重要的考虑因素：

+   您必须确定团队在组织食物链中的位置。它将与其他哪些团队进行交互？与他们建立沟通渠道，以便明确工作如何在部门之间流动以及联系人是谁。

    仔细思考这一点，并尽量减少团队边界之间的沟通，使工作尽可能简单。在这个阶段，你可以设计你的团队，使其有最大的成功机会，通过消除不必要的官僚开销。

+   为了有效，团队需要具备能力、有才华的成员，他们有潜力成为一个高性能的单一单位。他们必须在需要之前涵盖所有关键的经验和专业知识；否则，在寻找另一个人时，开发将停滞不前。根据需要制定团队成长计划，并确定何时开始寻找更多的人。

+   选择并传达一个合适的团队合作模式；否则，团队将采用临时结构并采取混乱的工作实践。安排团队结构以消除管理开销和内部沟通路径，尽可能保持灵活。

**接受命运的安排**

被困在软件工厂的程序员很快就会对会议产生厌恶，仅仅是因为他们被迫参加无数次会议，所有这些会议都很糟糕。会议消耗了大量的宝贵时间，这些时间本可以用来编程以防止项目灾难。同样的几个观点被无休止地辩论，直到会议结束，然后每个人都忘记了说过的话，并在下次会议上重复一遍。

要有效管理软件团队，我们必须学会有效召开会议。这并不难；只需一点计划和纪律。以下是一个七点指南，以最大限度地提高会议效率：战斗规则。责任落在召集会议的人身上：

1.  会议很重要且不可避免。当需要时不要回避召开会议。然而，当在走廊里进行非正式聊天就能更快解决问题且成本更低时，不要召开会议。

1.  提前充分通知会议——几天，而不是几小时。邀请合适的人：不要人太少（因为决策者缺席，无法完成工作），也不要人太多（因为每个人都努力让别人听到自己的声音，无法完成工作）。

1.  在合理的时间召开会议。不是在早上荒谬地早，那时只有一半的与会者是清醒的，也不是在一天结束时太晚，那时每个人都感到疲倦、沮丧，渴望回家。

1.  设定严格的时间限制，并提前宣布。坚持到底。这样，与会者就知道他们一天中剩余的时间可以用来做其他工作。如果你超时，将业务推迟到另一次会议。

1.  确保每个人都清楚会议的内容以及为什么被邀请参加。在会议通知中分发议程。确保需要提前准备的人知道他们预期的输入。

1.  确保每个人都清楚会议在哪里举行。确保地点有适当的设施：白板、电脑，甚至足够的椅子（这听起来很傻，但经常被忽视）。

1.  在会议开始前定义角色。你必须至少有：

    **主席**

    这个人负责主持会议，确保讨论围绕主题和议程进行。

    他或她确保会议按时结束，并得出合适的解决方案（可能是指安排另一次会议）。

    **秘书**

    这个人负责记录会议纪要，之后整理并分发给适当的听众（这可能是比会议参与者更多的群体）。

    **决策者**

    这些人有权对每个问题做出最终决定。如果没有明确的权威，讨论就会无休止地循环，无法得出结论。

理解会议的目的。大多数会议要么是**信息性**的（为了传播信息；与会者主要是被动的听众），要么是**冲突解决**（为了解决紧迫的问题）。要举办有效的会议，每个人都必须理解这一点并采取适当的行动。个人议程可能会迅速将信息性会议引向随机方向；主席必须注意到这一点，并防止人们为了自己的目的而劫持会议。

当组建团队时的初步目标是创建一个不仅仅是**群体**的东西。你不需要另一群人或者一个小型的社交俱乐部；你需要一个团结、有动力且目标一致的团队。

除非你真的知道团队存在的目的，否则不要将团队聚集在一起。如果人们被要求开始工作，但实际上没有给他们任何任务，他们被留下等待进一步的指示，那么团队的长期精神将会是保守；将永远存在未被挖掘的潜力。如果团队不能从一开始就开展工作，那么不要将他们聚集在一起。

## 团队增长

在创建后，一旦团队配备了核心人员，项目开始获得动力。团队必须增长以适应增加的工作量。这有几个方面：团队必须在人数上增长，但也必须在经验和视野上增长。它必须**内部**增长和**外部**增长。

### 内部团队增长

随着他们一起工作，团队成员在个人和专业层面上相互了解。团队逐渐形成工作模式，并建立了一种编码文化。最初，这必须微妙地引导，以确保文化健康，并为团队结构和目标服务。这被汤姆·德马克称为**凝固**；个人成员凝固成一个团结的团队的时刻。（德马克 99）

这个阶段将个人和团队目标对齐，并确定个人角色和关系。团队此时的感觉为整个项目定下了基调，因此要警惕怀疑或恶意。

如果还没有提供，随着工作的进行，团队基础设施将被建立。如源代码控制和群件等工具被部署。项目规范被编写，目标得到巩固，工作范围被确定。

### 外部团队增长

外部增长意味着成员数量的增加。这是团队增长的可见形式。在其顶峰时期，团队包含以下所有角色。这些角色不一定是个人职位名称；这取决于团队的大小。在小团队中，个人成员可能承担一个以上的角色，无论是全职还是兼职。大型项目可能每个角色都有整个部门。

**分析师**

编程团队和客户之间的联络。分析师（也称为**问题域专家**）对现实世界问题有足够的了解，足以编写开发者可以实施的规范。

**架构师**

一个高级设计权威，根据分析师的要求设计系统结构。

**数据库管理员**

设计并部署项目的数据库基础设施。

**设计师**

在架构师之下工作，设计系统的组件。这通常是程序员工作的一部分。

**程序员**

自然是整个团队中最重要的那个人！

**项目经理**

对项目承担总体责任，做出关键决策。经理平衡相互竞争的项目力量（例如，预算、截止日期、需求、功能集和软件质量）。

**项目管理员**

支持经理，处理项目团队日常运营。

**软件质量保证工程师**

制定 QA 计划并确保生成的代码达到适当的标准。

**用户教育者**

编写产品手册，确保营销信息准确无误，制定培训计划，等等。

**产品交付专家**

也被称为*发布工程师*，负责规划如何打包、制造、分发和安装最终产品。

**运维/支持工程师**

一旦产品落入最终用户手中，就在现场支持该产品。

一个成功的项目必须确保所有这些活动都得到覆盖。在需求变得迫切之前，需要根据每个角色的需求提前引入人员。任命成员需要管理洞察力，包括候选人的性格类型、其技术技能以及工作要求。一旦团队建立，新成员必须适应工作实践，并补充现有团队成员。

## 团队合作

这是团队在所有成员到位时充分发挥功能时的性能点。齿轮转动，软件构建过程不断向前推进。

团队的大部分时间都花在这个阶段，确定项目的目标。为此，将单一的大任务分解成一系列较小的任务。团队成员被分配自己的工作包，并保持同步（可能通过项目会议或通过密切沟通）。他们的工作在完成时进行整合。慢慢地，软件开始成形。

尽管按照预定的开发流程工作，但团队必须适应出现的任何变化：处理意外问题、团队变化或可怕的“需求变动综合症”。随着工作的进展，每个成员都必须识别和管理未解决的问题和风险。

团队必须进入一个开发节奏——找到适当的工作速度，并在每个步骤中达到目标。然而，你必须防止这种节奏变成一个固定的模式。不要害怕打破工作实践——如果需要的话——以确保团队不会变得自满或懒惰，或者对抗可能危及进度的不称职团队成员。

## 团队关闭

最终，即使是延迟最久的项目也会结束。这个结束可能是让客户满意的软件；它可能是一个注定失败的产品和过早放弃的开发。无论如何，项目结束了，团队被从项目中移除。

从开发一开始，就必须有一个清晰的终点。没有团队可以永远继续或无限期地计划工作。完成的诱惑实际上激励了人们，许多程序员直到面对硬性截止日期之前不会投入太多努力。

因此，每个团队都必须在项目完成后计划解散、解散或转型为不同类型的团队（可能是维护或支持团队）。此计划必须涵盖正常和异常完成条件。

团队解散不会突然发生。项目不会没有警告就停止；它们会逐渐减少。我们通常会在人员成为多余时逐渐将他们从项目中移除。没有团队需要人们无所事事，消耗资源。随着每个成员离开团队，确保捕捉到他们所有的重要知识和工作成果。信息在分裂的团队之间泄露是很常见的。

**关键概念**

*当团队成员离开团队时，不要丢失信息。进行交接，并从团队成员那里捕捉所有重要知识。包括*所有*代码文档、测试工具和维修说明。

当一个团队完成一个项目后会发生什么？你可以采取以下步骤之一：

+   将团队转移到支持模式，维护产品。

+   开始一些新的开发工作（可能是相同软件的新版本）。

+   如果项目失败，进行事后分析。

+   将团队拆分以分别处理不同的项目（或者如果他们的合同到期，就让他们解散）。

团队是否被回收或解散是一个困难的选择，而且通常选择得很糟糕。一个团队在一个项目上成功并不意味着他们在下一个项目上也会成功。一个新的项目可能需要不同的技能组合或不同的开发方法。然而，保持一个优秀的团队在一起是明智的。具有合格成员和有效工作文化的团队是罕见的。不要无谓地抛弃它们。

当有选择时，应根据下一个项目的特点来做出选择。有时这个选择是为你做出的：在小型开发组织中，项目团队*就是*整个开发团队。简单地混合和匹配程序员是不可能的，你被迫在下一个项目中使用相同的人。

**人力优势！**

这里有一些简单的指南，用于管理和维护一支软件开发团队。没有程序员，就没有程序，因此我们需要一些技术来释放人们的潜力并帮助他们共同工作。即使你现在不在领导岗位上，你也可以将这些指南作为一个简单的标准来评判你的团队是如何运作的，以及人们是如何被对待的。它们将我们已看到的许多智慧浓缩成实用的、易于消化的片段。

**使用更少但更好的人**。

大型团队需要更多的沟通线路和管理，提供更多的潜在故障点，更难共享愿景。

**根据能力分配任务，也要根据动机**。

避免彼得原理。9 优秀的程序员不应该被提升到他们不适合或不感兴趣的经理职位。

**投资于人**。

如果你能在他们身上建立一些东西，你就能从他们那里得到更多。技术发展迅速；不要让他们技能过时。否则，他们会去其他地方获得更好的经验。

**不要培养专家**。

当一个程序员成为某个领域的唯一专家时，这是危险的。那个人成为了一个单点故障。10 有些人积极尝试成为程序员之王，而有些人则被迫成为，不允许从事其他工作。当你的专家需要新的挑战时，他会离开。你现在将如何维护软件呢？

**选择互补的人才**。

团队成员不可能都是世界级的专家。同样，他们也不可能都是缺乏经验的程序员。你需要一个健康的技能组合。你还需要一个健康的人际关系组合，拥有能够很好地融合和合作的人格特质。

**消除失败**。

不合适的人应该被移除。这并不容易，但一个腐烂的部分可以迅速破坏整个团队——拖延的后果可能是灾难性的（参见第 330 页的"Quicksand"）。不要等待看事情会如何发展，或者只是希望他们会改善。处理这个问题。

团队成员是决定一个开发团队成败的关键。一个成功的组织会选择合适的人，并让每个人充分发挥其潜力。

* * *

9 来自劳伦斯·J·彼得博士的一个理论：成功的人被提升到他们最高水平的竞争力，一旦他们能够胜任那份工作，就会被提升一步——到他们不再胜任的水平。

10 项目经理们会开玩笑说一个项目的卡车号码：如果没有这个项目，有多少人可能会被卡车撞到。

# 简而言之

重要的是要认识到，这需要一支团队，团队应该得到成功和失败的认可。成功有很多人，失败则无人。

--菲利普·卡尔多

程序员真正关心的是编写好的代码，这一切都重要吗？是的：我们软件团队的健康和结构直接影响我们代码的健康和结构。它们是密不可分的。软件是由人编写的。正如软件组件必须相互配合、良好沟通并形成一个整体结构一样，构建它的程序员也必须如此。

良好的团队合作不仅仅来自一个定义良好的流程或固定的结构。良好的团队合作源于优秀的个人。俗话说，“整体大于部分之和”。当然，这只有在所有部分都正常工作时才成立。如果任何单个部分失败，整体就会受到影响。我们的个人态度会影响我们团队的质量，从而影响我们产生的代码。我们必须解决这些态度问题，以编写出好的代码。了解你的自然态度和反应将有助于提高你的编程技能。

一名专业的程序员*必须*能够团队合作。除了技术技能外，你必须能够创建一个能够融入更大拼图的作品。这意味着能够与他人沟通和合作。这意味着理解你的角色并适当执行，尽你所能工作。这意味着与其他团队成员合作，以团队为中心，而不是以自我为中心。

后续章节将进一步发展这些协作主题：我们将涵盖源代码控制、开发方法和估算与规划技术。

| 优秀的程序员... | 次要的程序员... |
| --- | --- |

|

+   对他们编写的代码没有领地意识

+   如果有助于推进软件系统，将执行任何类型的发展任务

+   在为团队做出贡献的同时学习和成长；他们有个人目标，但不会牺牲团队

+   是优秀的沟通者；他们总是倾听其他团队成员

+   谦逊，为团队服务，尊重和重视其他成员

|

+   努力建立代码帝国，使自己变得不可或缺

+   想做自己想做的事情，寻找最吸引人的任务

+   以牺牲团队效率为代价追求个人议程

+   总是想要坚持自己的个人观点

+   认为团队是为了服务他们，他们是团队中最好的成员——上帝赐予编程社区的礼物

|

# 参考内容

第十六章

优秀程序员的个人技能和特点。

第十八章

软件团队在代码上进行协作，没有源代码控制系统这几乎是无法实现的。

第二十二章

开发方法：团队如何互动和共同开发代码。

![参考内容](img/tagoreillycom20080909nostarchimages207558.png.jpg)

# 行动计划表

看看下面的行动计划表。花些时间填写它，并找出如何将你所学应用到实践中。

![行动表](img/tagoreillycom20080909nostarchimages207560.png)

# 开始思考

这些问题的详细讨论可以在第 533 页的"附录 A"部分找到。

## 沉思

1.  为什么要在团队中编写软件？与独自编写系统相比，真正的优势是什么？

1.  描述良好和不良团队合作的明显迹象。良好团队合作的先决条件是什么，不良团队合作的特点是什么？

1.  将软件团队合作与建筑隐喻进行比较（参见第 177 页的"我们真的在构建软件吗？"）。这揭示了我们对团队合作的哪些见解？

1.  外部或内部因素会对软件开发团队的效率造成最大的破坏？

1.  团队规模如何影响团队动态？

1.  你如何使团队免受不熟练成员造成的问题的影响？

## 个性化

1.  你现在在哪种类型的团队中工作？它与第 322 至 332 页上的哪些刻板印象最相似？

    1.  这是不是有意为之的？

    1.  这是一个健康的团队吗？

    1.  需要更改吗？

    你遇到了哪些因素阻碍了良好的团队合作？

    如果你还没有这样做，请仔细填写上一页的行动表。确保你制定出改进团队的方法，并开始做出改变。

1.  你是一个好的团队成员吗？你如何与队友更好地合作，并构建更好的软件？

1.  在你当前团队中，软件工程师的职责具体是什么？

# 第十八章。实践安全的源代码

### *源代码控制与自我控制*

高尚的人，在安全的环境中，不会忘记危险可能来临。在安全的状态下，他不会忘记毁灭的可能性。在一切有序时，他不会忘记混乱可能来临。因此，他本人不会受到威胁，他的国家及其所有部落都会得到保护。

--孔子

没有哪个大师珠宝匠会制作一条精美的钻石项链，然后把它放在一个未上锁的工作室里，任由路过的窃贼偷走。当汽车制造商将一款新车型推向市场时，他们不会立刻忘记如何支持和服务旧车型。这两者都会是专业（和财务）上的自杀，对有价值的工作持无所谓的态度。

我们编写的代码同样珍贵：我们投入了时间和精力，它不仅具有财务价值，而且情感上也非常重要。我们必须像保护其他珍贵物品一样保护源代码，并采取工作实践来确保我们不会破坏、危及或丢失它。

**关键概念**

*代码是有价值的。请尊重并妥善对待它*。

在本章中，我们将扮演监护人、保镖和看守的角色，制定出保护代码的基本技术，以确保我们的代码得到良好的保护。我们是在保护它免受谁（或什么）的侵害？以不同程度的戏剧性，我们正在与以下内容作斗争：

+   我们自己和我们的愚蠢错误

+   我们的队友和他们的愚蠢错误

+   协同开发过程中的固有问题

+   机械故障（爆炸的计算机和消失的硬盘）

+   想要利用软件的盗贼

你的理智、幸福，甚至你的生计都取决于本章的内容。那些在后面打瞌睡的人应该注意了！

# 我们的责任

作为负责任的软件工匠，我们必须对我们的工作负责。我们不仅要编写高质量的代码，还要确保我们的工作是：

**安全和可靠**

在三个月的开发后不会意外丢失，并且不能作为机密信息泄露到公司外部。

**可访问性**

适当的人可以轻松修改它。它对适当的人可见，而对其他人不可见。

**可重复性**

一旦发布，源代码就不会丢失或被丢弃。它仍然可以用来构建 10 年后仍然相同的应用程序镜像，当时工具版本已经改变，原始语言也不再受支持。

**可维护性**

这不仅包括使用良好的编程习惯，还要确保代码可以被整个编程团队修改。是否可以同时让多个程序员工作而不会导致灾难？在开发新产品版本的同时，是否可以修复和更新旧产品？

我们通过采用安全的发展实践来实现这些目标。在本章中，我们并不考虑我们正在运行的执行文件的安全性；^([1]) 我们关注的是我们的开发技术。这些问题可能看起来与编写代码的行为相去甚远，但我们不应低估它们的重要性。一门手艺不仅包括创造过程，还包括最终产品。

* * *

^([1]) 这在第十二章中有详细说明。

# 版本控制

为了团队成员能够协作进行代码开发，他们必须能够同时工作在代码库上。这并不像最初看起来那么简单——你必须确保并发代码修改不会相互干扰，并且在路上不会丢失任何工作。有一些低技术含量的代码协作方式：

+   最基本的是共享一台计算机并轮流编辑代码。两个程序员在没有争斗的情况下无法坐在同一把椅子上，因此不会有代码编辑冲突。然而，由于只有一个人可以同时编码，你将遭受巨大的生产力损失。

    你可以在机器前放两把椅子，进行结对编程以获得潜在的生产力提升（参见第 319 页的"IT'S ALL GOING PAIR SHAPED"）。但当三个、四个或更多的程序员都试图同时工作在相同的代码上时，这就不起作用了。

+   或者，你也可以将代码共享到网络文件服务器上。这样其他开发者可以看到源文件，甚至可以同时编辑它们。但这远非理想。代码虽然可以共享，但不安全，因为你无法阻止两个人同时编辑同一个文件。当他们都点击保存按钮时，这将会引起各种混乱——并且丢失工作。如果有人在构建过程中中途编辑了中央头文件，会发生什么？答案是：一个不一致的可执行文件，它可能会崩溃或以完全不可预测的方式运行。

因此，当编程团队从原始的数字汤中演变出来时，他们发明了*源代码控制*工具，作为源代码的中心存储库，提供访问权限，并管理源代码的并发修改。但即使你一个人工作，源代码控制也很重要；正如我们将看到的，中央代码库是一个极其有用的设施。

**关键概念**

*源代码控制是软件开发的一个*基本*工具。对于团队安全协作来说至关重要。

源代码控制允许一个人或多人以受控的方式在同一个*代码库*上工作，避免所有这些问题。它允许每个开发者创建（或*检出*）他或她自己的个人源代码库副本，并在隔离状态下工作。这个副本被称为*沙盒*，因为局部的代码更改无法逃逸去污染他人的工作。沙盒可以通过要求工具与存储库重新同步来更新其他用户的更改——当需要时。当完成时，更改将被*提交*（或*检入*）到主存储库，供其他开发者查看。

为了实现这一点，源代码控制系统将遵循两种访问模型之一：

**严格锁定**

一些系统通过文件预留机制物理上阻止用户同时编辑同一个文件，最初，沙盒中的所有文件都是只读的；你不能编辑它们。你必须告诉系统你想要编辑`foo.c`；它变为可写，直到你提交更改或未修改地释放文件，其他人无法编辑该文件。（^[2]）

**乐观锁定**

更复杂的系统允许用户并发地编辑相同的文件。没有预留步骤，沙盒文件始终是可写的。更改在检入时合并。合并通常自动发生。偶尔，会发生冲突，开发者必须手动合并（这通常不是一个困难的任务）。这被称为*乐观锁定*（尽管实际上根本没有任何锁定）。

人们对于哪种操作模式最好持有热情的观点，并誓言坚持一种方法或另一种方法。对于广泛分布的开发者群体，通过互联网工作，并发修改效果最好。当人们更难以管理时，较低的过程障碍更可取；锁定文件进行修改可能会变得令人沮丧。

**一个战争故事**

糟糕的源代码管理可以与源代码控制结合产生痛苦的开发头痛。看似合理、简单的规则可能会意外地阻碍软件开发。

一家知名公司的一个大型项目有一个严格的锁定政策——所有代码检出都是独占的，防止开发者在同一时间修改相同的文件。不幸的是，编码政策规定所有 `枚举` 必须放在同一个源文件中。这个文件越变越大。

最终的结果不难预测：文件变成了检查出的瓶颈。开发者们不断地围绕着等待这个文件变得可用。

## 版本控制

源代码控制系统不仅保存每个文件的最新版本。仓库记录了每次提交时的更改。有了这些重要的版本信息，您可以获取文件在其整个开发历史中的任何版本。因此，我们也谈论 *版本*（或 *修订* 或 *更改*）*控制系统*。这是一件非常强大的武器：任何更改都可以完全撤销——您拥有一个代码时间机器！仓库的文件版本控制意味着您可以：

+   在历史的任何时刻撤销您所做的任何更改

+   在您工作时跟踪源代码的更改

+   查看谁更改了每个文件以及他们何时更改（甚至进行复杂的搜索以查看单个开发者对特定产品所做的全部工作——当开发跨越多年时很有用）

+   检出一个特定日期的仓库副本

**控制狂**

应该将哪些类型的文件放入源代码控制系统中？为了有效地管理和版本化您的软件，您必须将您的 *整个* 源树收集在一个仓库中。这包括：

+   所有源代码

+   构建脚手架

+   单元测试代码和任何测试框架

+   创建打包分发所需的其他任何资产（图形、数据文件、配置文件等）

最终目标是完全从仓库中执行整个构建。从仅包含构建工具链和源代码控制工具开始，您应该能够通过几个简单的步骤生成一个完整的产品（即检出仓库并输入 `make`）——无需提供更多文件或手动修改任何内容。如果您必须向源树添加其他内容，那么您的软件*不是*处于变更控制之下。

但为什么只到这里呢？我们可以扩展这个列表以使其更加详尽：

+   考虑将整个开发环境置于变更控制之下。将每个构建工具的更新检查入库，并保持这些文件与您软件的每个发布版本同步。

+   对所有文档进行版本控制：规范、发布说明、手册等。

所有良好的源代码控制系统都允许您创建命名的*标签*（或*标记*）并将它们应用到一组文件的特定版本。这允许您标记重要的仓库状态：您可以通过这个标签识别构成特定代码发布的所有文件，并在以后轻松检索它们。这在您正在开发产品版本 3 时，但一个重要的客户在第一版中发现了一个关键错误，您需要尽快获取代码时非常有用。

每次提交时，您都可以附加元数据：至少，对您所做更改的文本描述。通过使用这些消息，您可以通过查看文件的修订记录来获取开发概况。更复杂的工具允许您向文件修订添加任意元数据，包括故障报告、支持文档、测试数据等。

良好的源代码控制工具不仅对文件进行版本控制，也对目录进行版本控制。这使得您能够跟踪文件结构的修改，包括文件的创建、删除、移动和重命名。一些源代码控制工具按文件逐个记录更改；当您一次性提交多个文件时，每个文件都会单独进行版本控制。其他工具实现*更改集*：它们将每批文件更改记录为一个原子修改。这有助于您可视化一项工作如何同时影响多个文件。

## 访问控制

源代码仓库可以存储在您的计算机上或远程机器上，通过网络连接访问。通过适当的安全措施，它可以通过互联网由全球的开发者访问，从而减轻不同时区的开发者协调工作的负担。

源代码控制工具还控制哪些用户可以访问代码库的哪些部分。通过这种方式，您可以实施可见性规则和修改权限。项目构建大师通常负责管理源代码控制工具，分配这些访问权限，并确保仓库保持整洁。拥有指定的源代码管理员非常重要。如果所有开发人员都被赋予对仓库的管理员权限，这将鼓励他们随意摆弄它并做出粗心的管理更改。即使有最好的意图，事情也会出错。

## 与仓库一起工作

在受版本控制的仓库中开发代码有两种方式：

+   在*少量多次*的提交方法中，每次进行小更改时都会提交每个文件。因此，仓库包含每个文件的许多修订版本。这样做使得跟踪开发过程中所做的更改变得容易，并有助于您可视化文件在其生命周期中进行的所有修改。然而，您会看到文件修订的激增，这可能会造成混淆。

+   另一种方法（可能被称为*大而少*）是只提交重要更改：为产品的每个版本提交一个修订，或者在你成功将一个*完整*功能添加到代码模块时提交。这使得获取特定的先前版本代码变得更容易，但跟踪它所包含的所有个别更改则变得非常困难。

倾向于小而频繁的方法。存储库标签允许你标记每个主要里程碑，因此它不缺少其对应者的任何功能。

在提交代码修改时，你必须自律。你的工作会立即被每个其他开发者看到，所以首先彻底测试你的代码：不要提交任何会破坏构建或使自动化单元测试失败的代码。如果你的错误导致整个团队停滞不前，你不会受欢迎。许多团队对这种反社会的提交实施惩罚，以鼓励人们仔细工作。这并不是什么严重的事情——可能是通过电子邮件公开嘲笑或购买下一轮饮料。

**关键概念**

*尊重存储库*。永远不要*提交会阻碍其他开发者的损坏代码*。

## 将分支留给树

最强大的源代码控制功能之一是*分支*：一种在文件或一组文件上创建多个并行开发流机制。分支有许多应用，包括：

+   同时向代码库添加多个功能

+   为开发者提供一个个人工作空间，以便在不会破坏主代码库的情况下提交可能损坏的正在进行中的工作

+   在开发新版本的同时维护旧软件版本

假设你销售一个图像处理应用程序，并且需要添加一些新的绘图工具。你还想开始第二个开发工作，将代码移植到新的操作系统。这两个任务必须分别开始，但最终它们将合并在一起。这是一个常见的开发场景。对于每个任务，你都在存储库中创建一个*分支*，并将代码修订提交到分支上，而不是提交到主代码开发线。这使两个任务保持独立。一位开发者专注于绘图工具，另一位专注于移植工作。他们的工作不会相互干扰。

正如其名所示，分支在仓库中创建了一个并行文件修订的树状结构。总会有至少一条代码开发线称为*主干*（出于明显的原因）。图 18-1 展示了在实际中为特定文件创建分支的情况。它是在*版本 1*时创建的，最初在主干上（中心列）进行开发。在*版本 2*时，我们创建了第一个功能分支（用于新的绘图工具）并在其上执行了多次提交。这些都没有影响主干上的代码。主干上的工作继续并行进行，在*版本 3*时，为了适应移植任务，创建了第二个分支。

![在版本控制下分支一个项目](img/tagoreillycom20080909nostarchimages207562.png)

**图 18-1. 在版本控制下分支一个项目**

在分支上进行的作业可以被*合并*到任何其他分支或回滚到主分支。这意味着，例如，你可以在一个分支上尝试一些探索性的错误修复工作，当证明稳定后，你可以将其合并回主代码。如果它是一个开发死胡同，那么你可以放弃这个分支——对主分支没有任何影响。非常有用。在我们的例子中，第一个分支在*版本 2.9*时合并到主分支的*版本 4*。这导致主分支的*版本 5*。后来，第二个分支也被合并到主分支。

即使你不在代码库中同时开发功能，分支也可以被有效地应用于单线程开发。这种方案使主干版本保持稳定：始终是一个完整、经过测试的产品——可能是代码的最新发布版本。每个功能都在自己的功能（或发布）分支上开发，产品本身从这个分支发布。当完成时，我们将其合并回主干，并从那里创建一个新的分支以供下一个功能使用。这保持了主线代码不受可能损坏的正在进行的工作的影响，并将所有相关工作整理在开发分支上，而不是散布在主线旁边的大量其他功能开发工作中。

## 源代码控制简史

可用的源代码控制系统有很多，既有开源也有专有许可证。通常，源代码系统的选择是由公司惯例强制的。（“我们一直使用……，我们知道它是如何工作的。”）遗憾的是，这并不一定意味着它是正确或最好的工具。许多公司运行着遗留系统；将大量代码从一种源代码控制系统迁移到另一种系统的投资和复杂性是难以承受的。

所有版本控制系统的鼻祖是*SCCS (源代码控制系统)*，它于 1972 年在贝尔实验室开发。随后被*RCS (修订控制系统)*所取代。在开源世界中，目前最常用的源代码控制工具是*CVS (并发版本系统)*，尽管它已经开始显露出其年代感。CVS 最初建立在 RCS 之上，并引入了一个协作环境，使得多个开发者可以同时在一个文件上工作。而 RCS 实现了文件预留模型（在第 351 页的“严格锁定”中描述），CVS 则是并发的。CVS 的现代继任者是*Subversion*，它改进了 CVS 的大部分不足之处。

虽然它们在功能上存在细微的差异，但大多数源代码控制工具都具备命令行和 GUI 界面。它们都可以嵌入到流行的 IDE 中。如果你正在寻找一个源代码控制工具来开始使用在私人项目中，可以看看 Subversion 和可用的 GUI 前端之一。

* * *

^([2]) 因此，长时间锁定文件被认为是不良的做法——这可能会阻止其他程序员继续他们的工作。这是这种访问模型的一个固有局限性。

# 配置管理

软件配置管理是一个与源代码控制紧密相关的主题，尽管它经常被误认为是源代码控制。实际上，它是一个超越存储源代码的世界。

**术语和定义**

源代码控制是我们保护代码的主要武器。它是每个软件工匠都无法离开的必需工具。我们已经看到了用来描述它的各种名称。它们可以互换使用，但每个名称都揭示了其操作的一个特定方面：

**源代码控制**

也称为*源代码管理*，这是一种管理我们编写的代码文件的机制。它维护文件及其目录结构；它还协调对代码的并发访问和修改。

**版本控制**

也被称为*修订控制*或*变更控制*，这是一种记录你对文件所做的更改的源代码控制系统。它允许你检查、检索和比较文件在其整个开发历史中的任何版本。

版本控制通常适用于基于文本的文件格式——它们可以很容易地扫描差异——但你也可以对其他类型的文件进行版本控制：文档、图形文件等等。这本书的源文件存储在一个修订控制系统中，这样我就可以跟踪开发历史。

**配置管理**

在版本控制的基础上提供一种可靠的环境，以确保软件开发得到精心管理，并强制执行流程。

一些常用的源代码控制缩写是：SCMS（源代码管理系统）、VCS（版本控制系统）和 RCS（修订控制系统）。

我们已经看到源代码控制的目标是：

+   将源代码集中存储

+   提供你已对文件所做的历史记录

+   允许开发者在不干扰彼此工作的同时协作

+   允许开发者并行处理单独的任务，稍后合并他们的工作

配置管理建立在这样的基础上，以管理项目生命周期中的整个软件开发。它包括源代码控制，并为其使用添加了一个开发流程。软件配置管理正式定义为“在离散的时间点识别系统配置的学科，目的是系统地控制此配置的变化，并保持整个系统生命周期中此配置的完整性和可追溯性。”（Bersoff 等人 80）它控制项目的*工件*（你放入源代码控制中的东西）和其开发*过程*。

一些源代码控制工具提供配置管理功能，并且可以与项目工作流程工具集成；例如，管理故障报告和变更请求，跟踪它们的进度，并将它们与代码库中的物理更改联系起来。

配置管理涉及：

+   定义系统中的所有单个软件组件以及构建它们所需的工件（这在单个代码库可以配置为生成多个产品变体或可以针对多个平台时特别有用）。

+   管理产品的发布版本，以及每个发布版本包含的组件版本。

+   跟踪和报告代码及其组件的状态。它现在处于*beta*状态，还是现在是一个*发布候选*？（见第 140 页的"ALPHA, BETA, GAMMA ..."）

+   管理正式的代码变更请求，跟踪哪些已被优先考虑并获得开发批准；将变更请求与必要的设计工作、调查、代码修改、测试和审查工作联系起来。

+   确定哪些文档与特定产品变体相关，以及需要什么样的编译环境。

+   验证软件组件的完整性和正确性。

你目前是如何管理代码库的配置的？

# 备份

这是一种古老而朴素的常识。备份是你的保险政策，可以防止文件意外删除、计算机系统故障，以及如果备份在异地，办公室失火时数据丢失。它们还不能治愈普通感冒，但可能有些有进取心的备份公司正在研究这个问题。

每个人都知道他们应该定期备份他们的工作。但我们都是人；仅仅因为执行一项任务既合理又明智，并不意味着我们一定会做——有更多紧迫（而且更有趣）的事情要做。事后诸葛亮是无用的：当你坐在你计算机的燃烧残骸中，硬件已经无法修复，所有数据都丢失在数字炼狱中时，你会诅咒你决定玩单人纸牌游戏而不是备份你的代码的那一天。几天的工作必须重写，虽然你会记住大部分内容，但第二次总是感觉更难、更乏味（当然，也更有损灵魂）。

想想看：你的所有源代码都有备份吗？当我发现有多少工作是在没有备份的计算机系统和工作站上完成的，我感到很害怕。风险水平是荒谬的。

**关键概念**

*备份你的工作。不要等到灾难发生才考虑恢复策略*。

你必须建立一个可靠的备份程序。不要依赖于手动备份计划，比如手动执行文件复制操作。总有一天你会忘记启动那个关键的备份，或者备份间隔太长，或者手动复制了错误的东西。记住墨菲定律（在第 5 页）：*如果可能出错，它就会出错*。这对你所做的任何事情都加倍适用！相反，确保所有重要文件都放在一个正在备份的文件系统上。当使用未备份的工作站时，我会将我的代码保存在一个已备份的网络挂载文件服务器上，而不是不安全的本地磁盘上.^([3])

为了有用，备份必须：

+   定期完成

+   检查和审计

+   容易恢复

+   自动（既可以通过自动启动，也可以在没有干预的情况下运行）

关键的是，所有源代码仓库都必须保存在一个已备份的服务器上。否则，你只是把东西放在一个安全的地方，但没有关上门。事实上，“少量多次”的提交减少了个人计算机备份的依赖——你大部分的工作都提交到了一个已备份的仓库中。你工作站上的文件丢失对整个项目来说不会是关键。

核心问题是：除非在人为或机械故障的情况下可以恢复，否则你的工作是不安全的。即使它“只是”个人使用的代码，也要通过备份来保护它。在备份软件、额外存储和一点管理时间上的小投资是极其有价值的。失败的成本和麻烦远远超过了这笔微不足道的开销。

* * *

^([3]) 当然，这有一个权衡。这种简单的方法使得文件访问变慢，因为引入了网络延迟和文件服务器延迟。但我会忍受这种（通常）的小不便。

# 发布源代码

源代码有时需要摆脱你的严格控制，去探索广阔的世界。也许你销售的是一个库：你的发货产品*就是*源代码本身。也许你已经承包了与可执行文件一起发货的代码。即使你不想发布你的源代码，它也可能有一天被卖给新的所有者，或者你可能需要与外部人士合作开发新功能。在这些情况下，我们也必须采取合理的措施来确保代码的安全性和可访问性。

这种恐怖的规模取决于你代码的性质。专有源代码——专门为公司在产品内部使用而编写的——是受到严格保护的*知识产权*，通常认为公开发布它是商业自杀，因为你的竞争对手可以找到并利用它。与之相反的是*开源*或*免费*代码，专门编写以发布：可以自由查看和修改。软件发布的选项和性质在每个案例中都有所不同：

+   如果你正在发布一些封闭的专有代码，那么在让第三方看到它之前，你需要获得一份签署的*保密协议（NDA）*。这是一项标准的合同协议，旨在确保他们不会滥用、共享或以违反协议的方式使用代码。它是法律上具有约束力的，其主要目的是在技术团队忙于创建令人兴奋的软件的同时，让公司的律师远离。

    如果你发布的人将利用代码以获取商业利益，你必须还强制执行一份许可协议，以确保你也能从中获利。这实际上涉及到市场营销或销售团队，普通的程序员无需担心这一方面的公司争斗。

+   开源开发者必须选择一个合适的许可证来规定用户可以对代码做什么，以及他们是否必须共享任何衍生作品。有关软件许可的更多信息，请参阅侧边栏。

在这两种情况下，你必须确保源文件是可展示的。代码*必须*完全是你的作品，或者你必须拥有所有非自己作品的分发权。这就是为什么很多旧的商业代码不能开源的原因：如果一家公司没有对其源代码的所有权，那么他们就不能在付出高昂的修改成本后自由发布。

为了站在稳固的法律基础上，确保每个源文件都包含一个版权声明，将其归因于正确的所有者（作者或公司）以及一个简短的关于其发布许可的描述。然后，如果有人找到这段代码，它显然是机密材料。有关文件头部注释的更多信息，请参阅第 83 页的“文件头部注释”。

警惕意外的源代码发布：防止您的可执行文件被轻易逆向工程。有时可以从分发的二进制文件中重建源代码。这在字节码编译语言（如 Java 和 C#）中是一个特别的问题。考虑混淆字节码；有一些工具可以为您完成这项工作。

# 无论我在哪里放置我的源代码

最后，考虑您放置源代码的地方。绝密公司工作不应留在未锁车的笔记本电脑上。同样，源代码也不应留在公开可访问的网络中。

确保您的登录密码保密。外部人员（或恶意同事）不应能够使用不适当的访问权限破坏工作。

**许可证**

软件许可证定义了用户对其拥有的权利。这适用于既包括二进制分发的程序，也包括创建它的源代码。大多数专有许可证撤回了复制、修改、出借、出租和在多台机器上使用等权利。另一方面，开源许可证努力保护您随意复制和分发软件的权利。

软件作者根据特定的目标和理念选择他们的许可证。确实，作者可以选择在多个许可证下发布软件，覆盖不同的使用模式，并允许不同的价格和支持模式。虽然有许多类型的源代码许可证，但只有少数被广泛使用。它们在以下方面有所不同：

**允许的使用**

许可的代码是否可以用于商业目的，或者它只能用于免费软件？真正的问题并不是赚钱，而是专有封闭产品是否可以在未经许可的情况下纳入您的作品。一些开源许可证要求用户发布使用他们的软件构建的任何代码。典型的商业许可证允许您做您想做的事情，只要您支付费用。

**修改条款**

如果您更改了代码，您必须发布这些更改吗？或者您可以在没有任何进一步义务的情况下分发派生作品？一些开源许可证被描述为“病毒性”的，因为您所做的任何更改都必须在相同的开源许可证下发布，同样，您使用它分发的任何代码也必须如此。

商业许可证是由公司律师起草的，以适应他们的不良目的（即，保护公司的商业投资）。然而，有许多常见的免费或开源许可证。"开源"这个术语是由*开源促进会（OSI）*提出的，这是一个认证软件许可证的组织。源代码的可用性不足以将产品描述为开源。它必须提供某些权利：允许免费修改和重新分发代码或任何修改，但必须将这些权利给予所有人，并且是不可撤销的。

开源软件与自由软件基金会关于“免费软件”的概念相冲突。FSF（GNU 项目的监护人）更加意识形态化，并推广那些“免费”的软件许可，这里的“免费”是指“言论自由”，而不仅仅是“啤酒免费”——这里的“免费”一词是法语“libre”的意思。OSI 接受一些“啤酒免费”的许可，这让 GNU 的忠实支持者并不喜欢。GNU 著名的许可协议是 GNU 通用公共许可证（GPL）和 GNU Lesser General Public License（LGPL）。后者是一个更加宽松的“库”版本，允许与专有代码链接。

# 简而言之

如果我们希望为未来的安全提供保障，我们必须尊重过去，怀疑现在。

--约瑟夫·朱贝特

*代码的大小并不重要，重要的是你如何使用它*。

在本章中，我们探讨了各种工作方法，以确保我们对所创建的源代码负责，以安全可控的方式进行开发。这些事情确实很重要；在错误的时间发生意外可能会对你的开发项目造成灾难。你必须保护你的关键任务代码库。

版本控制是我们安全开发代码的基本武器。它促进了团队协作，确保团队开发可预测且安全，有助于管理产品修订和配置，并作为所有开发工作的历史档案。它是一个开发安全带，没有它你的生活将会大大恶化。

| 好程序员…… | 坏程序员…… |
| --- | --- |

|

+   对他们的工作负责，并了解如何保护代码开发

+   谨慎使用版本控制，确保代码库始终保持一致和可用的状态

+   永远不要将损坏的代码提交到源代码控制

+   谨慎使用所有工具，目的是产生可维护、可访问的代码

|

+   在考虑他们代码的安全性和可访问性之前等待灾难发生

+   假设有人会为他们考虑备份和安全问题

+   不关心更新文档

+   不要考虑他们代码库中的代码状态——他们提交了有缺陷的代码，并为他人留下了清理的烂摊子

|

![简而言之](img/tagoreillycom20080909nostarchimages207564.png.jpg)

# 参考内容

第七章

我们用来有效开发软件的工具。

第十章

代码的可访问性影响构建的难易程度——无论是前沿代码库还是需要重新工作的历史版本。

第十二章

另一个安全问题是——运行程序内的安全问题，而不是在开发过程中的问题。

# 深思熟虑

这些问题的详细讨论可以在第 539 页的“附录 A”部分找到。

## 深思熟虑

1.  你如何能够可靠地将源代码发布给其他人？

1.  在两个仓库文件编辑模型（锁定文件检出或并发修改）中，哪一个更好？

1.  分布式和单站点开发团队在版本控制系统要求上有什么不同？

1.  选择源代码管理系统的一个合理的理由是什么？

1.  在团队开发过程中，你如何将处于活跃开发中的前沿代码与稳定代码分开？

## 个人化

1.  你们开发团队是否有效地使用了源代码控制？

1.  你的当前工作是否已备份？备份对你们开发团队来说有多重要？备份是在何时进行的？

1.  源代码存储在哪些计算机上？
