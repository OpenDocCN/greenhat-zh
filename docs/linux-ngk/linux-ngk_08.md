# 第八章：RPM 不是一家 1980 年代位于亚特兰大的乐队

## 概述

*使用 RPM 安装程序*

好吧，既然你已经知道 RPM 不是什么，你无疑想知道它是什么。*RPM* 代表 Red Hat Package Manager，它是 Red Hat 提出的一种非常方便的系统，允许用户轻松地安装和删除软件包。当然，在这个时候，你可能想知道什么是软件包。

在最基本层面上，一个 *软件包* 仅仅是一个归档文件或一组文件的归档，就像你可能已经知道的 ZIP (.zip) 或 StuffIt (.sit) 文件。然而，设计用于与 RPM 系统一起使用的软件包则略有不同。这样的软件包通常被称为 RPM 软件包、RPM 文件，或简称 RPM，它们可以通过文件名末尾的 .rpm 扩展名轻松识别。RPM 软件包由一个归档文件或一组文件以及一组安装说明组成，告诉系统的包管理器在系统中的哪个位置安装软件包文件。

通常这些 RPM 软件包是应用程序，尽管它们也可能是其他东西，比如字体或文档。包管理器会自动将软件包中的每个组件安装到系统中的正确位置，这使得整个过程对你来说非常简单。总的来说，使用 RPM 与使用安装程序安装 Windows 程序非常相似。

Fedora（及其 Red Hat Linux 前身）当然不是唯一基于 RPM 的发行版——其他发行版，最著名的是 Mandrake 和 SuSE，也是基于 RPM 的。然而，由于不同的发行版将各种系统文件放置在不同的位置，并且由于它们以不同的方式编译，RPM 软件包通常是针对特定发行版的。因此，任何流行应用程序的 RPM 软件包可能有很多不同的版本，以适应各种 Linux 发行版。更不用说，可能还会有针对特定发行版不同版本的不同的 RPM 软件包。例如，在 Red Hat Linux 的情况下，你可能会找到为版本 7.3、8、9 等专门设计的 RPM。

正如你将注意到的，RPM 文件名也在 .rpm 扩展名之前指定了 CPU 架构。因此，你会看到以 *i386.rpm*（386 类 CPU 或更好）、*i586.rpm*（奔腾类 CPU 或更好）、*i686.rpm*（奔腾 II 类 CPU 或更好）以及甚至 *ppc.rpm*（摩托罗拉/IBM Power PC CPU，如现代 Macintosh 电脑所使用的）结尾的 RPM 文件。那些标记为 *noarch.rpm*（无架构）的软件包可以与任何 CPU 一起使用。

* * *

* * *

## 项目 8A：直接与 RPM 软件包工作

如果我刚才给你提供的关于 RPM 的信息似乎有点多，别担心。安装 RPM 软件包相当简单。通常，你只需双击 RPM 软件包文件即可安装。在这个项目中，你将有机会以这种方式安装四个 RPM 软件包。

### *8A-1：安装 Skoosh*

让我们从安装一个简单的滑动拼图游戏 Skoosh（图 8-1）开始这个项目。Skoosh 不包括在 Fedora Core 中，所以您需要自己下载。您可以通过访问[`dag.wieers.com/`](http://dag.wieers.com/) packages/skoosh 来完成此操作。一旦到达那里，通过简单地点击文件名下载适用于您正在运行的 Linux 版本的最新的文件（例如，*rh90*适用于 Red Hat Linux 9.0 或*rhfc1*适用于 Fedora Core 1 等）。Skoosh 文件仅重约 150KB，所以整个下载过程应该非常快。

![图片](img/0801.jpg)

图 8-1：滑动拼图游戏，Skoosh

一旦 Skoosh RPM 文件在您的硬盘上，您就可以准备安装它了。要这样做，只需双击 Skoosh 文件。然后您将被提示输入 root 密码，所以输入它并点击**确定**。然后会出现一个完成的系统准备窗口，告诉您安装完成后将安装多少个包以及将使用多少磁盘空间（图 8-2）。要继续，请点击**继续**。

![点击展开](img/0802_0.jpg)

图 8-2：准备安装 Skoosh

进度条将在相对较短的安装期间显示进展情况，并在完成后消失。pffftt，进度窗口将消失，一切都将恢复正常。很简单，不是吗！

一旦安装了 Skoosh，您可以通过进入主菜单并选择**游戏** > **Skoosh 拼图游戏**来运行它。顺便说一句，如果您更喜欢使用自己的图片而不是 Skoosh 附带的图片，您可以通过进入**设置**菜单并选择**首选项**来实现。一旦进入 Skoosh 首选项窗口，点击**浏览**按钮来导航到您希望使用的图片位置。

### *8A-2：安装 Frozen-Bubble*

到目前为止，一切都很简单。不幸的是，情况并不总是如此；有时您会发现您试图安装的 RPM 包包含系统依赖项，而您的系统尚未设置好以处理这些依赖项。为了说明这一点，让我们看看 Frozen-Bubble 游戏。

Frozen-Bubble（见图 8-3）最初是 Mandrake Linux 发行版中的标准游戏，但由于其受欢迎程度，它已经进入了 SuSE 甚至 Windows。这是一款令人愉快的游戏，拥有酷炫的图形和音乐。它也非常吸引人，因为您根本不可能输。与其他街机风格的游戏不同，Frozen-Bubble 允许您一次又一次地玩同一关卡，直到您玩对为止。

![点击展开](img/0803_0.jpg)

图 8-3：玩 Frozen-Bubble

Frozen-Bubble 和 Perl-SDL 都可以从 [`freshrpms.`](http://freshrpms) net/packages 下载。当你访问那个页面时，找到并点击你使用的 Linux 版本的链接。一旦进入软件包页面，查看页面左侧的列表，并点击**frozen-bubble**链接。这将带你到下载页面。要下载文件，在页面顶部附近右键单击小软盘图标，并在弹出菜单中选择**另存为**。完成之后，再次查看页面左侧的列表，使用相同的程序下载文件 perl-SDL。

#### 安装 Frozen-Bubble 和 Perl-SDL

安装这两个文件非常简单。然而，如果你在安装 Perl-SDL 之前安装了 Frozen-Bubble，你可能会遇到常被称为“依赖地狱”的情况。

为了理解我的意思（别担心，不会发生任何坏事），双击 Frozen-Bubble RPM 文件，包管理器将执行其常规的依赖性搜索。在这种情况下，它会发现你的系统缺少 Perl-SDL 软件包，并弹出一个窗口告诉你（见图 8-4）。为了解决这个问题，通过点击**确定**关闭警告窗口，然后只需双击 Perl-SDL 文件并安装它。一旦 Perl-SDL 安装完成，继续以同样的方式安装 Frozen-Bubble。

![点击展开](img/0804_0.jpg)

图 8-4：找不到软件包的警告窗口

在 Frozen-Bubble 的情况下，只需要一个额外的文件，但有时可能需要更多。更糟糕的是，有时你下载并尝试安装的一些必需文件也有自己的依赖性——这是真正的地狱般场景。当然，由于这些依赖文件可能被你未来尝试安装的其他 RPM 软件包所需要，你可能会发现随着时间的推移，这个依赖问题会逐渐减少。

#### 运行 Frozen-Bubble

安装完这两个文件后，你可以通过进入主菜单并选择**游戏** > **更多游戏** > **Frozen Bubble**来玩 Frozen-Bubble。就是这样；除非你玩到深夜（因此上班迟到），否则你将对这个项目的结果非常满意。

我应该在这里提到，你无法在 Frozen-Bubble 中使用鼠标。一旦游戏开始，你可以通过按 ENTER 键开始玩游戏。之后，使用左右光标键来瞄准你的球，然后使用上光标键来射击它。要退出游戏，按一次 ESC 键，这将带你到高分窗口，你可以输入你的名字首字母。完成之后，按 ENTER 键（或者按 ESC 键再次跳过它），这将带你回到开场屏幕。最后，再次按 ESC 键，游戏将关闭。

* * *

* * *

## 项目 8B：通过软件包管理窗口添加和删除 RPM 软件包

你的整个 Fedora 系统（如之前的 Red Hat Linux 版本）都是基于 RPM 的。这意味着所有应用程序和支持文件最初都存储在 RPM 软件包中，这些软件包在安装过程中一个接一个地安装。这意味着从你的安装 CD 安装额外的软件包是一个非常简单的过程。大多数这些 RPM 软件包都可以通过软件包管理窗口（如图 8-5 所示）访问、安装，甚至卸载。

![点击展开](img/0805_0.jpg)

图 8-5：使用软件包管理窗口添加或删除软件包

### *8B-1: 修复软件包管理器错误（仅限 Fedora Core 1 用户）*

如果你正在使用 Fedora Core 1，在你尝试通过软件包管理窗口安装软件包之前，你必须先处理一个小问题。你看，Fedora Core 1 软件包管理器有一个错误，阻止你读取它要求你插入的安装光盘上的数据。幸运的是，通过安装单个 RPM 更新文件就可以轻松解决这个问题。

要获取文件，请访问 [`ayo.freshrpms.net/fedora/linux/1/i386/`](http://ayo.freshrpms.net/fedora/linux/1/i386/) RPMS.updates，并下载 **redhat-config-packages-1.2.7-1.noarch.rpm**。一旦你完成了这个操作并且文件已经存在于你的硬盘上，你就可以通过你已经学过的非常简单的双击方法来安装它。

### *8B-2: 安装 Epiphany 或 GnuCash*

现在你已经修复了错误，你可以尝试使用软件包管理窗口。我们将尝试安装的两个软件包是 Epiphany（一个类似于 Mozilla 的轻量级 GNOME 网络浏览器）和家庭财务管理软件包 GnuCash。

Epiphany（如图 8-6 所示）首次出现在 Fedora Core 中，因此它不在 Red Hat Linux 9 安装光盘上。在许多方面，它与 Mozilla 非常相似，因为它基于相同的渲染引擎。然而，与 Mozilla 不同的是，Epiphany 被设计成可以集成到 GNOME 桌面环境中，并遵循 GNOME 的界面特性。这对于喜欢定制的人来说是个好消息，因为你在 GNOME 中应用的所有定制功能也会在 Epiphany 中生效。

![点击展开](img/0806_0.jpg)

图 8-6：使用 Epiphany 浏览网页

GnuCash 实质上是 Linux 对 Quicken 的回应——它是一个家庭财务管理软件，你可以用它来做预算、核对支票簿，以及摊销你的住房和汽车贷款。如果你之前一直是 Quicken 用户，那么你可以放心，因为 GnuCash 甚至可以读取 Quicken 文件。

要安装这两个程序，你需要做以下事情：

1.  前往主菜单，选择 **系统设置** > **添加/删除应用程序**。当提示输入 root 密码时，输入你的 root 密码，然后点击 **确定**。

1.  此时将出现软件包管理窗口。在该窗口中，向下滚动一小段距离，直到**应用程序**部分，然后点击**图形互联网**类别右侧的**详细信息**链接。（如果你是缺少 Epiphany 的 Red Hat Linux 9 用户，请直接跳到步骤 4。）

1.  随后将打开图形互联网软件包详细信息窗口（参见下一页的图 8-7）。在该窗口中，通过点击其名称旁边的复选框选择**Epiphany**——保持其他选项不变！完成选择后，点击**关闭**。

    ![点击展开](img/0807_0.jpg)

    图 8-7：选择要安装的 Epiphany

1.  现在，你将回到主软件包管理窗口，因此在**应用程序**部分向下滚动到**办公/生产力**子类别，并点击**详细信息**链接。

1.  在该组软件包的详细信息窗口中，通过点击其旁边的复选框选择**GnuCash**。完成后，点击**关闭**，这将关闭软件包详细信息窗口，并返回主软件包管理窗口。

1.  现在已经选择了要安装的软件，只需点击窗口底部的**更新**按钮。

1.  系统更新准备窗口将随后出现，系统将检查你已安装的内容。一旦完成，将显示完成的系统准备窗口（如图 8-2 所示，位于第 113 页）。点击**继续**按钮。

1.  将会弹出一个新窗口，要求你插入一个安装光盘。将适当的光盘插入你的 CD 驱动器，当驱动器指示灯停止闪烁时，点击**确定**。

然后开始安装过程，这就是全部。如果你使用的是 Fedora，安装完成后可以查看你的新网络浏览器。转到主菜单，选择**互联网** > **更多互联网应用程序** > **网络浏览器**。要使用 GnuCash，只需转到主菜单，选择**办公** > **更多办公应用程序** > **GnuCash**。

通过你刚刚学到的这种方法，你可以安装详细信息窗口中列出的任何附加软件包。例如，如果你在第二章中安装系统时没有遵循我的特殊软件包定制步骤，你可以这样同步。只需参考该章节，然后安装那里指定的软件包或软件包组。谁说生活中没有第二次机会呢？

* * *

* * *

## 卸载软件包

RPM 软件包的另一个优点是它们很容易卸载，如果你磁盘空间紧张，想要从磁盘上移除不再使用或不打算使用的软件，这会非常方便。相当方便的是，你可以使用软件包管理窗口来完成这项任务；然而，这仅适用于通过软件包管理窗口安装或是在初始系统安装期间安装的 RPM。

无论何时你准备好要删除一个或多个这些 RPM 包，以下是你需要做的：

1.  前往主菜单并选择**系统设置** > **添加/删除应用程序**。当提示输入时，输入你的 root 密码，然后点击**确定**。

1.  在软件包管理窗口中，向下滚动到包含你想要删除的文件的区域，然后点击**详细信息**。

1.  当软件包详细信息窗口打开时，取消勾选你想要删除的软件包旁边的复选框。完成后，点击**关闭**按钮。

1.  一旦你回到软件包管理窗口，点击**更新**以开始删除过程。

1.  系统将在弹出完成系统准备窗口（就像图 8-2 在第 113 页中那样）之前检查几秒钟。在这个窗口中，你可以看到有多少软件包被排队等待删除。如果列出的数量大于你在取消勾选程序名称旁边的复选框时记住要删除的数量，你最好点击**显示详细信息**按钮来确保一切正常。如果不正常，只需**取消**并**退出**，然后从头开始。如果一切如常，只需点击**继续**。

1.  系统将随后删除你指定的软件包，并在完成后告诉你，此时你只需点击**确定**。

* * *
