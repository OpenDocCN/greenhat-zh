# 第十三章

前进！

Xbox 漏洞挖掘的尖端技术不断进步。成千上万的黑客不断研究、创新、发现，并分享新的方法和技巧，使 Xbox 对最终用户来说更加有用和有价值。跟上黑客领域的最新发展可能会让人感到不知所措。希望阅读这本书已经给了你理解各种网站和针对 Xbox 漏洞挖掘的论坛上最新帖子和新消息的能力。本章讨论了你可以去哪里了解更多关于最新漏洞的信息，哪里可以寻求帮助，以及你如何贡献你独特的技能和视角到社区中。本章还讨论了黑客在未来将面临的一些更大的挑战，即受信任的 PC 初始化。

## **黑客社区**

Xbox 漏洞挖掘者是一个无政府主义社区，他们主要在地下活动，通过各种互联网“论坛”（fora 是 forum 的复数形式，就像 data 是 datum 的复数形式）保持联系和分享信息。Xbox 漏洞挖掘社区中的大多数人保持低调，黑客们经常使用化名来保护他们的身份。使用化名的理由各不相同，但总的来说，匿名提供了更大的操作自由。如果黑客知道在事情变得糟糕的情况下可以无损退出，他们更愿意分享他们的成果和发现。使用化名也使竞争更加公平。黑客们主要根据他们贡献的质量和频率来评判彼此，其他方面很少考虑。你可能很年轻，但这并不会影响你的第一印象或街头信誉，就像在其他情况下可能会发生的那样。同样，许多黑客在你犯错时毫不犹豫地直言不讳，他们对愚蠢地表现为博学或无礼的断言更是没有耐心。另一方面，许多黑客对那些已经诚心诚意地阅读常见问题解答、搜索网络并尽力确保问题尚未被回答的人非常乐意伸出援手。

### **黑客论坛**

Xbox 漏洞挖掘社区有许多公民论坛用于分享他们的成果和表达他们的担忧。最受欢迎的论坛是像 www.XboxHacker.net 和 www.xbox-scene.com 这样的基于网络的 BBS，以及像 #xboxhacker 这样的 IRC 频道。基于网络的 BBS 通常包括新闻日志、常见问题解答和指向信息的实用链接。更重要的是，BBS 包括人们可以分享信息和提问的论坛。通过这些论坛，你可以利用经常访问这些 BBS 的所有黑客的集体知识。这些论坛的记录历史中也包含大量 Xbox 漏洞挖掘信息（以及错误信息）。我鼓励那些在这本书中还有未解答问题的读者去这些论坛寻找答案。

最早创建的 Xbox 黑客论坛之一是 XboxHacker BBS（www.xboxhacker.net）。许多最优秀和最聪明的 Xbox 黑客都为其论坛做出了贡献。例如，一个论坛帖子实时记录了 Andy Green（在 XboxHacker BBS 上被称为 numbnut）破解 Xbox 1.1 安全方案的经历。我从阅读 XboxHacker BBS 的论坛帖子中学到了很多。我还在 BBS 论坛上遇到了一些最有趣的人。XboxHacker BBS 的创始人 Dan Johnson（也被称为 SiliconIce）在侧边栏“个人简介：Dan Johnson”中讲述了他的故事。

另一个寻找有关 Xbox 一般信息的资源是网络搜索引擎 Google（www.google.com）。随着越来越多的黑客参与到 Xbox 中，Google 正变得越来越成为一个重要的工具，用于广泛撒网并发现最新的工具和技术。例如，在撰写本文时，Google 开始索引一些用于替换 Xbox 组件的资源。这对于那些不想费心将 ATX 电源适配器适配到 Xbox 上的人来说可能很有用。

使用 Google 搜索时，尽量使用尽可能具体的关键词。例如，在 Google 中输入**Xbox hacking**将返回大量与 Xbox 黑客主题相关的链接，但具体信息很少。例如，今天 Google 上“Xbox hacking”搜索结果的第一条是 LWN.net 的一篇文章，标题为“LWN: Lindows CEO funds Xbox hacking contest (News.com)。”这似乎与如何安装新硬盘或 Xbox 安全系统的详细信息相去甚远。在缩小搜索范围时，尽量弄清楚你概念的实际术语和拼写。假设你正在寻找有关新 Xbox 安全系统的信息。如果你搜索**new Xbox**，你几乎得不到任何技术信息。然而，如果你搜索**xbox v1.1**，搜索结果将返回更多有用的技术结果。收集当前术语和缩写的最佳方法之一是浏览黑客 BBS。

### **做出贡献**

如果你正在寻找为 Xbox 黑客社区做出贡献的方法，请记住，大多数黑客都有一种独特的技能或优势，这通常与其最感兴趣的领域相对应，并且大多数黑客黑客是为了乐趣而黑客。例如，我真的很喜欢硬件，尤其是当需要构建某些东西时。虽然我可以编写代码，但我并不特别喜欢。因此，我对黑客社区的贡献主要是通过硬件项目。同样，我也很难激励自己参与软件项目。所以，大多数时候我只是坐下来，享受观看别人在 Xbox 上做什么。这既教育又娱乐。

当你在思考能为 Xbox 黑客社区做些什么时，不要担心自己急于加入并迅速投入到你并不热爱或感到不舒服的项目中。当你知道时机已到时：项目会大声呼唤你的名字，你自然会想要进行破解。

## 个人简介：丹·约翰逊（又名 SiliconIce）

**你能告诉我们一些关于你自己的信息，以及你是如何开始黑客生涯的吗？**

在一段时间里，我对电子黑客技术很感兴趣，尽管我的兴趣主要局限于仅仅阅读关于这些壮举的文章。像世嘉的 Dreamcast 和 Netpliance I-Opener 这样的被黑设备时不时地吸引了我的注意。然而，我第一次真正的电子黑客体验来自于“ePods”，这是一种已经停止生产的互联网设备/网络平板电脑。我在网上阅读了关于这些有趣设备的文章，并找到了 Ken Segler 的 I-Appliance BBS（http://www.linux-hacker.net），这是著名的 I-Opener 黑客的家园。在阅读了人们用这些平板电脑做的一些有趣的事情后，我感到非常好奇，并花了我当时大部分积蓄（200 美元）购买了一个单元。收到我的新玩具后，我花了很多时间进行许多记录在案的破解，主要是基于软件的。这是我第一次窥见电子黑客的世界。在 ePods 之后，我转向了另一款互联网设备，Gateway Connected Touchpad。一个看起来很酷的 10 英寸触摸屏，背后有一个 400MHz 的 Crusoe 处理器和 96MB 的 RAM；它看起来像是一笔不错的交易，非常适合一个有趣的项目。该设备运行的是基于 32MB CompactFlash 卡的 AOL 定制的 Linux 系统。我将这个 Microdrive 换掉，并在笔记本电脑、USB 读卡器和 Gateway 之间多次交换这个磁盘后，设备启动了一个精简版的 Windows 使用“98Lite”。这个设备似乎非常适合用作手指操作的、网络连接的 mp3 音乐播放器（以及其他用途），所以我开始开发一个定制的播放器，它可以通过触摸板轻松操作。整个 Gateway 体验成为了我在高中 junior 和 senior 年之间的一个有趣的项目。

**XboxHacker BBS 是如何产生的？**

正是在这段时间里，我产生了 XboxHacker.Net 的想法。对我来说，Xbox 似乎有潜力成为电视下理想的计算设备……一旦它可以被编程。在当时，其硬件给人留下了深刻的印象，完全能满足我希望在设备上实现的目标。与其他游戏机不同，Xbox 还内置了硬盘和以太网端口。一旦破解，Xbox 可以用来模拟旧游戏机，如 NES、SNES、N64，甚至 PSX，方便地在您的家庭娱乐系统上播放任何类型的媒体文件，如 mp3 或 DivX，从家庭网络播放流媒体，甚至可以作为基本的 PC 使用。有人认为，该设备售价 299 美元，成本过高，不值得破解，因为可以以不高的成本构建具有类似规格的 PC，无需破解。然而，Xbox 的优势在于它还可以播放 Xbox 游戏，并且已经设计好与您的电视一起使用。破解只是增加了附加值。在我短暂涉足电子破解领域后，我认为破解 Xbox 可以是一个有趣的项目，有助于组织，因为我被拥有一个方便的电视盒子来完成上述任务的可能性所吸引。直到几个月后，我才会真正购买 XboxHacker.Net 域名。

**您在成长和运营 XboxHacker BBS 时的体验如何？**

从一开始，XboxHacker.Net 就专注于几个主要目标：提供和传播有关 Xbox 的技术信息，并为同行黑客提供一个讨论与 Xbox 破解相关技术信息的场所。尽管由于我的技术知识和经验有限，我在实际破解方面贡献不多，但我收集和分发相关信息以及管理讨论版的能力足以帮助推动这项工作。

网站上线不久后，我们很幸运地收到了来自像 Mike Magee 的 The Inquirer 和 Van Smith 的 Van’s Hardware 等高知名度网站的链接。XboxHacker.Net BBS 迅速成为互联网上讨论任何与 Xbox 破解相关材料的主要场所之一，XboxHacker.Net 新闻页面也提供了关于 Xbox 最新状态的最新消息。网站上线几周后，它被 CNET 的一篇文章提及，从那时起，活动水平稳步上升。不久之后，XboxHacker.Net 就超过了我们所在的小型共享服务器，因此网站迁移到了一个更大的账户，几周后又超过了这个账户。论坛的流量继续迅速增加，所以我决定将网站迁移到自己的专用服务器，这样我们就有足够的空间增长，不必担心每几个 MB 的带宽使用量或有多少并发论坛用户在线。

XboxHacker.Net 的活动很快吸引了微软的注意。在网站的早期，我几次被要求移除材料。第一次是一个开发者工具的截图，我收到这个截图时没有太多解释，显示了磁盘上的“安全区域”。第二次是一个要求移除论坛中某人发布的 Xbox BIOS 映像链接。除了这些少数的小事件外，微软和 XboxHacker.Net 之间的联系几乎不存在。一开始就制定了政策，避免涉及可疑合法性的问题，如关于游戏备份的讨论、链接到版权材料或从 BIOS 中发布微软代码。

在开始的时候，尽管兴趣很高，但进展似乎相对缓慢……在安全系统被破解之前，Xbox 上能做的事情并不多。有很多个人在早期做出了显著的贡献。XboxHacking 世界的早期贡献者中，有 Andy 和 Luke，他们的网页上包含了大量关于文件格式和其他有价值的 Xbox 信息的资料。Steve “SurferDude” Gehlbach 为 Xbox 设计了一个 VGA 转换电路，Ken Gasper 在此基础上进行了改进，为 Xbox 创造了一个真正的 VGA 适配器。Bunnie 在 Slashdot 上发布了他对硬件的分析和信息页面，这也引起了人们对 XboxHacking 的兴趣。确实，还有许多其他人也留下了自己的印记。能够将这样一群技术高超的黑客视为论坛的贡献者，XboxHacker.Net 逐渐成长为一个技术 Xbox 信息、讨论和新闻的中心。

XboxHacker.Net 的瑰宝无疑是 XboxHacker BBS。网站围绕论坛和成员的活动展开。通常，最新的 XboxHacking 新闻只是论坛主题的链接和成员发布的帖子剪辑。论坛的目的是让对破解 Xbox 感兴趣的多元、多国籍人群共同为实现这一共同目标而努力。论坛提供了一个很好的地方，可以与同行黑客分享信息和讨论想法，同时也汇集了许多可能没有其他合作方式的天才黑客。看到论坛带来的进展，感觉非常棒。有一个特别的讨论让我印象深刻，持续了几天。一些成员在讨论第二代 Xbox 的新安全系统，寻找漏洞和绕过方法。当黑客们越来越接近解决方案，最终破解了改进后的 Xbox 的安全系统时，这非常令人兴奋。我们的数百名贡献论坛成员在很大程度上是 XboxHacker.Net 的成功以及 XboxHacking 世界总体进步的原因。

除了在 XboxHacker.Net BBS 上的活动外，毫无疑问还有许多其他团体在秘密地破解 Xbox。我知道的一个这样的团体在 IRC 上，其中包括贡献论坛的成员以及来自电子黑客地下世界的其他人。这里将不会提及名字。随着时间的推移，许多独立团体或个人的信息被转达给我用于报道。然而，尽管对 XboxHacking 的兴趣日益增长，参与努力的人数也在增加，但任何重大突破成为公众知识还需要一段时间。

在 2002 年夏季 modchips 公开后，XboxHacking 场景的步伐相当迅速地加快了。到那时，Xbox 的安全系统已被多个团体破解，modchips 对公众来说很快就会变得容易获得。在这个时候，工作大部分从硬件破解转向了软件开发。XboxHacker.Net 的姊妹网站 XboxDeveloper（http://www.xboxdeveloper.net）开始帮助整理 Xbox 可用的软件，尽管它从未达到 XboxHacker.Net 的水平。使用泄露的 Microsoft Xbox SDK 副本，程序员开始编写和移植各种 Xbox 应用程序，包括媒体播放器和 MAME 这样的模拟器。在 Michael Steil 的领导下，Xbox-Linux 项目（http://xbox-linux.sourceforge.net/）成功地将 Linux 操作系统运行在 Xbox 上。我推动启动了 OpenXDK 项目（http://sourceforge.net/projects/openxdk/），这是一个开源的开发工具包，将允许为 Xbox 开发软件而不受法律问题的阻碍，尽管这个项目只取得了部分成功。现在它由“Caustik”（Aaron Robinson）领导，他是凯斯西储大学的一名计算机科学学生。由于软件开发与硬件破解相比更具可访问性，为 XboxHacking 贡献的成员数量迅速增加。今天可用的 Xbox“自制”软件数量惊人，包括媒体播放器、控制台模拟器、实用程序以及原创游戏。

## **可信计算**

信任是安全的基础，为了对您的安全系统有信心，您需要对您正在运行的硬件和软件有信心。可信计算机是一种经过架构设计以抵御可能损害机器可信性的攻击的机器。有许多构建可信计算机的方法，从自动柜员机模型的物理安全和防篡改，到不那么硬件密集型的解决方案，如 Xbox 所使用的。Xbox 符合可信计算更广泛的图景，因为它是第一个高调、广泛部署的可信 PC 实现之一。从某种意义上说，Xbox 给我们提供了一个关于未来可信计算可能性的暗示。

可信计算是一种可能颠覆性的新兴技术。在像互联网这样的临时网络中可信客户端的兴起，预示着能够实现安全且私密的在线金融交易，减少或消除计算机病毒的发生，以及减少或消除垃圾邮件。可信 PC 还可以用于安全地存储敏感数据，例如你的医疗和财务记录以及你的淘气或尴尬的秘密。可信 PC 的另一个应用是可靠地执行对用户数字内容访问权限和管理政策的强制。可信计算中的数字版权管理（DRM）方面可能会从根本上改变我们今天使用计算机的方式；我们中的许多人享受着伪免费内容和灵活版权实施的好处。基本问题不是内容管理政策的存在——实际上，内容管理政策对消费者是有益的。真正的问题是当管理你权利的政策可以由内容提供商单方面设定时。在当前的可信 PC 提案中，用户不被信任能够控制他们机器内部的一些关键秘密。相反，用户的机器的可信性证明信息（建立可信性所需的信息）部分由第三方维护。我们能依赖一个非选举的、不受监管的、有商业利益的第三方来决定谁可以进行商业活动、发送电子邮件，以及其他方面被视为可信实体吗？

可信计算就像一把枪。只要你是控制扳机的人，拥有一把枪是件好事。不幸的是，许多可信 PC 的反对者担心，在实践中，系统可能会部署带有预设的权利、政策和第三方可信确认资源，这些资源对消费者来说指向错误的方向。在好景时期，一家公司可能会制定有利于用户的隐私和安全政策，以吸引更广泛的客户群，但一旦第十一章敲响，或者公司被出售或以其他方式易手，这些政策可能会改变。有什么能阻止商人最初用用户友好的政策推广可信计算，然后突然转变为挤压钱包的 DRM 模式呢？道德？

### **退一步思考**

“可信计算”这个短语存在一个问题：它已经变成了加密安全可信计算机的同义词。让我们退一步，只讨论构建可信计算机的替代方法。

在计算机领域，可信性一直很重要。然而，在计算技术的早期，由于机器非常昂贵，用于实施强大信任策略的硬件并不在消费者可触及的范围之内。例如，许多早期的机器配备了硬件内存管理单元（MMU）芯片的插槽。MMU 是通往可信硬件内存模型的第一步之一；MMU 的一部分工作就是执行页面级别的内存访问保护。MMU 作为可选件出售，因为当时它们相当昂贵。不幸的是，向可信硬件的转变在 MMU 处就停止了，部分原因是因为直到相对较近的时候，计算机网络才以任何主要形式存在。在一个非联网的世界里，数据只需要保护程序员错误和少数几个有权物理访问机器的用户。今天，计算机需要比 MMU 更强大的东西，需要一种能够在面对病毒和远程攻击者尝试利用细微的软件弱点来运行恶意代码的情况下提供信任的东西。

MMU 的硬件强制分页虚拟内存模型的自然扩展可能是带有标记内存模型的地址能力。内存标记是一组记录存储在内存位置中的数据或代码类型的位。在标记内存模型中，每个内存位置都有一组标记位，有点类似于在传统的错误纠正内存实现中，每个内存位置都与一些 ECC 位相关联。标记位帮助硬件执行数据类型管理策略；例如，标记为数据片段的内存位置永远不会被意外或故意地执行为代码。能力是由可信内核授予的指针，不能伪造。不可伪造属性最好通过标记位由硬件强制执行。许多架构也包含作为硬件能力一部分强制执行访问边界的功能。¹ 能力和内存标记并不是新概念；在 1961 年，Burroughs B5000 使用了能力（当时称为描述符）和标记内存来在硬件上保护，防止缓冲区溢出攻击，并将代码与数据隔离。² MIT PDP-1、Intel i432、IBM System/38 以及 Mach 和 Amoeba 操作系统也以某种形式实现了能力，这绝对不是使用能力或标记内存的系统完整列表。能力的安全属性也在许多学术研究中得到了证明，例如 EROS（极可靠操作系统）。³ 不幸的是，能力和标记内存从未进入主流 PC 架构的核心。安全和可靠性始终让位于成本、向后兼容性和性能。

这段简短的历史课表明，可信计算不需要像 Palladium 和可信计算平台联盟（TCPA）今天所提出的加密方法。事实上，仅凭加密本身并不能提供任何安全。安全密钥管理才是 Palladium/TCPA 中提供所有安全的关键。加密算法只是将密钥的安全性转移到用户的领域。

话虽如此，可以将能力和加密密钥进行类比。两者都需要一个可信的操作系统来管理它们的创建、分发和销毁。如果系统不能保护免受伪造密钥或能力的影响，两者同样脆弱。最大的不同之处在于，如果秘密密钥泄露，所有安全都会永远丢失。另一方面，能力是动态创建和销毁的，因此能力的泄露可能导致安全漏洞，但漏洞的范围和持续时间是有限的。在这方面，能力为计算机安全提供了一个更稳健的解决方案。

注意，仅依赖加密技术进行硬件安全仍然会使机器容易受到经典的缓冲区溢出式攻击和由于编程错误而造成的漏洞。软件状态的“测量”有助于通过在执行安全关键操作之前检测代码更改来减轻这种弱点，但测量并不是完美的解决方案。另一方面，在使用具有边界检查的硬件强制能力的系统中，缓冲区溢出攻击是不可能的。

内存标签也可以用来实现使用纯加密方法在可信计算中不可行的安全功能。一个例子是可信赖的分区秘密的并发处理。⁴ 在这个例子中，多个具有不同安全级别的线程在单个处理器上运行。硬件强制执行一项政策，即所有线程都将它们的权限级别印在它们访问的数据上。换句话说，每个计算同时在一个传统算术域和一个安全域中操作。

假设一个非分类线程将两个非分类数字相加并创建一个名为 *foo* 的数据。*foo* 的安全标签也与加法算术操作并行计算。在这种情况下，安全标签的结果是“非分类”。现在，假设一个绝密线程接触了 *foo*：*foo* 的安全标签现在变为“绝密”。非分类线程不能再读取 *foo*，即使非分类线程有一个有效的 *foo* 指针；*foo* 必须被明确重新分类，才能再次被非分类线程读取。

这样一个严格分区的安全系统可以用来确保，即使在存在漏洞和内存泄漏的情况下（包括内核内存在没有内存清除步骤的情况下被重新分配给用户进程的场景），内部内核结构也永远不会对用户进程可访问。此方案还可以用来建立安全审计跟踪，这对于帮助程序员追踪安全漏洞的根本原因非常有用，并在安全漏洞发生时作为损害控制措施。

公平地说，可信计算加密方法的一个优点是，如果恶意者通过某种硬件手段获取数据——通过监听硬件或窃取硬盘——数据是无法被解密的。然而，用户可以选择在任何计算机实现中使用加密来保护数据，包括使用硬件能力和标记内存的实现。安全密钥管理的问题仍然是一个难题，但也许可以通过将加密智能卡读卡器集成到 PC 中来部分解决这个问题。

没有本质原因说明一个可信的 PC 实现*必须*使用 Palladium 和 TCPA 中提出的加密技术。本节回顾的技术，即能力和标记内存，可以用来以不涉及用户失去设置自己的访问策略风险的方式实现一个安全、可信的 PC。用户将始终完全控制自己的机器和秘密。

### **Palladium 与 TCPA 的比较**

目前关于可信 PC 提案的混淆很多，即微软的 Palladium 和可信计算平台联盟（TCPA）。这两个提案之间有足够的相似之处，以至于许多人认为它们是同一件事，但每个倡议的目标是不同的。

TCPA 是一个多公司联盟，旨在创建具有一定可信度的计算机。值得注意的是，其大部分规范也可以应用于非 PC 平台。在 TCPA 中，可信度被植根于一个称为 TPM（可信平台模块）的安全硬件模块中。TPM 包含确保模块内包含的秘密永远不会通过软件攻击泄露的功能。它还包含诸如安全系统“测量”等功能，试图将 TPM 内的可信度转移到主机机器上。

相反，Palladium 是由微软单独创建的一个以 PC 为中心的整体安全概念。其组成部分之一是一个类似 TPM 的安全模块，但 Palladium 还要求对硬件芯片组和 I/O 端口的实现方式进行全面改革。芯片组需要强制执行来自所有潜在 DMA 源（如显卡）的内存安全策略。Palladium 还要求对键盘和视频子系统的 I/O 进行加密。

Palladium 对芯片组供应商、OEM 和微软之间合作的要求可能是一个潜在的重大缺陷。在今天的通用 PC 硬件行业中，没有足够的余地来支持广泛的加密安全改革的开销。此外，许多芯片组供应商没有实施安全系统的经验。在许多海外芯片组供应商面临的语言障碍之上，芯片组通常是在时间紧迫和注重成本的情况下开发的。在这些条件下开发的芯片组能被期望保护敏感的秘密吗？

Xbox 是当安全策略由一个机构定义而由另一个非常不同的组织实施时可能出错的一个例子。微软为一种可信赖的硬件制定了规范，即 Xbox。Xbox 中广泛使用了强加密算法，系统的主密钥被锁在复杂的硅片深处。然而，经验表明，可以通过组合一个未加密的调试端口、硬件初始化方案中的缺陷以及 CPU 指令指针边界情况处理中的错误来绕过 Xbox 的安全系统。这三个由三个独立方（组装承包商、Xbox 固件设计师和英特尔）犯下的微小疏忽，共同提供了一个方便的方法来击败 Xbox 的安全性。

这些疏忽中的每一个单独来看并不代表一个重大的安全问题。这引发了一个令人不安的问题：特定 Palladium 实现中的多少安全漏洞是由多个良性缺陷的叠加造成的。每个复杂的消费电子系统都有小错误或设计疏忽，尤其是在系统由多个独立实体构建，而这些实体的主要兴趣在于盈利时。

在消费电子行业，要么推出一个完美的产品，要么赚钱。不赚钱的产品会迅速被取消。因此，很难找到在所有方面都技术完美的消费产品。结果，保证像 Palladium 这样复杂的消费电子系统安全性的唯一实际方法就是将其投入市场，让黑客在许多年里随意攻击，直到所有的大漏洞都被发现并修补。

另一方面，TCPA 的 TPM 是一种为解决特定问题集而创建的设备，其范围比 Palladium 的小。因此，从市场角度来看，TPM 可能没有那么令人兴奋，但它可能更适合其预期目的。TPM 和 Palladium 都对硬件攻击较为脆弱，但 TPM 并不试图将安全要求扩展到第三方系统设计的领域。TPM 主要是一个安全密钥管理模块，可以检测主机系统的大部分修改和入侵。建立在这一基础之上的软件层完成其余的重活，*买者自慎*。

### **破解可信 PC**

当前对可信 PC 的提案对一些相当简单的硬件攻击较为脆弱，即使在没有任何集成监督或与漏洞相关的后门的情况下也是如此。

第一种攻击是我称之为“**S**urre**p**titious B**IOS**”，或 SPIOS（发音为“Spy OS”）攻击。SPIOS 可以用来击败依赖于可信 PC 的加密存储功能以防止未经授权的用户访问数据的 DRM 策略。基本思想是使用未经修改的 BIOS 以可信模式启动 PC，并将所有所需数据提取到系统 RAM 中，然后在交换 BIOS 镜像的同时执行系统热重启。

修改后的 BIOS 镜像可以用来从系统 RAM 中读取所需数据。所需数据可能是存储在内存中的会话密钥，或者是实际解密的数据本身，这取决于程序如何在内存中结构和缓存其数据。由于当前的可信 PC 规范要求基于 LPC 总线的 BIOS，因此可以使用廉价的替代固件设备（类似于在 Xbox 上使用的设备）来执行此攻击。应用程序程序员可以使用一些技术来使这种攻击复杂化，例如每次只将一个数据块解密到系统内存中，但许多这些技术会严重降低系统性能。如果禁用文件缓存和预取，系统性能的降低可能尤为明显。

另一种攻击是我称之为“**S**urre**p**titious R**AM**”，或 SPAM 攻击。这种攻击的目标是欺骗负责测量系统状态适宜性的可信例程。在 DRAM 芯片和内存连接器之间的插件内存卡上安装了一个设备，例如 FPGA 或 ASIC。这个设备监控经过的地址模式，或者它可能有一个额外的连接器，嗅探连接到加密模块 I/O 引脚的线的状态，该加密模块负责验证系统。

不论哪种方式，当系统测量正在进行时，SPAM 设备展示的内存镜像与未经修改、可信的系统状态一致。然而，在所有其他操作模式下，SPAM 设备展示的内存镜像被修改为执行用户想要的任何操作。这种修改可能非常微妙：只需在正确的位置翻转几个比特即可修改安全内核中的关键分支指令。

与 SPIOS 相比，该设备更强大，因为它在已启动并被认为是可信的系统上工作。它可以有效地对抗更广泛的 DRM 方案，以及本地机器和服务器之间的一些认证交易。然而，仅使用 SPAM 本身并不能将系统错误地识别为另一个已注册、受信任的系统，因为 SPAM 缺乏本地机器中防篡改安全加密模块和认证服务器之间共享的秘密。错误的系统识别可能需要从防篡改安全加密模块中提取密钥（可能，但不是简单的事情，并且很可能会破坏模块），或者以某种方式欺骗另一个已注册、受信任机器上的安全加密模块以提供伪造的身份。

SPAM 设备可以以相对较低的成本（高性能 FPGA 今天单件价格低至 50 美元）制造，并且安装非常简单。SPAM 可以直接集成到内存模块中（在这种情况下，它既作为信任违规设备，也作为内存扩展设备使用），或者作为安装在主板内存插槽和现有内存设备之间的堆叠配置的设备。在某些内存卡配置中，尤其是使用散热罩的配置，可能隐藏 SPAM 设备并将模块伪装成常规内存扩展设备。虽然这种方法很复杂，但对于存储在受信任的 PC 服务器上高价值机密的跨国公司或银行来说，这可能是一种值得尝试的攻击手段。

### **展望未来**

当考虑可信计算的前景时，我们首先需要考虑目前提出的方案是否会提供它们承诺的所有好处，然后权衡这些好处与对消费者权利的潜在危害以及犯罪分子（增强的隐私可以用于善恶）的潜在好处。如果可信计算可以为在线业务提供完美的安全性，那么这可能值得潜在的风险。然而，本章中概述的场景表明，可信 PC 的安全性可能并不完美。

以 Xbox 为例。Xbox 是一个受信任的 PC 实现，只需 50 美元的无焊点模块就可以被黑客攻击。这为可以信任 Xbox 存储的秘密的价值设定了一个相当严格的限制。硬件修改芯片如此便宜，以至于它们可以通过复制游戏标题的成本来支付自己，或者如果你选择付费让某人帮你安装芯片，那么两个游戏就可以支付。

当然，盗版内容的道德和社会影响始终存在，以及新的立法，如 DMCA，其部分目的是将这些行为定为犯罪。不幸的是，目前摆在桌上的可信个人电脑提案在面临类似低成本的硬件攻击时也显得薄弱。因此，它们不太可能提供所需的安全级别，以保护高价值或非常尴尬的秘密。

事实上，无论是否违法，无论意图是善是恶，黑客技术都将被开发。因此，教育公众了解黑客技术，让每个人都了解他们“可信个人电脑”的限制，对消费者和公司来说是最有益的。最坏的情况是，如果数十亿美元被投资于可信计算，却只产生对消费者来说没有更大安全或隐私的净结果，同时通过糟糕的内容政策实施严重限制消费者的权利。

对于可信个人电脑的支持者来说，好消息是集成电路特征尺寸的缩小正在推动整个个人电脑的更高集成度。在十年内，今天的个人电脑将可以集成到单块硅片上。一旦 RAM 和 BIOS 完全集成到单块硅片上，破解系统将变得更加困难——但并非不可能。聚焦离子束（FIB）机器，这是芯片设计师和失效分析实验室使用的工具，可以切割和跳接纳米级特征。对于可信机器设计师来说，另一个好处是公钥处理器可能变得如此之小，以至于可以轻松集成到芯片中，特别是内存芯片，它们可以使用强加密来验证和加密它们的 I/O。

另一种可能有助于实现可信个人电脑的技术是集成抗篡改或篡改检测功能。例如，时域反射计（TDR）可以被集成到芯片的 I/O 单元中。TDR 可以通过识别电线电学特性的某些变化来检测电线上的窃听者。除了检测窃听者的能力外，集成 TDR 设备对于高性能 I/O 来说也是理想的，因为它们可以用来校准驱动阻抗和均衡/预加重滤波器，这些滤波器对于多吉比特速度的通信是必需的。

## **结论性思考**

本书带您快速浏览了 Xbox 硬件破解，从焊接和拆解的基础到最新的项目和技巧。它还向您介绍了 Xbox 破解的社会方面：破解者是谁，以及社会、法律与破解之间的相互作用。

虽然在几年后，如何在 Xbox 中安装蓝色 LED 的细节可能不再相关，但你学习到的执行安装的技能将伴随你一生。此外，黑客和消费者面临的社会和法律问题将超越 Xbox，扩展到我们新兴的信息中心生活方式的每一个部分。

本书中的材料只是一个起点；外面有一个充满硬件的世界等待我们去探索。我希望这本书能为新手读者提供一个强大的起点，让他们成为探索者、修复者和一个日益充满、受控于以及依赖电子的世界中的创新者。

快乐黑客！

— bunnie@xenatera.com

* * *

¹ 使用标记能力的高效、高性能硬件实现精确的对象边界，可以在名为“具有嵌入式地址和几乎精确对象边界的功能表示”的技术笔记中找到，由 Jeremy Brown、J.P. Grossman、Andrew Huang 和 Tom Knight 撰写。http://www.ai.mit.edu/projects/aries/Documents/Memos/ARIES-05.pdf

² “Burroughs B5000 架构——20 年后仍然领先于时代？”由 Alastair J.W. Mayer 撰写。http://www.ajwm.net/amayer/papers/B5000.html

³ 最初由宾夕法尼亚大学的 Jonathan Shapiro（http://www.eros-os.org/）构思

⁴ 关于此类安全系统的更多信息，可以在名为“动态确保安全信息流的最低可信计算基础”的技术笔记中找到，由 Jeremy Brown 和 Tom Knight 撰写。http://www.ai.mit.edu/projects/aries/Documents/Memos/ARIES-15.pdf
