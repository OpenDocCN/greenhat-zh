# 引言

欢迎阅读《设计 BSD Rootkits》！本书将向您介绍在 FreeBSD 操作系统下编程和开发内核模式 rootkit 的基础知识。通过“以例学”的方法，我将详细阐述 rootkit 可以采用的不同技术，以便您能学习 rootkit 代码在最简单层面的构成。需要注意的是，本书不包含或诊断任何“完整”的 rootkit 代码。实际上，本书的大部分内容集中在*如何*使用技术，而不是*如何*使用它。

注意，本书与编写漏洞利用或如何获取系统 root 访问权限无关；相反，它关于在成功入侵后长时间保持 root 访问权限。

# 什么是 rootkit？

虽然关于构成 rootkit 的定义有很多种，但为了本书的目的，*rootkit*是一组代码，允许某人控制主机操作系统的某些方面，而不暴露其存在。从根本上说，这就是 rootkit 的特点——逃避最终用户的认知。

更简单地说，rootkit 是一个允许用户保持“root”访问权限的“套件”。

# 为什么选择 FreeBSD？

FreeBSD 是一个高级的开源操作系统；使用 FreeBSD，您可以完全无限制地访问内核源代码，这使得学习系统编程变得更容易——这正是您在本书中将要做的。

# 本书的目标

本书的主要目标是让您接触 rootkit 和 rootkit 编写。完成本书后，您“理论上”应该能够实时重写整个操作系统。您还应该理解 rootkit 检测和移除的理论和实践。

本书的次要目标是向您提供一个实际、动手的方式来了解 FreeBSD 内核的某些部分，最终目标是激发您自己探索和破解其余部分。毕竟，亲自动手总是学习最好的方式。

# 适合阅读本书的人群？

本书的目标读者是对入门级内核黑客感兴趣的程序员。因此，编写内核代码的经验不是必需的，也不期望有。

为了充分利用本书，您应该对 C 编程语言有很好的掌握（即您理解指针），以及*x*86 汇编（AT&T 语法）。您还需要对操作系统理论有相当的了解（即您知道进程和线程的区别）。

# 内容概述

本书（非官方地）分为三个部分。第一部分（[第一章](ch01.html "第一章. 可加载内核模块"））基本上是对内核黑客技术的快速浏览，旨在使新手跟上进度。接下来的部分（[第二章](ch02.html "第二章. 捕获"）至[第六章](ch06.html "第六章. 整合一切"）涵盖了当前流行的根套技术范围（即你在“野外”会发现的技术）；而最后一部分（[第七章](ch07.html "第七章. 检测"））则专注于根套检测和移除。

# 本书使用的约定

在本书中，我使用粗体字在代码列表中指示我输入的命令或其他文本，除非有其他特别说明。

# 结论

虽然本书专注于 FreeBSD 操作系统，但大多数（如果不是全部）的概念都可以应用于其他操作系统，例如 Linux 或 Windows。实际上，我在那些系统上学到了本书中一半的技术。

### 注意

本书中的所有代码示例均在基于 IA-32 的计算机上运行 FreeBSD 6.0-STABLE 进行过测试。
