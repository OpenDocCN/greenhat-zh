# 简介：什么是 Ruby？

Ruby 是“一种注重简洁和高效的开源编程语言。它拥有优雅的语法，易于阅读和编写。”^([1)] 它由 Yukihiro “Matz” Matsumoto 在 1995 年发布。它通常被描述为一种非常高级的语言或脚本语言，这取决于你问的是谁。因此，它不需要程序员指定计算机如何实现你的决策的细节。像其他高级语言一样，Ruby 通常用于文本处理应用，包括越来越多的网络应用。我希望一旦你更熟悉这门语言，你会同意它很好地帮助你摆脱障碍，让你简单地完成工作。

Ruby 拥有一个非常有趣的血统。Matz 本身曾经说过，对 Ruby 设计影响最大的两种语言是 Common Lisp 和 Smalltalk——它们的影响如此之大，以至于他戏称 Ruby 为 *MatzLisp*。另一方面，一些 Ruby 爱好者强调 Ruby 与 Smalltalk 和 Perl 的相似性，正如 Rails 的创造者 David Heinemeier Hansson 在 2006 年 6 月的 *Linux Journal* 采访中所说。Hansson 还将 Ruby 描述为“一种让程序员快乐的编写美观代码的语言。”我完全同意。^([2)]

### 注意

*如果你对 Ruby 的遗产感兴趣，请参阅附录中 Ruby 与其他语言的比较*。

# 获取和配置 Ruby

但历史就到这里吧——让我们把这些问题放一边，实际上安装 Ruby 吧。Ruby 是灵活的、富有表现力的，并且遵循免费软件/开源许可协议。（许可协议可在[`www.ruby-lang.org/en/about/license.txt`](http://www.ruby-lang.org/en/about/license.txt)在线获取。）

## 在 Unix 或类似 Unix 的系统上

使用类似 Unix 的操作系统（如 Mac OS X、BSD 和 GNU/Linux 变体）的用户会容易一些。许多这些系统要么预先安装了 Ruby，要么将其作为非常方便的软件包提供。

如果 Ruby 在您的计算机上预先安装，它可能包括我们在下一章中将要使用的交互式 Ruby Shell (irb)。如果您使用包管理器安装了 Ruby，irb 可能会作为一个单独的包提供，可能包含在包名中的特定版本号。

如果你的包管理器不包括 Ruby 或者你想使用比包管理器提供的更新版本的 Ruby，你只需浏览到 [`www.ruby-lang.org`](http://www.ruby-lang.org) 并点击下载 Ruby 链接。下载当前的稳定版本（在撰写本文时为 1.8.4），这是一个 .tar.gz 文件。然后以超级用户（也称为 `root`）的身份输入以下命令。（我将假设你使用的是 1.8.4 版本，尽管你下载 Ruby 时可能是一个更晚的版本。）

```
cp ruby-1.8.4.tar.gz /usr/local/src/
cd /usr/local/src
tar -xzf ruby-1.8.4.tar.gz
cd ruby-1.8.4
```

然后按照 README 文件中的说明操作。安装的常用命令集如下。

```
./configure
make
make install
```

您现在应该有一个可工作的 Ruby 版本。您可以通过执行以下命令来测试：

```
ruby --version
```

如果它报告 `ruby 1.8.4 (2005-12-24) [i486-linux]` 或您下载的版本以及您的系统，则一切正常.^([3])

## 在 Windows 系统上

如果您使用的是 Windows 系统，可以在 [`rubyinstaller.rubyforge.org/wiki/wiki.pl`](http://rubyinstaller.rubyforge.org/wiki/wiki.pl) 找到一键 Ruby 安装器。只需按照那里的说明下载适合您系统的 Ruby。这是一个综合性的包——请访问网站查看其内容的最新列表。在撰写本文时，它包括了基础语言和各种流行的扩展，包括 SciTE（一个语法高亮文本编辑器）、FreeRIDE（一个 Ruby 开发环境）、包含 Dave Thomas 的书 *Programming Ruby*（也称为 The Pickaxe）的帮助文件，以及 RubyGems 包安装器。它还包含 irb，我们将在 第一章 中探讨。

* * *

^([1]) 根据 [`ruby-lang.org`](http://ruby-lang.org)。

^([2]) 关于 Ruby 的起源，请参阅 Ruby-Talk 存档 ([`blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/179642`](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/179642)) 和 O’Reilly 对 Matz 的采访 ([`www.linuxdevcenter.com/pub/a/linux/2001/11/29/ruby.html`](http://www.linuxdevcenter.com/pub/a/linux/2001/11/29/ruby.html))。

^([3]) Ruby，像大多数开源语言一样，正在不断开发中。本书中的代码使用的是 Ruby 版本 1.8.4，这是我编写本书中的脚本时的稳定版本。Ruby 版本 1.8.6 在本书出版前稍早发布。

# 书籍的动机

本书旨在在短期内实用，在长期内提供信息。这些目标对本书的组织方式产生了深远的影响。

它也旨在让新手易于使用，但重点在于编程范式及其对语言设计和语言使用的影响——这些是学术编程书籍中常见的主题。如今，您可以使用任何流行的语言来完成大多数任务，但这并不意味着解决特定问题在每种语言中都会同样轻松。没有一种语言是孤立存在的，讨论像 Ruby 这样的语言时，应该承认其设计中所做的决策。您会发现它是一个非常灵活的语言，可以让您以强大的方式结合不同的方法。生物学家认识到杂交活力；Matz 在创建 Ruby 时也是如此。

### 注意

*当我提到编程范式时，我指的是三种主要类型：命令式、面向对象和函数式。广义而言，*命令式*语言告诉计算机*这样做，然后那样做，然后做下一件事。面向对象*语言定义*对象（事物类型），它们知道如何执行*方法（特定动作）。函数式*语言将编程问题视为数学关系。Ruby 非常灵活，这意味着你可以用任何这些风格进行编程；然而，它主要是面向对象的，同时受到一些强烈的函数式影响。本书在 Ruby 的函数式方面比其他一些书籍略为侧重*。

## 习惯用法

本书使用几种约定来区分不同类型的信息。当你第一次遇到一个新术语时，它将以*斜体*显示。由于这是一本编程书，你经常会看到以*代码字体*显示的小型`代码示例`。代码列表将如下所示：

```
puts "Hi, I'm code!"
```

## 章节总结

下面是关于章节内容的简要介绍：

**第一章**

本章描述了交互式 Ruby（irb），并介绍了一些关键的 Ruby 概念。

**第二章**

本章介绍了我们的第一个独立程序（或脚本），在完成简单任务的同时继续引入关键 Ruby 概念。

**第三章**

本章包含对开发者有用的工具，这些工具以库文件的形式提供，供其他程序使用。

**第四章**

本章专注于处理文本。

**第五章**

本章主要关注数值数据，包括纯数学和递归。

**第六章**

本章对函数式编程给予了高度重视，这在前面章节中已有暗示。

**第七章**

本章详细介绍了测试、分析和优化你的程序。

**第八章**

本章包含专门用于标记的文本处理子集，如 HTML 和 XML。

**第九章**

本章讨论了通用网关接口（CGI）以及如何在网页文档中嵌入 Ruby 代码。

**第十二章**

本章向您展示如何使用 RubyGems，Ruby 的包管理器，并使用该系统安装 Rails，Ruby 的主要 Web 开发框架。

**第十三章**

本章包含一个示例 Rails 应用程序，通过它来讨论对任何 Rails 开发者都很有用的关键设计问题。

现在，让我们深入探讨并开始使用 Ruby 来完成一些有趣的任务。但在我们开始创建单独的程序文件之前，我们将探索 Ruby 如何与交互式 Ruby 环境协同工作。
