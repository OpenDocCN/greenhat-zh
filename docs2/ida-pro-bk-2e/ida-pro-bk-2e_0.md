# 引言

![无标题图片](http://atomoreilly.com/source/nostarch/images/854059.png.jpg)

撰写一本关于 IDA Pro 的书是一项具有挑战性的任务。它是一个复杂的软件，功能众多，甚至无法在合理大小的书中详细说明，这是最基本的问题。IDA 的新版本也倾向于频繁发布，以至于任何一本书在上市时几乎都会落后一个版本，甚至两个版本。包括在第一版即将付印时发布的 5.3 版本，自第一版出版以来，已经发布了七个新的 IDA 版本。6.0 版本的发布，它引入了一个基于 Qt 的新图形用户界面，激发了我更新这本书并解决在中间期间引入的许多新功能。当然，一如既往，在后期又发布了另一个 IDA 版本（6.1），这只是为了使事情更加有趣。

我在这版中的目标依然是帮助他人开始使用 IDA，并可能对逆向工程产生兴趣。对于任何想要进入逆向工程领域的人来说，我无法强调培养编程技能的重要性。理想情况下，你应该热爱代码，甚至可能达到吃、睡、呼吸代码的程度。如果你觉得编程令人生畏，那么逆向工程可能不适合你。有人可能会争论说逆向工程根本不需要编程，因为你所做的一切只是拆解别人的程序；然而，如果不致力于开发脚本和插件来自动化你的工作，你将永远无法成为一个真正有效的逆向工程师。在我的情况下，编程和逆向工程替代了《纽约时报》周日填字游戏的挑战，因此很少感到乏味。

为了保持连贯性，这一版保留了第一版的整体结构，并在适当的地方进行了详细阐述和添加了材料。阅读这本书有几种方式。对逆向工程背景知识了解不多的用户可能希望从第一章和第二章开始，以获取一些关于逆向工程和反汇编器的背景信息。没有太多 IDA 经验的用户，如果想要直接开始，可以从第三章开始，该章节讨论了 IDA 安装的基本布局，而第四章则涵盖了当你启动 IDA 并加载文件进行分析时会发生什么。第五章到第七章讨论了 IDA 的用户界面功能和基本能力。

对 IDA 有一定了解的读者可能希望从第八章开始，该章节讨论了如何使用 IDA 处理复杂的数据结构，包括 C++类。第九章接着介绍了 IDA 的交叉引用，这是 IDA 基于图形显示的基础（也在第九章中介绍）。第十章为对在非 Windows 平台（Linux 或 OS X）上运行 IDA 感兴趣的读者提供了一些有用的信息。

对于更高级的 IDA 用户来说，从第十一章到第十四章可能是一个好的起点，因为它们涵盖了 IDA 及其配套工具的一些边缘用途。第十一章简要介绍了 IDA 的一些配置选项。第十二章涵盖了 IDA 的 FLIRT/FLAIR 技术和相关的工具，这些工具用于开发和利用签名来区分库代码和应用代码。第十三章提供了一些关于 IDA 类型库及其扩展方式的见解，而第十四章则回答了是否可以使用 IDA 来修补二进制文件这一常被询问的问题。

IDA 是一个功能强大的工具，直接使用即可；然而，其最大的优势之一是其可扩展性，用户已经利用这一点在多年中让 IDA 做一些非常有趣的事情。IDA 的可扩展性功能在第十五章到第十九章中有所介绍，这些章节从 IDA 的脚本功能开始，包括对 IDAPython 的更多覆盖，然后系统地介绍了 IDA 的编程 API，这些 API 由其软件开发工具包（SDK）提供。第十六章概述了 SDK，而第十七章到第十九章则指导你了解插件、文件加载器和处理器模块。

在覆盖了 IDA 的大部分功能之后，从第二十章到第二十三章转向了 IDA 在逆向工程中的更多实际应用，通过考察编译器的差异(第二十章); 如何使用 IDA 分析混淆代码，这在分析恶意软件时经常遇到(第二十一章); 以及 IDA 在漏洞发现和分析过程中的应用(第二十二章). 第二十三章通过展示多年来发布的一些有用的 IDA 扩展（插件）来结束这一部分。

本书以对 IDA 内置调试器的扩展覆盖结束，从第二十四章到第二十六章. 第二十四章首先介绍了调试器的基本功能。第二十五章讨论了使用调试器检查混淆代码的一些挑战，包括处理可能存在的任何反调试功能的挑战。第二十六章通过讨论 IDA 的远程调试能力和使用 Bochs 仿真器作为集成调试平台来结束本书。

在撰写本书时，IDA 6.1 版是最新的版本，本书主要基于 6.1 版编写。Hex-Rays 足够慷慨，免费提供旧版本的 IDA；IDA 的免费版是 IDA 5.0 的简化功能版本。虽然本书中讨论的许多 IDA 功能也适用于免费版，但附录 A 简要概述了免费版用户可能会遇到的一些差异。

最后，由于从 IDA 脚本开始并逐步过渡到创建编译插件是一种相当自然的进展，附录 B 提供了每个 IDC 函数与其对应的 SDK 对应函数的完整映射。在某些情况下，你会在 IDC 函数和 SDK 函数之间找到一个一对一的对应关系（尽管在所有情况下这些函数的名称都不同）；在其他情况下，你会发现需要多个 SDK 函数调用才能实现单个 IDC 函数。附录 B 的目的是回答类似“我知道如何在 IDC 中做*X*，我该如何通过插件来做*X*？”的问题。附录 B 中的信息是通过逆向工程 IDA 内核获得的，这在 IDA 的非典型许可协议下是完全合法的。

在整本书中，我尽量避免了长序列的代码，而是选择短序列来展示特定的点。绝大多数示例代码，以及用于生成示例的许多二进制文件，都可以在本书的官方网站[`www.idabook.com/`](http://www.idabook.com/)上找到，在那里你还可以找到书中未包含的额外示例以及书中使用的全面参考文献列表（例如，所有脚注中提到的所有 URL 的实时链接）。
