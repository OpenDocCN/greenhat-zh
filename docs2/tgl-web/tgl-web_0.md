# 前言

只是在十五年前，Web 既简单又无关紧要：一种奇特的机制，允许少数学生和一些社交障碍、地下室居住的极客访问彼此的科学、宠物或诗歌主页。今天，它是编写复杂、交互式应用的优选平台（从邮件客户端到图像编辑器到计算机游戏），并且是一种覆盖全球数亿普通用户的媒介。它也是商业的重要工具，重要性足以在 1999 年至 2001 年的互联网泡沫破裂时被归因于引发经济衰退。

这种从默默无闻到无处不在的进步速度之快，即使是按照我们今天信息时代习惯的标准来看也是惊人的——其上升速度带来了一个意想不到的问题。万维网的设计缺陷和实施不足是那种从未渴望达到当前地位、从未有机会停下来回顾以前错误的技术。由此产生的问题迅速成为今天数据安全最重大和最普遍的威胁之一：事实证明，人们应用于充满跳舞仓鼠的灰黑色主页的协议设计标准，并不一定适用于每年处理数百万张信用卡交易的在线商店。

当回顾过去十年时，难以避免地会感到些许失望：迄今为止，几乎所有值得注意的在线应用在 Web 早期阶段都不得不为节省的代价付出代价。嘿，*xssed.com*，一个专注于跟踪与 Web 相关的安全漏洞的狭窄子集的网站，在运营大约三年后积累了约 50,000 条条目。然而，浏览器供应商对此大多无动于衷，而安全社区本身也几乎没有提供关于如何应对这种普遍痛苦的见解或建议。相反，许多安全专家坚持构建复杂的漏洞分类法，并习惯性地进行模糊的手腕扭动，关于这种混乱的所谓原因。

问题的一部分在于，这些专家长期以来一直对整个 Web 安全问题不屑一顾，无法理解其本质。他们迅速将 Web 安全漏洞标记为*困惑的副手问题*^([1])或其他三十年前在贸易杂志上概述的吸引人的标签的微不足道的表现。他们为什么要关心 Web 安全呢？与传统的系统妥协漏洞的严重性相比，在无聊的宠物主题主页上注入的令人厌恶的评论有什么影响？

回顾过去，我相当确信我们大多数人都忍住了。不仅互联网的重要性远远超出了最初的预期，而且我们没有注意到一些基本特征，这些特征使它远远超出了我们的舒适区。毕竟，即使是设计得最好、最彻底审计过的网络应用程序，其问题也比非网络应用程序多得多，而且出现频率也更高。

我们都犯了错误，现在是忏悔的时候了。为了忏悔，*网络迷踪*试图迈出一小步，朝着急需的正常化前进，因此，它可能是第一本提供对网络应用程序安全领域当前状况的系统性和彻底分析的作品。在这个过程中，它旨在揭示我们——安全工程师、网络开发人员和用户——每天都要面对的安全挑战的独特性。

本书的设计布局集中在探索一些最突出、最高级别的浏览器构建块和由此产生的各种与安全相关的话题。我采取这种方法，因为它似乎比简单地使用任意选择的分类法（许多其他信息安全书籍中见到的做法）更有信息量和直观性。我也希望这种方法会使*网络迷踪*成为一本更好的读物。

对于寻求快速答案的读者，我决定在许多章节的末尾包含快速工程速查表。这些速查表概述了处理网络应用程序设计中遇到的一些最常见问题的合理方法。此外，本书的最后一部分提供了一个快速词汇表，列出了可能遇到的知名实现漏洞。

# 致谢

《网络迷踪》的许多部分都源于为谷歌的《浏览器安全手册》所进行的研究，这是一份我在 2008 年整理的技术维基，并在 Creative Commons 许可下公开发布。您可以在[`code.google.com/p/browsersec/`](http://code.google.com/p/browsersec/)在线浏览原始文档。

我很幸运能加入一家允许我追求这个项目的公司，并且很高兴能与一群才华横溢的同行合作，他们为使《浏览器安全手册》更加有用和准确提供了出色的建议。特别是，感谢 Filipe Almeida、Drew Hintz、Marius Schilder 和 Parisa Tabriz 在他们的协助。

我也自豪地站在巨人的肩膀上。这本书在很大程度上归功于信息安全社区成员对浏览器安全的研究。特别感谢 Adam Barth、Collin Jackson、Chris Evans、Jesse Ruderman、Billy Rios 和 Eduardo Vela Nava 在这个领域的理解上的进步。

感谢大家——并继续做好工作。

* * *

^([1]) *混乱代理问题* 是信息安全中的一个通用概念，用于指代一类广泛的设计或实现缺陷。这个术语描述了任何允许攻击者欺骗程序滥用某些“权限”（访问权限）以未预期的方式操纵资源的向量——假设这种未预期的方式对攻击者有利，无论这种利益如何定义。短语“混乱代理”通常由学术界的安全研究人员引用，但由于在某种程度上抽象考虑时，几乎所有现实世界的安全问题都可以归入这个类别，因此这个术语几乎毫无意义。
