## 简介

![图片](http://atomoreilly.com/source/nostarch/images/1616079.png) 我向一位精神科护士实践者询问了偏执，被告知“偏执是感觉人们都在针对你。”医学词典可能会给出一个稍微不同的定义，但这个定义实际上对任何系统管理员都非常有用。并不是互联网上的每个人都试图攻击你，但总有**某人**想要入侵你的系统。即使你认为你没有什么有价值的东西，也有人想要拥有你的电脑。而且你不会意识到你所拥有的价值，直到别人拥有它。这就是人性。

如果你不在互联网上感到偏执，那你就有麻烦了。

这就是 OpenBSD 的作用所在。

这本书是关于 OpenBSD 操作系统的介绍。OpenBSD 是 BSD 操作系统家族的一员。它被广泛认为是在任何许可条款下最安全的操作系统。它被互联网服务提供商、嵌入式系统制造商以及任何需要安全和稳定性的个人广泛使用。如果你是一位经验丰富的 Unix 系统管理员，想要将 OpenBSD 添加到你的技能库中，这本书就是为你准备的。

当你完成这本书后，你应该能够舒适地使用 OpenBSD。你将了解如何配置、故障排除和升级运行 OpenBSD 的计算机，并对 OpenBSD 的软件、安全和网络管理功能有基本的了解。

## 什么是安全？

我们经常使用“安全”这个词，所以花点时间来谈谈安全本身是值得的。我们都有一种模糊的概念，知道它意味着什么。“安全”意味着你的东西是安全的，其他人无法得到它。这已经很好了，但还不够。在信息技术中，安全有三个部分：

> 机密性
> 
> 这意味着秘密数据应该保持秘密。你的私人信息不得公之于众。那个东欧儿童色情集团不应该得到你的信用卡号码。
> 
> 完整性
> 
> 这意味着系统上的数据在没有授权的情况下不应被更改。你的记录应该保持完整。那个入侵者不应该更改订单的送货地址，让你的员工将一箱真正昂贵的物品运送到底特律的一个废弃仓库。
> 
> 可用性
> 
> 这意味着系统一直在运行。如果你的业务依赖于你的网站，失去网站就意味着失去生意。能够让你的网站关闭的人可以让你公司陷入困境。而且各种各样的人愿意让你关闭，要么是为了竞争，要么只是为了取乐。

由于担任系统管理员的时间比一些人生存的时间还要长，我对安全性的看法更为非正式。安全性意味着消除由计算机问题引起的糟糕日子。花一天时间让一个软件编译不是糟糕的一天。是不是一个令人烦恼的一天？当然，但这不是 *糟糕的*。需要从我的系统中驱逐入侵者的一天是糟糕的。因为计算机入侵而需要开会的一天是糟糕的。当我意识到我无法信任网络上的任何计算机，我必须重新安装我拥有的每一件该死的设备时，那真的是糟糕的。^[[1]]

虽然 OpenBSD 无法改变我的某些服务器已经足够老旧，以至于可以离开小学的事实，但它可以修复安全性的软件方面。

## 什么是 BSD？

在 20 世纪 70 年代，AT&T 需要大量专门定制的计算机软件来运营其业务。该公司被禁止在计算机行业竞争，因此无法销售这种软件。相反，AT&T 以象征性的费用将其软件和相关源代码许可给大学。大学通过使用这种软件而不是价格昂贵的商业软件来节省资金，而大学生则有机会接触这种巧妙的技术，并学习一切是如何工作的。作为回报，AT&T 获得了曝光、一些零花钱，以及一代在 AT&T 技术上磨砺的计算机科学家。每个人从这个交易中都得到了一些东西。

在此计划下分发最著名的软件是 UNIX。

与现代操作系统相比，原始的 UNIX 存在许多问题。然而，有成千上万的学生可以访问其源代码，数百名教师需要为他们的学生寻找有趣的项目。如果一个程序表现异常，或者操作系统本身存在问题，与系统生活在一起的人们拥有解决问题的工具和动力。他们的努力迅速提高了 UNIX 的性能，并创造了我们现在视为理所当然的许多功能。学生们增加了控制运行进程的能力，也称为 *作业控制*。UNIX 的 S51K 文件系统让系统管理员哀嚎和咬牙切齿，所以他们用快速文件系统（FFS）来替换它，这引入了一系列现代文件系统都具备的特性。多年来，UNIX 添加了许多小型、有用的程序，并替换了整个子系统。

加州大学伯克利分校的计算机科学研究中心（CSRG）从 1979 年到 1994 年作为 UNIX 代码改进的中心交易所。该小组收集了来自其他大学的更改，评估它们，打包它们，并将编译免费分发给任何拥有有效 AT&T UNIX 许可证的人。CSRG 还与国防高级研究计划局（DARPA）签订了合同，在 UNIX 中实现各种功能，如 TCP/IP。这个结果软件集合后来被称为伯克利软件发行版，或 BSD。用户使用 CSRG 的软件，进一步改进它，并将他们的改进反馈给 CSRG。今天，我们认为这是一种相当标准的开源项目运行方式，但在 1979 年，它是革命性的。

在软件开发中，15 年的工作是一生。相比之下，微软在 15 年内从 Windows 95 发展到 Windows 7。CSRG 成员收集了如此多的 UNIX 增强和改进，以至于他们几乎用 CSRG 及其贡献者创建的代码替换了所有原始 UNIX 代码。你必须仔细寻找才能找到任何原始的 AT&T 代码。

最终，CSRG 的资助逐渐减少，很明显 BSD 项目将结束。在加州大学内部经过一些政治上的争执后，1992 年，BSD 代码在被称为*BSD 许可证*的许可下向公众发布。

### BSD 许可证

BSD 代码可以在历史上可能是最宽松的许可下供任何人使用。该许可证可以概括如下：

+   不要声称是你写的。

+   如果它坏了，不要责怪我们。

+   不要使用我们的名字来推广你的产品。

总体来说，这意味着你可以对 BSD 代码做几乎所有你想做的事情。（原始的 BSD 许可证确实要求如果软件产品包含 BSD 许可代码，用户必须被告知，但后来这个要求被取消了。）你甚至不需要与原始作者分享任何更改！人们可以将 BSD 包含在专有、开源或免费产品中。

与限制性的*版权*或更宽松但仍受限制的*copyleft*不同，BSD 许可证有时被称为*copycenter*，即“把这个带到复印中心，为自己打印几份。”不出所料，像 Sun Microsystems 这样的公司立刻就采用了 BSD。它是免费的，它工作得很好，而且许多新毕业生都有使用这项技术的经验。有一家公司，BSDi，专门成立来利用 BSD Unix。

### AT&T 与世界的对抗

在 AT&T 的土地上，UNIX 的开发仍在继续。AT&T 从 BSD Unix 发行版中取了部分内容，并将其与官方 UNIX 集成，然后将结果重新许可给那些提供改进的大学。这对所有人来说都很好，直到美国政府拆分了 AT&T，结果的公司被允许在计算机软件业务中竞争。

AT&T 拥有一项特别有价值的软件资产：一个经过数千人广泛调试的高端操作系统，具有强大的功能，如各种小巧但强大的命令、现代文件系统、作业控制和 TCP/IP。AT&T 成立了一家子公司，Unix Systems Laboratories (USL)，它欣然开始向企业销售 UNIX，并对其收取非常高的费用，同时维持着最初赋予它如此先进操作系统的大学关系。

加州大学伯克利分校公开发布 BSD 代码引起了 USL 极大的不满。几乎立即，USL 起诉了大学和利用 BSD 的软件公司。加州大学声称 CSRG 从与 AT&T 无关的数千名第三方贡献者那里编译了 BSD，并且它是 CSRG 可以随意处理的知识产权。奇怪的是，这场诉讼将 BSD 推广给了那些否则永远不会听说它的人，催生了开源 BSD 变体，如 386BSD、FreeBSD 和 NetBSD。

1994 年，经过两年的法律纠纷，加州大学的律师证明，AT&T UNIX 的大部分实际上是从 BSD 中取来的，而不是相反。更糟糕的是，AT&T 违反了 BSD 许可证，从它所获取的文件中移除了 CSRG 的版权。

剩余的争议源文件只有寥寥数个。在法庭上备受打击，USL 将其中一些文件捐赠给了 BSD，同时保留了一些作为专有信息。发布了 BSD 4.4-Lite，包含了除专有文件之外的所有内容。由于缺少这些文件，BSD 4.4-Lite 成为了已知唯一一个无法使用甚至无法编译交付的正式操作系统发布版本。每个人都清楚这一点，但仍然购买了它——这是现代供应商可能希望复制的史无前例的壮举。

随后的更新，BSD 4.4-Lite2，是 OpenBSD 的祖父，也是今天使用的所有其他 BSD 代码的祖先，包括 FreeBSD、NetBSD 和 Mac OS X。

## OpenBSD 的诞生

Theo de Raadt 曾是 NetBSD 的开发者。在与其他 NetBSD 团队成员就如何管理项目进行了许多激烈、广泛且持续时间长的分歧之后，他独立出去并创立了 OpenBSD 项目，吸引了志同道合的开发者。OpenBSD 团队迅速确立了一个以安全为重点的身份，现在它是最知名的 BSD 后裔之一。

OpenBSD 团队的开发者将几个现在被视为理所当然的想法引入了开源操作系统世界，例如对 CVS 仓库和提交日志的公共只读访问。他们还创建了几个成为许多操作系统行业标准的软件，例如`sudo`和无处不在的 OpenSSH。

现在，许多主要公司依赖 OpenBSD 作为一个可靠、安全的操作系统，对安全性、正确性、可用性和自由有着狂热的关注。OpenBSD 可以在许多不同类型的硬件上运行，包括标准的 32 位和 64 位“Intel PC”（i386 和 amd64）、苹果的 PowerPC Macintosh（macppc）、Sparc（sparc 和 sparc64），以及像夏普 Zaurus PDA、Lemote Yeeloong 和古老的 VAX 这样的罕见平台。OpenBSD 几乎将所有精力都投入到安全特性、安全调试和代码正确性上，并在过程中证明，正确的代码具有更低的故障率，因此安全性更高。OpenBSD 力求成为终极的安全操作系统。

OpenBSD 团队不断改进操作系统。只有当新功能满足团队对代码和文档的标准时，才会添加新功能。即使在新软件功能尚未完善之前就添加了，也预期它将拥有完整的文档和正确的代码。

## OpenBSD 社区

OpenBSD 不仅仅是一系列比特的集合。它是一个由用户、开发者和贡献者组成的社区，拥有一个唯一的中央“独裁者”——或者说，协调者。对于不知道期待什么的任何人来说，这个社区可能会有些令人震惊。

如何让分布在世界各地的个人创建、维护和发展一个操作系统，更不用说建立一个社区？几乎所有讨论都通过电子邮件和在线聊天进行。这个过程比面对面交谈要慢，但这是让不同时区的大量人群以合理方式沟通的唯一经济有效的方式。电子邮件和聊天还提供了讨论的书面记录。如果你想参与 OpenBSD 的开发，你必须习惯使用电子邮件。（虽然有一些针对 OpenBSD 的专用网络论坛，但它们位于主要社区之外。）

OpenBSD 社区分为四个层级：用户、贡献者、提交者和协调者。

### OpenBSD 用户

许多开源操作系统投入大量精力来扩大用户基础、传播福音，并将新人们引入 Unix 阵营。OpenBSD 却不是这样。

大多数开源 Unix-like 操作系统团体都做了很多 Unix 的推广工作。然而，OpenBSD 却不是这样。

其他操作系统的周边社区积极鼓励新用户，并努力让新手感到受欢迎。OpenBSD 却特意不这么做。

OpenBSD 社区并不试图成为最受欢迎的操作系统——只是想做到最好。开发者们非常清楚他们的目标市场：他们自己。如果你能使用他们的工作，那很好。如果不能，请离开，直到你能。

OpenBSD 社区通常期望新来者是高级计算机用户。成员们编写了大量的 OpenBSD 文档，并期望新来者愿意阅读它们。他们不感兴趣于宠溺新的 Unix 用户，如果被追问，他们可能会直言不讳地表达这一点。他们不会手把手地教你。他们不会开发新功能来取悦用户。OpenBSD 的存在是为了满足开发者的需求，虽然其他人也欢迎加入，但乘客的需求不会引导项目。

### OpenBSD 贡献者

贡献者是那些具备向操作系统添加功能、解决问题、编写文档或准确报告问题所需技能的 OpenBSD 用户。问题范围从文档中的印刷错误到系统崩溃。几乎任何人都可以成为贡献者。事实上，社区甚至接受了我的问题报告，并在数小时内解决了这些问题。

每一个 OpenBSD 功能都存在，因为某个贡献者花费了时间为其编写代码。提交了仔细、正确的修复或提供了有用的问题报告的贡献者，在 OpenBSD 社区中受到欢迎。如果一个贡献者提交了足够多且质量足够的修复，他可能会被提供提交者的角色。

### OpenBSD 提交者

提交者有权访问 OpenBSD 的主要源代码仓库。他们可以做出他们认为对他们的 OpenBSD 项目必要的任何更改，但要对彼此和项目负责人负责。大多数提交者都是熟练的程序员，他们在自己的时间里从事 OpenBSD 的工作。

虽然成为提交者看起来很风光，但这个角色承担着很多责任。如果一个提交者破坏了操作系统或改变了某些内容，以至于与 OpenBSD 的驱动“愿景”相冲突，他必须修复它。提交者试图避免破坏事物，并在将其集成到 OpenBSD 的主要源代码集合之前，经常在网站和邮件列表上提供他们的工作，以便有兴趣的人预览、测试和双重检查他们的工作。

许多提交者在 OpenBSD 内部有非常具体的协调角色。例如，许多硬件架构都有一个负责人来处理影响该硬件的问题，编译器有一个维护者，等等。这些提交者在社区中赢得了这种信任地位。

### OpenBSD 协调员

Theo de Raadt 在 1995 年创立了 OpenBSD，并且至今仍在协调该项目。他是关于系统应该如何工作、系统应包含什么以及谁可以直接访问仓库的最终决定者。他解决所有贡献者和提交者无法自行解决的争议。Theo 会采取必要的行动，以确保 OpenBSD 项目顺利运行。如果 Theo 发生任何意外，项目确实有计划替换他。

以中央仁慈的独裁者为中心构建 OpenBSD 组织，避免了其他大型开源项目所面临的许多管理问题。

如果你决定在 OpenBSD 上工作，你必须接受 Theo 的决定为最终决定。一个不接受项目领导者的贡献者不会在社区中长期停留。Theo 可能有一根大棒，但作为公认的项目负责人，他不需要像你想象的那样经常使用它。

## OpenBSD 的优势

什么让 OpenBSD 成为 OpenBSD？在如此多的 Unix-like 操作系统存在的情况下，为什么还要费心去开发另一个？是什么让这个操作系统值得一台电脑，更不用说值得保护你公司的资产了？

### 可移植性

OpenBSD 设计用于在广泛的流行处理器和硬件平台上运行，包括与 Intel 兼容的（32 位和 64 位）、Alpha、Macintosh（PowerPC 和 Intel 系统）以及几乎来自 Sun 的任何东西。它可以在 Sharp Zaurus 这样的小型设备上运行，也可以在庞大的惠普 HP 9000 系统上运行，某些 Silicon Graphics 工作站，以及其他引起开发者注意的任何设备。OpenBSD 团队希望支持尽可能多的有趣的硬件架构，只要他们有硬件和技能来维护，因此会定期添加更多，而且你遇到的大多数计算机都有可能运行 OpenBSD。

话虽如此，当一个硬件平台变得过于神秘时，OpenBSD 就会停止支持它。一些 MIPS 系统、68K Macintosh 硬件和 Amiga 系统就是运行较旧版本的 OpenBSD 但不受新版本支持的系统的例子。

### 力量

作为一种传统，OpenBSD 可以在几十年前就已经过时的硬件上运行，因为当 OpenBSD 开始时，这些硬件正处于流行使用中，开发者们尽可能地保持兼容性和性能。这包括 VAX 和 Alpha 这样的平台，它们在 1980 年代和 1990 年代被认为是强大的。虽然在一个双核 64 位系统上运行 OpenBSD 的人可能不会注意到 OpenBSD 中增加处理网络数据包所需 CPU 时间量的编程更改，但在 VAX 系统上运行 OpenBSD 的人会很快注意到同样的变化。

当然，一些影响性能的更改是无法避免的。例如，系统必须在不久的将来支持 IPv6，我怀疑几十年前的硬件将难以跟上。OpenBSD 无法倒退时钟，但它将为你的应用程序留下每一丝可能的计算能力。毕竟，这才是最重要的——人们使用应用程序，而不是操作系统。这种对性能的关注意味着，即使是在 1GB 硬盘和 486 CPU 上运行的 OpenBSD 系统，仍然可以支持真实的应用程序，如 DNS 或 Web 服务器。

### 文档

许多自由软件项目在发布代码时就会感到满意。有些人认为，他们在程序中包含一个帮助功能，通过输入一些命令行标志即可使用，就已经做得很好了。其他人则做得更疯狂，提供语法错误且技术模糊的手册页。

OpenBSD 社区期望文档既完整又准确。系统和服务库调用的手册页非常详尽，即使与其他 BSD 相比也是如此，并包括关于使用和安全性的讨论。

文档错误被视为严重的错误，并且与其他任何严重错误一样被严厉处理。这听起来可能有些极端，但在其内部审计中，OpenBSD 团队发现了许多程序员按照手册页中推荐的方式使用库接口，但手册页中的错误使得使用变得危险或不安全。文档很重要。

### 免费

在原始 BSD 许可的精神下，OpenBSD 对任何人、任何目的都是免费的。你可以使用你喜欢的任何工具，在任何计算机上使用它。

今天的大多数免费软件都是根据要求软件分发商将任何更改返回给项目所有者的条款进行许可的，但 OpenBSD 甚至没有这样的要求。你可以在你的专有系统中使用 OpenBSD，将这个系统运送到世界上任何地方，而不必向开发者支付一分钱。

OpenBSD 可能是最自由的免费操作系统。像其他所有免费的类 Unix 操作系统一样，从 BSD 继承的源代码最初包含了许多在条件许可下分发的程序。有些是非商业用途免费的。有些是在你更改代码后更改名称时免费的。其他的有各种晦涩的许可条款，例如为第三方提供针对诉讼的赔偿。这些程序要么已经重新许可（在原始作者的许可下），要么被移除并用免费替代品替换。

在编程社区中，人们已经给“自由”这个词赋予了多种不同的含义。有些人认为，如果你可以下载并使用它，软件就是自由的。有些人认为，只有当最终用户获得源代码时，软件才是自由的。OpenBSD 对自由的理解是，其代码可以被任何人用于任何目的。

考虑这一点：在 OpenBSD 邮件列表上关于许可条款的讨论中，^([2]) Theo de Raadt 说：

> 我们知道免费许可证应该说什么。
> 
> 它应该这样说
> 
> +   版权 foo
> +   
> +   我放弃我的权利并允许其他人：
> +   
>     +   分发
>     +   
>     +   销售
>     +   
>     +   给予
>     +   
>     +   修改
>     +   
>     +   使用
>     +   
> +   我保留作为作者/所有者被知晓的权利
> +   
> 当它说其他事情时，问这个问题：
> 
> +   - 这是否是 100%保证的垃圾内容，永远无法影响任何人？
> +   
> +   - 它是否在放弃更多权利（作者权利）？
> +   
> 如果不是，那么它必须是在给予某人更多权利，或者换句话说——从某人那里剥夺更多权利！
> 
> 那么，它比我们规定的自由度要低！

OpenBSD 团队努力确保它支持的每一行代码都以这种方式获得许可。

### 注意

源代码树确实包含在不同许可下的代码，例如 GNU C 编译器`gcc`、binutils 等。没有它们，OpenBSD 仍然可以运行得很好——但你不能没有它们来编译 OpenBSD。

这很简单。OpenBSD 是一份礼物。你可以自由地使用它或不使用它。就像任何礼物一样，你可以随意对待它。但你不能随意打扰开发者要求特性或支持。

### 正确性

每个熟练的程序员都知道，编写正确的程序更可靠、可预测和更安全。然而，许多自由软件生产者如果他们的代码能编译并且看起来似乎可以工作就感到满意，而且相当多的商业软件公司不给他们程序员足够的时间来正确编写代码。

OpenBSD 开发者努力确保解决方案的正确实现。他们把编写可靠和安全的程序作为一项严格的规定，遵循当前最佳编程实践。将代码暴露在“奇怪”的环境，如古老的 VAX 上，也是这项纪律的一部分；OpenBSD 开发者坚持认为，一些细微的 bug（以及一些不那么细微的 bug）只有在 OpenBSD 较不主流的架构上进行测试时才能被精确定位。修复这些 bug 当然会惠及所有用户。

OpenBSD 的实现遵循 UNIX 标准，如可移植操作系统接口（POSIX）和美国国家标准协会（ANSI），但它们对第三方创建的这些标准的扩展不太关心。例如，许多 Linux 扩展在 OpenBSD 中并不存在。当这些扩展被添加到标准中时，OpenBSD 团队才会添加它们。

OpenBSD 代码经过大量艰苦的工作反复审计以确保正确性。任何试图引入错误代码的人都会被拒绝——通常礼貌地，并且经常伴随着建设性的批评，但无论如何都会被拒绝。这让我们想到了 OpenBSD 最著名的声望。

### 安全

OpenBSD 努力成为世界上最安全的操作系统。虽然它今天可以合理地提出这样的主张，但要保持这一地位需要持续的努力。入侵者不断尝试新的方法来渗透计算机，这意味着今天的特性可能成为明天的安全问题。当 OpenBSD 开发者了解到新的编程错误类别和安全漏洞时，他们会扫描整个源代码树以查找这类问题，并在任何人甚至不知道这些问题*可能*如何被利用之前进行修复。

此外，OpenBSD 充分利用硬件提供的任何安全特性。例如，AMD 的 64 位与 Intel 兼容的 CPU 可以将内存页面标记为可执行或可写，但不能同时两者都是。（Intel 后来也复制了这一特性。）这减轻了许多缓冲区溢出攻击，但操作系统必须使用这一功能。OpenBSD 在 2003 年支持了这一特性，当时硬件刚刚发布。实际上，OpenBSD 通常支持平台上提供的所有硬件安全特性。

计算机历史表明，不能期望用户修补或维护自己的系统。系统必须能够抵御现有和未来的攻击。OpenBSD 的目标是消除尚未存在的问题。

## OpenBSD 与您的安全

即使 OpenBSD 被紧密地保护，入侵者仍然可以突破 OpenBSD 系统。这似乎有些矛盾，但事实上，这意味着运行计算机的人没有理解计算机安全。

OpenBSD 拥有许多集成的安全特性，但您不能假设这些特性可以保护系统上运行的所有内容。这根本不可能。没有任何操作系统可以防御操作员的错误。操作系统可以在一定程度上保护自己免受软件问题的侵害，但最终，安全责任在于管理员。

考虑一个运行在 OpenBSD 上的网络服务器——即使是 OpenBSD 集成的 Apache 服务器。OpenBSD 为网络服务器提供了一个稳定、可靠的平台，并在系统管理员分配的限制内提供所需的服务。如果系统管理员正确配置了网络服务器，网络服务器的故障不会危害操作系统。如果系统管理员将网络服务器配置为以无限权限运行，网络服务器可以对底层系统造成几乎无限制的损害。

或者考虑一个不那么极端的情况。网络服务器可能配置正确，但假设您安装了不安全的论坛软件。入侵者可以入侵论坛并编辑其数据——也许会抓取论坛软件用于访问本地数据库的用户名和密码。如果该账户信息与系统级别的用户名和密码匹配，入侵者可能能够利用它们来访问系统。或者他可能可以使用该用户名和密码获得数据库的管理员级别访问权限并渗透其他应用程序。如果那些应用程序具有提升的权限怎么办？

只有系统管理员进行谨慎、一致和深思熟虑的工作，才能防止入侵。在这本书的整个过程中，我们将讨论您在安装和运行软件时应采取的一些基本安全预防措施。我们还将讨论 OpenBSD 提供的先进安全特性，以保护自身。

## OpenBSD 的用途

OpenBSD 在您的计算策略中处于什么位置？这最终取决于您的策略和需求。OpenBSD 可以在您需要稳定、可靠和安全的系统的地方使用。我建议将 OpenBSD 用于以下三个不同的角色：桌面、服务器或网络管理。

### 桌面

如果您需要一个功能强大的桌面系统，并且希望拥有从完整的 Unix-like 工作站期望的所有功能，OpenBSD 将非常适合。图形界面、办公套件、网络浏览器和其他桌面软件都可在 ports 集合中找到，OpenBSD 还支持各种开发工具、应用程序环境、网络服务器和其他程序员和网页开发者需要的功能。如果您是网络管理员，您会发现 OpenBSD 支持数据包嗅探器、流量分析器和其他您所依赖的程序。

### 服务器

如果你正在提供网页服务、处理电子邮件、提供轻量级目录访问协议（LDAP）或数据库服务，或向客户提供任何其他类型的网络服务，OpenBSD 可以帮助你。它是一个便宜且可靠的平台。一旦设置好，它就会正常工作。当然，它也是安全的，这在互联网上是不容忽视的。

### 网络管理

OpenBSD 是一个出色的防火墙、网桥或流量整形器。你可以用它来支持入侵检测软件、Web 代理和流量监控器。集成的包过滤防火墙和相关软件提供了最先进的网络连接管理和控制，并在流量到达你的服务器之前过滤掉许多危险类型的流量。而且它的负载均衡功能具有竞争力，与许多成本高出数千美元的商业产品相比。

## 关于本书

本书是为那些想要将 OpenBSD 添加到其技能库中的经验丰富的 Unix 用户或系统管理员所写。我假设你熟悉基本命令，例如 `tail(1)`、`chmod(1)`、`ping(8)` 等，并且你知道为什么这个列表中的每个命令在名称后面都有一个括号中的数字。我们将讨论许多你可能已经熟悉的程序，但在 OpenBSD 中可能会有所不同。

为了获得最大效益，你应该在专用机器上安装 OpenBSD。OpenBSD 可以与其他操作系统共存或在虚拟机上运行，但如果你打算在生产环境中使用 OpenBSD，你应该单独运行它。

许多人认为 OpenBSD 不是最容易使用的类 Unix 操作系统，也不是最容易使用的 BSD 版本，甚至不是最容易使用的开源 BSD。OpenBSD 没有方便的向导引导你通过配置过程的每个阶段，尽管它确实有一些基于菜单的前端。然而，一旦你熟悉了系统的工作方式，这些向导只会碍事。

要真正理解 OpenBSD，你必须愿意学习、实验，并花时间积累理解。这些知识中的大部分可以直接应用于其他版本的 BSD、其他类 Unix 操作系统，甚至完全不同的操作系统，如微软的 Windows。

## 内容概述

虽然本书旨在从头到尾阅读，但这里简要描述了每一章的内容，以防你想要随意跳读。

+   ****第一章****. 讨论了安装在系统中的 OpenBSD 文档以及网络上的文档。在安装 OpenBSD 之前，你需要了解你将要做什么。

+   ****第二章****. 讨论了在标准 amd64（也称为 64 位 Intel 兼容）系统上的安装。在安装 OpenBSD 之前做出一些决定将确保你以后不需要重新安装。

+   ****第三章****. 带您通过真实 OpenBSD 安装的每个步骤。OpenBSD 安装程序假设您对计算机硬件和 OpenBSD 有一定的了解，您可能还没有掌握。本指南将引导您通过难点。

+   ****第四章****. 讨论在安装 OpenBSD 后应采取的基本步骤，以确保系统安全、稳定且可用。

+   ****第五章****. 涵盖系统启动。不同的情况需要不同的启动方法，我们将涵盖所有这些方法。我们还将讨论 OpenBSD 如何启动其组件软件。

+   ****第六章****. 讨论如何添加、删除和限制 OpenBSD 用户账户。

+   ****第七章****. 讨论控制用户权限和权限。OpenBSD 包括诸如类和限制等强大的工具，以及权限管理工具`sudo(8)`。

+   ****第八章****. 涵盖使用标准 OpenBSD 文件系统的磁盘管理。

+   ****第九章****. 涵盖高级文件系统主题，如网络文件系统（NFS）、处理磁盘镜像、软件 RAID 和加密磁盘。

+   ****第十章****. 讨论如何使用文件标志、securelevels、OpenBSD 安全公告和一些基本的加密工具来维护安全性。

+   ****第十一章****. 回顾 TCP/IP 版本 4 和 6 的基本知识，并介绍 OpenBSD 的一些用于检查和解决网络问题的工具。

+   ****第十二章****. 带您配置 OpenBSD 的网络堆栈，用于以太网、 trunk 和虚拟局域网（VLAN）。

+   ****第十三章****. 介绍 OpenBSD 的附加软件工具。您将学习如何安装预编译的软件，编译自己的软件，以及验证和删除软件。

+   ****第十四章****. 描述*/etc*目录中每个主要文件，这些文件在其他地方没有涵盖，并讨论您可能希望如何使用这些文件。

+   ****第十五章****. 讨论 OpenBSD 维护自己的各种方式，以及您如何使这些过程适应您的环境和工作流程。

+   ****第十六章****. 讨论与 OpenBSD 集成的软件配置。您将了解系统日志器和日志文件管理、DHCP 服务器、Web 服务器等。

+   ****第十七章****. 讨论了作为桌面操作系统对 OpenBSD 有用的软件，例如窗口管理器`cwm(1)`和 Xenocara。本章还包括了使使用桌面 OpenBSD 更容易的重要软件，例如 SSH 密钥和`tmux`。

+   ****第十八章****. 讨论了配置标准内核可用的各种工具。与许多其他免费类 Unix 操作系统不同，OpenBSD 不期望或要求系统管理员编译内核。您可以在不重新编译的情况下调整标准内核。

+   ****第十九章****. 讨论了在必须的情况下如何重新编译内核。

+   ****第二十章****. 介绍了如何从快照或源代码升级 OpenBSD。

+   ****第二十一章****. 记录了 OpenBSD 的集成数据包过滤引擎 PF。它包括对现实世界情况的讨论以及如何处理它们。

+   ****第二十二章****. 介绍了包过滤器除了过滤数据包之外还能做什么。

+   ****第二十三章****. 包含了一些不适合其他地方但又不值得单独成章的小知识。这包括无盘 OpenBSD、构建可启动的 USB 安装介质以及制作自定义 OpenBSD 安装套件。

本书不会涵盖 OpenBSD 能做的所有事情，但它会为您打下坚实的基础。要学习其余内容，您需要访问 OpenBSD 的信息资源，这是第一章的主题。

* * *

^([1]) 请注意，由于人的原因，我仍然有不好的日子，但我主要通过其他方式来解决它们。不要问我后院里堆成小山的泥土。

^([2]) 这是从 2002 年 10 月 24 日 openbsd-misc 邮件列表上的内容。它已经超过十年了，但仍然说得很多。
