# 附录 A. SVG 入门

本附录对 SVG 及其在 Inkscape 中的实现提供了一个非常高级的概述。其中一些内容已在其他章节中提及。然而，本书并不打算取代官方的 SVG 规范。如果您需要一个关于 SVG 的绝对最终、完整和权威的参考，您需要 W3C 生产的 SVG 规范。该规范的可用版本可以在*[`w3.org/Graphics/SVG`](http://w3.org/Graphics/SVG)*找到；Inkscape 目前支持的版本 1.1 可以在*[`w3.org/TR/SVG11`](http://w3.org/TR/SVG11)*找到。

对 SVG 的了解，以及更广泛的 XML（SVG 只是 XML 的一个特殊种类）的知识，对于掌握 Inkscape 并不是*严格必要*的——但它确实很有帮助。它将允许你窥视 Inkscape 绘图的内部，并且它通常会揭示 Inkscape 的一些功能（或缺乏功能）背后的真正原因。由于 XML 现在被广泛使用，本附录的材料也可能在许多不涉及 Inkscape 和 SVG 的其他情况下对你有用。

# A.1 XML 快速入门

现在，几乎每个人都至少听说过 XML，当然每个人都使用过它，尽管通常是无意中。如果你看过网页的源代码，你已经知道 XML 的样子，因为今天在网络上使用的标记语言 XHTML 是 XML 的一个亚种（更准确地说，是一个*XML 词汇*）。SVG 是另一个这样的词汇。

XML 是一种在纯文本中记录结构化信息的标准方式。它的最大优点是它对计算机来说易于解析，同时对人来说又相当容易理解。与大多数其他通常像你想的那么复杂（或者更复杂）的计算机相关概念不同，XML 是一个不可思议的简单事物。事实上，简单到我现在可以用几个简短的段落来解释它。

XML 文档的基本构建块被称为*元素*。以下是一个包含一些文本的元素的示例：

```
<example>Here goes some text.</example>
```

元素内的文本称为其*内容*，该内容由*标签*界定。在小于号（`<`）和大于号（`>`）之间的所有内容都是一个标签。在这里，开始标签和结束标签几乎完全相同，除了结束标签在元素名称之前有一个正斜杠（`/`），在这个例子中是`example`。

一个元素可能完全没有内容：

```
<example></example>
```

或者

```
<example/>
```

这两个*空元素*完全等价；第二个，由一个标签组成，只是第一个的拼写变体。注意单标签空元素中正斜杠（`/`）的不同位置。

除了文本之外，元素还可以包含其他元素，但这些元素必须完全位于包含元素内。例如，这是错误的：

```
<a><b></a></b>
```

因为元素`b`在`a`内部开始，但在外部结束。如果一个元素在某个其他元素内部开始，它也必须在那个元素内部结束。以下是一个正确的 XML 示例：

```
<a><b/><c/><d><e/></d></a>
```

可以说，`a` 是 `b`、`c` 和 `d` 的父元素，而 `d` 是 `e` 的父元素。一个元素可以有多个子元素，但它只有一个父元素（除了文档的根元素，它根本没有任何父元素）。图 A-1 是这个 XML 片段的图形表示。

![表示 XML 代码的树](img/httpatomoreillycomsourcenostarchimages1736528.png.jpg)

图 A-1. 表示 XML 代码的树

### 注意

*这解释了为什么 Inkscape 中的对象组不能包含来自不同层的对象（**4.5 组**）。组是其子元素的父元素，但层也是。组可以包含在单个层中，但你不能将其分散在几个层中，因为这会导致该组有多个父元素。*

除了子元素之外，XML 元素还可以有一些属性。每个 *属性* 都是一个带有一些相关值的名称。属性在元素的打开标签中指定，例如：

```
<text type="important" font-size="10">Here is some text.</text>
```

注意等号 (`=`) 和属性值周围的引号的使用。两者都是强制性的。

### 注意

*一个元素不能有两个同名属性。请注意，在开标签中属性的顺序永远不会影响任何事情；XML 中的属性是无序的*。

最后，整个 XML 文档只是一个包含一些文本内容和子元素的单一元素（称为 *根*），这些子元素又可以有更多内容和更多子元素，依此类推。因此，可以将 XML 文档视为从单一根生长的树。例如，这里是一个完整的 SVG 文档，其根元素 `svg` 包含两个元素，分别代表一个矩形和一段文本字符串：

```
<svg>
  <rect x="100" y="100" width="300" height="50" fill="blue"/>
  <text x="100" y="150">This is a text string.</text>
</svg>
```

# A.2 词汇表和命名空间

如果这就是 XML 的全部，是什么让它如此强大并且如此广泛使用？

XML 本身只是一个基础，在这个基础上已经、正在以及无疑将会建造起许多建筑。你不会相信在 XML 出现之前，为了每个应用程序发明新的数据格式、制定规则、编写和测试支持这些格式的软件、以及处理不可避免的错误、异常和版本不兼容性，浪费了多少宝贵的程序员资源。

所有这些痛苦现在都已过去。现在，如果你需要记录一些数据，你不需要深入了解哪些字符有特殊含义以及各种字段的尺寸。通过选择 XML（你会有充分的理由不选择它），你可以专注于真正重要的事情：你数据的结构以及如何命名元素和属性，以便最好地表达这种结构。

此外，如今你甚至可能根本不需要这样做，因为你的数据可能已经存在一个众所周知的标准化 XML *词汇表*，你可以直接使用它。每个词汇表定义了一组元素和属性，详细说明了它们的含义，它们可能或可能不在什么上下文中使用，哪些是必需的，哪些是可选的，等等。SVG 就是这样一种词汇表；XHTML 是另一种。存在许多标准化的 XML 词汇表，用于各种奇特的事物，从狗的系谱到星历表。其中许多词汇表都重复使用了其他词汇表的部分。

为了能够不混淆地混合不同词汇表的部分，XML 使用 *命名空间*。命名空间只是用来指示特定元素或属性来源的一种方式。例如，这里有一个来自 SVG 词汇表的 `image` 元素，表示 SVG 文档内部的链接位图图像：

```
<svg:image xlink:href="/dir/file.png" width="200" height="100"/>
```

你可以看到元素名称和一个属性使用了冒号（`:`）。冒号之前的名字部分被称为 *命名空间前缀*。为了找出哪个命名空间对应哪个前缀，我们必须查找特殊 `xmlns` 前缀属性（简称 *XML NameSpace*）的命名空间声明，它可能位于同一元素上，或者在其树状结构中的任何祖先元素上。通常，所有命名空间声明属性都会放在根元素上。在这种情况下，你可能会在根 `svg` 元素中找到 `svg` 和 `xlink` 前缀的声明：

```
<svg:svg ...

         ... >
```

这意味着 `svg` 前缀绑定到 `http://www.w3.org/2000/svg` 的命名空间，而 `xlink` 前缀对应于 `http://www.w3.org/1999/xlink`。在这里，命名空间是 URL，但它们不必是；唯一的要求是它们必须是全局唯一的（而 URL 只是确保这种唯一性的最简单方式）。

SVG 的命名空间 URL `http://www.w3.org/2000/svg` 必须与显示的完全一致。如果你的 SVG 文档中元素的命名空间前缀没有解析到 `http://www.w3.org/2000/svg`，那么 Inkscape 或其他任何软件都不会将文档识别为 SVG。然而，命名空间前缀可以是任意的，只要它与正确的命名空间绑定。如果这样声明，前缀甚至可以是空的：

```
<svg ...

     ... >
```

在具有该声明的元素内部，任何没有前缀的元素名称将被假定为 SVG 命名空间中的元素。例如，以下内容将被识别为有效的 SVG `image` 元素，它链接了一个 PNG 格式的外部图像文件：

```
<image xlink:href="/dir/portrait.png" width="200" height="100"/>
```

命名空间错误，例如未为前缀声明命名空间或命名空间 URL 错误，当你手动编辑 SVG 文件然后尝试将其加载到 Inkscape 中时最为常见。请注意这些错误！

# A.3 根

下面是一个典型的 Inkscape SVG 文档的根 `svg` 元素示例，其中包含多个命名空间声明和其他属性：

```
<svg 

     sodipodi:docname="file.svg"
     width="1052.3622"
     height="744.09448"
     id="svg2"
     sodipodi:version="0.32"
     inkscape:version="0.46"
     version="1.0">
```

SVG 使用 SVG 命名空间（`http://www.w3.org/2000/svg`）来定义其自身元素，以及 XLink 命名空间（`http://www.w3.org/1999/xlink`）来定义链接属性（**A.9 Linking**）。在此基础上，Inkscape 还在其所属的 Inkscape 命名空间（`http://www.inkscape.org/namespaces/inkscape`）和其前身 Sodipodi 的命名空间（`http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd`）中添加了元素和属性；参见 **1.6 The Life of an Open Source Application** 了解 Inkscape 的简要历史。此处声明的其他命名空间用于元数据元素（关于文档的一般信息）和许可标识符（**A.4 Defs, View, and Metadata**）。

SVG 标准中定义在根元素上的属性只有 `width` 和 `height`（定义画布的大小），`id` 和 `version`。其余的都是命名空间声明或在自定义的 Inkscape/Sodipodi 命名空间中的属性。

此根标签指定了创建此文档的 Inkscape 版本：`inkscape:version="0.46"`。它还声称此文档将与之兼容的 Sodipodi 版本是 0.32（`sodipodi:version="0.32"`），因为在此版本之后 Inkscape 分叉了 Sodipodi。未命名空间的 `version` 属性指的是此文档实现的 SVG 规范版本，1.0。

Inkscape SVG 格式与 Inkscape 提供的普通 SVG 格式之间的唯一区别在于，普通 SVG 会移除 Inkscape 和 Sodipodi 命名空间中的所有元素和属性，仅保留“行业标准”的命名空间。请注意，不允许任何 Inkscape 特定的元素或属性改变文档的 *外观*；它们只能影响在 Inkscape 中编辑时的 *行为*（例如，`g` 元素上的属性可能告诉 Inkscape 将该元素作为一个 3D 箱子而不是一个简单的组来编辑，参见 **11.3 3D Boxes**）。因此，以普通 SVG 格式保存只是以牺牲一些 Inkscape 可编辑性为代价来使文件稍微小一点。如果你发现保存为普通 SVG 格式后渲染不同的文件，那么你发现了一个错误：请向开发者报告！

# A.4 Defs, View, and Metadata

现在，让我们从典型的 Inkscape SVG 文档的根元素开始向下查看其中还包含什么。

首先是 `defs` 元素。作为 SVG 标准的一部分，它是一个存储库，用于存放那些本身不显示在画布上，但可能被其他显示元素使用的项目。这包括渐变、图案、标记（箭头，**9.5 标记**）、裁剪路径、蒙版、滤镜等等。它们都存储为 `defs` 元素的子元素。SVG 规范允许在文档的几乎任何位置放置任意数量的 `defs` 元素，但 Inkscape 总是在根 `svg` 下使用一个 `defs`。以下是一个包含渐变的 `defs` 元素示例：

```
<defs id="defs4">
  <linearGradient inkscape:collect="always" id="linearGradient2798">
     <stop style="stop-color:#000000;stop-opacity:1;" offset="0" id="stop2800" />
     <stop style="stop-color:#000000;stop-opacity:0;" offset="1" id="stop2802" />
  </linearGradient>
</defs>
```

将 `linearGradient` 元素添加到 `defs` 中，本身并不会在画布上产生任何变化。现在，然而，任何对象都可以引用（**10.2.1 分享渐变定义**）这个渐变来绘制其填充或描边。

`defs` 中的大多数内容即使没有可见元素使用也会保留。（唯一的例外是具有 `inkscape:collect` 属性且值为 `always` 的元素；这些元素在不再使用时将自动删除。Inkscape 经常使用此标志来标记它自己创建的各种辅助元素，并且可以安全地丢弃；它永远不会删除您未授权创建的任何内容。）

这允许您重用之前定义但后来放弃的项目，但也可能导致 `defs` 随着您在文档上工作并尝试各种技术而越来越大。要从 `defs` 中删除未使用的定义，请使用 **文件** ▸ **清除 Defs** 命令。不幸的是，即使这个命令也可能无法在第一次尝试中完全删除 `defs` 中的所有未使用内容；您可能需要退出、重新加载文档，并再次清除 `defs` 才能完全生效。

在 Inkscape SVG 文档内部，您将看到的下一个元素是 `sodipodi:namedview`。这个 Inkscape 特定的元素在其属性中包含了所有特定于该文档的选项：Inkscape 加载文档时将使用的缩放级别和滚动位置，网格的颜色和间距，各种吸附模式，当前图层，文档单位等等。在 Inkscape 中，大多数这些选项都可以通过 **文件** ▸ **文档属性** 命令（**3.1.2 文档属性**）进行设置。

```
<sodipodi:namedview inkscape:window-height="950"
                    inkscape:window-width="1280"
                    inkscape:window-x="0"
                    inkscape:window-y="24"
                    inkscape:pageshadow="2"
                    inkscape:pageopacity="0.0"
                    bordercolor="#666666"
                    pagecolor="#ffffff"
                    inkscape:zoom="0.64306408"
                    inkscape:cx="836.6226"
                    inkscape:cy="619.40089"
                    inkscape:current-layer="layer2"
                    showguides="true" />
```

最后，在文档的实际内容开始之前，是 `metadata` 元素。它存储有关文档作者、目的、日期、许可等信息。它对应于 Inkscape 中的 **文件** ▸ **文档元数据** 对话框。`metadata` 内部的元素通常将信息表示为 RDF（见 *[`w3.org/RDF`](http://w3.org/RDF)*）。RDF 可能会使用许多额外的 XML 命名空间来描述不同类型的信息。

# A.5 图层和组

在`metadata`元素之后，SVG 文档的实际可见内容开始。正如你可能猜到的，每个文档对象对应一个 SVG 元素。此外，文件中元素的顺序对应于对象在画布上视觉堆叠的顺序（**4.3 Z-Order**）：文件末尾靠近的元素位于靠近开头的元素之上。

当你将几个元素组合在一起（**4.5 组**）时，它们被放置在一个`g`元素内部。例如，这里有一个包含矩形和文本对象的组：

```
<g id="g2893">
  <rect id="rect2310"
        y="350"
        x="100"
        width="300"
        height="150"
        style="opacity:1;fill:#ff0000;stroke:#000000;stroke-width:1px;" />
  <text id="text2889"
        y="400"
        x="200"
        style="font-size:40px;font-style:normal;font-weight:normal;fill:#000000;
               stroke:none;font-family:Bitstream Vera Sans"
        xml:space="preserve">Text in rectangle</text>
</g>
```

除了组之外，另一种组织你的对象的方法是使用图层（**4.6 图层**）。SVG 没有专门用于图层的元素类型；相反，Inkscape 只是使用一个 SVG `g`元素，并添加一个特殊属性，以便在编辑文件时将其作为图层处理。

```
<g inkscape:groupmode="layer"
   inkscape:label="Layer 1"
   id="layer1">
  ...contents of the layer...
</g>
```

由于图层是组的特殊情况，因此很容易理解 Inkscape 如何“进入一个组”，将其临时作为图层处理（**4.6.1 图层层次**）。这也解释了为什么在将 Inkscape 的 SVG 文件导入到另一个矢量编辑器（如 Adobe Illustrator）时，你通常会丢失图层，但对象会得到额外的分组图层：其他编辑器根本不知道 Inkscape 使用某些`g`元素作为图层的约定，并将所有图层视为常规组。

在图层和组内部，其他 SVG 元素代表你的绘图中的实际对象。参见*[`w3.org/TR/SVG11/eltindex.html`](http://w3.org/TR/SVG11/eltindex.html)*获取 SVG 1.1 中元素的完整列表，但请注意，Inkscape 尚未支持它们中的所有元素。

# A.6 坐标和单位

SVG 绘图中的距离和坐标可以用多种单位表示：厘米（cm）、毫米（mm）、英寸（in）、点（pt）以及少数其他单位。然而，有一个单位是特殊的：它是*SVG 像素*（缩写为`px`），有时称为*匿名单位*，因为它可以完全不写任何单位标识。例如，在这个`rect`元素中，`x`、`y`、`width`和`height`都是以 SVG 像素表示的：

```
<rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150" />
```

它们也可以用毫米来指定：

```
<rect id="rect2310"
      y="98.777mm"
      x="28.222mm"
      width="84.667mm"
      height="42.333mm" />
```

Inkscape 会正确理解这一点。然而，如果你更改并重新保存此 SVG 文件，Inkscape 会将所有大小转换回 SVG 像素。

尽管名为 SVG 像素，但它与*屏幕像素*并不相同。当你放大时，一个 SVG 像素的距离大于你屏幕上的一个像素；当你缩小时，它小于一个屏幕像素。然而，当你的缩放级别（显示在 Inkscape 窗口状态栏的右端，见图 2-1)为 100%时，一个 SVG 像素正好对应一个屏幕像素。这使得这个单位特别方便用于创建屏幕查看的图形。

在 Inkscape 中，90 SVG 像素等于一英寸，因此当你以 90 dpi（每英寸像素）的分辨率导出你的图形时，它将正好以 Inkscape 100%缩放时显示的样子出现。在 Inkscape UI 中，你可以指定大小或距离的大多数地方，都有一个指定单位的方法，而`px`单位（SVG 像素）是默认的（尽管你可以在**文档属性**中选择不同的默认单位）。

SVG 使用矩形笛卡尔坐标系来指定对象在画布上的位置。SVG 中的坐标原点在页面的右上角，Y 坐标向下增长。然而，在 Inkscape UI 中，原点在左下角，Y 坐标向上增长。未来的版本可能会改变这一点，最有可能的是通过使这种“坐标翻转”可选，以便于那些手动以及在 Inkscape 中编辑 SVG 的人。 

# A.7 变换

SVG 中的每个对象在画布上都有自己的自然位置。例如，对于一个矩形，这个位置由`rect`元素上的`x`和`y`属性定义：

```
<rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150" />
```

然而，SVG 最有趣的特点之一是，这个位置可以受到`transform`属性的影响。通常，这个属性包含一个`matrix(...)`内的六个数字序列：

```
<rect transform="matrix(0.96333,0.26831,-0.26831,0.96333,203.200,-160.066)"
      id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150" />
```

在这种形式下，该属性代表一个*仿射变换矩阵*。矩阵代数的完整处理超出了本书的范围，但你应该对变换被称为仿射的概念有所了解：

+   任何*移动*，也称为*平移*(图 6-1)

+   任何*缩放*，包括均匀和非均匀缩放；例如，只缩放宽度或只缩放高度(图 6-2)

+   任何围绕任何中心的*旋转*(图 6-6)

+   任何*倾斜*，有时也称为*剪切*(图 6-7)

顺便提一下，这些变换正是选择工具可以执行的那些变换(第六章). 注意，例如，透视变换不是仿射的：它们不能通过`transform`属性表达，也不能由选择工具执行。

因此，具有`transform`属性的元素意味着：“在自然位置和大小处绘制此元素，然后根据变换指定移动、缩放、旋转或倾斜它。”

此外，元素父级（例如，包含此对象的`g`元素）上的`transform`值也会影响对象。对象及其所有祖先上的所有变换都会合并。这就是为什么，例如，当你移动或缩放一个组时，组中所有对象都会以相同的量移动和缩放，尽管只有父级`g`元素的`transform`属性被修改。

在**Inkscape 首选项**对话框的**变换**选项卡（**3.1 首选项**）中，有一个**存储变换**选项，其值为**优化**和**保留**。这决定了 Inkscape 在变换对象时的策略。如果设置为**保留**，它将始终记录所有对象的全部变换为`transform`属性，同时保留所有其他属性不变。如果设置为**优化**（默认），它将尽可能地将变换记录到对象的其它属性中，而不是`transform`。例如，当你移动一个矩形时，在优化模式下，它将改变矩形的`x`和`y`属性，而不是添加或更改其`transform`。然而，并非所有类型的变换和所有类型的对象都允许这种优化，因此即使在优化模式下，`transform`属性仍然会被创建。唯一可以优化任何类型变换且始终无需`transform`属性的对象类型是`path`。

# A.8 样式

很自然地，对象的样式属性可以表示为相应元素的属性。这些属性被称为**呈现属性**。例如，这个矩形有蓝色填充和黑色 1 像素宽的描边：

```
<rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150"
      fill="blue"
      stroke="black"
      stroke-width="1pt" />
```

然而，这仅仅是记录 XML 中样式属性的一种可能方式。另一种方式是将所有属性打包到一个名为`style`的单个属性中，使用冒号（`:`）分隔每个属性中的名称和值，使用分号（`;`）分隔属性：

```
<rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150"
      style="fill:blue; stroke:black; stroke-width:1pt" />
```

Inkscape 理解这两种方法，但出于历史原因，在写入 SVG 时，仅使用第二种方法，即使用单个`style`属性。当两者都存在时，`style`属性中的属性优先于呈现属性中的相同属性。

再次强调，这个附录不会列出 SVG 使用的所有样式属性（参见*[`w3.org/TR/SVG11/propidx.html`](http://w3.org/TR/SVG11/propidx.html)*以获取完整列表），但你至少应该在看到它们时能够识别它们。

SVG 规定，大多数（但不是全部）样式属性应该由子元素从其父元素继承，前提是子元素没有为该属性指定自己的值。例如，如果一个矩形没有指定 `fill` 属性，但其父元素 `g` 有 `fill="blue"`，则矩形将被涂成蓝色。在 Inkscape 中，这种继承很少发挥作用，因为通常情况下，对象的大部分属性是否更改都设置了。然而，对于 `fill` 和 `stroke` 属性，有一种方法可以通过 UI 移除或*取消设置*这些属性，从而使得可以从父元素继承这些属性（**8.1.1 绘画**）。

# A.9 链接

通常，SVG 中的元素需要相互引用或*链接*。这在画布上的可见元素使用 `defs` 中的某些定义时最为常见。例如，如果你有一个填充线性渐变的矩形，`rect` 元素仅描述矩形本身。其渐变由文档中的另一个元素描述，称为 `linearGradient`，位于 `defs` 中，并且矩形链接到该渐变定义。

为了能够链接，一个元素必须有一个 `id` 属性，其值在此文档中是唯一的。Inkscape 自动为所有元素提供唯一的 `id`。链接到元素的 URL 简单地是其 `id` 前面加上一个井号（`#`）——例如，`#linearGradient2128`。为了从 `style` 属性中使用此 URL，你需要将其括在括号中，并以前缀字符串 `url` 开头。例如，这里有一个 `linearGradient` 元素和一个矩形，它通过其 `fill` 属性链接到它：

```
<defs>
  <linearGradient id="linearGradient2128">
    <stop id="stop2286" offset="0" style="stop-color:#0000ff;stop-opacity:0;" />
    <stop id="stop2284" offset="1" style="stop-color:#0000ff;stop-opacity:1;" />
  </linearGradient>
</defs>

...

<rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150"
      style="fill:url(#linearGradient2128)" />
```

链接并不总是通过样式属性来完成的；例如，SVG 标准规定渐变可以相互链接以共享颜色停止和其他属性。在这种情况下，使用 `xlink:href` 属性（换句话说，XLink 命名空间中的 `href` 属性）。(XLink 是另一个 W3C 标准，与 SVG 分开，并在许多 XML 词汇表中用于链接；有关规范，请参阅*[`w3.org/TR/xlink`](http://w3.org/TR/xlink)*。) `xlink:href` 属性使用不带 `url()` 包装器的纯 URL；例如，`xlink:href="#linearGradient2128"`。

SVG 允许你链接到同一文档中的其他元素，也可以链接到其他文档，无论是本地还是互联网上的，以及它们内部的元素。截至版本 0.47，Inkscape 还不支持此类跨文档链接到 SVG 文档，尽管它可以链接到用作文档中位图对象的外部位图文件。

# A.10 对象类型

Inkscape 最重要的一项功能是它能够创建各种对象类型，每个对象都记住其类型并提供针对该类型的各种控制和行为（第十一章）。其中一些对象类型直接由 SVG 支持；例如，Inkscape 的矩形由 SVG 的 `rect` 元素表示。但其他类型是 Inkscape 独有的；例如，SVG 没有专门用于螺旋线、星形或 3D 箱子的元素。Inkscape 如何使用这些对象类型同时保持与标准 SVG 的兼容性？

解决方案是 `sodipodi:type` 属性。Inkscape 将星形保存为一个通用的 `path` 元素，它可以表示任何形状，但通过添加 `sodipodi:type` 来表明它实际上是一个星形，以及一些其他存储各种星形特定参数的扩展属性。同时，`path` 的标准 `d` 属性提供了星形形状的精确表示：

```
<path sodipodi:type="star"
      style="fill:#ff0000;"
      sodipodi:sides="5"
      sodipodi:cx="342.85715"
      sodipodi:cy="703.79077"
      sodipodi:r1="105.75289"
      sodipodi:r2="40.397606"
      sodipodi:arg1="0.90027477"
      sodipodi:arg2="1.5285933"
      inkscape:flatsided="false"
      inkscape:rounded="0"
      inkscape:randomized="0"
      d="M 408.571,786.647 L 344.561,744.152 L 284.362,791.893
         L 304.997,717.884 L 240.990,675.383 L 317.754,672.139
         L 338.395,598.132 L 365.202,670.135 L 441.965,666.897
         L 381.770,714.642 L 408.571,786.647 z" />
```

当加载包含此类元素的文档时，Inkscape 识别 `sodipodi:type`，并在编辑时将对象视为星形而不是路径。然而，当任何其他 SVG 软件加载相同的文件时，它将忽略任何 Inkscape 特定的属性，并将此元素解释为一个简单的路径，尽管它*看起来*与 Inkscape 中创建的星形完全相同。换句话说，虽然只有 Inkscape 能够*编辑*星形作为星形，但使用标准 `path` 作为此对象类型的基础确保它与任何 SVG 软件保持兼容。

# A.11 Inkscape SVG 扩展

为了总结这个必要但非常肤浅的附录，让我们列出在 Inkscape SVG 文件中看到的最重要扩展元素和属性列表。其中一些已在前面的章节中讨论过；其他一些在这里需要简要说明。

有一点需要重复强调：这些额外的元素和属性并不会使 Inkscape 文档无效的 SVG。XML 中的 X 代表“可扩展”是有原因的：从 XML 一开始，自由混合不同词汇的能力就是其目标之一。在我们的例子中，这意味着任何 Inkscape SVG 文件都必须——并且确实——在所有符合 SVG 渲染器的软件中完全相同地渲染。（这里有一个不幸的例外，我们将在**15.2.2.3 SVG 兼容性**中讨论。）

+   `inkscape:collect` 属性被添加到 `defs` 中那些可以自动删除的元素中（**A.4 Defs, View, and Metadata**）。

+   `sodipodi:namedview` 元素是 Inkscape 存储每个文档首选项的地方，如**A.4 Defs, View, and Metadata**中所述。

+   `sodipodi:type` 属性是 Inkscape 使用来标记非 SVG 类型对象的（**A.10 对象类型**）。具有此属性的元素通常有一系列其他 Inkscape 特定的属性，用于存储特定于该对象类型的各种参数。

+   当你拖动一个对象的旋转中心时，`inkscape:transform-center-x` 和 `inkscape:transform-center-y` 属性会被设置在对象上（**6.4 旋转中心**）。Inkscape 会记住每个对象旋转中心改变后的位置。

+   `sodipodi:nodetypes` 属性是 Inkscape 存储你使用节点工具编辑的路径上所有节点类型的地点。将节点分类为平滑、对称和尖点（**12.5.5 节点类型**）是 Inkscape 允许你做的，但 SVG 没有提供这样的规定；因此需要扩展属性。

+   在 `g` 上的 `inkscape:groupmode` 属性是区分 Inkscape 中的组和层的关键（**A.5 层和组**）。对于层，此属性存储的值是 `layer`。

+   可以在任何元素上设置 `inkscape:label` 属性，为相应的对象提供可读性标签（使用 `id` 属性作为该目的的问题是它不能包含空格和标点符号；`inkscape:label` 没有这些限制，**4.1 对象属性**）。在此属性中，Inkscape 存储层的可读性名称。

+   `inkscape:export-filename` 属性可以设置在任何元素上，它存储了将此对象最后导出为位图的文件名（包括路径）。此值会自动放置在 **导出位图** 对话框的 **文件名** 字段中（**18.9.1 导出位图对话框**），因此即使你关闭并重新打开文件，也可以快速重复导出到相同的文件。 (这也解释了为什么 Inkscape 声称文件已更改并需要重新保存，在你从该文件导出位图之后。)
