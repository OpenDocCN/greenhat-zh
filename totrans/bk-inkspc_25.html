<html><head></head><body><div class="appendix" title="Appendix&#xA0;A.&#xA0;An SVG Primer"><div class="titlepage"><div><div><h1 class="title"><a id="svg_primer"/>Appendix A. An SVG Primer</h1></div></div></div><p><a id="iddle4469" class="indexterm"/><a id="iddle4511" class="indexterm"/><a id="iddle4975" class="indexterm"/>This appendix is a very high-level glance at the general principles of SVG and its implementation in Inkscape. Some of this material has already been referred to in other chapters. However, this book does not intend to replace the official SVG specification. If you want an absolutely final, complete, and authoritative reference on SVG, you need the SVG specification produced by the W3C. Available versions of this specification can be found at <span class="emphasis"><em><a class="ulink" href="http://w3.org/Graphics/SVG">http://w3.org/Graphics/SVG</a></em></span>; the version that Inkscape currently supports, 1.1, is at <span class="emphasis"><em><a class="ulink" href="http://w3.org/TR/SVG11">http://w3.org/TR/SVG11</a></em></span>.</p><p>Knowledge of SVG and, more generally, XML (SVG is just a specialized variety of XML) is not <span class="emphasis"><em>strictly</em></span> necessary for mastering Inkscape—but it really helps. It will allow you to peek under the hood of Inkscape drawings, and it will often reveal the true reasons behind some of Inkscape’s features (or lack thereof). As XML is so widely used these days, this appendix’s material may also be useful to you in a lot of other situations not involving Inkscape and SVG at all.</p></div>
<div class="sect1" title="A.1 A Quick Introduction to XML"><div class="titlepage"><div><div><h1 class="title"><a id="adot1_a_quick_introduction_to_xml"/>A.1 A Quick Introduction to XML</h1></div></div></div><p><a id="iddle1001" class="indexterm"/><a id="iddle1014" class="indexterm"/><a id="iddle1159" class="indexterm"/><a id="iddle1963" class="indexterm"/><a id="iddle1964" class="indexterm"/><a id="iddle1967" class="indexterm"/><a id="iddle2259" class="indexterm"/><a id="iddle2405" class="indexterm"/><a id="iddle2784" class="indexterm"/><a id="iddle4556" class="indexterm"/><a id="iddle4921" class="indexterm"/><a id="iddle4956" class="indexterm"/>These days, almost everyone has at least heard of XML, and certainly everyone has used it, though often unknowingly. If you’ve seen the source code of a web page, you already know what XML looks like, because XHTML, the markup language used on the Web today, is one of the subspecies of XML (more precisely, an <span class="emphasis"><em>XML vocabulary</em></span>). SVG is another such vocabulary.</p><p>XML is a standardized way to record structured information in plain text. Its biggest advantage is that it is easy to parse for computers and yet quite understandable for humans. Unlike most other computer-related concepts that are, usually, as complex as you think they are (or more), XML is an unbelievably simple thing. So simple, in fact, that I will now explain it in a few short paragraphs.</p><p>The basic building block of an XML document is called an <span class="emphasis"><em>element</em></span>. Here is an example of an element containing some text:</p><a id="pro_id00009"/><pre class="programlisting">&lt;example&gt;Here goes some text.&lt;/example&gt;</pre><p>The text inside the element is called its <span class="emphasis"><em>content</em></span>, and that content is delimited by <span class="emphasis"><em>tags</em></span>. Everything between the less-than sign (<code class="literal">&lt;</code>) and the greater-than sign (<code class="literal">&gt;</code>) is a tag. Here, the opening tag and the closing tag are almost identical, except that the closing one has a forward slash (<code class="literal">/</code>) before the element name, which in this case is <code class="literal">example</code>.</p><p>An element may have no content at all:</p><a id="pro_id00010"/><pre class="programlisting">&lt;example&gt;&lt;/example&gt;</pre><p>or</p><a id="pro_id00011"/><pre class="programlisting">&lt;example/&gt;</pre><p>These two <span class="emphasis"><em>empty elements</em></span> are absolutely equivalent; the second one, consisting of a single tag, is just a spelling variant of the first. Note the different position of the forward slash (<code class="literal">/</code>) in the single-tag empty element.</p><p>In addition to text, elements can also contain other elements, but those elements must lie <span class="emphasis"><em>entirely</em></span> within the containing element. For example, this is wrong:</p><a id="pro_id00012"/><pre class="programlisting">&lt;a&gt;&lt;b&gt;&lt;/a&gt;&lt;/b&gt;</pre><p>because the element <code class="literal">b</code> starts inside <code class="literal">a</code> but ends outside it. If an element started inside some other element, it must also end within that element. Here is an example of correct XML:</p><a id="pro_id00013"/><pre class="programlisting">&lt;a&gt;&lt;b/&gt;&lt;c/&gt;&lt;d&gt;&lt;e/&gt;&lt;/d&gt;&lt;/a&gt;</pre><p>One can say that <code class="literal">a</code> is the <span class="emphasis"><em>parent element</em></span> of <code class="literal">b</code>, <code class="literal">c</code>, and <code class="literal">d</code>, while <code class="literal">d</code> is the parent of <code class="literal">e</code>. An element may have many children, but it has only one parent (except for the root element of the document, which has no parent at all). <a class="xref" href="apas01.html#tree_representing_the_xml_code" title="Figure A-1. A tree representing the XML code">Figure A-1</a> is a graphic representation of this XML fragment.</p><div class="figure"><a id="tree_representing_the_xml_code"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00432"/><img src="httpatomoreillycomsourcenostarchimages1736528.png.jpg" alt="A tree representing the XML code"/></div></div><p class="title">Figure A-1. A tree representing the XML code</p></div><div class="note" title="Note"><h3 class="title"><a id="app01note01a"/>Note</h3><p><a id="iddle1013" class="indexterm"/><a id="iddle1020" class="indexterm"/><a id="iddle1200" class="indexterm"/><a id="iddle1203" class="indexterm"/><a id="iddle1890" class="indexterm"/><a id="iddle1969" class="indexterm"/><a id="iddle2039" class="indexterm"/><a id="iddle2448" class="indexterm"/><a id="iddle4461" class="indexterm"/><span class="emphasis"><em>This explains why groups of objects in Inkscape cannot contain objects from different layers (<span class="strong"><strong><a class="xref" href="ch04s05.html" title="4.5 Groups">4.5 Groups</a></strong></span>). A group is a parent element for its children, but so is a layer. A group may be contained inside a single layer, but you can’t have it scattered across several layers, because that would result in that group having several parents.</em></span></p></div><p>Apart from children elements, XML elements may have some attributes. Each <span class="emphasis"><em>attribute</em></span> is a name with some associated value. Attributes are specified in the opening tag of an element, for example:</p><a id="pro_id00014"/><pre class="programlisting">&lt;text type="important" font-size="10"&gt;Here is some text.&lt;/text&gt;</pre><p>Note the use of the equal sign (<code class="literal">=</code>) and the double quote marks around attribute values. Both are mandatory.</p><div class="note" title="Note"><h3 class="title"><a id="app01note01"/>Note</h3><p><span class="emphasis"><em>An element cannot have two attributes with the same name. Note that the order of the attributes in the opening tag never affects anything; attributes in XML are</em></span> unordered<span class="emphasis"><em>.</em></span></p></div><p>Finally, the entire XML document is simply a single element (called <span class="emphasis"><em>root</em></span>) with some text content and children elements, which in turn can have more content and more children, and so on. An XML document can thus be thought of as a tree growing from a single root. For example, here is a complete SVG document whose root element, <code class="literal">svg</code>, contains two elements representing a rectangle and a text string:</p><a id="pro_id00015"/><pre class="programlisting">&lt;svg&gt;
  &lt;rect x="100" y="100" width="300" height="50" fill="blue"/&gt;
  &lt;text x="100" y="150"&gt;This is a text string.&lt;/text&gt;
&lt;/svg&gt;</pre></div>
<div class="sect1" title="A.2 Vocabularies and Namespaces"><div class="titlepage"><div><div><h1 class="title"><a id="adot2_vocabularies_and_namespaces"/>A.2 Vocabularies and Namespaces</h1></div></div></div><p>If this is all there is to XML, what makes it so powerful and so widely used?</p><p>XML itself is just a foundation, and on that foundation a lot of buildings have been, are being, and undoubtedly will be erected. You won’t believe how many valuable programmer resources were wasted before the advent of XML on inventing new data formats for each application, formulating their rules, writing and testing software to support them, and working around the inevitable bugs, exceptions, and version incompatibilities.</p><p>All this misery is now a thing of the past. Now, if you need to record some data, you don’t need to go into the low-level details of which characters have special meanings and what are the sizes of various fields. By choosing XML (and <a id="iddle1003" class="indexterm"/><a id="iddle1293" class="indexterm"/><a id="iddle1572" class="indexterm"/><a id="iddle2499" class="indexterm"/><a id="iddle2530" class="indexterm"/><a id="iddle2919" class="indexterm"/><a id="iddle4893" class="indexterm"/><a id="iddle4922" class="indexterm"/><a id="iddle4957" class="indexterm"/>you would need serious reasons <span class="emphasis"><em>not</em></span> to choose it) you can concentrate on things that really matter: the structure of your data and how to name elements and attributes that would best express that structure.</p><p>Moreover, these days it is quite likely that you won’t even need that, because a well-known standardized XML <span class="emphasis"><em>vocabulary</em></span> for your data probably already exists, and you can just make use of it. Each vocabulary defines a set of elements and attributes, detailing what they are supposed to mean, in what contexts they may or may not be used, what is obligatory and what is optional, and so on. SVG is one such vocabulary; XHTML is another. There exist standardized XML vocabularies for a lot of exotic things, from dog genealogies to star catalogs. Many of them reuse parts of other vocabularies.</p><p>To be able to mix parts of different vocabularies without confusion, XML uses <span class="emphasis"><em>namespaces</em></span>. A namespace is just a way to indicate where a specific element or attribute comes from. For example, here’s an <code class="literal">image</code> element from SVG vocabulary, representing a linked bitmap image inside an SVG document:</p><a id="pro_id00016"/><pre class="programlisting">&lt;svg:image xlink:href="/dir/file.png" width="200" height="100"/&gt;</pre><p>You can see that the element name and one of the attributes use a colon (<code class="literal">:</code>). The part of the name before the colon is called the <span class="emphasis"><em>namespace prefix</em></span>. To find out which namespace corresponds with which prefix, we must look for a namespace declaration in the form of a special <code class="literal">xmlns</code> prefixed attribute (short for <span class="emphasis"><em>XML NameSpace</em></span>), either on the same element or on any of its ancestor elements up the tree. It is customary to place all namespace declaration attributes on the root element. In this case, you will likely find the declarations for <code class="literal">svg</code> and <code class="literal">xlink</code> prefixes in the root <code class="literal">svg</code> element:</p><a id="pro_id00017"/><pre class="programlisting">&lt;svg:svg ...
         
         
         ... &gt;</pre><p>This means that the <code class="literal">svg</code> prefix is bound to the namespace of <code class="literal">http://www.w3.org/2000/svg</code> and the <code class="literal">xlink</code> prefix corresponds to <code class="literal">http://www.w3.org/1999/xlink</code>. Here, the namespaces are URLs, but they need not be; the only requirement is that they must be globally unique (and URLs are just the easiest way to ensure this uniqueness).</p><p>The namespace URL for SVG, <code class="literal">http://www.w3.org/2000/svg</code>, must look exactly as shown. If the namespace prefix of the elements in your SVG document does not resolve to <code class="literal">http://www.w3.org/2000/svg</code>, neither Inkscape nor any other software will recognize the document as SVG. The namespace <span class="emphasis"><em>prefix</em></span>, however, may be arbitrary, so long as it’s bound to the correct namespace. The prefix may even be empty if you declare it thus:</p><a id="pro_id00018"/><pre class="programlisting">&lt;svg ...
     
     ... &gt;</pre><p>Inside the element with that declaration, any element name <span class="emphasis"><em>without</em></span> a prefix will be assumed to be in the SVG namespace. For example, the following will be <a id="iddle1450" class="indexterm"/><a id="iddle2588" class="indexterm"/><a id="iddle2619" class="indexterm"/><a id="iddle4200" class="indexterm"/><a id="iddle4484" class="indexterm"/><a id="iddle4496" class="indexterm"/><a id="iddle4498" class="indexterm"/><a id="iddle4958" class="indexterm"/>recognized as a valid <code class="literal">image</code> element from SVG, which links an external image file in PNG format:</p><a id="pro_id00019"/><pre class="programlisting">&lt;image xlink:href="/dir/portrait.png" width="200" height="100"/&gt;</pre><p>Namespace errors, such as no namespace declared for a prefix or a wrong namespace URL, are most common when you edit your SVG by hand and then try to load it into Inkscape. Watch out for them!</p></div>
<div class="sect1" title="A.3 Root"><div class="titlepage"><div><div><h1 class="title"><a id="adot3_root"/>A.3 Root</h1></div></div></div><p>Here’s a typical root <code class="literal">svg</code> element of an Inkscape SVG document with a number of namespace declarations and other attributes:</p><a id="pro_id00020"/><pre class="programlisting">&lt;svg 
     
     
     
     
     
     
     
     sodipodi:docname="file.svg"
     width="1052.3622"
     height="744.09448"
     id="svg2"
     sodipodi:version="0.32"
     inkscape:version="0.46"
     version="1.0"&gt;</pre><p>SVG uses the SVG namespace (<code class="literal">http://www.w3.org/2000/svg</code>) for its own elements and the XLink namespace (<code class="literal">http://www.w3.org/1999/xlink</code>) for the linking attributes (<span class="strong"><strong><a class="xref" href="apas09.html" title="A.9 Linking">A.9 Linking</a></strong></span>). On top of that, Inkscape adds elements and attributes in the namespaces belonging to Inkscape (<code class="literal">http://www.inkscape.org/namespaces/inkscape</code>) and its predecessor Sodipodi (<code class="literal">http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd</code>; see <span class="strong"><strong><a class="xref" href="ch01s06.html" title="1.6 The Life of an Open Source Application">1.6 The Life of an Open Source Application</a></strong></span> for a brief history of Inkscape). Other namespaces declared here are used for metadata elements (general information about the document) and license identifiers (<span class="strong"><strong><a class="xref" href="apas04.html" title="A.4 Defs, View, and Metadata">A.4 Defs, View, and Metadata</a></strong></span>).</p><p>The only attributes on the root element that are defined in the SVG standard are <code class="literal">width</code> and <code class="literal">height</code> (defining the size of the canvas), <code class="literal">id</code>, and <code class="literal">version</code>. The rest are either namespace declarations or attributes in the custom Inkscape/Sodipodi namespaces.</p><p>This root tag specifies the version of Inkscape in which this document was created: <code class="literal">inkscape:version="0.46"</code>. It also claims that the version of Sodipodi that this document will work with is 0.32 (<code class="literal">sodipodi:version="0.32"</code>), because after that version Inkscape forked off Sodipodi. The non-namespaced <code class="literal">version</code> attribute refers to the version of the SVG specification this document implements, 1.0.</p><p>The only difference between the Inkscape SVG and the Plain SVG formats that Inkscape offers when saving is that Plain SVG strips away all the elements and attributes in Inkscape and Sodipodi namespaces, leaving only the “industry <a id="iddle1177" class="indexterm"/><a id="iddle1441" class="indexterm"/><a id="iddle1513" class="indexterm"/><a id="iddle1570" class="indexterm"/><a id="iddle1775" class="indexterm"/><a id="iddle1845" class="indexterm"/><a id="iddle1857" class="indexterm"/><a id="iddle2201" class="indexterm"/><a id="iddle2273" class="indexterm"/><a id="iddle2366" class="indexterm"/><a id="iddle2412" class="indexterm"/><a id="iddle2414" class="indexterm"/><a id="iddle2736" class="indexterm"/><a id="iddle2795" class="indexterm"/><a id="iddle2830" class="indexterm"/><a id="iddle2847" class="indexterm"/><a id="iddle2916" class="indexterm"/><a id="iddle3407" class="indexterm"/><a id="iddle4159" class="indexterm"/><a id="iddle4881" class="indexterm"/><a id="iddle4899" class="indexterm"/><a id="iddle4992" class="indexterm"/>standard” namespaces. Note that no Inkscape-specific elements or attributes are ever allowed to alter how the document <span class="emphasis"><em>looks</em></span>; they can only affect the way it <span class="emphasis"><em>behaves</em></span> when edited in Inkscape (for example, an attribute on a <code class="literal">g</code> element may tell Inkscape to edit that element as a 3D box instead of a simple group, see <span class="strong"><strong><a class="xref" href="ch11s03.html" title="11.3 3D Boxes">11.3 3D Boxes</a></strong></span>). Therefore, saving as a Plain SVG is just a way to make a file a little smaller at the cost of losing some of its Inkscape editability. If you find a file that renders differently after being saved as Plain SVG, you’ve found a bug: Please report it to the developers!</p></div>
<div class="sect1" title="A.4 Defs, View, and Metadata"><div class="titlepage"><div><div><h1 class="title"><a id="adot4_defscomma_viewcomma_and_metadata"/>A.4 Defs, View, and Metadata</h1></div></div></div><p>Now let’s descend from the root element of a typical Inkscape SVG document to see what else is in there.</p><p>First comes the <code class="literal">defs</code> element. As part of the SVG standard, it is a storage bin for things that, by themselves, are not displayed on the canvas, but may be used by other elements that are. This includes gradients, patterns, markers (arrowheads, <span class="strong"><strong><a class="xref" href="ch09s05.html" title="9.5 Markers">9.5 Markers</a></strong></span>), clipping paths, masks, filters, and so on. They are all stored as child elements of the <code class="literal">defs</code> element. The SVG specification allows arbitrarily many <code class="literal">defs</code> elements placed almost anywhere in the document, but Inkscape always uses a single <code class="literal">defs</code> under the root <code class="literal">svg</code>. Here’s an example <code class="literal">defs</code> element containing a gradient:</p><a id="pro_id00021"/><pre class="programlisting">&lt;defs id="defs4"&gt;
  &lt;linearGradient inkscape:collect="always" id="linearGradient2798"&gt;
     &lt;stop style="stop-color:#000000;stop-opacity:1;" offset="0" id="stop2800" /&gt;
     &lt;stop style="stop-color:#000000;stop-opacity:0;" offset="1" id="stop2802" /&gt;
  &lt;/linearGradient&gt;
&lt;/defs&gt;</pre><p>Adding the <code class="literal">linearGradient</code> element to <code class="literal">defs</code>, by itself, does not change anything on the canvas. Now, however, any object can reference (<span class="strong"><strong><a class="xref" href="ch10s02.html#one0dot2dot1_sharing_gradient_definition" title="10.2.1 Sharing Gradient Definitions">10.2.1 Sharing Gradient Definitions</a></strong></span>) this gradient for painting its fill or stroke.</p><p>Most of the stuff in <code class="literal">defs</code> is kept even if no visible element uses it. (The only exceptions are the elements with the <code class="literal">inkscape:collect</code> attribute with the value of <code class="literal">always</code>; such elements are automatically deleted when no longer used. Inkscape often uses this flag to mark various supplemental elements it creates on its own and can safely dispose of; it will never delete anything that you created without your permission.)</p><p>This allows you to reuse things you once defined but then abandoned, but it also may lead to <code class="literal">defs</code> growing larger and larger as you work on your document and try out various techniques. To remove the unused definitions from <code class="literal">defs</code>, use the <span class="strong"><strong>File</strong></span> ▸ <span class="strong"><strong>Vacuum Defs</strong></span> command. Unfortunately, even this command may fail to completely delete <span class="emphasis"><em>all</em></span> unused stuff in <code class="literal">defs</code> on the first try; you may need to quit, reload the document, and vacuum <code class="literal">defs</code> again for it to fully work.</p><p>The next element you will see inside an Inkscape SVG document is <code class="literal">sodipodi:namedview</code>. This Inkscape-specific element holds, in its attributes, all kinds of options that are specific to this document: the zoom level and scroll position that Inkscape will use upon loading the document, the colors and spacing of the grids, various snapping modes, the current layer, document units, and so <a id="iddle1820" class="indexterm"/><a id="iddle1824" class="indexterm"/><a id="iddle2449" class="indexterm"/><a id="iddle2749" class="indexterm"/><a id="iddle2856" class="indexterm"/><a id="iddle3636" class="indexterm"/><a id="iddle5026" class="indexterm"/>on. From within Inkscape, most of these options are settable via the <span class="strong"><strong>File</strong></span> ▸ <span class="strong"><strong>Document Properties</strong></span> command (<span class="strong"><strong><a class="xref" href="ch03s01.html#threedot1dot2_document_properties" title="3.1.2 Document Properties">3.1.2 Document Properties</a></strong></span>).</p><a id="pro_id00022"/><pre class="programlisting">&lt;sodipodi:namedview inkscape:window-height="950"
                    inkscape:window-width="1280"
                    inkscape:window-x="0"
                    inkscape:window-y="24"
                    inkscape:pageshadow="2"
                    inkscape:pageopacity="0.0"
                    bordercolor="#666666"
                    pagecolor="#ffffff"
                    inkscape:zoom="0.64306408"
                    inkscape:cx="836.6226"
                    inkscape:cy="619.40089"
                    inkscape:current-layer="layer2"
                    showguides="true" /&gt;</pre><p>Finally, just before the actual content of the document starts, there is the <code class="literal">metadata</code> element. It stores information about the author of the document, its purpose, date, license, and so on. It corresponds to the <span class="strong"><strong>File</strong></span> ▸ <span class="strong"><strong>Document Metadata</strong></span> dialog in Inkscape. The elements inside <code class="literal">metadata</code> typically represent the information as RDF (see <span class="emphasis"><em><a class="ulink" href="http://w3.org/RDF">http://w3.org/RDF</a></em></span>). RDF may employ many additional XML namespaces to describe different sorts of information.</p></div>
<div class="sect1" title="A.5 Layers and Groups"><div class="titlepage"><div><div><h1 class="title"><a id="adot5_layers_and_groups"/>A.5 Layers and Groups</h1></div></div></div><p>After the <code class="literal">metadata</code> element, the actual visible content of the SVG document starts. As you may have guessed, each document object corresponds to an SVG element. Moreover, the order of the elements in the file corresponds to the order in which objects are visually stacked on the canvas (<span class="strong"><strong><a class="xref" href="ch04s03.html" title="4.3 Z-Order">4.3 Z-Order</a></strong></span>): Elements closer to the end of the file appear atop those nearer the beginning.</p><p>When you group several elements together (<span class="strong"><strong><a class="xref" href="ch04s05.html" title="4.5 Groups">4.5 Groups</a></strong></span>), they are placed inside a <code class="literal">g</code> element. For example, here’s a group that contains a rectangle and a text object:</p><a id="pro_id00023"/><pre class="programlisting">&lt;g id="g2893"&gt;
  &lt;rect id="rect2310"
        y="350"
        x="100"
        width="300"
        height="150"
        style="opacity:1;fill:#ff0000;stroke:#000000;stroke-width:1px;" /&gt;
  &lt;text id="text2889"
        y="400"
        x="200"
        style="font-size:40px;font-style:normal;font-weight:normal;fill:#000000;
               stroke:none;font-family:Bitstream Vera Sans"
        xml:space="preserve"&gt;Text in rectangle&lt;/text&gt;
&lt;/g&gt;</pre><p>Besides groups, another way to organize your objects is by using layers (<span class="strong"><strong><a class="xref" href="ch04s06.html" title="4.6 Layers">4.6 Layers</a></strong></span>). SVG does not have a special element type for layers; instead, Inkscape just uses an SVG <code class="literal">g</code> element, adding a special attribute so it knows to treat the group as a layer when the file is edited.</p><a id="pro_id00024"/><pre class="programlisting">&lt;g inkscape:groupmode="layer"
   inkscape:label="Layer 1"
   id="layer1"&gt;
  ...contents of the layer...
&lt;/g&gt;</pre><p><a id="iddle1111" class="indexterm"/><a id="iddle1679" class="indexterm"/><a id="iddle2444" class="indexterm"/><a id="iddle3871" class="indexterm"/><a id="iddle4333" class="indexterm"/><a id="iddle4467" class="indexterm"/><a id="iddle4877" class="indexterm"/><a id="iddle4904" class="indexterm"/>Since layers are thus a special case of groups, it is easy to understand how Inkscape can “enter a group,” treating it temporarily as a layer (<span class="strong"><strong><a class="xref" href="ch04s06.html#fourdot6dot1_layer_hierarchy" title="4.6.1 Layer Hierarchy">4.6.1 Layer Hierarchy</a></strong></span>). It also becomes clear why, upon importing Inkscape’s SVG file into another vector editor (such as Adobe Illustrator), you usually lose layers but your objects get additional layers of grouping: The other editor simply does not know about Inkscape’s convention of using some <code class="literal">g</code> elements as layers and treats all the layers as regular groups.</p><p>Inside layers and groups, other SVG elements represent the actual objects of your drawing. See <span class="emphasis"><em><a class="ulink" href="http://w3.org/TR/SVG11/eltindex.html">http://w3.org/TR/SVG11/eltindex.html</a></em></span> for a complete list of elements in SVG 1.1, but note that not all of them are supported by Inkscape yet.</p></div>
<div class="sect1" title="A.6 Coordinates and Units"><div class="titlepage"><div><div><h1 class="title"><a id="adot6_coordinates_and_units"/>A.6 Coordinates and Units</h1></div></div></div><p>Distances and coordinates in SVG drawings can be expressed in a number of units: centimeters (cm), millimeters (mm), inches (in), points (pt), and a few others. One unit, however, is special: It is the <span class="emphasis"><em>SVG pixel</em></span> (abbreviated <code class="literal">px</code>), sometimes called the <span class="emphasis"><em>anonymous unit</em></span>, because it can be written without any unit designation at all. For example, in this <code class="literal">rect</code> element, <code class="literal">x</code>, <code class="literal">y</code>, <code class="literal">width</code>, and <code class="literal">height</code> are expressed in SVG pixels:</p><a id="pro_id00025"/><pre class="programlisting">&lt;rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150" /&gt;</pre><p>They might just as well be specified in millimeters:</p><a id="pro_id00026"/><pre class="programlisting">&lt;rect id="rect2310"
      y="98.777mm"
      x="28.222mm"
      width="84.667mm"
      height="42.333mm" /&gt;</pre><p>and Inkscape would understand this correctly. However, if you change and resave this SVG file, Inkscape will convert all sizes back to SVG pixels.</p><p>Despite its name, an SVG pixel is not the same as a <span class="emphasis"><em>screen pixel</em></span>. When you zoom in, a distance of one SVG pixel becomes larger than one pixel on your screen; when you zoom out, it becomes smaller than one screen pixel. However, when your zoom level (displayed at the right end of the status bar of your Inkscape window, see <a class="xref" href="ch02s02.html#first_look_at_inkscape" title="Figure 2-1. The first look at Inkscape">Figure 2-1</a>) is 100 percent, one SVG pixel exactly corresponds to one screen pixel. This makes this unit especially convenient for creating graphics for screen viewing.</p><p><a id="iddle1307" class="indexterm"/><a id="iddle1684" class="indexterm"/><a id="iddle1825" class="indexterm"/><a id="iddle1892" class="indexterm"/><a id="iddle2879" class="indexterm"/><a id="iddle3515" class="indexterm"/><a id="iddle3639" class="indexterm"/><a id="iddle3736" class="indexterm"/><a id="iddle3821" class="indexterm"/><a id="iddle4082" class="indexterm"/><a id="iddle4145" class="indexterm"/><a id="iddle4741" class="indexterm"/><a id="iddle4754" class="indexterm"/><a id="iddle4766" class="indexterm"/><a id="iddle4885" class="indexterm"/>In Inkscape, 90 SVG pixels are equal to one inch, so when you export your graphics at the resolution of 90 dpi (pixels per inch), it will show up exactly as displayed in Inkscape at 100 percent zoom. In most places where you can specify sizes or distances in Inkscape UI, there’s a way to specify the units, and the <code class="literal">px</code> unit (SVG pixel) is the default (although you can choose a different default unit in <span class="strong"><strong>Document Properties</strong></span>).</p><p>SVG uses rectangular Cartesian coordinates for specifying objects’ positions on canvas. The coordinate origin in SVG is in the top-left corner of the page, and the Y coordinate grows downward. However, in the Inkscape UI the origin is in the bottom-left corner and Y grows upward. Future versions may change this, most likely by making this “coordinate flip” optional to make life easier for those who edit SVG manually as well as in Inkscape.</p></div>
<div class="sect1" title="A.7 Transformations"><div class="titlepage"><div><div><h1 class="title"><a id="adot7_transformations"/>A.7 Transformations</h1></div></div></div><p>Every object in SVG has its own natural place on the canvas. For example, for a rectangle, this place is defined by the <code class="literal">x</code> and <code class="literal">y</code> attributes on the <code class="literal">rect</code> element:</p><a id="pro_id00027"/><pre class="programlisting">&lt;rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150" /&gt;</pre><p>However, one of the most interesting features of SVG is that this position can be affected by the <code class="literal">transform</code> attribute. Most often, this attribute contains a sequence of six numbers inside a <code class="literal">matrix(...)</code>:</p><a id="pro_id00028"/><pre class="programlisting">&lt;rect transform="matrix(0.96333,0.26831,-0.26831,0.96333,203.200,-160.066)"
      id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150" /&gt;</pre><p>In this form, the attribute represents an <span class="emphasis"><em>affine transform matrix</em></span>. A complete treatment of matrix algebra is way outside the scope of this book, but you should have an idea of what transformations are called affine:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Any <span class="emphasis"><em>moves</em></span>, also called <span class="emphasis"><em>translations</em></span> (<a class="xref" href="ch06s01.html#constrained_dragging_with" title="Figure 6-1. Constrained dragging with">Figure 6-1</a>)</p></li><li class="listitem"><p>Any <span class="emphasis"><em>scalings</em></span>, including both uniform and nonuniform; for example, scaling only width or only height (<a class="xref" href="ch06s02.html#scaling_with_the_selector_tool" title="Figure 6-2. Scaling with the Selector tool">Figure 6-2</a>)</p></li><li class="listitem"><p>Any <span class="emphasis"><em>rotations</em></span> around any center (<a class="xref" href="ch06s03.html#rotation_constrained_by" title="Figure 6-6. Rotation constrained by">Figure 6-6</a>)</p></li><li class="listitem"><p>Any <span class="emphasis"><em>skews</em></span>, sometimes called <span class="emphasis"><em>shears</em></span> (<a class="xref" href="ch06s03.html#skewing_constrained_by" title="Figure 6-7. Skewing constrained by">Figure 6-7</a>)</p></li></ul></div><p>Not coincidentally, these transformations are exactly those that the Selector tool can perform (<a class="xref" href="ch06.html" title="Chapter 6. Transforming">Chapter 6</a>). Note that, for example, perspective transformations are not affine: They cannot be expressed by a <code class="literal">transform</code> attribute and cannot be performed by the Selector tool.</p><p><a id="iddle1005" class="indexterm"/><a id="iddle1019" class="indexterm"/><a id="iddle1201" class="indexterm"/><a id="iddle1574" class="indexterm"/><a id="iddle1968" class="indexterm"/><a id="iddle2460" class="indexterm"/><a id="iddle2678" class="indexterm"/><a id="iddle4100" class="indexterm"/><a id="iddle4419" class="indexterm"/><a id="iddle4428" class="indexterm"/>So, an element with a <code class="literal">transform</code> attribute means: “Draw this element at its natural position and size, then move, scale, rotate, or skew it as specified in the transform.”</p><p>Moreover, the <code class="literal">transform</code> value on the element’s parent (for example, on a <code class="literal">g</code> element that contains this object) affects the object, too. All the transforms on the object and all its ancestors are combined. This is why, for example, when you move or scale a group, all objects belonging to the group are moved and scaled by the same amount, although it is only the parent <code class="literal">g</code> element whose <code class="literal">transform</code> attribute is modified.</p><p>On the <span class="strong"><strong>Transforms</strong></span> tab of the <span class="strong"><strong>Inkscape Preferences</strong></span> dialog (<span class="strong"><strong><a class="xref" href="ch03s01.html" title="3.1 Preferences">3.1 Preferences</a></strong></span>), there’s a <span class="strong"><strong>Store transformation</strong></span> option with the values of <span class="strong"><strong>Optimized</strong></span> and <span class="strong"><strong>Preserved</strong></span>. This determines the strategy of Inkscape when transforming objects. If set to <span class="strong"><strong>Preserved</strong></span>, it will always record all transformations of all objects as <code class="literal">transform</code> attributes, leaving all other attributes intact. If set to <span class="strong"><strong>Optimized</strong></span> (default), it will try, whenever possible, to record the transformation into the object’s other attributes and not <code class="literal">transform</code>. For example, when you move a rectangle, in the optimized mode it will change the rectangle’s <code class="literal">x</code> and <code class="literal">y</code> attributes instead of adding or changing its <code class="literal">transform</code>. Not all kinds of transformations and not all types of objects allow such optimization, however, so even in the optimized mode <code class="literal">transform</code> attributes will still be created. The only object type that can optimize any kinds of transformations and make do without the <code class="literal">transform</code> at all times is <code class="literal">path</code>.</p></div>
<div class="sect1" title="A.8 Style"><div class="titlepage"><div><div><h1 class="title"><a id="adot8_style"/>A.8 Style</h1></div></div></div><p>Quite naturally, the style properties of an object can be represented as attributes of the corresponding element. Such attributes are called <span class="emphasis"><em>presentation attributes</em></span>. For example, this rectangle has blue fill and black stroke 1 px wide:</p><a id="pro_id00029"/><pre class="programlisting">&lt;rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150"
      fill="blue"
      stroke="black"
      stroke-width="1pt" /&gt;</pre><p>This, however, is only one possible way to record style properties in XML. Another way is to pack all the properties into a single attribute, called <code class="literal">style</code>, using colons (<code class="literal">:</code>) to separate the name from the value in each property and semicolons (<code class="literal">;</code>) to separate properties:</p><a id="pro_id00030"/><pre class="programlisting">&lt;rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150"
      style="fill:blue; stroke:black; stroke-width:1pt" /&gt;</pre><p>Inkscape understands both methods but when writing properties to SVG, for historical reasons, only uses the second one, with a single <code class="literal">style</code> attribute. <a id="iddle1016" class="indexterm"/><a id="iddle1776" class="indexterm"/><a id="iddle1965" class="indexterm"/><a id="iddle2148" class="indexterm"/><a id="iddle2161" class="indexterm"/><a id="iddle2367" class="indexterm"/><a id="iddle2489" class="indexterm"/><a id="iddle2500" class="indexterm"/><a id="iddle2521" class="indexterm"/><a id="iddle2796" class="indexterm"/><a id="iddle3640" class="indexterm"/><a id="iddle4405" class="indexterm"/><a id="iddle4425" class="indexterm"/><a id="iddle4431" class="indexterm"/><a id="iddle4894" class="indexterm"/><a id="iddle4959" class="indexterm"/>When both are present, the properties in the <code class="literal">style</code> attribute take precedence over the same properties in presentation attributes.</p><p>Once again, this appendix will not list all the style properties used by SVG (see <span class="emphasis"><em><a class="ulink" href="http://w3.org/TR/SVG11/propidx.html">http://w3.org/TR/SVG11/propidx.html</a></em></span> for a complete list), but you should at least recognize them when you see them.</p><p>SVG prescribes that most (but not all) style properties should be inherited by children from their parents, provided a child does not specify its own value for that property. For example, if a rectangle has no <code class="literal">fill</code> property specified but its parent <code class="literal">g</code> has <code class="literal">fill="blue"</code>, the rectangle will be painted blue. In Inkscape, such inheritance rarely plays a role, simply because normally, objects have most of their properties set whether you changed them or not. However, for <code class="literal">fill</code> and <code class="literal">stroke</code> properties, there’s a way to remove, or <span class="emphasis"><em>unset</em></span>, these properties using the UI, making it possible to inherit these properties from the parent element (<span class="strong"><strong><a class="xref" href="ch08s01.html#eightdot1dot1_paint" title="8.1.1 Paint">8.1.1 Paint</a></strong></span>).</p></div>
<div class="sect1" title="A.9 Linking"><div class="titlepage"><div><div><h1 class="title"><a id="adot9_linking"/>A.9 Linking</h1></div></div></div><p>Often, elements in SVG need to refer, or <span class="emphasis"><em>link</em></span>, to one another. This is most common when visible elements on canvas use some of the definitions in <code class="literal">defs</code>. For example, if you have a rectangle filled with linear gradient, the <code class="literal">rect</code> element describes only the rectangle itself. Its gradient is described by a different element, called <code class="literal">linearGradient</code>, in the document’s <code class="literal">defs</code>, and the rectangle links to that gradient definition.</p><p>In order to be linkable, an element must have an <code class="literal">id</code> attribute whose value is unique inside this document. Inkscape provides unique <code class="literal">id</code>s for all elements automatically. The URL for linking to an element is simply its <code class="literal">id</code> preceded by a hash mark (<code class="literal">#</code>)—for example, <code class="literal">#linearGradient2128</code>. In order to use this URL from a <code class="literal">style</code> property, you need to enclose it in parentheses and prefix it with the string <code class="literal">url</code>. For example, here’s a <code class="literal">linearGradient</code> element and a rectangle linking to it from its <code class="literal">fill</code> property:</p><a id="pro_id00031"/><pre class="programlisting">&lt;defs&gt;
  &lt;linearGradient id="linearGradient2128"&gt;
    &lt;stop id="stop2286" offset="0" style="stop-color:#0000ff;stop-opacity:0;" /&gt;
    &lt;stop id="stop2284" offset="1" style="stop-color:#0000ff;stop-opacity:1;" /&gt;
  &lt;/linearGradient&gt;
&lt;/defs&gt;

...

&lt;rect id="rect2310"
      y="350"
      x="100"
      width="300"
      height="150"
      style="fill:url(#linearGradient2128)" /&gt;</pre><p>Linking is not always done by style properties; for example, the SVG standard says that gradients can link to one another in order to share color stops and other attributes. In such cases, the <code class="literal">xlink:href</code> attribute is used (in other words, the <code class="literal">href</code> attribute in the XLink namespace). (XLink is another <a id="iddle1759" class="indexterm"/><a id="iddle3291" class="indexterm"/><a id="iddle4112" class="indexterm"/><a id="iddle4123" class="indexterm"/><a id="iddle4460" class="indexterm"/><a id="iddle4844" class="indexterm"/>W3C standard, separate from SVG and used in many XML vocabularies for linking; see <span class="emphasis"><em><a class="ulink" href="http://w3.org/TR/xlink">http://w3.org/TR/xlink</a></em></span> for the specification.) The <code class="literal">xlink:href</code> attribute uses the plain URL without the <code class="literal">url()</code> wrapper; for example, <code class="literal">xlink:href="#linearGradient2128"</code>.</p><p>SVG allows you to link not only to other elements in the same document but also to other documents, accessible locally or on the Internet, as well as to elements inside them. As of version 0.47, Inkscape does not yet support such cross-document linking to SVG documents, although it can link to external bitmap files that are used as bitmap objects in a document.</p></div>
<div class="sect1" title="A.10 Object Types"><div class="titlepage"><div><div><h1 class="title"><a id="adot10_object_types"/>A.10 Object Types</h1></div></div></div><p>One of the most important features of Inkscape is its ability to create various object types, with each object remembering its type and providing various controls and behaviors specific to that type (<a class="xref" href="ch11.html" title="Chapter 11. Shapes">Chapter 11</a>). Some of these object types are directly supported by SVG; for example, Inkscape’s rectangles are represented by <code class="literal">rect</code> elements from SVG. But others are unique to Inkscape; for example, SVG has no special elements for spirals, stars, or 3D boxes. How can Inkscape use these object types while staying compatible with standard SVG?</p><p>The solution is the <code class="literal">sodipodi:type</code> attribute. Inkscape saves a star as an universal <code class="literal">path</code> element that can represent any shape, but adds to it the <code class="literal">sodipodi:type</code> indicating it’s actually a star, as well as some other extension attributes storing various star-specific parameters. The <code class="literal">path</code>’s standard <code class="literal">d</code> attribute, meanwhile, provides an exact representation of the star’s shape:</p><a id="pro_id00032"/><pre class="programlisting">&lt;path sodipodi:type="star"
      style="fill:#ff0000;"
      sodipodi:sides="5"
      sodipodi:cx="342.85715"
      sodipodi:cy="703.79077"
      sodipodi:r1="105.75289"
      sodipodi:r2="40.397606"
      sodipodi:arg1="0.90027477"
      sodipodi:arg2="1.5285933"
      inkscape:flatsided="false"
      inkscape:rounded="0"
      inkscape:randomized="0"
      d="M 408.571,786.647 L 344.561,744.152 L 284.362,791.893
         L 304.997,717.884 L 240.990,675.383 L 317.754,672.139
         L 338.395,598.132 L 365.202,670.135 L 441.965,666.897
         L 381.770,714.642 L 408.571,786.647 z" /&gt;</pre><p>When loading a document with such an element, Inkscape recognizes the <code class="literal">sodipodi:type</code> and, for editing, treats the object as a star rather than a path. However, when any other SVG software loads the same file, it ignores any Inkscape-specific attributes and interprets this element as a simple path which, however, <span class="emphasis"><em>looks</em></span> exactly the same as the star created in Inkscape. In other words, while only Inkscape can <span class="emphasis"><em>edit</em></span> the star as a star, using the standard <code class="literal">path</code> as the base for this object type ensures that it remains compatible with any SVG software.</p></div>
<div class="sect1" title="A.11 Inkscape SVG Extensions"><div class="titlepage"><div><div><h1 class="title"><a id="adot11_inkscape_svg_extensions"/>A.11 Inkscape SVG Extensions</h1></div></div></div><p><a id="iddle1571" class="indexterm"/><a id="iddle1777" class="indexterm"/><a id="iddle1858" class="indexterm"/><a id="iddle1866" class="indexterm"/><a id="iddle2062" class="indexterm"/><a id="iddle2094" class="indexterm"/><a id="iddle2099" class="indexterm"/><a id="iddle2274" class="indexterm"/><a id="iddle2431" class="indexterm"/><a id="iddle2450" class="indexterm"/><a id="iddle2522" class="indexterm"/><a id="iddle2723" class="indexterm"/><a id="iddle2750" class="indexterm"/><a id="iddle2765" class="indexterm"/><a id="iddle2917" class="indexterm"/><a id="iddle2998" class="indexterm"/><a id="iddle3047" class="indexterm"/><a id="iddle3054" class="indexterm"/><a id="iddle3056" class="indexterm"/><a id="iddle3116" class="indexterm"/><a id="iddle3126" class="indexterm"/><a id="iddle3141" class="indexterm"/><a id="iddle3769" class="indexterm"/><a id="iddle4485" class="indexterm"/><a id="iddle4512" class="indexterm"/><a id="iddle4767" class="indexterm"/><a id="iddle4768" class="indexterm"/>To conclude this necessary but very superficial appendix, let’s compile a list of the most important extension elements and attributes that you will see in Inkscape SVG files. Some of them were already discussed in previous sections; others deserve a brief treatment here.</p><p>One point bears repeating: None of these additional elements and attributes make Inkscape documents invalid SVG. The X in <a class="xref" href="ch04s05.html#ch04note07" title="XML">XML</a> stands for “eXtensible” for a reason: The ability to freely mix different vocabularies was one of the goals of XML from the very beginning. In our case, this means that any Inkscape SVG file must—and does—render absolutely the same in all compliant SVG renderers. (There’s a single unfortunate exception from this rule, which we discuss in <span class="strong"><strong><a class="xref" href="ch15s02.html#one5dot2dot2dot3_svg_compatibility" title="15.2.2.3 SVG Compatibility">15.2.2.3 SVG Compatibility</a></strong></span>.)</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The <code class="literal">inkscape:collect</code> attribute is added to those elements in <code class="literal">defs</code> which can be deleted automatically when no longer used (<span class="strong"><strong><a class="xref" href="apas04.html" title="A.4 Defs, View, and Metadata">A.4 Defs, View, and Metadata</a></strong></span>).</p></li><li class="listitem"><p>The <code class="literal">sodipodi:namedview</code> element is the place where Inkscape stores per-document preferences, as described in <span class="strong"><strong><a class="xref" href="apas04.html" title="A.4 Defs, View, and Metadata">A.4 Defs, View, and Metadata</a></strong></span>.</p></li><li class="listitem"><p>The <code class="literal">sodipodi:type</code> attribute is what Inkscape uses to mark objects of non-SVG types (<span class="strong"><strong><a class="xref" href="apas10.html" title="A.10 Object Types">A.10 Object Types</a></strong></span>). An element with this attribute usually has a whole bunch of other Inkscape-specific attributes that store various parameters unique to this object type.</p></li><li class="listitem"><p>The <code class="literal">inkscape:transform-center-x</code> and <code class="literal">inkscape:transform-center-y</code> attributes are set on an object if you dragged its rotation center (<span class="strong"><strong><a class="xref" href="ch06s04.html" title="6.4 Center of Rotation">6.4 Center of Rotation</a></strong></span>). Inkscape remembers the position of this center for each object for which it was changed.</p></li><li class="listitem"><p>The <code class="literal">sodipodi:nodetypes</code> attribute is where Inkscape stores the types of all nodes of a path that you edited with the Node tool. Classifying nodes as smooth, symmetric, and cusp (<span class="strong"><strong><a class="xref" href="ch12s05.html#one2dot5dot5_node_types" title="12.5.5 Node Types">12.5.5 Node Types</a></strong></span>) is something Inkscape allows you to do, but SVG has no provisions for; hence the need for an extension attribute.</p></li><li class="listitem"><p>The <code class="literal">inkscape:groupmode</code> attribute on a <code class="literal">g</code> is what differentiates a group from a layer in Inkscape (<span class="strong"><strong><a class="xref" href="apas05.html" title="A.5 Layers and Groups">A.5 Layers and Groups</a></strong></span>). For a layer, this attribute stores the value <code class="literal">layer</code>.</p></li><li class="listitem"><p>The <code class="literal">inkscape:label</code> attribute can be set on any element to provide a human-readable label for the corresponding object (the problem with using the <code class="literal">id</code> attribute for that purpose is that it cannot contain spaces and punctuation; <code class="literal">inkscape:label</code> is free from these limitations, <span class="strong"><strong><a class="xref" href="ch04s01.html" title="4.1 Object Properties">4.1 Object Properties</a></strong></span>). In this attribute, Inkscape stores the human-readable name of a layer.</p></li><li class="listitem"><p>The <code class="literal">inkscape:export-filename</code> attribute, which can be set on any element, stores the filename (including path) into which this object was last exported as bitmap. This value is automatically placed into the <span class="strong"><strong>Filename</strong></span> field of the <span class="strong"><strong>Export Bitmap</strong></span> dialog (<span class="strong"><strong><a class="xref" href="ch18s09.html#one8dot9dot1_the_export_bitmap_dialog" title="18.9.1 The Export Bitmap Dialog">18.9.1 The Export Bitmap Dialog</a></strong></span>), so you can quickly repeat exporting to the same file even after you closed and reopened the file. (This also explains why Inkscape claims that the file has changed and needs resaving after you did a bitmap export from it.)</p></li></ul></div></div></body></html>