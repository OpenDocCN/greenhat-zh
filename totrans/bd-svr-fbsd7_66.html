<html><head></head><body>

<div class="calibre1"><div class="calibre1"><a name="squirrelmail_1.4.13" class="calibre8" id="squirrelmail_1.4.13"/>
<div class="calibre24" id="calibre_pb_0"/><h2 id="title-ID0EN4AO" class="docPrefaceTitle">Chapter 29. SQUIRRELMAIL 1.4.13</h2>
<h4 class="calibre32"><a class="calibre2" target="_blank" href="HTTP://WWW.SQUIRRELMAIL.ORG">HTTP://WWW.SQUIRRELMAIL.ORG</a></h4>
<a name="summary-id28" class="calibre8" id="summary-id28"/>
<h3 class="docSection1Title" id="-100000">29.1. SUMMARY</h3>
<p class="docText1"><a name="SquirrelMail is" class="calibre8" id="SquirrelMail is"/>SquirrelMail is a web-based email client, or <span class="docEmphasis1">webmail application</span><a name="PHP with" class="calibre8" id="PHP with"/>, written in PHP with an emphasis on web standards and widespread compatibility across web browsers. Pages output by SquirrelMail are compliant with HTML 4.0 and don't use any client-side scripting.<a name="IDX-CHP-29-0445" class="calibre8" id="IDX-CHP-29-0445"/><a name="IDX-CHP-29-0446" class="calibre8" id="IDX-CHP-29-0446"/><a name="IDX-CHP-29-0447" class="calibre8" id="IDX-CHP-29-0447"/><a name="IDX-CHP-29-0448" class="calibre8" id="IDX-CHP-29-0448"/><a name="IDX-CHP-29-0449" class="calibre8" id="IDX-CHP-29-0449"/><a name="IDX-CHP-29-0450" class="calibre8" id="IDX-CHP-29-0450"/></p>
<p class="docText1"><a name="and SMTP" class="calibre8" id="and SMTP"/>SquirrelMail supports IMAP for retrieving and SMTP for sending email. Extensions or plug-ins are also available to add functionality to the SquirrelMail base installation.</p>
<p class="docText1"><a name="Luke Ehresman" class="calibre8" id="Luke Ehresman"/>Nathan and Luke Ehresman wrote SquirrelMail in 1999. They were active developers on the project until mid-2001. SquirrelMail is currently maintained by a group of 12 programmers who continue development with an eye toward web standards and simplicity.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="resources-id28" class="calibre8" id="resources-id28"/>
<h3 class="docSection1Title" id="-100000">29.2. RESOURCES</h3>
<p class="docText1"><span class="b"><a name="SquirrelMail Documentation" class="calibre8" id="SquirrelMail Documentation"/>SquirrelMail Documentation</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://www.squirrelmail.org/wiki/SquirrelMail">http://www.squirrelmail.org/wiki/SquirrelMail</a></p>
<p class="docText1"><span class="b">SquirrelMail on SourceForge.net</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://sourceforge.net/projects/squirrelmail">http://sourceforge.net/projects/squirrelmail</a></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="required-id28" class="calibre8" id="required-id28"/>
<h3 class="docSection1Title" id="-100000">29.3. REQUIRED</h3>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/><a name="FreeBSD " class="calibre8" id="FreeBSD "/> FreeBSD 7.0-RELEASE (see "<a class="calibre2" href="freebsd_7.0_split_000.html#freebsd_7.0">FreeBSD 7.0</a>")</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/><a name="collection " class="calibre8" id="collection "/> Updated ports collection (see "<a class="calibre2" href="freebsd_ports_collection.html#freebsd_ports_collection">FreeBSD Ports Collection</a>")</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/> Apache HTTP server (see "<a class="calibre2" href="apache_http_server_2.2.8_split_000.html#apache_http_server_2.2.8">Apache HTTP Server 2.2.8</a>")</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/> PHP 5 (see "<a class="calibre2" href="php_5.2.5.html#php_5.2.5">PHP 5.2.5</a>")</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/> Postfix SMTP server (see "<a class="calibre2" href="postfix_smtp_server_2.5.1.html#postfix_smtp_server_2.5.1">Postfix SMTP Server 2.5.1</a>")</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/> Courier-IMAP (see "Courier-IMAP Server 4.3.0" on page 43)</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/> Internet connection</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="optional-id16" class="calibre8" id="optional-id16"/>
<h3 class="docSection1Title" id="-100000">29.4. OPTIONAL</h3>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/><a name="OpenSSL with" class="calibre8" id="OpenSSL with"/> OpenSSL with a signed SSL Certificate, if you wish to enable secure HTTP connections (see "<a class="calibre2" href="openssl_0.9.8g.html#openssl_0.9.8g">OpenSSL 0.9.8g</a>")</p>
<p class="docText1"><img border="0" id="" src="N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg" alt="" class="calibre33"/><a name="Addressbook lookups" class="calibre8" id="Addressbook lookups"/> OpenLDAP for Addressbook lookups (see "<a class="calibre2" href="openldap_server_2.3.38.html#openldap_server_2.3.38">OpenLDAP Server 2.3.38</a>")</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="preparation-id28" class="calibre8" id="preparation-id28"/>
<h3 class="docSection1Title" id="-100000">29.5. PREPARATION</h3>
<p class="docText1"><a name="Become the" class="calibre8" id="Become the"/>Become the superuser.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="install-id28" class="calibre8" id="install-id28"/>
<h3 class="docSection1Title" id="-100000">29.6. INSTALL</h3>
<p class="docText1"><a name="To begin" class="calibre8" id="To begin"/>To begin the SquirrelMail installation process, enter the following commands:<a name="IDX-CHP-29-0451" class="calibre8" id="IDX-CHP-29-0451"/></p>
<pre class="calibre30"># <b class="calibre28">cd /usr/ports/mail/squirrelmail</b>
# <b class="calibre28">make config ; make install clean</b></pre>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="configure-id28" class="calibre8" id="configure-id28"/>
<h3 class="docSection1Title" id="-100000">29.7. CONFIGURE</h3>
<p class="docText1"><a name="Once installation" class="calibre8" id="Once installation"/>Once installation is complete, it's time to configure SquirrelMail for use on your system.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="a default" class="calibre8" id="a default"/>PHP has a default file upload limit of 2MB, which effectively limits the size of your email attachments to 2MB. To increase this size limit, you will need to modify the <span class="docEmphasis1">php.ini</span> file in the <span class="docEmphasis1">/usr/local/etc</span><a name="your needs" class="calibre8" id="your needs"/> directory as follows. (If 2MB is sufficient for your needs, skip to step 2. See <a class="calibre2" target="_blank" href="http://www.squirrelmail.org/wiki/AttachmentSize">http://www.squirrelmail.org/wiki/AttachmentSize</a><a name="details on" class="calibre8" id="details on"/> for more details on raising attachment size limits.)</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/php.ini</b></pre>
<p class="docText1"><a name="the" class="calibre8" id="the"/>Scroll down to the <tt class="calibre20">upload_max_filesize</tt> declaration (~606) and change the default of <tt class="calibre20">2M</tt> to <tt class="calibre20">8M</tt>. The line should now appear as follows:</p><pre class="calibre30">upload_max_filesize = 8M</pre><br class="calibre1"/>
<p class="docText1">Save and exit.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Invoke the SquirrelMail configuration utility:</p><pre class="calibre30"># <b class="calibre28">cd /usr/local/www/squirrelmail</b>
# <b class="calibre28">./configure</b></pre><br class="calibre1"/>
<p class="docText1">Ensure the following configuration options are set correctly:</p><pre class="calibre30">[2] Server Settings
    [1] Domain</pre><br class="calibre1"/>
<p class="docText1">At the prompt, replace <a class="calibre2" target="_blank" href="http://example.com">example.com</a> with your domain name.</p><pre class="calibre30">[2] Server Settings
    [A] Update IMAP Settings
        [8] Server Software</pre><br class="calibre1"/>
<p class="docText1">At the prompt, replace <tt class="calibre20"><i class="docEmphasis1">other</i></tt> with <tt class="calibre20">courier</tt>.</p><p class="docText1">Type <span class="b">Q</span> and then press [enter] to quit. Enter <span class="b">Y</span> when prompted to save your data.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="correct location" class="calibre8" id="correct location"/>Create a SquirrelMail-specific Apache configuration file. This file points Apache to the correct location of the SquirrelMail files and makes administration easier by keeping SquirrelMail-specific options separate from the main <span class="docEmphasis1">httpd.conf</span> file. By default, Apache searches the <span class="docEmphasis1">/usr/local/etc/apache22/Includes</span><a name="create one" class="calibre8" id="create one"/> directory for configuration files. Here's how to create one for SquirrelMail:</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/apache22/Includes/squirrelmail.conf</b></pre><br class="calibre1"/>
<p class="docText1">Add the following lines:</p><pre class="calibre30">Alias /<tt class="calibre20"><i class="docEmphasis1">squirrelmail</i></tt> "/usr/local/www/squirrelmail/"

&lt;Directory "/usr/local/www/squirrelmail/"&gt;
Options None
AllowOverride None
Order allow,deny
Allow from all
&lt;/Directory&gt;</pre><br class="calibre1"/>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> By default, SquirrelMail is set up as a subdirectory of your web server's root site, meaning that you would enter <a class="calibre2" target="_blank" href="http://host.example.com/squirrelmail">http://host.example.com/squirrelmail</a> into your web browser. To change this default directory, replace <tt class="calibre20">squirrelmail</tt> (in italics above) with a different name.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1">Save and exit. Restart Apache to commit the changes:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/apache22 restart</b></pre><br class="calibre1"/>
</div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="testing-id19" class="calibre8" id="testing-id19"/>
<h3 class="docSection1Title" id="-100000">29.8. TESTING</h3>
<p class="docText1"><a name="In this" class="calibre8" id="In this"/>In this section, we'll test SquirrelMail's configuration.<a name="IDX-CHP-29-0452" class="calibre8" id="IDX-CHP-29-0452"/></p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="your SquirrelMail" class="calibre8" id="your SquirrelMail"/>To test your SquirrelMail configuration, point a web browser to the following address: <a class="calibre2" target="_blank" href="http://host.example.com/squirrelmail/src/configtest.php">http://host.example.com/squirrelmail/src/configtest.php</a>.</p><p class="docText1"><a name="directory if" class="calibre8" id="directory if"/>Substitute your domain name and directory if applicable.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="output for" class="calibre8" id="output for"/>Examine the output for errors. If all went well, you should have a congratulations message at the bottom.</p><p class="docText1"><a name="be able" class="calibre8" id="be able"/>You should now be able to log in to SquirrelMail by clicking the link or entering <a class="calibre2" target="_blank" href="http://host.example.comsquirrelmail">http://host.example.comsquirrelmail</a> into your web browser (again substituting your server's hostname and directory).</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="config_files-id28" class="calibre8" id="config_files-id28"/>
<h3 class="docSection1Title" id="-100000">29.9. CONFIG FILES</h3>
<p class="docText1"><span class="b">/usr/local/www/squirrelmail/configure</span></p>
<p class="docText1"><a name="This interactive" class="calibre8" id="This interactive"/>This interactive Perl script configures SquirrelMail options with menus.<a name="IDX-CHP-29-0453" class="calibre8" id="IDX-CHP-29-0453"/></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="log_files-id16" class="calibre8" id="log_files-id16"/>
<h3 class="docSection1Title" id="-100000">29.10. LOG FILES</h3>
<p class="docText1"><span class="b">/var/log/maillog</span><a name="IDX-CHP-29-0454" class="calibre8" id="IDX-CHP-29-0454"/></p>
<p class="docText1"><a name="General log" class="calibre8" id="General log"/>General log of email activity</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="notes-id22" class="calibre8" id="notes-id22"/>
<h3 class="docSection1Title" id="-100000">29.11. NOTES</h3>
<ul class="calibre15"><li class="calibre16"><p class="docText1"><span class="b">SSL</span><a name="In order" class="calibre8" id="In order"/> In order to protect your users' privacy, it is best to secure all communications by allowing only HTTPS connections to SquirrelMail.</p><p class="docText1"><a name="configuration to" class="calibre8" id="configuration to"/>We'll reconstruct our SquirrelMail-specific configuration to accommodate this. Open the existing file:</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/apache22/Includes/squirrelmail.conf</b></pre>
<p class="docText1">Modify the file to read:</p><pre class="calibre30">Alias /<tt class="calibre20"><i class="docEmphasis1">squirrelmail</i></tt> "/usr/local/www/squirrelmail/"

&lt;Directory "/usr/local/www/squirrelmail/"&gt;
Options None
AllowOverride None
Order Allow,Deny
Allow from All
&lt;/Directory&gt;

&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} /<tt class="calibre20"><i class="docEmphasis1">squirrelmail</i></tt>
RewriteRule (.*) https://<tt class="calibre20"><i class="docEmphasis1">host.example.com</i></tt>/<tt class="calibre20"><i class="docEmphasis1">squirrelmail</i></tt>/ [R]
&lt;/IfModule&gt;</pre><br class="calibre1"/>
<p class="docText1"><a name="then save" class="calibre8" id="then save"/>Make the appropriate substitutions and then save, exit, and restart Apache:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/apache22 restart</b></pre><br class="calibre1"/>
</li><li class="calibre16"><p class="docText1"><span class="b">LDAP</span><a name="enable LDAP" class="calibre8" id="enable LDAP"/> You can enable LDAP email address lookups in SquirrelMail if you have a functional LDAP server running.</p><p class="docText1"><a name="the php" class="calibre8" id="the php"/>Ensure you have the php5-ldap shared extension installed using this command:</p><pre class="calibre30"># <b class="calibre28">pkg_info | grep php5-ldap</b></pre><br class="calibre1"/>
<p class="docText1">If you don't get any results, rebuild SquirrelMail:</p><pre class="calibre30"># <b class="calibre28">cd /usr/ports/mail/squirrelmail</b>
# <b class="calibre28">make deinstall</b>
# <b class="calibre28">make -D WITH_LDAP install clean</b></pre><br class="calibre1"/>
<p class="docText1">To set up LDAP lookups:</p><pre class="calibre30"># <b class="calibre28">cd /usr/local/www/squirrelmail</b>
# <b class="calibre28">./configure</b>

[6] Address Books
    [1] Change LDAP Servers</pre><br class="calibre1"/>
<p class="docText1"><a name="the same" class="calibre8" id="the same"/>These settings should work if you're running an LDAP server on the same system. If you're not, make the appropriate substitutions.</p><pre class="calibre30">[ldap] command (?=help) &gt; <b class="calibre28">+</b>
hostname: <b class="calibre28">localhost</b>
base: <b class="calibre28">ou=People,dc=</b><span class="docEmphBoldItalic">example</span><b class="calibre28">,dc=</b><span class="docEmphBoldItalic">com</span>
port: press [enter]
charset: press [enter]
name: <b class="calibre28">LDAP:</b> <span class="docEmphBoldItalic">example.com</span>
maxrows: press [enter]
binddn: press [enter]
protocol: <b class="calibre28">3</b>
[ldap] command (?=help) &gt; <b class="calibre28">d</b></pre><br class="calibre1"/>
<p class="docText1">Type <span class="b">Q</span> and then [enter] to quit. Enter <span class="b">Y</span> when prompted to save data.</p><p class="docText1"><a name="click the" class="calibre8" id="click the"/>To perform LDAP lookups in SquirrelMail, click the Compose link and then click the <span class="b">Addresses</span><a name="LDAP records" class="calibre8" id="LDAP records"/> button (not the link) in the Compose window to search or display LDAP records. The Addresses link takes you to your personal address book and is independent of the LDAP directory.</p></li></ul>
</div></div>

</body></html>