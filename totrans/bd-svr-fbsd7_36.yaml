- en: Chapter 14\. MYSQL SERVER 5.0.51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://WWW.MYSQL.COM](HTTP://WWW.MYSQL.COM)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 14.1\. SUMMARY
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: MySQL is an open source SQL (Structured Query Language) database management
    system. SQL is the most popular computer language used to interface with relational
    database management systems. A relational database management system (RDBMS) generally
    stores data and their relationships in a table using rows and columns. To be considered
    an RDBMS, the data must also be editable in this format.
  prefs: []
  type: TYPE_NORMAL
- en: MySQL is commonly paired with PHP to create dynamic websites. Some examples
    include WordPress (personal weblog software), MediaWiki (the foundation of Wikipedia),
    and phpBB (a web-based bulletin board system).
  prefs: []
  type: TYPE_NORMAL
- en: MySQL is the most widely deployed open source database in the world, with an
    estimated 11 million installations. According to a July 2004 report in the SD
    Times, MySQL ranked third (with 33 percent market share) behind commercial giants
    Oracle and Microsoft's SQL Server.^([[]](#CHP-14-1))
  prefs: []
  type: TYPE_NORMAL
- en: ^([]) "Relational Databases Rule the Roost," SD Times (2004), [http://www.sdtimes.com/content/article.aspx?ArticleID=27991](http://www.sdtimes.com/content/article.aspx?ArticleID=27991).
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Michael Widenius and David Axmark wrote MySQL in 1995\. Along with Allan Larsson,
    they are the co-founders of MySQL AB. The company sells support contracts and
    services for MySQL. Commercial licenses for MySQL are sold for applications that
    don't fall under the GNU GPL.
  prefs: []
  type: TYPE_NORMAL
- en: 14.2\. RESOURCES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: MySQL Reference Manual
  prefs: []
  type: TYPE_NORMAL
- en: '[http://dev.mysql.com/doc/refman/5.0/en](http://dev.mysql.com/doc/refman/5.0/en)'
  prefs: []
  type: TYPE_NORMAL
- en: 14.3\. REQUIRED
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  prefs: []
  type: TYPE_IMG
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  prefs: []
  type: TYPE_IMG
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Internet
    connection'
  prefs: []
  type: TYPE_NORMAL
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Registered
    domain name'
  prefs: []
  type: TYPE_NORMAL
- en: 14.4\. PREPARATION
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Become the superuser.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Make sure your server''s hostname is locally resolvable. This should already
    be the case if you are running your own DNS server and have it configured properly.
    If you aren''t running your own DNS server, then make sure you have an entry in
    your /etc/hosts file that points to your server''s IP address. Open the hosts
    file in a text editor:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Your hosts file (~14) should look like this (replace [example.com](http://example.com)
    with your domain name, [host.example.com](http://host.example.com) with your hostname,
    and `*192.168.1.11*` with your IP address):'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 14.5\. INSTALL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Enter the following commands to begin installing MySQL Server:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 14.6\. CONFIGURE
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the installation process is complete, it's time to configure MySQL for
    use on your system.
  prefs: []
  type: TYPE_NORMAL
- en: 'Run the script mysql_install_db to set up the grant tables needed by MySQL.
    Grant tables store information about MySQL user permissions and other security
    settings. Use this command to run the script:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'The following commands will start the MySQL daemon and set up the MySQL root
    password (replace `*localpassword*` and `*remotepassword*` with your own passwords
    and [host.example.com](http://host.example.com) with your hostname):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** The single quotes around `localpassword` and `remotepassword` are
    required. The remote password is used to log in to the MySQL server from a different
    computer. By default, MySQL encrypts the login information sent over TCP connections.
    Queries to and from the database after authentication are transmitted "in the
    clear."'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'MySQL includes a set of four sample configuration files located in the /usr/local/share/mysql
    directory. Each of these option files is tailored to a specific system configuration
    as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: For systems with up to 64MB of RAM
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: For systems with up to 128MB of RAM (ideal for web servers)
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: For systems with 512MB of RAM (dedicated MySQL servers)
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: For systems with 1 to 2GB of RAM (datacenters, etc.)
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Decide which option file suits your system''s needs, and then copy it to the
    /var/db/mysql directory as my.cnf. For example, if you decided to use my-medium.cnf
    as your configuration file, you would enter:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 14.6.1\. Disabling MySQL TCP Networking
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: If you intend to use MySQL solely for web-based PHP applications, disabling
    TCP networking can make your MySQL installation a bit more secure.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** This only applies if your web server and MySQL database are operating
    on the same computer.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'To disable MySQL TCP networking, modify the my.cnf configuration file in the
    /var/db/mysql directory:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down and uncomment (remove the preceding hash mark) line 45 (approximately)
    to appear as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Save and exit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: More information on the my.cnf option file can be found at [http://dev.mysql.com/doc/refman/5.0/en/option-files.html](http://dev.mysql.com/doc/refman/5.0/en/option-files.html).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 14.7\. TESTING
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this section, we'll perform a basic test to confirm that MySQL functions
    properly.
  prefs: []
  type: TYPE_NORMAL
- en: 'Configure MySQL to start automatically at system startup. Open the etc/rc.conf
    file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'and add the following line:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Save and exit.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'To commit changes that were made in the configuration section above, restart
    MySQL:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Issue the following query to display the existing databases on the server:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'If the MySQL server is working properly, you should see the following output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: If you get an error about the inability to connect, check the error log in /var/db/mysql
    for error messages. The error log will be named [host.example.com.err](http://host.example.com.err)
    (with your hostname).
  prefs: []
  type: TYPE_NORMAL
- en: 'Also, check that the permissions of your /tmp directory are correct. The permissions
    can be displayed by typing:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'Permissions for the /tmp directory should be set as shown in italics in the
    sample output line. If your permissions or ownership are different, the superuser
    can correct them with the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 14.8\. BASICS
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This section covers some basic commands for creating, deleting, and adding users
    to databases with MySQL. To access these commands, log in to the MySQL monitor
    as root. MySQL monitor is a command-line shell used to administer MySQL. You will
    be prompted to enter the localhost MySQL root password you created in step 2 of
    "[Configure](configure-id13.html#configure-id13)".
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'To exit MySQL monitor, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 14.8.1\. Show Databases
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To show a list of databases in MySQL, use the following command at the MySQL
    prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** The semicolon is an important part of MySQL''s command line syntax;
    it signifies the end of a statement.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.2\. Create a Database
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Use the following command to create a new database named testing (substitute
    a name of your choice):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 14.8.3\. Add a User to a Database
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: When you add a user to a database, you can give him full rights, read-only rights,
    or custom rights.
  prefs: []
  type: TYPE_NORMAL
- en: Full Rights
  prefs: []
  type: TYPE_NORMAL
- en: 'To add a user and allow full rights to a specific database, use the following
    command at the MySQL prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*database*` with the database name, `*user*` with the username, and
    `*password*` with the password for this user. If you need this database to be
    accessible externally (using TCP), replace `*localhost*` with your server's hostname
    (for locally hosted web-based PHP applications, use `localhost`).
  prefs: []
  type: TYPE_NORMAL
- en: Read-Only Rights
  prefs: []
  type: TYPE_NORMAL
- en: 'To add a user with read-only access rights, use the following command at the
    MySQL prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*database*` with the database name, `*user*` with the username, and
    `*password*` with the password for this user. If you need this database to be
    accessible externally (using TCP), replace `*localhost*` with your server's hostname
    (for locally hosted web-based PHP applications, use `localhost`).
  prefs: []
  type: TYPE_NORMAL
- en: Custom Rights
  prefs: []
  type: TYPE_NORMAL
- en: 'To add a user with custom access rights, use the following command at the MySQL
    prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: 'Replace `*options*` with any or all of the following: `select`, `insert`, `update`,
    `delete`, `create`, or `drop` (separate multiple items with commas). Replace `*database*`
    with the database name, `*user*` with the username, and `*password*` with the
    password for this user. If you need this database to be accessible externally
    (using TCP), replace `*localhost*` with your server''s hostname (for locally hosted
    web-based PHP applications, use `localhost`).'
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.4\. Remove a User from a Database
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To remove all privileges to a database for a particular user, use the following
    command at the MySQL prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*database*` with the database name and `*user*` with the username whose
    privileges you wish to revoke.
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.5\. Remove a User from MySQL
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To remove a user from MySQL completely, use the following commands at the MySQL
    prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*user*` with the username of the user you wish to remove from MySQL.
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.6\. Delete a Database
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To delete a database named testing from MySQL, use the following command at
    the MySQL prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*testing*` with the name of the database you wish to delete.
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.7\. Show User Privileges
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To show all of the privileges for a particular user, use the following command
    at the MySQL prompt:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*user*` with the username you wish to view the privileges for.
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.8\. Back Up All Databases
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To back up all MySQL databases, use the following command (you will be prompted
    for your localhost root password):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: Substitute the path and filename of the backup file.
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.9\. Back Up a Single Database
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To back up a particular MySQL database, use the following command (you will
    be prompted for your localhost root password):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*dbname*` with the database name and substitute the path and filename
    of the backup file.
  prefs: []
  type: TYPE_NORMAL
- en: 14.8.10\. Restore a Database
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To restore a MySQL database, use the following command (you will be prompted
    for your localhost root password):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: Replace `*dbname*` with the name of the database you wish to restore and substitute
    the path and filename of the backup file to import.
  prefs: []
  type: TYPE_NORMAL
- en: 14.9\. CONFIG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /var/db/mysql/my.cnf
  prefs: []
  type: TYPE_NORMAL
- en: The MySQL configuration file used to specify MySQL options
  prefs: []
  type: TYPE_NORMAL
- en: 14.10\. LOG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[/var/db/mysql/host.example.com.err](http:///var/db/mysql/host.example.com.err)'
  prefs: []
  type: TYPE_NORMAL
- en: Contains MySQL server status messages, errors, and so on
  prefs: []
  type: TYPE_NORMAL
- en: 14.11\. NOTES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: A popular administration tool called phpMyAdmin utilizes PHP to create a web
    interface to handle administration of MySQL. See "[phpMyAdmin 2.11.5](phpmyadmin_2.11.5.html#phpmyadmin_2.11.5)"
    for more details.
  prefs: []
  type: TYPE_NORMAL
