- en: 'Chapter 20. Tutorial: Creating an Animation'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: From the start, SVG was designed as a language for both static and animated
    vector graphics. At one time dubbed “a Flash killer,” it is indeed suitable for
    a wide variety of scripted and declarative animations. Unfortunately, even several
    years after the introduction of SVG, real SVG animations (as opposed to static
    SVG) are hard to find on the Web. There are several reasons for this, the most
    important being the lack of a single standard player that would offer a significant
    competitive advantage over Adobe’s (formerly Macromedia’s) Flash. Currently, almost
    all of the animations on the Web are either in Flash or in animated GIF formats—just
    as they were five years ago.
  prefs: []
  type: TYPE_NORMAL
- en: From Inkscape’s perspective, however, this may be a good thing. Inkscape does
    not yet support creating animated SVG documents (except if you add animation attributes
    manually via XML Editor) and can only display SVG documents statically. But you
    still can use Inkscape to create static frames and then combine them into a GIF
    or Flash animation with some other software. This method may seem awkward at first,
    but it is in fact workable and may deliver very good results. Why is this worth
    the trouble, and what kinds of animations are best suited for this technique?
  prefs: []
  type: TYPE_NORMAL
- en: Any animation including complex natural or interacting movements is perhaps
    out of reach for the Inkscape-based animation technique described in this tutorial.
    Without a timeline control, it’s difficult to work on anything but simple repeating
    animations several frames long. But then, many animations for the Web—banners,
    headings, blog avatars—fit this description perfectly.
  prefs: []
  type: TYPE_NORMAL
- en: 20.1 Creating the Template
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The most natural way to represent animation frames in Inkscape is by putting
    them on separate layers (**[4.6 Layers](ch04s06.html "4.6 Layers")**). You can
    easily toggle visibility of each layer to see how your frames stack up and control
    what changes from one frame to the next. However, creating many layers manually
    (**Layer** ▸ **Add Layer**) is very tedious. I wrote a simple Python script that
    creates a 200-by-200 px document with 100 empty layers:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'All layers are created hidden (that’s what `display="none"` is for), so in
    Inkscape, you will need to unhide them one by one (**[4.6.3 The Current Layer
    Indicator](ch04s06.html#fourdot6dot3_the_current_layer_indicator "4.6.3 The Current
    Layer Indicator")**) to draw on them. You can vary the number of layers created
    by the script (`range(100)`) as well as the dimensions of the artboard (`width="200"
    height="200"`). Save the script into the file *generate-layers.py* and, in a command-line
    (or “terminal”) window of your OS, run it and capture its output to an SVG file.
    (You will need the Python language interpreter to be installed on your computer;
    you can get it at *[http://python.org](http://python.org)*.) Then, run Inkscape
    on this file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'You can also put the resulting file (*ani.svg*) into your *~/.inkscape/templates*
    folder where it will work as a template, so the next time you will be able to
    create an empty 100-layer file by choosing it from the **File** ▸ **New** list.
    Here is Inkscape’s **Layers** dialog (**[4.6.4 The Layers Dialog](ch04s06.html#fourdot6dot4_the_layers_dialog
    "4.6.4 The Layers Dialog")**) which is essential for working with such a multilayer
    file:'
  prefs: []
  type: TYPE_NORMAL
- en: '![A 100-layer animation template loaded into Inkscape](httpatomoreillycomsourcenostarchimages1736404.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-1. A 100-layer animation template loaded into Inkscape
  prefs: []
  type: TYPE_NORMAL
- en: 20.2 First Frames
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let’s make an animation of a dancing man—something catchy yet simple enough
    to not require much drawing skill and to fit the small format of the animation
    (and this brief tutorial). Our hero’s claim to fame will be in his movements,
    so we don’t need to make his countenance too sophisticated. Something as primitive
    as this stick figure will do:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The stick figure we’re starting with, showing its nodes in the Node tool](httpatomoreillycomsourcenostarchimages1736406.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-2. The stick figure we’re starting with, showing its nodes in the
    Node tool
  prefs: []
  type: TYPE_NORMAL
- en: It is made of three simple paths (hands, legs, and body) and one ellipse (head).
    Use the Pen tool (**[14.1 The Pen Tool](ch14s01.html "14.1 The Pen Tool")**) with
    ![](httpatomoreillycomsourcenostarchimages1735328.png.jpg) to draw horizontal/vertical
    straight lines; then use the Ellipse tool (**[11.4 Ellipses](ch11s04.html "11.4
    Ellipses")**) to create the head. Then, to facilitate interpolation, do **Path**
    ▸ **Combine** on the body and limbs so they become one path, and use ![](httpatomoreillycomsourcenostarchimages1735556.png.jpg)-click
    in the Node tool (**[12.5.3 Deleting and Creating Nodes](ch12s05.html#one2dot5dot3_deleting_and_creating_nodes
    "12.5.3 Deleting and Creating Nodes")**) to add nodes in his elbow and knee joints.
  prefs: []
  type: TYPE_NORMAL
- en: 20.3 Tweening
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now make a copy of the character by duplicating it (![](httpatomoreillycomsourcenostarchimages1735374.png.jpg)
    with both head and body selected), move it to the right and play with its nodes
    (in the Node tool) to give our man a funky dancing pose. We thus get two *keyframes*,
    and the entire animation could be as simple as alternating between them.
  prefs: []
  type: TYPE_NORMAL
- en: '![Two keyframes](httpatomoreillycomsourcenostarchimages1736408.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-3. Two keyframes
  prefs: []
  type: TYPE_NORMAL
- en: 'However, it would be much better to add intermediate frames to make the transition
    between the keyframes smoother. Animators call this *tweening* (derived from *between*),
    and Inkscape can to some extent automate this process: Select both bodies (i.e.,
    two path objects) and do **Extensions** ▸ **Generate from Path** ▸ **Interpolate**.
    Specify the number of **Interpolation steps** (say, 4), select **Interpolation
    method 1**, and, if desired, use a nonzero **Exponent** value to make the movement
    speed up or slow down nonlinearly. Then, the head ellipses can be placed over
    the tweened bodies by another interpolation using the same number of steps and
    the same **Exponent** ([Figure 20-4](ch20s03.html#interpolating_the_keyframes
    "Figure 20-4. Interpolating the keyframes")).'
  prefs: []
  type: TYPE_NORMAL
- en: If the tweening steps don’t look right to you, you can undo the interpolation,
    tweak the keyframes, and reinterpolate until you get what you like. **Interpolation
    method 1** (**[13.3 Path Extensions](ch13s03.html "13.3 Path Extensions")**) matches
    the nodes that are at the same position along the path, so it is preferable when
    one of the keyframe paths was created by tweaking the other one without adding
    or removing nodes (as in our case). If two paths are of different origin and have
    incompatible nodes, **method 2** is better.
  prefs: []
  type: TYPE_NORMAL
- en: '![Interpolating the keyframes](httpatomoreillycomsourcenostarchimages1736410.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-4. Interpolating the keyframes
  prefs: []
  type: TYPE_NORMAL
- en: 20.4 Compositing and Creating Frames
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now it’s time to place our animation on its proper place on the canvas and
    distribute the frames across layers. Remove the tweening once again and place
    the second keyframe right over the first. (Note that the dancer’s right foot coincides
    in both keyframes because it rests on the floor.) Select both overlapping figures
    and place them onto the canvas, scaling them if necessary and taking into account
    whatever other elements you plan to add (such as a text heading). Finally, interpolate
    the bodies and the heads again—right in place:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Interpolating in place](httpatomoreillycomsourcenostarchimages1736412.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-5. Interpolating in place
  prefs: []
  type: TYPE_NORMAL
- en: 'The next task to do in Inkscape is a bit boring (it may be automated in future
    versions). You need to ungroup the group of the interpolation paths and manually
    place each one on its layer from 002 to 005, with the keyframes occupying layers
    001 and 006\. Then, duplicate the frames in the reverse order: Frames 005 to 001
    go into the range 007 to 011, to make the dancer smoothly return into the original
    position.'
  prefs: []
  type: TYPE_NORMAL
- en: Use ![](httpatomoreillycomsourcenostarchimages1735516.png.jpg) and ![](httpatomoreillycomsourcenostarchimages1735518.png.jpg)
    to move the selected objects one layer up/down, and watch the status bar that
    tells you in which layer your selected objects are. Alternatively, you can cut
    (![](httpatomoreillycomsourcenostarchimages1735496.png.jpg)) an object, switch
    to the destination layer, and paste it in place (![](httpatomoreillycomsourcenostarchimages1735500.png.jpg)).
    Finally, make sure all the layers you’ve used are visible, and save the SVG file.
  prefs: []
  type: TYPE_NORMAL
- en: 20.5 Export and Production
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You can export the layers manually, but that would be rather frustrating—especially
    since you may need to do it more than once after viewing the result and making
    changes to the source. Since Inkscape offers a powerful set of command-line parameters,
    I wrote another Python script to automate the export. The script takes as parameters
    the name of source file, the numbers of the start and end layers to export, and
    the name of the resulting GIF; it then calls Inkscape to export each layer separately.
    After exporting, this script calls the convert utility from ImageMagick for combining
    the frames into an animated GIF file which can then be viewed in any graphic web
    browser.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Save it as *produce-gif.py* and run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Our output so far can be viewed online at *[http://www.kirsanov.com/inkscape-animation/stick.gif](http://www.kirsanov.com/inkscape-animation/stick.gif)*.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Instead of the convert utility from ImageMagick, you can use the open source
    Gifsicle program* ([http://www.lcdf.org/gifsicle](http://www.lcdf.org/gifsicle))
    *for composing frames into an animated GIF file. Its advantage is that it can
    optimize the animation, reducing its file size.*'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*If you want your animation to be in Flash format instead of an animated GIF,
    a straightforward way to do it is to convert your SVG to static SWF frames (for
    example, using the svg2swf utility,* [http://robla.net/1996/svg2swf](http://robla.net/1996/svg2swf)*)
    and then combine the frames into an animation, for which I recommend the SWF Tools
    package* ([http://swftools.org](http://swftools.org)). *The resulting SWF file
    will not be very efficient but it will work.*'
  prefs: []
  type: TYPE_NORMAL
- en: 20.6 Hatching
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Our stick-figure animation looks at most mildly engaging. This smooth, vectory
    style is good for technical animations, such as demonstrating the workings of
    a machine, but is not too inspiring for an animated dance. Can we do something
    about it?
  prefs: []
  type: TYPE_NORMAL
- en: Hide all layers except `001`, select the figure and lower its opacity. Then
    arm yourself with the Calligraphic pen (**[14.3 The Calligraphic Pen Tool](ch14s03.html
    "14.3 The Calligraphic Pen Tool")**), select the **Width** of 20 with **Tremor**
    of 40, and draw over the stick figure trying to make it more random, funky, personalized.
    While at it, you can also add more pronounced feet and fists and more human-like
    body forms in general.
  prefs: []
  type: TYPE_NORMAL
- en: '![Hatching with Calligraphic pen](httpatomoreillycomsourcenostarchimages1736414.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-6. Hatching with Calligraphic pen
  prefs: []
  type: TYPE_NORMAL
- en: When done, delete the original skeleton figure—it’s served its function of a
    blueprint and is no longer needed. The result is not bad, but it looks a bit foreign
    in its roughness upon the immaculate white background. To fix this, reduce the
    width of the pen to 1 and add some thin random strokes around the dancer, hinting
    at his limbs’ motion and shadows on the floor. Don’t worry if this looks *too*
    random to your taste—when you’ll see him move, this randomness will come live
    and natural.
  prefs: []
  type: TYPE_NORMAL
- en: '![Skeleton removed, motion noise added](httpatomoreillycomsourcenostarchimages1736416.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-7. Skeleton removed, motion noise added
  prefs: []
  type: TYPE_NORMAL
- en: The main rule in this kind of the project is, *Don’t copy*. Freehand roughness
    cannot be recycled; no matter how similar is one frame to another, you need to
    sketch each frame entirely from scratch, using nothing but the stick figure as
    your guide. Duplicating the freehand strokes (even if you move or scale them)
    will instantly kill the rough, natural feel and make your animation wooden and
    dull. Don’t be lazy; the more you draw the easier it gets.
  prefs: []
  type: TYPE_NORMAL
- en: 'And the result is certainly worth the labor: See *[http://www.kirsanov.com/inkscape-animation/rough.gif](http://www.kirsanov.com/inkscape-animation/rough.gif)*
    for the complete hand-drawn animation. Much more inspiring than the interpolated
    stick figure!'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Using the same technique, you can manually trace with Calligraphic pen over
    any imported bitmap. Make the bitmap half-transparent and sketch on top of it,
    trying to highlight the most important features and ignore the rest. In an animation,
    the source bitmaps might be frames of a video, still photos, or rendered 3D images.*'
  prefs: []
  type: TYPE_NORMAL
- en: If necessary, you can move your entire animation—for example, to free up space
    for a heading above it—by unhiding all layers, selecting the whole bunch of shapes,
    and moving/transforming them as needed on the canvas.
  prefs: []
  type: TYPE_NORMAL
- en: 20.7 Text
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now, let’s add a textual banner to our animation—just a single word, “dance!”.
    Can we do something more interesting than copying the same static text object
    into each frame?
  prefs: []
  type: TYPE_NORMAL
- en: 'Once again, we could use the Calligraphic pen to draw ruffled handwritten letters
    over some text object used as a guide, so that the entire animation is in a common
    style. However, for the purpose of demonstration, let’s try another approach:
    Make the text banner smoothly billowing as if on a flag. To distort the text,
    you can use the **Envelope Deformation** path effect (**[13.1.8 Envelope Deformation](ch13s01.html#one3dot1dot8_envelope_deformation
    "13.1.8 Envelope Deformation")**); however, it is probably faster to apply some
    node sculpting instead (**[12.5.7.2 Node Sculpting](ch12s05.html#one2dot5dot7dot2_node_sculpting
    "12.5.7.2 Node Sculpting")**).'
  prefs: []
  type: TYPE_NORMAL
- en: Create a text object using a nice-looking font, convert it to path (![](httpatomoreillycomsourcenostarchimages1735780.png.jpg)),
    ungroup (![](httpatomoreillycomsourcenostarchimages1735506.png.jpg)), union (![](httpatomoreillycomsourcenostarchimages1735892.png.jpg)),
    switch to the Node tool (![](httpatomoreillycomsourcenostarchimages1735782.png.jpg)),
    select all nodes (![](httpatomoreillycomsourcenostarchimages1735370.png.jpg)),
    and ![](httpatomoreillycomsourcenostarchimages1735550.png.jpg)-drag one of them.
    The entire shape will smoothly bend and stretch. If the lettershapes get too much
    distorted, undo the drag and press ![](httpatomoreillycomsourcenostarchimages1735734.png.jpg)
    a couple times, each time doubling the number of nodes—this usually helps make
    the path you’re sculpting behave more naturally.
  prefs: []
  type: TYPE_NORMAL
- en: '![Node sculpting on a text banner](httpatomoreillycomsourcenostarchimages1736418.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-8. Node sculpting on a text banner
  prefs: []
  type: TYPE_NORMAL
- en: Now make two copies of the text object, sculpt each one differently so they
    look like two shots of a banner floating in the wind, and interpolate between
    them. Then, just as we did for the dancer figure, distribute the interpolation
    steps into layers, placing them above the figure on the canvas ([Figure 20-9](ch20s07.html#interpolating_the_banner
    "Figure 20-9. Interpolating the banner")). Don’t worry about absolute precise
    placement; slight wobbling of the banner is not a problem (and will even add some
    character).
  prefs: []
  type: TYPE_NORMAL
- en: '![Interpolating the banner](httpatomoreillycomsourcenostarchimages1736420.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-9. Interpolating the banner
  prefs: []
  type: TYPE_NORMAL
- en: 'To see where to place each object relative to the previous layer, use the **Opacity**
    control on the **Layers** dialog to make the previous layer temporarily half-transparent.
    Compose the animated GIF again using the *produce-gif.py* script. The result so
    far can be seen at *[http://www.kirsanov.com/inkscape-animation/with-banner.gif](http://www.kirsanov.com/inkscape-animation/with-banner.gif)*;
    here are the frames 001 to 005:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Half of the animation’s frames (forward movement)](httpatomoreillycomsourcenostarchimages1736422.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 20-10. Half of the animation’s frames (forward movement)
  prefs: []
  type: TYPE_NORMAL
- en: 20.8 Background
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The only thing not to like about our animation is its total lack of color.
    You can fix this by adding a different colored background to each frame, for a
    real stroboscopic dancefloor effect. Choosing these random colors can be automated,
    too: Create a rectangle with an unset color and use the **Create Tiled Clones**
    dialog (**[16.6 Tiling Clones](ch16s06.html "16.6 Tiling Clones")**) to multiply
    it with some hue variation.'
  prefs: []
  type: TYPE_NORMAL
- en: Paint the “dance!” banner with a contrasting acid color, also varying from frame
    to frame. Finally, to make the dancing man stand out from the background, add
    an elliptic gradient “spotlight” behind him; randomly move, scale, and rotate
    the spotlight on each frame for an additional energizing effect. The very final
    version is at *[http://www.kirsanov.com/inkscape-animation/final.gif](http://www.kirsanov.com/inkscape-animation/final.gif)*.
    Enjoy!
  prefs: []
  type: TYPE_NORMAL
