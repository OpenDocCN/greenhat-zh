<html><head></head><body><div class="appendix" title="Appendix&#xA0;B.&#xA0;Installing MySQL for Ruby on Rails"><div class="titlepage"><div><div><h1 class="title"><a id="installing_mysql_for_ruby_on_rails"/>Appendix B. Installing MySQL for Ruby on Rails</h1></div></div></div><div class="informalfigure"><a id="image_no_caption-id30"/><div class="mediaobject"><a id="I_mediaobject_d1e25296"/><img src="httpatomoreillycomsourcenostarchimages860138.png.jpg" alt="image with no caption"/></div></div><p>If you are working with Rails, you will need to install a database. Although quite a few choices are available to you, one of the most widely used is MySQL. If you’ve never used MySQL before, you may find some of the setup options confusing. Here, I’ll try to guide you through the process to avoid potential problems. The MySQL main site is at <a class="ulink" href="http://www.mysql.com/">http://www.mysql.com/</a>, where you can navigate to the download page for various versions.<a id="IDX-APP-B-0060" class="indexterm"/><a id="IDX-APP-B-0061" class="indexterm"/></p><div class="note" title="Note"><h3 class="title">Note</h3><p>This appendix is based on an installation of MySQL 5.0 under Windows. There may be differences when installing other versions on other operating systems. Refer to the MySQL site for additional guidance.</p></div><div class="sect1" title="Downloading MySQL"><div class="titlepage"><div><div><h1 class="title"><a id="downloading_mysql"/>Downloading MySQL</h1></div></div></div><p>I will assume you will be using the free edition of MySQL. This is available for download from <a class="ulink" href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>. The current version, at the time of writing, is MySQL 5 Community Server. The name and version number will, of course, change over time. Download whichever is the current (not an upcoming, alpha, or beta) release. Choose the specific version recommended for your operating system (there may be different versions for Win32 and Win64, for example).<a id="IDX-APP-B-0062" class="indexterm"/></p><p>You will need to locate the installer for your operating system. For Windows, you can download either the complete MySQL package or, if available, the smaller Windows Essentials package. The complete package contains extra tools for database developers, but these are not required for simple Rails development. For most people, therefore, the smaller Windows Essentials download file is the one to get. You may be asked to select a mirror site, and you may also be shown a questionnaire, which you can fill out if you want.</p></div></div>
<div class="sect1" title="Installing MySQL"><div class="titlepage"><div><div><h1 class="title"><a id="installing_mysql"/>Installing MySQL</h1></div></div></div><p>Once the download has completed, run the program by selecting <span class="strong"><strong>Open</strong></span> or <span class="strong"><strong>Run</strong></span> in the download dialog if this is still visible or by double-clicking the installation file via, for example, the Windows Explorer.</p><div class="note" title="Note"><h3 class="title">Note</h3><p>During the installation of MySQL, some advertising screens may appear. Click the buttons to move through the screens. Some security warnings may also prompt you to verify your intention to install the software. When prompted, you should click the necessary options to continue with the installation.</p></div><p>The first page of the Setup Wizard will now appear. Click the <span class="strong"><strong>Next</strong></span> button. You can either leave the Typical setup option selected if you are happy to install the software into the default MySQL directory—on Windows that’s beneath <span class="emphasis"><em>C:\Program Files\</em></span>. If you want to install to some other directory, however, select <span class="strong"><strong>Custom</strong></span>. Then click <span class="strong"><strong>Next</strong></span>. Click <span class="strong"><strong>Change</strong></span> to change the directory.</p><p>When you are ready to move on, click <span class="strong"><strong>Next</strong></span>.</p><p>You will see the screen stating “Ready To Install the Program.” Verify that the destination folder is correct, and then click the <span class="strong"><strong>Install</strong></span> button.</p><p>Depending on the version of MySQL, you may now be shown some promotional screens, or you may be prompted to create a new MySQL account, which will let you receive news of changes and updates. These are not an essential part of the software installation, and you can click the Next or Skip button to move on through the installation.</p><p>The Wizard Completed dialog now appears.</p><p>Click the <span class="strong"><strong>Finish</strong></span> button.</p></div>
<div class="sect1" title="Configuring MySQL"><div class="titlepage"><div><div><h1 class="title"><a id="configuring_mysql"/>Configuring MySQL</h1></div></div></div><p>In fact, this isn’t the end of the installation after all. With some installers, a new screen pops up welcoming you to the MySQL Server Instance Configuration Wizard. If this does not occur, you will need to load this yourself. On Windows, click the <span class="strong"><strong>Start</strong></span> menu, and then navigate through your program groups to <span class="strong"><strong>MySQL ▸ MySQL Server 5.0</strong></span> (or whichever version number you are using) ▸ <span class="strong"><strong>MySQL Server Instance Config Wizard</strong></span>. Click <span class="strong"><strong>Next</strong></span>.<a id="IDX-APP-B-0063" class="indexterm"/><a id="IDX-APP-B-0064" class="indexterm"/><a id="IDX-APP-B-0065" class="indexterm"/><a id="IDX-APP-B-0066" class="indexterm"/><a id="IDX-APP-B-0067" class="indexterm"/></p><p>Assuming that this is the first time you have installed MySQL on this machine, you can select <span class="strong"><strong>Standard Configuration</strong></span> (if you are upgrading from an older version of MySQL, you need to select Detailed Configuration, but that is beyond the scope of this simple setup guide). Click <span class="strong"><strong>Next</strong></span>. In the next dialog, leave the default options selected (that is, Install As Windows Service, Service Name = ‘MySQL’, and Launch the MySQL Server automatically). Then click <span class="strong"><strong>Next</strong></span>.</p><p>On the next screen, leave Modify Security Settings checked, and enter the same password (of your choice) into the first two text fields. You will need this password later, so remember it or write it down in a secure location. If you need to access MySQL from another computer, you can check “Enable root access from remote machines.” Then click <span class="strong"><strong>Next</strong></span>.</p><div class="note" title="Note"><h3 class="title">Note</h3><p>The default MySQL username is “root.” The password is the one you just entered. You will need both of these items of information later when creating Rails applications.</p></div><p>The next screen just gives you some information about the tasks that are about to be performed. Click the <span class="strong"><strong>Execute</strong></span> button.</p><p>If you have previously installed or configured MySQL, you may see an error message that tells you to skip the installation. You can click <span class="strong"><strong>Retry</strong></span> to see whether you can bypass this problem. If not, click <span class="strong"><strong>Skip</strong></span>, and then restart the MySQL configuration process, selecting Reconfigure Instance and Standard Instance when prompted.</p><p>When everything is installed, click <span class="strong"><strong>Finish</strong></span>.</p><p>And that’s it!</p></div>
<div class="sect1" title="Can&#x2019;t Find the Database?"><div class="titlepage"><div><div><h1 class="title"><a id="canat_find_the_database_question"/>Can’t Find the Database?</h1></div></div></div><p>When using MySQL with Rails, even following a successful installation of MySQL, Rails may display an error message similar to the following when you try to run your application:</p><a id="I_programlisting_d1e25467"/><pre class="programlisting">no such file to load -- mysql</pre><p>Some versions of Rails (Rails 2.2 and newer) require that the MySQL gem be installed as a separate operation. To do this, enter the following at the system prompt:</p><a id="I_programlisting_d1e25471"/><pre class="programlisting">gem install mysql</pre><p>Another problem may arise on Windows. When you run your application, it is possible that you will see an error message similar to this:<a id="IDX-APP-B-0068" class="indexterm"/></p><a id="I_programlisting_d1e25480"/><pre class="programlisting">The specified module could not be found.
c:/ruby/lib/ruby/gems/1.8/gems/mysql-2.7.3-x86-mswin32/ext/mysql.so</pre><p>If you encounter this problem, you should be able to fix it by making a copy of a file called <span class="emphasis"><em>libmySQL.dll</em></span> from your MySQL binary directory (for example, <span class="emphasis"><em>C:\Program Files\MySQL\MySQL Server 5.0\bin</em></span>) into the Ruby binary directory (for example, <span class="emphasis"><em>C:\ruby\bin</em></span>). Restart your application (shut down and restart the server), and then try running it again.</p></div></body></html>