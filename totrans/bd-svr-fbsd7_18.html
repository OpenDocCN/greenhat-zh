<html><head></head><body>

<div class="calibre1"><div class="calibre1"><a name="courier_imap_server_4.3.0" class="calibre8" id="courier_imap_server_4.3.0"/>
<div class="calibre24" id="calibre_pb_0"/><h2 id="title-ID0EOPOM" class="docPrefaceTitle">Chapter 5. COURIER - IMAP SERVER 4.3.0</h2>
<h4 class="calibre32"><a class="calibre2" target="_blank" href="HTTP://WWW.COURIER-MTA.ORG/IMAP">HTTP://WWW.COURIER-MTA.ORG/IMAP</a></h4>
<a name="summary-id4" class="calibre8" id="summary-id4"/>
<h3 class="docSection1Title" id="-100000">5.1. SUMMARY</h3>
<p class="docText1"><a name="is an" class="calibre8" id="is an"/>Courier-IMAP is an open source IMAP (Internet Message Access Protocol) server that functions in conjunction with an MTA (Mail Transfer Agent) such as Postfix. Courier-IMAP provides access to Maildir mailboxes, a system for email storage first introduced in Qmail.<a name="IDX-CHP-5-0091" class="calibre8" id="IDX-CHP-5-0091"/><a name="IDX-CHP-5-0092" class="calibre8" id="IDX-CHP-5-0092"/><a name="IDX-CHP-5-0093" class="calibre8" id="IDX-CHP-5-0093"/><a name="IDX-CHP-5-0094" class="calibre8" id="IDX-CHP-5-0094"/><a name="IDX-CHP-5-0095" class="calibre8" id="IDX-CHP-5-0095"/><a name="IDX-CHP-5-0096" class="calibre8" id="IDX-CHP-5-0096"/></p>
<p class="docText1"><a name="a POP" class="calibre8" id="a POP"/>Courier-IMAP also includes a POP3 (Post Office Protocol version 3) server that provides POP3 protocol access to Maildir mailboxes. POP3 is currently the most popular email retrieval protocol; virtually all email providers support it. A POP3 mail transaction consists of a client-initiated connection to the server, the downloading of messages, deletion of those messages from the server, and connection termination. This method of email retrieval is well suited to users who access their email from the same computer on a consistent basis, but it can be cumbersome for users who need email access from a variety of different computers (e.g., work, home, Internet caf√©, etc.).</p>
<p class="docText1"><a name="Mark Crispin" class="calibre8" id="Mark Crispin"/>IMAP was written by Mark Crispin in 1986 to provide an alternative to POP. Some advantages IMAP provides over POP are on-demand message downloading (only selected messages are downloaded to the client instead of the whole mailbox), support for multiple mailboxes (IMAP users can create and move messages between folders on the server), and portable mailbox access (IMAP users may move between different computers and have full access to their mail; POP users are restricted to the machine where their email was downloaded).</p>
<p class="docText1"><a name="in " class="calibre8" id="in "/>Sam Varshavchik wrote Courier-IMAP in 1999. He did so to provide IMAP support to MTAs employing the Maildir format; none existed at the time.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="resources-id4" class="calibre8" id="resources-id4"/>
<h3 class="docSection1Title" id="-100000">5.2. RESOURCES</h3>
<p class="docText1"><span class="b"><a name="Official Courier" class="calibre8" id="Official Courier"/>Official Courier-IMAP Documentation</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://www.courier-mta.org/imap/documentation.html">http://www.courier-mta.org/imap/documentation.html</a></p>
<p class="docText1"><span class="b"><a name="Message Access" class="calibre8" id="Message Access"/>RFC 3501 - Internet Message Access Protocol (IMAP)</span><a name="IDX-CHP-5-0097" class="calibre8" id="IDX-CHP-5-0097"/></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://tools.ietf.org/html/rfc3501">http://tools.ietf.org/html/rfc3501</a></p>
<p class="docText1"><span class="b"><a name="Version " class="calibre8" id="Version "/>RFC 1939 - Post Office Protocol - Version 3 (POP3)</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://tools.ietf.org/html/rfc1939">http://tools.ietf.org/html/rfc1939</a></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="required-id4" class="calibre8" id="required-id4"/>
<h3 class="docSection1Title" id="-100000">5.3. REQUIRED</h3>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/><a name="FreeBSD " class="calibre8" id="FreeBSD "/> FreeBSD 7.0-RELEASE (see "<a class="calibre2" href="freebsd_7.0_split_000.html#freebsd_7.0">FreeBSD 7.0</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/><a name="collection " class="calibre8" id="collection "/> Updated ports collection (see "<a class="calibre2" href="freebsd_ports_collection.html#freebsd_ports_collection">FreeBSD Ports Collection</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/><a name="to Maildir" class="calibre8" id="to Maildir"/> MTA configured to deliver to Maildir (see "<a class="calibre2" href="postfix_smtp_server_2.5.1.html#postfix_smtp_server_2.5.1">Postfix SMTP Server 2.5.1</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> Courier-authlib (see "Courier-authlib 0.60.2" on page 39)</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> Internet connection</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="optional-id2" class="calibre8" id="optional-id2"/>
<h3 class="docSection1Title" id="-100000">5.4. OPTIONAL</h3>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/><a name="OpenSSL with" class="calibre8" id="OpenSSL with"/> OpenSSL with a signed SSL Certificate (see "<a class="calibre2" href="openssl_0.9.8g.html#openssl_0.9.8g">OpenSSL 0.9.8g</a><a name="need secure" class="calibre8" id="need secure"/>"); if you need secure communication between the email client and the server, OpenSSL should be installed before starting<a name="IDX-CHP-5-0098" class="calibre8" id="IDX-CHP-5-0098"/><a name="IDX-CHP-5-0099" class="calibre8" id="IDX-CHP-5-0099"/><a name="IDX-CHP-5-0100" class="calibre8" id="IDX-CHP-5-0100"/><a name="IDX-CHP-5-0101" class="calibre8" id="IDX-CHP-5-0101"/></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="preparation-id4" class="calibre8" id="preparation-id4"/>
<h3 class="docSection1Title" id="-100000">5.5. PREPARATION</h3>
<p class="docText1"><a name="Become the" class="calibre8" id="Become the"/>Become the superuser.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="install-id4" class="calibre8" id="install-id4"/>
<h3 class="docSection1Title" id="-100000">5.6. INSTALL</h3>
<p class="docText1"><a name="To begin" class="calibre8" id="To begin"/>To begin the installation of Courier-IMAP, enter the following commands:</p>
<pre class="calibre30"># <b class="calibre28">cd /usr/ports/mail/courier-imap</b>
 # <b class="calibre28">make config ; make install clean</b></pre>
<p class="docText1"><a name="with a" class="calibre8" id="with a"/>A menu with a list of options for Courier-IMAP will appear. Leave the options at their defaults; press [tab] to select <span class="b">OK</span><a name="start the" class="calibre8" id="start the"/> and then press [enter] to start the installation.</p>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> Courier-IMAP includes both an IMAP and a POP3 server. This guide will configure both services; if you do not wish to enable a particular server, simply skip to the appropriate part of the "<a class="calibre2" href="testing.html#testing">Testing</a>" section (beginning).</span><hr size="1" noshade="noshade" class="calibre27"/>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="configure-id4" class="calibre8" id="configure-id4"/>
<h3 class="docSection1Title" id="-100000">5.7. CONFIGURE</h3>
<p class="docText1"><a name="Once the" class="calibre8" id="Once the"/>Once the installation process is complete, it's time to configure Courier-IMAP for use on your system.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="secure communications" class="calibre8" id="secure communications"/>To enable secure communications between Courier-IMAP and email clients, you need to configure SSL Certificates. If you do not wish to enable secure communications, skip to "See <a class="calibre2" href="testing.html#testing">Testing</a><a name="key and" class="calibre8" id="key and"/>". Courier-IMAP needs the private server key and the server's SSL Certificate combined into a single file. We will assume your private key and server certificates reside in the <span class="docEmphasis1">/usr/local/openssl/certs</span> directory.</p><p class="docText1"><a name="will merge" class="calibre8" id="will merge"/>The following commands will merge your private key with your server certificate into a single file that Courier-IMAP can use:</p><pre class="calibre30"># <b class="calibre28">cd /usr/local/openssl/certs</b>
# <b class="calibre28">cp</b> <span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-unencrypted-key.pem\</b>
? <span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-key-cert.pem</b>
# <b class="calibre28">chmod 400</b> <span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-key-cert.pem</b>
# <b class="calibre28">cat</b> <span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-cert.pem &gt;&gt;</b> <span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-key-cert.pem</b></pre>
<p class="docText1"><a class="calibre2" target="_blank" href="http://host.example.com">host.example.com</a><tt class="calibre20">-unencrypted-key.pem</tt> is your server's unencrypted private key file.</p><p class="docText1"><a class="calibre2" target="_blank" href="http://host.example.com">host.example.com</a><tt class="calibre20">-key-cert.pem</tt> is the combined key and certificate file.</p><p class="docText1"><a class="calibre2" target="_blank" href="http://host.example.com">host.example.com</a><tt class="calibre20">-cert.pem</tt> is the server's public certificate file.</p><p class="docText1"><a name="used when" class="calibre8" id="used when"/>Change these example filenames to match the naming conventions you used when you created your server key and certificate files with OpenSSL.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="tell Courier" class="calibre8" id="tell Courier"/>You will need to tell Courier-IMAP where the combined key-certificate file (the one created in step 1) resides by editing the <span class="docEmphasis1">imap-ssl</span> and <span class="docEmphasis1">pop3d-ssl</span> files located in <span class="docEmphasis1">/usr/local/etc/courier-imap</span>. Open and modify the <span class="docEmphasis1">imap-ssl</span> file as follows (~257):</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/courier-imap/imapd-ssl</b>

TLS_CERTFILE=/usr/local/openssl/certs/<span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-key-cert.pem</b></pre><br class="calibre1"/>
<p class="docText1">Save and exit.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Open and modify the <span class="docEmphasis1">pop3d-ssl</span> file as follows (~244):</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/courier-imap/pop3d-ssl</b>

TLS_CERTFILE=/usr/local/openssl/certs/<span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">-key-cert.pem</b></pre><br class="calibre1"/>
<p class="docText1">Save and exit.</p><p class="docText1">Substitute the appropriate filename for <a class="calibre2" target="_blank" href="http://host.example.com">host.example.com</a><tt class="calibre20">-key-cert.pem</tt><a name="the path" class="calibre8" id="the path"/> if you used a different naming convention. If the path to this file is different than above, be sure to change that as well. Your certificate file must be in the format <span class="docEmphasis1">key followed by certificate</span><a name="extraneous text" class="calibre8" id="extraneous text"/> (as demonstrated in step 1), with no extraneous text.</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="testing-id2" class="calibre8" id="testing-id2"/>
<h3 class="docSection1Title" id="-100000">5.8. TESTING</h3>
<p class="docText1"><a name="In this" class="calibre8" id="In this"/>In this section we'll perform some basic tests to confirm that Courier-IMAP is answering requests properly.<a name="IDX-CHP-5-0102" class="calibre8" id="IDX-CHP-5-0102"/><a name="IDX-CHP-5-0103" class="calibre8" id="IDX-CHP-5-0103"/><a name="IDX-CHP-5-0104" class="calibre8" id="IDX-CHP-5-0104"/></p>
<a name="imap" class="calibre8" id="imap"/>
<h4 id="title-ID0E1SOM" class="docSection1Title">5.8.1. IMAP</h4>
<p class="docText1"><a name="need the" class="calibre8" id="need the"/>You will need the username and password of an account on your system to test IMAP functionality. Ensure the user account you select has an existing Maildir directory. This directory is automatically created by Postfix when it delivers mail to users. If a user has not yet received email, the Maildir directory will be absent. Use the <tt class="calibre20">maildirmake</tt><a name="a Maildir" class="calibre8" id="a Maildir"/> command to manually create a Maildir directory in this case. See "<a class="calibre2" href="utilities-id2.html#maildirmake">maildirmake</a>" for details.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="and handles" class="calibre8" id="and handles"/>Check that Courier-IMAP starts and handles requests properly. To enable the IMAP service, modify <span class="docEmphasis1">rc.conf</span>. Open the <span class="docEmphasis1">rc.conf</span> file located in <span class="docEmphasis1">/etc</span>:</p><pre class="calibre30"># <b class="calibre28">ee /etc/rc.conf</b></pre>
<p class="docText1">and add one or both of the following lines:</p><pre class="calibre30">courier_imap_imapd_enable="YES"
courier_imap_imapd_ssl_enable="YES"</pre><br class="calibre1"/>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> If you did not configure Courier-IMAP to use SSL for secure communications, omit the second line.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1">To start the IMAP service, enter:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/courier-imap-imapd.sh start</b>
 # <b class="calibre28">/usr/local/etc/rc.d/courier-imap-imapd-ssl.sh start</b></pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="on port" class="calibre8" id="on port"/>Enter the following command to connect to the IMAP server on port 143:</p><div class="calibre1">
              Code View:</div><pre class="calibre30"># <b class="calibre28">telnet localhost 143</b>

Connected to localhost.
Escape character is '^]'.
* OK [CAPABILITY IMAP4rev1 UIDPLUS CHILDREN NAMESPACE THREAD=ORDEREDSUBJECT
THREAD=REFERENCES SORT QUOTA IDLE ACL ACL2=UNION STARTTLS] Courier-IMAP ready.
Copyright 1998-2005 Double Precision, Inc. See COPYING for distribution information.

					  </pre><br class="calibre1"/>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> This output, the IMAP server connection banner, will appear on a single line.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1"><a name="valid username" class="calibre8" id="valid username"/>Log in using a valid username and password for your system.</p><pre class="calibre30"><b class="calibre28">aa login</b> <span class="docEmphBoldItalic">username password</span>
aa OK LOGIN Ok.</pre><br class="calibre1"/>
<p class="docText1"><a name="mail clients" class="calibre8" id="mail clients"/>The next command is typically sent by mail clients prior to retrieving messages from the mailbox; you'll want to see a response similar to that shown below.</p><pre class="calibre30"><b class="calibre28">ab select inbox</b>

* FLAGS (\Draft \Answered \Flagged \Deleted \Seen \Recent)
* OK [PERMANENTFLAGS (\* \Draft \Answered \Flagged \Deleted \Seen)] Limited
* 2 EXISTS
* 0 RECENT
* OK [UIDVALIDITY 1129543635] Ok
* OK [MYRIGHTS "acdilrsw"] ACL
ab OK [READ-WRITE] Ok

<b class="calibre28">ac logout</b></pre><br class="calibre1"/>
<pre class="calibre30">* BYE Courier-IMAP server shutting down
ac OK LOGOUT completed
Connection closed by foreign host.</pre><br class="calibre1"/>
<p class="docText1"><a name="to the" class="calibre8" id="to the"/>If your session looked similar to the one above, then Courier-IMAP is functional.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="you did" class="calibre8" id="you did"/>Testing Courier-IMAP with SSL is similar, but uses the OpenSSL command-line tool. (If you did not choose to configure secure communications with SSL, you may proceed to the "POP3" section below.) The following command begins an IMAP session with SSL:</p><pre class="calibre30"># <b class="calibre28">openssl s_client -connect localhost:993</b></pre><br class="calibre1"/>
<p class="docText1"><a name="the same" class="calibre8" id="the same"/>Once the connection is established, you may issue the same commands as above to test IMAP-SSL functionality, starting with the command <tt class="calibre20"><a name="aa login" class="calibre8" id="aa login"/>aa login</tt> <tt class="calibre20"><i class="docEmphasis1">username password</i></tt>.</p></div></li></ol></div>
<a name="pop3" class="calibre8" id="pop3"/>
<h4 id="title-ID0EHWOM" class="docSection1Title">5.8.2. POP3</h4>
<p class="docText1"><a name="need the" class="calibre8" id="need the"/>You will need the username and password of an account on your system to test POP3 functionality. Ensure the user account you select has an existing Maildir directory. This directory is automatically created by Postfix when it delivers mail to users. If a user has not yet received email, the Maildir directory will be absent. Use the <tt class="calibre20">maildirmake</tt><a name="a Maildir" class="calibre8" id="a Maildir"/> command to manually create a Maildir in this case. See "<a class="calibre2" href="utilities-id2.html#maildirmake">maildirmake</a>" for details.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="and handles" class="calibre8" id="and handles"/>Check that Courier-IMAP starts and handles requests properly. To enable the POP3 service, open the <span class="docEmphasis1">rc.conf</span> file located in <span class="docEmphasis1">/etc</span>:</p><pre class="calibre30"># <b class="calibre28">ee /etc/rc.conf</b></pre><br class="calibre1"/>
<p class="docText1">and add one or both of the following lines:</p><pre class="calibre30">courier_imap_pop3d_enable="YES"
courier_imap_pop3d_ssl_enable="YES"</pre><br class="calibre1"/>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> If you did not configure Courier-IMAP to use SSL for secure communication, omit the second line.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1">To start the POP3 service, enter:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/courier-imap-pop3d.sh start</b>
 # <b class="calibre28">/usr/local/etc/rc.d/courier-imap-pop3d-ssl.sh start</b></pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="port " class="calibre8" id="port "/>Enter the following command to connect to the POP3 server on port 110:</p><pre class="calibre30"># <b class="calibre28">telnet localhost 110</b>

Connected to localhost.
Escape character is '^]'.
+OK Hello there.</pre><br class="calibre1"/>
<p class="docText1"><a name="valid username" class="calibre8" id="valid username"/>Log in using a valid username and password for your system.</p><pre class="calibre30"><b class="calibre28">user</b> <span class="docEmphBoldItalic">username</span>

+OK Password required.

<b class="calibre28">pass</b> <span class="docEmphBoldItalic">password</span>

+OK logged in.</pre><br class="calibre1"/>
<p class="docText1">The <tt class="calibre20">stat</tt><a name="is known" class="calibre8" id="is known"/> command triggers the POP3 server to return what is known as a <span class="docEmphasis1">drop listing</span><a name="signifies the" class="calibre8" id="signifies the"/>. The seven (in the drop listing below) signifies the number of messages in the mailbox, followed by the number of bytes these messages consume on disk (in octets). Your output will certainly be different depending on the contents of your mailbox.</p><pre class="calibre30"><b class="calibre28">stat</b>

+OK 7 19775

<b class="calibre28">quit</b></pre><br class="calibre1"/>
<p class="docText1"><a name="functioning correctly" class="calibre8" id="functioning correctly"/>At this point, we can assume the POP3 server is functioning correctly.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="the same" class="calibre8" id="the same"/>You can test the POP3 daemon with SSL the same way, using the OpenSSL command-line utility. The following command begins a POP3 session over SSL:</p><pre class="calibre30"># <b class="calibre28">openssl s_client -connect localhost:995</b></pre><br class="calibre1"/>
<p class="docText1"><a name="Once the" class="calibre8" id="Once the"/>Once the connection is established, you may issue the same commands as above, starting with the command <tt class="calibre20">user</tt> <tt class="calibre20"><i class="docEmphasis1">username</i></tt><a name="SSL functionality" class="calibre8" id="SSL functionality"/>, to test POP3 SSL functionality.</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="utilities-id2" class="calibre8" id="utilities-id2"/>
<h3 class="docSection1Title" id="-100000">5.9. UTILITIES</h3>
<p class="docText1"><a name="Following is" class="calibre8" id="Following is"/>Following is brief information on the <tt class="calibre20">maildirmake</tt><a name="used to" class="calibre8" id="used to"/> program, which is used to create a user's initial Maildir directory structure or to add subdirectories to an existing Maildir.<a name="IDX-CHP-5-0105" class="calibre8" id="IDX-CHP-5-0105"/></p>
<a name="maildirmake" class="calibre8" id="maildirmake"/>
<h4 id="title-ID0EATOM" class="docSection1Title">5.9.1. maildirmake</h4>
<p class="docText1"><a name="to create" class="calibre8" id="to create"/>This utility is used to create a user's Maildir directory and subdirectories.</p>
<dl class="docList1">
<dt class="calibre1"><p class="calibre23"><span class="docPubcolor"><span class="b">Command</span></span></p></dt>
<dd class="calibre36"><p class="docText1"><tt class="calibre20">maildirmake</tt></p></dd>
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">Syntax</span></span></p></dt>
<dd class="calibre36"><p class="docText1"><tt class="calibre20">maildirmake -</tt><tt class="calibre20"><i class="docEmphasis1">options</i></tt> <tt class="calibre20">Maildir</tt></p></dd>
</dl>
<p class="docText1"><span class="b">Options</span></p>
<dl class="docList1">
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"/><pre class="calibre30">-f</pre></p></dt>
<dd class="calibre36"><p class="docText1"><a name="within an" class="calibre8" id="within an"/>Create a subdirectory within an existing Maildir</p></dd>
</dl>
<p class="docText1"><span class="b">Examples</span></p>
<p class="docText1"><a name="in the" class="calibre8" id="in the"/>The following examples assume you are the root user and in the appropriate user's home directory.</p>
<p class="docText1">To create a new Maildir, enter:</p>
<pre class="calibre30"># <b class="calibre28">su</b> <span class="docEmphBoldItalic">user</span>
 # <b class="calibre28">maildirmake Maildir</b>
 # <b class="calibre28">exit</b></pre><br class="calibre1"/>
<p class="docText1">In place of <tt class="calibre20"><i class="docEmphasis1">user</i></tt><a name="the account" class="calibre8" id="the account"/>, substitute the username of the account for which you are creating the Maildir.</p>
<p class="docText1">To create a subdirectory named <span class="docEmphasis1">Junk</span> within an existing Maildir, use the command:</p>
<pre class="calibre30"># <b class="calibre28">su</b> <span class="docEmphBoldItalic">user</span>
# <b class="calibre28">maildirmake -f Junk Maildir</b>
<b class="calibre28"># exit</b></pre><br class="calibre1"/>
<p class="docText1">In place of <tt class="calibre20"><i class="docEmphasis1">user</i></tt><a name="which you" class="calibre8" id="which you"/>, substitute the username of the account for which you are creating the subdirectory.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="config_files-id4" class="calibre8" id="config_files-id4"/>
<h3 class="docSection1Title" id="-100000">5.10. CONFIG FILES</h3>
<p class="docText1"><span class="b">/usr/local/etc/courier-imap/imapd</span><a name="IDX-CHP-5-0106" class="calibre8" id="IDX-CHP-5-0106"/><a name="IDX-CHP-5-0107" class="calibre8" id="IDX-CHP-5-0107"/><a name="IDX-CHP-5-0108" class="calibre8" id="IDX-CHP-5-0108"/><a name="IDX-CHP-5-0109" class="calibre8" id="IDX-CHP-5-0109"/><a name="IDX-CHP-5-0110" class="calibre8" id="IDX-CHP-5-0110"/></p>
<p class="docText1"><a name="The main" class="calibre8" id="The main"/>The main IMAP configuration file</p>
<p class="docText1"><span class="b">/usr/local/etc/courier-imap/imapd-ssl</span></p>
<p class="docText1"><a name="main IMAP" class="calibre8" id="main IMAP"/>Supplements the main IMAP configuration file with options pertaining to SSL</p>
<p class="docText1"><span class="b">/usr/local/etc/courier-imap/pop3d</span></p>
<p class="docText1">The main POP3 configuration file</p>
<p class="docText1"><span class="b">/usr/local/etc/courier-imap/pop3d-ssl</span></p>
<p class="docText1"><a name="file with" class="calibre8" id="file with"/>Supplements the main POP3 configuration file with options pertaining to SSL</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="log_files-id2" class="calibre8" id="log_files-id2"/>
<h3 class="docSection1Title" id="-100000">5.11. LOG FILES</h3>
<p class="docText1"><span class="b">/var/log/maillog</span></p>
<p class="docText1"><a name="General log" class="calibre8" id="General log"/>General log of email activity</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="notes-id3" class="calibre8" id="notes-id3"/>
<h3 class="docSection1Title" id="-100000">5.12. NOTES</h3>
<ul class="calibre15"><li class="calibre16"><p class="docText1"><a name="If you" class="calibre8" id="If you"/>If you installed Courier-IMAP without SSL support, be aware that port 143 transmits login and password information "in the clear." This means that it can be obtained by unauthorized persons. If all of your users will be using email clients with SSL support, it may be a good idea to run only the SSL-enabled instance of Courier-IMAP by removing the non-SSL startup line from the <span class="docEmphasis1">/etc/rc.conf</span> file.</p><p class="docText1"><a name="server is" class="calibre8" id="server is"/>If your server is behind a NAT router, you can enable port forwarding to only port 993. This would allow only SSL connections from outside the local network. Local traffic would still be vulnerable unless you have Standard IMAP disabled as mentioned above.</p><p class="docText1"><a name="install a" class="calibre8" id="install a"/>If you intend to install a webmail client that uses IMAP (such as SquirrelMail; see "<a class="calibre2" href="squirrelmail_1.4.13.html#squirrelmail_1.4.13">SquirrelMail 1.4.13</a>") then <span class="docEmphasis1">do not</span><a name="functionality on" class="calibre8" id="functionality on"/> disable Standard IMAP functionality on port 143.</p><p class="docText1">If you choose to remove the non-SSL imapd line from <span class="docEmphasis1">rc.conf</span>, remember to stop the non-SSL daemon like this:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/courier-imap-imapd.sh stop</b></pre>
</li><li class="calibre16"><p class="docText1"><a name="login and" class="calibre8" id="login and"/>Similarly, if you installed POP3 without SSL support, be aware that port 110 transmits login and password information "in the clear." This means that that it can be obtained by unauthorized persons. If all of your users will be using email clients with SSL support, it may be a good idea to run only the SSL-enabled instance of the POP3 daemon by removing the non-SSL startup line from the <span class="docEmphasis1">/etc/rc.conf</span> file.</p><p class="docText1"><a name="behind a" class="calibre8" id="behind a"/>If your server is behind a NAT router, you can enable port forwarding to only port 995. This would allow only SSL connections from outside the local network. Local traffic would still be vulnerable unless you have non-SSL POP3 disabled as mentioned above.</p><p class="docText1"><a name="from" class="calibre8" id="from"/>If you choose to remove the non-SSL pop3d line from <span class="docEmphasis1">rc.conf</span><a name="like this" class="calibre8" id="like this"/>, remember to stop the non-SSL daemon like this:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/courier-imap-pop3d.sh stop</b></pre><br class="calibre1"/>
</li></ul>
</div></div>

</body></html>