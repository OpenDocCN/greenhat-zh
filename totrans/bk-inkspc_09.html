<html><head></head><body><div class="chapter" title="Chapter&#xA0;9.&#xA0;Stroke and Markers"><div class="titlepage"><div><div><h1 class="title"><a id="stroke_and_markers"/>Chapter 9. Stroke and Markers</h1></div></div></div><p><a id="iddle1384" class="indexterm"/><a id="iddle1761" class="indexterm"/><a id="iddle3287" class="indexterm"/><a id="iddle3413" class="indexterm"/><a id="iddle4355" class="indexterm"/><a id="iddle4371" class="indexterm"/><a id="iddle4392" class="indexterm"/><a id="iddle4406" class="indexterm"/><a id="iddle4558" class="indexterm"/>While relatively rare in artistic drawings, stroked paths—outlines, frames, arrows, connectors, and so on—are very common in technical drawings such as drafts or flowcharts. A sizable share of all SVG style properties control the appearance of stroke, which therefore deserves a chapter of its own.</p><p>While stroking in SVG is quite rich and adequate for a lot of purposes, some things you may be looking for are simply not there, or are only available via workarounds. In particular, SVG stroke always has <span class="emphasis"><em>constant width</em></span> (it cannot get wider or narrower along the path); to emulate variable-width stroke, use the Calligraphic pen (<span class="strong"><strong><a class="xref" href="ch14s03.html" title="14.3 The Calligraphic Pen Tool">14.3 The Calligraphic Pen Tool</a></strong></span>) or path effects (<span class="strong"><strong><a class="xref" href="ch13s01.html" title="13.1 Path Effects">13.1 Path Effects</a></strong></span>). Also, while stroke can have a dash pattern (<span class="strong"><strong><a class="xref" href="ch09s04.html" title="9.4 Dash Patterns">9.4 Dash Patterns</a></strong></span>) and markers attached to its nodes (<span class="strong"><strong><a class="xref" href="ch09s05.html" title="9.5 Markers">9.5 Markers</a></strong></span>), you cannot stroke a path with a brush or repeated pattern that would follow the bends of the stroke— although, again, this is possible via path effects (<span class="strong"><strong><a class="xref" href="ch13s01.html#one3dot1dot3_pattern_along_path_and_bend" title="13.1.3 Pattern Along Path and Bend">13.1.3 Pattern Along Path and Bend</a></strong></span>), and you can always apply the standard SVG rectangular pattern (<span class="strong"><strong><a class="xref" href="ch10s08.html#one0dot8dot1_creating_patterns" title="10.8.1 Creating Patterns">10.8.1 Creating Patterns</a></strong></span>) to paint a stroke exactly as you would a fill (however, the pattern in this case is simply superimposed; it is not distorted to follow the trajectory of the stroke).</p></div>
<div class="sect1" title="9.1 Stroke Width"><div class="titlepage"><div><div><h1 class="title"><a id="ninedot1_stroke_width"/>9.1 Stroke Width</h1></div></div></div><p><a id="iddle2181" class="indexterm"/><a id="iddle2183" class="indexterm"/><a id="iddle3929" class="indexterm"/><a id="iddle4384" class="indexterm"/><a id="iddle4464" class="indexterm"/><a id="iddle4884" class="indexterm"/>The most important property of the stroke is its <span class="emphasis"><em>width</em></span>. Like any other length value in Inkscape, width can be measured in a number of different units. There are currently two places in the UI where you can see and change the stroke width of the selected objects: in the selected style indicator in the status bar (at the right end of the stroke swatch) and in the <span class="strong"><strong>Stroke style</strong></span> tab of the <span class="strong"><strong>Fill and Stroke</strong></span> dialog:</p><div class="figure"><a id="stroke_width_in_the_selected_style_indic"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00105"/><img src="httpatomoreillycomsourcenostarchimages1735714.png.jpg" alt="Stroke width in the selected style indicator (left; right-click to open the menu) and the Fill and Stroke dialog (right)"/></div></div><p class="title">Figure 9-1. Stroke width in the selected style indicator (left; right-click to open the menu) and the Fill and Stroke dialog (right)</p></div><div class="note" title="Note"><h3 class="title"><a id="ch09note01"/>Note</h3><p><span class="emphasis"><em>If the contents of the <span class="strong"><strong>Stroke style</strong></span> tab are disabled (grayed out), this means your selected object has no stroke paint. To enable it, in the same dialog go to the <span class="strong"><strong>Stroke paint</strong></span> tab and choose a solid color or any other paint for the stroke.</em></span></p></div><p>In the selected style indicator, one way to change the stroke width is by right-clicking directly on the numeric stroke width shown next to the swatch and choosing a value from the menu which pops up. In the same menu, you can choose the unit to be used for stroke width; by default it’s <code class="literal">px</code> (SVG pixel).</p><p>Similar to editing fill or stroke colors by color gestures (<span class="strong"><strong><a class="xref" href="ch08s05.html" title="8.5 The Selected Style Indicator: Color Gestures">8.5 The Selected Style Indicator: Color Gestures</a></strong></span>), you can also drag off the stroke width value in the selected style indicator, into the canvas, to change the stroke width of selection. Dragging above and to the left of the 45-degree line from the swatch makes the stroke in selected objects wider (up to twice the original width); dragging below and to the right makes it narrower (down to half the original width). For example, if you start with a 1 px stroke, dragging up and to the left will give you 2 px, and dragging to the right and down will yield 0.5 px. This way, you can adjust stroke width quickly and precisely without opening any dialogs or menus.</p><p>In the <span class="strong"><strong>Fill and Stroke</strong></span> dialog, there’s a regular editable field where you can type any value, as well as a unit selector.</p><div class="note" title="Note"><h3 class="title"><a id="ch09note02"/>Note</h3><p><a id="iddle1234" class="indexterm"/><a id="iddle2992" class="indexterm"/><a id="iddle3194" class="indexterm"/><a id="iddle4034" class="indexterm"/><a id="iddle4365" class="indexterm"/><a id="iddle4370" class="indexterm"/><a id="iddle4377" class="indexterm"/><a id="iddle4378" class="indexterm"/><a id="iddle4407" class="indexterm"/><a id="iddle4879" class="indexterm"/><a id="iddle4887" class="indexterm"/><span class="emphasis"><em>In Outline mode (<span class="strong"><strong><a class="xref" href="ch03s11.html" title="3.11 Rendering Modes">3.11 Rendering Modes</a></strong></span>), the stroke width is ignored and all objects are shown with a stroke that is one screen pixel wide, regardless of zoom. However, this is only an Inkscapespecific editing convenience; in SVG, stroke width is always specified in absolute units, so you cannot make it independent of zoom. This may change in a future version of SVG. If it does change, Inkscape will eventually support this as well.</em></span></p></div><p>When selection contains multiple objects with different strokes, the selected style indicator <span class="emphasis"><em>averages</em></span> the stroke widths of those objects that have any stroke. For example, if one of the two selected objects has 3 px stroke and the other has 1 px, the indicator will show <span class="emphasis"><em>2</em></span> (and the tooltip will say that this is an averaged value). Now, if you set any width via the right-click menu, the same width will be assigned to all selected objects that had any stroke in the first place. (For example, if one of the objects has 3 px stroke and the other has no stroke, it will display <span class="emphasis"><em>3</em></span> as its stroke width and <span class="emphasis"><em>Different</em></span> in the swatch on the left, but any new width you set will be assigned <span class="emphasis"><em>only</em></span> to the object that had 3 px stroke.)</p><p>The <span class="strong"><strong>Fill and Stroke</strong></span> dialog behaves differently. When different stroke widths are detected in selection, the stroke width unit switches to percentage unit (<span class="strong"><strong>%</strong></span>) and the displayed value is 100 percent. Now, if you change it, for example, to 200 percent and press <span class="inlinemediaobject"><a id="inline_id00370"/><img src="httpatomoreillycomsourcenostarchimages1735344.png.jpg" alt=""/></span>, each stroke width in the selection will get two times wider than it was before. After that, all stroke widths that were different will remain different, and the displayed value will be reset to 100 percent.</p><p>Of course, in that dialog you can just as well switch the unit selector to any absolute unit and assign the same stroke width to any number of selected objects. On the other hand, even if you have a single object selected, you can still switch to the percent unit and specify a new width as a percentage of the old.</p></div>
<div class="sect1" title="9.2 Join"><div class="titlepage"><div><div><h1 class="title"><a id="ninedot2_join"/>9.2 Join</h1></div></div></div><p>Stroke always follows a path, and a path can have sharp turns, called <span class="emphasis"><em>cusps</em></span>. Typically, a cusp is a nonsmooth node (<span class="strong"><strong><a class="xref" href="ch12s05.html#one2dot5dot5_node_types" title="12.5.5 Node Types">12.5.5 Node Types</a></strong></span>) where two path segments join, but you don’t even need to have a node to make a cusp; it is possible to create a sharp cusp in the middle of a Bézier curve (<span class="strong"><strong><a class="xref" href="ch13s01.html#one3dot1dot7_spiro_spline" title="13.1.7 Spiro Spline">13.1.7 Spiro Spline</a></strong></span>).</p><p>The way the stroke behaves at the cusps is determined by the two style properties: <span class="emphasis"><em>join type</em></span> and <span class="emphasis"><em>miter limit</em></span>. They are editable by the <span class="strong"><strong>Stroke style</strong></span> tab of the <span class="strong"><strong>Fill and Stroke</strong></span> dialog, right below the stroke width control. The three possible join types, represented by the three toggle buttons, are <span class="strong"><strong>Miter join</strong></span> (default), <span class="strong"><strong>Round join</strong></span>, and <span class="strong"><strong>Bevel join</strong></span>:</p><p><span class="strong"><strong>Miter join</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>In this join, the outer outline of the stroke at the cusp point is continued by two straight line fragments, tangential to the stroke on both sides of the joint, until these straight lines cross. As a result, the joint is adorned by a sharp peak, called a <span class="emphasis"><em>miter</em></span>, which becomes longer and sharper as the angle at the joint decreases, reaching far beyond the position of the cusp node.</p><p>This leads us to a problem, however. How long can the miter become? It is easy to see that when the angle at the joint becomes zero (which is perfectly legal), the miter should be infinitely long. This is obviously infeasible. To handle this situation, the <span class="strong"><strong>Miter limit</strong></span> control allows you to set the maximum length of a miter in units of stroke width. For example, for <a id="iddle3331" class="indexterm"/><a id="iddle4380" class="indexterm"/><a id="iddle4415" class="indexterm"/><a id="iddle4416" class="indexterm"/>the default miter limit of 4, any miter shorter than 4 stroke widths remains sharp-tipped, but as soon as you decrease the angle to make the miter longer than that, it will be cut (beveled) at the distance of 4 stroke widths from the joint.</p></li></ul></div><p><span class="strong"><strong>Bevel join</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>This join is basically the same as a <span class="strong"><strong>Miter join</strong></span> but with the miter limit set to 0. This means that for any angle, the miter is cut off by a <span class="emphasis"><em>bevel</em></span>—a straight line perpendicular to the bisector of the cusp angle.</p></li></ul></div><p><span class="strong"><strong>Round join</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>This simulates the effect of tracing the join with a perfectly round pen. It is similar to the <span class="strong"><strong>Bevel join</strong></span>, but instead of a straight bevel, the miter is cut by a circular arc whose center is at the cusp point. This option is the most natural for largely curvilinear paths where occasional cusps might look out of character if not rounded.</p></li></ul></div><div class="figure"><a id="stroke_join_controls_in_the_fill_and_str"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00106"/><img src="httpatomoreillycomsourcenostarchimages1735716.png.jpg" alt="Stroke join controls in the Fill and Stroke dialog"/></div></div><p class="title">Figure 9-2. Stroke join controls in the Fill and Stroke dialog</p></div><p>Perhaps the most dramatic effect of different stroke join settings are on a stroked text object:</p><div class="figure"><a id="effect_of_join_settings_on_stroked_text"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00107"/><img src="httpatomoreillycomsourcenostarchimages1735718.png.jpg" alt="The effect of join settings on stroked text"/></div></div><p class="title">Figure 9-3. The effect of join settings on stroked text</p></div><div class="note" title="SVG"><h3 class="title"><a id="ch09note03"/>SVG</h3><p><span class="emphasis"><em>In SVG, the joins are controlled by the</em></span> <code class="literal">stroke-linejoin</code> <span class="emphasis"><em>CSS property, which can take values of</em></span> <code class="literal">miter</code><span class="emphasis"><em>,</em></span> <code class="literal">bevel</code><span class="emphasis"><em>, and</em></span> <code class="literal">round</code><span class="emphasis"><em>. The miter limit is stored in a separate property,</em></span> <code class="literal">stroke-miterlimit</code><span class="emphasis"><em>.</em></span></p></div></div>
<div class="sect1" title="9.3 Caps"><div class="titlepage"><div><div><h1 class="title"><a id="ninedot3_caps"/>9.3 Caps</h1></div></div></div><p><a id="iddle1762" class="indexterm"/><a id="iddle1887" class="indexterm"/><a id="iddle3365" class="indexterm"/><a id="iddle4366" class="indexterm"/><a id="iddle4372" class="indexterm"/><a id="iddle4414" class="indexterm"/><a id="iddle4964" class="indexterm"/>Open paths need to know how to draw the ends of the stroke. For caps, again, there are three options available, which are somewhat similar to the three join types:</p><p><span class="strong"><strong>Butt cap</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Bluntly cuts the stroke, perpendicular to the stroke direction, right at the end node of the path.</p></li></ul></div><p><span class="strong"><strong>Round cap</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Adds a semicircular blob that smoothly rounds the end of the stroke.</p></li></ul></div><p><span class="strong"><strong>Square cap</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Adds a half-square blob to the end of the stroke.</p></li></ul></div><div class="figure"><a id="stroke_cap_options_in_the_fill_and_strok"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00108"/><img src="httpatomoreillycomsourcenostarchimages1735720.png.jpg" alt="Stroke cap options in the Fill and Stroke dialog"/></div></div><p class="title">Figure 9-4. Stroke cap options in the Fill and Stroke dialog</p></div><p>Both round and square caps make the open path longer by its full width, with a half-stroke-width cap added to each end. Only with butt caps (which essentially means no caps), the path is as long as the distance between its end nodes.</p><p>The effect of join and cap options is most visible on wide strokes; for strokes that render at 1 px or narrower, they make very little visual difference (except possibly for long miters).</p><div class="note" title="SVG"><h3 class="title"><a id="ch09note04"/>SVG</h3><p><span class="emphasis"><em>In SVG, the stroke caps of a path are controlled by the</em></span> <code class="literal">stroke-linecap</code> <span class="emphasis"><em>property, which can take values of</em></span> <code class="literal">butt</code><span class="emphasis"><em>,</em></span> <code class="literal">round</code><span class="emphasis"><em>, and</em></span> <code class="literal">square</code><span class="emphasis"><em>.</em></span></p></div></div>
<div class="sect1" title="9.4 Dash Patterns"><div class="titlepage"><div><div><h1 class="title"><a id="ninedot4_dash_patterns"/>9.4 Dash Patterns</h1></div></div></div><p>A stroke does not need to run solidly from end to end of a path. SVG allows you to stroke a path with a regular pattern of dashes separated by empty intervals of any length. If you know how to edit raw SVG (for example, using Inkscape’s XML Editor, <span class="strong"><strong><a class="xref" href="ch04s07.html" title="4.7 The XML Editor">4.7 The XML Editor</a></strong></span>), you can create any pattern you like. Otherwise, you can choose one of the many predefined patterns provided by the <span class="strong"><strong>Fill and Stroke</strong></span> dialog, as shown in <a class="xref" href="ch09s04.html#dash_patterns_in_the_fill_and_stroke_dia" title="Figure 9-5. Dash patterns in the Fill and Stroke dialog">Figure 9-5</a>.</p><p>Ordered roughly from the most common to the most exotic, these patterns include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Dotted patterns that consist of dots (i.e., stroked segments whose length is equal to stroke width) with intervals equal to 1, 2, 3, 4, 6, and so on up to 48 stroke widths (this means the pattern scales up or down proportionally when you make your stroke wider or narrower).</p><div class="figure"><a id="dash_patterns_in_the_fill_and_stroke_dia"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00109"/><img src="httpatomoreillycomsourcenostarchimages1735722.png.jpg" alt="Dash patterns in the Fill and Stroke dialog"/></div></div><p class="title">Figure 9-5. Dash patterns in the Fill and Stroke dialog</p></div></li><li class="listitem"><p><a id="iddle1764" class="indexterm"/><a id="iddle3581" class="indexterm"/><a id="iddle4413" class="indexterm"/>Patterns with long dashes (1, 2, 3, and so on up to 24 stroke widths) and single-stroke width intervals.</p></li><li class="listitem"><p>Patterns with equal dash and interval lengths, from 2 to 24 stroke widths.</p></li><li class="listitem"><p>Patterns with varying dash and interval widths: 2:4, 4:2, 2:6, 6:2, 2:8, and 8:2.</p></li><li class="listitem"><p>Patterns where a long dash is followed by a short one.</p></li><li class="listitem"><p>Patterns with equal dash and interval lengths that are shorter than stroke width, from 0.5 down to 0.02 stroke widths (for example, a “square” path which is as long as it is wide will have 25 repetitions of the 0.02:0.02 pattern). Note that using such high-frequency patterns may slow Inkscape down considerably.</p></li></ul></div><p>The editable field next to the dash pattern selector allows you to shift the chosen pattern along the path, again in units of stroke width.</p><div class="note" title="SVG"><h3 class="title"><a id="ch09note05"/>SVG</h3><p><span class="emphasis"><em>In SVG, the dash pattern of a stroke is specified in the</em></span> <code class="literal">stroke-dasharray</code> <span class="emphasis"><em>property. It can take values of</em></span> <code class="literal">none</code> <span class="emphasis"><em>(solid line) or a comma-separated list of values where each odd value gives the length of a dash and each even value gives the length of an interval. For example, a specification of</em></span> <code class="literal">stroke-dasharray:2,1,0.5,1</code> <span class="emphasis"><em>means that the dash of length 2 is followed by an interval of length 1, which is followed by a short dash of 0.5 and another interval of 1 (all lengths are in the units of stroke width).</em></span></p><p><span class="emphasis"><em>The list of the predefined dash patterns available in the <span class="strong"><strong>Fill and Stroke</strong></span> dialog is stored in your</em></span> preferences.xml <span class="emphasis"><em>file, inside the</em></span> <code class="literal">group</code> <span class="emphasis"><em>element with</em></span> <code class="literal">id="dashes"</code><span class="emphasis"><em>. By editing the children of this element you can add, remove, or change the patterns available in the Inkscape UI.</em></span></p></div><p>Note that the stroke caps (<span class="strong"><strong><a class="xref" href="ch09s03.html" title="9.3 Caps">9.3 Caps</a></strong></span>) affect dashes, too. If you set a path to use round or square caps, they will be added to both ends of each dash. As a result, each dash will become longer by one full stroke width compared to its length when using the default butt caps. For example, the 1:1 pattern with round caps loses all its intervals; the round caps of adjacent dashes, each cap 0.5 stroke widths in length, now touch each other, as shown in <a class="xref" href="ch09s04.html#effect_of_stroke_caps_on_dashes" title="Figure 9-6. The effect of stroke caps on dashes">Figure 9-6</a>.</p><p>As a consequence, to create a pattern of round dots following a path, you need to create a dash pattern with zero-length dashes and round caps. Unfortunately, Inkscape does not list such a pattern in the <span class="strong"><strong>Fill and Stroke</strong></span> dialog; you will need to create it manually by first assigning a pattern with the interval length you need and then editing the <code class="literal">stroke-dasharray</code> property in the <code class="literal">style</code> attribute of the corresponding path element to set its dash length (first value) to 0. Note, <a id="iddle1765" class="indexterm"/><a id="iddle1881" class="indexterm"/><a id="iddle3619" class="indexterm"/><a id="iddle4242" class="indexterm"/>however, that without round or square caps, such a pattern will render the path completely invisible (which is the main reason it is not among the standard patterns—remember that the default caps setting is butt).</p><div class="figure"><a id="effect_of_stroke_caps_on_dashes"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00110"/><img src="httpatomoreillycomsourcenostarchimages1735724.png.jpg" alt="The effect of stroke caps on dashes"/></div></div><p class="title">Figure 9-6. The effect of stroke caps on dashes</p></div><p>One interesting use of dot patterns with very wide intervals (such as 1:48) is quickly creating a random scattering of dots. Draw a quick spiral-like doodle with the Pencil tool (<span class="strong"><strong><a class="xref" href="ch14s02.html" title="14.2 The Pencil Tool">14.2 The Pencil Tool</a></strong></span>) and assign a 1:48 dash pattern to it to turn it into a cloud of seemingly unconnected dots.</p><div class="figure"><a id="using_a_dash_array_with_large_intervals"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00111"/><img src="httpatomoreillycomsourcenostarchimages1735726.png.jpg" alt="Using a dash array with large intervals to imitate a random scattering of dots"/></div></div><p class="title">Figure 9-7. Using a dash array with large intervals to imitate a random scattering of dots</p></div><p>Also, the regularity of dash patterns plays nicely with spirals—a shape which is also regular but consists of progressively longer and longer turns (<span class="strong"><strong><a class="xref" href="ch11s06.html" title="11.6 Spirals">11.6 Spirals</a></strong></span>). An interplay of the equidistant dashes and gradually devolving paths can produce interesting patterns:</p><div class="figure"><a id="dashed_spirals_are_a_form_of_art"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00112"/><img src="httpatomoreillycomsourcenostarchimages1735728.png.jpg" alt="Dashed spirals are a form of art."/></div></div><p class="title">Figure 9-8. Dashed spirals are a form of art.</p></div></div>
<div class="sect1" title="9.5 Markers"><div class="titlepage"><div><div><h1 class="title"><a id="ninedot5_markers"/>9.5 Markers</h1></div></div></div><p><a id="iddle1176" class="indexterm"/><a id="iddle2824" class="indexterm"/><a id="iddle2831" class="indexterm"/><a id="iddle2834" class="indexterm"/><a id="iddle4379" class="indexterm"/><a id="iddle4562" class="indexterm"/><span class="emphasis"><em>Markers</em></span> are arbitrary objects (or even groups of objects) that are attached to a path and are displayed as part of that path at some of its nodes (<span class="strong"><strong><a class="xref" href="ch12s01.html" title="12.1 The Anatomy of a Path">12.1 The Anatomy of a Path</a></strong></span>). A path can have three different types of markers on its start node, intermediate (mid) nodes, and the end node. Each copy of the marker is positioned at the node and rotated so as to follow the direction of the path at this node. The most common use of markers is for creating arrowheads in diagrams and flowcharts.</p><p>The bottom of the <span class="strong"><strong>Stroke style</strong></span> tab in the <span class="strong"><strong>Fill and Stroke</strong></span> dialog contains three large drop-down lists where you can select start, mid, and end markers for the selected paths.</p><div class="figure"><a id="choosing_markers_for_a_path"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00113"/><img src="httpatomoreillycomsourcenostarchimages1735730.png.jpg" alt="Choosing markers for a path"/></div></div><p class="title">Figure 9-9. Choosing markers for a path</p></div><p>These three lists show all the same markers (in other words, you can use any marker in any position), but the preview thumbnails show them applied to the start, mid, and end of a horizontal straight line path, so you can get an idea of how the marker will look on the actual path.</p><p>Let’s look at what markers are in Inkscape’s standard list:</p><p><span class="strong"><strong>Arrowheads</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>There are two types of arrowheads: One is dart-like with straight lines on the back, and the other is delta-shaped with a circular concave arc at the back of the arrow. Each type of arrowhead comes in three sizes: large, medium, and small; and each size has two orientations: start and end.</p><p>For example, if you want your arrowhead to point away from the path, you should choose <span class="strong"><strong>Arrow1Mstart</strong></span> (first type, medium size, start orientation) as the start marker and <span class="strong"><strong>Arrow1Mend</strong></span> as the end marker; you can, however, <a id="iddle1236" class="indexterm"/><a id="iddle1771" class="indexterm"/><a id="iddle1801" class="indexterm"/><a id="iddle1876" class="indexterm"/><a id="iddle3868" class="indexterm"/><a id="iddle4896" class="indexterm"/>reverse this choice and have your arrowheads point inward from both ends of the path. Or, you can choose <span class="strong"><strong>Arrow1Mend</strong></span> for all three positions and have all arrowheads on your path point in one direction towards the end of the path (see <span class="strong"><strong><a class="xref" href="ch12s01.html#one2dot1dot1_subpaths" title="12.1.1 Subpaths">12.1.1 Subpaths</a></strong></span> for how to tell the start of a path from its end).</p></li></ul></div><p><span class="strong"><strong>Arrow tail</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>An arrow tail marker is available only in one size (matching the large arrowheads) and one orientation (making sense as an end marker—that is, oriented toward the path start).</p></li></ul></div><p><span class="strong"><strong>Distance measurement markers</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Distance measurement markers are just arrowheads (same shape and slightly smaller than <span class="strong"><strong>Arrow1M</strong></span>) with an added perpendicular straight line at the tip. There are two orientations: <span class="strong"><strong>DistanceStart</strong></span> as a start marker and <span class="strong"><strong>DistanceEnd</strong></span> as an end marker is what you need most of the time.</p></li></ul></div><p><span class="strong"><strong>Geometric shapes</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>There is a collection of geometric shape markers: round dots, squares, diamonds (squares rotated by 45 degrees), equilateral triangles, straight line stops, filled and empty half-circle marks. Most of them have solid black and white-filled variants. Just as arrowheads, these markers come in three sizes (large, medium, and small); some also have start and end orientations (although for symmetric markers such as diamonds, the orientations only differ in the position of the marker relative to its node). The start and end variants of triangle markers can be used as just another arrowhead shape.</p></li></ul></div><p><span class="strong"><strong>Misc markers</strong></span></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>There are several fancy markers, of which the most notable are the <span class="strong"><strong>Scissors</strong></span> (assign it to mid markers to create a typical “cut-off line”) and the “infinite line” ellipsis endings.</p></li></ul></div><p>If your document already uses some markers, these markers will be added to the top of the drop-down marker menus, separated from the standard Inkscape-provided markers below. To remove markers from a path, select <span class="strong"><strong>None</strong></span> from the list.</p><div class="note" title="SVG"><h3 class="title"><a id="ch09note06"/>SVG</h3><p><span class="emphasis"><em>When you assign a marker to a path, Inkscape places a copy of the marker into the document’s</em></span> <code class="literal">defs</code> <span class="emphasis"><em>(<span class="strong"><strong><a class="xref" href="apas04.html" title="A.4 Defs, View, and Metadata">A.4 Defs, View, and Metadata</a></strong></span>) and makes the path refer to the marker in</em></span> <code class="literal">defs</code><span class="emphasis"><em>. The list of the markers above the separator in the marker menus is simply that of the markers in</em></span> <code class="literal">defs</code><span class="emphasis"><em>; if you want to remove some markers you no longer use, use the <span class="strong"><strong>File</strong></span></em></span> ▸ <span class="emphasis"><em><span class="strong"><strong>Vacuum Defs</strong></span> command.</em></span></p></div><div class="sect2" title="9.5.1 Mid Markers and Nodes"><div class="titlepage"><div><div><h2 class="title"><a id="ninedot5dot1_mid_markers_and_nodes"/>9.5.1 Mid Markers and Nodes</h2></div></div></div><p>Start and end markers are simple: Their position on the path is never a surprise (although their orientation may sometimes be, if the end node has a very short Bézier handle, which has very little effect on the shape of the curve but may rotate the marker at this node in some unexpected direction). Mid markers are more interesting: They are located at the middle nodes (<span class="strong"><strong><a class="xref" href="ch12s01.html" title="12.1 The Anatomy of a Path">12.1 The Anatomy of a Path</a></strong></span>) of a path, and the positions of these nodes may not be what you need or even expect.</p><p><a id="iddle1091" class="indexterm"/><a id="iddle2931" class="indexterm"/><a id="iddle2976" class="indexterm"/><a id="iddle3001" class="indexterm"/><a id="iddle3009" class="indexterm"/><a id="iddle4134" class="indexterm"/><a id="iddle4337" class="indexterm"/>A simple use case is a path consisting of straight line fragments (with no Bézier curves). On such a path, mid markers will be displayed at the corners. Use markers which don’t have end or start variants and are thus positioned symmetrically around the node—for example, dots or squares:</p><div class="figure"><a id="mid_markers_at_the_path_joints"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00114"/><img src="httpatomoreillycomsourcenostarchimages1735732.png.jpg" alt="Mid markers at the path joints"/></div></div><p class="title">Figure 9-10. Mid markers at the path joints</p></div><p>Sometimes, you may want to evenly “fill” a path with mid markers, similar to the way the dash pattern is evenly repeated along the path. This is trivial for a simple straight line path, where you can add or remove as many mid nodes as necessary without changing the straight line shape. In a more complex path, however, some nodes may be necessary for the path to have the shape it already has, and you cannot move these nodes along the path without distorting that shape. On the other hand, you also cannot choose to not apply markers to these nodes; in SVG, mid markers apply to all mid nodes without exception. As a result, it may be impossible to distribute markers along a path perfectly evenly; however, the shorter your desired interval between markers and the simpler the path, the less noticeable this inevitable unevenness.</p><p>How can you add nodes to a path without changing its shape, for the purpose of using mid markers? A single new node can be added in the Node tool (<span class="strong"><strong><a class="xref" href="ch12s05.html#one2dot5dot3_deleting_and_creating_nodes" title="12.5.3 Deleting and Creating Nodes">12.5.3 Deleting and Creating Nodes</a></strong></span>) by double-clicking or <span class="inlinemediaobject"><a id="inline_id00371"/><img src="httpatomoreillycomsourcenostarchimages1735556.png.jpg" alt=""/></span>-clicking anywhere on the path. For even distribution of nodes, however, another shortcut is more useful: <span class="inlinemediaobject"><a id="inline_id00372"/><img src="httpatomoreillycomsourcenostarchimages1735734.png.jpg" alt=""/></span> creates a new node in the middle of each segment between selected nodes and adds the new node to the node selection.</p><p>For example, selecting both nodes of a two-node path and hitting <span class="inlinemediaobject"><a id="inline_id00373"/><img src="httpatomoreillycomsourcenostarchimages1735734.png.jpg" alt=""/></span> adds one new node in the middle; now you have three nodes selected with two segments between them, so pressing <span class="inlinemediaobject"><a id="inline_id00374"/><img src="httpatomoreillycomsourcenostarchimages1735734.png.jpg" alt=""/></span> again adds two more nodes; another <span class="inlinemediaobject"><a id="inline_id00375"/><img src="httpatomoreillycomsourcenostarchimages1735734.png.jpg" alt=""/></span> adds four more nodes, and so on. In this simple case, all nodes will be distributed evenly at all times; however, if your path already had some mid nodes, selecting all nodes and hitting <span class="inlinemediaobject"><a id="inline_id00376"/><img src="httpatomoreillycomsourcenostarchimages1735734.png.jpg" alt=""/></span> repeatedly will add nodes more profusely in areas that had more nodes to begin with, as shown in <a class="xref" href="ch09s05.html#adding_mid_nodes_by_pressing_repeatedly" title="Figure 9-11. Adding mid nodes by pressing repeatedly (left) and by using the Add Nodes extension (right)">Figure 9-11</a>.</p><p>Another approach to creating evenly distributed nodes is the <span class="strong"><strong>Add Nodes</strong></span> extension (<span class="strong"><strong><a class="xref" href="ch13s03.html" title="13.3 Path Extensions">13.3 Path Extensions</a></strong></span>). In it, you specify the maximum distance (in <code class="literal">px</code> units) between nodes along the path. In the result, the existing nodes may happen be closer to their neighbors than this distance, but no nodes cannot be farther apart; segments between nodes will be filled by new nodes equally spaced at the specified distance.</p><p>To delete an individual node, in the Node tool <span class="inlinemediaobject"><a id="inline_id00377"/><img src="httpatomoreillycomsourcenostarchimages1735556.png.jpg" alt=""/></span>-click it, or select it and press <span class="inlinemediaobject"><a id="inline_id00378"/><img src="httpatomoreillycomsourcenostarchimages1735352.png.jpg" alt=""/></span>(<span class="strong"><strong><a class="xref" href="ch12s05.html#one2dot5dot3_deleting_and_creating_nodes" title="12.5.3 Deleting and Creating Nodes">12.5.3 Deleting and Creating Nodes</a></strong></span>). A good method to delete all nonessential nodes (those that were added only for the sake of mid markers and do not affect the shape of the path) is to use the <span class="strong"><strong>Simplify</strong></span> command (<span class="strong"><strong><a class="xref" href="ch12s03.html" title="12.3 Simplifying">12.3 Simplifying</a></strong></span>). Of course <span class="strong"><strong>Simplify</strong></span> cannot really <span class="emphasis"><em>know</em></span> which nodes are essential and which are not; it tries to guess it—and usually performs acceptably well, although undesired nodes and some shape distortion are impossible to avoid.</p><div class="figure"><a id="adding_mid_nodes_by_pressing_repeatedly"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00115"/><img src="httpatomoreillycomsourcenostarchimages1735736.png.jpg" alt="Adding mid nodes by pressing repeatedly (left) and by using the Add Nodes extension (right)"/></div></div><p class="title">Figure 9-11. Adding mid nodes by pressing <span class="inlinemediaobject"><a id="inline_id00379"/><img src="httpatomoreillycomsourcenostarchimages1735734.png.jpg" alt=""/></span> repeatedly (left) and by using the Add Nodes extension (right)</p></div></div><div class="sect2" title="9.5.2 Coloring Markers"><div class="titlepage"><div><div><h2 class="title"><a id="ninedot5dot2_coloring_markers"/>9.5.2 Coloring Markers</h2></div></div></div><p><a id="iddle1582" class="indexterm"/><a id="iddle2827" class="indexterm"/><a id="iddle2829" class="indexterm"/><a id="iddle2832" class="indexterm"/><a id="iddle2836" class="indexterm"/><a id="iddle3926" class="indexterm"/><a id="iddle4563" class="indexterm"/><a id="iddle5020" class="indexterm"/>Typically, connector lines in diagrams and flowcharts are black. Therefore, all standard markers provided by Inkscape are either solid black or black with white filling. Unfortunately, even if you assign a different stroke color to a path with markers, this color will only apply to the stroke itself and won’t affect the markers. A red stroke with a black arrowhead is rarely what you had in mind.</p><div class="note" title="SVG"><h3 class="title"><a id="ch09note07"/>SVG</h3><p><span class="emphasis"><em>This problem is rooted in SVG itself. In SVG 1.1, there’s no way to force markers to inherit style parameters from the path they are applied to. However, a workaround for this is planned in SVG 1.2, so adding support for it to Inkscape will eventually resolve this issue.</em></span></p></div><p>The easiest (although still clumsy) workaround for this is the extension called <span class="strong"><strong>Color Markers to Match Stroke</strong></span> in the <span class="strong"><strong>Extensions</strong></span> menu. Simply call it with your path selected, and it will paint the markers with the current stroke color of the path. (If you want a more complex paint job to be done on your markers, see the next section on how to turn a marker into a regular editable object and back.)</p><p>The desynchronization of stroke style and marker style has its advantages, too. Sometimes you may want to use a path only as an invisible string for a rosary of mid markers—in other words, to see the markers but to hide the stroke itself. This is easy: First assign the markers to a stroked path, and then remove the stroke (by middle-clicking the stroke swatch in the selected style indicator, <span class="strong"><strong><a class="xref" href="ch08s04.html" title="8.4 The Selected Style Indicator: Paint Commands">8.4 The Selected Style Indicator: Paint Commands</a></strong></span>).</p><p>Note that markers are always drawn on top of their stroke in z-order. So, if your stroke has a different color than markers, it will only show through from underneath markers if they are transparent.</p></div><div class="sect2" title="9.5.3 Creating New Markers"><div class="titlepage"><div><div><h2 class="title"><a id="ninedot5dot3_creating_new_markers"/>9.5.3 Creating New Markers</h2></div></div></div><p>A marker does not necessarily need to be a single object painted by a solid color. It can consist of any number of objects, grouped or not, with any paint, opacity, or even blur properties—in other words, anything Inkscape can draw can be a marker on a path. Applying such complex markers to paths with many added nodes (<span class="strong"><strong><a class="xref" href="ch09s05.html#ninedot5dot1_mid_markers_and_nodes" title="9.5.1 Mid Markers and Nodes">9.5.1 Mid Markers and Nodes</a></strong></span>) can produce amazing compositions. To make use of this versatility, however, you need to know how to create markers out of objects.</p><p><a id="iddle1523" class="indexterm"/><a id="iddle2184" class="indexterm"/><a id="iddle2825" class="indexterm"/><a id="iddle2837" class="indexterm"/><a id="iddle3151" class="indexterm"/><a id="iddle3319" class="indexterm"/><a id="iddle3770" class="indexterm"/><a id="iddle4367" class="indexterm"/><a id="iddle4411" class="indexterm"/><a id="iddle4967" class="indexterm"/>Generally, it’s as easy as selecting the object or objects and choosing <span class="strong"><strong>Objects to Marker</strong></span> from the <span class="strong"><strong>Object</strong></span> menu. Selected objects disappear, but if you now select any path, open the <span class="strong"><strong>Fill and Stroke</strong></span> dialog, go to the <span class="strong"><strong>Stroke style</strong></span> tab, and open the list of markers, you will see your new marker at the top, in the section listing this document’s markers. (You may need to close and reopen the <span class="strong"><strong>Fill and Stroke</strong></span> dialog to refresh the marker list.)</p><p>When creating the new marker, Inkscape assumes that the original objects are oriented as they should be on a horizontal path that goes from left to right. For example, if you create a new arrowhead that you plan to use as an end marker, make it point horizontally to the right before converting it to a marker.</p><p>Similar to standard markers, the user-created marker will scale up and down as you change the stroke width. Its initial size (the size of the object that you have turned into a marker) corresponds to the 1 px stroke.</p><p>Each marker has an <span class="emphasis"><em>anchor point</em></span>—the point which will coincide with the node to which that marker is attached. When you create a new marker, Inkscape uses the rotation center of the (first) selected object as that anchor point. By default, the rotation center is in the center of the object’s bounding box (<span class="strong"><strong><a class="xref" href="ch04s02.html" title="4.2 The Bounding Box">4.2 The Bounding Box</a></strong></span>), which means the newly created marker will be centered around its node. If you move the rotation center, for example, to one of the corners of the object, the new marker will touch its node by that corner.</p><div class="figure"><a id="creating_a_new_marker_from_a_selected_ob"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00116"/><img src="httpatomoreillycomsourcenostarchimages1735738.png.jpg" alt="Creating a new marker from a selected object"/></div></div><p class="title">Figure 9-12. Creating a new marker from a selected object</p></div><p>Can we do the opposite and convert a path marker to an editable object (perhaps with the intention to make it a marker again after editing)? Yes, although this involves destroying the path that the marker was applied to (so you may want to make a copy of the path first). This is done by choosing the command <span class="strong"><strong>Stroke to Path</strong></span> from the <span class="strong"><strong>Path</strong></span> menu. It turns the stroke into a filled path and, if the original path had markers, groups the converted path with objects that represent former markers. Just ungroup, choose one of the former markers, rotate it into the default orientation, and edit it as necessary.</p><div class="note" title="Note"><h3 class="title"><a id="ch09note08"/>Note</h3><p><span class="emphasis"><em>You can turn a clone (<a class="xref" href="ch16.html" title="Chapter 16. Clones">Chapter 16</a>) into a marker and then continue to edit the original object, with markers being updated live.</em></span></p></div></div><div class="sect2" title="9.5.4 Markers Miscellany"><div class="titlepage"><div><div><h2 class="title"><a id="ninedot5dot4_markers_miscellany"/>9.5.4 Markers Miscellany</h2></div></div></div><p>SVG markers have a few other options that are not yet available via the Inkscape UI but can be accessed by manually editing SVG, best of all in Inkscape’s XML Editor (<span class="strong"><strong><a class="xref" href="ch04s07.html" title="4.7 The XML Editor">4.7 The XML Editor</a></strong></span>). You will need to locate the marker object in the document’s <code class="literal">defs</code> first. Select an object that uses this marker and, in its <code class="literal">style</code> attribute, find the corresponding marker property—for example, <code class="literal">marker-start:url(#Arrow1Lstart)</code>. Note the URL it refers to (in our case, <code class="literal">Arrow1Lstart</code>). Now go to the <code class="literal">defs</code> element <a id="iddle1772" class="indexterm"/><a id="iddle2823" class="indexterm"/><a id="iddle2838" class="indexterm"/><a id="iddle3190" class="indexterm"/>under root <code class="literal">svg</code> and find the <code class="literal">marker</code> element with <code class="literal">id="Arrow1Lstart"</code>. Here’s what you can do by editing that <code class="literal">marker</code> element:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>By default, markers rotate to orient themselves along the path direction. If you want your marker to always have the same orientation regardless of how the path goes in this point, remove the <code class="literal">orient="auto"</code> attribute.</p></li><li class="listitem"><p>If you don’t want a marker to scale up and down when the stroke width is changed, add the attribute <code class="literal">markerUnits</code> with the value <code class="literal">userSpaceOnUse</code> to the <code class="literal">marker</code> element.</p></li></ul></div></div></div></body></html>