<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_66">
<a name="ch04" class="calibre6" id="ch04"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="68" class="calibre16" id="68"/><a name="ch04lev1sec32" class="calibre16" id="ch04lev1sec32"/><span class="chapter-titlelabel">Program 58: </span>Weird Names</h2><p class="b24-bookeditorial">The subroutine <span>tmp_name</span> is designed to return the name of a temporary file. The idea is to generate a unique name each time it is called: <span>/var/tmp/tmp.0</span>, <span>/var/tmp/tmp.1</span>, <span>/var/tmp/tmp.2</span>, ...</p>
<p class="b24-bookeditorial">The names that are generated are certainly unique, but not what the programmer intended.</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 /************************************************
  2  * tmp_test -- test out the tmp_name function.  *
  3  ************************************************/
  4 #include &lt;iostream&gt;
  5 #include &lt;cstdio&gt;
  6 #include &lt;cstring&gt;
  7 #include &lt;sys/param.h&gt;
  8 /************************************************
  9  * tmp_name -- return a temporary file name     *
 10  *                                              *
 11  * Each time this function is called, a new     *
 12  *      name will be returned.                  *
 13  *                                              *
 14  * Returns: Pointer to the new file name.       *
 15  ************************************************/
 16 char *tmp_name(void) {
 17     // The name we are generating
 18     char name[MAXPATHLEN];
 19
 20     // The base of the generated name
 21     const char DIR[] = "/var/tmp/tmp";
 22
 23     // Sequence number for last digit
 24     static int sequence = 0;
 25
 26     ++sequence; /* Move to the next file name */
 27
 28     sprintf(name, "%s.%d", DIR, sequence);
 29     return(name);
 30 }
 31 int main() {
 32     char *a_name = tmp_name();  // A tmp name
 33     std::cout &lt;&lt; "Name: " &lt;&lt; a_name &lt;&lt; std::endl;
 34     return(o);
 35 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#312" target="_parent" class="calibre2">Hint 176</a>. <a href="LiB0121.html#516" target="_parent" class="calibre2">Answer 18</a>.)</p>
</div>
</div>



</body></html>