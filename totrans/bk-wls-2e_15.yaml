- en: Chapter 15. VIRTUAL PRIVATE NETWORKS
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第15章 虚拟专用网络
- en: '![VIRTUAL PRIVATE NETWORKS](tagoreillycom20090210nostarchimages255004.png.jpg)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![虚拟专用网络](tagoreillycom20090210nostarchimages255004.png.jpg)'
- en: The security tools in the Wi-Fi specification are not good enough to protect
    data transmitted through a wireless network. What's the fix? A virtual private
    network (VPN) can add another effective form of security to data that moves from
    a wireless network client to a host that can be located anywhere with a network
    connection.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Wi-Fi规范中的安全工具不足以保护通过无线网络传输的数据。有什么解决办法？虚拟专用网络（VPN）可以为从无线网络客户端到任何有网络连接的主机传输的数据增加另一种有效的安全形式。
- en: A VPN uses a *data tunnel* to connect two points on a network through an encrypted
    channel. The end points can be a single network client and a network server, a
    pair of client computers or other devices, or the gateways to a pair of LANs.
    Data that passes through a public network such as the Internet is completely isolated
    from other network traffic. It uses login and password authentication to restrict
    access to authorized users; it encrypts the data to make it unintelligible to
    intruders who intercept it; and it uses data authentication to maintain the integrity
    of each data packet and to assure that all data originates with legitimate network
    clients.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: VPN使用*数据隧道*通过加密通道连接网络上的两个点。端点可以是一个网络客户端和一个网络服务器、一对客户端计算机或其他设备，或者一对局域网的网关。通过公共网络（如互联网）传输的数据与其他网络流量完全隔离。它使用登录和密码认证来限制对授权用户的访问；它加密数据，使其对拦截它的入侵者来说难以理解；并且它使用数据认证来维护每个数据包的完整性，并确保所有数据都来自合法的网络客户端。
- en: Note
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*VPN functions occur at the IP or network layer of the ISO model. Therefore,
    they can operate on top of the Wi-Fi or other wireless protocols, which operate
    at the physical layer. VPNs can also pass data across a network connection that
    includes more than one physical medium (for example, a wireless link that passes
    data onward to a wired Ethernet network). In other words, a VPN is an end-to-end
    service; it doesn''t matter whether data uses a wireless link, an Ethernet cable,
    an ordinary telephone line, or some combination of those and other transmission
    media. This adds another level of security to (or provides an alternative to)
    WEP or WPA encryption, which only applies to the wireless portion of the network*.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '*VPN功能在ISO模型中的IP或网络层运行。因此，它们可以在物理层运行的Wi-Fi或其他无线协议之上运行。VPN还可以跨越包含多个物理介质（例如，将数据传递到有线以太网网络的无线链路）的网络连接传输数据。换句话说，VPN是一种端到端服务；数据使用无线链路、以太网电缆、普通电话线，或者这些以及其他传输媒体的组合，这都无关紧要。这为（或提供了WEP或WPA加密的替代方案）增加了另一个安全层，后者仅适用于网络的无线部分*。'
- en: In a traditional VPN, a remote user can log in to a distant LAN and obtain all
    the same network services that are available to local clients. VPNs are commonly
    used to extend corporate networks to branch offices and to connect users to the
    LAN from home or from off-site locations such as a client or customer's office.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统的VPN中，远程用户可以登录到远程局域网，并获取与本地客户端可用的所有相同网络服务。VPN通常用于将企业网络扩展到分支机构，以及从家中或从现场位置（如客户或客户的办公室）连接用户到局域网。
- en: A connection through a VPN server presents the same appearance to the rest of
    the network as a client device connected directly to the LAN. The only difference
    is that the data from the VPN passes through a VPN driver and a public network
    instead of moving directly from the network adapter to the LAN. [Figure 15-1](ch15.html#a_remote_network_can_connect_to_a_lan_th
    "Figure 15-1. A remote network can connect to a LAN through a VPN.") shows a typical
    VPN connection to a remote network.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 通过VPN服务器建立的连接对网络中的其他设备来说，看起来就像是一个直接连接到局域网的客户端设备。唯一的区别是，VPN中的数据通过VPN驱动器和公共网络传输，而不是直接从网络适配器传输到局域网。[图15-1](ch15.html#a_remote_network_can_connect_to_a_lan_th
    "图15-1. 通过VPN，远程网络可以连接到局域网。")展示了远程网络到VPN的典型连接。
- en: '![A remote network can connect to a LAN through a VPN.](tagoreillycom20090210nostarchimages254669.png.jpg)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![通过VPN，远程网络可以连接到局域网。](tagoreillycom20090210nostarchimages254669.png.jpg)'
- en: '**Figure 15-1. A remote network can connect to a LAN through a VPN.**'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**图15-1. 通过VPN，远程网络可以连接到局域网。**'
- en: 'All of the same security benefits also apply to a short-range VPN that tunnels
    through a wireless link and a longer-range VPN that starts on a wireless network
    and relays the data to a remote server. These are two different uses for a VPN:
    a *local* VPN that only extends across the wireless portion of a network between
    the client devices and the access point and an *extended network* that carries
    VPN-encoded data beyond the access points to a VPN server through a public network,
    such as the Internet or a dial-up telephone connection.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: An extended network is a traditional VPN that happens to originate from a wireless
    network client. The same VPN can also support connections that don't include a
    wireless segment and logins from public wireless services, such as the ones at
    airports or coffee shops. This is the conventional way to use a VPN.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: Local, short-range VPNs are interesting to people who operate wireless networks
    because they add another layer of security to wireless links. Because the data
    moving between wireless clients and the network access point is encrypted (using
    an algorithm that is more secure than WPA encryption), it is unintelligible to
    any third party who might be monitoring the radio signal; because the VPN server
    at the access point won't accept data links from wireless clients that are not
    using the correct VPN drivers and passwords, an intruder can't break into the
    network by associating a rogue client with the access point.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: The goal of a wireless VPN is to protect the wireless link between the clients
    and the access point and to lock out unauthorized users. Therefore, the isolated
    and encrypted data can only move across a single room rather than hundreds or
    thousands of miles. Of course, the access point might also relay VPN-encoded data
    onward through the Internet to a network host in another location.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '[Figure 15-2](ch15.html#a_vpn_provides_a_secure_connection_betwe "Figure 15-2. A
    VPN provides a secure connection between a wireless network and an Internet gateway
    or a local LAN.") shows a wireless connection to a VPN. The VPN server is located
    between the wireless access point and the host LAN, so all of the packets that
    move through the wireless portion of the network are encoded. For clarity, the
    diagram shows the VPN server as a separate component, but the most practical way
    to add VPN security to a wireless LAN is to use a router or gateway that incorporates
    VPN support. VPN-enabled routers are available from several vendors, including
    Cisco, NETGEAR, and TRENDnet.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: '![A VPN provides a secure connection between a wireless network and an Internet
    gateway or a local LAN.](tagoreillycom20090210nostarchimages254442.png.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
- en: '**Figure 15-2. A VPN provides a secure connection between a wireless network
    and an Internet gateway or a local LAN.**'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: VPN Methods
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A VPN moves data through one or more intermediate networks to a destination
    on another network. The VPN's tunneling client encapsulates the existing data
    packets or frames by adding a new header with the routing information that instructs
    them how to reach the end point of the VPN. The transmission path through the
    intermediate networks is called a tunnel. At the other end of the tunnel, the
    VPN server removes the tunneling header and forwards the data to the destination
    specified by the next layer of headers. The exact form of the tunnel doesn't make
    any difference to the data because the data treats the tunnel as a point-to-point
    connection.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: VPN通过一个或多个中间网络将数据传输到另一个网络上的目的地。VPN的隧道客户端通过添加一个带有路由信息的新头，将现有的数据包或帧封装起来，指示它们如何到达VPN的终点。通过中间网络的传输路径被称为隧道。在隧道的另一端，VPN服务器移除隧道头，并将数据转发到由下一层头指定的目的地。隧道的具体形式对数据没有影响，因为数据将隧道视为点对点连接。
- en: The tunneling headers can take several forms. The methods used most widely in
    VPNs are Point-to-Point Tunneling Protocol (PPTP), Layer Two Tunneling Protocol
    (L2TP), and IP Security (IPsec) mode. PPTP and L2TP can move data through IP,
    IPX, and NetBEUI networks; IPsec is limited to IP networks. Both the client and
    the server must use the same protocol.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 隧道头可以有多种形式。在VPN中最广泛使用的方法是点对点隧道协议（PPTP）、第二层隧道协议（L2TP）和IP安全（IPsec）模式。PPTP和L2TP可以通过IP、IPX和NetBEUI网络传输数据；IPsec仅限于IP网络。客户端和服务器必须使用相同的协议。
- en: In PPTP and L2TP, the client and server must configure the tunnel for each transmission
    before they begin to exchange data. The configuration parameters include the route
    through the intermediate network and the encryption and compression specifications.
    When the transmission is complete, the client and server terminate the connection
    and close the tunnel. Unfortunately, several data security analysts have identified
    significant flaws in PPTP that can allow intruders to break into a VPN based on
    PPTP and sniff passwords, decode encryption, read data, or inflict damage to a
    network server. Therefore, PPTP headers are not secure and should not be used.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在PPTP和L2TP中，客户端和服务器必须在开始交换数据之前为每次传输配置隧道。配置参数包括通过中间网络的路径以及加密和压缩规范。当传输完成后，客户端和服务器终止连接并关闭隧道。不幸的是，一些数据安全分析师已经发现了PPTP的重大缺陷，这可能会允许入侵者突破基于PPTP的VPN，窃取密码，解码加密，读取数据或对网络服务器造成损害。因此，PPTP头不是安全的，不应使用。
- en: In an IPsec network link, the client and server must establish the tunnel through
    the intermediate networks in a separate transaction before they begin to exchange
    data.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在IPsec网络链路中，客户端和服务器必须在开始交换数据之前通过一个单独的事务在中间网络中建立隧道。
- en: 'Both L2TP and IPsec offer specific advantages and disadvantages, but they''re
    both good enough to create a secure link between a wireless network client and
    an access point. The differences among the three are technical rather than practical.
    You can find an excellent explanation of the internal operation of all three protocols
    in Microsoft''s white paper entitled *Virtual Private Networking in Windows 2000:
    An Overview*, which is available online at [http://www.microsoft.com/windows2000/docs/VPNoverview.doc](http://www.microsoft.com/windows2000/docs/VPNoverview.doc)
    (but remember that the flaws in PPTP networks were identified after that white
    paper was written).'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: L2TP和IPsec都各有其特定的优缺点，但它们都足够好，可以创建一个无线网络客户端和接入点之间的安全链接。三者之间的差异主要是技术性的，而不是实际性的。您可以在微软的白皮书《Windows
    2000中的虚拟专用网络：概述》中找到对这三个协议内部操作的优秀解释，该白皮书可在网上找到，网址为[http://www.microsoft.com/windows2000/docs/VPNoverview.doc](http://www.microsoft.com/windows2000/docs/VPNoverview.doc)（但请记住，在撰写该白皮书之后才发现了PPTP网络中的缺陷）。
- en: VPN Servers
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VPN服务器
- en: A VPN server (or host) can be part of a Unix or Windows server, or it can be
    built into a stand-alone network router or gateway. If your network already uses
    a separate computer as a dedicated server, you can use that computer as the VPN
    server. A separate piece of hardware might be a better choice if your network
    does not already have a full-blown network server.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: VPN服务器（或主机）可以是Unix或Windows服务器的一部分，或者可以集成到独立的网络路由器或网关中。如果您的网络已经使用一台单独的计算机作为专用服务器，则可以使用该计算机作为VPN服务器。如果您的网络尚未拥有完整的网络服务器，那么单独的硬件可能是一个更好的选择。
- en: Dozens of VPN equipment makers offer routers, gateways, and other products that
    support one or more of the VPN protocols. Each of these products has a different
    feature set, so it's essential to test the specific combination of client and
    server that you intend to use on your own network before you commit to them. The
    Virtual Private Network Consortium (VPNC) is moving toward a set of interoperability
    tests and certification standards (much like the Wi-Fi standards for wireless
    Ethernet equipment). The VPNC website, [http://www.vpnc.org](http://www.vpnc.org),
    lists the products that have passed the interoperability tests, and it also provides
    links to sources of information about a long list of VPN products.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 数十家VPN设备制造商提供路由器、网关和其他支持一个或多个VPN协议的产品。这些产品各自具有不同的功能集，因此在您决定使用它们之前，测试您自己网络中打算使用的客户端和服务器特定的组合是至关重要的。虚拟专用网络联盟（VPNC）正在朝着一系列互操作性测试和认证标准迈进（类似于无线以太网设备的Wi-Fi标准）。VPNC网站[http://www.vpnc.org](http://www.vpnc.org)列出了通过互操作性测试的产品，并提供有关大量VPN产品的信息来源链接。
- en: Configuring a Windows Server for a Wireless VPN
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置无线VPN的Windows服务器
- en: 'If you''re committed to using a Windows server, you can use either L2TP or
    IPsec with Windows Server 2003 or Windows Server 2008; if your server runs the
    older Windows NT Server 4.0 or Windows 2000 Server software, you''re limited to
    L2TP (or the seriously flawed PPTP). The server also requires two network interface
    cards: one connected to the wired LAN or the Internet gateway and the other connected
    to the wireless network. The interface card that is connected to the wireless
    port normally connects directly to the wireless access point''s Ethernet port.
    The exact process of installing an L2TP host on a Windows server is slightly different
    in each version of Windows, but the general steps are the same. For specific information
    about configuring a particular operating system, consult the online Help screens
    and Microsoft''s Resource Kit and other online documentation for your server''s
    operating system. The following sections describe the configuration steps in general
    terms.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您决定使用Windows服务器，您可以使用L2TP或IPsec与Windows Server 2003或Windows Server 2008一起使用；如果您的服务器运行的是较旧的Windows
    NT Server 4.0或Windows 2000 Server软件，您将限于使用L2TP（或严重有缺陷的PPTP）。服务器还需要两个网络接口卡：一个连接到有线LAN或互联网网关，另一个连接到无线网络。连接到无线端口的接口卡通常直接连接到无线接入点的以太网端口。在Windows服务器上安装L2TP主机的确切过程在每个Windows版本中都略有不同，但一般步骤是相同的。有关配置特定操作系统的具体信息，请参阅在线帮助屏幕和Microsoft为您的服务器操作系统提供的资源包和其他在线文档。以下各节以一般术语描述配置步骤。
- en: Note
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*For more information about deploying and using VPNs with Microsoft servers,
    see the Microsoft TechNet articles linked from* [http://technet.microsoft.com/en-us/network/bb545442.aspx](http://technet.microsoft.com/en-us/network/bb545442.aspx).'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '*有关使用Microsoft服务器部署和配置VPN的更多信息，请参阅从[http://technet.microsoft.com/en-us/network/bb545442.aspx](http://technet.microsoft.com/en-us/network/bb545442.aspx)链接的Microsoft
    TechNet文章*。'
- en: Configure the Connection to the Wired Network
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置有线网络连接
- en: The link to the LAN or other network is a dedicated connection through a network
    adapter. The network connection profile for this connection must include the IP
    address and subnet mask assigned to this connection and the default gateway address
    assigned to the network gateway.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 到局域网或其他网络的链接是通过网络适配器的一个专用连接。此连接的网络连接配置文件必须包括分配给此连接的IP地址和子网掩码，以及分配给网络网关的默认网关地址。
- en: Configure the VPN Connection
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置VPN连接
- en: The VPN connection is usually an Ethernet link to one or more access points.
    The connection profile on the server for the VPN connection must include the IP
    address and subnet mask assigned to this port and the addresses of the DNS and
    WINS name servers used by this network.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: VPN连接通常是一个以太网链路，连接到一个或多个接入点。服务器上用于VPN连接的连接配置文件必须包括分配给此端口的IP地址和子网掩码，以及此网络使用的DNS和WINS名称服务器的地址。
- en: Configure the Remote Access Server as a Router
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 将远程访问服务器配置为路由器
- en: The server must use either static routes or routing protocols that make each
    wireless client reachable from the wired network.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器必须使用静态路由或使每个无线客户端从有线网络可到达的路由协议。
- en: Enable and Configure the Server for L2TP Clients
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 启用并配置服务器以支持L2TP客户端
- en: 'Windows uses Remote Access Service (RAS) and Point-to-Point Protocol (PPP)
    to establish VPN connections. The Routing and Remote Access service enables RAS.
    A VPN connection requires these RAS configuration options:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: Windows使用远程访问服务（RAS）和点对点协议（PPP）来建立VPN连接。路由和远程访问服务启用RAS。VPN连接需要以下RAS配置选项：
- en: '| **Authentication Method** Encrypted PPTP connections use the MS-CHAP or EAP-TLS
    authentication methods. |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| **身份验证方法** 加密PPTP连接使用MS-CHAP或EAP-TLS身份验证方法。 |'
- en: '| **Authentication Provider** Either Windows 2000 security or an external RADIUS
    server can verify network clients. |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| **身份验证提供者** 可以使用Windows 2000安全或外部RADIUS服务器来验证网络客户端。 |'
- en: '| **IP Routing** IP Routing and IP-based remote access must be active. If the
    wired network acts as a DHCP server for the wireless clients, DHCP must be active.
    |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| **IP路由** IP路由和基于IP的远程访问必须处于激活状态。如果有线网络作为无线客户端的DHCP服务器，DHCP必须处于激活状态。 |'
- en: Configure L2TP Ports
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置L2TP端口
- en: Set each L2TP port to accept remote access.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 将每个L2TP端口设置为接受远程访问。
- en: Configure Network Filters
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置网络过滤器
- en: Input and output filters keep the remote access server from sending and receiving
    data that does not originate at a VPN client. These filters will reject data to
    or from unauthorized users, so those intruders will not be able to obtain an Internet
    connection (or a connection to the wired LAN) through the wireless network.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 输入和输出过滤器阻止远程访问服务器发送和接收非VPN客户端起源的数据。这些过滤器将拒绝来自或发送到未经授权用户的数据，因此入侵者将无法通过无线网络获得互联网连接（或有线局域网的连接）。
- en: Configure Remote Access Policies
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置远程访问策略
- en: 'The remote access permission for each wireless client must be set to allow
    access to the RAS server. The port type must be set to the correct VPN protocol
    (e.g., PPTP or L2TP), and the profile for each connection must include the type
    of encryption in use. In Windows, the three encryption strength options are:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 每个无线客户端的远程访问权限必须设置为允许访问RAS服务器。端口类型必须设置为正确的VPN协议（例如，PPTP或L2TP），并且每个连接的配置文件必须包括使用的加密类型。在Windows中，有三个加密强度选项：
- en: '| **Basic** Uses a 40-bit encryption key |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| **基本** 使用40位加密密钥 |'
- en: '| **Strong** Uses a 56-bit encryption key |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| **强** 使用56位加密密钥 |'
- en: '| **Strongest** Uses a 128-bit encryption key |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| **最强** 使用128位加密密钥 |'
- en: VPN Servers for Unix
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Unix VPN服务器
- en: All of the BSD variations (including FreeBSD, NetBSD, OpenBSD, and Mac OS X)
    include an IPsec VPN client and server as part of the release package.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 所有的BSD变体（包括FreeBSD、NetBSD、OpenBSD和Mac OS X）都将IPsec VPN客户端和服务器作为发布包的一部分。
- en: Linux FreeS/WAN is the most popular implementation of IPsec for Linux. Go to
    [http://www.freeswan.org](http://www.freeswan.org) for downloads, documentation,
    and access to the community of FreeS/WAN users.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: Linux FreeS/WAN是Linux上最流行的IPsec实现。请访问[http://www.freeswan.org](http://www.freeswan.org)下载、文档和访问FreeS/WAN用户社区。
- en: OpenVPN is an SSL-based VPN solution for Linux, BSD, OS X, and Windows. It is
    easy to configure and offers both routed VPN (traffic to specific destinations
    is sent through the VPN) and tunneled virtual interfaces (emulating a physical
    layer Ethernet device, which can pass non-IP traffic through the VPN). OpenVPN
    can be found at [http://openvpn.net](http://openvpn.net).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: OpenVPN是Linux、BSD、OS X和Windows的基于SSL的VPN解决方案。它易于配置，提供路由VPN（特定目的地的流量通过VPN发送）和隧道虚拟接口（模拟物理层以太网设备，可以非IP流量通过VPN传输）。OpenVPN可以在[http://openvpn.net](http://openvpn.net)找到。
- en: If you are using a Linux firewall, you might want to consider VPN Masquerade.
    Linux uses the IP Masquerade function in the Linux kernel to share a single connection
    to the Internet among multiple clients. VPN Masquerade is the section of IP Masquerade
    that supports IPsec clients. The HOWTO for Linux VPN Masquerade is at [http://tldp.org/HOWTO/VPN-Masquerade-HOWTO.html](http://tldp.org/HOWTO/VPN-Masquerade-HOWTO.html).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在使用Linux防火墙，您可能需要考虑VPN伪装。Linux使用Linux内核中的IP伪装功能，在多个客户端之间共享单个互联网连接。VPN伪装是支持IPsec客户端的IP伪装部分。Linux
    VPN伪装的HOWTO可以在[http://tldp.org/HOWTO/VPN-Masquerade-HOWTO.html](http://tldp.org/HOWTO/VPN-Masquerade-HOWTO.html)找到。
- en: Network Hardware with Built-in VPN Support
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 带内置VPN支持的网络硬件
- en: A dedicated computer running Linux or one of the BSD versions of Unix can be
    an inexpensive VPN server; if you're using a Windows server for other purposes,
    it can also provide VPN support at little or no additional cost. But a full-size
    network server is often a bigger and more complicated solution to a relatively
    simple problem. They're not always the best choice. Many switches, routers, gateways,
    and firewall devices also include VPN support. Cisco, 3COM, Intel, and many other
    manufacturers make VPN products that are often easier to install and maintain
    than a separate computer.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: In a wireless network, the VPN server does not need all the same bells and whistles
    as a server in a larger corporate network. As [Figure 15-3](ch15s02.html#a_network_router_can_also_act_as_a_vpn_s
    "Figure 15-3. A network router can also act as a VPN server for a wireless network.")
    shows, a router located between the wireless access point and the wired portion
    of an enterprise network can easily double as a VPN server. In a home network,
    the VPN server can operate between the access point and a DSL or cable modem.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: '![A network router can also act as a VPN server for a wireless network.](tagoreillycom20090210nostarchimages253997.png.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
- en: '**Figure 15-3. A network router can also act as a VPN server for a wireless
    network.**'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: Stand-alone VPN client hardware that sits between the computer and the network
    is also available, but it's not as practical in a wireless network because the
    wireless network adapter is almost always plugged directly into the computer itself.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: VPN Client Software
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A wireless client connects to a VPN server through its wireless Ethernet link
    to the network access point, which the operating system sees as a LAN connection.
    To set up a VPN tunnel through that connection, you must install the tunneling
    protocol as a network service.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: Configuring Windows for VPN
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Windows XP and Vista include support for VPNs, but it's not part of the default
    installation, so the first step in setting up a VPN client is to install the protocol.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: 'In Windows XP and Windows Vista, a wizard makes the whole process easy. In
    XP, follow these steps to set up a VPN connection:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: From the Control Panel, open **Network Connections**.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the **New Connection Wizard** icon.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When the Network Connection Type window shown in [Figure 15-4](ch15s03.html#the_option_for_creating_a_vpn_link_speci
    "Figure 15-4. The option for creating a VPN link specifies connecting to a workplace
    network, but it also applies to a wireless VPN.") appears, choose the **Connect
    to the network at my workplace** option.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![The option for creating a VPN link specifies connecting to a workplace network,
    but it also applies to a wireless VPN.](tagoreillycom20090210nostarchimages254435.png.jpg)'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '**Figure 15-4. The option for creating a VPN link specifies connecting to a
    workplace network, but it also applies to a wireless VPN.**'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In the Network Connection window (shown in [Figure 15-5](ch15s03.html#select_the_virtual_private_network_conne
    "Figure 15-5. Select the Virtual private network connection option to create a
    VPN connection.")), choose the **Virtual private network connection** option and
    click the **Next** button.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在网络连接窗口（如图15-5所示），选择**虚拟专用网络连接**选项并点击**下一步**按钮。
- en: In the Connection Name window, type a name for the Wireless VPN connection.
    This name will appear on desktop shortcuts to this connection. Click the **Next**
    button.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在连接名称窗口中，为无线VPN连接输入一个名称。此名称将显示在此连接的桌面快捷方式上。点击**下一步**按钮。
- en: '![Select the Virtual private network connection option to create a VPN connection.](tagoreillycom20090210nostarchimages254575.png.jpg)'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![选择虚拟专用网络连接选项以创建VPN连接。](tagoreillycom20090210nostarchimages254575.png.jpg)'
- en: '**Figure 15-5. Select the Virtual private network connection option to create
    a VPN connection.**'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图15-5. 选择虚拟专用网络连接选项以创建VPN连接。**'
- en: In the Public Network window (shown in [Figure 15-6](ch15s03.html#in_a_wireless_network_the_vpn_does_not_r
    "Figure 15-6. In a wireless network, the VPN does not require a dial-up connection.")),
    choose the **Do not dial the initial connection** option because you don't need
    to connect through a telephone line. Click the **Next** button.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在公共网络窗口（如图15-6所示），选择**不拨初始连接**选项，因为您不需要通过电话线连接。点击**下一步**按钮。
- en: '![In a wireless network, the VPN does not require a dial-up connection.](tagoreillycom20090210nostarchimages254332.png.jpg)'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![在无线网络中，VPN不需要拨号连接。](tagoreillycom20090210nostarchimages254332.png.jpg)'
- en: '**Figure 15-6. In a wireless network, the VPN does not require a dial-up connection.**'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图15-6. 在无线网络中，VPN不需要拨号连接。**'
- en: In the VPN Server Selection window shown in [Figure 15-7](ch15s03.html#the_host_name_or_ip_address_identifies_t
    "Figure 15-7. The Host Name or IP Address identifies the VPN server at the other
    end of the wireless link."), type the IP address of the VPN server.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在如图15-7所示的VPN服务器选择窗口中，输入VPN服务器的IP地址。
- en: '![The Host Name or IP Address identifies the VPN server at the other end of
    the wireless link.](tagoreillycom20090210nostarchimages254057.png.jpg)'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![主机名或IP地址标识了无线链路另一端的VPN服务器。](tagoreillycom20090210nostarchimages254057.png.jpg)'
- en: '**Figure 15-7. The Host Name or IP Address identifies the VPN server at the
    other end of the wireless link.**'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图15-7. 主机名或IP地址标识了无线链路另一端的VPN服务器。**'
- en: Click the **Next** button and then the **Finish** button to complete the wizard.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**按钮，然后点击**完成**按钮以完成向导。
- en: 'In Vista, follow these steps:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在Vista中，按照以下步骤操作：
- en: Open the **Control Panel**.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**控制面板**。
- en: Open the **Network and Sharing Center**.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**网络和共享中心**。
- en: In the list of Tasks on the left side of the Network and Sharing Center shown
    in [Figure 15-8](ch15s03.html#use_the_set_up_a_connection_or_network_o "Figure 15-8. Use
    the Set up a connection or network option to create a VPN link."), choose the
    **Set up a connection or network** option. A Choose a Connection Option window
    will open.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在网络和共享中心左侧的任务列表中（如图15-8所示），选择**设置连接或网络**选项。将打开选择连接选项窗口。
- en: Choose the **Connect to a workplace** option and click the **Next** button.
    The wizard will ask if you want to use an existing connection.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**连接到工作场所**选项并点击**下一步**按钮。向导将询问您是否要使用现有连接。
- en: Choose the **No, create a new connection** option. The wizard will ask if you
    want to use a VPN or a dial-up connection.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**否，创建新的连接**选项。向导将询问您是否要使用VPN或拨号连接。
- en: '![Use the Set up a connection or network option to create a VPN link.](tagoreillycom20090210nostarchimages254757.png.jpg)'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用设置连接或网络选项来创建VPN链接。](tagoreillycom20090210nostarchimages254757.png.jpg)'
- en: '**Figure 15-8. Use the Set up a connection or network option to create a VPN
    link.**'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图15-8. 使用设置连接或网络选项来创建VPN链接。**'
- en: Choose the **Internet connection (VPN)** option. The wizard will ask for details
    in the screen shown in [Figure 15-9](ch15s03.html#use_this_screen_to_configure_your_vpn
    "Figure 15-9. Use this screen to configure your VPN.").
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**互联网连接（VPN）**选项。向导将在如图15-9所示的屏幕中要求详细信息。
- en: '![Use this screen to configure your VPN.](tagoreillycom20090210nostarchimages254187.png.jpg)'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用此屏幕配置您的VPN。](tagoreillycom20090210nostarchimages254187.png.jpg)'
- en: '**Figure 15-9. Use this screen to configure your VPN.**'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图15-9. 使用此屏幕配置您的VPN。**'
- en: Type the VPN server's address provided by the network manager in the Internet
    Address field. This can be either a numeric address or a name.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在互联网地址字段中输入网络管理员提供的VPN服务器地址。这可以是数字地址或名称。
- en: Type the name you want to use on your own computer for this VPN connection in
    the Destination Name field.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目标名称字段中输入您想在您的计算机上使用的VPN连接名称。
- en: If you want to test the connection, click the Next button. If you don't want
    to connect, select the Don't connect now option and click Next. The wizard will
    ask for your name and password.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您想测试连接，请点击**下一步**按钮。如果您不想连接，请选择**现在不连接**选项并点击**下一步**。向导将要求您输入姓名和密码。
- en: Type the name and password you use for this VPN account. If you want your computer
    to automatically send your password, turn on the **Remember this password** option.
    Click the **Create** button to establish the VPN connection and close the wizard.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您用于此VPN账户的名称和密码。如果您想让您的计算机自动发送您的密码，请启用**记住此密码**选项。点击**创建**按钮以建立VPN连接并关闭向导。
- en: 'To create a shortcut to a VPN on your desktop in Windows, follow these steps:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Windows中桌面创建VPN的快捷方式，请按照以下步骤操作：
- en: In XP, open the Control Panel and choose **Network Connections**. In Vista,
    open the Control Panel, choose the **Network and Sharing Center**, and select
    **Manage Network Connections** from the list of Tasks.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在XP中，打开控制面板并选择**网络连接**。在Vista中，打开控制面板，选择**网络和共享中心**，然后从任务列表中选择**管理网络连接**。
- en: From the Network Connections window, right-click the icon or listing for the
    VPN and choose **Create Shortcut** from the pop-up menu.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在网络连接窗口中，右键单击VPN的图标或列表，从弹出菜单中选择**创建快捷方式**。
- en: A pop-up window will ask if you want to place the shortcut on the desktop. Click
    the **Yes** button. A shortcut will appear on the desktop.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将会弹出一个窗口询问您是否要将快捷方式放置在桌面上。点击**是**按钮。桌面将出现一个快捷方式。
- en: The Microsoft L2TP/IPsec VPN Client
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 微软L2TP/IPsec VPN客户端
- en: Microsoft includes a client for Layer Two Tunneling Protocol (L2TP) connections
    with Internet Protocol security (IPsec) in Windows 2000, Windows XP, and Windows
    Vista. A similar client program for Windows 98, Windows Me, and Windows NT Workstation
    4.0 is available for free download from [http://download.microsoft.com/download/win98/Install/1.0/W9XNT4Me/EN-US/msl2tp.exe](http://download.microsoft.com/download/win98/Install/1.0/W9XNT4Me/EN-US/msl2tp.exe).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 微软在Windows 2000、Windows XP和Windows Vista中包含了一个用于具有互联网协议安全（IPsec）的层二隧道协议（L2TP）连接的客户端。对于Windows
    98、Windows Me和Windows NT Workstation 4.0，可以从[http://download.microsoft.com/download/win98/Install/1.0/W9XNT4Me/EN-US/msl2tp.exe](http://download.microsoft.com/download/win98/Install/1.0/W9XNT4Me/EN-US/msl2tp.exe)免费下载类似的客户端程序。
- en: Making the Connection in Windows
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Windows中建立连接
- en: 'When the VPN connection profile is in place, it''s easy to connect a Windows
    client to the host LAN or the Internet through the wireless VPN link: Just double-click
    the icon for the connection profile. Windows will ask for a login and password
    and then make the connection.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 当VPN连接配置文件就绪后，连接Windows客户端到主机LAN或通过无线VPN链接连接到互联网变得容易：只需双击连接配置文件的图标。Windows将要求输入登录名和密码，然后建立连接。
- en: 'If your wireless connection is the method you use most often to connect to
    the Internet, you can make it the default connection, which will open whenever
    you run a network application such as a web browser or email client program. To
    make the VPN profile the default, follow these steps:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的无线连接是您最常用来连接互联网的方法，您可以将其设置为默认连接，这样每次您运行网络应用程序（如网页浏览器或电子邮件客户端程序）时都会打开。要将VPN配置文件设置为默认，请按照以下步骤操作：
- en: Open the **Internet Properties** window from the Control Panel.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从控制面板打开**互联网属性**窗口。
- en: Select the **Connections** tab.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**连接**选项卡。
- en: In the Dial-Up Settings section, select the VPN connection profile from the
    list and click the **Set Default** button.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在拨号设置部分，从列表中选择VPN连接配置文件并点击**设置默认**按钮。
- en: Click the **Settings** button. In the Dial-Up Settings section, type your login
    and password on the VPN server.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**设置**按钮。在拨号设置部分，在VPN服务器上输入您的登录名和密码。
- en: Choose the **Dial whenever a network connection is not present** option.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**在没有网络连接时拨号**选项。
- en: Windows XP Options
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Windows XP选项
- en: 'Windows XP and Windows Vista offer many VPN options that were not available
    in earlier versions of Windows. To set these options, follow these steps:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: Windows XP 和 Windows Vista 提供了许多在早期 Windows 版本中不可用的 VPN 选项。要设置这些选项，请按照以下步骤操作：
- en: Open the **Network Connections** window from the Control Panel. If you have
    a shortcut to your VPN connection on the desktop, you can skip this step.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从控制面板打开 **网络连接** 窗口。如果您在桌面上有 VPN 连接的快捷方式，您可以跳过此步骤。
- en: Double-click the VPN icon. A Connect VPN to Internet window like the one in
    [Figure 15-10](ch15s03.html#use_the_connect_vpn_to_internet_window_t "Figure 15-10. Use
    the Connect VPN to Internet window to configure a VPN in Windows XP.") will appear.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击 VPN 图标。将出现一个类似于 [图 15-10](ch15s03.html#use_the_connect_vpn_to_internet_window_t
    "图 15-10. 使用“连接 VPN 到 Internet”窗口在 Windows XP 中配置 VPN") 中的“连接 VPN 到 Internet”窗口。
- en: '![Use the Connect VPN to Internet window to configure a VPN in Windows XP.](tagoreillycom20090210nostarchimages254893.png.jpg)'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用“连接 VPN 到 Internet”窗口在 Windows XP 中配置 VPN](tagoreillycom20090210nostarchimages254893.png.jpg)'
- en: '**Figure 15-10. Use the Connect VPN to Internet window to configure a VPN in
    Windows XP.**'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 15-10. 使用“连接 VPN 到 Internet”窗口在 Windows XP 中配置 VPN。**'
- en: Click the **Properties** button. The Properties window for your VPN client will
    appear. [Figure 15-11](ch15s03.html#the_general_tab_controls_the_destination "Figure 15-11. The
    General tab controls the destination of a VPN connection.") shows the General
    tab of the VPN to Internet Properties window.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **属性** 按钮。您的 VPN 客户端属性窗口将出现。[图 15-11](ch15s03.html#the_general_tab_controls_the_destination
    "图 15-11. 通用选项卡控制 VPN 连接的目标。") 显示了“连接 VPN 到 Internet”属性窗口的通用选项卡。
- en: '![The General tab controls the destination of a VPN connection.](tagoreillycom20090210nostarchimages254661.png.jpg)'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![通用选项卡控制 VPN 连接的目标](tagoreillycom20090210nostarchimages254661.png.jpg)'
- en: '**Figure 15-11. The General tab controls the destination of a VPN connection.**'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 15-11. 通用选项卡控制 VPN 连接的目标。**'
- en: The IP address of the VPN server should already be visible in the Host Name
    or IP Address of Destination field. The **Dial another connection first** option
    should be disabled. Click the **Networking** tab to view the dialog box shown
    in [Figure 15-12](ch15s03.html#the_networking_tab_controls_the_vpns_net "Figure 15-12. The
    Networking tab controls the VPN's network configuration options.").
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: VPN 服务器的 IP 地址应该已经在“目标的主机名或 IP 地址”字段中可见。**先拨号连接另一个连接**选项应该被禁用。点击 **网络** 选项卡以查看
    [图 15-12](ch15s03.html#the_networking_tab_controls_the_vpns_net "图 15-12. 网络选项卡控制
    VPN 的网络配置选项。") 中显示的对话框。
- en: '![The Networking tab controls the VPN''s network configuration options.](tagoreillycom20090210nostarchimages254728.png.jpg)'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![网络选项卡控制 VPN 的网络配置选项](tagoreillycom20090210nostarchimages254728.png.jpg)'
- en: '**Figure 15-12. The Networking tab controls the VPN''s network configuration
    options.**'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 15-12. 网络选项卡控制 VPN 的网络配置选项。**'
- en: Choose the type of VPN server your network will use from the Type of VPN menu.
    If you don't know the VPN type, choose the Automatic option.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 VPN 服务器类型菜单中选择您的网络将使用的 VPN 服务器类型。如果您不知道 VPN 类型，请选择自动选项。
- en: Select Internet Protocol (TCP/IP) or Internet Protocol Version 4 from the list
    of connection items, and click the **Properties** button to change the network
    settings, including the use of a DHCP server or manual settings for IP address
    and DNS.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从连接项目列表中选择 Internet 协议 (TCP/IP) 或 Internet 协议版本 4，然后点击 **属性** 按钮以更改网络设置，包括使用
    DHCP 服务器或手动设置 IP 地址和 DNS。
- en: Click the **Advanced** tab to open the dialog box shown in [Figure 15-13](ch15s03.html#the_advanced_tab_controls_the_use_of_a_f
    "Figure 15-13. The Advanced tab controls the use of a firewall on the VPN.").
    If your network is not already protected by a firewall, select the Internet connection
    firewall option. This will protect the wireless client from attacks coming through
    the Internet.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **高级** 选项卡以打开 [图 15-13](ch15s03.html#the_advanced_tab_controls_the_use_of_a_f
    "图 15-13. 高级选项卡控制 VPN 上的防火墙使用。") 中显示的对话框。如果您的网络尚未由防火墙保护，请选择互联网连接防火墙选项。这将保护无线客户端免受通过互联网发起的攻击。
- en: '![The Advanced tab controls the use of a firewall on the VPN.](tagoreillycom20090210nostarchimages254720.png.jpg)'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![高级选项卡控制 VPN 上的防火墙使用](tagoreillycom20090210nostarchimages254720.png.jpg)'
- en: '**Figure 15-13. The Advanced tab controls the use of a firewall on the VPN.**'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**图 15-13. 高级选项卡控制 VPN 上的防火墙使用。**'
- en: The Options and Security tabs in the VPN to Internet Properties window control
    connection options that normally don't change from the default settings. Network
    managers who want to change the security settings should instruct their users
    how to configure these options to comply with the network's specific requirements.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: VPN到互联网属性窗口中的“选项”和“安全”选项卡控制通常不会从默认设置更改的连接选项。希望更改安全设置的网管应指导用户如何配置这些选项以满足网络的特定要求。
- en: VPN Clients for Unix
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Unix VPN客户端
- en: Using a VPN client on a computer running Unix is more complicated than running
    a VPN from a Windows machine because the client is not integrated into the kernel.
    Therefore, you must find a client program that works with the version of Unix
    *and* the VPN protocol you are trying to use. No single program offers a universal
    VPN client, and some combinations, such as PPTP on BSD Unix versions, don't seem
    to exist at all.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行Unix的计算机上使用VPN客户端比从Windows机器上运行VPN更复杂，因为客户端没有集成到内核中。因此，您必须找到一个与您要使用的Unix版本和VPN协议兼容的客户端程序。没有单个程序提供通用的VPN客户端，而且某些组合，如BSD
    Unix版本上的PPTP，似乎根本不存在。
- en: IPsec Clients
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: IPsec客户端
- en: 'Linux users can choose from several IPsec implementations:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: Linux用户可以从几个IPsec实现中进行选择：
- en: '| **FreeS/WAN** [http://www.freeswan.org](http://www.freeswan.org) |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| **FreeS/WAN** [http://www.freeswan.org](http://www.freeswan.org) |'
- en: '| **pipsec** [http://perso.enst.fr/~beyssac/pipsec](http://perso.enst.fr/~beyssac/pipsec)
    |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| **pipsec** [http://perso.enst.fr/~beyssac/pipsec](http://perso.enst.fr/~beyssac/pipsec)
    |'
- en: '| **NIST Cerberus** [http://w3.antd.nist.gov/tools/cerberus](http://w3.antd.nist.gov/tools/cerberus)
    |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| **NIST Cerberus** [http://w3.antd.nist.gov/tools/cerberus](http://w3.antd.nist.gov/tools/cerberus)
    |'
- en: IPsec is included in the OpenBSD distribution. You can find a tutorial that
    explains how to use it at [http://www2.papamike.ca:8082/tutorials/pub/obsd_ipsec.html](http://www2.papamike.ca:8082/tutorials/pub/obsd_ipsec.html).
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: IPsec包含在OpenBSD发行版中。您可以在[http://www2.papamike.ca:8082/tutorials/pub/obsd_ipsec.html](http://www2.papamike.ca:8082/tutorials/pub/obsd_ipsec.html)找到解释如何使用它的教程。
- en: The IPsec implementation for FreeBSD is at [http://www.r4k.net/ipsec](http://www.r4k.net/ipsec).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: FreeBSD的IPsec实现位于[http://www.r4k.net/ipsec](http://www.r4k.net/ipsec)。
- en: For information about NetBSD IPsec, take a look at [http://www.netbsd.org/Documentation/network/ipsec](http://www.netbsd.org/Documentation/network/ipsec).
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 关于NetBSD IPsec的信息，请参阅[http://www.netbsd.org/Documentation/network/ipsec](http://www.netbsd.org/Documentation/network/ipsec)。
- en: Using a Wireless VPN
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用无线VPN
- en: When you design a VPN to protect the data on your network as it passes through
    the wireless link, it's important to understand exactly where the end points of
    the VPN tunnel are located. If the VPN only tunnels through the wireless link,
    as shown in [Figure 15-14](ch15s04.html#a_wireless_vpn_with_the_server_at_the_ac
    "Figure 15-14. A wireless VPN with the server at the access point protects data
    through the wireless link, but it does not extend the network."), the network
    will look exactly the same as it does without a VPN.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当你设计VPN以保护通过无线链路传输的网络数据时，了解VPN隧道端点的确切位置非常重要。如果VPN仅通过无线链路进行隧道，如图15-14所示，网络看起来将与没有VPN时完全相同。[图15-14.
    在接入点处服务器的无线VPN通过无线链路保护数据，但它不会扩展网络。](tagoreillycom20090210nostarchimages254824.png.jpg)
- en: '![A wireless VPN with the server at the access point protects data through
    the wireless link, but it does not extend the network.](tagoreillycom20090210nostarchimages254824.png.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![在接入点处服务器的无线VPN通过无线链路保护数据，但它不会扩展网络。](tagoreillycom20090210nostarchimages254824.png.jpg)'
- en: '**Figure 15-14. A wireless VPN with the server at the access point protects
    data through the wireless link, but it does not extend the network.**'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '**图15-14. 在接入点处服务器的无线VPN通过无线链路保护数据，但它不会扩展网络。**'
- en: If the VPN extends beyond the wireless access points to pass through a wide
    area network (such as the Internet), like the one in [Figure 15-15](ch15s04.html#a_vpn_can_include_both_the_wireless_link
    "Figure 15-15. A VPN can include both the wireless link and an intercity connection
    through the Internet to a corporate network."), the wireless network client can
    appear to be part of a LAN in another building or halfway across the continent.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 如果VPN扩展到无线接入点之外，通过广域网（如互联网）传输，如图15-15所示，无线网络客户端似乎可以成为另一栋楼或大陆另一端的局域网的一部分。[图15-15.
    VPN可以包括无线链路和通过互联网到企业网络的城际连接。]
- en: So how far should your wireless VPN extend? It depends on what you want the
    network to accomplish. If your wireless network is in place to support laptop
    and other portable computers at your office, factory, or campus, it makes sense
    to place the server between the network of access points and the connection to
    your corporate LAN. This will protect your wireless users' data and keep unauthorized
    users off the network, but it won't affect the other users whose computers connect
    to the LAN through cables.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，您的无线VPN应该扩展多远？这取决于您希望网络实现什么目标。如果您的无线网络是为了在办公室、工厂或校园支持笔记本电脑和其他便携式计算机，那么将服务器放置在接入点网络和您的企业局域网连接之间是有意义的。这将保护无线用户的数据，并阻止未经授权的用户进入网络，但不会影响通过有线电缆连接到局域网的其它用户。
- en: '![A VPN can include both the wireless link and an intercity connection through
    the Internet to a corporate network.](tagoreillycom20090210nostarchimages254923.png.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![VPN可以包括无线链路以及通过互联网到企业网络的城际连接](tagoreillycom20090210nostarchimages254923.png.jpg)'
- en: '**Figure 15-15. A VPN can include both the wireless link and an intercity connection
    through the Internet to a corporate network.**'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '**图15-15. VPN可以包括无线链路以及通过互联网到企业网络的城际连接。**'
- en: At home or in a small business network, the access points probably connect to
    an Internet gateway router that provides Internet access to all the computers
    in the office or the house. If the access point and the gateway are separate devices,
    you can place the VPN server between the two. If the access point and gateway
    are combined in the same box, you'll either have to use VPN clients on all your
    computers, including the desktop machines that are hardwired to the gateway, and
    place the client between the gateway and the Internet modem like the network in
    [Figure 15-16](ch15s04.html#in_a_small_lan_you_can_use_vpn_clients_o "Figure 15-16. In
    a small LAN, you can use VPN clients on every computer."), or you'll have to ignore
    the wired Ethernet ports on the gateway and add a new hub or switch between the
    VPN server and the Internet modem, as shown in [Figure 15-17](ch15s04.html#in_this_network_the_vpn_only_protects_th
    "Figure 15-17. In this network, the VPN only protects the wireless links.").
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在家庭或小型企业网络中，接入点可能连接到提供办公室或房屋中所有计算机互联网接入的互联网网关路由器。如果接入点和网关是独立的设备，您可以在两者之间放置VPN服务器。如果接入点和网关在同一盒子里，您将不得不在所有计算机上使用VPN客户端，包括连接到网关的有线桌面计算机，并将客户端放置在网关和互联网调制解调器之间，就像[图15-16](ch15s04.html#in_a_small_lan_you_can_use_vpn_clients_o
    "图15-16. 在小型局域网中，您可以在每台计算机上使用VPN客户端。")中的网络一样，或者您将不得不忽略网关上的有线以太网端口，并在VPN服务器和互联网调制解调器之间添加一个新的集线器或交换机，如图15-17](ch15s04.html#in_this_network_the_vpn_only_protects_th
    "图15-17. 在这个网络中，VPN仅保护无线链路。")所示。
- en: '![In a small LAN, you can use VPN clients on every computer.](tagoreillycom20090210nostarchimages254326.png.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![在小型局域网中，您可以在每台计算机上使用VPN客户端。](tagoreillycom20090210nostarchimages254326.png.jpg)'
- en: '**Figure 15-16. In a small LAN, you can use VPN clients on every computer.**'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '**图15-16. 在小型局域网中，您可以在每台计算机上使用VPN客户端。**'
- en: '![In this network, the VPN only protects the wireless links.](tagoreillycom20090210nostarchimages254656.png.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![在这个网络中，VPN仅保护无线链路。](tagoreillycom20090210nostarchimages254656.png.jpg)'
- en: '**Figure 15-17. In this network, the VPN only protects the wireless links.**'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '**图15-17. 在这个网络中，VPN仅保护无线链路。**'
- en: Making the Connection
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 建立连接
- en: If you use the wireless LAN with VPN protection most of the time, you should
    make the VPN profile your default connection. Whenever you run a network application,
    the computer will try to connect through the VPN unless you open a different connection
    (such as a dial-up telephone line) first.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您大部分时间使用带有VPN保护的无线局域网，您应该将VPN配置文件设置为默认连接。每次运行网络应用程序时，计算机都会尝试通过VPN连接，除非您首先打开不同的连接（例如拨号电话线）。
- en: To set a connection profile as the default in Windows, open the **Network Connections**
    window. Right-click the icon for the profile you want to choose, and select the
    **Set as default** option from the menu.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows中设置连接配置文件为默认，请打开**网络连接**窗口。右键单击您想要选择的配置文件的图标，然后从菜单中选择**设置为默认**选项。
- en: To connect to a VPN that isn't your default, double-click the icon for the VPN's
    connection profile. You will see a login window like the one in [Figure 15-18](ch15s04.html#a_vpn_connection_normally_requires_a_log
    "Figure 15-18. A VPN connection normally requires a login name and password.").
    Type your name and password, and click the **Connect** button. If the VPN server
    recognizes your account, it will set up the connection.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: '![A VPN connection normally requires a login name and password.](tagoreillycom20090210nostarchimages254147.png.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
- en: '**Figure 15-18. A VPN connection normally requires a login name and password.**'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: Bypassing the VPN
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Even though you normally use a VPN to protect your wireless data, you might
    sometimes want to send data in the clear without using the VPN. For example, you
    might use a local VPN at your own office or at home between your computer and
    your Internet gateway router, but when you use the same computer at an airport
    or a coffee shop, or some other location that isn't protected by a VPN, you can
    use the same computer and network adapter to connect directly to the Internet.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: If you're a network manager, you might occasionally have to change your Wi-Fi
    network's internal settings. The configuration programs that control the Wi-Fi
    network's operating channel, SSID, and other options are web-based utilities that
    originate on the access point. Because the access point is inside the VPN tunnel,
    it is not possible to send commands to the access point through the VPN. It's
    important to remember that you can use a VPN when you need it and bypass it when
    you want to make a direct connection.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: Using a VPN Through a Public Network
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you connect your laptop to your corporate LAN through a public network
    at an airport or in a conference center, or if you're using a broadband wireless
    service, you can connect through their network to the Internet and onward to your
    corporate VPN server. Because you will have to log in to the public network before
    you initiate the VPN connection, you should create a separate *VPN via Public
    Network* connection profile in addition to the one you use from your own office.
    The profile should point to your corporate VPN server, but it should not be your
    default connection.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: 'To connect through a public network on a computer running Windows, follow these
    steps:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: Turn on the computer with the wireless network adapter in place.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use your wireless configuration utility to select the public network you want
    to use.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Internet Explorer, Netscape Navigator, or some other web browser. You
    will see the public network's login screen.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the computer doesn't do it automatically, enter your account name and password.
    The public network will acknowledge your login.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Minimize the browser window and open the **Network Connections** window or find
    the VPN shortcut on your desktop.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the icon for your VPN via Public Network profile. The computer
    will connect through the Internet to your corporate LAN.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter the login and password for your corporate network.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您企业网络的登录名和密码。
- en: If this procedure doesn't work for your VPN, ask your network manager for help.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 如果此程序对您的VPN不起作用，请向您的网络管理员寻求帮助。
- en: VPNs are an important part of many networks' security plans for off-site users.
    When a VPN is up and running, it's also an extremely convenient way to connect
    to your LAN. With just a few keystrokes or mouse clicks, you can establish the
    same access to your network resources from anywhere with Internet access that
    you can get from your own office. If any Internet technique can eliminate the
    apparent distance between you and your LAN, your office, and your colleagues,
    a VPN is that technique.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: VPN（虚拟私人网络）是许多网络为远程用户制定的安全计划的重要组成部分。当VPN运行时，它也是连接到您的局域网（LAN）的一种极其方便的方式。只需几键或几点击，您就可以从任何有互联网接入的地方获得与您在办公室相同的网络资源访问权限。如果任何互联网技术可以消除您与局域网、办公室和同事之间的明显距离，那么VPN就是这种技术。
