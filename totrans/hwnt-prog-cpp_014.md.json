["```\n  1 /************************************************\n  2  * send_file -- Send a file to a remote link    *\n  3  * (Stripped down for this example.)            *\n  4  ************************************************/\n  5 #include <iostream>\n  6 #include <fstream>\n  7 #include <stdlib.h>\n  8\n  9 // Size of a block\n 10 const int BLOCK_SIZE = 256;\n 11\n 12 /************************************************\n 13  * send_block -- Send a block to the output port*\n 14  ************************************************/\n 15 void send_block(\n 16     std::istream &in_file,   // The file to read\n 17     std::ostream &serial_out // The file to write\n 18 )\n 19 {\n 20     int i;      // Character counter\n 21\n 22     for (i = 0; i < BLOCK_SIZE; ++i) {\n 23         int ch; // Character to copy\n 24\n 25         ch = in_file.get();\n 26         serial_out.put(ch);\n 27         serial_out.flush();\n 28     }\n 29 }\n 30\n 31 int main()\n 32 {\n 33     // The input file\n 34     std::ifstream in_file(\"file.in\");\n 35\n 36     // The output device (faked)\n 37     std::ofstream out_file(\"/dev/null\");\n 38\n 39     if (in_file.bad())\n 40     {\n 41         std::cerr <<\n 42             \"Error: Unable to open input file\\n\";\n 43         exit (8);\n 44     }\n 45\n 46     if (out_file.bad())\n 47     {\n 48         std::cerr <<\n 49             \"Error: Unable to open output file\\n\";\n 50         exit (8);\n 51     }\n 52\n 53     while (! in_file.eof())\n 54     {\n 55         // The original program output\n 56         // a block header here\n 57         send_block(in_file, out_file);\n 58         // The original program output a block\n 59         // trailer here. It also checked for\n 60         // a response and resent the block\n 61         // on error\n 62     }\n 63     return (0);\n 64 }\n\n```"]