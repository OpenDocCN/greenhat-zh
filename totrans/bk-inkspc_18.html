<html><head></head><body><div class="chapter" title="Chapter&#xA0;18.&#xA0;Bitmaps"><div class="titlepage"><div><div><h1 class="title"><a id="bitmaps"/>Chapter 18. Bitmaps</h1></div></div></div><p><a id="iddle1268" class="indexterm"/><a id="iddle1285" class="indexterm"/><a id="iddle1350" class="indexterm"/><a id="iddle2289" class="indexterm"/><a id="iddle2537" class="indexterm"/><a id="iddle2544" class="indexterm"/><a id="iddle2705" class="indexterm"/><a id="iddle3182" class="indexterm"/><a id="iddle3211" class="indexterm"/><a id="iddle3541" class="indexterm"/><a id="iddle4694" class="indexterm"/>Most vector images start or end (sometimes both) their lives as bitmaps (<span class="strong"><strong><a class="xref" href="ch01s01.html" title="1.1 What Vector Graphics Is and Why It Matters">1.1 What Vector Graphics Is and Why It Matters</a></strong></span>), and Inkscape’s SVG documents are no exception. Many vector drawings, artistic as well as technical, are developed from tracings of photos, scans, or other bitmap drawings; at the other end of its lifetime, almost all vector art is eventually exported into bitmap formats for viewing in software that cannot deal directly with vectors. Bitmaps are an important object type in Inkscape, and the techniques for dealing with them are sufficiently versatile to warrant a whole chapter to cover them.</p></div>
<div class="sect1" title="18.1 Import"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot1_import"/>18.1 Import</h1></div></div></div><p>If you have a bitmap image file, you can insert it as a bitmap object into your Inkscape document by using the <span class="strong"><strong>File</strong></span> ▸ <span class="strong"><strong>Import</strong></span> command. Inkscape can deal with a large number of bitmap formats, including all of the major ones (PNG, JPG, TIFF, GIF, and BMP). Choose <span class="strong"><strong>All Bitmaps</strong></span> for the type of the files in the <span class="strong"><strong>Import</strong></span> dialog so that only the supported bitmap formats are in the list.</p><p>Also, you can use <span class="strong"><strong>File</strong></span> ▸ <span class="strong"><strong>Open</strong></span> to display any bitmap file as a document in its own right. In this case, Inkscape automatically creates a new SVG document, its page size (<span class="strong"><strong><a class="xref" href="ch03s04.html#threedot4dot3_page_size" title="3.4.3 Page Size">3.4.3 Page Size</a></strong></span>) matching the pixel size of the bitmap, and places the bitmap on the canvas (into the document root—that is, not in any layer). You can now <a id="iddle1137" class="indexterm"/><a id="iddle1275" class="indexterm"/><a id="iddle1291" class="indexterm"/><a id="iddle1302" class="indexterm"/><a id="iddle1318" class="indexterm"/><a id="iddle1844" class="indexterm"/><a id="iddle2301" class="indexterm"/><a id="iddle2626" class="indexterm"/><a id="iddle3526" class="indexterm"/><a id="iddle4321" class="indexterm"/>add vector objects to that document and save it as SVG (if you want to get a bitmap with the result, you need to export it, <span class="strong"><strong><a class="xref" href="ch18s09.html" title="18.9 Bitmap Export">18.9 Bitmap Export</a></strong></span>), or you can copy and paste the bitmap object from that document into any other.</p><p>In any case, what you now have in your document is a <span class="emphasis"><em>bitmap object</em></span> displaying the bitmap’s contents. In most aspects, this is a regular object that you can transform, duplicate, clone, apply filters to, and so on. In the status bar, it is described as <span class="emphasis"><em>Image</em></span> with its pixel size, for example <span class="emphasis"><em>640 × 480</em></span>.</p><div class="figure"><a id="bitmap_objects_in_a_document_and_the_sta"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00343"/><img src="httpatomoreillycomsourcenostarchimages1736344.png.jpg" alt="Bitmap objects in a document and the status bar display for a selected object"/></div></div><p class="title">Figure 18-1. Bitmap objects in a document and the status bar display for a selected object</p></div><p>Bitmaps consist of pixels (<span class="strong"><strong><a class="xref" href="ch01s01.html" title="1.1 What Vector Graphics Is and Why It Matters">1.1 What Vector Graphics Is and Why It Matters</a></strong></span>), and Inkscape does not attempt to conceal this fact. Just zoom in close enough, and you will easily see the separate pixels in a bitmap object as flat-color squares. By default, all bitmaps are imported at the resolution of 90 pixels per inch, which means the size of each pixel square is exactly 1×1 px (<span class="strong"><strong><a class="xref" href="apas06.html" title="A.6 Coordinates and Units">A.6 Coordinates and Units</a></strong></span>). If you squeeze, skew, or rotate the bitmap, its pixels will be transformed correspondingly.</p></div>
<div class="sect1" title="18.2 Linking vs. Embedding"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot2_linking_vsdot_embedding"/>18.2 Linking vs. Embedding</h1></div></div></div><p>By default, any bitmap you import into Inkscape is <span class="emphasis"><em>linked</em></span> to the document. This means that the actual content of the bitmap is taken from the original bitmap file; what the SVG document contains is just a reference to that file—its filename, including path. This way, the SVG file size is kept to a minimum, and multiple SVG documents can reuse the same bitmap file. The status bar description of a linked bitmap object reports its filename (<a class="xref" href="ch18s01.html#bitmap_objects_in_a_document_and_the_sta" title="Figure 18-1. Bitmap objects in a document and the status bar display for a selected object">Figure 18-1</a>).</p><p>This also means that any changes you do to that linked bitmap file outside of Inkscape (for example, color correction or cropping) will be immediately reflected in the Inkscape document. Moreover, you can run an external editor (such as GIMP or Photoshop) on your linked image from inside Inkscape by right-clicking the bitmap object and choosing <span class="strong"><strong>Edit externally</strong></span>. On the <span class="strong"><strong>Bitmaps</strong></span> page of <span class="strong"><strong>Inkscape Preferences</strong></span> (<span class="strong"><strong><a class="xref" href="ch03s01.html#threedot1dot1_inkscape_preferences" title="3.1.1 Inkscape Preferences">3.1.1 Inkscape Preferences</a></strong></span>), you can disable the automatic reloading of changed bitmaps as well as choose which external editor you want to use.</p><p>The biggest disadvantage of linked bitmaps is how easy it is to disrupt this link. If the bitmap file is deleted or moved to a different location relative to the SVG document, the result is not pretty, as <a class="xref" href="ch18s02.html#this_is_what_inkscape_shows_when_it_cann" title="Figure 18-2. This is what Inkscape shows when it cannot find a linked bitmap file.">Figure 18-2</a> demonstrates.</p><div class="figure"><a id="this_is_what_inkscape_shows_when_it_cann"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00344"/><img src="httpatomoreillycomsourcenostarchimages1736346.png.jpg" alt="This is what Inkscape shows when it cannot find a linked bitmap file."/></div></div><p class="title">Figure 18-2. This is what Inkscape shows when it cannot find a linked bitmap file.</p></div><p><a id="iddle1088" class="indexterm"/><a id="iddle1264" class="indexterm"/><a id="iddle1277" class="indexterm"/><a id="iddle2018" class="indexterm"/><a id="iddle2112" class="indexterm"/><a id="iddle2498" class="indexterm"/><a id="iddle2529" class="indexterm"/>This is a common problem when you send your art to someone but forget to include the linked images.</p><div class="note" title="SVG"><h3 class="title"><a id="ch18note01"/>SVG</h3><p><span class="emphasis"><em>What matters for Inkscape is the relative location of the bitmap, because in the</em></span> <code class="literal">xlink:href</code> <span class="emphasis"><em>attribute of the</em></span> <code class="literal">svg:image</code> <span class="emphasis"><em>object, it stores a</em></span> relative path <span class="emphasis"><em>from the SVG document location to the image file. For example, if the bitmap is in the</em></span> images <span class="emphasis"><em>subfolder of the folder in which your SVG document resides, you can move that folder along with its</em></span> images <span class="emphasis"><em>subfolder to any location on your computer without a problem.</em></span></p><p><span class="emphasis"><em>Moreover, Inkscape to some extent protects you against a situation where you move the SVG document to another location on the same computer but leave the linked image behind. Inkscape additionally stores the</em></span> absolute path <span class="emphasis"><em>to the image in the</em></span> <code class="literal">sodipodi:absref</code> <span class="emphasis"><em>attribute and tries to use it if the relative link in</em></span> <code class="literal">xlink:href</code> <span class="emphasis"><em>fails. This won’t help, however, if you move your SVG onto a different computer without its associated images.</em></span></p></div><p>There is a way to prevent these linking problems once and for all by <span class="emphasis"><em>embedding</em></span> an image into your SVG document. An embedded image is stored right inside the SVG file and will never be lost. On the downside, this increases the file size of the SVG file (by about 1.4 times the file size of the bitmap file, which may be significant); also, embedded images cannot be edited in an external bitmap editor.</p><p>To embed one or more images into the document, use <span class="strong"><strong>Extensions</strong></span> ▸ <span class="strong"><strong>Images</strong></span> ▸ <span class="strong"><strong>Embed Images</strong></span>. You have the choice of embedding only the selected bitmap object (leaving all others as they are) or embedding all the bitmap objects in the document:</p><div class="figure"><a id="extensions_rtrif_images_rtrif_embed_imag"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00345"/><img src="httpatomoreillycomsourcenostarchimages1736348.png.jpg" alt="Extensions ▸ Images ▸ Embed Images embeds either all or just selected images into SVG."/></div></div><p class="title">Figure 18-3. Extensions ▸ Images ▸ Embed Images embeds either all or just selected images into SVG.</p></div><p>An embedded image is described in the status bar as, for example, <span class="emphasis"><em>Image 64 × 64: embedded</em></span>. With <span class="strong"><strong>Extensions</strong></span> ▸ <span class="strong"><strong>Images</strong></span> ▸ <span class="strong"><strong>Extract Image</strong></span>, you can reverse the embedding of a bitmap—that is, extract an embedded image into a separate linked file; you will be asked for the path to save the extracted file to.</p></div>
<div class="sect1" title="18.3 Bitmap as Pattern"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot3_bitmap_as_pattern"/>18.3 Bitmap as Pattern</h1></div></div></div><p><a id="iddle1274" class="indexterm"/><a id="iddle1320" class="indexterm"/><a id="iddle1511" class="indexterm"/><a id="iddle1515" class="indexterm"/><a id="iddle1774" class="indexterm"/><a id="iddle2151" class="indexterm"/><a id="iddle2943" class="indexterm"/><a id="iddle2956" class="indexterm"/><a id="iddle3303" class="indexterm"/><a id="iddle3421" class="indexterm"/><a id="iddle3654" class="indexterm"/><a id="iddle3674" class="indexterm"/><a id="iddle3677" class="indexterm"/><a id="iddle3689" class="indexterm"/><a id="iddle4104" class="indexterm"/><a id="iddle4757" class="indexterm"/>Usually, the first thing you’d want to do to an imported bitmap is <span class="emphasis"><em>crop</em></span> it, removing the unnecessary margins and only leaving part of the image. In Inkscape, there are several ways to achieve this.</p><p>If you want the bitmap to remain a rectangle and you only want to shave off some margins, it is convenient to turn it into a <span class="emphasis"><em>pattern</em></span> (<span class="strong"><strong><a class="xref" href="ch10s08.html" title="10.8 Patterns">10.8 Patterns</a></strong></span>) by pressing <span class="inlinemediaobject"><a id="inline_id00782"/><img src="httpatomoreillycomsourcenostarchimages1735694.png.jpg" alt=""/></span>. This does not change the visible display but converts a rectangular bitmap (it must not be rotated or skewed for this to work properly) into a rectangle object (<span class="strong"><strong><a class="xref" href="ch11s02.html" title="11.2 Rectangles">11.2 Rectangles</a></strong></span>) with a pattern fill displaying the bitmap.</p><p>Now you can resize the rectangle using its two corner handles, for example with the Node or Rectangle tool (<span class="strong"><strong><a class="xref" href="ch11s02.html#one1dot2dot1_sizing" title="11.2.1 Sizing">11.2.1 Sizing</a></strong></span>). This does not affect the fill, which means you can crop it by moving the rectangle handles inward. At the same time, you can also use the pattern’s three handles to move, scale, and rotate the pattern, as described in <span class="strong"><strong><a class="xref" href="ch10s08.html#one0dot8dot2_editing_patterns" title="10.8.2 Editing Patterns">10.8.2 Editing Patterns</a></strong></span>. (Initially, the pattern handles coincide with the rectangle handles; drag the X-shaped handle in the top-left corner to separate them.)</p><div class="figure"><a id="bitmap_as_a_pattern_in_a_rectangle"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00346"/><img src="httpatomoreillycomsourcenostarchimages1736350.png.jpg" alt="A bitmap as a pattern in a rectangle"/></div></div><p class="title">Figure 18-4. A bitmap as a pattern in a rectangle</p></div><p>After you convert your bitmap to a patterned rectangle, you can turn the rectangle into any other path—for example, by converting it to path by <span class="inlinemediaobject"><a id="inline_id00783"/><img src="httpatomoreillycomsourcenostarchimages1735780.png.jpg" alt=""/></span> and node-editing the result, or by intersecting (<span class="strong"><strong><a class="xref" href="ch12s02.html" title="12.2 Boolean Operations">12.2 Boolean Operations</a></strong></span>) the rectangle with a path. This method is convenient because you can edit the shape or path and its bitmap fill at the same time. Transforming, by default, affects both the shape/path and its pattern fill; see <span class="strong"><strong><a class="xref" href="ch06s10.html" title="6.10 What Transformations Affect">6.10 What Transformations Affect</a></strong></span> for how to change that.</p></div>
<div class="sect1" title="18.4 Clipping and Masking"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot4_clipping_and_masking"/>18.4 Clipping and Masking</h1></div></div></div><p>Another approach to cropping images is to use <span class="emphasis"><em>clipping</em></span> or <span class="emphasis"><em>masking</em></span>. Although here, these techniques are illustrated by bitmap objects, you can in fact clip or mask any kind of object, including groups.</p><p>Inkscape allows any object to be clipped by a path, so that only the part of the object inside that path will be visible. Starting from a bitmap object, draw a clipping path or shape over it using any convenient tool—for example, Calligraphic pen or Pencil. Then, select both the bitmap and the path and choose <span class="strong"><strong>Object</strong></span> ▸ <span class="strong"><strong>Clip</strong></span> ▸ <span class="strong"><strong>Set</strong></span>. The clipping path disappears (it now resides in <code class="literal">defs</code>, <span class="strong"><strong><a class="xref" href="apas04.html" title="A.4 Defs, View, and Metadata">A.4 Defs, View, and Metadata</a></strong></span>) but the bottom object is now clipped by it. To edit the clipping path without unclipping, click the corresponding button in the Node tool’s controls bar, as shown in <a class="xref" href="ch18s04.html#applying_clipping_to_a_bitmap_object" title="Figure 18-5. Applying clipping to a bitmap object">Figure 18-5</a>.</p><div class="figure"><a id="applying_clipping_to_a_bitmap_object"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00347"/><img src="httpatomoreillycomsourcenostarchimages1736352.png.jpg" alt="Applying clipping to a bitmap object"/></div></div><p class="title">Figure 18-5. Applying clipping to a bitmap object</p></div><p><a id="iddle1280" class="indexterm"/><a id="iddle2845" class="indexterm"/><a id="iddle2849" class="indexterm"/><a id="iddle2851" class="indexterm"/><a id="iddle3102" class="indexterm"/><a id="iddle3704" class="indexterm"/><a id="iddle3705" class="indexterm"/><a id="iddle4105" class="indexterm"/>At any time, you can do <span class="strong"><strong>Object</strong></span> ▸ <span class="strong"><strong>Clip</strong></span> ▸ <span class="strong"><strong>Release</strong></span> to remove the clipping and get the object and its clipping path as two separate objects again.</p><div class="note" title="Note"><h3 class="title"><a id="ch18note02"/>Note</h3><p><span class="emphasis"><em>The clipping path needs not be a single path; it can just as well be a group of paths.</em></span></p></div><p>Masking is very similar to clipping: You select the object and the mask and choose <span class="strong"><strong>Object</strong></span> ▸ <span class="strong"><strong>Mask</strong></span> ▸ <span class="strong"><strong>Set</strong></span> to mask it, or <span class="strong"><strong>Object</strong></span> ▸ <span class="strong"><strong>Mask</strong></span> ▸ <span class="strong"><strong>Release</strong></span> to remove the mask. The main difference between clipping and masking is that a clip limits the object to the interior of the clipping path, disregarding any embellishments such as fill color, stroke style, gradient, or blur. Clipping is <span class="emphasis"><em>binary</em></span>; at any point, the clipped object is either visible or not. Masking, however, is <span class="emphasis"><em>gradual</em></span>—it may make an object <span class="emphasis"><em>partially</em></span> transparent.</p><p>The rule to remember is this: In a mask, <span class="emphasis"><em>black</em></span> makes masked objects <span class="emphasis"><em>transparent</em></span> (invisible) and <span class="emphasis"><em>white</em></span> makes them <span class="emphasis"><em>opaque</em></span> (visible). What’s more, the “no color” fill or full transparency in a mask is considered “transparent black”—that is, areas of the object not covered by a mask at all or areas that fall into gaps or holes in a mask disappear. To make a part of an object visible, the mask over that part must be non-black; pure opaque white gives 100 percent opacity in the masked object, while anything darker or more transparent produces less than 100 percent opacity.</p><p>Obviously, masking is most useful when you use gradients or blurring. For example, you can easily blend a photo strip with the background (using linear gradient mask) or feather the irregular edges of a photo cutout (using blurred mask):</p><div class="figure"><a id="applying_masking_to_a_bitmap_object"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00348"/><img src="httpatomoreillycomsourcenostarchimages1736354.png.jpg" alt="Applying masking to a bitmap object"/></div></div><p class="title">Figure 18-6. Applying masking to a bitmap object</p></div><p>Just as a clipping path, a mask can be a group of objects instead of a single object. The Node tool has another button for editing the mask of the selected object. Unfortunately, this button only allows you to node-edit the single path or shape of the mask—you can’t change its color, gradient, or blur; for this, you need to release the mask and set it again after changing.</p></div>
<div class="sect1" title="18.5 Retouching and Patching"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot5_retouching_and_patching"/>18.5 Retouching and Patching</h1></div></div></div><p><a id="iddle1270" class="indexterm"/><a id="iddle1276" class="indexterm"/><a id="iddle1282" class="indexterm"/><a id="iddle1337" class="indexterm"/><a id="iddle1625" class="indexterm"/><a id="iddle1921" class="indexterm"/><a id="iddle1925" class="indexterm"/><a id="iddle2103" class="indexterm"/><a id="iddle2210" class="indexterm"/><a id="iddle2360" class="indexterm"/><a id="iddle2528" class="indexterm"/><a id="iddle2564" class="indexterm"/><a id="iddle3521" class="indexterm"/><a id="iddle3634" class="indexterm"/><a id="iddle3719" class="indexterm"/><a id="iddle4686" class="indexterm"/><a id="iddle4854" class="indexterm"/>Simple bitmap editing tasks, such as removing defects or suppressing unnecessary details, are entirely possible in Inkscape using its vector tools, without resorting to an external bitmap editor. While this approach is limited, it is often surprisingly useful and fast.</p><p>Imagine we need to remove a small blemish in a photo. Start by zooming in closely and drawing a calligraphic stroke over it; then, switch to the Dropper tool and pick a color from the photo nearby. In some cases, this may be all you really need—even such a primitive patch may blend well enough to not be noticeable once you zoom out. More likely, however, the edges of the patch will be painfully obvious on at least one side. Here, a gradient may help; switch to the Gradient tool (<span class="strong"><strong><a class="xref" href="ch10s01.html" title="10.1 The Gradient Tool">10.1 The Gradient Tool</a></strong></span>), draw a linear or elliptic gradient trying to match the dominant direction of color change in the background, and use the Dropper tool again (<span class="strong"><strong><a class="xref" href="ch08s06.html" title="8.6 The Dropper Tool">8.6 The Dropper Tool</a></strong></span>) to pick colors for the gradient stops. If the gradient failed to make the patch completely blend into the background, see if a little blurring helps:</p><div class="figure"><a id="covering_a_small_blemish_on_the_cheek_wi"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00349"/><img src="httpatomoreillycomsourcenostarchimages1736356.png.jpg" alt="Covering a small blemish on the cheek with a vector patch path, made “invisible” by gradient and blur"/></div></div><p class="title">Figure 18-7. Covering a small blemish on the cheek with a vector patch path, made “invisible” by gradient and blur</p></div><p>When you’re done retouching, don’t forget to group the bitmap object with all its vector patches so the group can be moved as a single object.</p></div>
<div class="sect1" title="18.6 Bitmap Filters"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot6_bitmap_filters"/>18.6 Bitmap Filters</h1></div></div></div><p>Some of the preset filters (<span class="strong"><strong><a class="xref" href="ch17s03.html" title="17.3 Preset Filters">17.3 Preset Filters</a></strong></span>), collected in <span class="strong"><strong>Filters</strong></span> ▸ <span class="strong"><strong>Image Effects</strong></span>, are specifically designed for bitmaps (<a class="xref" href="ch17s03.html#filters_from_the_image_effects_submenu" title="Figure 17-12. Filters from the Image Effects submenu">Figure 17-12</a>). Of course, you can apply these filters to any other objects or apply any other filters to bitmaps; this submenu simply collects those filters that make sense <span class="emphasis"><em>mostly</em></span> for bitmaps because they operate on the internal colors or textures of an object, not its overall shape.</p></div>
<div class="sect1" title="18.7 Bitmap Effects"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot7_bitmap_effects"/>18.7 Bitmap Effects</h1></div></div></div><p>All of the techniques described so far, while essential for dealing with bitmaps, are equally applicable to any kind of object. However, Inkscape also has a number of “genuinely bitmap” extension effects, collected in the <span class="strong"><strong>Extensions</strong></span> ▸ <span class="strong"><strong>Raster</strong></span> submenu. (Refer to <span class="strong"><strong><a class="xref" href="ch13s03.html" title="13.3 Path Extensions">13.3 Path Extensions</a></strong></span> for general tips on working with extension effects.)</p><p>Unlike the SVG filters we just saw, all these effects make permanent changes to the bitmap; they can be undone—but you cannot, for example, readjust the parameters of such an effect after it is applied. Also unlike filters, these effects can work <span class="emphasis"><em>only</em></span> on bitmap objects; you cannot, for example, apply a bitmap <a id="iddle1095" class="indexterm"/><a id="iddle1271" class="indexterm"/><a id="iddle1292" class="indexterm"/><a id="iddle1371" class="indexterm"/><a id="iddle1463" class="indexterm"/><a id="iddle1465" class="indexterm"/><a id="iddle1466" class="indexterm"/><a id="iddle1474" class="indexterm"/><a id="iddle1531" class="indexterm"/><a id="iddle1674" class="indexterm"/><a id="iddle1756" class="indexterm"/><a id="iddle1782" class="indexterm"/><a id="iddle2025" class="indexterm"/><a id="iddle2040" class="indexterm"/><a id="iddle2501" class="indexterm"/><a id="iddle2509" class="indexterm"/><a id="iddle2785" class="indexterm"/><a id="iddle2786" class="indexterm"/><a id="iddle2854" class="indexterm"/><a id="iddle3061" class="indexterm"/><a id="iddle3702" class="indexterm"/><a id="iddle3808" class="indexterm"/><a id="iddle4685" class="indexterm"/>effect to a clone of a bitmap. If the bitmap is linked, these effects embed it and work on the embedded copy, not on the external linked original.</p><p>There are over 30 raster effects; only those most useful (and not easily achievable via filters) are listed here:</p><div class="figure"><a id="examples_of_extension_effects_from_exten"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00350"/><img src="httpatomoreillycomsourcenostarchimages1736358.png.jpg" alt="Examples of extension effects from Extensions ▸ Raster"/></div></div><p class="title">Figure 18-8. Examples of extension effects from Extensions ▸ Raster</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="strong"><strong>Add Noise</strong></span> gives you a choice of various types of noise to overlay on your image; most types look more or less like scattered sand.</p></li><li class="listitem"><p><span class="strong"><strong>Channel</strong></span> takes one channel from the bitmap (one of R/G/B, C/M/Y/K, opacity, or matte).</p></li><li class="listitem"><p><span class="strong"><strong>Charcoal</strong></span> turns your image into an imitation of a charcoal drawing. Increasing <span class="strong"><strong>Radius</strong></span> makes the strokes rougher, while raising <span class="strong"><strong>Sigma</strong></span> makes the drawing darker overall.</p></li><li class="listitem"><p><span class="strong"><strong>Contrast</strong></span> increases the contrast (difference between lights and darks). You can apply it several times for more effect.</p></li><li class="listitem"><p><span class="strong"><strong>Cycle Colormap</strong></span> cycles the colormap of a bitmap.</p></li><li class="listitem"><p><span class="strong"><strong>Despeckle</strong></span>, <span class="strong"><strong>Enhance</strong></span>, and <span class="strong"><strong>Reduce Noise</strong></span> implement various noise reduction algorithms.</p></li><li class="listitem"><p><span class="strong"><strong>Equalize</strong></span> applies histogram equalization to the image.</p></li><li class="listitem"><p><span class="strong"><strong>Level</strong></span> blackens pixels that are darker than the <span class="strong"><strong>Black Point</strong></span>, whitens pixels brighter than the <span class="strong"><strong>White Point</strong></span>, and scales those that fall within this range to the full color range. <span class="strong"><strong>Gamma Correction</strong></span> specifies additional brightness correction (1 means no change).</p></li><li class="listitem"><p><span class="strong"><strong>Level (with Channel)</strong></span> is the same as <span class="strong"><strong>Level</strong></span> but for a single channel only.</p></li><li class="listitem"><p><span class="strong"><strong>Median</strong></span> paints each pixel with the median color of its circular neighborhood, for an effect similar to blurring.</p></li><li class="listitem"><p><span class="strong"><strong>HSB Adjust</strong></span> adjusts the hue (in the range of –360 to 360), saturation (–200 to 200), and brightness (–200 to 200).</p></li><li class="listitem"><p><span class="strong"><strong>Normalize</strong></span> increases contrast by expanding the color range of pixels to the full range of color (for example, if the image has no reds, all colors will be stretched in the direction of the red to compensate for that).</p></li><li class="listitem"><p><span class="strong"><strong>Resample</strong></span> is perhaps the most practically useful of all image effects: It allows you to change the pixel size of the bitmap without scaling it. Resampling <span class="emphasis"><em>up</em></span> (i.e., making a bitmap larger than its current pixel size) does not change the appearance of an image but may be useful if you plan to apply some other effect and want it to work with higher resolution. Resampling <span class="emphasis"><em>down</em></span> (to a smaller-than-current size) makes the image lose detail without changing <a id="iddle1299" class="indexterm"/><a id="iddle1303" class="indexterm"/><a id="iddle1814" class="indexterm"/><a id="iddle2997" class="indexterm"/><a id="iddle3453" class="indexterm"/><a id="iddle3471" class="indexterm"/><a id="iddle3474" class="indexterm"/><a id="iddle3502" class="indexterm"/><a id="iddle3716" class="indexterm"/><a id="iddle4258" class="indexterm"/><a id="iddle4339" class="indexterm"/><a id="iddle4529" class="indexterm"/><a id="iddle4727" class="indexterm"/><a id="iddle4734" class="indexterm"/><a id="iddle4891" class="indexterm"/><a id="iddle4927" class="indexterm"/>its dimensions in the document; this is a good way to reduce the file size of an SVG document with an embedded bitmap.</p></li><li class="listitem"><p><span class="strong"><strong>Dither</strong></span> randomly scatters pixels in a bitmap, with <span class="strong"><strong>Amount</strong></span> specifying the radius of scattering.</p></li><li class="listitem"><p><span class="strong"><strong>Swirl</strong></span> swirls the bitmap in a spiral around its center.</p></li><li class="listitem"><p><span class="strong"><strong>Unsharp Mask</strong></span> sharpens the image using the popular “unsharp mask” algorithm.</p></li><li class="listitem"><p><span class="strong"><strong>Wave</strong></span> warps the image along a horizontal sine wave with the given amplitude and wavelength.</p></li></ul></div></div>
<div class="sect1" title="18.8 Tracing"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot8_tracing"/>18.8 Tracing</h1></div></div></div><p>For a vector editor, one of the most important bitmap-related capabilities is converting bitmap objects to vectors (<span class="emphasis"><em>tracing</em></span>) and vice versa (<span class="emphasis"><em>bitmap export</em></span>). Inkscape offers rich and powerful tools for these conversions, which the rest of this chapter will cover in detail.</p><div class="sect2" title="18.8.1 Manual Tracing"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot8dot1_manual_tracing"/>18.8.1 Manual Tracing</h2></div></div></div><p>The most straightforward approach to creating vector art from a bitmap image does not involve any tools except those we already know. Just switch to the Pen tool (<span class="strong"><strong><a class="xref" href="ch14s01.html" title="14.1 The Pen Tool">14.1 The Pen Tool</a></strong></span>), zoom in on your bitmap, and do a series of clicks around or along an area that you want to turn into a vector path, then double-click or press <span class="inlinemediaobject"><a id="inline_id00784"/><img src="httpatomoreillycomsourcenostarchimages1735344.png.jpg" alt=""/></span> to finish the path. Use click-and-release in a sharp corner to create a cusp node; for smooth curved edges, use a series of click-and-drags in critical nodes:</p><div class="figure"><a id="manual_tracing_of_a_bitmap"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00351"/><img src="httpatomoreillycomsourcenostarchimages1736360.png.jpg" alt="Manual tracing of a bitmap"/></div></div><p class="title">Figure 18-9. Manual tracing of a bitmap</p></div><p>You can vary the density of your clicks depending on how precisely you want to trace a specific area. If you want the shape to be extra smooth, switch to the Spiro mode (<span class="strong"><strong><a class="xref" href="ch13s01.html#one3dot1dot7_spiro_spline" title="13.1.7 Spiro Spline">13.1.7 Spiro Spline</a></strong></span>); in this mode, it does not matter in which direction you drag after clicking, just as long as you drag a bit <span class="emphasis"><em>somewhere</em></span> to create a smooth node. If you’re tracing a polygon without any curves at all, it is convenient to use the Straight lines mode so that an accidental drag does not create an undesired smooth node.</p><p><a id="iddle3575" class="indexterm"/><a id="iddle4711" class="indexterm"/><a id="iddle4713" class="indexterm"/><a id="iddle4714" class="indexterm"/><a id="iddle4732" class="indexterm"/>While this technique may seem time-consuming at first, once you get the hang of it, you will be able to trace complex art very quickly. Like any manual technique, its main advantage is the complete creative control—you decide what parts to trace and what to ignore, how to simplify complex shapes, where to diverge from the bitmap blueprint, and where to place each node. Depending on your skill, the result will likely look much more satisfying than either an automatic trace or a fully manual drawing.</p></div><div class="sect2" title="18.8.2 The Trace Bitmap Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot8dot2_the_trace_bitmap_dialog"/>18.8.2 The Trace Bitmap Dialog</h2></div></div></div><p>Inkscape’s tool for automatic bitmap tracing is very powerful; based on the standalone Potrace open source tracer (<span class="emphasis"><em><a class="ulink" href="http://potrace.sourceforge.net">http://potrace.sourceforge.net</a></em></span>), it is acknowledged to be one of the best tools of its kind in modern vector editors. With it, you can trace anything from a simple black-and-white logo that needs just a few nodes to a complex photo that produces dozens of colored paths with thousands of nodes.</p><div class="figure"><a id="trace_bitmap_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00352"/><img src="httpatomoreillycomsourcenostarchimages1736362.png.jpg" alt="The Trace Bitmap dialog"/></div></div><p class="title">Figure 18-10. The Trace Bitmap dialog</p></div><p>The <span class="strong"><strong>Trace Bitmap</strong></span> dialog (<span class="inlinemediaobject"><a id="inline_id00785"/><img src="httpatomoreillycomsourcenostarchimages1736364.png.jpg" alt=""/></span>) has two main areas: the options panel on the left and the preview panel on the right. Note, however, that the preview panel does not show you the traced vector path (that may be time-consuming to create); instead, you see the bitmap you’re tracing with all the color reduction and filtering steps as specified in the options panel. To update the preview after the options have changed, click <span class="strong"><strong>Update</strong></span>.</p><p>To perform the actual trace of the selected bitmap object, click <span class="strong"><strong>OK</strong></span>. For a large bitmap, this may be slow; watch the status bar for progress messages. You can interrupt tracing at any time by clicking the <span class="strong"><strong>Stop</strong></span> button.</p><p>The <span class="strong"><strong>Mode</strong></span> tab of the dialog chooses the principal mode of operation of the tracing tool. The available modes are divided into two groups: the <span class="emphasis"><em>single-scan modes</em></span> create a single path, while the <span class="emphasis"><em>multiple-scan modes</em></span> create multiple paths (grouped together).</p><div class="sect3" title="18.8.2.1 Brightness Cutoff"><div class="titlepage"><div><div><h3 class="title"><a id="one8dot8dot2dot1_brightness_cutoff"/>18.8.2.1 Brightness Cutoff</h3></div></div></div><p><span class="strong"><strong>Brightness cutoff</strong></span> is the simplest and most common approach to tracing a path: The resulting path covers anything that is darker than the threshold you set. This trace path, while a single object, can consist of multiple nonoverlapping <a id="iddle1304" class="indexterm"/><a id="iddle4717" class="indexterm"/><a id="iddle4735" class="indexterm"/>subpaths (<span class="strong"><strong><a class="xref" href="ch12s01.html#one2dot1dot1_subpaths" title="12.1.1 Subpaths">12.1.1 Subpaths</a></strong></span>). The <span class="strong"><strong>Threshold</strong></span> is set as a fraction of the entire brightness range of the image; for example, when set to 0.6, the trace path covers all the areas in the darkest 60 percent of the image. If you click <span class="strong"><strong>Invert</strong></span>, the meaning of <span class="strong"><strong>Threshold</strong></span> is inverted (i.e., the path will cover the brightest 40 percent of the image).</p><div class="figure"><a id="brightness_cutoff_tracing_for_different"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00353"/><img src="httpatomoreillycomsourcenostarchimages1736366.png.jpg" alt="Brightness cutoff tracing for different threshold values"/></div></div><p class="title">Figure 18-11. Brightness cutoff tracing for different threshold values</p></div><p>Usually, this is the best tracing mode for simple monochrome shapes such as logos, text, vignettes, and so on.</p></div><div class="sect3" title="18.8.2.2 Tracing Quality"><div class="titlepage"><div><div><h3 class="title"><a id="one8dot8dot2dot2_tracing_quality"/>18.8.2.2 Tracing Quality</h3></div></div></div><p>Even if the bitmap you’re tracing is a rendition of a vector path, the trace will never exactly reproduce that original path. Rendering a vector into a bitmap always incurs some loss of information, and Inkscape’s tracer cannot restore this lost information other than by guessing. Although it is generally pretty good at it, there will be cases where you will be disappointed by its failure to recognize some features (arcs, straight lines, corners) that you can easily “see” in the bitmap. This is especially evident when tracing low-resolution bitmaps or those containing text.</p><div class="figure"><a id="some_common_quality_problems_with_bitmap"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00354"/><img src="httpatomoreillycomsourcenostarchimages1736368.png.jpg" alt="Some common quality problems with bitmap tracing"/></div></div><p class="title">Figure 18-12. Some common quality problems with bitmap tracing</p></div><p>Perhaps the best piece of advice in this situation is to obtain the highest possible <span class="emphasis"><em>resolution</em></span> bitmap. It is nearly impossible to get a decent trace from a bitmap where some crucial features are several pixels across; tracing a higher-resolution version of an image often makes a big difference. Also, you can try to adjust the <span class="strong"><strong>Threshold</strong></span> and experiment with the contents of the <span class="strong"><strong>Options</strong></span> page of the dialog (it applies to all modes, both single-scan and multiple-scan):</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The <span class="strong"><strong>Suppress speckles</strong></span> option removes any color blobs that are smaller than the specified number of pixels across. This suppresses creating small superfluous subpaths when tracing dirty or “dithered” bitmaps.</p></li><li class="listitem"><p>Increasing the <span class="strong"><strong>Smooth corners</strong></span> parameter makes the trace algorithm less inclined to recognize sharp corners in the image. This may be useful when tracing a naturally smooth shape from a highly pixelated, low-resolution bitmap where you don’t want accidental pixel cusps to become sharp corners in the traced path. Conversely, lowering this parameter is appropriate when you are tracing geometric shapes without any curved lines; when <span class="strong"><strong>Smooth corners</strong></span> is zero, the resulting path almost entirely consists of straight line segments with cusp nodes between them.</p></li><li class="listitem"><p>The <span class="strong"><strong>Optimize paths</strong></span> parameter tries to reduce the number of nodes in the trace path, much like the <span class="strong"><strong>Simplify</strong></span> command does (<span class="strong"><strong><a class="xref" href="ch12s03.html" title="12.3 Simplifying">12.3 Simplifying</a></strong></span>). Raising this value decreases the number of nodes you get, but it also increases the chance of introducing visible distortions or losing some important details of the shape.</p></li></ul></div></div><div class="sect3" title="18.8.2.3 Other Single-Scan Modes"><div class="titlepage"><div><div><h3 class="title"><a id="one8dot8dot2dot3_other_single-scan_modes"/>18.8.2.3 Other Single-Scan Modes</h3></div></div></div><p>The <span class="strong"><strong>Edge detection</strong></span> mode applies the edge detection filter to the bitmap before tracing it. As a result, the trace path will contain narrow strips that follow the color boundaries in the source bitmap. The lower the <span class="strong"><strong>Threshold</strong></span> is, the more edges will be detected and traced.</p><p>The <span class="strong"><strong>Color quantization</strong></span> mode first quantizes (divides) the image into the given number of areas (<span class="strong"><strong>Colors</strong></span>), each with its own dominant color, much like when reducing a full-color image to a fixed palette using a bitmap editor. It then traces <span class="emphasis"><em>every other</em></span> such area, which results in a stripped appearance for color gradients.</p><div class="figure"><a id="edge_detection_and_color_quantization_mo"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00355"/><img src="httpatomoreillycomsourcenostarchimages1736370.png.jpg" alt="The Edge detection and Color quantization modes"/></div></div><p class="title">Figure 18-13. The Edge detection and Color quantization modes</p></div></div><div class="sect3" title="18.8.2.4 Multiple-Scan Modes"><div class="titlepage"><div><div><h3 class="title"><a id="one8dot8dot2dot4_multiple-scan_modes"/>18.8.2.4 Multiple-Scan Modes</h3></div></div></div><p>Like the <span class="strong"><strong>Color quantization</strong></span> mode we’ve just seen, each multiple-scan mode starts by quantizing the image into the given number of areas (specified by <span class="strong"><strong>Scans</strong></span>). It then traces each area separately, assigns an appropriate color or gray level to the trace path, and groups all such paths together. With a sufficient number of quantization steps, the result may look very similar to the original bitmap, faithfully reproducing its color gradients, blur, natural textures, and so on.</p><p>The three multiple-scan modes differ only in the way the image is quantized. The <span class="strong"><strong>Brightness steps</strong></span> option is the best one for grayscale images; it ignores any hue or saturation differences and groups pixels into areas based solely on their brightness (<a class="xref" href="ch18s08.html#multiple_scans_10_brightness_steps" title="Figure 18-14. Multiple scans: 10 brightness steps">Figure 18-14</a>). The <span class="strong"><strong>Colors</strong></span> mode considers all aspects of the colors when performing quantization, which results in the most faithful reproduction of full-color images (see Figure 14 on the color insert). Finally, the <span class="strong"><strong>Grays</strong></span> option works the same as <span class="strong"><strong>Colors</strong></span>, except that the resulting paths are painted with approximating shades of gray instead of the original colors.</p><div class="figure"><a id="multiple_scans_10_brightness_steps"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00356"/><img src="httpatomoreillycomsourcenostarchimages1736372.png.jpg" alt="Multiple scans: 10 brightness steps"/></div></div><p class="title">Figure 18-14. Multiple scans: 10 brightness steps</p></div><p><a id="iddle1261" class="indexterm"/><a id="iddle1295" class="indexterm"/><a id="iddle2079" class="indexterm"/><a id="iddle2531" class="indexterm"/><a id="iddle2704" class="indexterm"/><a id="iddle3527" class="indexterm"/><a id="iddle3528" class="indexterm"/><a id="iddle3536" class="indexterm"/><a id="iddle4692" class="indexterm"/>The <span class="strong"><strong>Smooth</strong></span> option applies a certain amount of blur to the image before quantizing it; this may produce better results in complex photographic images. The <span class="strong"><strong>Stack scans</strong></span> option is best kept on; it makes sure that each area’s path covers not only that area but also all areas below it in z-order, which means there will be no gaps between the scans:</p><div class="figure"><a id="stacking_scans_vsdot_abutting_them"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00357"/><img src="httpatomoreillycomsourcenostarchimages1736374.png.jpg" alt="Stacking scans vs. abutting them"/></div></div><p class="title">Figure 18-15. Stacking scans vs. abutting them</p></div><p>The <span class="strong"><strong>Remove background</strong></span> option simply removes the bottommost scan path from the group, which is useful when you are tracing a photo of something on a flat-color background and want the result to only contain the object itself, not the background.</p></div></div></div>
<div class="sect1" title="18.9 Bitmap Export"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot9_bitmap_export"/>18.9 Bitmap Export</h1></div></div></div><p>In a bitmap-dominated world, a vector editor without a good rasterization and bitmap export capability is useless. Inkscape’s bitmap export facilities are convenient and can be automated in numerous ways. On the downside, Inkscape lacks an export preview and supports only one bitmap format: PNG. Also, you can only create images with 8 bits per channel (no indexed color, no 16 bits per channel), and it is impossible to suppress antialiasing.</p><p>The lack of support for bitmap formats other than PNG is not as bad as it may sound. The PNG format faithfully preserves the maximum rendering quality Inkscape is capable of, including alpha transparency, antialiasing, filters, and so on. From a PNG file, you can easily create any other format (such as JPG or TIFF) using a bitmap editor or any image conversion utility such as ImageMagick (you can download it from <span class="emphasis"><em><a class="ulink" href="http://imagemagick.org">http://imagemagick.org</a></em></span>). During this conversion, you can optimize your image in various ways (e.g., to minimize the file size or palette).</p><div class="note" title="Note"><h3 class="title"><a id="ch18note03"/>Note</h3><p><a id="iddle1373" class="indexterm"/><a id="iddle1793" class="indexterm"/><a id="iddle2055" class="indexterm"/><a id="iddle2093" class="indexterm"/><a id="iddle2096" class="indexterm"/><a id="iddle2227" class="indexterm"/><span class="emphasis"><em>If you think your PNG export has lost the transparency of the original SVG, the most likely source of the problem is not Inkscape but the image file viewer you’re using to examine the PNG. Not all image viewers can handle alpha transparency in PNG; one program that is guaranteed to show your PNG correctly is the Firefox browser.</em></span></p></div><div class="sect2" title="18.9.1 The Export Bitmap Dialog"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot9dot1_the_export_bitmap_dialog"/>18.9.1 The Export Bitmap Dialog</h2></div></div></div><p>With the <span class="strong"><strong>Export Bitmap</strong></span> dialog (<span class="inlinemediaobject"><a id="inline_id00786"/><img src="httpatomoreillycomsourcenostarchimages1735404.png.jpg" alt=""/></span>), you can export your drawing or any part of it into a PNG file at any resolution. The dialog consists of three main areas, in which you configure the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The canvas area you want to export</p></li><li class="listitem"><p>The pixel size of the bitmap</p></li><li class="listitem"><p>The filename of the export file</p></li></ul></div><div class="figure"><a id="export_bitmap_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00358"/><img src="httpatomoreillycomsourcenostarchimages1736376.png.jpg" alt="The Export Bitmap dialog"/></div></div><p class="title">Figure 18-16. The Export Bitmap dialog</p></div><p>For the <span class="strong"><strong>Export area</strong></span>, you can choose either the <span class="emphasis"><em>page</em></span> of your SVG document (anything beyond the edges of the page is not exported), the bounding box of the <span class="emphasis"><em>drawing</em></span> (which can be smaller or larger than the page; the page rectangle is not in any way visible in the exported bitmap), or the bounding box of the <span class="emphasis"><em>selection</em></span> (again, it can be inside or outside the page rectangle—this does not matter). These options correspond to the first three toggle buttons at the top of the dialog.</p><p>Alternatively, you can click the <span class="strong"><strong>Custom</strong></span> toggle button and type your own values of the coordinates for the top-left corner (<span class="strong"><strong>x0</strong></span>, <span class="strong"><strong>y0</strong></span>), bottom-right corner (<span class="strong"><strong>x1</strong></span>, <span class="strong"><strong>y1</strong></span>), or width and height of the export area. You can also choose the measurement unit for these values (the default is <code class="literal">px</code>, <span class="strong"><strong><a class="xref" href="apas06.html" title="A.6 Coordinates and Units">A.6 Coordinates and Units</a></strong></span>).</p><p>The <span class="strong"><strong>Export Bitmap</strong></span> dialog is not modal—that is, you can keep working on the canvas as you normally do while it is open. Unless you choose <span class="strong"><strong>Custom</strong></span>, the dialog responds to changing a selection on the canvas by switching to the <span class="strong"><strong>Selection</strong></span> mode and updating the coordinates to match the bounding box of the new selection. If nothing is selected and you are not in <span class="strong"><strong>Custom</strong></span>, the dialog defaults to the <span class="strong"><strong>Drawing</strong></span> mode.</p><p><a id="iddle1297" class="indexterm"/><a id="iddle1305" class="indexterm"/><a id="iddle1860" class="indexterm"/><a id="iddle1891" class="indexterm"/><a id="iddle2061" class="indexterm"/><a id="iddle2065" class="indexterm"/><a id="iddle2072" class="indexterm"/><a id="iddle2420" class="indexterm"/><a id="iddle3115" class="indexterm"/>For the <span class="strong"><strong>Bitmap size</strong></span>, you can type the width and height, in pixels, or you can adjust the resolution value (<span class="emphasis"><em>dpi</em></span>, which stands for <span class="emphasis"><em>dots</em></span>—that is, pixels—<span class="emphasis"><em>per inch</em></span>). The default resolution of 90 dpi results in one SVG <code class="literal">px</code> unit corresponding exactly to one pixel of the rendered bitmap. The horizontal and vertical dpi values cannot differ; changing any one of the three editable values (<span class="strong"><strong>Width</strong></span>, <span class="strong"><strong>Height</strong></span>, <span class="strong"><strong>dpi</strong></span>) changes the other two to match.</p><div class="note" title="Note"><h3 class="title"><a id="ch18note04"/>Note</h3><p><span class="emphasis"><em>If your drawing contains some <code class="literal">px</code>-sized objects (such as strokes a whole number of <code class="literal">px</code> wide) and you want them to export precisely into the pixels of the bitmap, it may not be sufficient to choose the 90 dpi resolution. For example, a 1×1 px square in SVG may fall on a boundary between pixels in an exported bitmap and this would end up “smeared” into four adjacent pixels instead of one. The easiest way to prevent such misalignment and ensure your export is as crisp as possible is to use the grid (<span class="strong"><strong><a class="xref" href="ch07s02.html" title="7.2 Grids">7.2 Grids</a></strong></span>). Snap your objects to the default 1 px-sized grid, and make sure that your export area has integer <span class="strong"><strong>x0</strong></span> and <span class="strong"><strong>y0</strong></span> coordinates when measured in <code class="literal">px</code>—that is, is itself aligned to the <code class="literal">px</code> grid. After that, exporting at 90 dpi will give you a perfectly crisp image.</em></span></p></div><p>For the <span class="strong"><strong>Filename</strong></span>, you can type a complete path to the file (the <span class="emphasis"><em>.png</em></span> extension will be added automatically) or click the <span class="strong"><strong>Browse</strong></span> button to access your filesystem and choose a folder and a file.</p><div class="sect3" title="18.9.1.1 Export Hints"><div class="titlepage"><div><div><h3 class="title"><a id="one8dot9dot1dot1_export_hints"/>18.9.1.1 Export Hints</h3></div></div></div><p>When exporting a single selected object, the export filename and resolution of the export are remembered and stored in SVG document (so you may need to save it after performing the export) and restored into the <span class="strong"><strong>Export Bitmap</strong></span> dialog when you select this object to export again. These <span class="emphasis"><em>export hints</em></span> are one of the greatest time savers when using Inkscape to export multiple objects to multiple bitmap files—for example, slices of a web page graphic. Just as you select various objects with the <span class="strong"><strong>Export Bitmap</strong></span> dialog open, you can see their saved export filenames popping up in the <span class="strong"><strong>Filename</strong></span> field. For the same reason—to make it easier to export multiple objects one by one—the dialog stays open even after you click the <span class="strong"><strong>Export</strong></span> button.</p><p>You can speed up the process even more if you select all objects that you want to export, each to its own file, and check the <span class="strong"><strong>Batch export all selected objects</strong></span> checkbox. Now, clicking <span class="strong"><strong>Export</strong></span> will create one bitmap file per each selected object. If an object has already been exported before—that is, has the filename and resolution hints saved—these values will be used for it; otherwise, a name for the bitmap file will be constructed from the ID of the object (for example, <span class="emphasis"><em>text2402.png</em></span>, see <span class="strong"><strong><a class="xref" href="apas09.html" title="A.9 Linking">A.9 Linking</a></strong></span>), and the file will be placed in the directory where your SVG document was last saved.</p><p>By default, even if you are exporting a selection, you are actually exporting an area—the bounding box of the selection—which may contain lots of other objects, all of which will be visible. Checking the <span class="strong"><strong>Hide all except selected</strong></span> checkbox makes sure the exported bitmap will contain <span class="emphasis"><em>only</em></span> the exported objects, while all others, even if they overlap the export area, will not be rendered.</p></div></div><div class="sect2" title="18.9.2 Exporting via the Command Line"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot9dot2_exporting_via_the_command_l"/>18.9.2 Exporting via the Command Line</h2></div></div></div><p><a id="iddle1286" class="indexterm"/><a id="iddle1647" class="indexterm"/><a id="iddle2088" class="indexterm"/><a id="iddle2514" class="indexterm"/><a id="iddle2516" class="indexterm"/><a id="iddle2545" class="indexterm"/><a id="iddle2822" class="indexterm"/>All of the capabilities of the <span class="strong"><strong>Export Bitmap</strong></span> dialog are also available when you run Inkscape from the command line by using various switches and parameters. This way, Inkscape can be used as a GUI-less utility from scripts or programs to automate various SVG rendering jobs. For example, this is how you export an object with <code class="literal">id="text2402"</code> at 600 dpi:</p><a id="pro_id00004"/><pre class="programlisting">$ inkscape document.svg --export-png=img/text.png --export-id=text2402 \
    --export-dpi=600</pre><p>For a complete list of Inkscape’s command-line switches, refer to <a class="xref" href="apc.html" title="Appendix C. The Command Line">Appendix C</a>.</p></div><div class="sect2" title="18.9.3 Icon Preview"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot9dot3_icon_preview"/>18.9.3 Icon Preview</h2></div></div></div><p>While there’s currently no preview pane in the <span class="strong"><strong>Export Bitmap</strong></span> dialog, if you use Inkscape to create icons, one way to preview your work rendered to different icon sizes is via the <span class="strong"><strong>Icon Preview</strong></span> dialog, which you can call from the <span class="strong"><strong>View</strong></span> menu:</p><div class="figure"><a id="icon_preview_dialog"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00359"/><img src="httpatomoreillycomsourcenostarchimages1736378.png.jpg" alt="The Icon Preview dialog"/></div></div><p class="title">Figure 18-17. The Icon Preview dialog</p></div><p>This dialog contains previews of your document rasterized in a few typical icon sizes, from 16-by-16 to 128-by-128 pixels; on the left of the dialog, one of these renderings is additionally displayed scaled up so you can see how your vector objects translate to actual pixels. Click the <span class="strong"><strong>Selection</strong></span> toggle button to switch the preview from the entire document to the current selection. The <span class="strong"><strong>Refresh</strong></span> button updates the preview (there’s no automatic update of the preview yet).</p></div><div class="sect2" title="18.9.4 Make a Bitmap Copy"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot9dot4_make_a_bitmap_copy"/>18.9.4 Make a Bitmap Copy</h2></div></div></div><p>You can immediately import (<span class="strong"><strong><a class="xref" href="ch18s01.html" title="18.1 Import">18.1 Import</a></strong></span>) the bitmap file you have exported back into the document to review how rasterization worked. If, however, you only need that bitmap in your document and not as a separate file, you can use Inkscape’s shortcut: the <span class="strong"><strong>Edit</strong></span> ▸ <span class="strong"><strong>Make a Bitmap Copy</strong></span> command.</p><p><a id="iddle1580" class="indexterm"/><a id="iddle2221" class="indexterm"/><a id="iddle2421" class="indexterm"/><a id="iddle2603" class="indexterm"/><a id="iddle2627" class="indexterm"/><a id="iddle3592" class="indexterm"/><a id="iddle4733" class="indexterm"/>This command exports the selected objects and at once imports the resulting bitmap back to the document, overlaying it on top of the selection. The new bitmap object is not embedded (it is placed in the document’s last save directory); use the embedding effect (<span class="strong"><strong><a class="xref" href="ch18s02.html" title="18.2 Linking vs. Embedding">18.2 Linking vs. Embedding</a></strong></span>) to embed it. The resolution of the export can be set on the <span class="strong"><strong>Bitmaps</strong></span> page of <span class="strong"><strong>Inkscape Preferences</strong></span>; the default is 90 dpi, and for that value, the command will additionally snap the export area to the 1 px grid, making sure the pixels of the created bitmap align exactly with the boundaries of <code class="literal">px</code> squares.</p><div class="figure"><a id="nine0-dpi_bitmap_copy_of_a_pathcomma_ali"/><div class="figure-contents"><div class="mediaobject"><a id="med_id00360"/><img src="httpatomoreillycomsourcenostarchimages1736380.png.jpg" alt="A 90-dpi bitmap copy of a path, aligned to the grid"/></div></div><p class="title">Figure 18-18. A 90-dpi bitmap copy of a path, aligned to the grid</p></div><p>This command can be used for a quick preview of how your art will rasterize (after which, the bitmap object can be deleted). It is also useful when you have some very slow-rendering filters (<span class="strong"><strong><a class="xref" href="ch17s05.html" title="17.5 Filter Rendering Options">17.5 Filter Rendering Options</a></strong></span>) but do not want to work in the No Filters or Outline modes; in this case, just make a bitmap copy of the filtered object and delete or hide the slow-rendering original. Also, you can create a low-resolution bitmap copy of an object in order to trace it to achieve a characteristic distortion of its shape, which may have artistic value.</p></div></div>
<div class="sect1" title="18.10 Color Management"><div class="titlepage"><div><div><h1 class="title"><a id="one8dot10_color_management"/>18.10 Color Management</h1></div></div></div><p>The goal of color management tools is to ensure that the colors in your artwork are correctly translated between different output devices, most often from screen to print. The ranges of colors that can be reproduced are different for different devices, and some color distortions are unavoidable. Color management allows you to preview, control, and thereby minimize these distortions.</p><p>In Inkscape, color management is a developing area, and it is still in a quite primitive state. You can use screen proofing to preview output colors; however, using Inkscape alone, you cannot properly prepare a file for print (i.e., color-separate it and save it with a color profile embedded). However, in most cases you can get the result you need by using some tricks and employing some additional software, as described in this section.</p><p>However, before you go into it, consider if you really <span class="emphasis"><em>need</em></span> color management. If you are going to print your art on a desktop color printer, chances are its quality is simply not good enough for color management to make a significant difference. A typical desktop printer will accept and print the same RGB data as is displayed on your screen, performing its own color conversion without bothering the user.</p><p><a id="iddle1587" class="indexterm"/><a id="iddle1588" class="indexterm"/><a id="iddle1631" class="indexterm"/><a id="iddle1806" class="indexterm"/><a id="iddle2512" class="indexterm"/><a id="iddle2634" class="indexterm"/><a id="iddle3588" class="indexterm"/><a id="iddle3593" class="indexterm"/><a id="iddle3873" class="indexterm"/>The need for color management arises when you are going to print your documents using a professional printer, e.g., by sending them to a print service provider. Even then, some providers will perform color management on your documents for you if you ask them to. If you have sufficient control over this process (for example, can review the print proofs), this is usually the best option because the print service staff knows what works best with their equipment.</p><div class="sect2" title="18.10.1 ICC Color Profiles"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot10dot1_icc_color_profiles"/>18.10.1 ICC Color Profiles</h2></div></div></div><p>An ICC color profile is a file that fully describes the color capabilities of an output device. If you want to prepare your document for outputting on a specific device, you must first obtain the ICC profile that exactly corresponds to this device and the output media (for example, paper type used for printing). Sometimes, you can find an appropriate profile file on the Internet (for example, on the web site of the printer hardware’s manufacturer); sometimes, you can request them from the print service provider you will be using. A useful package of generic profiles can be obtained from Adobe at <span class="emphasis"><em><a class="ulink" href="http://www.adobe.com/downloads">http://www.adobe.com/downloads</a></em></span>.</p><p>Once you get the destination profile, put it into <span class="emphasis"><em>~/.local/share/color/icc</em></span> on Linux and <span class="emphasis"><em>system32\spool\drivers\color</em></span> inside the Windows folder on Windows.</p></div><div class="sect2" title="18.10.2 Screen Proofing"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot10dot2_screen_proofing"/>18.10.2 Screen Proofing</h2></div></div></div><p>Since the color range of a typical printer is narrower than that of a computer display, Inkscape can <span class="emphasis"><em>preview</em></span> the printing output on screen by emulating the printer colors on your display. For this, you need to have two ICC color profiles: one for the printer you’re going to use and another for your screen.</p><p>Ideally, you should have your display <span class="emphasis"><em>calibrated</em></span> using a special hardware device called <span class="emphasis"><em>colorimeter</em></span>; this calibration creates a custom ICC profile of your display. If you cannot do calibration, a generic RGB profile, such as “Adobe RGB” from Adobe’s profile pack mentioned above, should work well enough unless your quality requirements are truly demanding.</p><p>In <span class="strong"><strong>Inkscape Preferences</strong></span>, go to the <span class="strong"><strong>Color management</strong></span> tab. Choose the display profile in the <span class="strong"><strong>Display adjustment</strong></span> section. Then, in the <span class="strong"><strong>Proofing</strong></span> section, check <span class="strong"><strong>Simulate output on screen</strong></span> and choose the <span class="strong"><strong>Device profile</strong></span> of your target device (i.e., printer).</p><p>For both screen and target device profiles, you can also choose <span class="strong"><strong>Device rendering intent</strong></span>. The default <span class="strong"><strong>Perceptual</strong></span> is the best choice in most cases; if you want the output to look as color-rich as possible (for example, when printing simple business graphics), try <span class="strong"><strong>Saturation</strong></span>.</p><p>If a screen color is “out of gamut”—that is, cannot be rendered on the output device at all—it can be made immediately visible by converting it to a specially designated color. For example, if your design has no reds, check <span class="strong"><strong>Mark out of gamut colors</strong></span> and choose red for <span class="strong"><strong>Out of gamut warning color</strong></span>. Then, wherever you see red in your drawing, you know that you need to change the actual color of that object (it is of course shown correctly in the status bar or in the <span class="strong"><strong>Fill and Stroke</strong></span> dialog, the red mark is only in the drawing) if you want it to print without gross distortions.</p></div><div class="sect2" title="18.10.3 Separating and Embedding"><div class="titlepage"><div><div><h2 class="title"><a id="one8dot10dot3_separating_and_embedding"/>18.10.3 Separating and Embedding</h2></div></div></div><p><a id="iddle1105" class="indexterm"/><a id="iddle1135" class="indexterm"/><a id="iddle1562" class="indexterm"/><a id="iddle1633" class="indexterm"/><a id="iddle2297" class="indexterm"/><a id="iddle3431" class="indexterm"/><a id="iddle3529" class="indexterm"/><a id="iddle3875" class="indexterm"/><a id="iddle4102" class="indexterm"/><a id="iddle4691" class="indexterm"/>Screen proofing is helpful, but sometimes it is not enough—you may be required to produce a file already converted to the target color system. Such files are often called <span class="emphasis"><em>color-separated</em></span> because they contain the separate color channels (usually CMYK, <span class="strong"><strong><a class="xref" href="ch08s02.html#eightdot2dot2_cmyk" title="8.2.2 CMYK">8.2.2 CMYK</a></strong></span>) corresponding to the inks of the output device. Such a file may also have the target color profile embedded into it. The most commonly used formats are PDF (vector) and TIFF (bitmap); both can contain color-separated data and embed ICC profiles.</p><p>Although it can export PDF and render bitmaps, as of version 0.47 Inkscape cannot do color separation or profile embedding. You need some other software to do the job for you, such as Adobe Photoshop (for TIFF) or Illustrator (for PDF); both can import Inkscape’s SVG format directly. You can also use open source software; the Scribus page layout program (<span class="emphasis"><em><a class="ulink" href="http://scribus.net">http://scribus.net</a></em></span>) will import SVG and create color-separated PDFs, and the Separate+ plugin for GIMP (<span class="emphasis"><em><a class="ulink" href="http://registry.gimp.org/node/471">http://registry.gimp.org/node/471</a></em></span>) will take Inkscape-exported PNG bitmap and convert it into a color-separated TIFF with screen proofing for complete control.</p></div></div></body></html>