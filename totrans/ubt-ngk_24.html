<html><head></head><body><div class="appendix" title="Appendix&#xA0;C.&#xA0;MANUALLY PARTITIONING YOUR HARD DISK"><div class="titlepage"><div><div><h1 class="title"><a id="manually_partitioning_your_hard_disk"/>Appendix C. MANUALLY PARTITIONING YOUR HARD DISK</h1></div></div></div><div class="informalfigure"><div class="mediaobject"><a id="I_mediaobject_d1e29209"/><img src="httpatomoreillycomsourcenostarchimages656092.png.jpg" alt="image with no caption"/></div></div><p>When you're partitioning your hard disk with the Ubuntu installer, the first two options (use the whole disk and resize an existing partition) should cover most eventualities. They're both discussed in <a class="xref" href="ch02.html" title="Chapter 2. WADING AND DIVING">Chapter 2</a>. But if you're in a geekier mood, there are a few fancy ways to carve up your disk space. For example, you can create a shared data partition so your files can be shared between Windows and Ubuntu, or you can make a separate partition for your <span class="emphasis"><em>/home</em></span> directory so you can reinstall Ubuntu (or install a different Linux distro) without having to fully back up all of your files.<a id="IDX-APP-C-1923" class="indexterm"/><a id="IDX-APP-C-1924" class="indexterm"/></p><p>When you get to the Prepare disk space screen of the installer, choose <span class="strong"><strong>Specify partitions manually</strong></span>, and click <span class="strong"><strong>Forward</strong></span>. You'll be presented with a colored-bar view of your current partition setup (<a class="xref" href="apc.html#using_the_manual_partitioning_tool" title="Figure C-1. Using the manual partitioning tool">Figure C-1</a>) and a list of your partitions below that. None of the changes that you make in this window will be applied until you click <span class="strong"><strong>Forward</strong></span> again, and you can click the <span class="strong"><strong>Back</strong></span> button if you want to forget about making the manual changes altogether. (There is one exception: Changes are made immediately and irreversibly when you resize a partition. See <a class="xref" href="apcs02.html" title="Editing Existing Partitions">Editing Existing Partitions</a> in <a class="xref" href="apcs02.html" title="Editing Existing Partitions">Editing Existing Partitions</a> for more on this.)</p><div class="figure"><a id="using_the_manual_partitioning_tool"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29256"/><img src="httpatomoreillycomsourcenostarchimages656772.png.jpg" alt="Using the manual partitioning tool"/></div></div><p class="title">Figure C-1. Using the manual partitioning tool</p></div><div class="sect1" title="Creating and Deleting Partitions"><div class="titlepage"><div><div><h1 class="title"><a id="creating_and_deleting_partitions"/>Creating and Deleting Partitions</h1></div></div></div><p>You can create new partitions only if you have some "free space" to put them in. This is free space in the sense that there's not already a partition on that part of the disk, not that there are no files there. One way of creating free space is to delete an existing partition; to do this, click the list item for the partition, and click <span class="strong"><strong>Delete</strong></span>. After a few seconds it'll change into free space in the list (<a class="xref" href="apc.html#creating_some_free_space" title="Figure C-2. Creating some free space">Figure C-2</a>). Alternatively, if you're planning to completely change your partition setup, select the hard disk you want to modify, and click <span class="strong"><strong>New Partition Table</strong></span>. You'll be left with a completely blank slate, where all you need to do is add new partitions.<a id="IDX-APP-C-1925" class="indexterm"/><a id="IDX-APP-C-1926" class="indexterm"/><a id="IDX-APP-C-1927" class="indexterm"/><a id="IDX-APP-C-1928" class="indexterm"/><a id="IDX-APP-C-1929" class="indexterm"/><a id="IDX-APP-C-1930" class="indexterm"/><a id="IDX-APP-C-1931" class="indexterm"/></p><p>Select any free space, and click <span class="strong"><strong>Add</strong></span> to put a new partition in it. You'll be presented with a Create new partition window (<a class="xref" href="apc.html#creating_a_new_partition" title="Figure C-3. Creating a new partition">Figure C-3</a>), which will ask how big you want to make the partition in megabytes. (1GB is roughly 1,000MB.) See <a class="xref" href="apcs03.html" title="Varieties of Partitions">Varieties of Partitions</a> in <a class="xref" href="apcs02.html" title="Editing Existing Partitions">Editing Existing Partitions</a> for advice on how big to make your partitions.</p><p>The Use as option lets you specify the filesystem you want to use. A <span class="emphasis"><em>filesystem</em></span> tells your operating system how to store files on the partition. There are a number of different filesystems that you can choose, but not all of them can be understood by Windows and Mac OS. Ext4 is the best choice for a partition that will be solely used by Linux, but FAT32 is the one you need if you want to share files with Windows or Mac OS.<a id="IDX-APP-C-1932" class="indexterm"/></p><div class="figure"><a id="creating_some_free_space"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29330"/><img src="httpatomoreillycomsourcenostarchimages656774.png.jpg" alt="Creating some free space"/></div></div><p class="title">Figure C-2. Creating some free space</p></div><div class="figure"><a id="creating_a_new_partition"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29338"/><img src="httpatomoreillycomsourcenostarchimages656776.png.jpg" alt="Creating a new partition"/></div></div><p class="title">Figure C-3. Creating a new partition</p></div><p>You can also select the <span class="emphasis"><em>mount point</em></span>, which is where Ubuntu will put the folder that corresponds to this partition (see <a class="xref" href="ch07.html" title="Chapter 7. A TIDY NEST">Chapter 7</a> if you're not familiar with how Linux organizes folders). For example, you would mount the home partition as the <span class="emphasis"><em>/home</em></span> folder. More detail on mount points is given in <a class="xref" href="apcs03.html" title="Varieties of Partitions">Varieties of Partitions</a> in <a class="xref" href="apcs02.html" title="Editing Existing Partitions">Editing Existing Partitions</a>.<a id="IDX-APP-C-1933" class="indexterm"/></p><p>There are two more options in the Create new partition window, both of them rather technical and boring. The Type for the new partition option gives you a choice between creating a <span class="emphasis"><em>primary</em></span> or <span class="emphasis"><em>logical</em></span> partition. You can have a maximum of four primary partitions on a disk but lots of logical partitions—the disk partitioner will choose the right option for you, so there's no need to alter this setting (it doesn't affect how you use the partition in any way). The other option, Location for the new partition, lets you choose where on the disk to put the new partition. It doesn't really matter, so leave this option set to the default too.<a id="IDX-APP-C-1934" class="indexterm"/></p><p>Click <span class="strong"><strong>OK</strong></span> to finish adding the partition; it should appear in the list after a few seconds.</p></div></div>
<div class="sect1" title="Editing Existing Partitions"><div class="titlepage"><div><div><h1 class="title"><a id="editing_existing_partitions"/>Editing Existing Partitions</h1></div></div></div><p>If you have an existing partition that you'd like to resize or change its mount point or filesystem type, select it and click <span class="strong"><strong>Change</strong></span>. An Edit partition window will appear (<a class="xref" href="apcs02.html#editing_a_partition" title="Figure C-4. Editing a partition">Figure C-4</a>).<a id="IDX-APP-C-1935" class="indexterm"/><a id="IDX-APP-C-1936" class="indexterm"/><a id="IDX-APP-C-1937" class="indexterm"/><a id="IDX-APP-C-1938" class="indexterm"/></p><p>The Use as and Mount point options work in the same way as those in the Create new partition window. You can also check <span class="strong"><strong>Format the partition</strong></span> if you'd like all the data on it to be erased so you can start fresh. You have no choice but to format if you're changing the filesystem of a partition (for example, from FAT32 to Ext4), so be aware of that too.</p><p>To resize the partition, use the New partition size in megabytes option. If you change the size and then click <span class="strong"><strong>OK</strong></span>, you'll be warned that the changes will be written to disk. Click <span class="strong"><strong>Continue</strong></span>, and the partitioner will start to resize the partition immediately—you can't undo this change, so think carefully about whether you've chosen the right options before hitting Continue.</p><div class="figure"><a id="editing_a_partition"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29431"/><img src="httpatomoreillycomsourcenostarchimages656778.png.jpg" alt="Editing a partition"/></div></div><p class="title">Figure C-4. Editing a partition</p></div></div>
<div class="sect1" title="Varieties of Partitions"><div class="titlepage"><div><div><h1 class="title"><a id="varieties_of_partitions"/>Varieties of Partitions</h1></div></div></div><p>You'll need to be familiar with a few varieties of partitions when you manually partition your disk. I've summarized these in the following sections and provided some tips on choosing their size, mount points, and filesystems.</p><div class="sect2" title="Root Partition"><div class="titlepage"><div><div><h2 class="title"><a id="root_partition"/>Root Partition</h2></div></div></div><p>You must have a root partition; it's where important system files are stored and software is installed. I recommend making it at least 8GB in size, but aim for 10GB to 15GB if you can to leave room for installing new programs. If you're not going to have a separate home partition (described in a moment), all of your files will be stored in the root partition too, so you should make it as big as possible to accommodate all your stuff in that case. The mount point should be set to <span class="emphasis"><em>/</em></span> and the filesystem to <span class="emphasis"><em>ext4</em></span>.</p></div><div class="sect2" title="Swap Partition"><div class="titlepage"><div><div><h2 class="title"><a id="swap_partition"/>Swap Partition</h2></div></div></div><p>You must have a swap partition. The swap partition is like an extra area of system memory (RAM); if your computer's system memory gets full, it will start using this partition to handle the overspill. It's also used to store the contents of your system memory (like all of your open files and programs) when you hibernate the computer. See <a class="ulink" href="https://help.ubuntu.com/community/SwapFaq/">https://help.ubuntu.com/community/SwapFaq/</a> for more details on swap.<a id="IDX-APP-C-1939" class="indexterm"/><a id="IDX-APP-C-1940" class="indexterm"/><a id="IDX-APP-C-1941" class="indexterm"/></p><p>As a rough guide, it should be a little larger than the amount of RAM that your computer has. For example, if you have 2GB of RAM, make a 2.2GB swap partition. The filesystem should be set to <span class="emphasis"><em>swap area</em></span>, and there's no need to set a mount point.</p><div class="note" title="Note"><h3 class="title">Note</h3><p>It's possible to get away without a swap partition by creating a <span class="emphasis"><em>swap file</em></span> after you've installed Ubuntu. The method for doing this is beyond the scope of this book.</p></div></div><div class="sect2" title="Home Partition"><div class="titlepage"><div><div><h2 class="title"><a id="home_partition"/>Home Partition</h2></div></div></div><p>The <span class="emphasis"><em>/home</em></span> folder can be put in a separate partition. You don't need to do this, but it's useful if anything ever goes wrong and you need to reinstall Ubuntu—all your personal files and configuration settings will be left intact on the home partition while Ubuntu is reinstalled on the root partition. This can save a lot of work when restoring your system. If you don't have a separate home partition, the <span class="emphasis"><em>/home</em></span> folder will be put in your root partition with everything else. The way you access your home folder (for example, through the Places menu) will be exactly the same whether you put it on a separate partition or not.<a id="IDX-APP-C-1942" class="indexterm"/></p><p>The home partition is where all your files and settings are stored, so you'll want to make it as big as possible. The filesystem should be <span class="emphasis"><em>ext4</em></span>, and the mount point should be set to <span class="emphasis"><em>/home</em></span>.</p></div><div class="sect2" title="Windows Partition"><div class="titlepage"><div><div><h2 class="title"><a id="windows_partition"/>Windows Partition</h2></div></div></div><p>If you have Windows installed, you will need to resize the Windows partition to make room for Ubuntu. When you do this, be sure to leave at least enough disk space for Windows to function properly. Windows XP needs a partition at least 2GB in size, and for Vista and Windows 7 you should leave at least 16GB. You will probably want to leave more space than this so that you can install programs and save files when using Windows, and remember to leave space for your existing Windows files too. The Used column in the main partitioning window will tell you how much space your Windows files are currently taking up.</p><p>Windows partitions will be of type NTFS or FAT32. Remember not to format the Windows partition, or your current installation of Windows will be erased.</p></div><div class="sect2" title="Shared Partition"><div class="titlepage"><div><div><h2 class="title"><a id="shared_partition"/>Shared Partition</h2></div></div></div><p>If you want an easy way to share files between Windows and Ubuntu, create a shared partition. In both operating systems, it will appear as a separate hard disk, which you can use to store whatever you like.<a id="IDX-APP-C-1943" class="indexterm"/><a id="IDX-APP-C-1944" class="indexterm"/><a id="IDX-APP-C-1945" class="indexterm"/></p><p>Make the partition as big as you think you'll need: If you only ever copy small files between Ubuntu and Windows, then 1GB to 2GB should be plenty; if you want to permanently store all your Windows and Ubuntu files in there (sort of like a shared home folder), make it as big as possible. You should choose FAT32 as the filesystem, but you can use almost anything for the mount point—<span class="emphasis"><em>/windows</em></span> will be one of the default suggestions, but you could type something like <span class="emphasis"><em>/shared</em></span> or <span class="emphasis"><em>/blackhole</em></span> into the Mount point box if you liked. Just make sure you use a name without any spaces in it.</p></div></div>
<div class="sect1" title="Example Partition Layouts"><div class="titlepage"><div><div><h1 class="title"><a id="example_partition_layouts"/>Example Partition Layouts</h1></div></div></div><p>Partitioning can be confusing if you've never done it before, so I've provided a few example partition layouts that should make things clearer. In all of these examples I've used a 100GB hard disk, but you can scale all the partition sizes up or down for your disk according to the advice in <a class="xref" href="apcs03.html" title="Varieties of Partitions">Varieties of Partitions</a> in <a class="xref" href="apcs02.html" title="Editing Existing Partitions">Editing Existing Partitions</a>.</p><div class="sect2" title="Standard Ubuntu-Only Installation"><div class="titlepage"><div><div><h2 class="title"><a id="standard_ubuntu-only_installation"/>Standard Ubuntu-Only Installation</h2></div></div></div><p>Only Ubuntu will be installed on the disk, so only the root and swap partitions are needed (<a class="xref" href="apcs04.html#a_simple_ubuntu-only_partition_layout" title="Figure C-5. A simple Ubuntu-only partition layout">Figure C-5</a>). Since I have 4GB of RAM, I made the swap partition 4.2GB. The root partition filled up the rest of the disk space to give me as much room for files and programs as possible. (There was no need to partition the disk manually in this case; the Ubuntu installer's Erase and use the entire disk option would have achieved the same result.)</p></div><div class="sect2" title="Ubuntu-Only with a Separate Home Partition"><div class="titlepage"><div><div><h2 class="title"><a id="ubuntu-only_with_a_separate_home_partiti"/>Ubuntu-Only with a Separate Home Partition</h2></div></div></div><p>Only Ubuntu will be installed, but there will be a separate home partition to keep my data safe in case I ever need to reinstall (<a class="xref" href="apcs04.html#the_partition_layout_for_ubuntu_with_a_s" title="Figure C-6. The partition layout for Ubuntu with a separate home partition">Figure C-6</a>). I'm planning to store home movies on this one, which means lots of very large files, so I went for a smallish 10GB root partition and a slightly undersized 4GB swap partition. This leaves lots more space for the home partition (and my videos), which takes up the remaining 86GB of the disk.</p><div class="figure"><a id="a_simple_ubuntu-only_partition_layout"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29570"/><img src="httpatomoreillycomsourcenostarchimages656780.png.jpg" alt="A simple Ubuntu-only partition layout"/></div></div><p class="title">Figure C-5. A simple Ubuntu-only partition layout</p></div><div class="figure"><a id="the_partition_layout_for_ubuntu_with_a_s"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29578"/><img src="httpatomoreillycomsourcenostarchimages656782.png.jpg" alt="The partition layout for Ubuntu with a separate home partition"/></div></div><p class="title">Figure C-6. The partition layout for Ubuntu with a separate home partition</p></div></div><div class="sect2" title="Ubuntu and Windows with a Shared Partition"><div class="titlepage"><div><div><h2 class="title"><a id="ubuntu_and_windows_with_a_shared_partiti"/>Ubuntu and Windows with a Shared Partition</h2></div></div></div><p>Ubuntu will be installed alongside Windows XP, and I want a shared partition so that I can copy files between the two operating systems (<a class="xref" href="apcs04.html#ubuntu_comma_windows_comma_and_a_shared" title="Figure C-7. Ubuntu, Windows, and a shared partition">Figure C-7</a>). My existing Windows installation was using 7.3GB of the disk because I had files and programs installed on it. I resized the Windows installation to 15GB, leaving 7.7GB of space free for future expansion. Note that the Windows partition will <span class="emphasis"><em>not</em></span> be formatted, so Windows and all my files on that partition remain intact. I created a 40GB Ubuntu root partition and a 4.2GB swap partition and then created a shared FAT32 partition in the remaining 40GB or so of disk space.</p><div class="figure"><a id="ubuntu_comma_windows_comma_and_a_shared"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject_d1e29596"/><img src="httpatomoreillycomsourcenostarchimages656784.png.jpg" alt="Ubuntu, Windows, and a shared partition"/></div></div><p class="title">Figure C-7. Ubuntu, Windows, and a shared partition</p></div></div></div>
<div class="sect1" title="Finishing Up"><div class="titlepage"><div><div><h1 class="title"><a id="finishing_up"/>Finishing Up</h1></div></div></div><p>When you've finished, click <span class="strong"><strong>Forward</strong></span> to finalize your changes. If you're deleting or formatting any partitions, the changes will be written to disk. This is an irreversible change, so make sure you backed up any valuable data that was on the affected partitions!</p></div></body></html>