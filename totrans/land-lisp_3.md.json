["```\n> `(loop for i`\n `below 5`\n `sum i)`\n10\n```", "```\n> `(loop for i`\n `from 5`\n `to 10`\n `sum i)`\n45\n```", "```\n> `(loop for i`\n `in '(100 20 3)`\n `sum i)`\n123\n```", "```\n> `(loop for i`\n `below 5`\n `do (print i))`\n0\n1\n2\n3\n4\n```", "```\n> `(loop for i`\n `below 10`\n `when (oddp i)`\n `sum i)`\n25\n```", "```\n> `(loop for i`\n `from 0`\n `do (print i)`\n `when (= i 5)`\n `return 'falafel)`\n0\n1\n2\n3\n4\n5\n\nFALAFEL\n```", "```\n> `(loop for i`\n `in '(2 3 4 5 6)`\n `collect (* i i))`\n(4 9 16 25 36)\n```", "```\n(loop for x below 10\n      for y below 10\n      collect (+ x y))\n```", "```\n> `(loop for x below 10`\n `for y below 10`\n `collect (+ x y))`\n(0 2 4 6 8 10 12 14 16 18)\n```", "```\n> `(loop for x below 10`\n `collect (loop for y below 10`\n `collect (+ x y)))`\n((0 1 2 3 4 5 6 7 8 9) (1 2 3 4 5 6 7 8 9 10) (2 3 4 5 6 7 8 9 10 11)\n (3 4 5 6 7 8 9 10 11 12) (4 5 6 7 8 9 10 11 12 13) (5 6 7 8 9 10 11 12 13 14)\n (6 7 8 9 10 11 12 13 14 15) (7 8 9 10 11 12 13 14 15 16)\n (8 9 10 11 12 13 14 15 16 17) (9 10 11 12 13 14 15 16 17 18))\n```", "```\n> `(loop for i`\n `from 0`\n `for day`\n `in '(monday tuesday wednesday thursday friday saturday sunday)`\n `collect (cons i day))`\n((0 . MONDAY) (1 . TUESDAY) (2 . WEDNESDAY)\n (3 . THURSDAY) (4 . FRIDAY) (5 . SATURDAY) (6 . SUNDAY))\n```", "```\n(defparameter *width* 100)\n(defparameter *height* 30)\n(defparameter *jungle* '(45 10 10 10))\n(defparameter *plant-energy* 80)\n```", "```\n(defparameter *plants* (make-hash-table :test #'equal))\n```", "```\n(defun random-plant (left top width height)\n    (let ((pos (cons (+ left (random width)) (+ top (random height)))))\n         (setf (gethash pos *plants*) t)))\n\n  (defun add-plants ()\n    (apply #'random-plant *jungle*)\n    (random-plant 0 0 *width* *height*))\n```", "```\n(defstruct animal x y energy dir genes)\n```", "```\n(1 1 10 1 1 1 1 1)\n```", "```\n(defparameter *animals*\n    (list (make-animal :x      (ash *width*  −1)\n                       :y      (ash *height* −1)\n                       :energy 1000\n                       :dir    0\n                       :genes  (loop repeat 8\n                                     collecting (1+ (random 10))))))\n```", "```\n(defun move (animal)\n    (let ((dir (animal-dir animal))\n         (x (animal-x animal))\n         (y (animal-y animal)))\n     (setf (animal-x animal) (mod (+ x\n                                     (cond ((and (>= dir 2) (< dir 5)) 1)\n                                           ((or (= dir 1) (= dir 5)) 0)\n                                           (t −1))\n                                      *width*)\n                                   *width*))\n     (setf (animal-y animal) (mod (+ y\n                                      (cond ((and (>= dir 0) (< dir 3)) −1)\n                                            ((and (>= dir 4) (< dir 7)) 1)\n                                            (t 0))\n                                      *height*)\n                                   *height*))\n      (decf (animal-energy animal))))\n```", "```\n(defun turn (animal)\n   (let ((x (random (apply #'+ (animal-genes animal)))))\n     (labels ((angle (genes x)\n                 (let ((xnu (- x (car genes))))\n                  (if (< xnu 0)\n                       0\n                       (1+ (angle (cdr genes) xnu))))))\n          (setf (animal-dir animal)\n               (mod (+ (animal-dir animal) (angle (animal-genes animal) x))\n  8)))))\n```", "```\n(defun eat (animal)\n  (let ((pos (cons (animal-x animal) (animal-y animal))))\n    (when (gethash pos *plants*)\n      (incf (animal-energy animal) *plant-energy*)\n      (remhash pos *plants*))))\n```", "```\n(defparameter *reproduction-energy* 200)\n\n  (defun reproduce (animal)\n    (let ((e (animal-energy animal)))\n     (when (>= e *reproduction-energy*)\n       (setf (animal-energy animal) (ash e −1))\n       (let ((animal-nu (copy-structure animal))\n             (genes     (copy-list (animal-genes animal)))\n              (mutation  (random 8)))\n          (setf (nth mutation genes) (max 1 (+ (nth mutation genes) (random 3) −1)))\n          (setf (animal-genes animal-nu) genes)\n          (push animal-nu *animals*)))))\n```", "```\n> `(defparameter *parent* (make-animal :x 0`\n   `:y 0`\n   `:energy 0`\n   `:dir 0`\n `:genes '(1 1 1 1 1 1 1 1)))`\n  *PARENT*\n > `(defparameter *child* (copy-structure *parent*))`\n  *CHILD*\n > `(setf (nth 2 (animal-genes *parent*)) 10)`\n  10\n > `*parent*`\n  #S(ANIMAL :X 0 :Y 0 :ENERGY 0 :DIR 0 :GENES (1 1 10 1 1 1 1 1))\n > `*child*`\n  #S(ANIMAL :X 0 :Y 0 :ENERGY 0 :DIR 0 :GENES (1 1 10 1 1 1 1 1))\n```", "```\n(setf (nth mutation genes) (max 1 (+ (nth mutation genes) (random 3) −1)))\n```", "```\n(defun update-world ()\n   (setf *animals* (remove-if (lambda (animal)\n                                   (<= (animal-energy animal) 0))\n                               *animals*))\n   (mapc (lambda (animal)\n            (turn animal)\n            (move animal)\n            (eat animal)\n            (reproduce animal))\n          *animals*)\n   (add-plants))\n```", "```\n(defun draw-world ()\n   (loop for y\n          below *height*\n          do (progn (fresh-line)\n                    (princ \"|\")\n                   (loop for x\n                          below *width*\n                         do (princ (cond ((some (lambda (animal)\n                                                   (and (= (animal-x animal) x)\n                                                        (= (animal-y animal) y)))\n                                                 *animals*)\n                                         #\\M)\n                                        ((gethash (cons x y) *plants*) #\\*)\n                                         (t #\\space))))\n                    (princ \"|\"))))\n```", "```\n(defun evolution ()\n   (draw-world)\n    (fresh-line)\n   (let ((str (read-line)))\n     (cond ((equal str \"quit\") ())\n           (t (let ((x (parse-integer str :junk-allowed t)))\n                 (if x\n                    (loop for i\n                        below x\n                        do (update-world)\n                        if (zerop (mod i 1000))\n                        do (princ #\\.))\n                     (update-world))\n                (evolution))))))\n```", "```\n> `(evolution)`\n|\n                                             |\n|\n                                                     |\n|\n                                                |\n|\n                                                     |\n|\n                                             |\n|\n                                             |\n|\n                                            |\n|\n                                     |\n|\n                                        |\n|\n                                             |\n|\n                                        |\n|\n                                           |\n|\n                                      |\n|\n                                      |\n|\n                                      |\n|                                                  M\n                                            |\n|\n                                        |\n|\n                                             |\n|\n                                          |\n|\n                                             |\n|\n                                      |\n|\n                                                  |\n|\n                                         |\n|\n                                           |\n|\n                                           |\n|\n                                              |\n|\n                                              |\n|\n                                          |\n|\n                                           |\n|\n                                   |\n```", "```\n|\n                                                    |\n|\n                                             |\n|\n                                                  |\n|\n                                          |\n|\n                                             |\n|\n                                         |\n|\n                                       |\n|\n                                        |\n|\n                                          |\n|\n                                            |\n|\n                                               |\n|\n                                                |\n|\n                                               |\n|\n                                           |\n|                                                *\n                                               |\n|\n                                                     |\n|                                               *   M\n                                                |\n|\n                                                     |\n|\n                                     |\n|\n                                     |\n|\n                                         |\n|\n                                             |\n|\n                                               |\n|\n                                                 |\n|\n                                                 |\n|\n                                                |\n|\n                                           |\n|\n                                             |\n|\n                                   |\n|\n                                                |\n``*`[enter]`*``\n|\n                                                |\n|\n                                                   |\n|\n                                                 |\n|                *\n                                                  |\n|\n                                                 |\n|\n                                                   |\n|\n                                                |\n|\n                                                  |\n|\n                                                |\n|\n                                             |\n|\n                                          |\n|\n                                               |\n|\n                                          |\n|\n                                       |\n|                                                *\n                                              |\n|                                                      *\n                                          |\n|                                               *  M\n                                            |\n|\n                                           |\n|\n                                     |\n|\n                                      |\n|\n                                  |\n|\n                                        |\n|\n                                      |\n|\n                                             |\n|\n                                      |\n|\n                                     |\n|\n                                         |\n|\n                                           |\n|\n                                        |\n|\n                                      |\n```", "```\n`100`\n|                                                    *\n               *                       |\n|\n           *                       *          |\n|  *                 **                            *\n                                           |\n|           *    *    *\n          * *                        |\n|                                          M        *\n      M*                           *        |\n|          *                        M    *\n                                       |\n|             *           *                                        *\n                                 |\n|                                        *     M             M *\n                                    |\n|                                           M M  M\n              *                  |\n|                       *                        M M             *    *\n                              |\n|                        *                       M M  MM                *\n    *                      |\n|                                            M* *\n                              *              |\n|                                                 M  M    M\n          *                         |\n|                          *                  M       MM\n                                           |\n|          *                  *     *      M  M   *      M\n   M  *                     *   *          |\n|     *                           *    *       M MM   *  M\n       *                *               |\n|                                            M M   M*  *\n         *              *           |\n|                        *      *        M    M  M\n                                           |\n|                   *                                 *    M\n                  *              *  *   |\n|\n   M                               *       |\n|         *                           * M               M\n                                            |\n|   *                 *               *             M     M\n                                         |\n| *    *                                  *     M M    M\n   M                                        |\n|               *                         *      M    M\n           * *          *                  |\n|                                            *\n                                   *       |\n|                        *             *\n          *                            |\n|                            *\n                       *              |\n|        *      *                                 M\n                                        *     |\n|                        *\n                                     *       |\n| *                   *                          M              *\n           * * *                   |\n```", "```\n`5000000`\n|                                                                *\n      M              M        |\n|         *            *          *\n                          M               |\n|      M\n                       *              |\n|           M                                       *\n       *       M        M                |\n|                *                            M            *\n        *                             |\n|                                                           **\n                                  *   |\n|                                                M\n                                          |\n|           M        *                                M              M\n       *                       |\n|              *                       *     M   M M     M\n              M                     M      |\n|                                                M\n                        M                  |\n| M*                                    *     M  M  MMM    M\n                                   M     |\n|    *              *                     MMM  *           M             M\n                       M  |\n|  *            M    *               M      M *MM*     MMM M\n                           *            |\n|                                              M  MMMMMM M M\n      M                        *         |\n|               M                          MMMM MMM  M *          M\n                              M   |\n|         M                              *          M MMM\n     *                               *   |\n|                                             M M M  M M M\n     M                           *    |\n|      M                                M M  MMM               M\n      M       M                 |\n|                      M                  M  M    MM\n   M             *          *      |\n|                                     *     MMM M\n MM M                                        M   |\n|                        M                            MM     *\n            M                          |\n|                                             MMM  M  M   M\n                                         |\n|           *               M                           M\n                                         |\n|               M            M          M        *M                *\n       M   M                     |\n|      M        M\n      MM            M                |\n|  M                             *                 M   *    M\n    M                                 |\n|               MM      M      M      M\n     M                        |\n|                   M       M         M\n                                         |\n|        M           *    M                    *            *\n                *                  |\n|        M     M                                     M\n                                          |\n```", "```\n>`*animals*`\n#S(ANIMAL :X 6 :Y 24 :ENERGY 65 :DIR 3 :GENES (67 35 13 14 1 3 11 74))\n #S(ANIMAL :X 72 :Y 11 :ENERGY 78 :DIR 6 :GENES (68 36 13 12 2 4 11 72))\n #S(ANIMAL :X 16 :Y 26 :ENERGY 78 :DIR 0 :GENES (71 36 9 16 1 6 5 77))\n #S(ANIMAL :X 50 :Y 25 :ENERGY 76 :DIR 4 :GENES (2 2 7 5 21 208 33 9))\n #S(ANIMAL :X 53 :Y 13 :ENERGY 34 :DIR 4 :GENES (1 2 8 5 21 208 33 8))\n #S(ANIMAL :X 58 :Y 10 :ENERGY 66 :DIR 6 :GENES (5 2 7 2 22 206 29 3))\n #S(ANIMAL :X 74 :Y 3 :ENERGY 77 :DIR 0 :GENES (68 35 11 12 1 3 11 74))\n #S(ANIMAL :X 47 :Y 19 :ENERGY 47 :DIR 2 :GENES (5 1 8 4 21 207 30 3))\n #S(ANIMAL :X 27 :Y 22 :ENERGY 121 :DIR 1 :GENES (69 36 11 12 1 2 11 74))\n #S(ANIMAL :X 96 :Y 14 :ENERGY 78 :DIR 5 :GENES (71 37 9 17 2 5 5 77))\n #S(ANIMAL :X 44 :Y 19 :ENERGY 28 :DIR 1 :GENES (1 3 7 5 22 208 34 8))\n #S(ANIMAL :X 55 :Y 22 :ENERGY 18 :DIR 7 :GENES (1 3 8 5 22 208 34 7))\n #S(ANIMAL :X 52 :Y 10 :ENERGY 63 :DIR 0 :GENES (1 2 7 5 23 208 34 7))\n #S(ANIMAL :X 49 :Y 14 :ENERGY 104 :DIR 4 :GENES (4 1 9 2 22 203 28 1))\n #S(ANIMAL :X 39 :Y 23 :ENERGY 62 :DIR 7 :GENES (70 37 9 15 2 6 5 77))\n #S(ANIMAL :X 97 :Y 11 :ENERGY 48 :DIR 0 :GENES (69 36 13 12 2 5 12 72))\n ...\n```", "```\n> `(format t \"Add onion rings for only ˜$ dollars more!\" 1.5)`\nAdd onion rings for only 1.50 dollars more!\nNIL\n```", "```\n> `(princ (reverse`\n        `(format nil \"Add onion rings for only ˜$ dollars more!\" 1.5)))`\n !erom srallod 05.1 ylno rof sgnir noino ddA\n \"!erom srallod 05.1 ylno rof sgnir noino ddA\"\n```", "```\n> `(prin1 \"foo\")`\n\"foo\"\n> `(princ \"foo\")`\nfoo\n```", "```\n> `(format t \"I am printing ˜s in the middle of this sentence.\" \"foo\")`\nI am printing \"foo\" in the middle of this sentence.\n> `(format t \"I am printing ˜a in the middle of this sentence.\" \"foo\")`\nI am printing foo in the middle of this sentence.\n```", "```\n> `(format t \"I am printing ˜10a within ten spaces of room.\" \"foo\")`\nI am printing foo        within ten spaces of room.\n```", "```\n> `(format t \"I am printing ˜10@a within ten spaces of room.\" \"foo\")`\nI am printing        foo within ten spaces of room.\n```", "```\n> `(format t \"I am printing ˜10,3a within ten (or more) spaces of room.\" \"foo\")`\nI am printing foo          within ten (or more) spaces of room.\n```", "```\n> `(format t \"I am printing ˜,,4a in the middle of this sentence.\" \"foo\")`\nI am printing foo     in the middle of this sentence.\n```", "```\n> `(format t \"The word ˜,,4,'!a feels very important.\" \"foo\")`\nThe word foo!!!! feels very important.\n```", "```\n> `(format t \"The word ˜,,4,'!@a feels very important.\" \"foo\")`\nThe word !!!!foo feels very important.\n```", "```\n> `(format t \"The number 1000 in hexadecimal is ˜x\" 1000)`\nThe number 1000 in hexadecimal is 3E8\n```", "```\n> `(format t \"The number 1000 in binary is ˜b\" 1000)`\nThe number 1000 in binary is 1111101000\n```", "```\n> `(format t \"The number 1000 in decimal is ˜d\" 1000)`\nThe number 1000 in decimal is 1000\n```", "```\n> `(format t \"Numbers with commas in them are ˜:d times better.\" 1000000)`\nNumbers with commas in them are 1,000,000 times better.\n```", "```\n> `(format t \"I am printing ˜10d within ten spaces of room\" 1000000)`\nI am printing    1000000 within ten spaces of room\n```", "```\n> `(format t \"I am printing ˜10,'xd within ten spaces of room\" 1000000)`\nI am printing xxx1000000 within ten spaces of room\n```", "```\n> `(format t \"PI can be estimated as ˜4f\" 3.141593)`\nPI can be estimated as 3.14\n```", "```\n> `(format t \"PI can be estimated as ˜,4f\" 3.141593)`\nPI can be estimated as 3.1416\n```", "```\n> `(format t \"PI can be estimated as ˜,4f\" pi)`\nPI can be estimated as 3.1416\n```", "```\n> `(format t \"Percentages are ˜,,2f percent better than fractions\" 0.77)`\nPercentages are 77.0 percent better than fractions\n```", "```\n> `(format t \"I wish I had ˜$ dollars in my bank account.\" 1000000.2)`\nI wish I had 1000000.20 dollars in my bank account.\n```", "```\n> `(progn (princ 22)`\n         `(terpri)`\n         `(princ 33))`\n22\n33\n```", "```\n> `(progn (princ 22)`\n         `(fresh-line)`\n         `(princ 33))`\n22\n33\n> `(progn (princ 22)`\n         `(fresh-line)`\n         `(fresh-line)`\n         `(princ 33))`\n22\n33\n```", "```\n> `(progn (format t \"this is on one line ˜%\")`\n           `(format t \"˜%this is on another line\"))`\n  this is on one line\n\n  this is on another line\n  > `(progn (format t \"this is on one line ˜&\")`\n           `(format t \"˜&this is on another line\"))`\n  this is on one line\n  this is on another line\n```", "```\n> `(format t \"this will print ˜5%on two lines spread far apart\")`\nthis will print\n\non two lines spread far apart\n```", "```\n> `(defun random-animal ()`\n      `(nth (random 5) '(\"dog\" \"tick\" \"tiger\" \"walrus\" \"kangaroo\")))`\nRANDOM-ANIMAL\n> `(random-animal)`\n\"walrus\"\n```", "```\n> `(loop repeat 10`\n        `do (format t \"˜5t˜a ˜15t˜a ˜25t˜a˜%\"`\n                   `(random-animal)`\n                   `(random-animal)`\n                   `(random-animal)))`\n     kangaroo  tick      dog\n     dog       walrus    walrus\n     walrus    tiger     tiger\n     walrus    kangaroo  dog\n     kangaroo  tiger     dog\n     tiger     walrus    kangaroo\n     tick      dog       tiger\n     kangaroo  tick      kangaroo\n     tiger     dog       walrus\n     kangaroo  kangaroo  tick\n```", "```\n> `(loop repeat 10`\n        `do (format t \"˜30<˜a˜;˜a˜;˜a˜>˜%\"`\n                   `(random-animal)`\n                   `(random-animal)`\n                   `(random-animal)))`\ntick         tiger        tick\ntick         tiger         dog\ntick          dog          dog\nkangaroo     kangaroo    tiger\ntiger      tiger      kangaroo\nwalrus       kangaroo      dog\ndog         dog         walrus\nkangaroo       dog      walrus\nwalrus        dog       walrus\nkangaroo       tiger      tick\n```", "```\n> `(loop repeat 10 do (format t \"˜30:@<˜a˜>˜%\" (random-animal)))`\n              dog\n            walrus\n           kangaroo\n             tick\n             tick\n             tiger\n              dog\n           kangaroo\n           kangaroo\n              dog\n```", "```\n> `(loop repeat 10`\n        `do (format t \"˜30:@<˜a˜;˜a˜;˜a˜>˜%\"`\n                     `(random-animal)`\n                     `(random-animal)`\n                     `(random-animal)))`\n    walrus    tick    tick\n    walrus    tiger    tick\n     tick     dog     tick\n    walrus    tiger   tiger\n   kangaroo   dog   kangaroo\n   tiger   kangaroo   walrus\n   tiger  kangaroo  kangaroo\n    kangaroo   tiger   tick\n    tick    tiger    walrus\n    walrus    tiger    tick\n```", "```\n> `(loop repeat 10`\n        `do (format t \"˜10:@<˜a˜>˜10:@<˜a˜>˜10:@<˜a˜>˜%\"`\n                     `(random-animal)`\n                     `(random-animal)`\n                     `(random-animal)))`\n   tiger   kangaroo  kangaroo\n kangaroo  kangaroo   walrus\n   tick      tick      tick\n    dog       dog       dog\n   tiger      dog     walrus\n    dog      tiger   kangaroo\n  walrus      dog      tick\n   tick     walrus   kangaroo\n    dog      tick     walrus\n   tiger     tiger     tiger\n```", "```\n> `(defparameter *animals* (loop repeat 10 collect (random-animal)))`\n*ANIMALS*\n> `*animals*`\n(\"dog\" \"kangaroo\" \"walrus\" \"kangaroo\" \"kangaroo\" \"walrus\" \"kangaroo\"\n \"dog\" \"tick\" \"tick\")\n```", "```\n> `(format t \"˜{I see a ˜a! ˜}\" *animals*)`\nI see a dog! I see a kangaroo! I see a walrus! I see a kangaroo! I see\n a kangaroo! I see a walrus! I see a kangaroo!\n I see a dog! I see a tick! I see a tick!\n```", "```\n> `(format t \"˜{I see a ˜a... or was it a ˜a?˜%˜}\" *animals*)`\nI see a dog... or was it a kangaroo?\nI see a walrus... or was it a kangaroo?\nI see a kangaroo... or was it a walrus?\nI see a kangaroo... or was it a dog?\nI see a tick... or was it a tick?\n```", "```\n> `(format t \"|˜{˜<|˜%|˜,33:;˜2d ˜>˜}|\" (loop for x below 100 collect x))`\n| 0  1  2  3  4  5  6  7  8  9 |\n|10 11 12 13 14 15 16 17 18 19 |\n|20 21 22 23 24 25 26 27 28 29 |\n|30 31 32 33 34 35 36 37 38 39 |\n|40 41 42 43 44 45 46 47 48 49 |\n|50 51 52 53 54 55 56 57 58 59 |\n|60 61 62 63 64 65 66 67 68 69 |\n|70 71 72 73 74 75 76 77 78 79 |\n|80 81 82 83 84 85 86 87 88 89 |\n|90 91 92 93 94 95 96 97 98 99 |\n```", "```\n> `(output-stream-p *standard-output*)`\nT\n```", "```\n> `(write-char #\\x *standard-output*)`\nxNIL\n```", "```\n> `(input-stream-p *standard-input*)`\nT\n```", "```\n> `(read-char *standard-input*)`\n`123`\n#\\1\n```", "```\n> `(print 'foo *standard-output*)`\nFOO\n```", "```\n> `(with-open-file (``my-stream \"data.txt\" :direction :output)`\n `(print \"my data\" my-stream))`\n```", "```\n> `(with-open-file (my-stream \"data.txt\" :direction :input)`\n `(read my-stream))`\n\"my data\"\n```", "```\n > `(let ((animal-noises '((dog . woof)`\n   `(cat . meow))))`\n `(with-open-file (my-stream \"animal-noises.txt\" :direction :output)`\n         `(print animal-noises my-stream)))`\n  ((DOG . WOOF) (CAT . MEOW))\n > `(with-open-file (my-stream \"animal-noises.txt\" :direction :input)`\n       `(read my-stream))`\n  ((DOG . WOOF) (CAT . MEOW))\n```", "```\n> `(with-open-file (my-stream \"data.txt\" :direction :output :if-exists :error)`\n      `(print \"my data\" my-stream))`\n*** - OPEN: file #P\"/home/user/data.txt\" already exists\n```", "```\n> `(with-open-file (my-stream \"data.txt\" :direction :output`\n                                         `:if-exists :supersede)`\n      `(print \"my data\" my-stream))`\n\"my data\"\n```", "```\n> `(defparameter my-socket (socket-server 4321))` ;ON THE SERVER\nMY-SOCKET\n```", "```\n> `(defparameter my-stream (socket-accept my-socket))` ;ON THE SERVER\n```", "```\n> `(defparameter my-stream (socket-connect 4321 \"127.0.0.1\"))` ;ON THE CLIENT\nMY-STREAM\n```", "```\n> `(print \"Yo Server!\" my-stream)`\n\"Yo Server!\"\n```", "```\n> `(read my-stream)`\n\"Yo Server!\"\n```", "```\n> `(print \"What up, Client!\" my-stream)`\n\"What up, Client!\"\n```", "```\n> `(read my-stream)`\n\"What up, Client!\"\n```", "```\n> `(close my-stream)`\nT\n```", "```\n> `(socket-server-close my-socket)`\nNIL\n```", "```\n> `(defparameter foo (make-string-output-stream))`\n> `(princ \"This will go into foo. \" foo)`\n> `(princ \"This will also go into foo. \" foo)`\n> `(get-output-stream-string foo)`\n\"This will go into foo. This will also go into foo. \"\n```", "```\n >  `(with-output-to-string (*standard-output*)`\n      `(princ \"the sum of \")`\n       `(princ 5)`\n       `(princ \" and \")`\n       `(princ 2)`\n       `(princ \" is \")`\n       `(princ (+ 2 5)))`\n \"the sum of 5 and 2 is 7\"\n```", "```\n> `(error \"foo\")`\n\n*** - foo\nThe following restarts are available:\nABORT          :R1      Abort main loop\n>\n```", "```\n (define-condition foo () ()\n    (:report (lambda (condition stream)\n                (princ \"Stop FOOing around, numbskull!\" stream))))\n```", "```\n> `(error 'foo)`\n\n*** - Stop FOOing around, numbskull!\nThe following restarts are available:\nABORT          :R1      Abort main loop\n>\n```", "```\n> `(defun bad-function ()`\n       `(error 'foo))`\n  BAD-FUNCTION\n > `(handler-case (bad-function)`\n      `(foo () \"somebody signaled foo!\")`\n       `(bar () \"somebody signaled bar!\"))`\n \"somebody signaled foo!\"\n```", "```\n > `(unwind-protect (/ 1 0)`\n                   `(princ \"I need to say 'flubyduby' matter what\"))`\n\n  *** - /: division by zero\n  The following restarts are available:\n  ABORT          :R1      Abort main loop\n  > `:r1`\n  I need to say 'flubyduby' matter what\n  >\n```", "```\nGET /lolcats.html HTTP/1.1\nHost: localhost:8080\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.5)\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\nKeep-Alive: 300\nConnection: keep-alive\n```", "```\n <html>\n    <body>\n       Sorry dudez, I don't have any L0LZ for you today :-(\n     </body>\n </html>\n```", "```\nPOST /login.html HTTP/1.1\n  Host: www.mywebsite.com\n  User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.5)\n  Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n  Accept-Language: en-us,en;q=0.5\n  Accept-Encoding: gzip,deflate\n  Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\n  Keep-Alive: 300\n  Connection: keep-alive\n  `Content-Length: 39`\n\n `userid=foo&password=supersecretpassword`\n```", "```\n (defun http-char (c1 c2 &optional (default #\\Space))\n   (let ((code (parse-integer\n                 (coerce (list c1 c2) 'string)\n                 :radix 16\n                 :junk-allowed t)))\n      (if code\n          (code-char code)\n        default)))\n\n  (defun decode-param (s)\n    (labels ((f (lst)\n                 (when lst\n                   (case (car lst)\n                       (#\\% (cons (http-char (cadr lst) (caddr lst))\n                                  (f (cdddr lst))))\n                      (#\\+ (cons #\\space (f (cdr lst))))\n                      (otherwise (cons (car lst) (f (cdr lst))))))))\n        (coerce (f (coerce s 'list)) 'string)))\n```", "```\n> `(decode-param \"foo\")`\n\"foo\"\n> `(decode-param \"foo%3F\")`\n\"foo?\"\n> `(decode-param \"foo+bar\")`\n\"foo bar\"\n```", "```\n(defun parse-params (s)\n   (let* ((i1 (position #\\= s))\n            (i2 (position #\\& s)))\n       (cond (i1 (cons (cons (intern (string-upcase (subseq s 0 i1)))\n                             (decode-param (subseq s (1+ i1) i2)))\n                       (and i2 (parse-params (subseq s (1+ i2))))))\n              ((equal s \"\") nil)\n              (t s))))\n```", "```\n> `(parse-params \"name=bob&age=25&gender=male\")`\n((NAME . \"bob\") (AGE . \"25\") (GENDER . \"male\"))\n```", "```\n(defun parse-url (s)\n    (let* ((url (subseq s\n                      (+ 2 (position #\\space s))\n                       (position #\\space s :from-end t)))\n          (x (position #\\? url)))\n       (if x\n          (cons (subseq url 0 x) (parse-params (subseq url (1+ x))))\n          (cons url '()))))\n```", "```\n> `(parse-url \"GET /lolcats.html HTTP/1.1\")`\n(\"lolcats.html\")\n> `(parse-url \"GET /lolcats.html?extra-funny=yes HTTP/1.1\")`\n(\"lolcats.html\" (EXTRA-FUNNY . \"yes\"))\n```", "```\n(defun get-header (stream)\n   (let* ((s (read-line stream))\n           (h (let ((i (position #\\: s)))\n                 (when i\n                       (cons (intern (string-upcase (subseq s 0 i)))\n                            (subseq s (+ i 2)))))))\n       (when h\n         (cons h (get-header stream)))))\n```", "```\n > `(get-header (make-string-input-stream \"foo: 1`\n  `bar: abc, 123`\n\n `\"))`\n  ((FOO . \"1\") (BAR . \"abc, 123\"))\n```", "```\n(defun get-content-params (stream header)\n        (let ((length (cdr (assoc 'content-length header))))\n          (when length\n            (let ((content (make-string (parse-integer length))))\n               (read-sequence content stream)\n               (parse-params content)))))\n```", "```\n (defun serve (request-handler)\n   (let ((socket (socket-server 8080)))\n     (unwind-protect\n        (loop (with-open-stream (stream (socket-accept socket))\n                  (let* ((url    (parse-url (read-line stream)))\n                          (path   (car url))\n                          (header (get-header stream))\n                          (params (append (cdr url)\n                                          (get-content-params stream header)))\n                          (*standard-output* stream))\n                            (funcall request-handler path header params))))\n         (socket-server-close socket))))\n```", "```\n(defun hello-request-handler (path header params)\n   (if (equal path \"greeting\")\n       (let ((name (assoc 'name params)))\n          (if (not name)\n              (princ \"<html><form>What is your name?<input name='name' />\n </form></html>\")\n             (format t \"<html>Nice to meet you, ˜a!</html>\" (cdr name))))\n       (princ \"Sorry... I don't know that page.\")))\n```", "```\n> `(hello-request-handler \"lolcats\" '() '())`\nSorry... I don't know that page.\n```", "```\n> `(hello-request-handler \"greeting\" '() '())`\n<html><form>What is your name?<input name='name' /></form></html>\n```", "```\n> `(hello-request-handler \"greeting\" '() '((name . \"Bob\")))`\n<html>Nice to meet you, Bob!</html>\n```", "```\n> `(serve #'hello-request-handler)`\n```"]