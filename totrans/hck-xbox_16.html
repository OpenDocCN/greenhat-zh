<html><head></head><body>
  <h1><span class="chapter">Appendix C -</span><br/>
  Getting into PCB Layout</h1>

  <p>This appendix will introduce you to the PCB design and layout process, and <span style="font-size: 1em;">will survey available tools that you may need to achieve your design goals, featuring products and techniques for those on a shoestring budget. I</span> <span style="font-size: 1em;">conclude by presenting some simple designs to get you started in your</span> <span style="font-size: 1em;">hardware adventures.</span></p>

  <h2 id="sigil_toc_id_128"><b class="calibre3">Philosophy and Design Flow</b></h2>

  <p>Printed circuit boards are the canvas of the hardware hacker, and CAD tools are the brushes. Like any engineering or artistic discipline, building profi-ciency in printed circuit board design and layout takes practice. Fortunately, the advent of inexpensive PCB prototyping services and free (or nearly free) CAD tools have made PCB design and layout an inexpensive and accessible hobby.</p>

  <p>The design and layout of PCBs are two intimately coupled tasks. Trade-offs <span style="font-size: 1em;">give and take throughout the design and layout phases. Sometimes a</span> <span style="font-size: 1em;">component may not fit, or a part may not be available, and you’ll have to</span> <span style="font-size: 1em;">change the schematic design to allow for this shortfall. Other times, you may make a high-level design change or you may catch a bug, and the PCB will</span> <span style="font-size: 1em;">have to be updated to reflect these changes. In my experience, the key to</span> <span style="font-size: 1em;">rapidly cranking out a successful PCB design is to be flexible on all design fronts.</span></p>

  <h3 id="sigil_toc_id_129"><b class="calibre3">Refining Your Idea</b></h3>

  <p>The PCB design process always starts with your idea. The first thing you <span style="font-size: 1em;">need to do is to get a very clear vision of what you are trying to build. The</span> <span style="font-size: 1em;">more specifics you have up front, the easier you will find the design</span> <span style="font-size: 1em;">process. You should have an idea of how big you want the final board to</span> <span style="font-size: 1em;">be, how much it should cost, and of course what it should do. I always</span> <span style="font-size: 1em;">find it helpful to draw sketches and, in the case of large projects, to write design documents that help me organize and record my thoughts.</span></p>

  <p>For the first few designs, one of the most difficult steps will be nailing <span style="font-size: 1em;">down an idea, because you won’t know what kinds of components are</span> <span style="font-size: 1em;">available to implement your idea, and what sorts of real-world constraints</span> <span style="font-size: 1em;">you will have to design around. The best way to get started is to find an</span> <span style="font-size: 1em;">existing idea that is very similar to yours and to model your idea after it.</span> <span style="font-size: 1em;">(Many chip manufacturers offer free application notes and design samples</span> <span style="font-size: 1em;">that form a great starting point.) Another way to define your ideas is to learn from existing products: If you want to build an alarm clock, take an existing clock apart to see how it was built.</span></p>

  <h3 id="sigil_toc_id_130"><b class="calibre3">Schematic Capture</b></h3>

  <p>Once you have your idea, you need to create a <i class="calibre4">schematic</i> diagram. A schematic is a symbolic representation of your idea, expressed as a collection of part symbols and virtual wires.</p>

  <p>Most schematic capture software comes with a library of parts to help <span style="font-size: 1em;">accelerate the schematic capture process. However, if you do not find the</span> <span style="font-size: 1em;">part you need in the library, you will have to build your own schematic</span> <span style="font-size: 1em;">symbol. All schematic symbols are linked to a PCB component footprint,</span> <span style="font-size: 1em;">which is a pattern of copper on a PC board that mates to a component.</span></p>

  <p><span style="font-size: 1em;">One common source of errors stems from not checking the link between</span> <span style="font-size: 1em;">the symbol and the footprint: A 16-pin DIP footprint does not fit a 16-pin</span> <span style="font-size: 1em;">in-line surface mount connector, and most design tools cannot tell the</span> <span style="font-size: 1em;">difference between the two. Therefore, check to make sure that your</span> <span style="font-size: 1em;">footprint assignments are all correct, and double and triple check the</span> <span style="font-size: 1em;">schematic symbol. In particular, always check and recheck power pins, since they can cause the most difficult and destructive kinds of errors. Consider having a friend double check the symbols as well, to avoid repeating errors or allowing errors to pass unknowingly. (This amount of redundancy may sound silly for simple parts, but it becomes absolutely essential for hundred and thousand-pin parts where your brain becomes mush halfway through</span> <span style="font-size: 1em;">the checking process.)</span></p>

  <p>Attention to detail from the very beginning is the most important skill for capturing a schematic, and can save you from the headache of frustrating <span style="font-size: 1em;">bugs later on. Every pin on every component is there for a reason, and if</span> <span style="font-size: 1em;">any pin is left unconnected you should understand why that is or is not</span> <span style="font-size: 1em;">okay. To this end, read the product data sheets, including every single page and footnote. Don’t ignore the fine print that requires a pull-up resistor to set startup conditions, or a capacitor to filter noise or stabilize the system or you’re likely to end up with more frustrating bugs.</span></p>

  <p><img alt="figure_C-1" src="../Images/figure_C-1.png" style="width:100%;"/><br/></p>

  <p class="caption"><b>Figure C-1:</b> The board design process, from idea to finished product.</p>

  <p>Design rule checkers are helpful in finding some errors in schematics, but the checks they perform are usually quite elementary, and thus catch only the grossest of errors. A typical set of checks might include catching duplicate part designators, dangling nets, and floating inputs.</p>

  <p>In addition to conventional design rule checkers, you can also devise your <span style="font-size: 1em;">own simple checks. For example, many design tools</span> <i class="calibre4" style="font-size: 1em;">do not</i> <span style="font-size: 1em;">perform “netlist parity checks,” which can be generated fairly easily using a perl script or a spreadsheet program. Netlist parity checks are heuristic checks that tally the number of components connected to each netlist, then sort the tal y by the number of connections. The “single-pin nets” will be at the top of the</span> <span style="font-size: 1em;">sorted list. A single-pin net is almost always an indication of a typographical error (misspelled netlist name) during schematic capture. It can be useful to browse through the whole sorted list briefly, to see that all groups of signals have the same number of connections. Most signal busses have the same number of connections to every signal in the bus. You can create a tool that enables netlist connection tally checks for your schematic capture program in an afternoon, and you will undoubtedly save yourself countless hours of effort and money by finding the bugs it will catch.</span></p>

  <p>Before exporting the schematic to the board layout tool, you should order <span style="font-size: 1em;">all of the parts in the schematic’s bill of materials. Often, critical parts will be in short supply and the schematic capture wil have to be redesigned to account for the shortage. Frequently, a change in a component footprint</span> <span style="font-size: 1em;">assignment is the only redesign necessary. Modifying the schematic design to account for manufacturer’s shortages avoids the difficult task of making the change on a finished board layout.</span></p>

  <h3 id="sigil_toc_id_131"><b class="calibre3">Board Layout</b></h3>

  <p>The input to a board layout program is a netlist that is annotated with <span style="font-size: 1em;">component footprint information. A netlist is an intermediate representa</span><span style="font-size: 1em;">tion of every component and pin, and their connectivity. Netlist extraction is a well-automated process, but the correlation of schematic symbols to PC</span> <span style="font-size: 1em;">board footprints is not always well-managed.</span></p>

  <p>The difficulty of symbol-to-footprint correlation stems from the availability of multiple packaging options for a single part. For example, the symbol for a transistor could equally imply a tiny SOT-23 packaged device or an enormous TO-3 packaged device, and it is up to you to ensure that the <span style="font-size: 1em;">proper package is chosen during netlist extraction. It’s always good to check the implied footprint</span> <i class="calibre4" style="font-size: 1em;">when the component is placed in a schematic</i><span style="font-size: 1em;">, rather than checking all at once during the netlist translation, or, worse yet, during placement or final design review.</span></p>

  <p>Once you have a finished netlist, you are ready to do the board layout.</p>

  <p>The other external input to a board layout program are the design rules. <span style="font-size: 1em;">Design rules are set by the board fabrication company and include</span> <span style="font-size: 1em;">specifications for the minimum trace width and minimum trace to trace</span> <span style="font-size: 1em;">spacing, minimum hole size, minimum through-hole annulus, and the</span> <span style="font-size: 1em;">number of power and routing layers. The exact design rules depend on</span> <span style="font-size: 1em;">the process you choose, which in turn is driven by what you can afford.</span> <span style="font-size: 1em;">The best processes offer traces as fine as 2 mils (a mil is 1/1000th of an</span> <span style="font-size: 1em;">inch or 25.4 microns) and laser-drilled blind/buried vias with a diameter</span> <span style="font-size: 1em;">of about the same, but the price for fabrication is well outside the typical hobbyist’s budget of less than one hundred dollars. A more typical</span> <span style="font-size: 1em;">hobbyist’s process features 6 mil trace/space design rules with 15 mil</span> <span style="font-size: 1em;">minimum finished hole sizes, with either two or four layers of copper.</span> <span style="font-size: 1em;">(You’ll find a list of board fabrication companies toward the end of this appendix.)</span></p>

  <p>Board layout consists of two phases: placement and routing. Intelligent <span style="font-size: 1em;">parts placement will greatly simplify the routing task. In general, the goal is to place all parts so as to keep connections as short as possible, with as few vias as possible, in order to minimize noise, delay, and signal losses. The placement of some parts, such as connectors, switches, and power components, are well-constrained, leaving you little choice. For the remainder of the parts, an understanding of the design will help you to determine which parts should get the best placement.</span></p>

  <p><span style="font-size: 1em;">Once your placement is finished, print the design at a scale of 1:1 and verify that the components fit in their respective footprints by populating the</span> <span style="font-size: 1em;">printed layout with the actual components. If you intend to use a socket</span> <span style="font-size: 1em;">with a component, be sure to use the socket for verifying the 1:1 plot, as</span> <span style="font-size: 1em;">sockets require more space than the component itself. This check guarantees that you have all the components in the correct package type, that all your component outlines are correct, and that there is sufficient clearance between each component to facilitate easy assembly. Another important thing to check on the 1:1 plot is the orientation and pinout of all the connectors</span> <span style="font-size: 1em;">because it is very easy to invert a connector or to have used the wrong</span> <span style="font-size: 1em;">gender’s footprint on the circuit board. Be careful when handling chips too, especially those with fine-pitch surface mount leads. Be sure not to bend the leads, and observe proper static electricity control protocol.</span></p>

  <h3 id="sigil_toc_id_132"><b class="calibre3">General Placement and Routing</b> <b>Guidelines</b></h3>

  <p>Here is a short list of some placement and routing guidelines. Remember, <span style="font-size: 1em;">these are just general suggestions, and there will undoubtedly be situations where they do not apply.</span></p>

  <h4 id="sigil_toc_id_133"><b>Leave Space for Via Fanouts on Surface</b> <b>Mount Devices</b></h4>

  <p>Surface mount devices offer a great density advantage when compared <span style="font-size: 1em;">with the older through-hole componentry that used to be the de facto</span> <span style="font-size: 1em;">standard. However, surface mount components still require through-</span><span style="font-size: 1em;">hole vias for routability, especially in complex and/or auto-routed</span> <span style="font-size: 1em;">designs. These routing vias are referred to as “fan-out” vias for SMD</span> <span style="font-size: 1em;">pads. Figures C-2 and C-3 demonstrate the use of fan-out vias on a</span> <span style="font-size: 1em;">surface mount part.</span></p>

  <h4 id="sigil_toc_id_134"><b class="calibre3">Decoupling Capacitors Fit Nicely Under</b> <b>SMD Pads</b></h4>

  <p>The most common passive component in a typical digital design is the <span style="font-size: 1em;">decoupling capacitor. These tiny capacitors are everywhere, and they can</span> <span style="font-size: 1em;">consume valuable routing and via fan-out space if they are not properly</span> <span style="font-size: 1em;">placed. If you are willing to create a double-sided surface-mount board,</span> <span style="font-size: 1em;">decoupling capacitors can be placed on the board side opposite the target</span> <span style="font-size: 1em;">component’s pads. By placing these components under the component’s</span> <span style="font-size: 1em;">pad space, you are not consuming any via fan-out area. In fact, a well-placed</span> <span style="font-size: 1em;">decoupling capacitor can share the power via used by the component’s</span> <span style="font-size: 1em;">power pins. The view in the lower left hand corner of Figure C-2</span> <span style="font-size: 1em;">provides a clear illustration of this technique. (There are some special</span> <span style="font-size: 1em;">cases where you may not want to do this, as noted in the next section.)</span></p>

  <p><b class="calibre3"><img alt="" class="calibre2" src="../Images/index-246_1.png"/></b></p>

  <p class="caption"><b class="calibre3">Figure C-2</b>: Four views of a circuit board layout. From the top left, clockwise: fabricated circuit board with components; top-layer circuit board view in PCB <span style="font-size: 1em;">layout program; all-layers circuit board view in PCB layout program; top and bottom only layers view demonstrating two-sided SMT layout.</span></p>

  <p><b><br/></b></p>

  <p class="caption"><b><img alt="figure_c-3" src="../Images/figure_c-3.png" style="width:100%;"/>Figure C-3</b><span style="font-size: 1em;">: Fan-out regions around an SMD component’s footprint.</span><br/></p>

  <h4 id="sigil_toc_id_135"><b class="calibre3">Know Your Special Traces</b></h4>

  <p>The good news about laying out digital circuit boards is that most traces <span style="font-size: 1em;">require little thought, unlike a typical analog board. The bad news is that if you don’t do the rest of the traces correctly, your board will exhibit strange and frustrating behavior that will be hard to debug. As a result, routing these special traces is a little bit of a black art. This section gives just a few guidelines for coping with these special traces, but I encourage interested readers to find a text dedicated to board layout to really learn and appreciate these techniques. Two texts that I recommend are</span> <i class="calibre4" style="font-size: 1em;">Digital Systems Engineering</i> <span style="font-size: 1em;">by William J. Dally and John W. Poulton (Cambridge University Press), and</span> <i class="calibre4" style="font-size: 1em;">High Speed Digital Design: A Handbook of Black Magic</i> <span style="font-size: 1em;">by Howard W.</span> <span style="font-size: 1em;">Johnson and Martin Graham (Prentice-Hal PTR).</span></p>

  <p>Typically, the kinds of traces that require special attention when routing a circuit board are:</p>

  <ul>
    <li>Power traces</li>

    <li>Timing reference (clock) traces</li>

    <li>High speed traces</li>

    <li>Analog/mixed signal traces</li>
  </ul>

  <p>As a general rule, power traces should be thicker than your average signal <span style="font-size: 1em;">trace, especially if you are using one of the higher-end fabrication processes that offer narrow (~ 5 mil) trace widths. Power traces need to be thickened to counter both resistive heating and parasitic inductance. Narrow power traces, especially near the key power distribution points, will act like resistors and heat up, dropping the supply voltage to a level that causes indeterminate malfunctions in your circuits.</span></p>

  <p><span style="font-size: 1em;">The proper sizing of a power trace depends upon the thickness of the</span> <span style="font-size: 1em;">copper. Typical boards use “1-oz copper” that is 1.35 mils thick (one square foot of 1.35 mil thick copper foil weights one ounce). An exterior 12 mil</span> <span style="font-size: 1em;">wide trace in 1 oz copper is required to pass 1 ampere of current with a 10</span> <span style="font-size: 1em;">degree Celsius temperature rise. Thicker traces are required for buried layers for a similar current handling capacity.</span></p>

  <p>When routing power traces between layers, remember that vias have <span style="font-size: 1em;">resistance as well. A single via is insufficient to connect critical power traces between layers. Critical power traces should have multiple vias connecting them between layers to keep parasitic resistances and inductances down.</span> <span style="font-size: 1em;">Distributed power planes on multiple layers should also have vias gener</span><span style="font-size: 1em;">ously distributed throughout to ensure that a common potential is</span> <span style="font-size: 1em;">preserved.</span></p>

  <div class="note">
    <h3 id="sigil_toc_id_136">Note</h3>

    <p><img alt="" class="note" src="../Images/index-248_1.png"/></p>

    <p><b class="calibre3">In high performance or low noise applications, placing a</b> <b>via between a decoupling capacitor and the power pin</b> <b>may carry too high an electrical integrity price for the</b> <b>routing convenience. Vias disrupt the propagation of high-</b><b>speed (hundreds of megahertz) electrical waves. Thus,</b> <b>the optimal location of a decoupling capacitor in these applications is between the component pin and the power</b> <b>via.</b></p>
  </div>

  <p style="clear:left;">Timing reference signals include clocks and strobes. Many memory devices <span style="font-size: 1em;">require asynchronous control strobes that have sensitive timing require</span><span style="font-size: 1em;">ments. These signals should be properly terminated and routed in a manner</span> <span style="font-size: 1em;">consistent with the termination strategy, typically a “daisy chain” route. Daisy chain routes have no branches, so there is only one path for the wavefront of the signal to travel.</span></p>

  <p>Electric signals travel at about 1/4 the speed of light on a circuit board, or about three inches in a nanosecond. Thus, high speed traces must have <span style="font-size: 1em;">matched lengths, or signals can arrive significantly out of phase with respect to the timing reference. Trace lengths are matched by extending shorter traces to the length of the longest trace. Trace length extension is accomplished using serpentine traces that meander and increase the effective length of a trace without changing the placement of the trace’s endpoints.</span></p>

  <p>Analog and mixed-signal routing is well beyond the scope of this appendix. <span style="font-size: 1em;">In an average hobbyist’s digital design, most of the analog circuitry will be isolated to the power supplies. Any special layout requirements for a</span> <span style="font-size: 1em;">particular power supply component is typically well-documented in the</span> <span style="font-size: 1em;">component’s datasheet.</span></p>

  <p>Keep in mind that electrical signals are lazy and promiscuous: signal <span style="font-size: 1em;">current will always follow the path of least resistance, and signals will</span> <span style="font-size: 1em;">couple into adjacent traces. Furthermore, current must be conserved, so</span> <span style="font-size: 1em;">every signal current path must have a return current path, whether it is</span> <span style="font-size: 1em;">explicit or not. Keep these simple rules in mind as you layout any analog</span> <span style="font-size: 1em;">sections on your circuit board.</span></p>

  <h4 id="sigil_toc_id_137"><b class="calibre3" style="font-size: 1em;">Circuit Boards Make Fine Heatsinks</b><br/></h4>

  <p>When routing high-power components, such as power regulators and high-<span style="font-size: 1em;">performance microprocessors, remember that the copper in a circuitboard is</span> <span style="font-size: 1em;">an excellent conductor of heat. You can save yourself a heat sink under</span> <span style="font-size: 1em;">certain conditions by simply laying out a large region of copper connected to the heat slug or ground pins of the target part. If you are using a multilayer board design with power planes, use multiple vias to help conduct heat into the internal layers.</span></p>

  <p>The heatsinking capabilities of a circuitboard can also be a nuisance during hand assembly. The good thermal conductivity of copper makes it difficult <span style="font-size: 1em;">to heat up a component pin that is also connected to a large region of</span> <span style="font-size: 1em;">copper. When connecting low-power components to the power planes,</span> <span style="font-size: 1em;">consider using vias with</span> <i class="calibre4" style="font-size: 1em;">thermal reliefs</i><span style="font-size: 1em;">. A thermal relief is a set of small gaps in a via connection to a power plane that reduces thermal conductivity without significantly impacting the connection’s electrical performance. (Note that a large group of densely packed thermally relieved power vias around a region of copper can result in unconnected or poorly connected islands of copper.)</span></p>

  <h4 id="sigil_toc_id_138"><b class="calibre3">Establish Preferred Routing Directions for</b> <b class="calibre3" style="font-size: 1em;">Each Layer</b></h4>

  <p>Establishing a dominant routing direction for each layer can simplify the <span style="font-size: 1em;">routing of dense boards. For example, make the top layer the horizontal</span> <span style="font-size: 1em;">routing layer, and the bottom one the vertical routing layer. If you need to route a signal between two components located diagonally across the board,</span> <span style="font-size: 1em;">first run a horizontal trace on the top and then a vertical trace on the bottom to connect the two components. The alternative strategy of just running a trace diagonal y across the top layer of the board, for example, reduces the overall routability between the two halves of the board by one-half: The</span> <span style="font-size: 1em;">only way to get from one half to the other is now to go on the bottom.</span></p>

  <p>Exceptions to this rule are acceptable, especially if you have to make a signal integrity versus routability trade-off.</p>

  <h4 id="sigil_toc_id_139"><b class="calibre3">Stack a Board with Orthogonal Layers</b></h4>

  <p>After establishing the preferred routing directions for each layer, stack <span style="font-size: 1em;">the layers such that no two layers have parallel preferred routing direc</span><span style="font-size: 1em;">tions. This orthogonality helps keep the interference of signals between</span> <span style="font-size: 1em;">layers to a minimum. If you have power layers, try to stack them between</span> <span style="font-size: 1em;">layers to help shield interference between signal layers.</span></p>

  <h4 id="sigil_toc_id_140"><b class="calibre3">On Two-Layer Boards, Use Fingers to Bus</b> <b class="calibre3" style="font-size: 1em;">Power</b></h4>

  <p>On a two-layer board, it is often tempting to just run power and ground <span style="font-size: 1em;">as a ring around the outside of the board. This is not an ideal situation,</span> <span style="font-size: 1em;">because the ring starves the heart of the board and also increases the</span> <span style="font-size: 1em;">potential for large parasitic current loops that will degrade circuit</span> <span style="font-size: 1em;">performance. Instead, use interdigitated and/or stacked power</span> <span style="font-size: 1em;">fingers.These fingers will establish the dominant routing direction of each layer, and should be laid out before routing any signals.</span></p>

  <h4 id="sigil_toc_id_141"><b class="calibre3">Hints on Using an Auto-Router</b></h4>

  <p>Auto-routers are a mixed blessing: they can save hours of routing time, <span style="font-size: 1em;">but they can also cause hours of frustrating problems. The first rule of</span> <span style="font-size: 1em;">using an auto-router is to never allow it to work on your only copy of a</span> <span style="font-size: 1em;">circuit board design file. Instead, create a copy of your design and let the auto-router perform its magic on the copy.</span></p>

  <p><span style="font-size: 1em;">The second rule is to learn the auto-router’s bugs using simple test</span> <span style="font-size: 1em;">designs before applying it to your final design. Auto-routers frequently</span> <span style="font-size: 1em;">have critical bugs or limitations that must be understood before using the</span> <span style="font-size: 1em;">tool. When learning an auto-router’s bugs, pay particular attention to</span> <span style="font-size: 1em;">how it handles locked traces, poured polygons, and awkward trace sizes.</span> <span style="font-size: 1em;">Some auto-routers will actually remove locked traces (traces laid down</span> <span style="font-size: 1em;">by hand and marked as unmovable), while others ignore them or do not</span> <span style="font-size: 1em;">function in their presence. This can be particularly frustrating if you have spent hours laying out the critical power and timing nets before turning</span> <span style="font-size: 1em;">on the auto-router.</span></p>

  <p>Finally, don’t count on an auto-router to fully route a complex board. <span style="font-size: 1em;">Auto-routers are great for quickly routing the first 90 percent of a board, but they really slow down as the board gets more congested. Note that</span> <span style="font-size: 1em;">subtle changes in component placement can make or break an auto-</span><span style="font-size: 1em;">router. Many auto-routers will not recognize busses or straight-through</span> <span style="font-size: 1em;">connections without special annotation or ideal component placement.</span></p>

  <h2 id="sigil_toc_id_142"><b class="calibre3">CAD Tools</b></h2>

  <p>Board design tools have dropped in price significantly over the past few <span style="font-size: 1em;">years. The tool I use most frequently for board design is Protel 99SE. (I</span> <span style="font-size: 1em;">have yet to purchase the newer version, Protel DXP.) Protel is a highly</span> <span style="font-size: 1em;">integrated tool, featuring schematic capture, simulation, library manage</span><span style="font-size: 1em;">ment, and board layout with design rule checking and auto-routing, all</span> <span style="font-size: 1em;">integrated in one tool. (It seems like every software release some new</span> <span style="font-size: 1em;">feature is integrated into the design environment, for better or for</span> <span style="font-size: 1em;">worse.)</span></p>

  <p>You can download a 30-day fully functional demo of the Protel software <span style="font-size: 1em;">from their website at www.protel.com. While a full-fledged license for</span> <span style="font-size: 1em;">the product is in the thousands of dollars, this still compares favorably</span> <span style="font-size: 1em;">with many other software packages that offer the same depth of function</span><span style="font-size: 1em;">ality and number of features. Other high-end PCB CAD vendors include</span></p>

  <p><span style="font-size: 1em;">Mentor (PADS), Cadence (OrCAD), and Altium (P-CAD). Interestingly,</span> <span style="font-size: 1em;">Altium also owns the Protel software suite.</span></p>

  <p>If you are are just starting out and want to do some casual board layout, <span style="font-size: 1em;">some board fabrication companies offer full-function captive design tools</span> <span style="font-size: 1em;">for free. ExpressPCB (www.expresspcb.com) offers a free schematic</span> <span style="font-size: 1em;">capture and PCB layout tool for clients who use their fabrication service.</span> <span style="font-size: 1em;">Their tool is functional, but a little limited in terms of the design rule checks and the practical complexity for which you can realistically use it. ExpressPCB</span> <span style="font-size: 1em;">is a great starter tool for beginners, however, and is capable of implementing almost any weekend hardware project.</span></p>

  <p><span style="font-size: 1em;">Before submitting any finished design for production, preview your</span> <span style="font-size: 1em;">exported files with a third-party file viewer to help protect your fabrica</span><span style="font-size: 1em;">tion investment against bugs in your design tools. The most common file</span> <span style="font-size: 1em;">format used for board fabrication is the “Gerber” file format. A good,</span> <span style="font-size: 1em;">free Gerber previewer that I trust is made by Graphicode (http://</span><span style="font-size: 1em;">www.graphicode.com/).</span></p>

  <h2 id="sigil_toc_id_143"><b class="calibre3">Board Fabrication Companies</b></h2>

  <p>Board fabrication companies come in as wide a range of capabilities as <span style="font-size: 1em;">the CAD tools. Some companies only do large production orders, while</span> <span style="font-size: 1em;">others earn their bread and butter servicing the quick-turn prototype and</span> <span style="font-size: 1em;">hobbyist market. Here are a few of my favorite board fabrication</span> <span style="font-size: 1em;">companies, along with a brief description of their basic offerings.</span></p>

  <h3 id="sigil_toc_id_144"><b class="calibre3">Sierra Proto Express</b></h3>

  <p>Located in San Jose, California, Sierra Proto Express offers some of the <span style="font-size: 1em;">most competitive quick-turn prototype rates. As of this writing, Sierra</span> <span style="font-size: 1em;">Proto Express offers a line of “No Touch Product” processes. These</span> <span style="font-size: 1em;">fabrication processes have strict design rule requirements, but they are</span> <span style="font-size: 1em;">very affordable. For example, you can have a two-layer circuit board</span> <span style="font-size: 1em;">fabricated in four days for $34 per board (minimun order of two</span> <span style="font-size: 1em;">boards), or you can have a four-layer circuit board fabricated in four days for $51 per board (minimum order of two boards). The technology</span> <span style="font-size: 1em;">offered at these prices is a 6 mil trace/space design rule with 15 mil</span> <span style="font-size: 1em;">finished hole sizes. Sierra Proto Express also offers faster turn-time</span> <span style="font-size: 1em;">processes with trace widths down to 5 mils and 10 mil finished hole sizes.</span> <span style="font-size: 1em;">For more information, visit www.sierraprotoexpress.com.</span></p>

  <h3 id="sigil_toc_id_145"><b class="calibre3">Data Circuit Systems</b></h3>

  <p>Data Circuit Systems, also located in San Jose, California, is my vendor of choice for designs that require aggressive design rules or special processing options that don’t fit well with the cheaper quick-turn companies’ <span style="font-size: 1em;">offerings. Their comprehensive “Process Capabilities Survey” (available</span> <span style="font-size: 1em;">for download at their website) is comprehensive and clearly written, so it</span> <span style="font-size: 1em;">takes a lot of guesswork out of interpreting the design rules. They also</span> <span style="font-size: 1em;">do a fairly rigorous set of factory checks on your submitted design,</span> <span style="font-size: 1em;">which often catch subtle layout errors that can cause problems later. I</span> <span style="font-size: 1em;">have found their staff to be competent and friendly and, though their</span> <span style="font-size: 1em;">prices are slightly higher than most engineering prototype manufacturers,</span> <span style="font-size: 1em;">their well-documented process and design rule checks help reduce the</span> <span style="font-size: 1em;">risk of aggressive designs, and in the end the extra cost is probably worth it. Visit www.datacircuits.com.</span></p>

  <h3 id="sigil_toc_id_146"><b class="calibre3">Advanced Circuits</b></h3>

  <p>Advanced Circuits of Aurora, Colorado (www.4pcb.com) features an <span style="font-size: 1em;">instant quotation feature at their website. This feature alone makes them a good choice for boards of intermediate-complexity that do not fit any of</span> <span style="font-size: 1em;">the discount, quick-turn process guidelines. You can use the instant quote</span> <span style="font-size: 1em;">feature to optimize your choice of implementation technology for price.</span> <span style="font-size: 1em;">In addition, they frequently offer discount, quick-turn specials.</span></p>

  <h3 id="sigil_toc_id_147"><b class="calibre3">Alberta Printed Circuits</b></h3>

  <p>Alberta Printed Circuits (AP Circuits), located in Alberta, Canada, is one <span style="font-size: 1em;">of the original quick-turn prototype PCB houses, with prompt service.</span> <span style="font-size: 1em;">The P1 process they offer is a basic one, with no soldermask or</span> <span style="font-size: 1em;">silkscreen. As a result, it is difficult to execute fine-pitch surface mount designs because solder tends to get everywhere during the assembly</span> <span style="font-size: 1em;">phase. However, they will fabricate and ship your board in the P1</span> <span style="font-size: 1em;">process in just one day for an unheard of price, with no minimum order</span> <span style="font-size: 1em;">requirements. The base fee for a production run is about $45 at the time</span> <span style="font-size: 1em;">of writing, with approximately a $0.65 per square inch charge on top of</span> <span style="font-size: 1em;">the base fee. The technology is an 8 mil trace/space with a minimum drill</span> <span style="font-size: 1em;">size of 20 mil (28 mil if you want to stick with the cheapest process</span> <span style="font-size: 1em;">option). AP Circuits is great for boards that have to get done in a pinch</span> <span style="font-size: 1em;">and on a strict budget, especially if you are using through-hole or coarse</span> <span style="font-size: 1em;">SMT components that are easy to assemble without a soldermask. Visit</span> <span style="font-size: 1em;">www.apcircuits.com.</span></p>

  <h2 id="sigil_toc_id_148"><b class="calibre3">Starter Projects</b></h2>

  <p>In Chapter 5, “Replacing a Broken Power Supply,” you are instructed on <span style="font-size: 1em;">how to replace an Xbox power supply with a standard ATX power</span> <span style="font-size: 1em;">supply. The one problem is that the polarity of the power on signal is</span> <span style="font-size: 1em;">inverted between the Xbox and the standard ATX supply. The hack</span> <span style="font-size: 1em;">solution proposed in the chapter is to always leave the supply on, and to</span> <span style="font-size: 1em;">instead switch the Xbox on and off by first turning on the power supply</span> <span style="font-size: 1em;">and then pressing the Xbox’s power button.</span></p>

  <p><span style="font-size: 1em;">It is fairly easy to design and layout a board that enables you to invert the polarity of the power signal so that you can control the power state of</span> <span style="font-size: 1em;">the Xbox from just the front panel of the Xbox. You can also properly</span> <span style="font-size: 1em;">regulate the standby power supply, instead of using two diodes. Such a</span> <span style="font-size: 1em;">board would consist of an inverter chip, such as the 74HCT04, and a</span> <span style="font-size: 1em;">regulator, such as the LM317K. The LM317K is an adjustable regulator</span> <span style="font-size: 1em;">that can be set to reduce the +5V standby voltage provided by the ATX</span> <span style="font-size: 1em;">supply down to the +3.3V standby voltage demanded by the Xbox. An</span> <span style="font-size: 1em;">example schematic diagram of this board is shown in Figure C-4.</span></p>

  <p>The choice of connectors to this board is up to you. The simplest <span style="font-size: 1em;">solution would be to just use holes and solder the wires through the</span> <span style="font-size: 1em;">holes. There are only five connections on this board. Three go to the</span> <span style="font-size: 1em;">power supply: the +5VSB (violet) wire, a ground (black) wire, and the</span> <span style="font-size: 1em;">power on output (green) wire. The remaining two, +3.3VSB (pin 6 on the</span> <span style="font-size: 1em;">power connector) and power on input (pin 11 on the power connector),</span> <span style="font-size: 1em;">go to the Xbox.</span></p>

  <p>Be sure to test the voltage output of the regulator before installing your <span style="font-size: 1em;">finished board. It is fairly easy to get a resistor value wrong or a pin</span> <span style="font-size: 1em;">swapped, and both of these conditions could lead to dangerously high</span> <span style="font-size: 1em;">voltages going into the Xbox. Also, when installing the board perma</span><span style="font-size: 1em;">nently, be sure to insulate the bottom and top of the board from</span> <span style="font-size: 1em;">accidental contact with the Xbox case or other Xbox components.</span></p>

  <p><img alt="figure_c-4" src="../Images/figure_c-4.png" style="width:100%;"/><span style="font-size: 1em;"><br/></span></p>

  <p class="caption"><b class="calibre3">Figure C-4</b>: Example schematic diagram of the ATX power supply replacement adapter board. Resistors R1 and R2 program the output voltage of the voltage regulator, U1, to be +3.3V.</p>

  <div>
    <br/>
  </div>
</body></html>