["```\n  class CreatePhotos < ActiveRecord::Migration    *Migrations*\n❶   COLUMN_NAMES = [:description, :image_path, :title, :photographer]\n\n❷   SAMPLE_PHOTOS = [\n      {\n        :title        => 'Tonawanda Creek',\n        :description  => 'A waterway in Tonawanda, NY.',\n        :image_path   => '001_creek.jpg',\n        :photographer => 'Vince',\n      },\n      {\n        :title        => 'Travis',\n        :description  => %q[My friend Travis. His wife Laura's head is partly in\n  view as well.],\n        :image_path   => '002_travis.jpg',\n        :photographer => 'Vince',\n      },\n      {\n        :title        => 'Liam & Ducks',\n        :description  => 'My nephew Liam with some ducks.',\n        :image_path   => '003_liam.jpg',\n        :photographer => 'Vince',\n      },\n    ]\n\n❸   def self.up\n\n❹     create_table :photos do |t|\n        COLUMN_NAMES.each { |c| t.column c, :text }\n      end\n\n❺     SAMPLE_PHOTOS.each do |sp|\n        p = Photo.create(sp)\n        p.save!\n      end\n\n    end\n\n❻   def self.down\n      drop_table :photos\n    end\n  end\n```", "```\n== CreatePhotos: migrating\n====================================================\n-- create_table(:photos)\n   -> 0.1226s\n== CreatePhotos: migrated (0.3359s)\n===========================================\n```", "```\necho 'select * from photo_album_development.photos' | mysql -uroot -p\nEnter password:\nid      description     image_path      title   photographer\n1       A waterway in Tonawanda, NY.    001_creek.jpg   Tonawanda Creek Vince\n2       My friend Travis. His wife Laura's head is partly in view as well.\n002_travis.jpg   Travis  Vince\n3       My nephew Liam with some ducks. 003_liam.jpg    Liam & Ducks    Vince\n```", "```\n  class Photo < ActiveRecord::Base\n\n  =begin explain\n  Closely follows Object-Relational Model, each instance is\n  also a record in the table called 'photos'.\n  =end\n❶   def next_id()\n      return Photo.minimum(:id) if last_id?\n      next_id = @attributes['id'].to_i.succ\n      next_id.succ! until Photo.find(next_id)\n      next_id.to_s\n    end\n\n❷   def prev_id()\n      return Photo.maximum(:id) if first_id?\n      prev_id = (@attributes['id'].to_i - 1)\n      prev_id = (prev_id - 1) until Photo.find(prev_id)\n      prev_id.to_s\n    end\n\n    private\n\n❸   def last_id?()\n      @attributes['id'] == Photo.maximum(:id).to_s\n    end\n\n❹   def first_id?()\n      @attributes['id'] == Photo.minimum(:id).to_s\n    end\n\n  end\n```", "```\n  class AlbumController < ApplicationController\n\n  =begin explain\n  This metaprogramming directive allows us to define a specific\n  helper called FooterHelper in app/helpers/footer_helper.rb\n  that can be shared among multiple Controllers.\n  =end\n❶   helper :footer\n\n  =begin explain\n  As with HTML files, this is the default implicit behavior.\n  all_photos is found in app/controllers/application.rb\n  =end\n❷   def index()\n      @photos = all_photos()\n    end\n\n  =begin explain\n  Set up any instance variables to be used in the View\n  or Helper, such as @photo here.\n  =end\n\n❸   def show()\n      @photo = Photo.find(params[:id])\n    end\n\n  end\n```", "```\n  # Filters added to this Controller apply to all Controllers in the\n  application.\n  # Likewise, all the methods added will be available for all Controllers.\n\n  class ApplicationController < ActionController::Base\n    # Pick a unique cookie name to distinguish our session data from others'\n    session :session_key => '_photo_album_session_id'\n\n  =begin explain\n  Now all_photos() can be used in any other Controller.\n  =end\n❶   def all_photos()\n      Photo.find(:all)\n    end\n\n  end\n```", "```\n  class FeedController < ApplicationController\n\n❶   CONTENT_TYPE = 'application/rss+xml'\n\n  =begin explain\n  all_photos() found in app/controllers/application.rb\n  =end\n❷   def images()\n      @photos = all_photos()\n      @headers['Content-Type'] = CONTENT_TYPE\n    end\n\n  end\n```", "```\n  module AlbumHelper\n\n❶   CONFIRM_MESSAGE = %q[Are you sure you want to see the full list?]\n\n    NUMBER_OF_ROW_TYPES_FOR_DISPLAY = 3\n\n    LISTING_HEADER_COLUMNS =<<END_OF_HERE_DOC\n    <tr>\n      <th>Image</th>\n      <th>Description</th>\n    </tr>\n  END_OF_HERE_DOC\n\n❷   IMAGE_STYLE = {\n      :base  => 'margin-bottom: 0.5em; padding: 0.5em;',\n      :thumb => 'height:48px; width:64px;'\n    }\n  =begin explain\n  Outputs a CSS classname used for prettification.\n  =end\n❸   def row_class_from_index(i)\n      'row' + ((i % NUMBER_OF_ROW_TYPES_FOR_DISPLAY) + 1).to_s\n    end\n\n❹   def show_listing_header_columns()\n      LISTING_HEADER_COLUMNS\n    end\n\n❺   def show_photo(photo)\n      image_tag(\n        photo.image_path,\n        :alt => \"Photo of #{photo.title}\"\n      )\n    end\n\n❻   def show_thumbnail_for_list(photo)\n      image_tag(\n        photo.image_path,\n        :alt   => \"Photo of #{photo.title}\",\n        :style => IMAGE_STYLE[:thumb]\n      )\n    end\n\n❼   def page_title()\n      @photo ? @photo.title : controller.action_name\n    end\n\n❽   def title_with_thumbnail(photo)\n        [h(photo.title), show_thumbnail_for_list(photo)].join(\n            ApplicationHelper::HTML_BREAK\n          )\n    end\n\n  end\n```", "```\n# Methods added to this helper will be available to all templates in the\napplication.\nmodule ApplicationHelper\n\n  HTML_BREAK = '<br />'\n\nend\n```", "```\n  module FeedHelper\n\n❶   AUTHOR      = 'Kevin C. Baird'\n\n    DESCRIPTION = %q{Photos from Jenn and Kevin's Wedding}\n\n    ICON        = {\n      :url    => 'rails.png',\n      :width  => 77,\n      :height => 69,\n    }\n\n    LANGUAGE    = 'en-us'\n\n❷   LINK_OPTIONS_DEFAULTS = {\n        :only_path  => false,\n        :controller => 'album',\n    }\n\n❸   LINK_OPTIONS = {\n      :index => LINK_OPTIONS_DEFAULTS.merge( { :action => 'index' } ),\n      :show  => LINK_OPTIONS_DEFAULTS.merge( { :action => 'show'  } ),\n    }\n\n    RSS_OPTIONS = {\n      'version'  => '2.0',\n      'xmlns:dc' => 'http://purl.org/dc/elements/1.1/'\n    }\n    TITLE       = 'Baird/Cornish Wedding Photos'\n\n❹   def feed_description()\n      h( DESCRIPTION )\n    end\n\n❺   def rss_url_for_image(image)\n      return url_for( FeedHelper::LINK_OPTIONS[:index] ) unless image\n      url_for( FeedHelper::LINK_OPTIONS[:show].merge( { :id => image } ) )\n    end\n\n  end\n```", "```\n  module FooterHelper\n❶   BAR_SEPARATOR = %q[ | ]\n\n    RSS = {\n\n      :icons => %w[feed-icon16x16.png xmlicon.png],\n\n      :link_options => {\n        :action     => %q[images],\n                :controller => %q[feed],\n         }\n\n         }\n\n❷      def show_footer()\n       '<p id=\"rails_img_wrapper\">' +\n       [rails_link_to_top, rss_icon_links].join(\n         ApplicationHelper::HTML_BREAK\n       ) + '</p>'\n      end\n\n      private\n\n❸     def rails_link_to_top()\n        link_to(    *The **`link_to`** and **`image_tag`** Methods*\n          image_tag(\n            'rails.png',\n            :alt    => 'Home',\n            :border => 0,\n            :id     => 'rails_img',\n            :style  => AlbumHelper::IMAGE_STYLE[:base]\n          ), :controller => 'album'\n        )\n      end\n\n❹     def rss_icon_links()\n        RSS[:icons].map do |icon|\n          link_to(\n            image_tag(\n            icon,\n            :alt   => 'RSS Feed',\n            :class => 'xmlicon'\n          ), RSS[:link_options]\n        )\n      end.join(BAR_SEPARATOR)\n    end\n\n  end\n```", "```\n❶ <!--\n  row_class_from_index()\n  show_listing_header_columns()\n  show_thumbnail_for_list()\n  all in app/helpers/album_helper.rb\n\n  @photos derived from AlbumController's index method\n\n  -->\n\n  <h1>Listing photos</h1>\n\n  <table>\n\n❷   <%= show_listing_header_columns() %>\n\n❸   <% @photos.each_with_index do |photo,i| -%>\n    <tr>\n\n❹         <td class=\"<%= row_class_from_index(i) %>\">\n❺         <%=\n                   link_to(\n                       title_with_thumbnail(photo),\n                       :action => 'show',\n                       :id => photo.id\n                   )\n          %>\n        </td>\n❻         <td class=\"<%= row_class_from_index(i) %>\">\n❼         <%= photo.description %>\n      </td>\n\n      </tr>\n❽     <% end %>\n\n  </table>\n\n  <hr />\n\n❾ <%= show_footer %>\n```", "```\n  <!--\n  image_tag is built in to Rails\n  prev_id and next_id are in app/models/photo.rb\n  show_photo is in app/helpers/album_helper.rb\n  -->\n\n  <table id=\"dark_bg\">\n    <tr>\n      <td>\n        <div class=\"photo\">\n❶           <%= show_photo( @photo ) %>\n        </div>\n      </td>\n\n      <td class=\"desc_wrapper\">\n        <div class=\"description\">\n❷           <h1><%= h(@photo.title) %></h1>\n❸           <p class=\"description\"><%= @photo.description %></p>\n        </div>\n      </td>\n    </tr>\n  </table>\n\n  <hr style=\"clear:both;\" />\n\n  <ul class=\"navlinks\">\n❹     <li><%=\n           link_to 'First',\n               :action => 'show',\n               :id     => Photo.minimum(:id)\n       %></li>\n\n❺      <li><%=\n            link_to 'Previous',\n                :action => 'show',\n                :id     => @photo.prev_id %></li>\n\n❻      <li><%=\n            link_to 'Next',\n                :action => 'show',\n                :id     => @photo.next_id     %></li>\n\n❼      <li><%=\n            link_to 'Last',\n                :action => 'show',\n                :id     => Photo.maximum(:id) %></li>\n\n       <!-- You have the option of some GUI helpers in the optional parameters\n   hash -->\n\n       <!-- like :confirm for a JS confirm box -->\n❽      <li><%= link_to(\n            'Full List',\n            { :action  => 'index' },\n            { :confirm => AlbumHelper::CONFIRM_MESSAGE }\n       ) %></li>\n\n      <!--\n           See RSS[:link_options] in app/helpers/footer_helper.rb\n           for how to link across multiple Controllers\n      -->\n\n  </ul>\n\n❾ <%= show_footer %>\n```", "```\n  =begin explain\n  The various FeedHelper:: Constants are in app/helpers/feed_helper.rb,\n  as are the feed_description() and rss_url_for_image() methods.\n  =end\n\n❶ xml.instruct!    *Outputting XML*\n\n❷ xml.rss( FeedHelper::RSS_OPTIONS ) do\n\n❸   xml.channel do\n      xml.title       FeedHelper::TITLE\n      xml.language    FeedHelper::LANGUAGE\n      xml.link        rss_url_for_image( nil )\n      xml.pubDate     Time.now\n      xml.description feed_description()\n\n❹     xml.image do\n        xml.title       FeedHelper::TITLE\n        xml.link        rss_url_for_image( nil )\n        xml.url         FeedHelper::ICON[:url]\n        xml.width       FeedHelper::ICON[:width]\n        xml.height      FeedHelper::ICON[:height]\n        xml.description feed_description()\n      end\n\n❺     @photos.each do |image|\n        xml.item do\n          xml.title       image.title\n          xml.link        rss_url_for_image( image )\n          xml.description h( image.description )\n          xml.pubDate     Time.now\n          xml.guid        rss_url_for_image( image )\n          xml.author      FeedHelper::AUTHOR\n          # image.photographer could also be the author\n        end\n      end\n\n    end\n\n  end\n```", "```\n  <!--\n  This (app/views/layouts/album.html)\n  is a \"wrapper\" that encloses all Views for the\n  Album Controller.\n  -->\n\n  <html lang=\"en-us\">\n\n  <head>\n\n  <title>\n❶ Album: <%= page_title %>\n  </title>\n\n❷ <%= stylesheet_link_tag('master') %>    *CSS Link Tag*\n❸ <%= stylesheet_link_tag(controller.action_name) if controller %>\n\n  </head>\n\n  <body>\n\n  <!--\n  \"yield :layout\" outputs the View's results, whichever it is.\n  -->\n\n❹ <%= yield :layout %>\n\n  </body>\n\n  </html>\n```"]