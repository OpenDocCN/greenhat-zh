- en: Chapter 4\. COURIER - AUTHLIB 0.60.2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://WWW.COURIER-MTA.ORG/AUTHLIB](HTTP://WWW.COURIER-MTA.ORG/AUTHLIB)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 4.1\. SUMMARY
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Courier-authlib (the Courier Authentication Library) provides authentication
    functionality for Courier-IMAP Server (see "Courier-IMAP Server 4.3.0" page 43).
    This package makes it possible for Courier-IMAP to authenticate users against
    the system password file in /etc/master.passwd. The master password file stores
    passwords for all user accounts on the system.
  prefs: []
  type: TYPE_NORMAL
- en: Courier-IMAP Server includes both an IMAP (Internet Message Access Protocol)
    and POP3 (Post Office Protocol version 3) server implementation, and both rely
    on Courier-authlib for authentication. Username and password information is compared
    against the system password file located in /etc/master.passwd using Courier-authlib's
    `authpam` authentication module. Courier-authlib then consults FreeBSD's built-in
    PAM (Pluggable Authentication Modules) library to authenticate. If authentication
    is successful, the user is allowed to access services offered by Courier-IMAP.
  prefs: []
  type: TYPE_NORMAL
- en: 4.2\. RESOURCES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Courier Authentication Library Documentation
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.courier-mta.org/authlib/documentation.html](http://www.courier-mta.org/authlib/documentation.html)'
  prefs: []
  type: TYPE_NORMAL
- en: 4.3\. REQUIRED
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  prefs: []
  type: TYPE_IMG
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  prefs: []
  type: TYPE_IMG
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  prefs: []
  type: TYPE_NORMAL
- en: 4.4\. PREPARATION
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Become the superuser.
  prefs: []
  type: TYPE_NORMAL
- en: 4.5\. INSTALL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To begin the Courier-authlib installation process, enter the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: A menu should appear showing options for Courier-authlib. We will not need any
    of these optional authentication modules, so press [tab] to highlight OK and then
    press [enter].
  prefs: []
  type: TYPE_NORMAL
- en: 4.6\. CONFIGURE
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the installation process is complete, it's time to configure the authentication
    daemon for use on your system.
  prefs: []
  type: TYPE_NORMAL
- en: We will only use the `authpam` method of authentication.
  prefs: []
  type: TYPE_NORMAL
- en: The next steps remove extraneous authentication modules listed in the authdaemonrc
    configuration file to prevent authdaemond from generating errors in the maillog
    file.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open authdaemonrc:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Remove the names of all authentication modules in the `authmodulelist` declaration
    (~27) except for `authpam`. The `authmodulelist` declaration should now look like
    this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Save and exit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 4.7\. TESTING
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this section, we'll perform a basic test to confirm that Courier-authlib
    starts properly.
  prefs: []
  type: TYPE_NORMAL
- en: 'Configure Courier-authlib to start automatically at system startup. To load
    the Courier-authlib daemon at boot time, open rc.conf:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'and add the following line:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Save and exit.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Start the Courier-authlib daemon and verify that it is running:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'If startup is successful, the output of the second command should read:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Your pid (process ID) will be different.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 4.8\. CONFIG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /usr/local/etc/authlib/authdaemonrc
  prefs: []
  type: TYPE_NORMAL
- en: Contains configuration information for authdaemond
  prefs: []
  type: TYPE_NORMAL
- en: 4.9\. LOG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /var/log/maillog
  prefs: []
  type: TYPE_NORMAL
- en: A general log of email activity that includes information from authdaemond
  prefs: []
  type: TYPE_NORMAL
