<html><head></head><body>

<div class="calibre1"><div class="calibre1"><a name="phpldap_admin_1.1.0" class="calibre8" id="phpldap_admin_1.1.0"/>
<div class="calibre24" id="calibre_pb_0"/><h2 id="title-ID0ETEAO" class="docPrefaceTitle">Chapter 22. PHPLDAP ADMIN 1.1.0</h2>
<h4 class="calibre32"><a class="calibre2" target="_blank" href="HTTP://PHPLDAPADMIN.SOURCEFORGE.NET">HTTP://PHPLDAPADMIN.SOURCEFORGE.NET</a></h4>
<a name="summary-id21" class="calibre8" id="summary-id21"/>
<h3 class="docSection1Title" id="-100000">22.1. SUMMARY</h3>
<p class="docText1"><a name="phpLDAPadmin is" class="calibre8" id="phpLDAPadmin is"/>phpLDAPadmin is an open source web-based LDAP (Lightweight Directory Access Protocol) administration tool written in PHP. Its major features include template-based entry creation; the ability to add, modify, rename, and delete LDAP entries; user password management with hash support; LDIF (LDAP Data Interchange Format) import/export; and an LDAP schema browser.<a name="IDX-CHP-22-0328" class="calibre8" id="IDX-CHP-22-0328"/><a name="IDX-CHP-22-0329" class="calibre8" id="IDX-CHP-22-0329"/><a name="IDX-CHP-22-0330" class="calibre8" id="IDX-CHP-22-0330"/><a name="IDX-CHP-22-0331" class="calibre8" id="IDX-CHP-22-0331"/><a name="IDX-CHP-22-0332" class="calibre8" id="IDX-CHP-22-0332"/></p>
<p class="docText1"><a name="popular with" class="calibre8" id="popular with"/>phpLDAPadmin is popular with LDAP administrators because it is platform independent. As a web-based application, it allows administrators to maintain LDAP databases remotely from virtually any computer with a web browser.</p>
<p class="docText1"><a name="Deon George" class="calibre8" id="Deon George"/>phpLDAPadmin was created by David Smith. Deon George currently maintains the phpLDAPadmin project with the help of various contributors.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="resources-id21" class="calibre8" id="resources-id21"/>
<h3 class="docSection1Title" id="-100000">22.2. RESOURCES</h3>
<p class="docText1"><span class="b"><a name="phpLDAPadmin Documentation" class="calibre8" id="phpLDAPadmin Documentation"/>phpLDAPadmin Documentation</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://wiki.phpldapadmin.info">http://wiki.phpldapadmin.info</a></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="required-id21" class="calibre8" id="required-id21"/>
<h3 class="docSection1Title" id="-100000">22.3. REQUIRED</h3>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/><a name="FreeBSD " class="calibre8" id="FreeBSD "/> FreeBSD 7.0-RELEASE (see "<a class="calibre2" href="freebsd_7.0_split_000.html#freebsd_7.0">FreeBSD 7.0</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/><a name="collection " class="calibre8" id="collection "/> Updated ports collection (see "<a class="calibre2" href="freebsd_ports_collection.html#freebsd_ports_collection">FreeBSD Ports Collection</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> Apache HTTP server (see "<a class="calibre2" href="apache_http_server_2.2.8_split_000.html#apache_http_server_2.2.8">Apache HTTP Server 2.2.8</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> OpenLDAP (see "<a class="calibre2" href="openldap_server_2.3.38.html#openldap_server_2.3.38">OpenLDAP Server 2.3.38</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> PHP 5 (see "<a class="calibre2" href="php_5.2.5.html#php_5.2.5">PHP 5.2.5</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> Internet connection</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="optional-id11" class="calibre8" id="optional-id11"/>
<h3 class="docSection1Title" id="-100000">22.4. OPTIONAL</h3>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/><a name="OpenSSL with" class="calibre8" id="OpenSSL with"/> OpenSSL with a signed SSL Certificate (see "<a class="calibre2" href="openssl_0.9.8g.html#openssl_0.9.8g">OpenSSL 0.9.8g</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> Registered domain name</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="preparation-id21" class="calibre8" id="preparation-id21"/>
<h3 class="docSection1Title" id="-100000">22.5. PREPARATION</h3>
<p class="docText1"><a name="If you" class="calibre8" id="If you"/>If you will be using phpLDAPadmin from an insecure public network, then begin by ensuring that your Apache HTTP server is correctly configured to accept HTTPS connections with SSL. If your Apache HTTP server lacks SSL support, your LDAP login and password will be transmitted over the network "in the clear" and may be exposed to unauthorized persons.</p>
<p class="docText1">Become the superuser.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="install-id21" class="calibre8" id="install-id21"/>
<h3 class="docSection1Title" id="-100000">22.6. INSTALL</h3>
<p class="docText1"><a name="To begin" class="calibre8" id="To begin"/>To begin the installation process for phpLDAPadmin, enter:<a name="IDX-CHP-22-0333" class="calibre8" id="IDX-CHP-22-0333"/></p>
<pre class="calibre30"># <b class="calibre28">cd /usr/ports/net/phpldapadmin</b>
# <b class="calibre28">make config ; make install clean</b></pre>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="configure-id21" class="calibre8" id="configure-id21"/>
<h3 class="docSection1Title" id="-100000">22.7. CONFIGURE</h3>
<p class="docText1"><a name="Once the" class="calibre8" id="Once the"/>Once the installation process completes, configure phpLDAPadmin for use on your system.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1">Open the <span class="docEmphasis1">config.php</span> file in <span class="docEmphasis1">/usr/local/www/phpldapadmin/config</span>:</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/www/phpldapadmin/config/config.php</b></pre>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="to the" class="calibre8" id="to the"/>Scroll down to the <tt class="calibre20">$config-&gt;custom-&gt;session['blowfish']</tt><a name="string " class="calibre8" id="string "/> declaration (~49) and enter an alphanumeric string (letters or numbers) between the single quotes (longer is better). A random alphanumeric string can be found at <a class="calibre2" target="_blank" href="https://www.grc.com/passwords.htm">https://www.grc.com/passwords.htm</a><a name="the content" class="calibre8" id="the content"/>. This encrypts the content of <span class="docEmphasis1">cookies</span><a name="web browser" class="calibre8" id="web browser"/> (data stored in a web browser that provides identity information to a server) used by phpLDAPadmin. The line should appear as follows (with your alphanumeric string in place of the sample):</p><pre class="calibre30">$config-&gt;custom-&gt;session['blowfish'] = '<tt class="calibre20"><i class="docEmphasis1">aSD453PAsldiflDSAPOSD</i></tt>';</pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="from" class="calibre8" id="from"/>Scroll down to the default hashing algorithm setting (~255). Change it from <tt class="calibre20">md5</tt> to <tt class="calibre20">ssha</tt><a name="line by" class="calibre8" id="line by"/> (which is more secure) and uncomment the line by removing the preceding slashes (<tt class="calibre20">//</tt>). The line should now look like this:</p><pre class="calibre30">$ldapservers-&gt;SetValue($i,'appearance','password_hash','ssha');</pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Save and exit.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="to the" class="calibre8" id="to the"/>Now we'll create a phpLDAPadmin-specific Apache configuration file. This file will point Apache to the correct location of the phpLDAPadmin files and make administration easier by keeping phpLDAPadmin-specific options separate from the main <span class="docEmphasis1">httpd.conf</span> file. By default, Apache searches the <span class="docEmphasis1">/usr/local/etc/apache22/Includes</span><a name="a configuration" class="calibre8" id="a configuration"/> directory for configuration files. To create a configuration file for phpLDAPadmin, open the file:</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/apache22/Includes/phpldapadmin.conf</b></pre><br class="calibre1"/>
<p class="docText1">and add the following lines:</p><pre class="calibre30">Alias /<tt class="calibre20"><i class="docEmphasis1">phpldapadmin</i></tt> "/usr/local/www/phpldapadmin/htdocs/"

&lt;Directory "/usr/local/www/phpldapadmin/htdocs/"&gt;
Options none
AllowOverride none
Order Deny,Allow
Deny from all
Allow from 127.0.0.1 <tt class="calibre20"><i class="docEmphasis1">192.168.1</i></tt>
&lt;/Directory&gt;</pre><br class="calibre1"/>
<p class="docText1">Replace <tt class="calibre20"><i class="docEmphasis1">192.168.1</i></tt><a name="network to" class="calibre8" id="network to"/> with the first three octets of your local network to restrict access to the local subnet. If you need access from outside your local network, "See <a class="calibre2" href="notes-id15.html#notes-id15">Notes</a><a name="on forcing" class="calibre8" id="on forcing"/>" on forcing secure connections to non-local IPs.</p><hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> By default, phpLDAPadmin is set up as a subdirectory of your web server's root site. This means that in order to reach it you would enter <a class="calibre2" target="_blank" href="http://host.example.com/phpldapadmin">http://host.example.com/phpldapadmin</a> into your web browser. To change this default directory, replace <tt class="calibre20">phpldapadmin</tt> (italicized in the above entry) with a different name.</span><hr size="1" noshade="noshade" class="calibre27"/></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="then restart" class="calibre8" id="then restart"/>Save and exit, then restart Apache to commit the changes:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/apache22 restart</b></pre><br class="calibre1"/>
<p class="docText1"><a name="web browser" class="calibre8" id="web browser"/>To access phpLDAPadmin with a web browser, enter the following URL (using your server's hostname):</p><pre class="calibre30"><b class="calibre28">http://</b><span class="docEmphBoldItalic">host.example.com</span><b class="calibre28">/phpldapadmin</b></pre><br class="calibre1"/>
<p class="docText1"><a name="Doe in" class="calibre8" id="Doe in"/>User John Doe in the organizational unit (ou) People on the domain <a class="calibre2" target="_blank" href="http://example.com">example.com</a> would enter:</p><pre class="calibre30"><b class="calibre28">Login DN:</b>
<b class="calibre28">cn=John Doe,ou=People,dc=example,dc=com</b></pre><br class="calibre1"/>
</div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="administration-id3" class="calibre8" id="administration-id3"/>
<h3 class="docSection1Title" id="-100000">22.8. ADMINISTRATION</h3>
<p class="docText1"><a name="To administer" class="calibre8" id="To administer"/>To administer your LDAP server with phpLDAPadmin, enter one of the following URLs, substituting your server's hostname for <a class="calibre2" target="_blank" href="http://host.example.com">host.example.com</a>.</p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://host.example.com/phpldapadmin">http://host.example.com/phpldapadmin</a> (for an insecure connection)</p>
<p class="docText1"><a class="calibre2" target="_blank" href="https://host.example.com/phpldapadmin">https://host.example.com/phpldapadmin</a><a name="encrypted connection" class="calibre8" id="encrypted connection"/> (for an SSL encrypted connection)</p>
<p class="docText1"><a name="your login" class="calibre8" id="your login"/>You will be prompted for your login DN; use the syntax shown below. Replace <tt class="calibre20"><i class="docEmphasis1">example</i></tt> and <tt class="calibre20"><i class="docEmphasis1">com</i></tt><a name="domain name" class="calibre8" id="domain name"/> with your domain name.</p>
<pre class="calibre30"><b class="calibre28">Login DN:</b>
<b class="calibre28">cn=Manager,dc=</b><span class="docEmphBoldItalic">example</span><b class="calibre28">,dc=</b><span class="docEmphBoldItalic">com</span></pre>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="config_files-id21" class="calibre8" id="config_files-id21"/>
<h3 class="docSection1Title" id="-100000">22.9. CONFIG FILES</h3>
<p class="docText1"><span class="b">/usr/local/www/phpldapadmin/config/config.php</span></p>
<p class="docText1"><a name="Allows for" class="calibre8" id="Allows for"/>Allows for the customization of phpLDAPadmin<a name="IDX-CHP-22-0334" class="calibre8" id="IDX-CHP-22-0334"/></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="notes-id15" class="calibre8" id="notes-id15"/>
<h3 class="docSection1Title" id="-100000">22.10. NOTES</h3>
<p class="docText1"><a name="To ensure" class="calibre8" id="To ensure"/>To ensure the security of logins over the Internet, all communication should be secured by requiring HTTPS connections to phpLDAPadmin. We'll reconstruct our phpLDAPadmin-specific configuration file to ensure this. Apache needs to be configured with SSL support for this to work. Open the existing file:</p>
<pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/apache22/Includes/phpldapadmin.conf</b></pre>
<p class="docText1"><a name="modify the" class="calibre8" id="modify the"/>and then modify the file to read as follows:</p>
<pre class="calibre30">Alias /<i class="docEmphasis1">phpldapadmin </i> "/usr/local/www/phpldapadmin/htdocs/"

&lt;Directory "/usr/local/www/phpldapadmin/htdocs/"&gt;
Options none
AllowOverride None
<b class="calibre28">Order Allow,Deny </b>
<b class="calibre28">Allow from All </b>
&lt;/Directory&gt;

&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} /<i class="docEmphasis1">phpldapadmin </i>
RewriteRule (.*) https://<i class="docEmphasis1">host.example.com </i>/<i class="docEmphasis1">phpldapadmin </i>/ [R]
&lt;/IfModule&gt;</pre><br class="calibre1"/>
<p class="docText1"><a name="your domain" class="calibre8" id="your domain"/>Make the appropriate substitutions for your domain name and then save, exit, and restart Apache:</p>
<pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/apache22 restart</b></pre><br class="calibre1"/>
</div></div>

</body></html>