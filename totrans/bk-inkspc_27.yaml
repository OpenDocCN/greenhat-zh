- en: Appendix C. The Command Line
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Unlike most vector editors, but like the majority of open source software, Inkscape
    has a powerful command-line interface. It allows you to perform many tasks (exporting,
    document modifications, queries, and so on) from scripts or from a console, without
    using Inkscape’s graphical user interface (GUI).
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: In most cases, ordering Inkscape to perform some task with command-line parameters
    does not load the GUI at all; after completing the task, Inkscape simply quits.
    This makes it run faster and consume less memory, since no time and memory are
    wasted on creating and destroying the GUI.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-3
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Microsoft Windows treats command-line programs as second-class citizens compared
    to the “normal” (GUI) applications. You cannot create a single program which can
    run both as a GUI application and as a command-line application, so the developers
    of Inkscape on Windows had to make a choice. Naturally, they chose to position
    Inkscape as a GUI application, which inevitably damaged its command-line functionality.*'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: '*More specifically, while Inkscape on Windows takes command-line parameters
    and acts on them, it cannot output anything to the command prompt window (which
    makes the query parameters totally unusable). Also, it returns control to the
    command interpreter immediately, even though the action you have ordered (such
    as export) may not finish for several more seconds. This makes it nearly impossible
    to use Inkscape in sequential scripts. One more minor inconvenience is that you
    must always supply full paths for all files you specify on the command line.*'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: '*It is possible to recompile Inkscape as a Windows command-line application,
    which in turn will make it less usable as a GUI application (a separate command
    prompt window will open every time you run such Inkscape). Consult the Inkscape
    FAQ on the website if you need to obtain such a command-line version of the program.*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: C.1 Loading Documents
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'There’s no separate executable for command-line tasks; the regular `inkscape`
    (on Linux or Mac OSX) or `inkscape.exe` (on Windows) will work as a command-line
    utility if you give it the corresponding parameters. The simplest use of the command
    line is providing the filename(s) of the document(s) you want to load into the
    GUI. For example:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: will start Inkscape’s GUI and load the two SVG documents and one PDF document
    (automatically imported) into three Inkscape windows. In this case, no task is
    given to Inkscape, so it simply lets you edit the files. As we will see later,
    other command-line parameters, usually starting with `--`, will force it to skip
    the GUI and do something to the files on its own.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: C.2 Export
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Most often, the command-line interface is used for exporting SVG documents
    into other formats. There are command-line parameters for exporting to PNG (**[18.9
    Bitmap Export](ch18s09.html "18.9 Bitmap Export")**), PS, EPS, and PDF (**[1.5.1.1
    Adobe’s Vector Formats](ch01s05.html#onedot5dot1dot1_adobeapostrophes_vector "1.5.1.1
    Adobe’s Vector Formats")**). For example, exporting to PDF is as simple as:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，命令行界面用于将 SVG 文档导出为其他格式。有命令行参数用于导出为 PNG（**[18.9 位图导出](ch18s09.html "18.9 位图导出")**）、PS、EPS
    和 PDF（**[1.5.1.1 Adobe 的矢量格式](ch01s05.html#onedot5dot1dot1_adobeapostrophes_vector
    "1.5.1.1 Adobe 的矢量格式")**）。例如，导出为 PDF 简单如下：
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This will create *file.pdf*; no GUI is loaded, and after completing the export,
    Inkscape quits. Similarly, you can use `--export-ps`, `--export-eps`, and `--export-png`.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这将创建 *file.pdf*；不会加载 GUI，导出完成后，Inkscape 将退出。同样，您可以使用 `--export-ps`、`--export-eps`
    和 `--export-png`。
- en: 'Also, there is `--export-plain-svg` for converting a document into plain SVG
    (**[1.4 A Brief History of SVG](ch01s04.html "1.4 A Brief History of SVG")**).
    It can be used not only for stripping an Inkscape SVG document of Inkscape-specific
    metadata, but also for converting any of the supported import formats into SVG
    ([Appendix B](apb.html "Appendix B. Import and Export")). For example, this will
    convert a CorelDRAW file into SVG format:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有 `--export-plain-svg` 用于将文档转换为纯 SVG（**[1.4 SVG 的简要历史](ch01s04.html "1.4
    SVG 的简要历史")**）。它可以用来去除 Inkscape SVG 文档的 Inkscape 特定元数据，也可以将任何支持的导入格式转换为 SVG（[附录
    B](apb.html "附录 B. 导入和导出"））。例如，这将把 CorelDRAW 文件转换为 SVG 格式：
- en: '[PRE2]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: C.2.1 Area
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.2.1 区域
- en: 'By default, the document’s page (**[2.3 Interface Overview](ch02s03.html "2.3
    Interface Overview")**) is exported, so objects falling outside the page are invisible
    in export. You can add `--export-area-drawing` to make the export cover all visible
    objects of the document, regardless of its page size. The only exception is EPS,
    where the default is exporting drawing; for this format, you can limit export
    to page with `--export-area-page` (however, due to the limitations of EPS, this
    area will be contracted inwards to the edge of objects in the page if they do
    not reach to the edges of the page). For example:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，导出的是文档的页面（**[2.3 界面概述](ch02s03.html "2.3 界面概述")**），因此超出页面的对象在导出时不可见。您可以通过添加
    `--export-area-drawing` 来使导出覆盖文档的所有可见对象，无论其页面大小如何。唯一的例外是 EPS，默认情况下导出绘图；对于此格式，您可以使用
    `--export-area-page` 限制导出为页面（然而，由于 EPS 的限制，如果它们没有达到页面的边缘，则此区域将向内收缩到页面中对象的边缘）。例如：
- en: '[PRE3]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You can also export single objects out of a document, so that the exported
    file covers only that object’s bounding box. The object you need is specified
    by its `id` attribute (**[A.9 Linking](apas09.html "A.9 Linking")**):'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以将文档中的单个对象导出，这样导出的文件只覆盖该对象的边界框。您需要通过其 `id` 属性指定对象（**[A.9 链接](apas09.html
    "A.9 链接")**）：
- en: '[PRE4]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: If other objects overlap with the exported object’s bounding box and are visible,
    they will also show in the exported PNG file. To suppress them and make a rendering
    of only the chosen object and nothing else, add `--export-id-only`. For PDF, PS,
    and EPS, this is the only possible mode—other objects are always hidden if you
    specify `--export-id`.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果其他对象与导出对象的边界框重叠且可见，它们也会显示在导出的 PNG 文件中。要抑制它们并仅渲染所选对象，请添加 `--export-id-only`。对于
    PDF、PS 和 EPS，这是唯一可能的模式——如果您指定 `--export-id`，则其他对象总是被隐藏。
- en: 'For PNG export, you can also specify the export area explicitly by specifying
    the two corner points. For example:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 PNG 导出，您还可以通过指定两个角点来明确指定导出区域。例如：
- en: '[PRE5]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: will export the area that spans from the point (0, 0) to the point (200, 100).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 将导出从点 (0, 0) 到点 (200, 100) 的区域。
- en: Also for PNG export, no matter which method was used for specifying the area,
    you can “snap” this area to pixel grid, that is, round it to the nearest whole
    coordinates in `px`. This is very useful when you export at the default 90 dpi
    and want your objects drawn to the pixel grid (**[7.2 Grids](ch07s02.html "7.2
    Grids")**) to be crisp in the exported bitmap no matter what area you are exporting.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 PNG 导出，无论使用哪种方法指定区域，您都可以将此区域“吸附”到像素网格上，即将其四舍五入到最近的整像素坐标（`px`）。当您以默认的 90 dpi
    导出时，这非常有用，您希望绘制的对象在导出的位图中清晰可见，无论导出哪个区域（**[7.2 网格](ch07s02.html "7.2 网格")**）。
- en: C.2.2 Size and Resolution
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.2.2 尺寸和分辨率
- en: 'For PNG export, you can specify the size of the exported bitmap or its resolution
    (by default, 90 dpi). For example:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 PNG 导出，您还可以指定导出位图的尺寸或其分辨率（默认为 90 dpi）。例如：
- en: '[PRE6]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The first line will export at the resolution of 600 dpi, so that a document
    [1.1 What Vector Graphics Is and Why It Matters](ch01s01.html#page_3) inches wide
    will export to a bitmap 1800 pixels wide. The other two examples explicitly set
    the pixel size of the export, and the resolution is calculated to match this requirement.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: C.2.3 Background
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Areas that have no objects in them come out as transparent in all export formats.
    However, in PNG export (but not PDF, PS, or EPS), you can specify any background
    color or opacity for your document during export. For example, if you want a solid
    opaque black background, use:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Note
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*The* `\` *character in this example shows that the command line was wrapped
    for display; you should type it as a single line without the* `\`*.*'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: C.2.4 Export Hints
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Every time you export a single selected object to PNG via the GUI (**[18.9
    Bitmap Export](ch18s09.html "18.9 Bitmap Export")**), the export filename and
    resolution are recorded into an export hint added to the document. If, after that,
    you save the document with these hints, they can later be used for command-line
    export to PNG as well. For example, if you write:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: only the object with the ID `text2035` will be exported to the same file and
    with the same resolution it was most recently exported from the GUI. Note that
    the `--export-png` specifying the filename is not present because the name is
    derived from the export hint.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: C.2.5 Vector Export Options
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For PDF, PS, and EPS, there are more export options that correspond to some
    of the choices in these formats’ export dialogs in the GUI. Thus:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'converts all text objects to paths on export, so that the resulting vector
    file needs and embeds no fonts, whereas:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: will ignore any filters, exporting the filtered objects as if they are not filtered,
    instead of rasterizing them (which is the default).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: C.3 Querying
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The textual nature of SVG makes it very easy to generate and edit SVG documents
    with simple scripts. However, no matter what your script is supposed to do, chances
    are that you will find it necessary to figure out the bounding boxes of some SVG
    objects (for example, to check if the text inserted into SVG from a database fits
    the provided space, or to create a background rectangle or frame for a specific
    object). Proper calculation of a bounding box, in a general case, is way too complex
    to do in a script—you would have to reimplement a lot of Inkscape’s geometry and
    rendering code if you want to take into account everything that may affect the
    bounding box.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: 'Fortunately, instead of all that you can simply ask Inkscape. For example:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Here, we asked Inkscape to tell us the width (in `px` units) of the object with
    the `id="text1256"`. It loaded the document, found that object, printed its width
    back to the console, and then quit.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: 'Similarly, you can `--query-height`, `--query-x`, and `--query-y` to find out
    the dimensions and coordinates of the object’s bounding box. Such Inkscape calls
    are reasonably fast because they don’t load the GUI and don’t render the document;
    however, if you need to query the bounding boxes of many objects, this may add
    up to quite a delay. In this case, it is better to use the `--query-all` parameter
    which returns all bounding box numbers for all objects in a document, as follows:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，你可以使用`--query-height`、`--query-x`和`--query-y`来找出对象的边界框的尺寸和坐标。这样的Inkscape调用速度相当快，因为它们不加载GUI也不渲染文档；然而，如果你需要查询许多对象的边界框，这可能会导致相当大的延迟。在这种情况下，最好使用`--query-all`参数，它返回文档中所有对象的边界框编号，如下所示：
- en: '[PRE12]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Here, each line is a comma-separated list of: object ID, x, y, width, and height.
    Parsing such a line in your script should be easy.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，每一行都是一个以逗号分隔的列表：对象ID、x、y、宽度和高度。在你的脚本中解析这样的行应该是容易的。
- en: C.4 Shell Mode
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: C.4 Shell模式
- en: In order to save the load time (even without a GUI, Inkscape still takes some
    time to start), you can perform multiple command-line tasks using one instance
    of the program running in the *shell mode*. For example, this can be used on a
    server where PNG export requests come from the users and are routed to a shell-mode
    Inkscape instance for a quick response.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 为了节省加载时间（即使没有GUI，Inkscape仍然需要一些时间来启动），你可以使用一个程序实例在shell模式下执行多个命令行任务。例如，这可以用于服务器，其中PNG导出请求来自用户，并通过shell模式的Inkscape实例快速响应。
- en: 'To enter the shell mode, run Inkscape with a single parameter, `--shell`. You
    will get a prompt where you can type your commands. There’s no special syntax
    for the shell mode commands; each command is simply a valid command-line invocation
    of Inkscape, but without the Inkscape program name. For example, if you do:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 要进入shell模式，使用单个参数`--shell`运行Inkscape。你将得到一个提示，可以在其中输入你的命令。shell模式的命令没有特殊的语法；每个命令只是Inkscape的有效命令行调用，但不包括Inkscape程序名称。例如，如果你这样做：
- en: '[PRE13]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'then in the shell mode, you can type `--export-pdf=file.pdf file.svg` as the
    shell command. Here is an example shell mode session where one document is exported
    to PDF and another to PNG:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 那么在shell模式下，你可以输入`--export-pdf=file.pdf file.svg`作为shell命令。以下是一个shell模式会话的示例，其中一份文档导出为PDF，另一份导出为PNG：
- en: '[PRE14]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: C.5 Verbs
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: C.5 动词
- en: Inkscape’s command line is not limited to GUI-less export, conversion, and querying
    tasks. You can script a certain share of regular editing tasks as well. This is
    done by the `--verb` command-line parameters, which make Inkscape start as usual
    (with a GUI) and run the specified sequence of verbs on the objects which you
    select with `--select`. When done, Inkscape does not quit (unless you use the
    `FileQuit` verb) but simply stops and allows the user to continue editing.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: Inkscape的命令行不仅限于无GUI的导出、转换和查询任务。你还可以通过`--verb`命令行参数脚本来执行某些常规编辑任务。这是通过`--verb`命令行参数完成的，它使Inkscape以通常的方式（带有GUI）启动，并在你使用`--select`选择的对象上运行指定的动词序列。完成后，Inkscape不会退出（除非你使用`FileQuit`动词），而是简单地停止并允许用户继续编辑。
- en: A *verb* typically corresponds to a command that you chose from a menu. It is
    not a one-to-one mapping, however; some verbs are not available via the menus.
    On the other hand, many verbs require further interaction from the user, such
    as adjusting parameters in a dialog; it makes little sense to use them in your
    script except as a last step, so that the user can “continue from here.”
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一个*动词*通常对应于你从菜单中选择的一个命令。然而，这并不是一对一的映射；一些动词无法通过菜单访问。另一方面，许多动词需要用户进一步的交互，例如在对话框中调整参数；在你的脚本中使用它们除了作为最后一步之外几乎没有意义，这样用户就可以“从这里继续”。
- en: 'To get a complete list of verbs your version of Inkscape supports (there are
    more than 750 verbs in version 0.47), run Inkscape with `--verb-list`. Here’s
    just the very top of the list, showing some verbs commonly used in scripting.
    The verb names are before the “:” and followed by a brief description:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取你版本Inkscape支持的动词的完整列表（0.47版本中有超过750个动词），请使用`--verb-list`选项运行Inkscape。以下只是列表的顶部，显示了一些在脚本中常用到的动词。动词名称在“:”之前，后面跟着一个简短的描述：
- en: '[PRE15]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Apart from the regular Inkscape commands, all preset filters (**[17.3 Preset
    Filters](ch17s03.html "17.3 Preset Filters")**) and extensions (**[13.3 Path Extensions](ch13s03.html
    "13.3 Path Extensions")**) have two verbs each: One is the same as running this
    filter or extension from the menu (which may or may not display a dialog with
    parameters); the other, with `.noprefs` appended, always runs without a dialog,
    using default values. For example:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: For scripting, of course, the `.noprefs` variants are preferable.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: Usually, one or more `--verb` parameters in a command-line script are preceded
    by a `--select` parameter which selects some object by its ID. You can specify
    multiple `--select` parameters to select multiple objects. If you want to do something
    to all objects at once, or to objects one by one, you don’t need `--select`; instead,
    just use the verbs `--verb=EditSelectAll` or iterate through the objects with
    `--verb=EditSelectNext`.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: 'Here are a few examples. Open the document, select all objects, convert them
    to paths, save the document, and quit:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Open the document, select a specific group by ID, ungroup it, save, and quit:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Open a document, select an object by ID, copy it, select another object, paste
    style, remove any filters it may have had, apply a **Pixel smear** preset filter,
    save, and quit:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: C.6 Getting Help
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To get a brief listing of the command-line parameters known to your version
    of Inkscape, run it with `--help`. A more detailed reference is available from
    Inkscape’s UI in **Help** ▸ **Command Line Options** (this opens a web browser
    and fetches the page from the Internet) or by typing `man inkscape` on the command
    line (Linux only).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: A very useful parameter (especially if you are going to report a bug or request
    a feature from Inkscape developers) is `--version` which prints the exact version
    and even the SVN revision number of your copy of Inkscape.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
