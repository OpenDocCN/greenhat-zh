- en: Chapter 27\. SAMBA 3.0.28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://WWW.SAMBA.ORG](HTTP://WWW.SAMBA.ORG)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 27.1\. SUMMARY
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Samba is an open source implementation of the SMB (Server Message Block) and
    CIFS (Common Internet File System) protocols, which are used for sharing files
    and printers over a Microsoft network. Samba was created to provide Windows-compatible
    file and printer sharing services with UNIX-like systems.
  prefs: []
  type: TYPE_NORMAL
- en: SMB was originally developed to run atop the NetBIOS (Network Basic Input/Output
    System) protocol. However, because NetBIOS was conceived for small networks, it
    lacked routing capabilities, which limited SMB to local area networks. In 1996,
    Microsoft modified SMB so that it would not rely on NetBIOS, and renamed it Common
    Internet File System (CIFS). With the release of Windows 2000, SMB/CIFS was able
    to run atop TCP/IP.
  prefs: []
  type: TYPE_NORMAL
- en: Samba shares appear just like other shared folders in a Windows network. Access
    privileges can be cascaded over the normal Unix file permissions, and configurable
    restrictions based on login may be implemented as well. Unix users may also mount
    and access shares with the Samba client, which is similar to an FTP client. Samba
    consists of two daemons, namely smbd and nmbd. The SMB daemon handles file and
    print services as well as authentication. The NMB daemon handles name resolution
    and file browsing capability.
  prefs: []
  type: TYPE_NORMAL
- en: Dr. Barry Feigenbaum of IBM developed the SMB protocol in the early '80s as
    a solution for building small local area networks. Microsoft later built on the
    original SMB foundation and became the dominant user of the technology. Andrew
    Tridgell developed Samba in 1992 by reverse-engineering the SMB protocol to fit
    his needs. The Samba project is now a multi-national team and continues to develop
    new features.
  prefs: []
  type: TYPE_NORMAL
- en: 27.2\. RESOURCES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Samba Documentation
  prefs: []
  type: TYPE_NORMAL
- en: '[http://samba.org/samba/docs](http://samba.org/samba/docs)'
  prefs: []
  type: TYPE_NORMAL
- en: The Server Message Block Protocol
  prefs: []
  type: TYPE_NORMAL
- en: '[http://ubiqx.org/cifs/SMB.html](http://ubiqx.org/cifs/SMB.html)'
  prefs: []
  type: TYPE_NORMAL
- en: 27.3\. REQUIRED
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  prefs: []
  type: TYPE_IMG
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  prefs: []
  type: TYPE_IMG
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Internet
    connection'
  prefs: []
  type: TYPE_NORMAL
- en: 27.4\. OPTIONAL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) CUPS, for
    printer sharing capability (see "[CUPS Print Server 1.3.3](cups_print_server_1.3.3.html#cups_print_server_1.3.3)")'
  prefs: []
  type: TYPE_IMG
- en: 27.5\. PREPARATION
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Become the superuser.
  prefs: []
  type: TYPE_NORMAL
- en: System accounts should exist for users you want to allow access to Samba. If
    they don't exist, add them now with the `adduser` command. (See [Appendix C](managing_user_accounts.html#managing_user_accounts)
    for details on the `adduser` command.)
  prefs: []
  type: TYPE_NORMAL
- en: 27.6\. INSTALL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To begin the Samba installation process, enter the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: A menu should appear with the available options for samba. Highlight LDAP and
    press [spacebar] to deselect it. Leave the other options at their defaults by
    pressing [tab] to select OK and then [enter] to continue.
  prefs: []
  type: TYPE_NORMAL
- en: 27.7\. CONFIGURE
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the installation process completes, it is time to configure Samba for use
    on your system.
  prefs: []
  type: TYPE_NORMAL
- en: 'Change the smb.conf file in the /usr/local/etc directory to suit your system.
    First, open the file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down to the `workgroup` declaration (~26) and replace `MYGROUP` with
    a workgroup name that matches your client systems. This line would appear as follows
    if you used a workgroup named `EXAMPLE`:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** You can determine the workgroup name of a Windows PC by right-clicking
    My Computer and then selecting Properties. The workgroup name will be shown in
    the Name tab. You can also enter `*net config workstation*` at the command prompt
    to retrieve the workgroup name.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Scroll down to the `server string` declaration (~29) and replace `Samba Server`
    with a name you would like to assign the server. The line should appear as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down to the `hosts allow` statement (~41). Samba will allow access to
    the IP addresses entered here. To allow connections from all clients, leave this
    line unmodified. To enable SMB connections on the local network, list `192.168.1.`
    (leaving the last octet blank means any addresses from .01 to .255) and `127.`
    (this means any address beginning with 127\. is allowed), as shown in the example
    below. Be sure to uncomment this line by removing the semicolon (`;`) at the beginning
    of the line. The line should appear as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** You may enter full IP addresses here to limit connections to a
    specific client IP, separating each IP with a space, comma, or tab.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 27.7.1\. Configuring Shares
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Now we'll create definitions that specify how directories will be shared. There
    are a variety of different configurations possible, but for now just create a
    simple share using one of these examples.
  prefs: []
  type: TYPE_NORMAL
- en: Public Shares
  prefs: []
  type: TYPE_NORMAL
- en: The following example is a share that allows all users to log into, read, delete,
    create, and modify files. This type of share is useful for users who wish to share
    files without restrictions. To implement this type of share, add the lines below
    to the end of the smb.conf file. (You may substitute a different share name and
    path.)
  prefs: []
  type: TYPE_NORMAL
- en: 'Code View:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: Private Shares
  prefs: []
  type: TYPE_NORMAL
- en: With the following configuration, only the users john and jane are allowed access.
    The files each user creates will have owner permissions of `read`, `write`, and
    `execute`. The group and world permissions will be read-only by default. This
    type of share is useful for sharing within small groups of people who wish to
    retain control of their files. To implement this type of share, add the lines
    below to the end of smb.conf (substituting your choice of share name, path, and
    list of valid users).
  prefs: []
  type: TYPE_NORMAL
- en: 'Code View:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Read-Only Shares
  prefs: []
  type: TYPE_NORMAL
- en: The configuration below allows everyone read-only access to the share without
    a password. Only users on the write list can create, modify, and delete files
    they own in the share. This type of share is useful to publish files for public
    access while giving authors or administrators the ability to retain control of
    their content. To implement this type of share, add the lines below to the end
    of smb.conf, substituting your choice of share name, path, and list of users with
    write access.
  prefs: []
  type: TYPE_NORMAL
- en: 'Code View:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Printers
  prefs: []
  type: TYPE_NORMAL
- en: By default, all configured printers in CUPS are shared and available to authenticated
    users. If you need to apply access restrictions to printers, please see "[Notes](notes.html#notes)"
    .
  prefs: []
  type: TYPE_NORMAL
- en: Finishing
  prefs: []
  type: TYPE_NORMAL
- en: When you are satisfied with your shares configuration, save and exit.
  prefs: []
  type: TYPE_NORMAL
- en: 'Test the smb.conf file for syntax errors:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Examine the output for any errors and correct them if necessary. Make sure the
    paths you specified in your share definitions exist. If they don't, create them
    now.
  prefs: []
  type: TYPE_NORMAL
- en: 27.7.2\. Setting Share Permissions
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The sections below correspond to the example share configurations mentioned
    previously. For example, if you created a public share in the last section, proceed
    to "Public Share Permissions." When you have completed setting permissions for
    your configured shares, proceed to "[Testing](testing-id17.html#testing-id17)".
  prefs: []
  type: TYPE_NORMAL
- en: Public Share Permissions
  prefs: []
  type: TYPE_NORMAL
- en: 'If you will be hosting a public share, you will need to set the permissions
    on the public share directory to mode `777` in order to allow all users the ability
    to create, modify, and delete files. For example, the command below would set
    the required permissions on the /usr/home/samba/public directory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: Private Share Permissions
  prefs: []
  type: TYPE_NORMAL
- en: If you will be hosting a private share, you will need to set the permissions
    on the private share directory to mode `770`. This will allow root and the members
    of the group full access to the directory (we will also create the group).
  prefs: []
  type: TYPE_NORMAL
- en: Because we want only the users we specify to access this directory, we need
    to create a new group and add them as members. As an example, we'll create a group
    called smbprivate with the users john and jane as members.
  prefs: []
  type: TYPE_NORMAL
- en: The following commands will create the group smbprivate, change the /usr/home/samba/private
    directory's ownership to this new group, and set the correct permissions. (You
    can use any group name you like.)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: Substitute your own usernames, group name, and path as appropriate.
  prefs: []
  type: TYPE_NORMAL
- en: Read-Only Share Permissions
  prefs: []
  type: TYPE_NORMAL
- en: If you will be hosting a read-only share, you will need to set the permissions
    on the read-only share directory to mode `770`. This will allow root and the members
    of the group full access to the directory.
  prefs: []
  type: TYPE_NORMAL
- en: Because we want only the users we specified in the write list to access this
    directory, we need to create a new group and add these users as members. As an
    example, we will create a new group called smbreadonly with users bert and ernie
    as members.
  prefs: []
  type: TYPE_NORMAL
- en: The following commands will create the group, change the /usr/home/samba/private
    directory's ownership to this new group, and set the correct permissions.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: Substitute your own usernames, group name, and path as appropriate.
  prefs: []
  type: TYPE_NORMAL
- en: 27.7.3\. Adding Users
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Create Samba user accounts and passwords for the users you wish to allow Samba
    access. The usernames you specify should match those of their existing system
    accounts. To set up a new user, use the `smbpasswd` command (replacing `*username*`
    with the username you wish to create):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'After entering a password, you should see:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: Repeat this for any other users you'd like to add.
  prefs: []
  type: TYPE_NORMAL
- en: 27.8\. TESTING
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this section, we'll perform some basic tests to confirm that Samba answers
    SMB/CIFS requests properly.
  prefs: []
  type: TYPE_NORMAL
- en: 'Enter this command to start the SMB daemon for testing:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'To list the available shares Samba is hosting, use the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Replace `*username*` with a valid Samba user. After entering the user's password,
    you should see the list of shares you configured earlier.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'To log in and browse a share, enter:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Once login is complete, you should see an `smb: \>` prompt. You may then navigate
    the share with common Unix commands, such as `cd` and `ls`. Enter `**quit**` to
    exit.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'If the tests were successful, configure the Samba server to start automatically
    at boot time. Open /etc/rc.conf:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'and then add the following line:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Save, exit, and restart Samba:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** You can run the `*status*` command for confirmation that the Samba
    service started.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 27.9\. UTILITIES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Following is brief information on the smbpasswd and pdbedit utilities, which
    are used to maintain user passwords and policies. This section also covers SWAT,
    an alternative interface for Samba administration.
  prefs: []
  type: TYPE_NORMAL
- en: 27.9.1\. smbpasswd
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This utility manages users' Samba passwords.
  prefs: []
  type: TYPE_NORMAL
- en: Command
  prefs: []
  type: TYPE_NORMAL
- en: '`smbpasswd`'
  prefs: []
  type: TYPE_NORMAL
- en: Syntax
  prefs: []
  type: TYPE_NORMAL
- en: '`smbpasswd -``*options username*`'
  prefs: []
  type: TYPE_NORMAL
- en: Options
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: Adds a user to the Samba password file
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: Deletes a user from the Samba password file
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: Disables a user
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: Enables a user if previously disabled
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: 'To add the user jake to the Samba password file, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: 'To disable the user webster, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** If a user has shell access to your server, he may change his password
    by entering `*smbpasswd*` with no arguments.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 27.9.2\. pdbedit
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This utility manages users in the Samba user database. It is usable by root
    only.
  prefs: []
  type: TYPE_NORMAL
- en: Command
  prefs: []
  type: TYPE_NORMAL
- en: '`pdbedit`'
  prefs: []
  type: TYPE_NORMAL
- en: Syntax
  prefs: []
  type: TYPE_NORMAL
- en: '`pdbedit -``*option*` `*argument*`'
  prefs: []
  type: TYPE_NORMAL
- en: Options
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: Adds a user
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: Specifies user to manage
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: Specifies user's full name
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: Verbose listing format
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: Lists all users in the database
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: Deletes a user
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: 'Displays account policy and current value. Valid arguments include:'
  prefs: []
  type: TYPE_NORMAL
- en: '| `minimum password age` | `bad lockout attempt` |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| `maximum password age` | `reset count minutes` |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| `min password length` | `disconnect time` |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| `password history` | `user must logon to change password` |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| `lockout duration` | `refuse machine password change` |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: Changes account policy value
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: 'To add a user John Doe to the Samba database with the username john, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: 'To list all users in the database verbosely, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: 'To display the minimum password length account policy, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs: []
  type: TYPE_PRE
- en: 'To change the minimum password length to 8, enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs: []
  type: TYPE_PRE
- en: 'See pdbedit''s man page for more options:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs: []
  type: TYPE_PRE
- en: 27.9.3\. Enabling SWAT
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: SWAT (Samba Web Administration Tool) provides an easy-to-use alternative interface
    for Samba administration. SWAT is run from FreeBSD's built-in Internet super-server
    (inetd). To enable SWAT, follow these steps.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open inetd.conf:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Uncomment the `swat` declaration (~120). It should appear now as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Save and exit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Unless you''ve specifically configured inetd to run at boot time, enter the
    following to start the service:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE41]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: To access the SWAT interface, navigate to [http://host.example.com:901](http://host.example.com:901)
    with a web browser (substitute your server's hostname). Log in as root to access
    the administrative functions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Be aware that your login and password are transmitted in the clear.
    If you cannot ensure the security of your network, do not use this utility. Use
    a secure solution like manual configuration via SSH or a browser, like Lynx (see
    "[Lynx 2.8.6](lynx_2.8.6.html#lynx_2.8.6)"), on the server console. Do not use
    this utility from outside your network unless you have taken steps to encrypt
    the transmission of your root password using something like a secure VPN tunnel.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Once configuration of Samba with SWAT is complete, you may terminate inetd
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs: []
  type: TYPE_PRE
- en: 'To start inetd automatically at boot time, add the following line to /etc/rc.conf
    :'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE43]'
  prefs: []
  type: TYPE_PRE
- en: 27.10\. CONFIG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /usr/local/etc/smb.conf
  prefs: []
  type: TYPE_NORMAL
- en: The main configuration file for Samba
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/samba/smbpasswd
  prefs: []
  type: TYPE_NORMAL
- en: The Samba encrypted password file; it is created by the smbpasswd utility and
    contains usernames and hashed passwords for SMB users
  prefs: []
  type: TYPE_NORMAL
- en: 27.11\. LOG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /var/log/samba
  prefs: []
  type: TYPE_NORMAL
- en: Contains log files for Samba activity and hosts that have connected to a Samba
    share
  prefs: []
  type: TYPE_NORMAL
- en: 27.12\. NOTES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'If you have CUPS installed and configured without access restrictions, all
    authenticated Samba users will have permission to print to any installed printer.
    To restrict printing privileges to specific users, you must modify /etc/smb.conf.
    First, open smb.conf :'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll to the bottom of smb.conf using [ctrl-U] and add the following lines:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE45]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Replace `*username*` with the username(s) of the person(s) you want to allow
    print privileges (separate multiple users with spaces).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Save, exit, and restart Samba:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'If you configured CUPS printing without access restrictions, consider disabling
    IPP (Internet Printing Protocol) since you are trying to restrict printing access
    to specific users. To prevent CUPS from accepting direct IPP print requests, edit
    the cupsd.conf file. First, open cupsd.conf:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE47]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down to the bottom of the cupsd.conf file using [ctrl-U] and add the
    following lines:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This directive will cause CUPS to reject all direct IPP printing requests and
    instead accept only Samba-relayed print jobs.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Save, exit, and restart CUPS:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE49]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Windows XP SP2 systems may experience a delay when selecting a Samba printer
    in some applications or when attempting to access printer properties. This may
    be resolved by removing Windows registry entries that refer to the Samba hosted
    printer. The locations of the registry entries are as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: HKEY_CURRENT_USER\Printers\DevModePerUser
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: HKEY_CURRENT_USER\Printers\DevModes2
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Delete \\ samba_server_name \ printer_name.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Use caution when modifying the Windows registry.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
