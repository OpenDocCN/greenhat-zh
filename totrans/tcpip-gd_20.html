<html><head></head><body><div class="part" title="Part&#xA0;III-9.&#xA0;OTHER FILE AND MESSAGE TRANSFER APPLICATIONS"><div class="titlepage"><div><div><h1 class="title"><a id="other_file_and_message_transfer_applicat"/>Part III-9. OTHER FILE AND MESSAGE TRANSFER APPLICATIONS</h1></div></div></div><div class="partintro" id="id3378972" title="OTHER FILE AND MESSAGE TRANSFER APPLICATIONS"><div/><p><a class="xref" href="ch85.html" title="Chapter 85. USENET (NETWORK NEWS) AND THE TCP/IP NETWORK NEWS TRANSFER PROTOCOL (NNTP)">Chapter 85</a></p><p><a class="xref" href="ch86.html" title="Chapter 86. GOPHER PROTOCOL (GOPHER)">Chapter 86</a></p><p>The previous three parts of this book have examined several of the most widely used TCP/IP file and message transfer protocols: the File Transfer Protocol (FTP), the Trivial File Transfer Protocol (TFTP), electronic mail (email), and the World Wide Web. Of course, hundreds of other applications are in use on the Internet today, and we couldn't possibly examine them all here. However, there are a couple of other protocols that are considered part of the group of classic applications of TCP/IP like FTP, email, and the Web that I feel are worth discussing.</p><p>This part contains two chapters that cover these other file and message transfer applications. The first chapter describes Usenet (network news), which is one of the original methods of group communication on the Internet. The second chapter describes the Gopher protocol, which while no longer widely used today is worth a brief discussion, especially due to its role as a historical precursor of the Web.</p></div></div>
<div class="chapter" title="Chapter&#xA0;85.&#xA0;USENET (NETWORK NEWS) AND THE TCP/IP NETWORK NEWS TRANSFER PROTOCOL (NNTP)"><div class="titlepage"><div><div><h1 class="title"><a id="usenet_network_news_and_the_tcpip_networ"/>Chapter 85. USENET (NETWORK NEWS) AND THE TCP/IP NETWORK NEWS TRANSFER PROTOCOL (NNTP)</h1></div></div></div><div class="informalfigure"><div class="mediaobject"><a id="I_mediaobject1_d1e91946"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages287681.png.jpg"/></div></div><p>Electronic mail (email) is one of the stalwarts of message transfer on the modern Internet, but it is really designed only for communication within a relatively small group of specific users. There are many situations in which email is not ideally suited, such as when information needs to be shared among a large number of participants, not all of whom may necessarily even know each other. One classic example of this is sharing <span class="emphasis"><em>news</em></span>. In this case, the person providing news often wants to make it generally available to anyone who is interested, rather than specifying a particular set of recipients.</p><p>For distributing news and other types of general information over internetworks, a messaging system called both <span class="emphasis"><em>Usenet</em></span> and <span class="emphasis"><em>network news</em></span> was created. Like email, this application allows messages to be written and read by large numbers of users. However, it is designed using a very different model than email—one that is focused on public sharing and feedback. In Usenet, anyone can write a message that can be read by any number of recipients, and anyone can respond to messages written by others. Usenet was one of the first widely deployed internetwork-based group communication applications, and it has grown into one of the largest online communities in the world, used by millions of people for sharing information, asking questions, and discussing thousands of different topics.</p><p>In this chapter, I describe <a class="indexterm" id="idx-CHP-85-3059"/>Usenet and network news in detail, discussing how they are used and how they work. I provide an <a class="indexterm" id="idx-CHP-85-3060"/>overview and <a class="indexterm" id="idx-CHP-85-3061"/>history of Usenet, a high-level look at its model of communication and how messages are created and manipulated, an explanation of Usenet newsgroups, and a description of the Usenet message format and headers. Then I provide a detailed description of the operation of the Network News Transfer Protocol (NNTP), the means used for transferring messages on modern Usenet. Starting as usual with an overview of the protocol, I then explain the two fundamentals ways that NNTP is used: for the propagation of news articles between servers and for client article posting and access. From there, I move on to the technical details of NNTP commands, command extensions, responses, and response codes.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-505"/>Tip</h3><p><span class="strong"><strong>BACKGROUND INFORMATION</strong></span> <span class="emphasis"><em>Several aspects of how Usenet works are closely related to the standards and techniques used for email. If you have not read <a class="xref" href="pt18.html" title="Part III-7. TCP/IP ELECTRONIC MAIL SYSTEM: CONCEPTS AND PROTOCOLS">Part III-7</a>, which covers email, I suggest that you at least review the overview of the email system in <a class="xref" href="ch74.html" title="Chapter 74. TCP/IP ELECTRONIC MAIL SYSTEM OVERVIEW AND CONCEPTS">Chapter 74</a> and the discussion of the email message format in <a class="xref" href="ch76.html" title="Chapter 76. TCP/IP ELECTRONIC MAIL MESSAGE FORMATS AND MESSAGE PROCESSING: RFC 822 AND MIME">Chapter 76</a>, since Usenet messages are based on the RFC 822 email message standard.</em></span></p></div><div class="sect1" title="Usenet Overview, History, and Operation"><div class="titlepage"><div><div><h1 class="title"><a id="usenet_overview_history_and_operation"/>Usenet Overview, History, and Operation</h1></div></div></div><p>Where email is the modern equivalent of the handwritten letter or the interoffice memo, <span class="emphasis"><em>Usenet</em></span> is the updated version of the company newsletter, the cafeteria bulletin board, the coffee break chat, and the watercooler gossip session, all rolled into one. Spread worldwide over the Internet, Usenet newsgroup messages provide a means for people with common interests to form online communities to discuss happenings, solve problems, and provide support to each other, as well as to engage in plain old socializing and entertainment.</p><p>We are by nature both highly social and creative animals, and as a result, we are always finding new ways to communicate. It did not take long after computers were first connected together for it to be recognized that those interconnections provided the means to link together people as well. The desire to use computers to create an <span class="emphasis"><em>online community</em></span> led to the creation of Usenet more than two decades ago.</p><div class="sect2" title="History of Usenet"><div class="titlepage"><div><div><h2 class="title"><a id="history_of_usenet"/>History of Usenet</h2></div></div></div><p>Like almost everything associated with networking, Usenet had very humble beginnings. In 1979, Tom <a class="indexterm" id="idx-CHP-85-3062"/>Truscott was a student at <a class="indexterm" id="idx-CHP-85-3063"/>Duke University in North Carolina, and he spent the summer as an intern at <a class="indexterm" id="idx-CHP-85-3064"/>Bell Laboratories, the place where the UNIX operating system was born. He enjoyed the experience so much that when he returned to school that autumn, he missed the intensive UNIX environment at Bell Labs. He used the <span class="emphasis"><em>Unix-to-Unix Copy Protocol (UUCP)</em></span> to send information from his local machine to other machines and vice versa, including establishing electronic connectivity back to Bell Labs.</p><p>Building on this idea, Truscott and a fellow Duke student, Jim Ellis, teamed up with other UNIX enthusiasts at Duke and the nearby <a class="indexterm" id="idx-CHP-85-3065"/>University of North Carolina (<a class="indexterm" id="idx-CHP-85-3066"/>UNC) at Chapel Hill, to develop the idea of an online community. The goal was to create a system where students could use UNIX to write and read messages, to allow them to obtain both technical help and maintain social contacts. They designed the system based on an analogy to an online newsletter that was open to all users of a connected system. To share information, messages were posted to <span class="emphasis"><em>newsgroups</em></span>, where any user could access the messages to read them and respond to them.</p><p>The early work at Duke and UNC resulted in the development of both the initial message format and the software for the earliest versions of this system, which became known both as <span class="emphasis"><em>network news (net news)</em></span> and <span class="emphasis"><em>Usenet</em></span> (a contraction of <span class="emphasis"><em>User's network</em></span>). At first, the system had just two computers, sharing messages posted in a pair of different newsgroups. The value of the system was immediately recognized, however, and soon many new sites were added to the system. These sites were arranged in a structure to allow messages to be efficiently passed using direct UUCP connections. The software used for passing news articles also continued to evolve and become more capable, as did the software for reading and writing articles.</p><p>The newsgroups themselves also changed over time. Many new newsgroups were created, and a hierarchical structure was defined to help keep the newsgroups organized in a meaningful way. As more sites and users joined Usenet, more areas of interest were identified. Today, there are a staggering number of Usenet newsgroups: more than 100,000. While many of these groups are not used, many thousands of active ones discuss nearly every topic imaginable—from space exploration, to cooking, to biochemistry, to PC troubleshooting, to raising horses. There are also regional newsgroups devoted to particular areas; for example, there is a set of newsgroups for discussing events in Canada and another for discussing happenings in the New York area, and so on.</p></div><div class="sect2" title="Usenet Operation and Characteristics"><div class="titlepage"><div><div><h2 class="title"><a id="usenet_operation_and_characteristics"/>Usenet Operation and Characteristics</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3067"/>Usenet begins with a user writing a message to be distributed. After the message is <span class="emphasis"><em>posted</em></span> to say, the group on TCP/IP networking, it is stored on that user's local news server, and special software sends copies of it to other connected news servers. The message eventually propagates around the world, where anyone who chooses to read the TCP/IP networking newsgroup can see the message.</p><p>The real power of Usenet is that after reading a message, any user can respond to it on the same newsgroup. Like the original message, the reply will propagate to each connected system, including the one used by the author of the original message. This makes Usenet very useful for sharing information about recent happenings, for social discussions, and especially for receiving assistance with problems, such as resolving technical glitches or getting help with a diet program.</p><p>What is particularly interesting about Usenet is that it is not a formalized system in any way, and it is not based on any formally defined standards. It is a classic example of the development of a system in an entirely ad hoc manner: The software was created, people started using it, the software was refined, and things just took off from there. Certain standards have been written to codify how Usenet works—such as RFC 1036, which describes the Usenet message format—but these serve more as historical documents than as prescriptive standards.</p><p>There is likewise no central authority that is responsible for Usenet's operation, even though new users often think there is one. Unlike a dial-up bulletin board system or Web-based forum, Usenet works simply by virtue of cooperation between sites; there is no manager in charge. For this reason, Usenet is sometimes called an anarchy, but this is not accurate. It isn't the case that there are no rules. It is up to the managers of participating systems to make policy decisions such as which newsgroups to support. There are also certain dictatorial aspects of the system, in that only certain people (usually system administrators) can decide whether to create some kinds of new newsgroups. The system also has socialistic elements in that machine owners are expected to share messages with each other. So, the simplified political labels really don't apply to Usenet.</p><p>Every community has a <span class="emphasis"><em>culture</em></span>, and the same is true of online communities, including Usenet. There is an overall culture that prescribes acceptable behavior on Usenet, and also thousands of newsgroup-specific cultures in Usenet, each of which has evolved through the writings of thousands of participants over the years. There are even newsgroups devoted to explaining how Usenet itself operates, where you can learn about <a class="indexterm" id="idx-CHP-85-3068"/><span class="emphasis"><em>newbies</em></span> (new users), <a class="indexterm" id="idx-CHP-85-3069"/><span class="emphasis"><em>netiquette</em></span> (rules of etiquette for posting messages), and related subjects.</p></div><div class="sect2" title="Usenet Transport Methods"><div class="titlepage"><div><div><h2 class="title"><a id="usenet_transport_methods"/>Usenet Transport Methods</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3070"/>As I said earlier, Usenet messages were originally transported using UUCP, which was created to let UNIX systems communicate directly, usually using telephone lines. For many years, all Usenet messages were simply sent from machine to machine using computerized telephone calls (just as email once was). Each computer joining the network would connect to one already on Usenet and receive a <span class="emphasis"><em>feed</em></span> of messages from it periodically. The owner of that computer had to agree to provide messages to other computers.</p><p>Once TCP/IP was developed in the 1980s and the Internet grew to a substantial size and scope, it made sense to start using it to carry Usenet messages rather than UUCP. The <span class="emphasis"><em>Network News Transfer Protocol (NNTP)</em></span> was developed specifically to describe the mechanism for communicating Usenet messages over the Transmission Control Protocol (TCP). It was formally defined in RFC 977, published in 1986, with NNTP extensions described in RFC 2980, published in October 2000.</p><p>For many years, Usenet was carried using both NNTP and UUCP, but NNTP is now the mechanism used for the vast majority of Usenet traffic, and for this reason is the primary focus of my Usenet discussion. NNTP is employed not only to distribute Usenet articles to various servers, but also for other client actions, such as posting and reading messages. It is thus used for most of the steps in Usenet message communication.</p><div class="note" title="Note"><h3 class="title"><a id="note-186"/>Note</h3><p><span class="emphasis"><em>Many people often equate the Usenet system as a whole with the NNTP protocol that is used to carry Usenet messages on the Internet. They are not the same however; Usenet predates NNTP, which is simply a protocol for conveying Usenet messages.</em></span></p></div><p>It is because of the critical role of NNTP and the Internet in carrying messages in today's Usenet that the concepts are often confused. It's essential to remember, however, that Usenet does not refer to any type of physical network or internetworking technology; rather, it is a logical network of users. That logical network has evolved from UUCP data transfers to NNTP and TCP/IP, but Usenet itself is the same.</p><p>Today, Usenet faces competition from many other group messaging applications and protocols, including Web-based bulletin board systems and chat rooms. After a quarter of a century, however, Usenet has established itself and is used by millions of people every day. While to some, the primarily text-based medium seems archaic, it is a mainstay of global group communication and likely to continue to be so for many years to come.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-506"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> One of the very first online electronic communities was set up in 1979 by university students who wanted to keep in touch and share news and other information. Today, <span class="emphasis"><em>Usenet (for User's network)</em></span>, also called <span class="emphasis"><em>network news</em></span>, has grown into a logical network that spans the globe. By posting messages to a Usenet newsgroup, people can share information on a variety of subjects of interest. Usenet was originally implemented in the form of direct connections established between participating hosts. Today, the Internet is the vehicle for message transport.</p></div></div></div></div>
<div class="sect1" title="Usenet Communication Model"><div class="titlepage"><div><div><h1 class="title"><a id="usenet_communication_model"/>Usenet Communication Model</h1></div></div></div><p><a class="indexterm" id="idx-CHP-85-3071"/>When the students at Duke University decided to create their online community, email was already in wide use, and there were many mailing lists in operation as well. Email was usually transported using UUCP—the same method that Usenet was designed to employ—during these pre-Internet days. Then why not simply use email to communicate between sites?</p><p>The main reason is that email is not designed to facilitate the creation of an online community where information can be easily shared in a group. The main issue with email in this respect is that only the individuals who are specified as recipients of a message can read it. There is no facility whereby someone can write a message and put it in an open place where anyone who wants to can read it, analogous to posting a newsletter in a public place.</p><p>Another problem with email in large groups is related to efficiency. Consider that if you put 1,000 people on a mailing list, each message sent to that list must be duplicated and delivered 1,000 times. Early networks were limited in bandwidth and resources, so using email for wide-scale group communication was possible, but far from ideal.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-507"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> While email can be used for group communications, it has two important limitations. First, a message must be specifically addressed to each recipient, making public messaging impossible. Second, each recipient requires delivery of a separate copy of the message, so sending a message to many recipients requires the use of a large number of resources.</p></div><div class="sect2" title="Usenet's Public Distribution Orientation"><div class="titlepage"><div><div><h2 class="title"><a id="usenets_public_distribution_orientation"/>Usenet's Public Distribution Orientation</h2></div></div></div><p>To avoid the problems of using email for group messaging, Usenet was designed using a rather different communication and message-handling <a class="indexterm" id="idx-CHP-85-3072"/>model than email. The defining difference between the Usenet communication model and that used for email is that Usenet message handling is oriented around the concept of <span class="emphasis"><em>public distribution</em></span>, rather than private delivery to an individual user. This affects every aspect of how Usenet communication works, as follows:</p><p><span class="strong"><strong>Addressing</strong></span> Messages are not addressed from a sender to any particular recipient or set of recipients, but rather to a <span class="emphasis"><em>group</em></span>, which is identified with a newsgroup name.</p><p><span class="strong"><strong>Storage</strong></span> Messages are not stored in individual mailboxes, but rather in a central location on a server, where any user of the server can access them.</p><p><span class="strong"><strong>Delivery</strong></span> Messages are not conveyed from the sender's system to the recipient's system, but rather are spread over the Internet to all connected systems so anyone can read them.</p></div><div class="sect2" title="Usenet Communication Process"><div class="titlepage"><div><div><h2 class="title"><a id="usenet_communication_process"/>Usenet Communication Process</h2></div></div></div><p>To help illustrate in more detail how Usenet communication works, let's take a look at the steps involved in writing, transmitting, and reading a typical Usenet message (also called an <span class="emphasis"><em>article</em></span>—the terms are used interchangeably). Let's suppose the process begins with a user, Ellen, posting a request for help with a sick horse to the newsgroup misc.rural. Since she is posting the message, she would be known as the message <span class="emphasis"><em>poster</em></span>. Simplified, the steps in the process (illustrated in <a class="xref" href="ch85s02.html#usenet_network_news_communication_model_" title="Figure 85-1. Usenet (network news) communication model This figure illustrates the method by which messages are created, propagated, and read using NNTP on modern Usenet; it is similar in some respects to the email model diagram (Figure 74-1 in Chapter 74). In this example, a message is created by the poster, Ellen, and read by a reader, Jane. The process begins with Ellen creating a message in an editor and posting it. Her NNTP client sends it to her local NNTP server. It is then propagated from that local server to adjacent servers, usually including its upstream server, which is used to send the message around the Internet. Other NNTP servers receive the message, including the one upstream from Jane's local server. It passes the message to Jane's local server, and Jane accesses and reads the message using an NNTP client. Jane could respond to the message; in which case, the same process would repeat, but going in the opposite direction, back to Ellen (and also back to thousands of other readers, not shown here).">Figure 85-1</a>) are as follows:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="strong"><strong>Article Composition</strong></span> Ellen begins by creating a Usenet article, which is structured according to the special message format required by Usenet. This message is similar to an email message in that it has a <span class="emphasis"><em>header</em></span> and a <span class="emphasis"><em>body</em></span>. The body contains the actual message to be sent, while the header contains header lines that describe the message and control how it is delivered. For example, one important header line specifies for which newsgroup(s) the article is intended.</p></li><li class="listitem"><p><span class="strong"><strong>Article Posting and Local Storage</strong></span> After completing her article, Ellen submits the article to Usenet, a process called <span class="emphasis"><em>posting</em></span>. A client software program on Ellen's computer transmits Ellen's message to her local Usenet server. The message is stored in an appropriate file storage area on that server. It is now immediately available to all other users of that server who decide to read misc.rural.</p></li><li class="listitem"><p><span class="strong"><strong>Article Propagation</strong></span> At this point, Ellen's local server is the only one that has a copy of her message. The article must be sent to other sites, a process called <span class="emphasis"><em>distribution</em></span>, or more commonly, <span class="emphasis"><em>propagation</em></span>. Ellen's message travels from her local Usenet server to other servers to which her server directly connects. It then propagates from those servers to others <span class="emphasis"><em>they</em></span> connect to, and so on, until all Usenet servers that want it have a copy of the message.</p></li><li class="listitem"><p><span class="strong"><strong>Article Access and Retrieval</strong></span> Since <a class="indexterm" id="idx-CHP-85-3073"/>Usenet articles are stored on central servers, in order to read them, they must be accessed on the server. This is done using a Usenet <span class="emphasis"><em>newsreader</em></span> program. For example, some other reader of misc.rural named Jane might access that group and find Ellen's message. If Jane were able to help Ellen, she could reply to Ellen by posting an article of her own. This would then propagate back to Ellen's server, where she could read it and reply. All other readers of <span class="emphasis"><em>misc.rural</em></span> could jump into the conversation at any time as well, which is what makes Usenet so useful for group communication.</p></li></ol></div><div class="figure"><a id="usenet_network_news_communication_model_"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject1_d1e92249"/><img alt="Usenet (network news) communication model This figure illustrates the method by which messages are created, propagated, and read using NNTP on modern Usenet; it is similar in some respects to the email model diagram ( in ). In this example, a message is created by the poster, Ellen, and read by a reader, Jane. The process begins with Ellen creating a message in an editor and posting it. Her NNTP client sends it to her local NNTP server. It is then propagated from that local server to adjacent servers, usually including its upstream server, which is used to send the message around the Internet. Other NNTP servers receive the message, including the one upstream from Jane's local server. It passes the message to Jane's local server, and Jane accesses and reads the message using an NNTP client. Jane could respond to the message; in which case, the same process would repeat, but going in the opposite direction, back to Ellen (and also back to thousands of other readers, not shown here)." src="httpatomoreillycomsourcenostarchimages288317.png.jpg"/></div></div><p class="title">Figure 85-1. Usenet (network news) communication model This figure illustrates the method by which messages are created, propagated, and read using NNTP on modern Usenet; it is similar in some respects to the email model diagram (<a class="xref" href="ch74s03.html#email_communication_model_this_diagram_s" title="Figure 74-1. Email communication model This diagram shows the four devices that are involved in a typical email communication between two users. Each device consists of a number of different elements, which communicate as indicated by the black arrows. Note the inherent asymmetry, because the method used to send an email from a user is not the same as that used to retrieve it from the server. The large, shaded arrows show a typical transaction: the sender composes mail and it goes to her local email spool. It is sent to the sender's local SMTP server using SMTP, and then to the recipient's SMTP server, where it goes into that user's inbox. It is then retrieved, usually using a protocol such as POP or IMAP.">Figure 74-1</a> in <a class="xref" href="ch74.html" title="Chapter 74. TCP/IP ELECTRONIC MAIL SYSTEM OVERVIEW AND CONCEPTS">Chapter 74</a>). In this example, a message is created by the poster, Ellen, and read by a reader, Jane. The process begins with Ellen creating a message in an editor and posting it. Her NNTP client sends it to her local NNTP server. It is then propagated from that local server to adjacent servers, usually including its upstream server, which is used to send the message around the Internet. Other NNTP servers receive the message, including the one upstream from Jane's local server. It passes the message to Jane's local server, and Jane accesses and reads the message using an NNTP client. Jane could respond to the message; in which case, the same process would repeat, but going in the opposite direction, back to Ellen (and also back to thousands of other readers, not shown here).</p></div><div class="tip" title="Tip"><h3 class="title"><a id="tip-508"/>Tip</h3><p><a class="indexterm" id="idx-CHP-85-3074"/><span class="strong"><strong>KEY CONCEPT</strong></span> Usenet communication consists of four basic steps. A message is first composed and then posted to the originator's local server. The third step is propagation, where the message is transmitted from its original server to others on the Usenet system. The last step in the process is article retrieval, where other members of the newsgroup access and read the article. The Network News Transfer Protocol (NNTP) is the technology used for moving Usenet articles from one host to the next.<a class="indexterm" id="I_indexterm1_d1e92264"/></p></div></div><div class="sect2" title="Message Propagation and Server Organization"><div class="titlepage"><div><div><h2 class="title"><a id="message_propagation_and_server_organizat"/>Message Propagation and Server Organization</h2></div></div></div><p>Propagation is definitely the most complex part of the <a class="indexterm" id="idx-CHP-85-3075"/>Usenet communication process. In the past, UUCP was used for propagation. Each Usenet server would be programmed to regularly dial up another server and give it all new articles it had received since the last connection. Articles would <span class="emphasis"><em>flood</em></span> across Usenet from one server to another. This was time-consuming and inefficient, and it worked only because the volume of articles was relatively small.</p><p>As I noted in the previous section, in modern Usenet, NNTP is used for all stages of transporting messages between devices. Articles are posted using an NNTP connection between a client machine and a local server, which then uses the same protocol to propagate the articles to other adjacent NNTP servers. The client newsreader software also uses NNTP to retrieve messages from a server.</p><p>NNTP servers are usually arranged in a hierarchy of sorts, with the largest and fastest servers providing service to smaller servers downstream from them. Depending on how the connections are arranged, an NNTP server may establish a connection to immediately send a newly posted article to an upstream server for distribution to the rest of Usenet, or the server may passively wait for a connection from the upstream server to ask if there are any new articles to be sent. With the speed of the modern Internet, it typically takes only a few minutes (or seconds) for articles to propagate from one server to another, even across continents.</p><p>It is also possible to restrict the propagation of a Usenet message, a technique often used for discussions that are of relevance only in certain regions or on certain systems. Discussing rural issues such as horses is of general interest, and Ellen might find help anywhere around the world, so global propagation of her message makes sense. However, if Ellen lived in the Boston area and was interested in knowing the location of a good local restaurant, posting a query to <span class="emphasis"><em>ne.food</em></span> (New England food discussions) with only local distribution would make more sense. There are also companies that use Usenet to provide "in-house" <a class="indexterm" id="idx-CHP-85-3076"/>newsgroups that are not propagated off the local server at all. However, because so many news providers are now national or international, limiting the distribution of messages has largely fallen out of practice.</p></div><div class="sect2" title="Usenet Addressing: Newsgroups"><div class="titlepage"><div><div><h2 class="title"><a id="usenet_addressing_newsgroups"/>Usenet Addressing: Newsgroups</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3077"/><a class="indexterm" id="idx-CHP-85-3078"/>A key concept in Usenet communication is the <span class="emphasis"><em>newsgroup</em></span>. Newsgroups are the addressing mechanism for Usenet, and sending a Usenet article to a newsgroup is equivalent to sending email to an email address. Newsgroups are analogous to other group communication venues such as mailing lists, chat rooms, Internet Relay Chat (IRC) channels, or bulletin board system (BBS) forums (though calling a newsgroup a <span class="emphasis"><em>list</em></span>, <span class="emphasis"><em>room</em></span>, <span class="emphasis"><em>channel</em></span>, or <span class="emphasis"><em>BBS</em></span> is likely to elicit a negative reaction from Usenet old-timers!).</p><p>Like any addressing mechanism, newsgroups must be uniquely identifiable. Each newsgroup has a <span class="emphasis"><em>newsgroup name</em></span> that describes the topic of the newsgroup and differentiates it from other newsgroups. Since there are many thousands of different newsgroups, they are arranged into sets called <span class="emphasis"><em>hierarchies</em></span>. Each hierarchy contains a tree structure of related newsgroups.</p><div class="sect3" title="The Usenet Newsgroup Hierarchies"><div class="titlepage"><div><div><h3 class="title"><a id="the_usenet_newsgroup_hierarchies"/>The Usenet Newsgroup Hierarchies</h3></div></div></div><p>The total collection of newsgroup <a class="indexterm" id="idx-CHP-85-3079"/>hierarchies is in many ways similar to the domain name tree structure used in the Domain Name System (DNS). Each Usenet hierarchy is like a collection of all the domain names within a DNS top-level domain. Just as a domain name like <a class="ulink" href="http://www.pcguide.com/">www.pcguide.com</a> is formed by appending the label of the top-level domain <span class="emphasis"><em>.com</em></span> to the second-level domain name <span class="emphasis"><em>pcguide</em></span> and the subdomain <span class="emphasis"><em>www</em></span>, newsgroup names are created in the same way. They are created from a top-level newsgroup hierarchy name, to which are attached a set of descriptive labels that describes the newsgroup's place in the hierarchy.</p><p>One difference between DNS and Usenet hierarchies is that while DNS names are created from right to left as you go down the tree, Usenet newsgroup names are formed in the more natural (for English speakers) left-to-right order. For example, one of the main Usenet hierarchies is the <span class="emphasis"><em>comp</em></span> hierarchy, devoted to computer topics. Within comp is a subhierarchy on data communications called <span class="emphasis"><em>dcom</em></span>, and within that is a group that discusses data cabling. This group is called comp.dcom.cabling. Almost all newsgroups are structured in this manner.</p></div><div class="sect3" title="The &quot;Big Eight&quot; Newsgroup Hierarchies"><div class="titlepage"><div><div><h3 class="title"><a id="the_big_eight_newsgroup_hierarchies"/>The "Big Eight" Newsgroup Hierarchies</h3></div></div></div><p><a class="indexterm" id="idx-CHP-85-3080"/>One problem with the decentralized nature of Usenet is ensuring coordination in certain areas where we want everyone to be on the same page, and one of these is newsgroup naming. If we let just anyone create a newsgroup, we might end up with many groups that all discuss the same topic. Imagine that someone had a question on data cabling and didn't realize that comp.dcom.cabling existed, so he created a new group called comp.datacomm.cabling. The two groups could coexist, but this would lead to both confusion and fragmenting of the pool of people interested in this topic.</p><p>To avoid problems with newsgroup creation, administrators of large Usenet systems collaborated on a system for organizing many of the more commonly used Usenet groups into eight hierarchies, and devised a specific procedure for creating new newsgroups within them. Today, these are called the <span class="emphasis"><em>Big Eight</em></span> Usenet hierarchies, which are summarized in <a class="xref" href="ch85s02.html#usenet_big_eight_newsgroup_hierarchies" title="Table 85-1. Usenet Big Eight Newsgroup Hierarchies">Table 85-1</a>.</p><div class="table"><a id="usenet_big_eight_newsgroup_hierarchies"/><p class="title">Table 85-1. Usenet Big Eight Newsgroup Hierarchies</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Usenet Big Eight Newsgroup Hierarchies"><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-85-3081"/>Hierarchy</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>comp.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Newsgroups discussing computer-related topics, including hardware, software, operating systems, and techniques</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>humanities.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Newsgroups discussing the humanities, such as literature and art</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>misc.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Newsgroups discussing miscellaneous topics that don't fit into other Big Eight hierarchies</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>news.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Newsgroups discussing Usenet itself and its administration</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>rec.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Newsgroups discussing recreation topics, such as games, sports, and activities</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>sci.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Science newsgroups, covering specific areas such as physics and chemistry, research topics, and so forth</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>soc.*</p></td><td style="border-bottom: 0.5pt solid ; "><p>Society and social discussions, including groups on specific cultures</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>talk.*</p></td><td style=""><p>Newsgroups primarily oriented around discussion and debate of current events and happenings</p></td></tr></tbody></table></div></div><p>These eight hierarchies contain many of the most widely used groups on Usenet today. For example, professional baseball is discussed in rec.sport.baseball, Intel computers in comp.sys.intel, and Middle East politics in talk.politics.mideast.</p><p>The Big Eight hierarchies are rather tightly controlled in terms of their structure and the newsgroups they contain. The process to create a new Big Eight newsgroup is democratic and open. Anyone can propose a new group, and if there is enough support, it will be created by the cooperating system administrators who agree to follow the Big Eight system. However, this creation process is rather complex and time-consuming. Some people find this unacceptable and even object to the entire concept of this restricted process. Others consider the system advantageous, as it keeps the Big Eight hierarchies relatively orderly by slowing the rate of change to existing newsgroups and the number of new groups added.</p></div><div class="sect3" title="Alt and Other Newsgroup Hierarchies"><div class="titlepage"><div><div><h3 class="title"><a id="alt_and_other_newsgroup_hierarchies"/>Alt and Other Newsgroup Hierarchies</h3></div></div></div><p><a class="indexterm" id="idx-CHP-85-3082"/><a class="indexterm" id="idx-CHP-85-3083"/>For those who prefer a more freewheeling environment and do not want to submit to the Big Eight procedures, there is an alternative Usenet hierarchy, which begins with the hierarchy name <span class="emphasis"><em>alt</em></span>. This hierarchy includes many thousands of groups. Some are quite popular, but many are not used at all; this is a side effect of the relative ease with which an alt group can be created.</p><p>In addition to these nine hierarchies, there are dozens of additional, smaller hierarchies. Many of these are regional or even company-specific. For example, the <span class="emphasis"><em>ne.</em></span> hierarchy contains a set of newsgroups discussing issues of relevance to New England; <span class="emphasis"><em>fr.*</em></span> covers France, and <span class="emphasis"><em>de.*</em></span> pertains to Germany. Microsoft has its own set of public newsgroups in the <span class="emphasis"><em>microsoft.*</em></span> hierarchy. <a class="xref" href="ch85s02.html#usenet_newsgroup_hierarchies_usenet_news" title="Figure 85-2. Usenet newsgroup hierarchies Usenet newsgroups are arranged into tree-like structures called hierarchies. Eight of these are centralized, widely used, general-purpose hierarchies, which are today called the Big Eight. The alternate (alt) hierarchy is a very loosely structured set of thousands of groups covering every topic imaginable. In addition to these, there are many hundreds of regional, private, and special-purpose hierarchies.">Figure 85-2</a> shows the Big Eight hierarchies and some of the other hierarchies that exist.</p><div class="figure"><a id="usenet_newsgroup_hierarchies_usenet_news"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject1_d1e92494"/><img alt="Usenet newsgroup hierarchies Usenet newsgroups are arranged into tree-like structures called hierarchies. Eight of these are centralized, widely used, general-purpose hierarchies, which are today called the Big Eight. The alternate (alt) hierarchy is a very loosely structured set of thousands of groups covering every topic imaginable. In addition to these, there are many hundreds of regional, private, and special-purpose hierarchies." src="httpatomoreillycomsourcenostarchimages288319.png.jpg"/></div></div><p class="title">Figure 85-2. Usenet newsgroup hierarchies Usenet newsgroups are arranged into tree-like structures called hierarchies. Eight of these are centralized, widely used, general-purpose hierarchies, which are today called the Big Eight. The alternate (alt) hierarchy is a very loosely structured set of thousands of groups covering every topic imaginable. In addition to these, there are many hundreds of regional, private, and special-purpose hierarchies.</p></div><div class="tip" title="Tip"><h3 class="title"><a id="tip-509"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> Usenet messages are not addressed to individual users; rather, they are posted to newsgroups. Each newsgroup represents a topic. Those with an interest in the subject of a group can read messages in it and reply to them as well. Usenet newsgroups are arranged into tree-like hierarchies that are similar in structure to DNS domains. Many of the most widely used newsgroups are found in a collection of general-interest hierarchies called the Big Eight. An alternate (alt) hierarchy offers an alternative to the Big Eight. There are also many regional and special-purpose hierarchies.</p></div></div><div class="sect3" title="Unmoderated and Moderated Newsgroups"><div class="titlepage"><div><div><h3 class="title"><a id="unmoderated_and_moderated_newsgroups"/>Unmoderated and Moderated Newsgroups</h3></div></div></div><p><a class="indexterm" id="idx-CHP-85-3084"/>Most newsgroups are open to all to use and are called <a class="indexterm" id="idx-CHP-85-3085"/><span class="emphasis"><em>unmoderated</em></span> because a message sent to them goes directly out to the whole Usenet server internetwork. In contrast, a small percentage of newsgroups is <span class="emphasis"><em>moderated</em></span>, which means that all messages sent to the group are screened and only the ones that are approved by a moderator (or moderator team) are really posted.</p><p>The purpose of moderated groups is to ensure that discussions in a particular group remain on-topic. They are often created to handle topics that are controversial, to ensure that debates remain constructive and disruption is avoided. For example, rec.guns is moderated to ensure that discussions focus on the use of guns and not on endless political arguments related to gun control and the like (which has a place, in talk.politics.guns). Moderated groups are also sometimes used for specialty groups intended only for announcements, or for groups where the content is restricted. For example, rec.food.recipes is moderated so that it contains only recipes and recipe requests, which helps people find recipes easily without needing to wade through a lot of discussion. Finally, moderated versions of unmoderated groups are sometimes created when a few disruptive elements choose to post large volumes in the unmoderated groups, making normal discussion difficult.</p></div><div class="sect3" title="Cross-Posting to Multiple Newsgroups"><div class="titlepage"><div><div><h3 class="title"><a id="cross-posting_to_multiple_newsgroups"/>Cross-Posting to Multiple Newsgroups</h3></div></div></div><p><a class="indexterm" id="idx-CHP-85-3086"/>It is possible for a single article to be posted to multiple newsgroups. This process, called <span class="emphasis"><em>cross-posting</em></span>, is used when a message pertains to two topics, or to allow a sender to reach a wider audience. For example, if you live in the Seattle area and have a problem with your house, you might legitimately cross-post to <span class="emphasis"><em>seattle.general</em></span> and <span class="emphasis"><em>misc.consumers.house</em></span>.</p><p>Cross-posting is more efficient than posting the same message to each group independently for two reasons:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Only one copy of the message will be stored on each Usenet server rather than two.</p></li><li class="listitem"><p>Usenet participants who happen to read both groups won't see the message twice.</p></li></ul></div><p>However, cross-posting to very large numbers of newsgroups is usually considered disruptive and a breach of Usenet etiquette.</p></div></div></div>
<div class="sect1" title="Usenet Message Format and Special Headers"><div class="titlepage"><div><div><h1 class="title"><a id="usenet_message_format_and_special_header"/>Usenet Message Format and Special Headers</h1></div></div></div><p>Usenet is designed to permit users to exchange information in the form of messages that are sent from one computer to another. As is necessary with any message-based networking application, all Usenet client software and server software agree to use a common <a class="indexterm" id="idx-CHP-85-3087"/><span class="emphasis"><em>message format</em></span>. This ensures that all devices and programs are able to interpret all Usenet articles in a consistent manner.</p><p>While Usenet was created as an alternative to email, and there are obviously differences in how each treats messages, there are also many similarities. Both are text-oriented messaging systems with similar needs for communicating content and control information. The creators of Usenet realized that there would be many advantages to basing the Usenet message format on the one used for email, rather than creating a new format from scratch. The email message format was already widely used, and adopting it for Usenet would save implementation time and effort. It would also enhance compatibility between email and Usenet messages, allowing software designed to process or display email to also work with Usenet articles. For this reason, the Usenet message format was defined based on the RFC 822 standard for email messages (introduced in <a class="xref" href="ch76.html" title="Chapter 76. TCP/IP ELECTRONIC MAIL MESSAGE FORMATS AND MESSAGE PROCESSING: RFC 822 AND MIME">Chapter 76</a>).</p><p>RFC 822 messages begin with a set of <span class="emphasis"><em>headers</em></span> that contain control and descriptive information about the message, followed by a blank line and then the message <span class="emphasis"><em>body</em></span>, which contains the actual content.</p><p>One important attribute of the RFC 822 standard is the ability to define custom headers that add to the regular set of headers defined in the standard itself. Usenet articles require some types of information not needed by email, and these can be included in specially defined headers while still adhering to the basic RFC 822 format. At the same time, headers specific to email that are not needed for Usenet can be omitted. Thus, there is no structural difference at all between a Usenet article and an email message. They differ only in the kinds of headers they contain and the values for those headers. For example, a Usenet message will always contain a header specifying the newsgroup(s) to which the article is being posted, but will not carry a "To:" line as an email message would.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-510"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> Usenet articles use the same RFC 822 message format as email messages. The only difference between a Usenet article and an email message is in the header types and values used in each.</p></div><div class="sect2" title="Usenet Header Categories and Common Headers"><div class="titlepage"><div><div><h2 class="title"><a id="usenet_header_categories_and_common_head"/>Usenet Header Categories and Common Headers</h2></div></div></div><p>All Usenet headers are defined according to the standard header format specified in RFC 822: &lt;<span class="emphasis"><em>header name</em></span>&gt;: &lt;<span class="emphasis"><em>header value</em></span>&gt;. As with email messages, headers may extend onto multiple lines, following the indenting procedure described in the RFC 822 standard.</p><p>The current standard for Usenet messages, RFC 1036, describes the header types for Usenet messages. The headers are divided into two categories: <span class="emphasis"><em>mandatory</em></span> headers (see <a class="xref" href="ch85s03.html#usenet_mandatory_headers" title="Table 85-2. Usenet Mandatory Headers">Table 85-2</a>) and <span class="emphasis"><em>optional</em></span> headers (see <a class="xref" href="ch85s03.html#usenet_optional_headers" title="Table 85-3. Usenet Optional Headers">Table 85-3</a>). Some are the same as headers of the equivalent name used for email, some are similar to email headers but used in a slightly different way, and others are unique to Usenet.</p><div class="table"><a id="usenet_mandatory_headers"/><p class="title">Table 85-2. Usenet Mandatory Headers</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Usenet Mandatory Headers"><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Header Name</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>From:</p></td><td style="border-bottom: 0.5pt solid ; "><p>The email address of the user sending the message, as for email.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Date:</p></td><td style="border-bottom: 0.5pt solid ; "><p>The date and time that the message was originally posted to Usenet. This is usually the date/time that the user submitted the article to his or her local NNTP server.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroups:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Indicates the newsgroup or set of newsgroups to which the message is being posted. Multiple newsgroups are specified by separating them with a comma; for example: Newsgroups: news.onegroup,rec.secondgroup.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Subject:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Describes the subject or topic of the message. Note that this header is mandatory on Usenet despite being optional for email; it is important because it is used by readers to decide what messages to open.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message-ID:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Provides a unique code for identifying a message; normally generated when a message is sent. The message ID is very important in Usenet, arguably more so than in email. The reason is that delivery of email is performed based on recipient email addresses, while the propagation of Usenet messages is controlled using the message ID header.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>Path:</p></td><td style=""><p>An informational field that shows the path of servers that a particular copy of a message followed to get to the server where it is being read. Each time a server forwards a Usenet article, it adds its own name to the list in the Path header. The entries are usually separated by exclamation points. For example, if a user on Usenet Server A posts a message, and it is transported from Server A to Server G, then Server X, then Server F, and finally to Server Q, where a second user reads it, the person on Server Q would see something like this in the Path header: "Q!F!X!G!A."</p></td></tr></tbody></table></div></div><div class="table"><a id="usenet_optional_headers"/><p class="title">Table 85-3. Usenet Optional Headers</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Usenet Optional Headers"><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-85-3088"/>Header Name</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Reply-To:</p></td><td style="border-bottom: 0.5pt solid ; "><p>It is possible to reply back to a Usenet article author using email, which by default, goes to the address in the From: line. If this header is present, the address it contains is used instead of the default From: address.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Sender:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Indicates the email address of the user who is sending the message, if different from the message originator. This is functionally the same as the Sender: header in email messages, but is used in a slightly different way. Normally, when a Usenet message is posted, the sender's email address is automatically filled in to the From: line. If the user manually specifies a different From: line, the address from which the message was actually sent is usually included in the Sender: line. This is used to track the true originating point of articles.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Followup-To:</p></td><td style="border-bottom: 0.5pt solid ; "><p>A reply to a Usenet message is usually made back to Usenet itself and is called a follow-up. By default, a follow-up goes to the newsgroup(s) specified in the original message's Newsgroups: header. However, if the Followup-To: header is included, follow-ups to that message go to the newsgroups specified in the Followup-To: header instead. This header is sometimes used to route replies to a message to a particular group. Note, however, that when a user replies to a message, this field controls only what appears in the new message's Newsgroups: line by default. The user can override the Newsgroups: header manually.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Expires:</p></td><td style="border-bottom: 0.5pt solid ; "><p>All Usenet messages are maintained on each server for only a certain period of time, due to storage limitations. The expiration interval for each newsgroup is controlled by the administrator of each site. If present, this line requests a different expiration for a particular message; it is usually used only for special articles. For example, if a weekly announcement is posted every Monday morning, each article might be set to expire the following Monday morning, to make sure that people see the most current version.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>References:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Lists the message IDs of prior messages in a conversation. For example, if someone posts a question to a newsgroup with message ID AA207, and a reply to that message is made, the software will automatically insert the line "References: AA207" into the reply. This is used by software to group together articles into conversations (called <span class="emphasis"><em>threads</em></span>) to make it easier to follow discussions on busy newsgroups.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Control:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Indicates that the article is a control message and specifies a control action to be performed, such as creating a new newsgroup.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Distribution:</p></td><td style="border-bottom: 0.5pt solid ; "><p>By default, most messages are propagated on Usenet worldwide. If specified, this line restricts the distribution of a message to a smaller area, either geographical or organizational.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Organization:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Describes the organization to which the article sender belongs. Often filled in automatically with the name of the user's Internet service provider (ISP).</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Keywords:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Contains a list of comma-separated keywords that may be of use to the readers of the message. Keywords can be useful when searching for messages on a particular subject matter. This header is not often used.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Summary:</p></td><td style="border-bottom: 0.5pt solid ; "><p>A short summary of the message. This is rarely used in practice.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Approved:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Added by the moderator of a moderated newsgroup to tell the Usenet software that the message has been approved for posting.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Lines:</p></td><td style="border-bottom: 0.5pt solid ; "><p>A count of the number of lines in the message.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>Xref:</p></td><td style=""><p>While Usenet articles are identified by message ID, they are also given a number by each Usenet server as they are received. These article numbers, which differ from one system to the next, are usually listed in this cross-reference header. This information is used when a message is cross-posted to multiple groups. In that case, as soon as a user reads the message in one group, it is marked as having been read in all the others where it was posted. This way, if the user later reads one of those other groups, that user will not see the message again.</p></td></tr></tbody></table></div></div></div><div class="sect2" title="Additional Usenet Headers"><div class="titlepage"><div><div><h2 class="title"><a id="additional_usenet_headers"/>Additional Usenet Headers</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3089"/>Usenet messages may also contain additional headers, just as is the case with email messages. Some of these are custom headers included by individual users to provide extra information about an article. Others are used in many current Usenet articles and have become almost de facto standard headers through common use. Many of these custom headers are preceded by <span class="emphasis"><em>X-</em></span>, indicating that they are experimental or extra headers.</p><p>Some of the more frequently encountered additional Usenet headers are shown in <a class="xref" href="ch85s03.html#common_additional_usenet_headers" title="Table 85-4. Common Additional Usenet Headers">Table 85-4</a>.</p><div class="table"><a id="common_additional_usenet_headers"/><p class="title">Table 85-4. Common Additional Usenet Headers</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Common Additional Usenet Headers"><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Header Name</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>NNTP-Posting-Host:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Specifies the IP address or the DNS domain name of the host used to originally post the message. This is usually either the address of the client that the author used for posting the message or the sender's local NNTP server.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>User-Agent: (or) X-Newsreader:</p></td><td style="border-bottom: 0.5pt solid ; "><p>The name and version number of the software used to post the message.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>X-Trace:</p></td><td style="border-bottom: 0.5pt solid ; "><p>Provides additional information that can be used to trace the message.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>X-Complaints-To:</p></td><td style=""><p>An email address to use to report abusive messages. This header is now included automatically by many ISPs.</p></td></tr></tbody></table></div></div></div><div class="sect2" title="Usenet MIME Messages"><div class="titlepage"><div><div><h2 class="title"><a id="usenet_mime_messages"/>Usenet MIME Messages</h2></div></div></div><p>Since <a class="indexterm" id="idx-CHP-85-3090"/>Usenet follows the RFC 822 standard, Multipurpose Internet Mail Extensions (MIME) can be used to format Usenet messages. When this is done, you will see the usual MIME headers (such as MIME-Version, Content-Type, and so forth) in the message.</p><p>Note that the use of MIME in Usenet messages is somewhat controversial. Some newsreaders are not MIME-compliant and make a mess when trying to display some of these messages, and many Usenet veterans object to the use of anything but plain text in Usenet messages. Despite this, <a class="indexterm" id="idx-CHP-85-3091"/>MIME messages are becoming more common, for better or worse.</p></div></div>
<div class="sect1" title="NNTP Overview and General Operation"><div class="titlepage"><div><div><h1 class="title"><a id="nntp_overview_and_general_operation"/>NNTP Overview and General Operation</h1></div></div></div><p><a class="indexterm" id="idx-CHP-85-3092"/>As I explained earlier in this chapter, Usenet started out as an informal network of UNIX computers using dial-up UUCP connections to transmit messages between servers. This arrangement arose out of necessity, and it worked fairly well, though it had a number of problems. Once the Internet became widely used in the 1980s, it provided the ideal opportunity for a more efficient means of distributing Usenet articles. NNTP was developed as a special TCP/IP protocol for sending these messages. Now NNTP carries billions of copies of Usenet messages from computer to computer every day.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-511"/>Tip</h3><p><span class="strong"><strong>BACKGROUND INFORMATION</strong></span> <span class="emphasis"><em>NNTP is similar to the Simple Mail Transfer Protocol (SMTP) in many ways, including its basic operation and command set and reply format. You may find the information about NNTP easier to understand if you are familiar with SMTP, covered in <a class="xref" href="ch77.html" title="Chapter 77. TCP/IP ELECTRONIC MAIL DELIVERY PROTOCOL: THE SIMPLE MAIL TRANSFER PROTOCOL (SMTP)">Chapter 77</a>.</em></span></p></div><p>Usenet began as a <span class="emphasis"><em>logical</em></span> internetwork of cooperating hosts that contacted each other directly. In the early Usenet, a user would post a message to her local server, where it would stay until that server either contacted or was contacted by another server. The message would then be transferred to the new server, where it would stay until the second server contacted a third one, and so on. This transport mechanism was functional, but seriously flawed in a number of ways.</p><p>Servers were not continually connected to each other; they could communicate only by making a telephone call using an analog modem. Thus, messages would often sit for hours before they could be propagated. Modems in those days were also very slow by today's standards—2400 bits per second or even less—so it took a long time to copy a message from one server to another. Worst of all, unless two sites were in the same city, these phone calls were long distance, making them quite expensive.</p><p>Why was this system used despite all of these problems? The answer is simply because there was no alternative. In the late 1970s and early 1980s, there was no Internet as we know it, and no other physical infrastructure existed to link Usenet sites together. It was either use UUCP over telephone lines or nothing.</p><p>That all changed as the fledgling ARPAnet grew into the modern Internet. As the Internet expanded, more and more sites connected to it, including many sites that were participating in Usenet. Once both sites in an exchange were on the Internet, it was an easy decision to use the Internet to send Usenet articles, rather than relying on slow, expensive phone calls. Over time, more and more Usenet sites joined the Internet, and it became clear that just as email had moved from UUCP to the TCP/IP Internet, the future of Usenet was on the Internet as well.</p><p>The shifting of Usenet from UUCP connections to TCP/IP internetworking meant that some rethinking was required as to how Usenet articles were moved from server to server. On the Internet, Usenet was just one of many applications, and the transfer of messages had to be structured using TCP or the User Datagram Protocol (UDP). Thus, like other applications, Usenet required an application-level protocol to describe how to carry Usenet traffic over TCP/IP. Just as Usenet had borrowed its message format from email's RFC 822, it made sense to model its message delivery protocol on the one used by email: <a class="indexterm" id="idx-CHP-85-3093"/>SMTP. The result was the creation of NNTP, published as RFC 977 in February 1986.</p><p>The general operation of NNTP is indeed very similar to that of SMTP. NNTP uses TCP, with servers listening on well-known TCP port 119 for incoming connections, either from client hosts or other NNTP servers. As in SMTP, when two servers communicate using NNTP, the one that initiates the connection plays the role of client for that exchange.</p><p>After a connection is established, communication takes the form of commands sent by the client to the server and replies returned from the server to the client device. NNTP commands are sent as plain ASCII text, just like those used by SMTP, the File Transfer Protocol (FTP), the Hypertext Transfer Protocol (HTTP), and other protocols. NNTP responses take the form of three-digit reply codes as well as descriptive text, again just like SMTP (which, in turn, borrowed this concept from FTP).</p><p>NNTP was designed to be a comprehensive vehicle for transporting Usenet messages. It is most often considered as a delivery protocol for moving Usenet articles from one server to another, but it is also used for connections from client hosts to Usenet servers for posting and reading messages. Thus, the NNTP command set is quite extensive and includes commands to handle communications between servers and between clients and servers. For message propagation, a set of commands allows a server to request new articles from another server or to send new articles to another server. For message posting and access, commands allow a client to request lists of new newsgroups and messages, and to retrieve messages for display to a user.</p><p>The commands defined in RFC 977 were the only official ones for over a decade. However, even as early as the late 1980s, implementers of NNTP server and client software were adding new commands and features to make NNTP both more efficient and useful to users. These <span class="emphasis"><em>NNTP extensions</em></span> were eventually documented in RFC 2980, published in 2000. I describe them in more detail later in this chapter, in the "NNTP Commands and Command Extensions" section.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-512"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> The Network News Transfer Protocol (NNTP) is the protocol used to implement message communication in modern Usenet. It is used for two primary purposes: to propagate messages between NNTP servers and to permit NNTP clients to post and read articles. It is a stand-alone protocol, but shares many characteristics with email's Simple Mail Transfer Protocol (SMTP).</p></div><p>NNTP is used for all of the transfer steps in the modern Usenet communication process. However, NNTP is most often associated with the process of Usenet article <span class="emphasis"><em>propagation</em></span>. This is arguably the most important function of NNTP: providing an efficient means of moving large volumes of Usenet articles from one <a class="indexterm" id="idx-CHP-85-3094"/>server to another. It is thus a sensible place to start looking at the protocol.</p></div>
<div class="sect1" title="NNTP Interserver Communication Process: News Article Propagation"><div class="titlepage"><div><div><h1 class="title"><a id="nntp_interserver_communication_process_n"/>NNTP Interserver Communication Process: News Article Propagation</h1></div></div></div><p><a class="indexterm" id="idx-CHP-85-3095"/><a class="indexterm" id="idx-CHP-85-3096"/>To understand how NNTP propagation works, we must begin with a look at the way that the modern Usenet network itself is organized. Usenet sites are now all on the Internet, and theoretically, any NNTP server can contact any other to send and receive Usenet articles. However, it would be ridiculous to have a new article submitted to a particular server need to be sent via separate NNTP connections to each and every other NNTP server. For this reason, the Usenet logical network continues to be very important, even in the Internet era.</p><div class="sect2" title="The Usenet Server Structure"><div class="titlepage"><div><div><h2 class="title"><a id="the_usenet_server_structure"/>The Usenet Server Structure</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3097"/>In theory, all that is required of the Usenet structure is that each site be connected to at least one other site in some form. The logical network could be amorphous and without any formal structure at all, as long as every site could form a path through some sequence of intermediate servers to each other one. However, the modern Usenet is very large, with thousands of servers and gigabytes of articles being posted every day. This calls for a more organized structure for distributing news.</p><p>For this reason, the modern Usenet logical network is structured loosely in a hierarchy. A few large Internet service providers (ISPs) and big companies with high-speed Internet connections and large servers are considered to be at the top of the hierarchy, in what is sometimes called the Usenet <a class="indexterm" id="idx-CHP-85-3098"/><span class="emphasis"><em>backbone</em></span>. Smaller organizations connect to the servers run by these large organizations; these organizations are considered to be <a class="indexterm" id="idx-CHP-85-3099"/><span class="emphasis"><em>downstream</em></span> from the backbone groups. In turn, still smaller organizations may connect further downstream from the ones connected to the large organizations.</p><p>This hierarchical structure means that most Usenet servers maintain a direct connection only to their upstream neighbor and to any downstream sites to which they provide service. A server is said to receive a <span class="emphasis"><em>news feed</em></span> from its upstream connection, since that is the place from which it will receive most of its news articles. It then provides a news feed to all the servers downstream from it. I illustrated this structure earlier in <a class="xref" href="ch85s02.html#usenet_network_news_communication_model_" title="Figure 85-1. Usenet (network news) communication model This figure illustrates the method by which messages are created, propagated, and read using NNTP on modern Usenet; it is similar in some respects to the email model diagram (Figure 74-1 in Chapter 74). In this example, a message is created by the poster, Ellen, and read by a reader, Jane. The process begins with Ellen creating a message in an editor and posting it. Her NNTP client sends it to her local NNTP server. It is then propagated from that local server to adjacent servers, usually including its upstream server, which is used to send the message around the Internet. Other NNTP servers receive the message, including the one upstream from Jane's local server. It passes the message to Jane's local server, and Jane accesses and reads the message using an NNTP client. Jane could respond to the message; in which case, the same process would repeat, but going in the opposite direction, back to Ellen (and also back to thousands of other readers, not shown here).">Figure 85-1</a>.</p><p>As an example, suppose Company A runs a large Usenet server called Largenews that is connected to the backbone. Downstream from this server is the NNTP server Mediumnews. That server provides service to the server named Smallnews. If a user posts an article to Mediumnews, it will be placed on that server immediately. That server will send the article downstream, to Smallnews, so that it can be read by that server's users. Mediumnews will also, at some point, send the article to Largenews. From Largenews, the message will be distributed to other backbone sites, which will pass the message down to their own downstream sites. In this way, all sites eventually get a copy of the message, even though Mediumnews needs to connect directly to only two other servers.</p><p>The term used to describe how news is propagated with NNTP is <span class="emphasis"><em>flooding</em></span>. This is because of the way that a message begins in one server and floods outward from it, eventually reaching the backbone sites, and then going down all the downstream "rivers" to reach every site on Usenet.</p><p>Even though I described the logical Usenet network as a hierarchy, it is not a strict hierarchy. For redundancy, many NNTP servers maintain connections to multiple other servers to ensure that news propagates quickly. The transmission of articles can be controlled by looking at message IDs to avoid duplication of messages that may be received simultaneously by one server from more than one neighbor.</p></div><div class="sect2" title="Basic NNTP Propagation Methods"><div class="titlepage"><div><div><h2 class="title"><a id="basic_nntp_propagation_methods"/>Basic NNTP Propagation Methods</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3100"/>Now let's look at how messages are actually propagated between servers using NNTP. There are two techniques by which this can be done:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>In the <span class="emphasis"><em>push model</em></span>, as soon as a server receives a new message, it immediately tells its upstream and downstream neighbors about the message and asks them if they want a copy of it.</p></li><li class="listitem"><p>In the <span class="emphasis"><em>pull model</em></span>, servers do not offer new articles to their neighbors. The neighboring servers must ask for a list of new messages if they want to see what has arrived since the last connection was established, and then request that the new messages be sent to them.</p></li></ul></div><p>Both techniques have advantages and disadvantages, but pushing is the model most commonly used today.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-513"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> One important role that NNTP plays is its propagation of articles between Usenet servers, which is what makes the entire system possible. Two models are used for <a class="indexterm" id="idx-CHP-85-3101"/>article propagation: the push model, in which a server that receives a new message offers it to connected servers immediately, and the pull model, where servers that receive new messages hold them until they are requested by other servers. The push model is usually preferred since it allows for quicker communication of messages around the system.</p></div><div class="sect3" title="Article Propagation Using the Push Model"><div class="titlepage"><div><div><h3 class="title"><a id="article_propagation_using_the_push_model"/>Article Propagation Using the Push Model</h3></div></div></div><p>Using the push model, when the administrators of an NNTP server establish a service relationship with an upstream Usenet service provider, they furnish the provider with a list of newsgroups that the downstream server wants to carry. Whenever a new article arrives at the upstream server within that list of groups, it is automatically sent to the downstream site. This saves the downstream server from constantly having to ask whether anything has arrived.</p><p>In the classic NNTP protocol as defined in RFC 977, the exchange of articles is based on the push model and performed using the IHAVE command. Returning to the example in the previous section, suppose three new messages arrive at the Largenews server. It would establish an NNTP connection to the Mediumnews server and use IHAVE to provide the message IDs of each of the three new messages, one at a time. (NNTP commands are described later in this chapter.) The Mediumnews server would respond to each one, indicating whether or not it already had that message. If not, Largenews would send it the message. An example of an article transaction using the push model of propagation is illustrated in <a class="xref" href="ch85s05.html#nntp_article_propagation_using_the_push_" title="Figure 85-3. NNTP article propagation using the push model This example shows how Usenet articles are moved between servers using the conventional push model of propagation. Here, the device acting as an NNTP client (which may, in fact, be an NNTP server) has two messages available to offer to the server. It sends the IHAVE command specifying the message ID of the first message, but the server already has that message, so it sends a 435 (Do Not Send) reply. The client then issues an IHAVE with the second message ID. The server wants this one, so it sends a 335 reply. The client sends the Usenet message, ending with a single period on a line by itself. The server indicates that it received the message, and the client, finished with its transactions, quits the session.">Figure 85-3</a>.</p><div class="figure"><a id="nntp_article_propagation_using_the_push_"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject1_d1e93022"/><img alt="NNTP article propagation using the push model This example shows how Usenet articles are moved between servers using the conventional push model of propagation. Here, the device acting as an NNTP client (which may, in fact, be an NNTP server) has two messages available to offer to the server. It sends the IHAVE command specifying the message ID of the first message, but the server already has that message, so it sends a 435 (Do Not Send) reply. The client then issues an IHAVE with the second message ID. The server wants this one, so it sends a 335 reply. The client sends the Usenet message, ending with a single period on a line by itself. The server indicates that it received the message, and the client, finished with its transactions, quits the session." src="httpatomoreillycomsourcenostarchimages288321.png.jpg"/></div></div><p class="title">Figure 85-3. NNTP article propagation using the push model This example shows how Usenet articles are moved between servers using the conventional push model of propagation. Here, the device acting as an NNTP client (which may, in fact, be an NNTP server) has two messages available to offer to the server. It sends the IHAVE command specifying the message ID of the first message, but the server already has that message, so it sends a 435 (Do Not Send) reply. The client then issues an IHAVE with the second message ID. The server wants this one, so it sends a 335 reply. The client sends the Usenet message, ending with a single period on a line by itself. The server indicates that it received the message, and the client, finished with its transactions, quits the session.</p></div><p><a class="indexterm" id="idx-CHP-85-3102"/>The main advantage of this technique is that it ensures that a server is not sent a duplicate copy of a message that it already has. The problem with it in modern Usenet is that it is slow, because the server must respond to the IHAVE command before the message or the next command can be sent by the client.</p></div><div class="sect3" title="Improving Propagation Efficiency with Streaming Mode"><div class="titlepage"><div><div><h3 class="title"><a id="improving_propagation_efficiency_with_st"/>Improving Propagation Efficiency with Streaming Mode</h3></div></div></div><p>One of the more important NNTP extensions is <a class="indexterm" id="idx-CHP-85-3103"/><span class="emphasis"><em>streaming mode</em></span>, which changes how news pushing is done. (NNTP command extensions are described later in this chapter.) When this mode is enabled, the client machine uses the CHECK command instead of IHAVE to ask the server if it wants a particular message. The server responds to indicate if it wants the message; if it does, the client sends the message with the TAKETHIS command.</p><p>The benefit of CHECK/TAKETHIS is that the client does not need to wait for a reply to CHECK before sending the next command. While the client is waiting for a reply to the first CHECK command, it can do something else, like sending the next CHECK command, allowing commands to be streamed for greater efficiency. So, the client could send a CHECK command for the first new message, then a CHECK for the second, while waiting for a reply from the server to the first one. Many CHECK commands could be sent in a stream, and then TAKETHIS commands sent for each reply received to CHECK commands sent earlier indicating that the message was wanted by the server.</p></div><div class="sect3" title="Article Propagation Using the Pull Model"><div class="titlepage"><div><div><h3 class="title"><a id="article_propagation_using_the_pull_model"/>Article Propagation Using the Pull Model</h3></div></div></div><p><a class="indexterm" id="idx-CHP-85-3104"/>The pull model is implemented using the NEWNEWS and ARTICLE commands. The client connects to the server and sends the NEWNEWS command with a date specifying the date and time that it last checked for new messages. The server responds with a set of message IDs for new articles that have arrived since that date. The client then requests each new message using the ARTICLE command.</p><p>Note that the push and pull models can be combined in a single session. A client can connect to a server, use NEWNEWS to check for new messages on that server, and then IHAVE or CHECK inform the server about new messages the client wants to send. In practice, it is more common for only one or the other of the models to be used between a pair of servers for any given exchange.</p><p>In addition to propagating new messages, NNTP is also used to allow servers to communicate information about new newsgroups that have been created. This is done using the NEWGROUPS command, which is specified with a date and time like NEWNEWS. In response, the server sends to the client a list of new newsgroups that have been created since the specified date and time.</p></div></div></div>
<div class="sect1" title="NNTP Client-Server Communication Process: News Posting and Access"><div class="titlepage"><div><div><h1 class="title"><a id="nntp_client-server_communication_process"/>NNTP Client-Server Communication Process: News Posting and Access</h1></div></div></div><p><a class="indexterm" id="idx-CHP-85-3105"/><a class="indexterm" id="idx-CHP-85-3106"/>One critical area where NNTP differs from its progenitor, SMTP, is that NNTP is not just used for interserver communication. It is also used for the initial posting of Usenet messages, as well as reading the messages. In fact, the majority of NNTP commands deals with the interaction between user client machines and NNTP servers, not communication between servers.</p><p>An NNTP client is any software program that knows the NNTP protocol and is designed to provide user access to Usenet. NNTP clients are usually called <span class="emphasis"><em>newsreaders</em></span>, and they provide two main capabilities to a user: <span class="emphasis"><em>posting</em></span> and <span class="emphasis"><em>reading</em></span> Usenet messages. Usenet newsreaders exist for virtually all hardware and software platforms, and they range greatly in terms of capabilities, user interface, and other characteristics. Most people today use a Usenet newsreader on a client computer that must make NNTP connections to a separate NNTP server to read and post news. These programs are analogous to email clients, and, in fact, many email clients also function as NNTP clients.</p><div class="sect2" title="News Posting, Access, and Reading"><div class="titlepage"><div><div><h2 class="title"><a id="news_posting_access_and_reading"/>News Posting, Access, and Reading</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3107"/><a class="indexterm" id="idx-CHP-85-3108"/><a class="indexterm" id="idx-CHP-85-3109"/>Posting a Usenet message is the first step in the overall Usenet communication process (although many Usenet articles are actually replies to other articles, so it's a bit of a chicken-and-egg situation). Article posting is quite straightforward with NNTP. The client establishes a connection to the server and issues the POST command. If the server is willing to accept new articles, it replies with a prompt for the client to send it the article. The article is then transmitted by the client to the server. Some newsreaders may batch new articles, so they can be sent in a single NNTP session, rather than submitting them one at a time.</p><p>Newsreaders also establish an NNTP connection to a server to read Usenet articles. NNTP provides a large number of commands to support a variety of different article access and retrieval actions that may be taken by a user. The first step in reading is sometimes to examine the list of available newsgroups. Using the LIST command, the client requests from the server a list of the newsgroups available for reading and posting. RFC 977 defines the basic LIST command, which returns a list of all groups to the client. RFC 2980 defines numerous extensions to the command to allow a client to retrieve only certain types of information about groups on the server. Since the number of Usenet newsgroups is so large today, this listing of newsgroups is usually skipped unless the user specifically requests it.</p><p>The next step in Usenet message access is typically to select a newsgroup to read from the list of groups available. Again, since there are so many groups today, most newsreaders allow a user to search for a group name using a pattern or partial name string. The GROUP command is then sent to the server with the name of the selected group. The server returns the first and last current article numbers for the group to the client.</p><p>Messages are identified in two ways: one absolute and the other site-specific. The article's message ID is a fixed identifier that can be used to uniquely represent it across Usenet; this is what is used in interserver communication to determine whether each site has a copy of a given message. In contrast, <span class="emphasis"><em>article numbers</em></span> are server-specific; they represent the numbers assigned to those articles as they arrived at that server and are used as a shorthand to more easily refer to articles in a newsgroup. Thus, the same message will have a different article number on each NNTP server. Article numbers are used for convenience, since they are much shorter than message IDs. During a session, the NNTP server also maintains a current article pointer, which can be used for stepping sequentially through a newsgroup.</p></div><div class="sect2" title="News Access Methods"><div class="titlepage"><div><div><h2 class="title"><a id="news_access_methods"/>News Access Methods</h2></div></div></div><p>There are several different ways that the newsreader can access messages in a group, depending on how it is programmed and what the user of the software wants. The <a class="indexterm" id="idx-CHP-85-3110"/>news access methods include the following:</p><p><span class="strong"><strong><a class="indexterm" id="idx-CHP-85-3111"/>Full Newsgroup Retrieval</strong></span> The brute-force technique is for the client to simply request that the server send it all the messages in the group. The client issues the ARTICLE command to select the first current message in the group, using the first article number returned by the GROUP command. This sets the server's internal pointer for the session to point to the first article, so it can be retrieved. The NEXT command is then used to advance the pointer to the next message, and the ARTICLE command is used to retrieve it. This continues until the entire group has been read. <a class="xref" href="ch85s06.html#nntp_full_newsgroup_retrieval_process_th" title="Figure 85-4. NNTP full newsgroup retrieval process There are many ways that an NNTP client can access and read Usenet messages on a server. One common method is to retrieve the entire contents of a newsgroup. In this example, the client uses the GROUP command to select the newsgroup comp.protocols.tcp-ip for reading; the server responds with a 211 (Group Selected) reply, which includes important statistics about the group. The client uses the ARTICLE command with the number of the first article in the group, 177, to read it from the server. The server then sends the message line by line, ending it with a single period on a line. The client uses the NEXT command to tell the server to advance its internal article pointer to the next message, which often will not be the next consecutive number after the one just read; here it is 179. The client can then read that message by sending the ARTICLE command by itself. Since no parameters are given, the server returns the current message (179).">Figure 85-4</a> illustrates the process. The retrieved messages are stored by the newsreader and available for instant access by the user. This method is most suitable for relatively small newsgroups and/or users with fast Internet connections.</p><p><span class="strong"><strong><a class="indexterm" id="idx-CHP-85-3112"/>Newsgroup Header Retrieval</strong></span> Since downloading an entire newsgroup is time-consuming, many newsreaders compromise by downloading the headers of all messages instead of the full message. The process is the same as for full newsgroup retrieval, but the HEAD command is used to retrieve just an article's headers. This takes less time than retrieving each message in its entirety using the ARTICLE command. The XHDR command extension can also be used, if the server supports it, to more efficiently retrieve only a subset of the headers for the messages, such as the subject line and author.</p><p><span class="strong"><strong>Individual Article Retrieval</strong></span> It is also possible to retrieve a single message from a group, using the ARTICLE command and specifying the article's message identifier.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-514"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> While NNTP is best known for its role in interserver propagation, it is also used by Usenet clients to write and read articles. Different commands provide flexibility in how articles can be read by a client device. A client can retrieve an entire newsgroup, only a set of newsgroup headers, or individual articles. Other commands also support various administrative functions.</p></div></div><div class="sect2" title="Other Client/Server Functions"><div class="titlepage"><div><div><h2 class="title"><a id="other_clientserver_functions"/>Other Client/Server Functions</h2></div></div></div><p>In addition to reading and posting, NNTP includes commands to support other miscellaneous tasks that a Usenet user may wish to perform. The client can ask the server for help information by using the HELP command or get a list of new newsgroups by using the NEWGROUPS command.</p><p>Most modern newsreaders include capabilities that go far beyond the basic posting and reading functions previously described. Most maintain their own sets of configuration files that allow a user to maintain a set of favorite subscribed newsgroups, rather than needing to choose a group to read from the master list each time Usenet is accessed. Newsreaders also keep track of which articles have been read by a user in each subscribed newsgroup, so users do not need to wade through a whole newsgroup to see new messages that have been posted.</p><div class="figure"><a id="nntp_full_newsgroup_retrieval_process_th"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject1_d1e93162"/><img alt="NNTP full newsgroup retrieval process There are many ways that an NNTP client can access and read Usenet messages on a server. One common method is to retrieve the entire contents of a newsgroup. In this example, the client uses the GROUP command to select the newsgroup comp.protocols.tcp-ip for reading; the server responds with a 211 (Group Selected) reply, which includes important statistics about the group. The client uses the ARTICLE command with the number of the first article in the group, 177, to read it from the server. The server then sends the message line by line, ending it with a single period on a line. The client uses the NEXT command to tell the server to advance its internal article pointer to the next message, which often will not be the next consecutive number after the one just read; here it is 179. The client can then read that message by sending the ARTICLE command by itself. Since no parameters are given, the server returns the current message (179)." src="httpatomoreillycomsourcenostarchimages288323.png.jpg"/></div></div><p class="title">Figure 85-4. NNTP full newsgroup retrieval process There are many ways that an NNTP client can access and read Usenet messages on a server. One common method is to retrieve the entire contents of a newsgroup. In this example, the client uses the GROUP command to select the newsgroup comp.protocols.tcp-ip for reading; the server responds with a 211 (Group Selected) reply, which includes important statistics about the group. The client uses the ARTICLE command with the number of the first article in the group, 177, to read it from the server. The server then sends the message line by line, ending it with a single period on a line. The client uses the NEXT command to tell the server to advance its internal article pointer to the next message, which often will not be the next consecutive number after the one just read; here it is 179. The client can then read that message by sending the ARTICLE command by itself. Since no parameters are given, the server returns the current message (179).</p></div></div><div class="sect2" title="Article Threading"><div class="titlepage"><div><div><h2 class="title"><a id="article_threading"/>Article Threading</h2></div></div></div><p>One particularly useful enhancement to basic Usenet article reading is <a class="indexterm" id="idx-CHP-85-3113"/><span class="emphasis"><em>threading</em></span>. This feature allows a <a class="indexterm" id="idx-CHP-85-3114"/>newsreader to display articles not strictly in either alphabetical or chronological order, but rather grouped into conversations using the information in the articles' References headers. Threading is especially useful in busy newsgroups, as it allows users to see all the articles in a particular discussion at once, rather than trying to juggle messages from many conversations simultaneously.</p><p>A problem with threading is that it takes a long time for a newsreader to sift through all those References lines and construct the article threads. To speed up this process, many servers now cache extra threading or overview information for newsgroups, which can be retrieved by the client to save time when a newsgroup is opened. This is done using the XTHREAD or XOVER NNTP command extensions.</p></div></div>
<div class="sect1" title="NNTP Commands and Command Extensions"><div class="titlepage"><div><div><h1 class="title"><a id="nntp_commands_and_command_extensions"/>NNTP Commands and Command Extensions</h1></div></div></div><p>One of the great strengths of the open, cooperative process used to develop Internet standards is that new protocols are usually designed by building on older ones. This saves development time and effort, and promotes compatibility between technologies. As I explained earlier in the chapter, NNTP was based in many ways on principles from SMTP; SMTP, in turn, borrowed ideas from earlier protocols: <a class="indexterm" id="idx-CHP-85-3115"/>Telnet and FTP. This legacy can be seen in the similarities between NNTP commands and those of these earlier protocols.</p><div class="sect2" title="Command Syntax"><div class="titlepage"><div><div><h2 class="title"><a id="command_syntax"/>Command Syntax</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3116"/>As in SMTP, all NNTP commands are ASCII text that are sent over the NNTP TCP connection to an NNTP server, from the device acting as the client (which may be a newsreader client or an NNTP server itself). These are standard text strings adhering to the Telnet Network Virtual Terminal (NVT) format, terminated by the two-character carriage return/line feed (CRLF) sequence. As is the case with SMTP and FTP, you can conduct an interactive session with an NNTP server by using Telnet to connect to it on port 119.</p><p>The basic syntax of an NNTP command is &lt;<span class="emphasis"><em>command-code</em></span>&gt; &lt;<span class="emphasis"><em>parameters</em></span>&gt;. Unlike SMTP, NNTP commands are not restricted to a length of four characters. The parameters that follow the command are separated by one or more space characters, and are used to provide necessary information to allow the server to execute the command. NNTP commands are not case-sensitive.</p></div><div class="sect2" title="Base Command Set"><div class="titlepage"><div><div><h2 class="title"><a id="base_command_set"/>Base Command Set</h2></div></div></div><p>The main NNTP specification, RFC 977, describes the base set of commands supported by NNTP clients and servers. They are not broken into categories, but rather listed alphabetically, as I have done in <a class="xref" href="ch85s07.html#nntp_base_commands" title="Table 85-5. NNTP Base Commands">Table 85-5</a>. (The details on how many of these commands are used for news article propagation and news posting/access were provided earlier in this chapter.)</p><div class="table"><a id="nntp_base_commands"/><p class="title">Table 85-5. NNTP Base Commands</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP Base Commands"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-85-3117"/>Command Code</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Parameters</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>ARTICLE</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Article</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID or server article number</p></td><td style="border-bottom: 0.5pt solid ; "><p>Tells the server to send the client a particular Usenet article. The article to be retrieved may be specified using either its absolute, universal message ID or its locally assigned article number. When the command is issued with an article number, this causes the server's internal message pointer to be set to the specified article. If the message pointer is already set to a particular article, the ARTICLE command can be issued without an article number, and the current message will be retrieved.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>HEAD</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Article Headers</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID or server article number</p></td><td style="border-bottom: 0.5pt solid ; "><p>Same as the ARTICLE command, but retrieves only the article's headers.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>BODY</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Article Body</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID or server article number</p></td><td style="border-bottom: 0.5pt solid ; "><p>Same as the ARTICLE command, but returns only the body of the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>STAT</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Article Statistics</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Server article number</p></td><td style="border-bottom: 0.5pt solid ; "><p>Conceptually the same as the ARTICLE command, but does not return any message text, only the message ID of the article. This command is usually used for setting the server's internal message pointer, so STAT is normally invoked only with an article number (and not a message ID).</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>GROUP</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Select Newsgroup</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup name</p></td><td style="border-bottom: 0.5pt solid ; "><p>Tells the server the name of the newsgroup that the client wants to access. Assuming the group specified exists, the server returns to the client the numbers of the first and last articles currently in the group, along with an estimate of the number of messages in the group. The server's internal article pointer is also set to the first message in the group.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>HELP</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Get Help Information</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Prompts the server to send the client help information, which usually takes the form of a list of valid <a class="indexterm" id="idx-CHP-85-3118"/>commands that the server supports.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>IHAVE</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Offer Article to Server</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID</p></td><td style="border-bottom: 0.5pt solid ; "><p>Used by the client in an NNTP session to tell the server that it has a new article that the server may want. The server will check the message ID provided and respond to the client, indicating whether or not it wants the client to send the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LAST</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Go to Last Message</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Tells the server to set its current article pointer to the last message in the newsgroup.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Newsgroups</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Asks the server to send a list of the newsgroups that it supports, along with the first and last article number in each group. The command as described in RFC 977 is simple, supporting no parameters and causing the full list of newsgroups to be sent to the client. NNTP command extensions significantly expand the syntax of this command, as described in the following section of this chapter.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>NEWGROUPS</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List New Newsgroups</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Date and time, and optional distribution specification</p></td><td style="border-bottom: 0.5pt solid ; "><p>Prompts the server to send a list of new newsgroups created since the date and time specified. The client may also restrict the command to return only new newsgroups within a particular regional distribution.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>NEWNEWS</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List New News Articles</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Date and time, and optional distribution specification</p></td><td style="border-bottom: 0.5pt solid ; "><p>Requests a list from the server of all new articles that have arrived since a particular date and time. Like the NEWGROUPS command, this may be restricted in distribution. The server responds with a list of message IDs of new articles.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>NEXT</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Go to Next Message</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Advances the server's current article pointer to the next message in the newsgroup.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>POST</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Post Article</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Tells the server that the client would like to post a new article. The server responds with either a positive or negative acknowledgment. Assuming that posting is allowed, the client then sends the full text of the message to the server, which stores it and begins the process of propagating it to other servers.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>QUIT</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>End Session</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Terminates the NNTP session. To be "polite," the client should issue this command prior to closing the TCP connection.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>SLAVE</p></td><td style="border-right: 0.5pt solid ; "><p>Set Slave Status</p></td><td style="border-right: 0.5pt solid ; "><p>None</p></td><td style=""><p>Intended for use in special configurations where one NNTP server acts as a subsidiary to others. It is not often used in practice.</p></td></tr></tbody></table></div></div><div class="tip" title="Tip"><h3 class="title"><a id="tip-515"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> The main NNTP standard defines a number of base <a class="indexterm" id="idx-CHP-85-3119"/>NNTP commands that are used by the device initiating an NNTP connection to accomplish article propagation, posting, and reading functions. NNTP commands consist of a command code and, optionally, parameters that specify how the command is to be carried out.</p></div></div><div class="sect2" title="NNTP Command Extensions"><div class="titlepage"><div><div><h2 class="title"><a id="nntp_command_extensions"/>NNTP Command Extensions</h2></div></div></div><p><a class="indexterm" id="idx-CHP-85-3120"/>The base command set described in RFC 977 was sufficient to enable client-server and interserver functionality, but in many ways, it was quite basic and limited in efficiency and usefulness. As Usenet grew larger and more popular in the late 1980s, NNTP needed changes to improve its usability. In 1991, work began on a formal revision to the NNTP standard, but was never completed. Despite this, many of the concepts from that effort were adopted informally in NNTP implementations in subsequent years. In addition, some Usenet software authors created their own nonstandard features to improve the protocol, and some of these features also became de facto standards through widespread adoption.</p><p>As a result, by the late 1990s, most Usenet software actually implemented variations of NNTP with capabilities far exceeding what was documented in the standard. Naturally, not all NNTP software supported the same extra features, leading to potential compatibility difficulties between servers and clients. RFC 2980, "Common NNTP Extensions," was published in October 2000 to formalize many of these extensions to the base NNTP standard as defined in RFC 977.</p><p>The NNTP extensions primarily consist of new NNTP commands that are added to the basic NNTP command set, as well as some minor changes to how other commands and functions of NNTP work. The extensions generally fall into three categories:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Extensions that improve the efficiency of NNTP message transport between servers</p></li><li class="listitem"><p>Extensions that make NNTP more effective for client message access</p></li><li class="listitem"><p>Miscellaneous extensions, which don't fall into either of the preceding groups</p></li></ul></div><div class="sect3" title="NNTP Transport Extensions"><div class="titlepage"><div><div><h3 class="title"><a id="nntp_transport_extensions"/>NNTP Transport Extensions</h3></div></div></div><p>The first group is called the NNTP <a class="indexterm" id="idx-CHP-85-3121"/><span class="emphasis"><em>transport extensions</em></span> and consists of a small group of related commands that are designed to improve interserver message propagation. Most of these implement NNTP's <span class="emphasis"><em>stream mode</em></span>, which provides a more effective way of moving large numbers of articles from one server to another, as described in the discussion of interserver communication earlier in this chapter. <a class="xref" href="ch85s07.html#nntp_transport_extensions-id001" title="Table 85-6. NNTP Transport Extensions">Table 85-6</a> describes the new <a class="indexterm" id="idx-CHP-85-3122"/>transport commands.</p><div class="table"><a id="nntp_transport_extensions-id001"/><p class="title">Table 85-6. NNTP Transport Extensions</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP Transport Extensions"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-85-3123"/>Command Code</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Parameters</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>MODE STREAM</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Set Stream Mode</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Used to tell the server that the client wants to operate in stream mode, using the CHECK and TAKETHIS commands.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>CHECK</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Check If Article Exists</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID</p></td><td style="border-bottom: 0.5pt solid ; "><p>Used in stream mode by a server acting as a client to ask another server if it has a copy of a particular article. The server responds back indicating whether or not it wishes to be sent a copy of the article. This command is similar to IHAVE, except that the client does not need to wait for a reply before sending the next command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>TAKETHIS</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Send Article to Server</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID</p></td><td style="border-bottom: 0.5pt solid ; "><p>When a server responds to a CHECK command indicating that it wants a copy of a particular message, the client sends it using this command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>XREPLIC</p></td><td style="border-right: 0.5pt solid ; "><p>Replicate Articles</p></td><td style="border-right: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-85-3124"/>List of newsgroups and article numbers</p></td><td style=""><p>Created for the special purpose of copying large numbers of articles from one server to another. It is not widely used.</p></td></tr></tbody></table></div></div></div><div class="sect3" title="NNTP Newsreader Extensions"><div class="titlepage"><div><div><h3 class="title"><a id="nntp_newsreader_extensions"/>NNTP Newsreader Extensions</h3></div></div></div><p><a class="indexterm" id="idx-CHP-85-3125"/>The second group of extensions defined by RFC 2980 consists of <span class="emphasis"><em>newsreader extensions</em></span>, which focus primarily on commands used by newsreader clients in interactions with NNTP servers. These extensions consist of several new commands, as well as significant enhancements to one important command that was very limited in its functionality in RFC 977: LIST.</p><p>The original LIST command has no parameters and only allows a client to retrieve the entire list of newsgroups a server carries. This may have been sufficient when there were only a few hundred Usenet newsgroups, but there are now tens of thousands. RFC 2980 defines a number of new variations of the LIST command to allow the client much more flexibility in the types of information the server returns. <a class="xref" href="ch85s07.html#nntp_list_command_extensions" title="Table 85-7. NNTP LIST Command Extensions">Table 85-7</a> shows the new LIST command variations.</p><div class="table"><a id="nntp_list_command_extensions"/><p class="title">Table 85-7. NNTP LIST Command Extensions</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP LIST Command Extensions"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command Code</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Parameters</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST ACTIVE</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Active Newsgroups</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup name or pattern</p></td><td style="border-bottom: 0.5pt solid ; "><p>Provides a list of active newsgroups on the server. This is semantically the same as the original LIST command, but the client may provide a newsgroup name or a pattern to restrict the number of newsgroups returned. For example, the client can ask for a list of only the newsgroups that contain "football" in them.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST ACTIVE.TIMES</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Active Newsgroup Creation Times</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Prompts the server to send the client its <span class="emphasis"><em>active.times</em></span> file, which contains information about when the newsgroups carried by the server were created.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST DISTRIBUTIONS</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Distributions</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Causes the server to sent the client the contents of the <span class="emphasis"><em>distributions</em></span> file, which shows what regional distribution strings the server recognizes (for use in the Distribution header of a message).</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST DISTRIB.PATS</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Distribution Patterns</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Asks the server for its <span class="emphasis"><em>distribution.pats</em></span> file, which is like the distributions file but uses patterns to summarize distribution information for different newsgroups.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST NEWSGROUPS</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Newsgroups</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup name or pattern</p></td><td style="border-bottom: 0.5pt solid ; "><p>Provides a list of newsgroup names and descriptions. This differs from LIST ACTIVE in that only the newsgroup name and description are returned, not the article numbers for each newsgroup. It is functionally the same as XGTITLE (see <a class="xref" href="ch85s07.html#nntp_newsreader_extensions-id001" title="Table 85-8. NNTP Newsreader Extensions">Table 85-8</a>) and is usually employed by a user to locate a newsgroup to be added to his or her subscribed list.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LIST OVERVIEW.FMT</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Display Overview Format</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Prompts the server to display information about the format of its <span class="emphasis"><em>overview</em></span> file. See the XOVER command description in <a class="xref" href="ch85s07.html#nntp_newsreader_extensions-id001" title="Table 85-8. NNTP Newsreader Extensions">Table 85-8</a> for more information.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>LIST SUBSCRIPTIONS</p></td><td style="border-right: 0.5pt solid ; "><p>Retrieve Default Subscription List</p></td><td style="border-right: 0.5pt solid ; "><p>None</p></td><td style=""><p>Asks the server to send the client a default list of subscribed newsgroups. This is used to set up a new user with a suggested list of newsgroups. For example, if an organization has an internal support newsgroup, it could put this group on the default subscription list so all new users learn about it immediately when they first start up their <a class="indexterm" id="idx-CHP-85-3126"/>newsreader.</p></td></tr></tbody></table></div></div><p>In addition to these changes to the LIST command, many new newsreader-related command extensions are defined, which are described in <a class="xref" href="ch85s07.html#nntp_newsreader_extensions-id001" title="Table 85-8. NNTP Newsreader Extensions">Table 85-8</a>.</p><div class="table"><a id="nntp_newsreader_extensions-id001"/><p class="title">Table 85-8. NNTP Newsreader Extensions</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP Newsreader Extensions"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command Code</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Parameters</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LISTGROUP</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>List Article Numbers In Newsgroup</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup name</p></td><td style="border-bottom: 0.5pt solid ; "><p>Causes the server to return a list of local article numbers for the current messages in the newsgroup. The server's current article pointer is also set to the first message in the group.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>MODE READER</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Set Newsreader Mode</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>None</p></td><td style="border-bottom: 0.5pt solid ; "><p>Tells the server that the device acting as a client is a client newsreader and not another NNTP server. While technically not required—all commands can be sent by any device acting as client—some servers may be optimized to respond to newsreader-oriented commands if given this command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XGTITLE</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Newsgroup Descriptions</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup name or pattern</p></td><td style="border-bottom: 0.5pt solid ; "><p>Used to list the descriptions for a newsgroup or a set of newsgroups matching a particular text pattern. This command is functionally the same as the LIST NEWSGROUP command extension (see <a class="xref" href="ch85s07.html#nntp_list_command_extensions" title="Table 85-7. NNTP LIST Command Extensions">Table 85-7</a>). It is therefore recommended that XGTITLE no longer be used.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XHDR</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Article Headers</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Header name and optionally, either a message ID or a range of article numbers</p></td><td style="border-bottom: 0.5pt solid ; "><p>Allows a client to ask for only a particular header from a set of messages. If only the header name is provided, the header is returned for all messages in the current group. Otherwise, the header is provided for the selected messages. This extension provides a newsreader client with a more efficient way of retrieving and displaying important headers in a newsgroup to a user.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XINDEX</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Index Information</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup name</p></td><td style="border-bottom: 0.5pt solid ; "><p>Retrieves an <span class="emphasis"><em>index</em></span> file, used by the newsreader called <span class="emphasis"><em>TIN</em></span> to improve the efficiency of newsgroup perusal. TIN now supports the more common overview format, so the XOVER command is preferred to this one.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XOVER</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Overview Information</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Article number or range of article numbers in a newsgroup</p></td><td style="border-bottom: 0.5pt solid ; "><p>Retrieves the <span class="emphasis"><em>overview</em></span> for an article or set of articles. Servers supporting this feature maintain a special database for their newsgroups that contains information about current articles in a format that can be used by a variety of newsreaders. Retrieving the overview information allows features like message threading to be performed more quickly than if the client had to retrieve the headers of each message and analyze them manually.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XPAT</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Article Headers Matching a Pattern</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Header name, pattern, and either a message ID or a range of article numbers</p></td><td style="border-bottom: 0.5pt solid ; "><p>Similar to XHDR in that it allows a particular header to be retrieved for a set of messages. The difference is that the client can specify a pattern that must be matched for the header to be retrieved. This allows the client to have the server search for and return certain messages, such as those with a subject line indicating a particular type of discussion, rather than requiring the client to download all the headers and search through them.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XPATH</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve File Name Information</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Message ID</p></td><td style="border-bottom: 0.5pt solid ; "><p>Allows a client to ask for the name of the actual file in which a particular message is stored on the server.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>XROVER</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Retrieve Overview Reference Information</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Article number or range of article numbers in a newsgroup</p></td><td style="border-bottom: 0.5pt solid ; "><p>Like the XOVER command, but specifically retrieves information in the References header for the indicated articles. This is the header containing the data needed to create threaded conversations.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>XTHREAD</p></td><td style="border-right: 0.5pt solid ; "><p>Retrieve Threading Information</p></td><td style="border-right: 0.5pt solid ; "><p>Optional DBINIT parameter</p></td><td style=""><p>Similar to XINDEX, but retrieves a special threading information file in the format used by the newsreader named <span class="emphasis"><em>TRN</em></span>. Like TIN, TRN now supports the common overview format, so XOVER is preferred to this command. The DBINIT parameter can be used to check for the existence of a thread database.</p></td></tr></tbody></table></div></div></div><div class="sect3" title="Other NNTP Extensions"><div class="titlepage"><div><div><h3 class="title"><a id="other_nntp_extensions"/>Other NNTP Extensions</h3></div></div></div><p>The last extension group contains the miscellaneous extensions not strictly related to either interserver or client-server NNTP interaction. There are two commands in this group: AUTHINFO and DATE. The latter is a simple command that causes the server to tell the client its current date and time. AUTHINFO is more interesting. It is used by a client to provide authentication data to a server.</p><p>You may have noticed that there are no commands related to security described in the RFC 977 protocol. That's because the original NNTP had no security features whatsoever. Like many protocols written before the modern Internet era, security was not considered a big issue back in the early 1980s. Most news servers were used only by people within the organization owning the server, and simple security measures were used, such as restricting access to servers by IP address or through the use of access lists.</p><p>One of the more important changes made by many NNTP software implementations as soon as Usenet grew in size was to require authentication. Modern clients will usually issue AUTHINFO as one of their first commands on establishing a connection to a server, because the server will refuse to accept most other commands before this is done. A special <a class="indexterm" id="idx-CHP-85-3127"/>reply code is also added to NNTP for a server to use if it rejects a command due to improper authentication.</p><p>The AUTHINFO command can be invoked in several different ways. The original version of the command required the client to issue an AUTHINFO USER command with a user name, followed by AUTHINFO PASS with a password. This is simple user/password login authentication. A variation of this is the AUTHINFO SIMPLE command, where the client needs to send just a password.</p><p>A client and server can also agree to use more sophisticated authentication methods by employing the AUTHINFO GENERIC command. The client provides to the server the name of the authentication method it wants to use, along with any arguments required for authentication. The client and server then exchange messages and authentication information as required by the particular authenticator they are using.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-516"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> A number of limitations in its base command set led to a proliferation of nonstandard enhancements to NNTP during the 1980s and 1990s. These were eventually documented in a set of NNTP command extensions that formally supplement the original RFC 977 commands. The extensions are conceptually divided into three groups: transport extensions that refine how NNTP propagates messages, newsreader extensions that improve client article access, and miscellaneous extensions. The most important miscellaneous extension is AUTHINFO, which adds security to NNTP.</p></div></div></div></div>
<div class="sect1" title="NNTP Status Responses and Response Codes"><div class="titlepage"><div><div><h1 class="title"><a id="nntp_status_responses_and_response_codes"/>NNTP Status Responses and Response Codes</h1></div></div></div><p><a class="indexterm" id="idx-CHP-85-3128"/>Each time the device acting as a client in an NNTP connection sends a command, the server sends back a <span class="emphasis"><em>response</em></span>. The response serves to acknowledge receipt of the command, to inform the client of the results of processing the command, and possibly to prompt for additional information. Since NNTP commands are structured and formatted in a way very similar to that of SMTP commands, I'm sure it will come as no great surprise that NNTP responses are very similar to those of SMTP (described in <a class="xref" href="ch77.html" title="Chapter 77. TCP/IP ELECTRONIC MAIL DELIVERY PROTOCOL: THE SIMPLE MAIL TRANSFER PROTOCOL (SMTP)">Chapter 77</a>). In turn, SMTP responses are based on the system designed for replies in FTP.</p><p>The first line of an NNTP response consists of a three-digit numerical <span class="emphasis"><em>response code</em></span>, as well as a line of descriptive text that summarizes the response. These response codes are structured so that each digit has a particular significance, which allows the client to quickly determine the status of the command to which the reply was sent. After the initial response line, depending on the reply, a number of additional response lines may follow. For example, a successful LIST command results in a 215 response code, followed by a list of newsgroups.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-517"/>Tip</h3><p><span class="strong"><strong>BACKGROUND INFORMATION</strong></span> <span class="emphasis"><em>The discussion of FTP reply codes in <a class="xref" href="ch72.html" title="Chapter 72. FILE TRANSFER PROTOCOL (FTP)">Chapter 72</a> explains the reasons why numeric reply codes are used in addition to descriptive text</em></span>.</p></div><p>As with SMTP and FTP, NNTP reply codes can be considered to be of the form <span class="emphasis"><em>xyz</em></span>, where <span class="emphasis"><em>x</em></span> is the first digit, <span class="emphasis"><em>y</em></span> the second, and <span class="emphasis"><em>z</em></span> the third. The first reply code digit (<span class="emphasis"><em>x</em></span>) indicates the success, failure, or progress of the command in general terms; whether a successful command is complete or incomplete; and the general reason why an unsuccessful command did not work. The values of this digit are defined slightly differently than they are in SMTP and FTP. In some cases, the terminology is just simplified; for example, the second category is Command OK, instead of the more cryptic Positive Completion Reply. <a class="xref" href="ch85s08.html#nntp_reply_code_format_first_digit_inter" title="Table 85-9. NNTP Reply Code Format: First Digit Interpretation">Table 85-9</a> shows the specific meaning of the possible values of this digit.</p><div class="table"><a id="nntp_reply_code_format_first_digit_inter"/><p class="title">Table 85-9. NNTP Reply Code Format: First Digit Interpretation</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP Reply Code Format: First Digit Interpretation"><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Reply Code Format</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Meaning</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1yz</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Informative Message</p></td><td style="border-bottom: 0.5pt solid ; "><p>General information; used for help information and debugging.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2yz</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command OK</p></td><td style="border-bottom: 0.5pt solid ; "><p>The command was completed successfully.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>3yz</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command OK So Far; Send the Rest</p></td><td style="border-bottom: 0.5pt solid ; "><p>An intermediate reply, sent to prompt the client to send more information. Typically used for replies to commands such as IHAVE or POST, where the server acknowledges the command, and then requests that an article be transmitted by the client.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>4yz</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Command Was Correct, but Couldn't Be Performed</p></td><td style="border-bottom: 0.5pt solid ; "><p>The command was valid but could not be performed. This type of error usually occurs due to bad parameters, a transient problem with the server, a bad command sequence, or similar situations.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>5yz</p></td><td style="border-right: 0.5pt solid ; "><p>Command Unimplemented or Incorrect, or Serious Program Error</p></td><td style=""><p>The command was invalid or a significant program error prevented it from being performed.</p></td></tr></tbody></table></div></div><p>The second reply code digit (<span class="emphasis"><em>y</em></span>) is used to categorize messages into functional groups. This digit is used in the same general way as in SMTP and FTP, but the functional groups are different, as described in <a class="xref" href="ch85s08.html#nntp_reply_code_format_second_digit_inte" title="Table 85-10. NNTP Reply Code Format: Second Digit Interpretation">Table 85-10</a>.</p><div class="table"><a id="nntp_reply_code_format_second_digit_inte"/><p class="title">Table 85-10. NNTP Reply Code Format: Second Digit Interpretation</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP Reply Code Format: Second Digit Interpretation"><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Reply Code Format</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Meaning</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x0z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Connection, Setup, and Miscellaneous</p></td><td style="border-bottom: 0.5pt solid ; "><p>Generic and miscellaneous replies.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x1z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Newsgroup Selection</p></td><td style="border-bottom: 0.5pt solid ; "><p>Messages related to commands used to select a newsgroup.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x2z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Article Selection</p></td><td style="border-bottom: 0.5pt solid ; "><p>Messages related to commands used to select an article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x3z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Distribution Functions</p></td><td style="border-bottom: 0.5pt solid ; "><p>Messages related to the transfer of messages.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x4z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Posting</p></td><td style="border-bottom: 0.5pt solid ; "><p>Messages related to posting messages.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x5z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Authentication</p></td><td style="border-bottom: 0.5pt solid ; "><p>Messages related to authentication and the AUTHINFO command extension. (This category is not officially listed in the standard, but these responses have a middle digit of 5.)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>x8z</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Nonstandard Extensions</p></td><td style="border-bottom: 0.5pt solid ; "><p>Reserved for private, nonstandard implementation use.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>x9z</p></td><td style="border-right: 0.5pt solid ; "><p>Debugging</p></td><td style=""><p>Debugging output messages.</p></td></tr></tbody></table></div></div><p>The third reply code digit (<span class="emphasis"><em>z</em></span>) indicates a specific type of message within each of the functional groups described by the second digit. The third digit allows each functional group to have ten different <a class="indexterm" id="idx-CHP-85-3129"/>reply codes for each reply type given by the first code digit.</p><p>As in FTP and SMTP, these <span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>, and <span class="emphasis"><em>z</em></span> digit meanings are combined to make specific reply codes. For example, the reply code 435 is sent by the server if a client issues the IHAVE command but the server doesn't want the article being offered. The command was correct but the reply is negative, thus it starts with 4, and the message is related to message distribution, so the middle digit is 3.</p><p><a class="xref" href="ch85s08.html#nntp_reply_codes" title="Table 85-11. NNTP Reply Codes">Table 85-11</a> contains a list of some of the more common NNTP reply codes in numerical order, along with typical reply text from the standard and additional descriptive information.</p><div class="table"><a id="nntp_reply_codes"/><p class="title">Table 85-11. NNTP Reply Codes</p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="NNTP Reply Codes"><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Reply Code</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Reply Text</p></th><th style="border-bottom: 0.5pt solid ; "><p>Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>100</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>help text follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Precedes response to HELP command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>111</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>(date and time)</p></td><td style="border-bottom: 0.5pt solid ; "><p>Response to DATE command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>199</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>(debugging output)</p></td><td style="border-bottom: 0.5pt solid ; "><p>Debugging information.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>200</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>server ready - posting allowed</p></td><td style="border-bottom: 0.5pt solid ; "><p>Sent by the server on initiation of the session, if the client is allowed to post messages.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>201</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>server ready - no posting allowed</p></td><td style="border-bottom: 0.5pt solid ; "><p>Sent by the server on initiation of the session, if the client is not allowed to post messages.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>202</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>slave status noted</p></td><td style="border-bottom: 0.5pt solid ; "><p>Response to the SLAVE command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>203</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>streaming is ok</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to MODE STREAM command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>205</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>closing connection - goodbye!</p></td><td style="border-bottom: 0.5pt solid ; "><p>Goodbye message sent in response to a QUIT message.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>211</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>n f l s group selected</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the GROUP command, indicating the estimated number of messages in the group (<span class="emphasis"><em>n</em></span>), first and last article numbers (<span class="emphasis"><em>f</em></span> and <span class="emphasis"><em>l</em></span>) and group name (<span class="emphasis"><em>s</em></span>).</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>215</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>list of newsgroups follows (OR) information follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to LIST command. The second form is for variations of LIST defined as NNTP command extensions.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>218</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>tin-style index follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to XINDEX command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>220</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>n &lt;a&gt; article retrieved - head and body follow</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the ARTICLE command, indicating the article number and message ID of the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>221</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>n &lt;a&gt; article retrieved - head follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the HEAD command, indicating the article number and message ID of the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>222</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>n &lt;a&gt; article retrieved - body follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the BODY command, indicating the article number and message ID of the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>223</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>n &lt;a&gt; article retrieved - request text separately</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the STAT command, indicating the article number and message ID of the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>224</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>overview information follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the XOVER command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>230</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>list of new articles by message-id follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the NEWNEWS command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>235</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>article transferred ok</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the IHAVE command, after the article has been sent.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>239</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>article transferred ok</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the TAKETHIS command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>240</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>article posted ok</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the POST command, after the article has been posted.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>250 or 281</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>authentication accepted</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful authentication using the AUTHINFO command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>282</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>list of groups and descriptions follows</p></td><td style="border-bottom: 0.5pt solid ; "><p>Positive response to the XGTITLE command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>288</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>binary data to follow</p></td><td style="border-bottom: 0.5pt solid ; "><p>Successful response to the XTHREAD command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>335</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>send article to be transferred</p></td><td style="border-bottom: 0.5pt solid ; "><p>Preliminary response to the IHAVE command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>340</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>send article to be posted</p></td><td style="border-bottom: 0.5pt solid ; "><p>Preliminary response to the POST command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>381</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>more authentication information required</p></td><td style="border-bottom: 0.5pt solid ; "><p>Preliminary response to the AUTHINFO command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>400</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>service discontinued</p></td><td style="border-bottom: 0.5pt solid ; "><p>Session is being terminated, perhaps due to user request.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>411</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no such newsgroup</p></td><td style="border-bottom: 0.5pt solid ; "><p>Invalid newsgroup name specified.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>412</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no newsgroup has been selected</p></td><td style="border-bottom: 0.5pt solid ; "><p>Attempt to issue a command that refers to the current newsgroup before one has been selected using GROUP.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>420</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no current article has been selected</p></td><td style="border-bottom: 0.5pt solid ; "><p>Attempt to issue a command that refers to the current article using the server's current article pointer, before the pointer has been set through article selection.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>421</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no next article in this group</p></td><td style="border-bottom: 0.5pt solid ; "><p>Response to NEXT command when at the last article of a newsgroup.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>422</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no previous article in this group</p></td><td style="border-bottom: 0.5pt solid ; "><p>Possible response to LAST (I have no idea why the word "previous" is in there).</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>423</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no such article number in this group</p></td><td style="border-bottom: 0.5pt solid ; "><p>Command with invalid article number.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>430</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>no such article found</p></td><td style="border-bottom: 0.5pt solid ; "><p>Article not found; it may have been deleted.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>435</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>article not wanted - do not send it</p></td><td style="border-bottom: 0.5pt solid ; "><p>Negative response to IHAVE if server doesn't need the article.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>436</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>transfer failed - try again later</p></td><td style="border-bottom: 0.5pt solid ; "><p>Temporary failure of article transfer; retry.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>437</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>article rejected - do not try again</p></td><td style="border-bottom: 0.5pt solid ; "><p>Article refused for whatever reason.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>438</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>already have it, please don't send it to me</p></td><td style="border-bottom: 0.5pt solid ; "><p>Same as reply code 435, but for the CHECK command extension.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>440</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>posting not allowed</p></td><td style="border-bottom: 0.5pt solid ; "><p>POST command issued when posting is not allowed.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>441</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>posting failed</p></td><td style="border-bottom: 0.5pt solid ; "><p>POST command failed.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>450</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>authorization required for this command</p></td><td style="border-bottom: 0.5pt solid ; "><p>Response sent when server requires authentication but client has not yet authenticated.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>452</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>authorization rejected</p></td><td style="border-bottom: 0.5pt solid ; "><p>Failed authentication.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>480</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>transfer permission denied</p></td><td style="border-bottom: 0.5pt solid ; "><p>Response to CHECK if transfer is not allowed.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>500</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>command not recognized</p></td><td style="border-bottom: 0.5pt solid ; "><p>Bad command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>501</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>command syntax error</p></td><td style="border-bottom: 0.5pt solid ; "><p>Bad syntax in command.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>502</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>access restriction or permission denied</p></td><td style="border-bottom: 0.5pt solid ; "><p>Permission denied; sent if the client has not properly authentication but the server requires it.</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>503</p></td><td style="border-right: 0.5pt solid ; "><p>program fault - command not performed</p></td><td style=""><p>General fatal error message.</p></td></tr></tbody></table></div></div><div class="tip" title="Tip"><h3 class="title"><a id="tip-518"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> Each command sent by the device acting as the client in an NNTP connection results in the server returning a reply. NNTP replies consist of a three-digit reply code and a string of descriptive text. These codes are modeled after those of SMTP, and in turn, FTP.</p></div></div>
<div class="chapter" title="Chapter&#xA0;86.&#xA0;GOPHER PROTOCOL (GOPHER)"><div class="titlepage"><div><div><h1 class="title"><a id="gopher_protocol_gopher"/>Chapter 86. GOPHER PROTOCOL (GOPHER)</h1></div></div></div><div class="informalfigure"><div class="mediaobject"><a id="I_mediaobject2_d1e94717"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages287681.png.jpg"/></div></div><p>Let's suppose that I told you I was going to describe a TCP/IP application layer protocol designed for the specific purpose of distributed document search and retrieval. This protocol uses a client/server model of operation, where servers provide links to related resources such as files or programs that users access with client software that displays options for the user to select. You might think that I was talking about the World Wide Web, and for good reason. However, in this case, I am actually talking about one of the Web's predecessors: the <span class="emphasis"><em>Gopher Protocol</em></span>.<a class="indexterm" id="idx-CHP-86-3130"/></p><p>In this chapter, I briefly describe Gopher's history, operation, differences from the World Wide Web, and role in the modern Internet.</p><div class="sect1" title="Gopher Overview and General Operation"><div class="titlepage"><div><div><h1 class="title"><a id="gopher_overview_and_general_operation"/>Gopher Overview and General Operation</h1></div></div></div><p>A good place to start our discussion of this protocol is with its name, which is well chosen for a number of reasons. The Gopher Protocol was developed at the <a class="indexterm" id="idx-CHP-86-3131"/>University of <a class="indexterm" id="idx-CHP-86-3132"/>Minnesota, whose sports teams are called the Golden Gophers (Minnesota is known as the Gopher State). This is the direct origin of the name, but it is also appropriate because the rodent that shares it is known for burrowing, just as the protocol is designed to "burrow" through the Internet. And of course, the term <span class="emphasis"><em>gopher</em></span> also applies to a person who performs errands, such as retrieving documents (they "go fer" this and "go fer" that).</p><p>The Gopher Protocol was developed in the late 1980s to provide a mechanism for organizing documents for easy access by students and faculty at the university. The core principle that guided the development of the system was <span class="emphasis"><em>simplicity</em></span>. Gopher is designed on the basis of a small number of core principles, and it uses a very straightforward mechanism for passing information between client and server devices. It is described in RFC 1436, published in March 1993.</p><div class="sect2" title="Information Storage on Gopher Servers"><div class="titlepage"><div><div><h2 class="title"><a id="information_storage_on_gopher_servers"/>Information Storage on Gopher Servers</h2></div></div></div><p>Information accessible by Gopher is stored as files on <span class="emphasis"><em>Gopher servers</em></span>. It is organized in a hierarchical manner similar to the file system tree of a computer such as a Windows PC or UNIX workstation.<a class="indexterm" id="idx-CHP-86-3133"/></p><p>Just as a file system consists of a top-level directory (or folder) that contains files and subdirectories (subfolders), Gopher servers present information as a top-level directory that contains resources such as files, and/or subdirectories containing additional resources. Resources on different servers can be linked together by having them mentioned in each others' resource hierarchies. It is also possible for virtual resources to be created that act as if they were files, such as programs that allow Gopher servers to be searched.</p></div><div class="sect2" title="Gopher Client/Server Operation"><div class="titlepage"><div><div><h2 class="title"><a id="gopher_clientserver_operation"/>Gopher Client/Server Operation</h2></div></div></div><p>Typical use of Gopher begins with a user on a client machine creating a TCP connection to a Gopher server using well-known TCP port number 70. After the connection is established, the server waits for the client to request a particular resource by sending the server a piece of text called a <span class="emphasis"><em>selector string</em></span>. Often, when a user first accesses a server, he does not know what resource to request, so a null (empty) <a class="indexterm" id="idx-CHP-86-3134"/>selector string is sent. This causes the server to send back to the client a list of the resources available at the top (root) directory of the server's file system tree.<a class="indexterm" id="idx-CHP-86-3135"/><a class="indexterm" id="idx-CHP-86-3136"/></p><p>A directory list sent by the server consists of a set of lines, each of which describes one available resource in that directory. Each line contains the following elements, each separated by a tab character:</p><p><span class="strong"><strong>Type Character and Resource Name</strong></span> The first character of the line tells the client software what sort of resource the line represents. The most common type characters are 0 (zero) for a file, 1 for a subdirectory, and 7 for a search service. The rest of the characters up to the first tab character contain the name of the resource to be presented to the user.</p><p><span class="strong"><strong>Selector String</strong></span> The string of text to be sent to the server to retrieve this resource.</p><p><span class="strong"><strong>Server Name</strong></span> The name of the server where the resource is located.</p><p><span class="strong"><strong>Server Port Number</strong></span> The port number to be used for accessing this resource's server; normally 70.</p><p>Each line ends with a carriage return/line feed (CRLF) character sequence consistent with the Telnet Network Virtual Terminal (NVT) specification. Upon sending the directory listing (or any other response) the connection between the client and server is closed.</p><p>After receiving this sort of directory list, the Gopher client software will display a menu to the user containing all the resource names the server provided. The user then selects his desired item from the menu, and the client retrieves it by making a connection to the appropriate server and port number, and sending the selector string of that resource. If this itself represents a subdirectory, the server will send a new directory listing for that subdirectory; if it represents some other type of resource, it will be accessed according to the requirements of the resource type.</p><p>For example, suppose this line were sent from the server to the client:</p><a id="I_programlisting2_d1e94813"/><pre class="programlisting">0Gopher Introduction&lt;Tab&gt;intro&lt;Tab&gt;gopher.someserver.org&lt;Tab&gt;70</pre><p>This would be presented to the user as the file called Gopher Introduction in a menu containing other options. If the user chose it, the client would initiate a connection to the Gopher server gopher.someserver.org at port 70, and then send the selector string intro to that server to retrieve the document.</p></div></div></div>
<div class="sect1" title="Important Differences Between Gopher and the Web"><div class="titlepage"><div><div><h1 class="title"><a id="important_differences_between_gopher_and"/>Important Differences Between Gopher and the Web</h1></div></div></div><p>As I hinted at the start of this discussion, both Gopher and the Web are intended for the same basic purpose: providing access to repositories of information, with links between related documents and resources. However, they take a very different approach to how that information is accessed, especially in two key areas: user interface and resource linking.</p><p>Gopher's presentation to the user is entirely oriented around its hierarchical file system. As a result, Gopher is inherently menu-based, and the user interface is usually based on a simple text presentation of those <a class="indexterm" id="idx-CHP-86-3137"/>menus. In contrast, information on web servers can be organized in any manner and presented to the user in whatever form or fashion the owner of the server desires. The Web is much more free-form, and there is no need to use a directory structure unless that is advantageous in some way.</p><p>Linking in the Web is done directly between documents, most often using Hypertext Markup Language (HTML) tags. When someone writing Document A mentions something relevant to Document B, she puts a link to Document B directly in Document A. Gopher, on the other hand, is not designed to use links in this way. Instead, linking is intended to be done using the directory tree I described earlier.</p></div>
<div class="sect1" title="Gopher's Role in the Modern Internet"><div class="titlepage"><div><div><h1 class="title"><a id="gophers_role_in_the_modern_internet"/>Gopher's Role in the Modern Internet</h1></div></div></div><p>There are some people who believe that Gopher is technically superior to the Web in a number of respects. They consider it cleaner to have servers do the linking, rather than having links embedded in documents. An argument can also be made that the text orientation of Gopher is efficient, better able to ensure compatibility between platforms, and also more suited to special needs situations such as low-bandwidth links and access by those with visual impairments. Some Gopher enthusiasts thus consider it to be a purer hypertext system than the Web.</p><p>However, history shows us that despite Gopher predating the Web, the Web overtook it in popularity in only a few short years. Today, the Web is the 900-pound gorilla of the Internet, while most people have never even heard of Gopher. What happened?</p><p>I believe the main reason why Gopher lost out to the Web is that the Web is far more flexible. Gopher's use of text hyperlinks and server directory structures may be efficient, but it is limiting. In contrast, the Web allows information to be presented in a wide variety of ways. The open, unstructured nature of the Web makes it an ideal vehicle for the creativity of information providers and application developers. In the mid-1990s, the Web was also perfectly poised to support the transition of computing from text to graphics, and Gopher was not.</p><p>Simply put, you can do more with the Web than you can with Gopher, and most people care more about functionality and breadth of options than straight efficiency. Once the Web started to gain momentum, it very quickly snowballed. It took only a couple of years before Web use was well entrenched, and Gopher was unable to compete.</p><p>For its part, the University of Minnesota likely hastened Gopher's demise with its controversial decision to charge licensing fees to companies that wanted to use Gopher for commercial purposes. I do not believe there was anything nefarious about this. The university was on a limited budget and wanted companies that could afford it to pay a small fee to support development of Gopher software. However, computing history has shown time and time again that there is no faster way to kill a protocol or standard than to try to charge licensing or royalty fees for it, no matter what the reason.</p><p>By the late 1990s, Gopher was well on its way to obsolescence. As use of the protocol dwindled, many organizations could no longer justify the cost of continuing to run Gopher servers. Even the University of Minnesota itself eventually shut down its own Gopher servers due to low utilization. The final nail in the coffin for Gopher occurred in 2002, when a security vulnerability related to Gopher was discovered in Internet Explorer, and Microsoft chose to simply remove Gopher support from the product rather than fix the problem. Today, Gopher is still around, but it is a niche protocol used only by a relatively small group of enthusiasts and a handful of organizations that have a past history of using it.</p><div class="tip" title="Tip"><h3 class="title"><a id="tip-519"/>Tip</h3><p><span class="strong"><strong>KEY CONCEPT</strong></span> The Gopher Protocol is a distributed document search and retrieval protocol that was developed at the University of Minnesota in the late 1980s. Resources are stored on Gopher servers, which organize information using a hierarchical directory structure. Gopher clients access servers to retrieve directory listings of available resources, which are presented to the user as a menu from which an item may be selected for retrieval. Gopher's chief advantage is simplicity and ease of use, but it lacks flexibility in presentation and the ability to effectively present graphics and multimedia. For this reason, despite Gopher predating the World Wide Web, the Web has almost entirely replaced it, and Gopher is now a niche protocol.</p></div></div></body></html>