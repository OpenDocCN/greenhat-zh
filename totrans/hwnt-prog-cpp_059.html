<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_65">
<a name="ch04" class="calibre6" id="ch04"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="67" class="calibre16" id="67"/><a name="ch04lev1sec31" class="calibre16" id="ch04lev1sec31"/><span class="chapter-titlelabel">Program 57: </span>How Not to Read a File</h2><p class="b24-bookeditorial">What kind of portability problems exist in the following code?</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 #include &lt;iostream&gt;
  2
  3 /*
  4  * A data structure consisting of a flag
  5  * which indicates which long int parameter
  6  * follows.
  7  */
  8 struct data
  9 {
 10     // Flag indicating what's to follow
 11     char flag;
 12
 13     // Value of the parameter
 14     long int value;
 15 };
 16
 17 /************************************************
 18  * read_data -- Read data from the given file   *
 19  ************************************************/
 20 void read_data(
 21   std::istream &amp;in_file,     // File to read
 22   struct data &amp;what     // Data to get
 23 )
 24 {
 25     in_file.read(
 26         dynamic_cast&lt;char *&gt;(&amp;what),
 27         sizeof(what));
 28 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#297" target="_parent" class="calibre2">Hint 161</a>. <a href="LiB0121.html#569" target="_parent" class="calibre2">Answer 71</a>.)</p>
<div class="calibre1">
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="Start Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
<p class="b24-bookeditorial">One electronic time card program had an interesting way of finishing up:</p>
<div class="calibre1">
<pre class="literallayout-normal">
   Timecard entry complete
   Press 'Enter' to exit the program.
</pre>
</div>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="End Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
</div>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td height="16" class="calibre8"/>
</tr>
</table>
</div>
</div>



</body></html>