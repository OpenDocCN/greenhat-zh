- en: Chapter 10\. ISC BIND DNS SERVER 9.4.2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://WWW.ISC.ORG/SW/BIND](HTTP://WWW.ISC.ORG/SW/BIND)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 10.1\. SUMMARY
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: BIND (Berkeley Internet Name Domain) is the most widely used DNS server application
    on the Internet. Slightly over 79 percent of DNS servers use BIND DNS, according
    to a survey conducted by the Internet Systems Consortium (ISC) in July 2007\.
    Microsoft came in second at 16 percent.^([[]](#CHP-10-1)) The domain name system
    is responsible for the conversion of domain names, such as [http://unorthodocs.net](http://unorthodocs.net),
    into routable IP addresses like 69.226.238.99\. It is considered one of the most
    critical components of the Internet.
  prefs: []
  type: TYPE_NORMAL
- en: ^([]) See the results of the Internet Systems Consortium's ongoing survey at
    [http://www.isc.org/ds](http://www.isc.org/ds).
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: BIND version 9 was a total rewrite of the BIND package that addressed architectural
    issues and known security problems in previous versions. New features in BIND
    9 include DNS Security (DNSSEC), multiprocessor support, support for IPv6, protocol
    enhancements, and better portability.
  prefs: []
  type: TYPE_NORMAL
- en: BIND also supports dynamic DNS updates (as per RFC 2136). When coupled with
    the Internet Systems Consortium's DHCP server, dynamic DNS allows real-time updates
    to the DNS server's zone files as DHCP clients join the network. This gives DHCP
    clients the luxury of having a locally or publicly resolvable hostname.
  prefs: []
  type: TYPE_NORMAL
- en: BIND was originally conceived as a graduate student project at the University
    of California, Berkeley in the early '80s. UC Berkeley worked on BIND in cooperation
    with Digital Equipment Corporation for a few years. Paul Vixie, of Digital Equipment
    Corporation, later became principal programmer of the BIND project. BIND was passed
    on to the Internet Systems Consortium (ISC), a nonprofit corporation led by Vixie,
    who now continues to develop the BIND system independently.
  prefs: []
  type: TYPE_NORMAL
- en: 'We''ll be building a local master authoritative name server for your domain
    name. This will also provide the benefits of a caching name server. A caching
    name server is basically a DNS relay: It has no zone files of its own and must
    get DNS information from other DNS servers (also called forwarders). Both authoritative
    and caching name servers store DNS queries in a cache to make subsequent requests
    faster.'
  prefs: []
  type: TYPE_NORMAL
- en: A master authoritative name server also has a zone file (a list of known IP
    addresses) for your domain. When a DNS query is received for your domain, BIND
    looks at your zone file and returns the requested information. If the query is
    for a domain other than yours, the query is forwarded to other DNS servers specified
    in your forwarder's configuration.
  prefs: []
  type: TYPE_NORMAL
- en: 10.2\. RESOURCES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: BIND 9 Administrator Reference Manual
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.isc.org/sw/bind/arm94](http://www.isc.org/sw/bind/arm94)'
  prefs: []
  type: TYPE_NORMAL
- en: 'RFC 1034 - Domain Names: Concepts and Facilities'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://tools.ietf.org/html/rfc1034](http://tools.ietf.org/html/rfc1034)'
  prefs: []
  type: TYPE_NORMAL
- en: 'RFC 1035 - Domain Names: Implementation and Specification'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://tools.ietf.org/html/rfc1035](http://tools.ietf.org/html/rfc1035)'
  prefs: []
  type: TYPE_NORMAL
- en: The FreeBSD Handbook
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/network-dns.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/network-dns.html)'
  prefs: []
  type: TYPE_NORMAL
- en: 10.3\. REQUIRED
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  prefs: []
  type: TYPE_IMG
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  prefs: []
  type: TYPE_IMG
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Registered
    domain name'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Public or
    private static IP address'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Your ISP''s
    DNS server addresses'
  prefs: []
  type: TYPE_NORMAL
- en: 10.4\. OPTIONAL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) DHCP server
    (see "[ISC DHCP Server 3.0.5](isc_dhcp_server_3.0.5.html#isc_dhcp_server_3.0.5)")'
  prefs: []
  type: TYPE_IMG
- en: 10.5\. PREPARATION
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Become the superuser.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'BIND 9.4.2 is part of the standard FreeBSD 7.0 distribution. Check the current
    version of BIND available in the ports collection with the command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: If this version supersedes 9.4.2, proceed to the "[Install](install.html#install)"
    section below. If it is equal to 9.4.2, skip to "Configure."
  prefs: []
  type: TYPE_NORMAL
- en: 10.6\. INSTALL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To overwrite the base installation of BIND with the version available in the
    ports collection, use the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: A menu should appear displaying options for bind94\. Press [spacebar] to select
    the REPLACE_BASE option; leave other options at their default. Press [tab] to
    select OK and then press [enter] to continue the installation process.
  prefs: []
  type: TYPE_NORMAL
- en: 10.7\. CONFIGURE
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the installation process is complete, it's time to configure BIND for use
    on your system.
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the statement `"NO_BIND = YES"` to the make.conf file located in /etc.
    The following commands will append this statement to make.conf or create the file
    if it does not exist:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This tells the `make` command not to build the base version of BIND if you rebuild
    FreeBSD from source, preventing the system from downgrading BIND to that older
    version.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'We need to edit the named.conf file in /var/named/etc/namedb. Open the file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down and comment the `listen-on` declaration with two forward slashes
    (`//`). This allows BIND''s named daemon to answer both external and local DNS
    queries; the default behavior is to answer only local queries. This line (~21)
    should appear as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down and remove the forward slash and asterisk (`/*`) on the line above
    the `forwarders` declaration. Replace `*127.0.0.1*` with your ISP''s nameservers.
    Separate nameserver entries with a semicolon (`;`). Also remove the asterisk and
    forward slash (`*/`) following the `forwarders` declaration. The `forwarders`
    declaration (~43-47) should look like this (of course, your IP addresses will
    be different):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Scroll down to the bottom of named.conf and add the following lines to add
    your forward lookup zone (substitute your domain name for [example.com](http://example.com)):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** A feature of BIND called dynamic DNS updates allows BIND and the
    ISC DHCP server to work together and add/remove entries to your zone files automatically
    as clients join and leave your local network. If you want to enable dynamic DNS
    updates with ISC DHCP, then change the italicized `master` (in the `*file*` line
    of the preceding code) to `dynamic`. Refer to "[ISC DHCP Server 3.0.5](isc_dhcp_server_3.0.5.html#isc_dhcp_server_3.0.5)"
    for details on the ISC DHCP server.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If you are connected directly to the Internet (no NAT router) and have a dynamic
    public IP address, then skip to step 8\. If you are connected directly to the
    Internet with a static IP address or have a static local IP address behind a NAT
    router, add the following lines below the forward lookup zone you specified in
    step 5\. This will define your reverse lookup zone.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Substitute the first three octets of your server's static IP address in reverse
    order for `*1.168.192*`. The above example is correct if your local network uses
    the IP subnet 192.168.1.XXX. Substitute your domain name for [example.com](http://example.com).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** If you plan to enable dynamic DNS updates (ISC DHCP required),
    change the italicized `master` (in the `*file*` line of the above code) to `dynamic`.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Write down the reverse zone's name (`1.168.192.in-addr.arpa`, in this example).
    You will need it later when you create the reverse zone file. Save and exit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Create the rndc.key file and append its contents to the bottom of the named.conf
    file. The rndc.key file is an encryption key that the rndc utility needs in order
    to function; it is also used to authenticate the DHCP server to BIND when communicating
    dynamic DNS updates. The following commands will create the key and append it
    to named.conf:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Create the master forward lookup zone file. Replace [example.com](http://example.com)
    with your domain name; it must match the domain name you specified in step 5.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This is the [example.com](http://example.com) forward lookup zone file, followed
    by explanations of each line:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Any line preceded by a semicolon ( `*;*`) is ignored by BIND.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: TTL (or Time To Live) is 3,600 seconds. This is the amount of time for which
    other DNS servers should cache information from this zone.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '[example.com](http://example.com). is the forward zone name.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`IN` is a data type that means Internet data.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`SOA` stands for start of authority.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[host.example.com](http://host.example.com). is the hostname of computer that
    holds this zone file.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[root.example.com](http://root.example.com). is the email address of the person
    responsible for the zone (in zone files, the `@` symbol is used to represent the
    zone name, so the period is used to separate the username from the domain name
    in the email address).'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`(` The left parenthesis indicates the start of the SOA record.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The serial number is a number you can choose; it is usually increased by one
    every time you make a change to the zone file. You may use a date (in the format
    `YYYYMMDD`) instead.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: If there is a slave server configured, this is the number of seconds it waits
    before contacting this master server for an update.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This is the number of seconds a slave server would wait before retrying a connection
    to the master server if it ever loses contact.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: If the slave server cannot contact the master server within this time, in seconds,
    it will stop answering DNS queries.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This is the amount of time in seconds that a negative answer is cached. If a
    client tries to resolve a host that does not exist, the server will answer negatively
    until this time runs out before actually trying to resolve the address again.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '[example.com](http://example.com). is the forward zone''s name or domain name.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`NS` is a record type meaning nameserver.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[host.example.com](http://host.example.com). is the fully qualified domain
    name of the nameserver. (The period at the end means the FQDN is absolute; without
    it, named would automatically append [example.com](http://example.com) to itâ€”so
    don''t forget the period.)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '[host.example.com](http://host.example.com). is the FQDN of a host on the domain.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`A` is a record type meaning a host address.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`*192.168.1.11*` is the IP address of the host (IP addresses don''t need terminating
    periods; they are considered absolute).'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '`www` is the FQDN of the aliased host on the domain. (Notice that there is
    no period after `www`; named will automatically append the domain [example.com](http://example.com).
    If this is confusing, you may simply type [www.example.com](http://www.example.com)`.`
    here instead.)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`CNAME` is a record type meaning canonical name for an alias.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[host.example.com](http://host.example.com). is the actual hostname of the
    alias.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '[example.com](http://example.com). is the MX''s domain name.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`MX` is a record type meaning mail exchanger.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`*10*` is the priority of the specified mail server. (Email destined for your
    domain will be directed to the highest priority mail server, then lower priority
    mail servers; the lower number is the higher priority.)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[host.example.com](http://host.example.com). is the FQDN of mail server (no
    IP addresses).'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Be sure to double-check the spelling, punctuation marks, and syntax
    of your forward lookup zone file. BIND will not function correctly if the zone
    file contains errors.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: When you finish creating your forward lookup zone file, save and exit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We will construct the reverse lookup zone file called [example.com.rev](http://example.com.rev).
    If you did not specify one in named.conf (step 6), skip to "[Testing](testing.html#testing)".
    This file contains the same basic information as the forward lookup zone file.
    All `A` and `CNAME` record types now become `PTR` records. Replace [example.com](http://example.com)
    with your domain name; it must match the domain name you specified in step 5.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'This is the [example.com.rev](http://example.com.rev) reverse lookup zone file
    in the /var/named/etc/namedb/master directory, followed by explanations of items
    not previously covered:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The elements in this file are explained in detail below.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '`*1.168.192.in-addr.arpa*``.` is the reverse zone''s name. It should match
    what you entered in the named.conf file (refer to step 7 on page 76).'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The DNS server NS record should point to the reverse zone's name. An `@` symbol
    here would work too. In the context of DNS zone files, the `@` symbol represents
    the zone's name.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '`11` is the last octet of [host.example.com''s](http://host.example.com''s)
    IP address.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`PTR` is a record type meaning pointer.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Notice the `*11*` above does not end with a period. It will be automatically
    prefixed to this file's zone name (`1.168.192.in-addr.arpa.`). The result will
    point [host.example.com](http://host.example.com) to a reverse IP of `*11*``.1.168.192.in-addr.arpa.`.
    When your reverse zone file is complete, save and exit.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'If you will not be enabling dynamic DNS updates, skip to "Testing." BIND will
    expect the forward and reverse zone files to be stored in the /var/named/etc/namedb/dynamic
    directory. Copy these two zone files to the /var/named/etc/namedb/dynamic directory
    like this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Be sure to substitute your domain name for [example.com](http://example.com).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 10.8\. TESTING
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this section, we'll perform some basic tests to confirm that BIND answers
    DNS requests properly.
  prefs: []
  type: TYPE_NORMAL
- en: Modify the first nameserver entry in the resolv.conf file to point to the loopback
    or localhost address (127.0.0.1). This will force the system to query the local
    DNS server before attempting to query other DNS servers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** You may specify a maximum of three nameservers.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Save and exit.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Configure named to start automatically at boot time. To start named automatically
    at boot time, open the rc.conf file in /etc:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'and add the following line:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Save and exit.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Start the named daemon and conduct DNS query tests.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Perform a basic DNS query for [google.com](http://google.com):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Code View:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The line in bold toward the end of the output confirms that this DNS query was
    answered by the local DNS server.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The next command initiates a DNS query known as a zone transfer; this will
    test the forward lookup zone file (substitute your domain name):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Although your results will be different, examine this output to verify whether
    your DNS server returns the correct information. If you run into trouble, check
    /var/log/messages with a text editor for named-related messages and/or errors.
    Most problems are zone file syntax errors.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 10.9\. UTILITIES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Following is brief information on the rndc program, which is used to control
    the named daemon.
  prefs: []
  type: TYPE_NORMAL
- en: 10.9.1\. rndc
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This utility controls the operation of the nameserver (named).
  prefs: []
  type: TYPE_NORMAL
- en: Command
  prefs: []
  type: TYPE_NORMAL
- en: '`rndc`'
  prefs: []
  type: TYPE_NORMAL
- en: Syntax
  prefs: []
  type: TYPE_NORMAL
- en: '`rndc` `*option*`'
  prefs: []
  type: TYPE_NORMAL
- en: Options
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: Flushes the DNS server's cache
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: Reloads the configuration file and zones
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs: []
  type: TYPE_PRE
- en: Saves updates to zone files and stops the server
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs: []
  type: TYPE_PRE
- en: Displays the status of the server
  prefs: []
  type: TYPE_NORMAL
- en: Example
  prefs: []
  type: TYPE_NORMAL
- en: 'To flush the DNS server''s cache:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs: []
  type: TYPE_PRE
- en: 10.10\. CONFIG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /var/named/etc/namedb/named.conf
  prefs: []
  type: TYPE_NORMAL
- en: The main configuration file for named
  prefs: []
  type: TYPE_NORMAL
- en: /var/named/etc/namedb/rndc.key
  prefs: []
  type: TYPE_NORMAL
- en: Contains the encryption key used by the rndc utility to issue commands to named;
    also used for authenticating ISC's DHCP server when applying dynamic DNS updates
  prefs: []
  type: TYPE_NORMAL
- en: 10.11\. LOG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /var/log/messages
  prefs: []
  type: TYPE_NORMAL
- en: Contains error and status messages produced by the named daemon
  prefs: []
  type: TYPE_NORMAL
- en: 10.12\. NOTES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If you intend to run your own public authoritative Internet DNS server, you
    will need a public static IP address from your Internet provider (which costs
    more). Your domain registrar will need this static IP address to forward your
    zone's DNS queries to your DNS server. If you can't or choose not to get a public
    static IP address, you will need to use the services of your domain name registrar
    or a third party to host a zone file for your domain name. You may still run your
    DNS server to be authoritative locally (within your private network) without a
    public static IP address.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you are going to be running a locally authoritative DNS server and you utilize
    DHCP to configure your network clients, be sure to modify your DHCP server's configuration
    to point clients to your server's IP for DNS resolution. This will ensure that
    clients on your local domain benefit from your DNS server's cache and zone information.
    If you are behind a NAT router and don't intend to use your DNS server authoritatively
    on the Internet, keep port 53 closed in your router's configuration (this should
    already be the default).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
