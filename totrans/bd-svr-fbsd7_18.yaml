- en: Chapter 5\. COURIER - IMAP SERVER 4.3.0
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 5 章\. COURIER - IMAP 服务器 4.3.0
- en: '[HTTP://WWW.COURIER-MTA.ORG/IMAP](HTTP://WWW.COURIER-MTA.ORG/IMAP)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[HTTP://WWW.COURIER-MTA.ORG/IMAP](HTTP://WWW.COURIER-MTA.ORG/IMAP)'
- en: 5.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.1\. 摘要
- en: Courier-IMAP is an open source IMAP (Internet Message Access Protocol) server
    that functions in conjunction with an MTA (Mail Transfer Agent) such as Postfix.
    Courier-IMAP provides access to Maildir mailboxes, a system for email storage
    first introduced in Qmail.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-IMAP 是一个开源的 IMAP (互联网消息访问协议) 服务器，与 Postfix 等MTA (邮件传输代理) 一起工作。Courier-IMAP
    提供对 Maildir 邮箱的访问，这是一个在 Qmail 中首次引入的电子邮件存储系统。
- en: Courier-IMAP also includes a POP3 (Post Office Protocol version 3) server that
    provides POP3 protocol access to Maildir mailboxes. POP3 is currently the most
    popular email retrieval protocol; virtually all email providers support it. A
    POP3 mail transaction consists of a client-initiated connection to the server,
    the downloading of messages, deletion of those messages from the server, and connection
    termination. This method of email retrieval is well suited to users who access
    their email from the same computer on a consistent basis, but it can be cumbersome
    for users who need email access from a variety of different computers (e.g., work,
    home, Internet café, etc.).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-IMAP 还包括一个 POP3 (邮局协议第 3 版) 服务器，它为 Maildir 邮箱提供 POP3 协议访问。POP3 是目前最流行的电子邮件检索协议；几乎所有电子邮件提供商都支持它。一个
    POP3 邮件事务包括客户端到服务器的初始化连接，下载消息，从服务器删除这些消息，以及连接终止。这种方法适用于经常从同一台计算机访问电子邮件的用户，但对于需要从不同计算机（例如，工作、家庭、互联网咖啡馆等）访问电子邮件的用户来说可能有些繁琐。
- en: IMAP was written by Mark Crispin in 1986 to provide an alternative to POP. Some
    advantages IMAP provides over POP are on-demand message downloading (only selected
    messages are downloaded to the client instead of the whole mailbox), support for
    multiple mailboxes (IMAP users can create and move messages between folders on
    the server), and portable mailbox access (IMAP users may move between different
    computers and have full access to their mail; POP users are restricted to the
    machine where their email was downloaded).
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: IMAP 由 Mark Crispin 在 1986 年编写，旨在提供 POP 的替代方案。IMAP 相较于 POP 的一些优势包括按需下载消息（仅下载选定的消息到客户端，而不是整个邮箱），支持多个邮箱（IMAP
    用户可以在服务器上的文件夹之间创建和移动消息），以及便携式邮箱访问（IMAP 用户可以在不同的计算机之间移动并完全访问他们的邮件；POP 用户仅限于下载邮件的机器）。
- en: Sam Varshavchik wrote Courier-IMAP in 1999\. He did so to provide IMAP support
    to MTAs employing the Maildir format; none existed at the time.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Sam Varshavchik 在 1999 年编写了 Courier-IMAP。他这样做是为了为采用 Maildir 格式的 MTA 提供IMAP 支持；当时还没有这样的产品。
- en: 5.2\. RESOURCES
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.2\. 资源
- en: Official Courier-IMAP Documentation
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 官方 Courier-IMAP 文档
- en: '[http://www.courier-mta.org/imap/documentation.html](http://www.courier-mta.org/imap/documentation.html)'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.courier-mta.org/imap/documentation.html](http://www.courier-mta.org/imap/documentation.html)'
- en: RFC 3501 - Internet Message Access Protocol (IMAP)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 3501 - 互联网消息访问协议 (IMAP)
- en: '[http://tools.ietf.org/html/rfc3501](http://tools.ietf.org/html/rfc3501)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://tools.ietf.org/html/rfc3501](http://tools.ietf.org/html/rfc3501)'
- en: RFC 1939 - Post Office Protocol - Version 3 (POP3)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 1939 - 邮局协议 - 第 3 版 (POP3)
- en: '[http://tools.ietf.org/html/rfc1939](http://tools.ietf.org/html/rfc1939)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://tools.ietf.org/html/rfc1939](http://tools.ietf.org/html/rfc1939)'
- en: 5.3\. REQUIRED
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.3\. 必需项
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (参见 "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 更新的端口集合 (参见
    "[FreeBSD 端口集合](freebsd_ports_collection.html#freebsd_ports_collection)")'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) MTA configured
    to deliver to Maildir (see "[Postfix SMTP Server 2.5.1](postfix_smtp_server_2.5.1.html#postfix_smtp_server_2.5.1)")'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 配置为向 Maildir
    交付的 MTA (参见 "[Postfix SMTP 服务器 2.5.1](postfix_smtp_server_2.5.1.html#postfix_smtp_server_2.5.1)")'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Courier-authlib
    (see "Courier-authlib 0.60.2" on page 39)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Courier-authlib
    (参见第 39 页的 "Courier-authlib 0.60.2")'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 互联网连接'
- en: 5.4\. OPTIONAL
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.4\. 可选项
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) OpenSSL with
    a signed SSL Certificate (see "[OpenSSL 0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)");
    if you need secure communication between the email client and the server, OpenSSL
    should be installed before starting'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 使用带有签名SSL证书的OpenSSL（见“[OpenSSL
    0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)”）；如果您需要在电子邮件客户端和服务器之间进行安全通信，应在开始之前安装OpenSSL。'
- en: 5.5\. PREPARATION
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.5\. 准备
- en: Become the superuser.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: 5.6\. INSTALL
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.6\. 安装
- en: 'To begin the installation of Courier-IMAP, enter the following commands:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始安装Courier-IMAP，请输入以下命令：
- en: '[PRE0]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu with a list of options for Courier-IMAP will appear. Leave the options
    at their defaults; press [tab] to select OK and then press [enter] to start the
    installation.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 将会显示一个包含Courier-IMAP选项列表的菜单。保留选项的默认值；按[tab]键选择OK，然后按[enter]键开始安装。
- en: '* * *'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Courier-IMAP includes both an IMAP and a POP3 server. This guide
    will configure both services; if you do not wish to enable a particular server,
    simply skip to the appropriate part of the "[Testing](testing.html#testing)" section
    (beginning).'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** Courier-IMAP包含IMAP和POP3服务器。本指南将配置这两个服务；如果您不想启用特定服务器，只需跳转到“[测试](testing.html#testing)”部分的相应部分（开始）。'
- en: '* * *'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 5.7\. CONFIGURE
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.7\. 配置
- en: Once the installation process is complete, it's time to configure Courier-IMAP
    for use on your system.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候为您的系统配置Courier-IMAP了。
- en: To enable secure communications between Courier-IMAP and email clients, you
    need to configure SSL Certificates. If you do not wish to enable secure communications,
    skip to "See [Testing](testing.html#testing)". Courier-IMAP needs the private
    server key and the server's SSL Certificate combined into a single file. We will
    assume your private key and server certificates reside in the /usr/local/openssl/certs
    directory.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要启用Courier-IMAP和电子邮件客户端之间的安全通信，您需要配置SSL证书。如果您不想启用安全通信，请跳转到“查看[测试](testing.html#testing)”部分。Courier-IMAP需要将私有服务器密钥和服务器SSL证书合并到一个文件中。我们假设您的私有密钥和服务器证书位于/usr/local/openssl/certs目录。
- en: 'The following commands will merge your private key with your server certificate
    into a single file that Courier-IMAP can use:'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下命令将合并您的私有密钥与您的服务器证书，生成Courier-IMAP可以使用的单个文件：
- en: '[PRE1]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[host.example.com](http://host.example.com)`-unencrypted-key.pem` is your server''s
    unencrypted private key file.'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[host.example.com](http://host.example.com)`-unencrypted-key.pem`是您的服务器未加密的私有密钥文件。'
- en: '[host.example.com](http://host.example.com)`-key-cert.pem` is the combined
    key and certificate file.'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[host.example.com](http://host.example.com)`-key-cert.pem`是合并的密钥和证书文件。'
- en: '[host.example.com](http://host.example.com)`-cert.pem` is the server''s public
    certificate file.'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[host.example.com](http://host.example.com)`-cert.pem`是服务器的公共证书文件。'
- en: Change these example filenames to match the naming conventions you used when
    you created your server key and certificate files with OpenSSL.
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将这些示例文件名更改为与您使用OpenSSL创建服务器密钥和证书文件时使用的命名约定相匹配。
- en: 'You will need to tell Courier-IMAP where the combined key-certificate file
    (the one created in step 1) resides by editing the imap-ssl and pop3d-ssl files
    located in /usr/local/etc/courier-imap. Open and modify the imap-ssl file as follows
    (~257):'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要通过编辑位于/usr/local/etc/courier-imap的imap-ssl和pop3d-ssl文件来告诉Courier-IMAP合并的密钥证书文件（在步骤1中创建的文件）的位置。如下打开并修改imap-ssl文件（约257行）：
- en: '[PRE2]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Save and exit.
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 'Open and modify the pop3d-ssl file as follows (~244):'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如下打开并修改pop3d-ssl文件（约244行）：
- en: '[PRE3]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Save and exit.
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: Substitute the appropriate filename for [host.example.com](http://host.example.com)`-key-cert.pem`
    if you used a different naming convention. If the path to this file is different
    than above, be sure to change that as well. Your certificate file must be in the
    format key followed by certificate (as demonstrated in step 1), with no extraneous
    text.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您使用了不同的命名约定，请用适当的文件名替换[host.example.com](http://host.example.com)`-key-cert.pem`。如果此文件的路径与上述不同，请确保更改。您的证书文件必须采用密钥后跟证书的格式（如步骤1中所示），且不得包含任何多余文本。
- en: 5.8\. TESTING
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.8\. 测试
- en: In this section we'll perform some basic tests to confirm that Courier-IMAP
    is answering requests properly.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将执行一些基本测试，以确认Courier-IMAP能够正确响应请求。
- en: 5.8.1\. IMAP
  id: totrans-49
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 5.8.1\. IMAP
- en: You will need the username and password of an account on your system to test
    IMAP functionality. Ensure the user account you select has an existing Maildir
    directory. This directory is automatically created by Postfix when it delivers
    mail to users. If a user has not yet received email, the Maildir directory will
    be absent. Use the `maildirmake` command to manually create a Maildir directory
    in this case. See "[maildirmake](utilities-id2.html#maildirmake)" for details.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 你将需要系统上账户的用户名和密码来测试 IMAP 功能。确保你选择的用户账户具有现有的 Maildir 目录。此目录由 Postfix 在向用户投递邮件时自动创建。如果用户尚未收到电子邮件，则
    Maildir 目录将不存在。在这种情况下，使用 `maildirmake` 命令手动创建 Maildir 目录。有关详细信息，请参阅 "[maildirmake](utilities-id2.html#maildirmake)"。
- en: 'Check that Courier-IMAP starts and handles requests properly. To enable the
    IMAP service, modify rc.conf. Open the rc.conf file located in /etc:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查 Courier-IMAP 是否启动并正确处理请求。要启用 IMAP 服务，修改 rc.conf。打开位于 /etc 的 rc.conf 文件：
- en: '[PRE4]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'and add one or both of the following lines:'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下一行或两行：
- en: '[PRE5]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '* * *'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** If you did not configure Courier-IMAP to use SSL for secure communications,
    omit the second line.'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 如果你没有配置 Courier-IMAP 使用 SSL 进行安全通信，则省略第二行。'
- en: '* * *'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'To start the IMAP service, enter:'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要启动 IMAP 服务，输入：
- en: '[PRE6]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Enter the following command to connect to the IMAP server on port 143:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令以连接到端口 143 上的 IMAP 服务器：
- en: 'Code View:'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 代码视图：
- en: '[PRE7]'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '* * *'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** This output, the IMAP server connection banner, will appear on
    a single line.'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 此输出，即 IMAP 服务器连接横幅，将显示在一行上。'
- en: '* * *'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: Log in using a valid username and password for your system.
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用系统有效的用户名和密码登录。
- en: '[PRE8]'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The next command is typically sent by mail clients prior to retrieving messages
    from the mailbox; you'll want to see a response similar to that shown below.
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 下一个命令通常在邮件客户端从邮箱中检索消息之前发送；你将希望看到类似以下所示的响应。
- en: '[PRE9]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: If your session looked similar to the one above, then Courier-IMAP is functional.
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你的会话与上面类似，那么 Courier-IMAP 是正常的。
- en: 'Testing Courier-IMAP with SSL is similar, but uses the OpenSSL command-line
    tool. (If you did not choose to configure secure communications with SSL, you
    may proceed to the "POP3" section below.) The following command begins an IMAP
    session with SSL:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 SSL 测试 Courier-IMAP 类似，但使用 OpenSSL 命令行工具。（如果你没有选择配置使用 SSL 的安全通信，你可以继续下面的“POP3”部分。）以下命令开始一个使用
    SSL 的 IMAP 会话：
- en: '[PRE11]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Once the connection is established, you may issue the same commands as above
    to test IMAP-SSL functionality, starting with the command `aa login` `*username
    password*`.
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一旦建立连接，你可以发出与上面相同的命令来测试 IMAP-SSL 功能，从 `aa login` `*用户名 密码*` 命令开始。
- en: 5.8.2\. POP3
  id: totrans-75
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 5.8.2\. POP3
- en: You will need the username and password of an account on your system to test
    POP3 functionality. Ensure the user account you select has an existing Maildir
    directory. This directory is automatically created by Postfix when it delivers
    mail to users. If a user has not yet received email, the Maildir directory will
    be absent. Use the `maildirmake` command to manually create a Maildir in this
    case. See "[maildirmake](utilities-id2.html#maildirmake)" for details.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 你将需要系统上账户的用户名和密码来测试 POP3 功能。确保你选择的用户账户具有现有的 Maildir 目录。此目录由 Postfix 在向用户投递邮件时自动创建。如果用户尚未收到电子邮件，则
    Maildir 目录将不存在。在这种情况下，使用 `maildirmake` 命令手动创建 Maildir。有关详细信息，请参阅 "[maildirmake](utilities-id2.html#maildirmake)"。
- en: 'Check that Courier-IMAP starts and handles requests properly. To enable the
    POP3 service, open the rc.conf file located in /etc:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查 Courier-IMAP 是否启动并正确处理请求。要启用 POP3 服务，打开位于 /etc 的 rc.conf 文件：
- en: '[PRE12]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'and add one or both of the following lines:'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下一行或两行：
- en: '[PRE13]'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '* * *'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** If you did not configure Courier-IMAP to use SSL for secure communication,
    omit the second line.'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 如果你没有配置 Courier-IMAP 使用 SSL 进行安全通信，则省略第二行。'
- en: '* * *'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'To start the POP3 service, enter:'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要启动 POP3 服务，输入：
- en: '[PRE14]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Enter the following command to connect to the POP3 server on port 110:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令以连接到端口 110 上的 POP3 服务器：
- en: '[PRE15]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Log in using a valid username and password for your system.
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用系统有效的用户名和密码登录。
- en: '[PRE16]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: The `stat` command triggers the POP3 server to return what is known as a drop
    listing. The seven (in the drop listing below) signifies the number of messages
    in the mailbox, followed by the number of bytes these messages consume on disk
    (in octets). Your output will certainly be different depending on the contents
    of your mailbox.
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`stat` 命令触发 POP3 服务器返回所谓的删除列表。以下删除列表中的七个（在下面的删除列表中）表示邮箱中的消息数量，后面跟着这些消息在磁盘上消耗的字节数（以字节为单位）。你的输出将根据你的邮箱内容而有所不同。'
- en: '[PRE17]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: At this point, we can assume the POP3 server is functioning correctly.
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 到目前为止，我们可以假设 POP3 服务器正在正确运行。
- en: 'You can test the POP3 daemon with SSL the same way, using the OpenSSL command-line
    utility. The following command begins a POP3 session over SSL:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以使用与 OpenSSL 命令行工具相同的方式测试带有 SSL 的 POP3 守护进程。以下命令通过 SSL 开始一个 POP3 会话：
- en: '[PRE18]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Once the connection is established, you may issue the same commands as above,
    starting with the command `user` `*username*`, to test POP3 SSL functionality.
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一旦建立连接，您可以使用与上面相同的命令，从 `user *username*` 命令开始，以测试 POP3 SSL 功能。
- en: 5.9\. UTILITIES
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.9. 实用工具
- en: Following is brief information on the `maildirmake` program, which is used to
    create a user's initial Maildir directory structure or to add subdirectories to
    an existing Maildir.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是关于 `maildirmake` 程序的简要信息，该程序用于创建用户的初始 Maildir 目录结构或向现有的 Maildir 添加子目录。
- en: 5.9.1\. maildirmake
  id: totrans-98
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 5.9.1. maildirmake
- en: This utility is used to create a user's Maildir directory and subdirectories.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 此实用程序用于创建用户的 Maildir 目录和子目录。
- en: Command
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`maildirmake`'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '`maildirmake`'
- en: Syntax
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`maildirmake -``*options*` `Maildir`'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '`maildirmake -*options* Maildir`'
- en: Options
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE19]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Create a subdirectory within an existing Maildir
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在现有的 Maildir 中创建子目录
- en: Examples
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: The following examples assume you are the root user and in the appropriate user's
    home directory.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例假设您是 root 用户并且位于适当的用户家目录中。
- en: 'To create a new Maildir, enter:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个新的 Maildir，请输入：
- en: '[PRE20]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: In place of `*user*`, substitute the username of the account for which you are
    creating the Maildir.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 用 `*用户*` 替换您为创建 Maildir 而创建的账户的用户名。
- en: 'To create a subdirectory named Junk within an existing Maildir, use the command:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 要在现有的 Maildir 中创建名为 Junk 的子目录，请使用以下命令：
- en: '[PRE21]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: In place of `*user*`, substitute the username of the account for which you are
    creating the subdirectory.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 用 `*用户*` 替换您为创建子目录而创建的账户的用户名。
- en: 5.10\. CONFIG FILES
  id: totrans-115
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.10. 配置文件
- en: /usr/local/etc/courier-imap/imapd
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/courier-imap/imapd
- en: The main IMAP configuration file
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 主要的 IMAP 配置文件
- en: /usr/local/etc/courier-imap/imapd-ssl
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/courier-imap/imapd-ssl
- en: Supplements the main IMAP configuration file with options pertaining to SSL
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 SSL 相关的选项补充了主要的 IMAP 配置文件
- en: /usr/local/etc/courier-imap/pop3d
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/courier-imap/pop3d
- en: The main POP3 configuration file
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 主要的 POP3 配置文件
- en: /usr/local/etc/courier-imap/pop3d-ssl
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/courier-imap/pop3d-ssl
- en: Supplements the main POP3 configuration file with options pertaining to SSL
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 SSL 相关的选项补充了主要的 POP3 配置文件
- en: 5.11\. LOG FILES
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.11. 日志文件
- en: /var/log/maillog
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/maillog
- en: General log of email activity
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件活动的一般日志
- en: 5.12\. NOTES
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.12. 备注
- en: If you installed Courier-IMAP without SSL support, be aware that port 143 transmits
    login and password information "in the clear." This means that it can be obtained
    by unauthorized persons. If all of your users will be using email clients with
    SSL support, it may be a good idea to run only the SSL-enabled instance of Courier-IMAP
    by removing the non-SSL startup line from the /etc/rc.conf file.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您在没有 SSL 支持的情况下安装了 Courier-IMAP，请注意端口 143 传输登录和密码信息是“明文”。这意味着它可能被未经授权的人员获取。如果您的所有用户都将使用具有
    SSL 支持的电子邮件客户端，那么运行仅启用 SSL 的 Courier-IMAP 实例可能是一个好主意，方法是删除 /etc/rc.conf 文件中的非
    SSL 启动行。
- en: If your server is behind a NAT router, you can enable port forwarding to only
    port 993\. This would allow only SSL connections from outside the local network.
    Local traffic would still be vulnerable unless you have Standard IMAP disabled
    as mentioned above.
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您的服务器位于 NAT 路由器后面，您可以通过仅转发端口 993 来启用端口转发。这将只允许来自本地网络外部的 SSL 连接。除非您已禁用如上所述的标准
    IMAP，否则本地流量仍然容易受到攻击。
- en: If you intend to install a webmail client that uses IMAP (such as SquirrelMail;
    see "[SquirrelMail 1.4.13](squirrelmail_1.4.13.html#squirrelmail_1.4.13)") then
    do not disable Standard IMAP functionality on port 143.
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您打算安装使用 IMAP 的 Webmail 客户端（如 SquirrelMail；请参阅 "[SquirrelMail 1.4.13](squirrelmail_1.4.13.html#squirrelmail_1.4.13)"），请不要禁用端口
    143 上的标准 IMAP 功能。
- en: 'If you choose to remove the non-SSL imapd line from rc.conf, remember to stop
    the non-SSL daemon like this:'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您选择从 rc.conf 中删除非 SSL imapd 行，请记住像这样停止非 SSL 守护进程：
- en: '[PRE22]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Similarly, if you installed POP3 without SSL support, be aware that port 110
    transmits login and password information "in the clear." This means that that
    it can be obtained by unauthorized persons. If all of your users will be using
    email clients with SSL support, it may be a good idea to run only the SSL-enabled
    instance of the POP3 daemon by removing the non-SSL startup line from the /etc/rc.conf
    file.
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同样，如果你安装了没有SSL支持的POP3，请注意端口110会明文传输登录和密码信息。这意味着它可能被未经授权的人获取。如果你的所有用户都将使用支持SSL的电子邮件客户端，那么可能只运行SSL启用的POP3守护进程实例是个好主意，方法是删除/etc/rc.conf文件中的非SSL启动行。
- en: If your server is behind a NAT router, you can enable port forwarding to only
    port 995\. This would allow only SSL connections from outside the local network.
    Local traffic would still be vulnerable unless you have non-SSL POP3 disabled
    as mentioned above.
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你的服务器位于NAT路由器后面，你可以启用仅端口995的端口转发。这将只允许来自本地网络外部的SSL连接。除非你像上面提到的那样禁用了非SSL POP3，否则本地流量仍然会容易受到攻击。
- en: 'If you choose to remove the non-SSL pop3d line from rc.conf, remember to stop
    the non-SSL daemon like this:'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你选择从rc.conf中移除非SSL pop3d行，请记住这样停止非SSL守护进程：
- en: '[PRE23]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
