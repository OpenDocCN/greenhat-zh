- en: Chapter 3. HUBS, SWITCHES, AND ROUTERS
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Any time a network includes more than two nodes, it must have some way to connect
    any pair of nodes. Large networks can have very complicated structures with many
    branches and extensions, but the core of every network can be reduced to just
    a few patterns. The simplified layout of a network is known as its *topology*.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: The most common network topologies are a big loop known as a *ring*; a hub system
    with everything connected to a central core called a *star*, a common path (not
    a loop) that connects nodes using a time-sharing method; and a *mesh*, in which
    there's a direct connection from every node to every other node. [Figure 3-1](ch03.html#every_network_uses_a_specific_topology
    "Figure 3-1. Every network uses a specific topology.") shows simplified diagrams
    of each network topology.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: In a loop network, such as IBM's old token ring design, data moves around the
    loop until it reaches its destination. In the much more common hub system, each
    data packet travels to a central location, where a control device reads the address
    and sends it back out to the right destination. Ethernet networks, which include
    most small LANs, are hub systems.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: '![Every network uses a specific topology.](tagoreillycom20090324nostarchimages266220.png.jpg)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
- en: '**Figure 3-1. Every network uses a specific topology.**'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: Mesh topology is not common in small home or office networks, but the wide area
    networks that connect your small network to the Internet often use mesh designs.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: This chapter describes the equipment at the center of a star network that connects
    the computers and other nodes to one another, and the related devices that provide
    connections between networks. Unless you're connecting just two nodes, these hubs,
    switches, and routers are essential network building blocks.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: Hubs and Switches
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Both hubs and switches are exchange points at the logical center of an Ethernet
    network, as shown in [Figure 3-2](ch03.html#a_hub_or_switch_is_the_central_connecti
    "Figure 3-2. A hub or switch is the central connection point in an Ethernet network.").
    Each computer or other network node connects to a hub or switch through a cable
    plugged into a socket called a *port*. In a small network, a hub or switch is
    almost always a tabletop box with indicator lights on the front and Ethernet ports
    on the back. In a larger network, the hub or switch might be a panel that mounts
    in an equipment rack.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '![A hub or switch is the central connection point in an Ethernet network.](tagoreillycom20090324nostarchimages266222.png.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
- en: '**Figure 3-2. A hub or switch is the central connection point in an Ethernet
    network.**'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: The maximum data transfer speed of a network is the data-handling speed of the
    hub or switch. You might find a 10 Mbps Ethernet hub, but as faster devices have
    become less expensive, there's not much reason to use one. Today, the most common
    hubs and switches are designed for both 10 Mbps and 100 Mbps operation. The latest
    generation of switches and hubs supports even faster Gigabit Ethernet (1000 Mbps)
    switches, often at prices only slightly higher than those of older 100 Mbps versions.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 网络的最大数据传输速度是中心节点或交换机的数据处理速度。你可能会找到一个10 Mbps的以太网中心节点，但随着更快的设备变得不那么昂贵，使用它的理由不多。今天，最常见的中心节点和交换机都设计为支持10
    Mbps和100 Mbps的操作。最新一代的交换机和中心节点支持甚至更快的千兆以太网（1000 Mbps）交换机，价格通常仅略高于旧100 Mbps版本的价格。
- en: Hubs
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 中心节点
- en: When a data packet enters a hub, the hub relays that packet to all of the hub's
    ports (and onward to the nodes connected to those ports). Each node compares the
    address on the packet with its own address and either accepts it if the address
    is the same or ignores it if the packet is addressed to some other node. Because
    the hub sends each packet to every port, only one packet can travel through the
    network at a time (we're talking about many packets per second, but they still
    move through the network one at a time). If two or more computers try to send
    packets at exactly the same time, Ethernet's collision detection feature forces
    them to stop, wait, and try again a fraction of a second later.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个数据包进入中心节点时，中心节点会将该数据包转发到中心节点的所有端口（以及连接到这些端口的节点）。每个节点会将数据包上的地址与其自己的地址进行比较，如果地址相同则接受它，如果数据包被发送到其他节点则忽略它。因为中心节点将每个数据包发送到每个端口，所以一次只能有一个数据包通过网络（我们说的是每秒许多数据包，但它们仍然一个接一个地通过网络）。如果两台或多台计算机试图同时发送数据包，以太网的碰撞检测功能会迫使它们停止，等待，并在几秒钟后再次尝试。
- en: In order to prevent collisions, each node must examine the network to be certain
    that no other node is already using the hub before it transmits a packet. Therefore,
    a network with a 10/100 hub is no faster than the slowest node. If all the computers
    in your network use 100 Mbps network adapters but the printer connects through
    a 10 Mbps port, the whole network will run at only 10 Mbps or less.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 为了防止碰撞，每个节点在发送数据包之前必须检查网络，以确保没有其他节点已经在使用中心节点。因此，带有10/100中心节点的网络的速度不会比最慢的节点快。如果你的网络中的所有计算机都使用100
    Mbps网络适配器，但打印机通过10 Mbps端口连接，整个网络将只能以10 Mbps或更慢的速度运行。
- en: 'As more nodes try to use a hub at the same time, the data transfer speed through
    the entire network drops. This could have a significant effect on a busy network
    that uses a hub: The actual data transfer could be only a fraction of the nominal
    10 Mbps or 100 Mbps.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 当越来越多的节点同时尝试使用一个中心节点时，整个网络的数据传输速度会下降。这可能会对使用中心节点的繁忙网络产生重大影响：实际的数据传输可能只有标称的10
    Mbps或100 Mbps的一小部分。
- en: In general, hubs are slow, simple, and cheap. But the difference in cost between
    a hub and a switch is often insignificant, so a switch is almost always the better
    choice.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，中心节点速度慢、简单且便宜。但中心节点和交换机之间的成本差异通常微不足道，因此交换机几乎总是更好的选择。
- en: Switches
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交换机
- en: A data switch performs the same function as a hub—it connects the nodes of a
    network to one another—but it does the job quite differently. Rather than sending
    every packet to every port, a switch reads the address section of each incoming
    packet and sets up a direct connection from the source of each packet to its destination.
    In the meantime, if some other node tries to send a data packet to another unused
    port, the switch can set up the link without breaking the other connection. As
    [Figure 3-3](ch03.html#an_ethernet_switch_can_support_two_or_m "Figure 3-3. An
    Ethernet switch can support two or more simultaneous connections.") shows, a switch
    can handle more than one connection at the same time. Because a network node connected
    to a switch doesn't have to monitor the entire network for possible collisions,
    it can send and receive data at the same time (this is called *full duplex* mode).
    Both of these features—multiple segments and full duplex operation—mean that data
    can move through a switch more quickly than through a hub.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 数据交换机执行与集线器相同的功能——它将网络的节点相互连接，但它以完全不同的方式完成这项工作。交换机不会将每个数据包发送到每个端口，而是读取每个传入数据包的地址部分，并为每个数据包的源地址和目标地址建立直接连接。与此同时，如果其他节点尝试将数据包发送到另一个未使用的端口，交换机可以在不中断其他连接的情况下建立链接。如图[图3-3](ch03.html#an_ethernet_switch_can_support_two_or_m
    "图3-3. 以太网交换机可以支持两个或更多同时连接。")所示，交换机可以同时处理多个连接。因为连接到交换机的网络节点不需要监控整个网络以检测可能的冲突，所以它可以同时发送和接收数据（这称为*全双工*模式）。这两个特性——多个段和全双工操作——意味着数据可以通过交换机比通过集线器更快地移动。
- en: '![An Ethernet switch can support two or more simultaneous connections.](tagoreillycom20090324nostarchimages266224.png.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![以太网交换机可以支持两个或更多同时连接。](tagoreillycom20090324nostarchimages266224.png.jpg)'
- en: '**Figure 3-3. An Ethernet switch can support two or more simultaneous connections.**'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3-3. 以太网交换机可以支持两个或更多同时连接。**'
- en: Data switches (and hubs) come in several sizes and shapes. The smallest switches
    often have four, five, or eight ports, inside a box that can sit on a table or
    shelf, like the one shown in [Figure 3-4](ch03.html#this_switch_connects_five_network_nodes
    "Figure 3-4. This switch connects five network nodes."). When your network expands
    to need more ports than your original switch can provide, you can connect one
    or more additional switches to one of the ports on the original unit.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 数据交换机（和集线器）有多种尺寸和形状。最小的交换机通常有四个、五个或八个端口，放在一个可以放在桌子或架子上的盒子里，如图[图3-4](ch03.html#this_switch_connects_five_network_nodes
    "图3-4. 此交换机连接了五个网络节点。")所示。当您的网络扩展到需要比原始交换机提供的端口更多的端口时，您可以将一个或多个额外的交换机连接到原始单元的一个端口上。
- en: '![This switch connects five network nodes.](tagoreillycom20090324nostarchimages266226.png.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![此交换机连接了五个网络节点。](tagoreillycom20090324nostarchimages266226.png.jpg)'
- en: '**Figure 3-4. This switch connects five network nodes.**'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3-4. 此交换机连接了五个网络节点。**'
- en: '*Photo courtesy of Linksys, a division of Cisco Systems, Inc.*'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '*照片由思科系统公司子公司Linksys提供*'
- en: Networks in larger business offices usually run cables from each computer back
    to a central space where all the switching equipment is mounted on a wall plate
    or an equipment rack. This is often the same room where in-house telephone equipment
    connects to the telephone company's outside lines. This space is often called
    a *wiring closet*.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 大型商务办公室中的网络通常从每台计算机向后布线到所有交换设备安装的中央空间，这些设备安装在墙壁板或设备架上。这通常是内部电话设备连接到电话公司外部线路的同一房间。这个空间通常被称为*配线间*。
- en: LANs and WANs
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 局域网和广域网
- en: The network in your home or office is known as a *local area network (LAN)*.
    All of the computers connected to a LAN can share peripheral devices (such as
    a printer or a scanner), they can run programs and read data from other computers
    on the same LAN, and they all share a common connection to the Internet. In a
    home network, the LAN might also include home entertainment systems and game controllers.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 您家中或办公室的网络被称为*局域网（LAN）*。连接到LAN的所有计算机可以共享外围设备（如打印机或扫描仪），它们可以在同一LAN上的其他计算机上运行程序和读取数据，并且它们都共享一个通向互联网的公共连接。在家庭网络中，局域网可能还包括家庭娱乐系统和游戏控制器。
- en: A LAN also uses the same set of rules and settings to control communication
    among all the networked computers. These include the name of the network itself
    and names (or address numbers, or both) for each computer, and sometimes firewalls
    that protect the privacy of the people using the LAN.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: When you want to connect several LANs, you can create a "network of networks"
    called a *wide area network (WAN)* that can use communications channels such as
    telephone lines or a cable TV service to provide the links. [Figure 3-5](ch03s02.html#a_lan_is_usually_limited_to_a_single_bu
    "Figure 3-5. A LAN is usually limited to a single building or some other small
    space; a WAN can connect several LANs.") shows a simple LAN connected to a WAN.
    Your Internet service provider (*ISP*) uses a WAN to connect you to the Internet.
    The Internet itself is a set of connection points that link a lot of WANs.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: It's also possible to connect a single computer directly to a WAN without going
    through a LAN. If you have just one computer, and it's connected directly to a
    modem, your computer is on your ISP's WAN.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '![A LAN is usually limited to a single building or some other small space;
    a WAN can connect several LANs.](tagoreillycom20090324nostarchimages266228.png.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
- en: '**Figure 3-5. A LAN is usually limited to a single building or some other small
    space; a WAN can connect several LANs.**'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: Bridges and Routers
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Any time you connect two networks, you must use a tool that translates the address
    and control data used by each network into values that the other network can understand.
    When the device simply examines the address on each packet and decides which packets
    to forward to the other network, it's a *bridge*. When the device examines the
    address (or routing) information in each packet and sends the packet along to
    its ultimate destination (which might be in yet another LAN far from the original),
    it's a *router*.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Bridges and routers operate between two different networks. Don't confuse them
    with switches and hubs that distribute data *within* a network. However, many
    routers combine functions with a switch in a single device.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: When you connect your LAN to the Internet, you add a router as a node on the
    LAN. This kind of router is sometimes called a *gateway router* because packets
    from your LAN must pass through it on their way to the Internet (and, of course,
    packets from the Internet also pass through the router on their way to your LAN).
    The most common gateway routers are specifically designed to supply the right
    kind of signaling and address conversion required by DSL or cable TV connections.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: Combination Boxes
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In relatively small networks, the functions of two or more network control devices
    are often combined into a single box. For example, a router that connects the
    network to the Internet could also include a built-in switch that connects several
    nodes, or a DSL modem might be matched with a gateway router. Many other combinations
    are also widely available.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: If you can find one that meets your network's requirements, a combined package
    is almost always a better choice than two or more separate pieces. A single unit
    is almost always less costly than separate components because the case and the
    power supply account for a major portion of the total price, and it's often easier
    to configure the network when one device handles several activities.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您能找到一个满足您网络要求的组合包，那么它几乎总是比两个或更多单独部件更好的选择。单个单元几乎总是比单独的组件更便宜，因为外壳和电源供应占了总价格的大部分，而且当一台设备处理多个活动时，配置网络通常更容易。
- en: 'Using a single device that combines two or more activities offers another advantage
    that might not be obvious until you have been using your network for a while,
    and you either need to troubleshoot a problem or you want to add more devices
    to the network: The connections inside a combined device don''t require external
    cables. As [Figure 3-6](ch03s04.html#the_cables_connected_to_your_network_co "Figure 3-6. The
    cables connected to your network controls can often form a confusing mess.") shows,
    the area where your network cables plug into your switches, routers, modems, and
    so forth is almost always a rat''s nest of confusing wiring; anything you can
    do to reduce the number of cables will make things a lot easier.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 使用结合两个或更多活动的单个设备提供了另一个可能直到您使用网络一段时间后才会变得明显的优势，要么是因为您需要解决一个问题，要么是因为您想向网络添加更多设备：组合设备内部的连接不需要外部电缆。如图[图3-6](ch03s04.html#the_cables_connected_to_your_network_co
    "图3-6. 连接到您网络控制器的电缆常常会形成一团混乱。")所示，您的网络电缆插入交换机、路由器、调制解调器等设备的地方几乎总是混乱的线缆团；您能做的任何减少电缆数量的工作都会使事情变得容易得多。
- en: '![The cables connected to your network controls can often form a confusing
    mess.](tagoreillycom20090324nostarchimages266230.png.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![连接到您网络控制器的电缆常常会形成一团混乱。](tagoreillycom20090324nostarchimages266230.png.jpg)'
- en: '**Figure 3-6. The cables connected to your network controls can often form
    a confusing mess.**'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3-6. 连接到您网络控制器的电缆常常会形成一团混乱。**'
