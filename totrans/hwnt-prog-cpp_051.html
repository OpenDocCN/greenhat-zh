<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_57">
<a name="ch04" class="calibre6" id="ch04"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="58" class="calibre16" id="58"/><a name="ch04lev1sec23" class="calibre16" id="ch04lev1sec23"/><span class="chapter-titlelabel">Program 49: </span>It's As Easy As Falling off a Link</h2><p class="b24-bookeditorial">Why does the following program sometimes dump core?</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 #include &lt;iostream&gt;
  2 #include &lt;string&gt;
  3 /************************************************
  4  * linked_list -- Class to handle a linked list *
  5  *              containing a list of strings.   *
  6  *                                              *
  7  * Member functions:                            *
  8  *      add -- Add an item to the list          *
  9  *      is_in -- Check to see if a string is    *
 10  *                      in the list.            *
 11  ************************************************/
 12 class linked_list {
 13     private:
 14         /*
 15          * Node in the list
 16          */
 17         struct node {
 18             // String in this node
 19             std::string data;
 20
 21             // Pointer to next node
 22             struct node *next;
 23         };
 24         //First item in the list
 25         struct node *first;
 26     public:
 27         // Constructor
 28         linked_list(void): first(NULL) {};
 29         // Destructor
 30         ~linked_list();
 31     private:
 32         // No copy constructor
 33         linked_list(const linked_list &amp;);
 34
 35         // No assignment operator
 36         linked_list&amp; operator = (const linked_list &amp;);
 37     public:
 38         // Add an item to the list
 39         void add(
 40             // Item to add
 41             const std::string &amp;what
 42         ) {
 43             // Create a node to add
 44             struct node *new_ptr = new node;
 45
 46             // Add the node
 47             new_ptr-&gt;next = first;
 48             new_ptr-&gt;data = what;
 49             first = new_ptr;
 50         }
 51         bool is_in(const std::string &amp;what);
 52 };
 53 /************************************************
 54  * is_in -- see if a string is in a             *
 55  *      linked list.                            *
 56  *                                              *
 57  * Returns true if string's on the list,        *
 58  *              otherwise false.                *
 59  ************************************************/
 60 bool linked_list::is_in(
 61     // String to check for
 62     const std::string &amp;what
 63 ) {
 64     /* current structure we are looking at */
 65     struct node *current_ptr;
 66
 67     current_ptr = first;
 68
 69     while (current_ptr != NULL) {
 70         if (current_ptr-&gt;data == what)
 71             return (true);
 72
 73         current_ptr = current_ptr-&gt;next;
 74     }
 75     return (false);
 76 }
 77
 78 /************************************************
 79  * linked_list::~linked_list -- Delete the      *
 80  *      data in the linked list.                *
 81  ************************************************/
 82 linked_list::~linked_list(void) {
 83     while (first != NULL) {
 84         delete first;
 85         first = first-&gt;next;
 86     }
 87 }
 88
 89 int main() {
 90     linked_list list;   // A list to play with
 91
 92     list.add("Sam");
 93     list.add("Joe");
 94     list.add("Mac");
 95
 96     if (list.is_in("Harry"))
 97         std::cout &lt;&lt; "Harry is on the list\n";
 98     else
 99         std::cout &lt;&lt; "Could not find Harry\n";
100     return (0);
101 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#322" target="_parent" class="calibre2">Hint 186</a>. <a href="LiB0121.html#575" target="_parent" class="calibre2">Answer 77</a>.)</p>
<div class="calibre1">
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="Start Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
<p class="b24-bookeditorial">A cleaning lady discovered a scuff mark on the floor of the machine room and decided to remove it. First she tried wax, then an ammonia-based cleaner, and finally, as a last resort, steel wool. The combination proved deadly. Not for the scuff mark, but for the computers.</p>
<p class="b24-bookeditorial">The next day, when the computing staff came to work, they found all their machines down. Opening the cabinets, they discovered massive shorts in all the circuit boards.</p>
<p class="b24-bookeditorial">What had happened? The cleaning lady first applied a coating of wax to the floor. The ammonia vaporized the wax, which was sucked into the computers by the cooling fans. Thus every board was coated with an even layer of sticky wax. That wasn't too bad, but next came the steel wool. The steel fibers were sucked into the machine where they stuck to the wax coating on the inside of the machine.</p>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="End Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
</div>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td height="16" class="calibre8"/>
</tr>
</table>
</div>
</div>



</body></html>