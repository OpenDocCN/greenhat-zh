["```\n  1 /************************************************\n  2  * Sum -- This program sums the sine of the     *\n  3  *      numbers from 1 to MAX. (For no good     *\n  4  *      reason other than to have something     *\n  5  *      to do that takes a long time.)          *\n  6  *                                              *\n  7  * Since this takes a long time, we have a      *\n  8  * second thread that displays the progress of  *\n  9  * the call.                                    *\n 10  ************************************************/\n 11 #include <cstdio>\n 12 #include <cmath>\n 13 #include <pthread.h>\n 14 #include <stdlib.h>\n 15\n 16 /* Counter of what we've summed so far */\n 17 static int counter;\n 18\n 19 /************************************************\n 20  * status_monitor -- Monitor the status and     *\n 21  *      tell the user how far things have       *\n 22  *      progressed.                             *\n 23  *                                              *\n 24  * This thread merely waits for the user to     *\n 25  * press <enter> and then reports the current   *\n 26  * value of counter.                            *\n 27  ************************************************/\n 28 static void *status_monitor(void *) {\n 29     /* buffer to stuff that comes in */\n 30     char buffer[3];\n 31\n 32     while (1) {\n 33         fgets(buffer, sizeof(buffer), stdin);\n 34         printf(\"Progress %d\\n\", counter);\n 35         fflush(stdout);\n 36     }\n 37 }\n 38\n 39 /************************************************\n 40  * sum -- Sum the sine of the numbers from 0 to *\n 41  *      0x3FFFFFFF.  Actually we don't care     *\n 42  *      about the answer, all we're trying to   *\n 43  *      do is create some sort of compute       *\n 44  *      bound job so that the status_monitor    *\n 45  *      can be demonstrated.                    *\n 46  ************************************************/\n 47 static void sum(void) {\n 48     static double sum = 0;       /* Sum so far */\n 49\n 50     for (counter = 0;\n 51          counter < 0x3FFFFFF;\n 52          ++counter)\n 53     {\n 54         sum += sin(double(counter));\n 55     }\n 56\n 57     printf(\"Total %f\\n\", sum);\n 58     exit (0);\n 59 }\n 60\n 61 int main() {\n 62     // Status of last system call\n 63     int status;\n 64\n 65     // Information on the status thread\n 66     pthread_t status_thread;\n 67\n 68     status = pthread_create(&status_thread, NULL,\n 69                 status_monitor, NULL);\n 70\n 71     if (status != o) {\n 72         perror(\n 73             \"ERROR: Thread create failed:\\n   \");\n 74         exit (8);\n 75     }\n 76\n 77     sum();\n 78\n 79     return(0);\n 80 }\n\n```"]