- en: Chapter 7\. CYRUS SASL 2.1.22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://ASG.WEB.CMU.EDU/SASL](HTTP://ASG.WEB.CMU.EDU/SASL)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 7.1\. SUMMARY
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: SASL (Simple Authentication and Security Layer) is a system for adding authentication
    support to connection-based protocols. For the purposes of this book, we will
    be using this mechanism for the Simple Mail Transfer Protocol (SMTP). The Postfix
    MTA employs SMTP to transfer Internet email. Adding authentication support to
    Postfix is important for users who wish to relay email through their server from
    an unsecured public network. A secure mail relay can be attained by coupling SASL
    with SSL/TLS-based encryption.
  prefs: []
  type: TYPE_NORMAL
- en: By default, the Postfix MTA is not an open email relay. While this prevents
    unauthorized users from using the server to relay spam, it also prevents legitimate
    users from sending email from a location other than the local private network.
    Cyrus SASL allows the SMTP server to verify the identity of remote users. Once
    authenticated, users are allowed remote relay privileges.
  prefs: []
  type: TYPE_NORMAL
- en: John Myers, a former systems architect at Carnegie Mellon University, published
    the SASL specification in October 1997\. Cyrus SASL is maintained under Project
    Cyrus at Carnegie Mellon.
  prefs: []
  type: TYPE_NORMAL
- en: 7.2\. RESOURCES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Official Cyrus SASL Website at Carnegie Mellon University
  prefs: []
  type: TYPE_NORMAL
- en: '[http://asg.web.cmu.edu/sasl/](http://asg.web.cmu.edu/sasl/)'
  prefs: []
  type: TYPE_NORMAL
- en: 7.3\. REQUIRED
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  prefs: []
  type: TYPE_IMG
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  prefs: []
  type: TYPE_IMG
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  prefs: []
  type: TYPE_NORMAL
- en: 7.4\. PREPARATION
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Become the superuser.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** This guide is relevant for the configuration of Cyrus SASL with
    the Postfix MTA, and it assumes that you intend to utilize SASL with SMTP coupled
    with SSL/TLS encryption to secure the PLAIN and/or LOGIN authentication methods.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 7.5\. INSTALL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'You will be installing the Cyrus SASL authentication server, which includes
    Cyrus SASL. To begin the installation of the Cyrus SASL authentication server,
    type the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: A menu should appear showing options for Cyrus SASL. We will leave these settings
    at their defaults, so press [tab] to highlight OK and then press [enter].
  prefs: []
  type: TYPE_NORMAL
- en: 7.6\. CONFIGURE
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the installation process is complete, it's time to configure Cyrus SASL
    for use on your system.
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a file named smtpd.conf. The smtpd.conf file is used by Cyrus SASL when
    it is configured to work with the Postfix MTA. Create the file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'and add these two lines to it:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The first line directs Cyrus SASL to use the SASL authentication server that
    you installed. The second line tells Cyrus SASL to announce only PLAIN and LOGIN
    methods when a client initially connects to the SMTP server.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Save and exit.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 7.7\. TESTING
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this section, we'll enable the SASL authentication server to start at boot
    time, then perform a test to confirm that it is running.
  prefs: []
  type: TYPE_NORMAL
- en: 'To configure the SASL authentication server to start automatically at boot
    time, open rc.conf:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'and add the following startup lines:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Save your changes and test by running the startup script:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'If the SASL authentications server is running, you''ll see:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The pid (process ID) will vary.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 7.8\. CONFIG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /usr/local/lib/sasl2/smtpd.conf
  prefs: []
  type: TYPE_NORMAL
- en: This file controls the behavior of the SASL daemon when used with the Postfix
    MTA. It stores parameters that tell Cyrus SASL what method of authentication to
    announce to SMTP clients.
  prefs: []
  type: TYPE_NORMAL
