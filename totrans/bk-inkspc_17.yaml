- en: Chapter 17. Filters
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Inkscape filters are a way to apply complex bitmap processing algorithms to
    the objects in your drawing. True to the vector spirit, filters are nondestructive:
    You can always change the parameters of any filter, and the original vector object
    remains fully editable. Examples of what filters can do include blurring, sharpening,
    color adjustments, adding texture, various distortions, 3D-like effects such as
    bevels, and many others. Moreover, you can combine filters into arbitrarily complex
    *filter stacks*.'
  prefs: []
  type: TYPE_NORMAL
- en: SVG filters (as defined by the SVG standard and implemented by Inkscape) are
    extremely powerful; a whole book could be written on their uses and capabilities.
    Unfortunately, they can also be quite technical, especially if you’re trying to
    compose your own filter stacks. Therefore, in this chapter, we will start by looking
    at some simple ways to use filters, such as the **Blur** control (**[17.1 Blur](ch17s01.html
    "17.1 Blur")**) and preset filter effects (**[17.3 Preset Filters](ch17s03.html
    "17.3 Preset Filters")**). Then, for those who seek more flexibility and are not
    afraid to go technical, we will discuss the powerful **Filter Editor** dialog
    (**[17.4 The Filter Editor Dialog](ch17s04.html "17.4 The Filter Editor Dialog")**),
    which enables you to create your own filter stacks from standard filter primitives.
  prefs: []
  type: TYPE_NORMAL
- en: 17.1 Blur
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We have seen blurring used many times throughout this book. Properly called
    *Gaussian blur* (named after Carl Friedrich Gauss, a German mathematician), this
    effect smoothly “dissolves” the object, as if viewing it through an out-of-focus
    lens. **Blur** is only one of the 14 filter primitives that Inkscape supports—but
    of all these primitives, **Blur** has by far the most user-friendly interface:
    You can adjust it, for any object at any time, with a simple slider in the **Fill
    and Stroke** dialog:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The Blur slider in the Fill and Stroke dialog](httpatomoreillycomsourcenostarchimages1736286.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-1. The Blur slider in the Fill and Stroke dialog
  prefs: []
  type: TYPE_NORMAL
- en: 'One might thus say that Inkscape treats blur as a fundamental property of an
    object, just like its opacity. Why this special treatment? On one hand, it is
    because blurring an object is such a natural, basic operation. Blurring is everywhere
    in the physical world: Non-crisp shadows, glows, and things viewed out of focus
    or in motion are all renderable with blur. This filter is therefore absolutely
    essential if you want to draw anything photorealistic. On the other hand, blur
    is not something you can easily imitate with regular vector shapes or gradients.
    So, by adding just one easily accessible slider, Inkscape’s capabilities expand
    enormously.'
  prefs: []
  type: TYPE_NORMAL
- en: The **Blur** slider controls the *amount* of blur in a range from 0 to 100 percent;
    the setting of 1 percent barely changes the appearance of an object, and 100 percent
    turns any object into a shapeless puff. The percentage makes sure that this scale
    works the same for objects of any size; in other words, a large object blurred
    by 10% has a larger *absolute* amount of blur (larger *blur radius*), but it looks
    exactly proportional to a small object that is also blurred by 10 percent. If
    you want to get the same blur radius in objects of different sizes, you need to
    use different blur amounts.
  prefs: []
  type: TYPE_NORMAL
- en: '![Blur amount (same in A and B) and blur radius (same in A and C)](httpatomoreillycomsourcenostarchimages1736288.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-2. Blur amount (same in A and B) and blur radius (same in A and C)
  prefs: []
  type: TYPE_NORMAL
- en: As you will notice, blurring an object affects its bounding box (only if the
    visual bounding box type is used, **[4.2 The Bounding Box](ch04s02.html "4.2 The
    Bounding Box")**). The expanded bounding box will cover all of the blurred fringe
    of the object.
  prefs: []
  type: TYPE_NORMAL
- en: Each blurred object is processed separately, as if on its own, fully transparent
    layer, and thus it never “smears” any adjacent nonblurred objects. Since that
    per-object layer is by itself transparent, the edges of a blurred object become
    partially translucent. However, you can blur a group, and in that case, all members
    of the group are blurred together, as if placed on a single layer that is blurred
    as a whole. In [Figure 17-3](ch17s01.html#blurring_separate_objects_vsdot_blurring
    "Figure 17-3. Blurring separate objects vs. blurring a group"), on the left there
    are two adjacent rectangles with no gap between them and no blur. In the middle,
    each rectangle is blurred by 20 percent separately; as you can see, the striped
    background can be seen through the blurry gap between the objects. On the right,
    however, the same two rectangles are first grouped and then the group is blurred
    by 20 percent; now there is no gap—blurring only adds transparency at the edges,
    but it cannot reveal what was completely covered by the center of the opaque group.
  prefs: []
  type: TYPE_NORMAL
- en: '![Blurring separate objects vs. blurring a group](httpatomoreillycomsourcenostarchimages1736290.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-3. Blurring separate objects vs. blurring a group
  prefs: []
  type: TYPE_NORMAL
- en: Also, grouping allows you to apply several layers of blurring to the same object.
    For example, you can blur the object itself, then group it (possibly even just
    with itself, that is, placing a single object into the group) and blur the group.
    Naturally, by blurring a group, you can make any member objects *more* blurred
    than they were before, but not *less*. (Similarly, as we saw in **[16.3 Styling
    Clones](ch16s03.html "16.3 Styling Clones")**, you can blur a clone more than
    its original object was blurred, but not less.)
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Blur is not the same as* feathering*. Blur affects all of the object; in particular,
    the lines on a bitmap object or the object boundaries inside a complex group are
    all blurred. Feathering, on the other hand, is simply blurred transparency that
    masks out the outermost edges of an object (such as a photo). Inkscape can do
    feathering as well, using a predefined composite filter (**[17.3 Preset Filters](ch17s03.html
    "17.3 Preset Filters")**).*'
  prefs: []
  type: TYPE_NORMAL
- en: '![Blurring vs. feathering](httpatomoreillycomsourcenostarchimages1736292.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-4. Blurring vs. feathering
  prefs: []
  type: TYPE_NORMAL
- en: 17.1.1 Blur and Transformations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: What happens if you transform a blurred object?
  prefs: []
  type: TYPE_NORMAL
- en: 'Moving a blurred object is not very interesting: The object just moves as a
    whole, remaining as blurred as ever. Proportional (uniform) scaling also scales
    the object as a whole, including the blur radius, so that the amount of blur stays
    the same as it is relative to the object size (i.e., the percentage indicator
    in the **Fill and Stroke** dialog does not change).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Nonuniform scaling is more interesting. For example, if you squeeze a blurred
    object vertically, its blur will squeeze with it and become *nonuniform*—now the
    object is more blurred horizontally than vertically. Such nonuniform blur is sometimes
    called *motion blur* because it approximates the way the object would look on
    a photo when captured in fast motion (in this case, horizontal). So, if you want
    to apply a motion blur to the original nonsqueezed object, simply start by stretching
    it in the opposite direction, then blur it, and squeeze it back into shape (this
    only works for paths and bitmaps):'
  prefs: []
  type: TYPE_NORMAL
- en: '![Motion blur, step-by-step](httpatomoreillycomsourcenostarchimages1736294.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-5. Motion blur, step-by-step
  prefs: []
  type: TYPE_NORMAL
- en: Another way to create nonuniform motion blur is by adjusting the parameters
    of the **Gaussian Blur** filter in the **Filter Editor** dialog (**[17.4 The Filter
    Editor Dialog](ch17s04.html "17.4 The Filter Editor Dialog")**), but the stretch/squeeze
    method described here is usually easier.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*If you’re interested in how this works at the SVG level, the trick is to make
    sure the blur is applied to an object with a* `transform` *attribute (**[A.7 Transformations](apas07.html
    "A.7 Transformations")**), which assures that the blur will be affected by that
    transform as well. When you stretch a path object without blur, this stretching
    is by default embedded into the points of the path (**[12.5.7.3 Transforming Nodes](ch12s05.html#one2dot5dot7dot3_transforming_nodes
    "12.5.7.3 Transforming Nodes")**); but once you apply the blur, reverse squeezing
    will instead add the* `transform` *attribute, affecting the blur as well.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'To create motion blur on a group or text object (i.e., not a path or bitmap),
    use this trick: Stretch the object, then group it (![](httpatomoreillycomsourcenostarchimages1735504.png.jpg),
    **[4.5 Groups](ch04s05.html "4.5 Groups")**), apply a blur to the group, and squeeze
    it back. The grouping step makes sure that in the end, you get an object with
    the correct proportions but also with the squeezing `transform` attribute affecting
    the blur.'
  prefs: []
  type: TYPE_NORMAL
- en: Similar remarks apply to the way many other filters behave when transformed.
    For example, squeezing and/or rotating objects allows you to create perspective-distorted
    variants of the texture filters (**[17.3 Preset Filters](ch17s03.html "17.3 Preset
    Filters")**) for applying to walls and floors in 3D scenes (**[11.3 3D Boxes](ch11s03.html
    "11.3 3D Boxes")**). Of course, transforming filters by stretching and squeezing
    objects is not as convenient as dragging handles on canvas would be—but it works.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Filters work on the rendered image of the object on your screen—that is, they
    are always given as input a bitmap that is created for the current zoom level.
    This is why filters may be so slow: Every time you zoom in or out, the filter
    is reapplied to the new rendering of the object. This also explains why some filters
    may look somewhat different depending on zoom. For example, a sharpening filter,
    when applied to a bitmap object at 100 percent zoom, works on the image features
    as you would expect it to. However, if you zoom in close enough, you will see
    the pixels of the bitmap object as rectangles (**[1.1 What Vector Graphics Is
    and Why It Matters](ch01s01.html "1.1 What Vector Graphics Is and Why It Matters")**),
    and the sharpening will now apply to the borders of these pixel rectangles!*'
  prefs: []
  type: TYPE_NORMAL
- en: 17.1.2 Tweaking for Blur
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Blur mode of the Tweak tool blurs the selected objects under the brush more
    (by default) or less (with ![](httpatomoreillycomsourcenostarchimages1735338.png.jpg)
    pressed). The amount of blur added or removed depends on **Force**, pen pressure
    (if you’re using a tablet pen), the closeness of the object to the center of brush,
    and how long you apply the brush.
  prefs: []
  type: TYPE_NORMAL
- en: 17.2 Blend Modes
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Blend modes are another type of filter for which Inkscape has a dedicated control.
    Choosing a blend mode affects how the colors of an object *blend* (i.e., mix)
    with those of the background objects beneath it.
  prefs: []
  type: TYPE_NORMAL
- en: However, unlike blur, which can be applied to any single object, Inkscape allows
    you to assign blend modes only to layers (**[4.6 Layers](ch04s06.html "4.6 Layers")**);
    the corresponding control is in the **Layers** dialog. This has its reasons in
    the way SVG treats these filters; for you, this means that you can only change
    the blending mode of all objects in a layer at once, and that blending mode will
    affect how the objects in this layer blend with those in layers below, not between
    themselves.
  prefs: []
  type: TYPE_NORMAL
- en: 'The five blend modes are: Normal (default; switch to this option to remove
    any unusual blending), Multiply, Screen, Darken, and Lighten. In Normal mode,
    only non-100 percent opacity allows the objects in the top layer to be translucent;
    in all other modes, bottom-layer objects can “show through” even without any transparency.
    Here is a demonstration:'
  prefs: []
  type: TYPE_NORMAL
- en: '![All large rectangles are in the background layer, all small rectangles are
    in foreground layers with various blend modes set; opacity is 100% everywhere.](httpatomoreillycomsourcenostarchimages1736296.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-6. All large rectangles are in the background layer, all small rectangles
    are in foreground layers with various blend modes set; opacity is 100% everywhere.
  prefs: []
  type: TYPE_NORMAL
- en: Perhaps the most common application of blend modes is for tinting bitmaps. For
    example, imagine you have a color photo but want to render it completely or nearly
    monochrome, for example, in sepia or blue tones, to match the color scheme of
    your composition.
  prefs: []
  type: TYPE_NORMAL
- en: Of course, you can just overlay a semi-transparent rectangle of the target color
    over your bitmap, but that does not entirely get rid of the bitmap’s own color;
    worse, the bitmap fades out and loses contrast. You can also adjust the colors
    of the bitmap in an external bitmap editor (if it’s not yet embedded into your
    SVG, **[18.2 Linking vs. Embedding](ch18s02.html "18.2 Linking vs. Embedding")**),
    or you can use a predefined composite filter such as Sepia, but these options
    are not as flexible. Instead, place the photo on one layer and the colored rectangle
    on its own layer above, and change the blend mode of that top layer (see Figure
    13 on the color insert).
  prefs: []
  type: TYPE_NORMAL
- en: The **Multiply** and **Darken** modes apply tinting primarily to the *light*
    areas of the photo. Therefore, if the tint color is itself light, it will nicely
    color your photo while preserving its contrast; if the tint color is dark, the
    result will likely be too dark.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The difference between Multiply and Darken is that for each pixel, Darken just
    chooses whichever of the background and foreground colors is darker, whereas Multiply
    actually combines the two colors. Try both and choose whichever suits your photo.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The **Screen** and **Lighten** modes apply tinting primarily to the *dark* areas
    of the photo. Therefore, if the tint color is itself dark, it will nicely color
    the photo while preserving its contrast; if the tint color is light, it will just
    “bleach out” the photo, making it too light overall.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Again, the difference between Screen and Lighten is that for each pixel, Lighten
    just chooses whichever of the background and foreground colors is lighter, whereas
    Screen actually combines the two colors. Try both and choose whichever suits your
    photo.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Summarizing, if your tint color is dark, use the Screen or Lighten modes; if
    it is light, use Multiply or Darken. Change the opacity of the tint layer object
    to adjust the amount of tinting.
  prefs: []
  type: TYPE_NORMAL
- en: 17.3 Preset Filters
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Inkscape comes with an extensive collection of preset composite filters. To
    apply a preset filter to any number of selected objects, just choose a command
    from the submenus of the **Filters** menu. Most filters will apply immediately;
    a few will first display a simple dialog where you can adjust their parameters,
    similar to any other extension effects (see **[13.3 Path Extensions](ch13s03.html
    "13.3 Path Extensions")**; such filters have an “. . .” at the end of their names
    in the menu):'
  prefs: []
  type: TYPE_NORMAL
- en: '![Preset filter effects](httpatomoreillycomsourcenostarchimages1736298.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-7. Preset filter effects
  prefs: []
  type: TYPE_NORMAL
- en: 'To get a brief description of an individual preset filter (or of any menu command,
    for that matter), just hover the mouse over its command in the menu and read the
    status bar. I will not describe all preset filters here; there are dozens of them,
    and more are added with each Inkscape version. Instead, here is a brief description
    of the submenus that group together similar filters:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The **ABCs** submenu collects the most used, simple, basic filters that typically
    contain just one or two primitives. They include:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Smoke-like “fractal noise” texture applied either to fill (**Noise Fill**) or
    to transparency (**Noise Transparency**).
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 3D bevel with gloss (**Specular Light**) or without gloss (**Diffuse Light**).
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Feather** ([Figure 17-4](ch17s01.html#blurring_vsdot_feathering "Figure 17-4. Blurring
    vs. feathering")) applies a blurred opacity mask to the edges of the object.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Roughen** randomly distorts the shape of the object.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Simple Blur** adds a small amount of Gaussian blur (**[17.1 Blur](ch17s01.html
    "17.1 Blur")**).'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Most often, these filters are used not on their own but as components in more
    complex filters that you can build just by layering multiple preset filters on
    top of one another. You can even roughly adjust the amount of a filter by applying
    it multiple times to the same object (for more precise adjustments of filter parameters,
    you will need to visit the **Filter Editor**, **[17.4 The Filter Editor Dialog](ch17s04.html
    "17.4 The Filter Editor Dialog")**).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Filters from the ABCs submenu](httpatomoreillycomsourcenostarchimages1736300.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-8. Filters from the ABCs submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The **Bevels** submenu presents many variations on the theme of bevels (pseudo-3D
    raised edges): Here you will find opaque and translucent materials, glossy and
    matte finishes, bevels lit by multiple sources of light, with and without shadows,
    with depressions in the middle and with raised border, and so on. All these filters
    mostly preserve the original color of the object, though they may make it lighter
    or darker in places for the 3D effect.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Bevels submenu](httpatomoreillycomsourcenostarchimages1736302.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-9. Filters from the Bevels submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: '*If you want to change the direction of the light cast upon a bevelled object,
    open the **Filter Editor**, select the **Specular Light** or **Diffuse Light**
    primitive in the filter stack applied to the object, and adjust the **Azimuth**
    parameter.*'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The **Blurs** submenu offers horizontal and vertical motion blur, soft blurry
    glow behind an object, different approaches to blurring the inside color boundary
    of the object while keeping its outline crisp (**Evanescence**, **Blur Content**,
    and **Cross-Smooth**), **Noisy Blur** that combines shape distortion with blurring,
    and some other filters ([Figure 17-10](ch17s03.html#filters_from_the_blurs_submenu
    "Figure 17-10. Filters from the Blurs submenu")).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Blurs submenu](httpatomoreillycomsourcenostarchimages1736304.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-10. Filters from the Blurs submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Color** submenu contains filters that only modify the colors of the object
    they apply to. Here you will find **Desaturate** for turning any object to grayscale,
    **Sepia**, **Invert** and **Invert Hue**, various colorization filters (**Colorize**,
    **Solarize**, **Moonarize**), and others.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Distort** filters distort the shape of the object using horizontally stretched
    jitter, like a reflection in water (**Ripple**), random roughening of edges (**Torn
    Edges**), scattering of disconnected bits (**Chalk and Sponge**), or edge distortion
    in combination with uneven texture (**Pixel Smear**). The **Roughen Inside** filter
    leaves the outline intact but roughens any color boundaries inside the object.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Distort submenu](httpatomoreillycomsourcenostarchimages1736306.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-11. Filters from the Distort submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Image Effects** are the filters that largely make sense for bitmaps, such
    as **Sharpen**, **Edge Detect**, **Emboss**, or **Oil Painting**.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Image Effects submenu](httpatomoreillycomsourcenostarchimages1736308.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-12. Filters from the Image Effects submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The **Masking Tools** submenu contains several effects that make parts of objects
    transparent. The most basic of these, **Eraser**, makes every white area in the
    object transparent. For example, if you overlay a small white circle over a black
    rectangle, group them together, and apply **Eraser** to the group, the white circle
    will turn into a hole through which the background will show.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The **Materials** submenu presents a gallery of imitations of various materials:
    wood, gold splatter, marble, wax, leopard fur, and many others. Most these filters
    discard the original color of the object and use their own color.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Materials submenu](httpatomoreillycomsourcenostarchimages1736310.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-13. Filters from the Materials submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The **Morphology** submenu contains filters that deal with the shape of the
    object by cutting holes in it, adding outlines, and so on.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Non Realistic Shaders** submenu filters take a flat-colored object and
    add soft or crisp shading to it, highlighting some areas and darkening others,
    as may be useful for cartoons. This is a bit similar to thick bevels, but it goes
    deeper and produces more interesting and believable shapes.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Overlays** do not change the object itself, but treat it as a pad for displaying
    some kind of texture, adding it as an overlay on the object’s original color.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Overlays submenu](httpatomoreillycomsourcenostarchimages1736312.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-14. Filters from the Overlays submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The **Ridges** submenu filters turn an object into a narrow ridge along the
    edge and treat this ridge in various ways.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Ridges submenu](httpatomoreillycomsourcenostarchimages1736314.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-15. Filters from the Ridges submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The **Scatter** submenu filters explode an object into variously shaped fragments—tree
    leaves, cubes (looking more like squares), random spray splotches—and scatter
    these fragments randomly around.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **Shadows and Glows** submenu filters treat the edges of the object in some
    way, usually making use of Gaussian blur. Perhaps the most widely used filters
    in this category are **Drop Shadow** and **Drop Glow**, which are identical except
    that the former creates a black shadow and the latter, a white glow (invisible
    unless you have dark background under your object). For these two filters, you
    can adjust the amount of blur, the opacity of the shadow or glow, and its offset.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Shadows and Glows submenu](httpatomoreillycomsourcenostarchimages1736316.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-16. Filters from the Shadows and Glows submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The **Textures** submenu contains all kinds of naturalistic textures: crumpled
    plastic, jam spread, bark, horizontally striped carpet, and many others (see [Figure 17-17](ch17s03.html#filters_from_the_textures_submenu
    "Figure 17-17. Filters from the Textures submenu")).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Filters from the Textures submenu](httpatomoreillycomsourcenostarchimages1736318.png.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Figure 17-17. Filters from the Textures submenu
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: To remove any filters applied to the selected objects, use the **Filters** ▸
    **Remove Filters** command. You can also combine preset filters in any order just
    by applying them on top of one another; for example, after you change the texture
    of an object, you can add a drop shadow to it. The **Remove Filters** command
    will remove all filters you have applied, not just the one you added last.
  prefs: []
  type: TYPE_NORMAL
- en: 'If the scale of the applied filter is not what you need (e.g., the bubbles
    or the feathered edges are too large or too small for your object) and the filter
    does not allow you to adjust that with a dialog, you can use this simple trick:
    Scale your object up (or down), for example by pressing ![](httpatomoreillycomsourcenostarchimages1736320.png.jpg)
    or ![](httpatomoreillycomsourcenostarchimages1735600.png.jpg) a few times, then
    apply the filter, and scale the result back down (or up) by the same multiplier.'
  prefs: []
  type: TYPE_NORMAL
- en: The illustrations and descriptions here cover only a subset of the preset filters
    available. If you want to review all of the preset filters, load the file *filters.svg*
    from the *share/examples* directory of your Inkscape installation.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*You can easily add your own preset filters to the menu—no programming required!
    Once you have an SVG file with the filters you’d like to be able to reuse, simply
    place that file in the* Filters *subdirectory of your Inkscape’s profile directory
    (*~/.config/inkscape *on Linux,* Documents and Settings\<your username>\Application
    Data\Inkscape *on Windows; create the* Filters *subdirectory there if it does
    not yet exist). After that, any filters defined in that file will be listed in
    a **Personal** submenu under **Filters**. (All these filters will apply immediately;
    unfortunately, you cannot at this time create a filter with an adjustment dialog
    without doing some programming.)*'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*The preset filters that come with Inkscape are useful not only by themselves
    but also as starting points for your own derivative filters. Once you are familiar
    with filter primitives and the **Filter Editor** dialog, choosing one of the preset
    filters—closest to what you want to get—and working from it is usally much easier
    than starting from scratch.*'
  prefs: []
  type: TYPE_NORMAL
- en: 17.4 The Filter Editor Dialog
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now, let’s have a look at the principal filter powerhouse of Inkscape: the
    **Filter Editor** dialog (shown in [Figure 17-18](ch17s04.html#major_areas_of_the_filter_editor_dialog
    "Figure 17-18. Major areas of the Filter Editor dialog")). Open it with the **Filters**
    ▸ **Filter Editor . . .** command.'
  prefs: []
  type: TYPE_NORMAL
- en: '![Major areas of the Filter Editor dialog](httpatomoreillycomsourcenostarchimages1736322.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-18. Major areas of the Filter Editor dialog
  prefs: []
  type: TYPE_NORMAL
- en: 17.4.1 The Filters List
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The list in the top-left corner of the dialog contains all filters defined in
    your document. You can highlight any filter and edit its structure and parameters
    in the dialog. If the currently selected object has a filter applied, that filter
    will have a checkmark in the list; so, by setting or removing the checkmark, you
    can apply or unapply any filter to any object. (Note that even unused filters
    remain in the list; to remove them from the document, use the **File** ▸ **Vacuum
    Defs** command.)
  prefs: []
  type: TYPE_NORMAL
- en: Under the list, there is a **New** button for adding a new filter. If you opened
    this dialog in an empty document, the list of filters is also empty; now, press
    **New** to create a new empty filter, usually called `filter1` (to rename it to
    something else, just click the selected name in the list and type). You can also
    duplicate or delete a filter in the list by right-clicking it and using the corresponding
    pop-up menu commands.
  prefs: []
  type: TYPE_NORMAL
- en: After that, you can create or select some object in the document and check the
    checkbox for your new filter. Nothing changes—an empty filter does not affect
    the rendering of an object. For the filter to actually do something, we need to
    add some primitives to it.
  prefs: []
  type: TYPE_NORMAL
- en: 17.4.2 The Stack of Primitives
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Turn your attention to the area to the right of the filter list. This is the
    main filter construction board where you list, arrange, and connect the stack
    of *primitives* that constitute a filter. Initially, it is empty because we haven’t
    yet added any primitives to our filter.
  prefs: []
  type: TYPE_NORMAL
- en: The 14 different primitives supported by Inkscape are listed in a drop-down
    list below the construction board. When you choose a primitive in the list, it
    displays a brief description and illustration below. You can read the description
    in the dialog to get an initial idea of what each primitive does. A detailed explanation
    of all primitives is beyond the scope of this book; if you want all the gory technical
    details, refer to the SVG specification (*[http://w3.org/TR/SVG11](http://w3.org/TR/SVG11)*).
  prefs: []
  type: TYPE_NORMAL
- en: Instead, let’s go through the step-by-step process of creating a fairly complex
    filter that uses several different primitives to get an integral idea of how it
    all works. The filter we’ll construct is called Sandy Blur; I designed it for
    the background coloring of the Rose image (see [Figure 24-5](ch24.html#building_up_the_quotation_markrealistic
    "Figure 24-5. Building up the “realistic watercolor” filter for the background")).
    This filter aims to imitate blurry watercolor strokes on a rough paper.
  prefs: []
  type: TYPE_NORMAL
- en: 'Plain Gaussian blur is not satisfactory: It is too smooth, too computer-generated,
    too boring. For an acceptable watercolor imitation, we need to model both the
    small-scale roughness of the paper texture and the larger-scale “blotches” resulting
    from the watercolor paint flowing and sticking differently in different places.
    For both these sources of unevenness, we will use the **Turbulence** primitive,
    which creates random fractal “noise” at the given scale.'
  prefs: []
  type: TYPE_NORMAL
- en: '![The two Turbulence primitives](httpatomoreillycomsourcenostarchimages1736324.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-19. The two Turbulence primitives
  prefs: []
  type: TYPE_NORMAL
- en: The two **Turbulence** primitives are the first two components of our filter—the
    two topmost boxes in the stack. Each filter primitive has one or more *inputs*
    and one *output*; in the list, the input is depicted by a line coming into the
    primitive box horizontally from the right, and the output is the line going from
    the box vertically downward. As you can see, the outputs of some primitives are
    the inputs for others.
  prefs: []
  type: TYPE_NORMAL
- en: You can wire the connections yourself by dragging; start by dragging from the
    input triangle at the right-hand edge of a primitive’s box. Generally, information
    flows from top to bottom in the stack of primitives; the output of the bottommost
    primitive is what you see rendered in the document window. You can also rearrange
    the primitives by dragging; a right-click menu allows you to duplicate or delete
    a primitive.
  prefs: []
  type: TYPE_NORMAL
- en: What are the vertically stacked boxes on the right? These are the predefined
    sources that any primitive can use as input. The most useful (and, as of version
    0.47, the only ones fully implemented) are **Source Graphic** and **Source Alpha**.
    **Source Graphic**, as the name implies, supplies the original rendered image
    of the object we’re filtering, at the current zoom’s resolution. The **Source
    Alpha** is different in that it provides a grayscale representation of the original
    object’s opacity (alpha) mask; so, points that are fully opaque (regardless of
    color) in the **Source Graphic** will be opaque black on the **Source Alpha**
    image, and points that are transparent will be transparent black.
  prefs: []
  type: TYPE_NORMAL
- en: 17.4.3 The Parameters of a Primitive
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let’s look again at the two **Turbulence** primitives at the top of the stack.
    They both take **Source Alpha** as input and pass their result—random noise—down
    to other primitives. What differentiates them are the parameters of these filters.
  prefs: []
  type: TYPE_NORMAL
- en: 'When you select a filter primitive in the stack, its parameters are displayed
    in the bottom area of the dialog. Here are the parameters of the two **Turbulence**
    primitives:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The parameters of the two Turbulence primitives](httpatomoreillycomsourcenostarchimages1736326.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-20. The parameters of the two Turbulence primitives
  prefs: []
  type: TYPE_NORMAL
- en: 'As you see, these two primitives have the same **Type** (**Fractal Noise**,
    which looks better in our case than the other option, **Turbulence**) but differ
    in **Base Frequency** and **Octaves**. The **Base Frequency** parameter determines
    the scale of the turbulence; higher frequency results in smaller, sand-like texture,
    while lower frequency produces larger clouds. The number of **Octaves** specifies,
    in fractal terminology, how deep is the recursion in the algorithm: Increasing
    **Octaves** produces sharper unevenness with more small details; decreasing this
    value gives a smoother, more nebulous image.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, we need to composite our turbulence outputs together. For this, we will
    use another primitive, aptly named **Composite**:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The Composite primitive](httpatomoreillycomsourcenostarchimages1736328.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-21. The Composite primitive
  prefs: []
  type: TYPE_NORMAL
- en: It has two inputs and combines them, pixel by pixel, using one of a number of
    methods. Here, I used the **Arithmetic** method; with the provided numeric values
    for the coefficients (**K1** to **K4**), it results in the large-scale wave and
    small-scale ripples being combined into a composite with somewhat increased contrast,
    as shown in [Figure 17-22](ch17s04.html#result_of_compositing_two_turbulences
    "Figure 17-22. The result of compositing two turbulences").
  prefs: []
  type: TYPE_NORMAL
- en: '![The result of compositing two turbulences](httpatomoreillycomsourcenostarchimages1736330.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-22. The result of compositing two turbulences
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Refer to the SVG specification* ([http://w3.org/TR/SVG11](http://w3.org/TR/SVG11))
    *for the detailed formulas used by the **Composite** filter in various modes.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'So far, we didn’t use the image of the object itself to which we will apply
    the filter—that is, didn’t use the **Source Graphic**. Supposedly, that object
    would be some kind of broad brush-like path, likely created with the Calligraphic
    pen tool (**[14.3 The Calligraphic Pen Tool](ch14s03.html "14.3 The Calligraphic
    Pen Tool")**). Of course, the first thing we need do to a flat-color, crisp-edged
    path to make it more like a watercolor stroke is to blur it:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The Gaussian Blur primitive](httpatomoreillycomsourcenostarchimages1736332.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-23. The Gaussian Blur primitive
  prefs: []
  type: TYPE_NORMAL
- en: The **Standard Deviation** parameter of **Gaussian Blur** is similar to the
    blur amount you would adjust in the **Fill and Stroke** dialog ([Figure 17-1](ch17s01.html#blur_slider_in_the_fill_and_stroke_dialo
    "Figure 17-1. The Blur slider in the Fill and Stroke dialog")), except that here
    it is measured in absolute `px` units (**[A.6 Coordinates and Units](apas06.html
    "A.6 Coordinates and Units")**) instead of percentages of the object’s size.
  prefs: []
  type: TYPE_NORMAL
- en: How do we combine the blurred stroke with the turbulence? **Composite** won’t
    work here. Any of its modes will just result in a smooth blur being *overlaid*
    with the turbulent ripples, but the underlying smoothness will not go anywhere
    (try it). It won’t look like watercolor on a rough paper at all—it will look more
    like computer-produced blur viewed through a spotted glass.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s consider what happens when you paint with a real brush on a real paper.
    The blurriness of your stroke results from the softness of the brush—you apply
    more pressure in the middle than on the edges of the brush. When a brush meets
    a dimple in the paper, that pressure is changed; if this area of the paper is
    a rise, it will get painted more intensively, as if it were closer to the maximum-pressure
    point of the brush; if it is a depression, it will get less paint. In other words,
    the roughness of the paper jitters the blurred stroke *in the plane of the drawing*,
    as if randomly displacing parts of the stroke sideways. How do we achieve this
    with filters?
  prefs: []
  type: TYPE_NORMAL
- en: 'The **Displacement Map** primitive is a perfect match for the job. It takes
    its first input and moves its pixels around according to its second input. You
    can choose which of the channels (Red, Green, Blue, or Alpha) of the second input
    will move the first in each of the two axis directions (X and Y), as well as scale
    this displacement. In our case, the first input is the blurred object, and the
    second input is the composite turbulence field, of which we take the Alpha channel
    for both axes:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The Displacement Map primitive](httpatomoreillycomsourcenostarchimages1736334.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-24. The Displacement Map primitive
  prefs: []
  type: TYPE_NORMAL
- en: As an added bonus, the result looks rougher in some areas and smoother in others.
    This is because in the smooth areas, the displacement map hits the almost-flat
    inner parts of the blurred stroke, and there, the high-frequency jitter just moves
    around pixels of almost the same color without disturbing the smoothness. On the
    edges of the stroke, however, different-color pixels are mixed and jittered, producing
    visible roughness. All this is additionally modulated by the low-frequency noise,
    producing a very convincing watercolor simulation.
  prefs: []
  type: TYPE_NORMAL
- en: However, if you apply this filter to a light-colored stroke (and not black as
    in [Figure 17-24](ch17s04.html#displacement_map_primitive "Figure 17-24. The Displacement
    Map primitive")), the result is still not quite perfect. When you’re looking at
    a real rough paper with watercolor strokes on it, what you see is not just the
    distribution of the paint; you also see the roughness itself, which looks like
    a pattern of shades. Without this shading, light-colored strokes with our filter
    still look too unnaturally flat. Fortunately, that is easy to fix; we already
    have the high-frequency turbulence source, which will work nicely as shading if
    we just compose it with our displacement-mapped blur, as shown in [Figure 17-25](ch17s04.html#final_filter_and_the_parameters_of_the_l
    "Figure 17-25. The final filter and the parameters of the last Composite primitive
    which overlays the shading").
  prefs: []
  type: TYPE_NORMAL
- en: Now the filter looks pretty decent, and we can declare it complete. You could
    continue working on it, adding various smears, water leaks, diffusion, and so
    on; however, since my demo image used this filter only for the background, I thought
    it was already good enough for the purpose.
  prefs: []
  type: TYPE_NORMAL
- en: '![The final filter and the parameters of the last Composite primitive which
    overlays the shading](httpatomoreillycomsourcenostarchimages1736336.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-25. The final filter and the parameters of the last Composite primitive
    which overlays the shading
  prefs: []
  type: TYPE_NORMAL
- en: 17.4.4 The Filter Area
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The second tab in the filter parameter area in the **Filter Editor** dialog
    is called **Filter General Settings**. It contains parameters that apply to the
    entire filter stack, not any single primitive. Currently, the only thing you can
    change here is the *filter area*—the area which the filter will render into, measured
    in the units of the bounding box of the object to which the filter is applied.
  prefs: []
  type: TYPE_NORMAL
- en: The **Coordinates** line specifies the top-left corner of the area, and the
    **Dimensions** line specifies the bottom-right corner. For example, if you set
    the **Coordinates** to 0/0 in and the **Dimensions** to 1/1, the area will be
    exactly equal to the bounding box. This will work fine if your filter does not
    reach beyond the object in any way—for example, if you’re just performing a color
    change with a **Color Matrix** primitive. However, if you are using something
    like blur in your filter, it will need to paint outside the bounding box, and
    you must provide sufficient margins for this to prevent cropping. When you apply
    blur via the **Fill and Stroke** dialog, these margins are set for you automatically;
    however, when creating a new filter stack from scratch, you must take care of
    it yourself. The default is 0.1/0.1 for **Coordinates** and 1.2/1.2 for **Dimensions**,
    which results in 10 percent margins on all sides of the object, as shown in [Figure 17-26](ch17s04.html#specifying_the_filter_area
    "Figure 17-26. Specifying the filter area").
  prefs: []
  type: TYPE_NORMAL
- en: '![Specifying the filter area](httpatomoreillycomsourcenostarchimages1736338.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-26. Specifying the filter area
  prefs: []
  type: TYPE_NORMAL
- en: If the visual bounding box option is used (which is the default, see **[4.2
    The Bounding Box](ch04s02.html "4.2 The Bounding Box")**), the bounding box of
    a filtered object—the frame you see when you select it in Selector—is the enlarged
    filter area. Among other things, this means that, when exporting a selected object
    to bitmap (**[18.9 Bitmap Export](ch18s09.html "18.9 Bitmap Export")**), Inkscape
    will make sure the bitmap contains the blurred edges without cropping.
  prefs: []
  type: TYPE_NORMAL
- en: 17.5 Filter Rendering Options
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As you may have noticed by now, for all their power, filters in Inkscape have
    a significant drawback: They are *slow*. Sometimes, very slow. While future versions
    of the program may to some extent address this (most likely, by enabling Inkscape
    to use the graphics card processor for filter calculations), there’s something
    you can do right now.'
  prefs: []
  type: TYPE_NORMAL
- en: First of all, recall that you can always switch to the Outline mode (**[3.11
    Rendering Modes](ch03s11.html "3.11 Rendering Modes")**) to speed up rendering
    while working on a document. There is also the No Filters mode, which is the same
    as normal mode except that no filters are rendered; this is perhaps the best option
    if filters are the main source of slowness for you.
  prefs: []
  type: TYPE_NORMAL
- en: Also, the **Filters** tab of the **Inkscape Preferences** dialog ([Figure 17-27](ch17s05.html#filters_tab_of_the_inkscape_preferences
    "Figure 17-27. The Filters tab of the Inkscape Preferences dialog")) has some
    settings that you can try to tweak to speed up rendering. The first group of radio
    buttons applies to blur and allows you to choose your desired level of the speed/quality
    tradeoff. The default, **Average quality**, looks *almost* perfect and renders
    reasonably fast. At lower quality settings, visible defects appears, but rendering
    becomes even faster; the higher settings bring little quality improvement but
    are significantly slower.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '*Bitmap export (**[18.9 Bitmap Export](ch18s09.html "18.9 Bitmap Export")**)
    as well as rasterization of filters for PS/EPS/PDF export always use the highest
    quality of blur, which is why exporting is typically slower that rendering the
    same image on screen at the same resolution.*'
  prefs: []
  type: TYPE_NORMAL
- en: The second set of radio buttons applies to all filters (including blur). It
    also offers to trade an improvement in rendering speed for worse rendering quality,
    but its speed advantage is less significant, so here the **Best quality** option
    is probably optimal.
  prefs: []
  type: TYPE_NORMAL
- en: '![The Filters tab of the Inkscape Preferences dialog](httpatomoreillycomsourcenostarchimages1736340.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-27. The Filters tab of the Inkscape Preferences dialog
  prefs: []
  type: TYPE_NORMAL
- en: 17.6 Exporting Filters to PS and PDF
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Since version 0.47, Inkscape no longer ignores filters when exporting to PostScript
    and PDF formats (which, while being vector, do not support anything like SVG’s
    filters). Now, any object with a filter applied will be by default rasterized
    (i.e., converted into a bitmap object) in the exported file, fully preserving
    the appearance it had in Inkscape (but, potentially, increasing the file size).
    In the export options dialog, you can specify the resolution of the bitmaps, as
    well as turn rasterization off, in which case objects will remain vector but will
    lose any filtering.
  prefs: []
  type: TYPE_NORMAL
- en: '![Specifying the treatment of filters when exporting](httpatomoreillycomsourcenostarchimages1736342.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 17-28. Specifying the treatment of filters when exporting
  prefs: []
  type: TYPE_NORMAL
- en: When performing export via the command line (**[C.2 Export](apcs02.html "C.2
    Export")**), the corresponding options are `--export-dpi` to specify the resolution
    and `--export-ignore-filters` to turn off rasterization.
  prefs: []
  type: TYPE_NORMAL
