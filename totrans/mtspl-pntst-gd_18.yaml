- en: Appendix A. Configuring Your Target Machines
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 A. 配置您的目标机器
- en: The best way to learn to use the Metasploit Framework is by practicing — repeating
    a task until you fully understand how it is accomplished. This appendix explains
    how to set up a test environment to use with the examples in this book.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 学习使用 Metasploit 框架的最佳方式是通过实践——重复执行任务，直到您完全理解它是如何完成的。本附录解释了如何设置一个测试环境，以便与本书中的示例一起使用。
- en: Installing and Setting Up the System
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装和设置系统
- en: The examples in this book use a combination of Back|Track, Ubuntu 9.04, Metasploitable,
    and Windows XP. Back|Track serves as our vehicle for exploitation, and the Ubuntu
    and Windows systems are our target systems.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的示例使用 Back|Track、Ubuntu 9.04、Metasploitable 和 Windows XP 的组合。Back|Track 作为我们的攻击工具，Ubuntu
    和 Windows 系统是我们的目标系统。
- en: First create an unpatched Windows XP Service Pack 2 installation to test the
    examples presented throughout this book. The Back|Track and Ubuntu 9.04 virtual
    machines can be run on a host machine running Windows, Mac OS X, or Linux on any
    VMware product, including Workstation, Server, Player, Fusion, or ESX.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 首先创建一个未经修补的 Windows XP Service Pack 2 安装来测试本书中展示的示例。Back|Track 和 Ubuntu 9.04
    虚拟机可以在运行任何 VMware 产品（包括 Workstation、Server、Player、Fusion 或 ESX）的 Windows、Mac OS
    X 或 Linux 主机上运行。
- en: '* * *'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Note
  id: totrans-6
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Be careful with your Ubuntu and Windows XP virtual machines, because these
    systems are vulnerable and easy to exploit. Do not conduct any sensitive activities
    on these machines: If you can exploit them, anyone else can, too.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 请小心使用您的 Ubuntu 和 Windows XP 虚拟机，因为这些系统容易受到攻击，容易被利用。不要在这些机器上执行任何敏感操作：如果您能攻击它们，其他人也能。
- en: '* * *'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: If you don’t already have the free VMware Player for Windows and Linux, download
    and install it. If you’re using OS X, download the free 30-day trial of VMware
    Fusion. (If you’re running Windows, you can also use the free VMware Server edition.)
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您还没有 Windows 和 Linux 的免费 VMware Player，请下载并安装它。如果您使用的是 OS X，请下载免费 30 天试用版的
    VMware Fusion。（如果您运行的是 Windows，您还可以使用免费的 VMware Server 版本。）
- en: After you have installed VMware, double-click the *.vmx* file to use with VMware,
    or open the virtual machine files in VMware Player by choosing **File** ▸ **Open**
    and pointing to the folder that contains all the virtual machines and associated
    files. If you’re installing from an ISO disc image, create a new virtual machine
    and specify this ISO file as the CD-ROM device.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 VMware 后，双击 *.vmx* 文件以在 VMware 中使用，或者在 VMware Player 中通过选择 **文件** ▸ **打开**
    并指向包含所有虚拟机和相关文件的文件夹来打开虚拟机文件。如果您是从 ISO 光盘镜像安装，创建一个新的虚拟机，并将此 ISO 文件指定为 CD-ROM 设备。
- en: '* * *'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Note
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Download Back|Track from [http://www.backtrack-linux.org/](http://www.backtrack-linux.org/)
    and Ubuntu 9.04 from [http://www.vmware.com/appliances/directory/](http://www.vmware.com/appliances/directory/)
    by searching for Ubuntu 9.04\. Metasploitable can be downloaded from [http://blog.metasploit.com/2010/05/introducing-metasploitable.html](http://blog.metasploit.com/2010/05/introducing-metasploitable.html).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 通过搜索 Ubuntu 9.04，从 [http://www.backtrack-linux.org/](http://www.backtrack-linux.org/)
    下载 Back|Track，从 [http://www.vmware.com/appliances/directory/](http://www.vmware.com/appliances/directory/)
    下载 Ubuntu 9.04。Metasploitable 可以从 [http://blog.metasploit.com/2010/05/introducing-metasploitable.html](http://blog.metasploit.com/2010/05/introducing-metasploitable.html)
    下载。
- en: '* * *'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Booting Up the Linux Virtual Machines
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启动 Linux 虚拟机
- en: After powering on either of the Linux virtual machines, you need to log in.
    The default credentials for both Linux environments are username *root* and password
    *toor*.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在启动任一 Linux 虚拟机后，您需要登录。两个 Linux 环境的默认凭据是用户名 *root* 和密码 *toor*。
- en: If you don’t have a DHCP server on your network, find your system’s address
    range and use the commands shown in the following listing. (Make sure that you
    replace your IP address with an unused one, and edit the network interface that
    you will be using. For more on manual network setup, see [http://www.yolinux.com/TUTORIALS/LinuxTutorialNetworking.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialNetworking.html).)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的网络中没有 DHCP 服务器，请找到您系统的地址范围，并使用以下列表中的命令。确保您将 IP 地址替换为未使用的地址，并编辑您将使用的网络接口。有关手动网络设置的更多信息，请参阅
    [http://www.yolinux.com/TUTORIALS/LinuxTutorialNetworking.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialNetworking.html)。
- en: '[PRE0]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: After configuration is complete, your Linux environment should be ready for
    use. Do not update the Ubuntu installation, because this system should remain
    vulnerable.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 配置完成后，您的 Linux 环境应准备好使用。不要更新 Ubuntu 安装，因为这个系统应该保持易受攻击状态。
- en: Setting Up a Vulnerable Windows XP Installation
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置易受攻击的 Windows XP 安装
- en: To run the examples in this book, you will need to install a licensed copy of
    Windows XP on a virtualization platform such as VMware. After you have completed
    the installation, log in as Administrator, open the Control Panel, switch to Classic
    View, and choose **Windows Firewall**. Select **Off** and click **OK**. (This
    may seem unrealistic, but this scenario is more common than you might imagine
    in large corporations.)
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 为了运行本书中的示例，你需要在虚拟化平台（如VMware）上安装Windows XP的授权副本。安装完成后，以管理员身份登录，打开控制面板，切换到经典视图，并选择**Windows防火墙**。选择**关闭**并点击**确定**。（这看起来可能不太现实，但这种情况在你可能想象的大公司中比你想的更常见。）
- en: Next, open Automatic Updates and select **Turn off Automatic Updates**; then
    click **OK**. You don’t want Windows to patch vulnerabilities as you’re trying
    to learn how to exploit them.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，打开自动更新并选择**关闭自动更新**；然后点击**确定**。你不想在尝试利用漏洞时让Windows修补漏洞。
- en: Now configure your installation with a static IP address via the Network Connections
    Control Panel. While not required, doing this will save you from having to recheck
    the target address every time you launch an exploit.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 现在通过网络连接控制面板配置你的安装，使用静态IP地址。虽然这不是必需的，但这样做将节省你每次启动漏洞利用时重新检查目标地址的时间。
- en: Configuring Your Web Server on Windows XP
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在Windows XP上配置你的Web服务器
- en: To make things interesting and provide for a larger attack surface, we’ll enable
    some additional services.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使事情更有趣并扩大攻击面，我们将启用一些额外的服务。
- en: In the Control Panel, select **Add or Remove Programs**, and then select **Add/Remove
    Windows Components**. You should be looking at the *Windows Components Wizard*.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在控制面板中，选择**添加或删除程序**，然后选择**添加/删除Windows组件**。你应该会看到**Windows组件向导**。
- en: Select the checkbox for **Internet Information Services (IIS)** and click **Details**.
    Then select the checkbox for **File Transfer Protocol (FTP) Service** and click
    **OK**. Conveniently enough, the FTP service allows anonymous connections by default.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**互联网信息服务（IIS）**复选框并点击**详细信息**。然后选择**文件传输协议（FTP）服务**复选框并点击**确定**。方便的是，FTP服务默认允许匿名连接。
- en: Select the **Management and Monitoring Tools** checkbox and click **OK**. By
    default, this installs the Simple Network Management Protocol (SNMP) and Windows
    Management Interface (WMI) SNMP Provider.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**管理和监控工具**复选框并点击**确定**。默认情况下，这将安装简单网络管理协议（SNMP）和Windows管理接口（WMI）SNMP提供程序。
- en: Click **Next** to complete the installation and reboot the machine for good
    measure.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**完成安装，并为了保险起见重新启动计算机。
- en: The combination of these steps adds different services that we test throughout
    this book. The IIS server will allow you to run a website and can be downloaded
    from [http://www.secmaniac.com/files/nostarch1.zip](http://www.secmaniac.com/files/nostarch1.zip).
    The FTP service will allow you to perform FTP-based attacks against the Windows
    system, and the SNMP configuration will allow you to test auxiliary modules within
    Metasploit.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这些步骤的组合添加了我们在本书中测试的不同服务。IIS服务器将允许你运行网站，可以从[http://www.secmaniac.com/files/nostarch1.zip](http://www.secmaniac.com/files/nostarch1.zip)下载。FTP服务将允许你对Windows系统执行基于FTP的攻击，而SNMP配置将允许你在Metasploit中测试辅助模块。
- en: Building a SQL Server
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建SQL服务器
- en: Many database modules within Metasploit and Fast-Track target Microsoft SQL
    Server, so you need to install SQL Server 2005 Express, available for free from
    Microsoft. As of this writing, you can locate the non–service pack version of
    SQL Server Express at [http://www.microsoft.com/](http://www.microsoft.com/).
    To install SQL Server Express, you will need to install Windows Installer 3.1
    and the .NET Framework 2.0\. You can find links to the resources on this page,
    and all other URLs referenced in this book, at [http://www.secmaniac.com/files/nostarch1.zip](http://www.secmaniac.com/files/nostarch1.zip).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit和Fast-Track中的许多数据库模块针对Microsoft SQL Server，因此你需要安装SQL Server 2005
    Express，可以从Microsoft免费获得。截至本书写作时，你可以在[http://www.microsoft.com/](http://www.microsoft.com/)找到SQL
    Server Express的非服务包版本。要安装SQL Server Express，你需要安装Windows Installer 3.1和.NET Framework
    2.0。你可以在本页上找到资源的链接，以及本书中引用的所有其他URL，在[http://www.secmaniac.com/files/nostarch1.zip](http://www.secmaniac.com/files/nostarch1.zip)。
- en: Once you have the prerequisites installed, run the SQL Express installer and
    select all the defaults except for Authentication Mode. Select **Mixed Mode**,
    set a *sa* login password of *password1*, and then continue with the installation.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了先决条件，运行SQL Express安装程序并选择所有默认设置，除了身份验证模式。选择**混合模式**，设置*sa*登录密码为*password1*，然后继续安装。
- en: 'With the basic installation of SQL Server complete, you need to make a few
    more changes to make it accessible on your network:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: SQL Server 的基本安装完成后，您需要做一些更改，以便在您的网络上访问它：
- en: Select **Start** ▸ **All Programs** ▸ **Microsoft SQL Server 2005** ▸ **Configuration
    Tools**, and then select **SQL Server Configuration Manager**.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **Start** ▸ **All Programs** ▸ **Microsoft SQL Server 2005** ▸ **Configuration
    Tools**，然后选择 **SQL Server Configuration Manager**。
- en: When the Configuration Manager starts, select **SQL Server 2005 Services**,
    right-click **SQL Server (SQLEXPRESS)**, and select **Stop**.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当配置管理器启动时，选择 **SQL Server 2005 Services**，右键单击 **SQL Server (SQLEXPRESS)** 并选择
    **Stop**。
- en: Expand SQL Server 2005 Network Configuration Manager and select **Protocols
    for SQLEXPRESS**, as shown in [Figure A-1](part0022.html#protocols_for_sqlexpress).![Protocols
    for SQLEXPRESS](../images/00063.jpeg)Figure A-1. Protocols for SQLEXPRESS
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开 SQL Server 2005 网络配置管理器，并选择 **Protocols for SQLEXPRESS**，如图 [图 A-1](part0022.html#protocols_for_sqlexpress)
    所示。![Protocols for SQLEXPRESS](../images/00063.jpeg) 图 A-1. Protocols for SQLEXPRESS
- en: Double-click **TCP/IP**, and on the Protocol tab, set **Enabled** to **Yes**
    and **Listen All** to **No**.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击 **TCP/IP**，在协议选项卡上，将 **Enabled** 设置为 **Yes**，将 **Listen All** 设置为 **No**。
- en: Next, while still within the TCP/IP Properties dialog, select the IP Addresses
    tab and remove any entries under IPAll. Under IP1 and IP2, remove the values for
    TCP Dynamic Ports and set **Active** and **Enabled** for each of them to **Yes**.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在 TCP/IP 属性对话框中，选择 IP Addresses 选项卡，并删除 IPAll 下的任何条目。在 IP1 和 IP2 下，删除 TCP
    Dynamic Ports 的值，并将每个的 **Active** 和 **Enabled** 设置为 **Yes**。
- en: Finally, set the IP1 IP Address to match your static IP address set earlier,
    set the IP2 address to **127.0.0.1**, and set the TCP port for each of them to
    **1433**. Your settings should look similar to those shown in [Figure A-2](part0022.html#setting_sql_server_ip_addresses_in_the_t).
    Click **OK** when you are all set.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，将 IP1 的 IP 地址设置为之前设置的静态 IP 地址，将 IP2 地址设置为 **127.0.0.1**，并将每个的 TCP 端口设置为 **1433**。您的设置应类似于
    [图 A-2](part0022.html#setting_sql_server_ip_addresses_in_the_t) 中所示的设置。设置完成后，点击
    **OK**。
- en: 'Next, you’ll need to enable the SQL Server Browser service:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您需要启用 SQL Server 浏览器服务：
- en: Select **SQL Server 2005 Services** and double-click **SQL Server Browser**.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **SQL Server 2005 Services** 并双击 **SQL Server Browser**。
- en: On the Service tab, set the **Start Mode** to **Automatic**.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在服务选项卡上，将 **Start Mode** 设置为 **Automatic**。
- en: '![Setting SQL Server IP addresses in the TCP/IP Properties dialog](../images/00064.jpeg)Figure A-2. Setting
    SQL Server IP addresses in the TCP/IP Properties dialog'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![在 TCP/IP 属性对话框中设置 SQL Server IP 地址](../images/00064.jpeg) 图 A-2. 在 TCP/IP
    属性对话框中设置 SQL Server IP 地址'
- en: By default, the SQL Server runs under the low-privilege Network Service account,
    which is a great default. However, it’s not entirely realistic for what we find
    deployed in the field, and often administrators change this rather than trying
    to troubleshoot permissions issues.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，SQL Server 在低权限的 Network Service 账户下运行，这是一个很好的默认设置。然而，对于我们现场发现的情况来说，这并不完全现实，并且管理员通常更改此设置而不是尝试解决权限问题。
- en: On most target systems, we have found that the SQL Server Browser service is
    running as an elevated SYSTEM-based account. Most systems have the SQL Server
    Service logged on as Local System, the default in older versions of Microsoft
    SQL Server (2000 and earlier). Therefore, you should change the account by double-clicking
    **SQL Server (SQLEXPRESS)** and setting **Log on as** to **Local System**. Click
    **OK** when you have finished. Then right-click **SQL Server (SQLEXPRESS)** and
    select **Start**. Do the same with SQL Server browser.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数目标系统上，我们发现 SQL Server 浏览器服务是以提升的 SYSTEM-based 账户运行的。大多数系统将 SQL Server 服务登录为
    Local System，这是 Microsoft SQL Server（2000 及更早版本）的默认设置。因此，您应该通过双击 **SQL Server
    (SQLEXPRESS)** 并将 **Log on as** 设置为 **Local System** 来更改账户。完成设置后，点击 **OK**。然后右键单击
    **SQL Server (SQLEXPRESS)** 并选择 **Start**。对 SQL Server 浏览器执行相同的操作。
- en: 'Finally, close the Configuration Manager and verify that everything is working
    properly by opening a command prompt and running **`netstat -ano |find "1433"`**
    and **`netstat -ano |find "1434"`**. Your IP addresses configured earlier should
    be listening on TCP port 1433 and UDP port 1434, as shown here:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，关闭配置管理器，通过打开命令提示符并运行 **`netstat -ano |find "1433"`** 和 **`netstat -ano |find
    "1434"`** 来验证一切是否正常工作。您之前配置的 IP 地址应该监听 TCP 端口 1433 和 UDP 端口 1434，如下所示：
- en: '[PRE1]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Creating a Vulnerable Web Application
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建一个易受攻击的 Web 应用程序
- en: To use some of the more advanced features of Metasploit and external tools such
    as Fast-Track and the Social-Engineer Toolkit (SET), you will need a vulnerable
    web application to test against. To create the database and tables, download and
    install SQL Server Management Studio Express from the link provided at [http://www.nostarch.com/metasploit.htm](http://www.nostarch.com/metasploit.htm).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Metasploit和一些外部工具（如Fast-Track和Social-Engineer Toolkit（SET））的一些更高级功能，您需要一个易受攻击的Web应用程序进行测试。要创建数据库和表，从[http://www.nostarch.com/metasploit.htm](http://www.nostarch.com/metasploit.htm)提供的链接下载并安装SQL
    Server Management Studio Express。
- en: 'After the installation and a healthy reboot, do the following:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，进行健康重启，执行以下操作：
- en: Start the application by choosing **Start** ▸ **All Programs** ▸ **Microsoft
    SQL Server 2005** ▸ **SQL Server Management Studio Express**.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择**开始** ▸ **所有程序** ▸ **Microsoft SQL Server 2005** ▸ **SQL Server Management
    Studio Express**来启动应用程序。
- en: When prompted for credentials, select **SQL Server Authentication** from the
    Authentication drop-down, and log in using the username *sa* and the password
    *password1*.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当提示输入凭据时，从身份验证下拉菜单中选择**SQL Server身份验证**，并使用用户名*sa*和密码*password1*登录。
- en: In Object Explorer, right-click **Databases** and select **New Database**.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在对象资源管理器中，右键单击**数据库**并选择**新建数据库**。
- en: For the Database name, enter **WebApp** and click **OK**.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库名称处输入**WebApp**并点击**确定**。
- en: Expand Databases and the WebApp database tree.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开数据库和WebApp数据库树。
- en: Right-click **Tables** and select **New Table**. Name your new table *users*
    with the column names and types shown in [Figure A-3](part0022.html#users_table_columns).![Users
    table columns](../images/00065.jpeg)Figure A-3. *Users* table columns
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击**表**并选择**新建表**。将您的新表命名为*users*，列名和类型如[图A-3](part0022.html#users_table_columns)所示。![用户表列](../images/00065.jpeg)图A-3.
    *users*表列
- en: Save the *users* table, and then right-click it and select **Open Table**.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存*users*表，然后右键单击它并选择**打开表**。
- en: Populate the table with some sample data similar to that shown in [Figure A-4](part0022.html#populated_users_table),
    and then save your work.![Populated users table](../images/00066.jpeg)Figure A-4. Populated
    *users* table
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用类似于[图A-4](part0022.html#populated_users_table)中所示的一些示例数据填充表，然后保存您的作品。![填充的用户表](../images/00066.jpeg)图A-4.
    填充的*users*表
- en: Expand the Security tree under Object Explorer, and then expand Logins.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在对象资源管理器下展开安全树，然后展开登录。
- en: Right-click **Logins** in the User Properties window and select **New Login**.
    In the Login-New window, click **Search**, enter **ASPNET**, and then click **Check
    Names**. The full username should automatically populate. Click **OK** to exit
    the user search.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在用户属性窗口中右键单击**登录**并选择**新建登录**。在登录-新建窗口中，点击**搜索**，输入**ASPNET**，然后点击**检查名称**。完整的用户名应自动填充。点击**确定**退出用户搜索。
- en: Finally, while still in the User Properties window, select **User Mapping**,
    select the check box next to **WebApp**, select the **db_owner** role membership,
    and then click **OK**.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在用户属性窗口中，选择**用户映射**，选择**WebApp**旁边的复选框，选择**db_owner**角色成员，然后点击**确定**。
- en: That takes care of the entire configuration required on the SQL backend for
    the web application. Save and exit Management Studio.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 这样就完成了Web应用程序在SQL后端所需的所有配置。保存并退出管理工作室。
- en: 'All that remains is to create the website to interact with the database you
    created. Let’s do that now:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 剩下的就是创建一个与您创建的数据库交互的网站。现在让我们来做这件事：
- en: Download the vulnerable web application from [http://www.nostarch.com/metasploit.htm](http://www.nostarch.com/metasploit.htm)
    and extract the contents of the archive to *C:\Inetpub\wwwroot\*.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[http://www.nostarch.com/metasploit.htm](http://www.nostarch.com/metasploit.htm)下载易受攻击的Web应用程序，并将存档内容提取到*C:\Inetpub\wwwroot\*。
- en: Open your browser and point to *http://<youripaddress>/Default.aspx*. You should
    see a log-in form, as shown in [Figure A-5](part0022.html#sample_attack_website).
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您的浏览器并将指针指向*http://<youripaddress>/Default.aspx*。您应该看到一个登录表单，如图[A-5](part0022.html#sample_attack_website)所示。
- en: Enter bogus credentials to verify that the SQL query is being executed properly.
    To test some basic SQL injection to identify whether the web application is functioning
    properly, enter a single quote (**`'`**) in the username field, and enter anything
    as the password (doesn’t matter). The application should produce a yellow page
    with a SQL-related error.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入无效凭据以验证SQL查询是否被正确执行。为了测试一些基本的SQL注入以确定Web应用程序是否正常运行，在用户名字段中输入一个单引号（**`'`**），并将密码输入为任何内容（无关紧要）。应用程序应该显示一个包含与SQL相关的错误信息的黄色页面。
- en: Click the back arrow on your browser and enter **OR 1=1--** and something (doesn’t
    matter) in the password field. You should see a “You have successfully logged
    on” message.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击浏览器上的后退箭头，在密码字段中输入 **OR 1=1--** 和一些（不重要）的内容。你应该会看到一个“您已成功登录”的消息。
- en: If you have gotten this far, everything is set up properly, and you are ready
    to plunge in.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经到达这里，那么一切设置都正确，你准备好深入研究了。
- en: '![Sample attack website](../images/00067.jpeg)Figure A-5. Sample attack website'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '![示例攻击网站](../images/00067.jpeg)图A-5. 示例攻击网站'
- en: Updating Back|Track
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更新Back|Track
- en: 'As with any operating system, make sure you’re running the latest version of
    Back|Track and its tools. When logging into Back|Track (*root*/*toor*), issue
    the following commands:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 就像任何操作系统一样，确保你正在运行Back|Track及其工具的最新版本。在登录Back|Track (*root*/*toor*) 时，输入以下命令：
- en: '[PRE2]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This sequence of commands will select all available updates within Back|Track.
    After you have updated Back|Track by entering **`y`** (for yes) when prompted
    to accept the SVN certificate, your system still needs some minor updates to Metasploit,
    Fast-Track, and the SET.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 这一系列命令将选择Back|Track中所有可用的更新。在你通过输入 **`y`**（代表是）接受SVN证书提示后更新Back|Track，你的系统仍然需要一些对Metasploit、Fast-Track和SET的微小更新。
- en: '[PRE3]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In Back|Track, Metasploit is located at */opt/framework3/msf3/* ![](../images/00002.gif),
    so change to that directory prior to updating the Framework via subversion with
    **`msfupdate`** ![](../images/00004.gif).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在Back|Track中，Metasploit位于 */opt/framework3/msf3/* ![](../images/00002.gif)，所以在通过subversion使用
    **`msfupdate`** ![](../images/00004.gif) 更新Framework之前，请切换到该目录。
- en: Once Metasploit is updated, change to */pentest/exploits/set*`/` ![](../images/00005.gif)
    and run **`svn update`**. Lastly, change to */pentest/exploits/fasttrack*`/` ![](../images/00006.gif)
    and update Fast-Track.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Metasploit更新后，切换到 */pentest/exploits/set*`/` ![](../images/00005.gif) 并运行
    **`svn update`**。最后，切换到 */pentest/exploits/fasttrack*`/` ![](../images/00006.gif)
    并更新Fast-Track。
- en: You have now created and updated the testing environment that you will use as
    you work through the examples in this book.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建并更新了测试环境，你将在本书的示例中用到它。
