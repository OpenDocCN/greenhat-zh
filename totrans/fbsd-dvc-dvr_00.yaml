- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages1137497.png.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Welcome to *FreeBSD Device Drivers*! The goal of this book is to help you improve
    your understanding of device drivers under FreeBSD. By the time you finish this
    book, you should be able to build, configure, and manage your own FreeBSD device
    drivers.
  prefs: []
  type: TYPE_NORMAL
- en: This book covers FreeBSD version 8, the version recommended for production use
    as of this writing. Nonetheless, most of what you’ll learn will apply to earlier
    versions and should apply to later ones as well.
  prefs: []
  type: TYPE_NORMAL
- en: Who Is This Book For?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I wrote this book as a programmer, for programmers. As such, you’ll find a heavy
    focus on programming, not theory, and you’ll examine real device drivers (namely,
    ones that control hardware). Imagine trying to write a book without ever having
    read one. Inconceivable! The same thing goes for device drivers.
  prefs: []
  type: TYPE_NORMAL
- en: Prerequisites
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To get the most out of this book, you should be familiar with the C programming
    language. You should also know something about operating system design; for example,
    the difference between a process and a thread.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you lack the necessary background, I recommend reading the following three
    books prior to this one, or just keeping them around as references:'
  prefs: []
  type: TYPE_NORMAL
- en: The *C Programming Language*, by Brian W. Kernighan and Dennis M. Ritchie (Prentice
    Hall PTR, 1988)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Expert C Programming*, by Peter van der Linden (Prentice Hall, 1994)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*The Design and Implementation of the FreeBSD Operating System*, by Marshall
    Kirk McKusick and George V. Neville-Neil (Addison-Wesley Professional, 2005)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Contents at a Glance
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '*FreeBSD Device Drivers* contains the following chapters.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 1](ch01.html "Chapter 1. Building and Running Modules")'
  prefs: []
  type: TYPE_NORMAL
- en: Provides an overview and introduction to basic device driver programming concepts
    and terminology.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 2](ch02.html "Chapter 2. Allocating Memory")'
  prefs: []
  type: TYPE_NORMAL
- en: Describes FreeBSD’s kernel memory management routines.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 3](ch03.html "Chapter 3. Device Communication and Control")'
  prefs: []
  type: TYPE_NORMAL
- en: Teaches you how to communicate with and control your device drivers from user
    space.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 4](ch04.html "Chapter 4. Thread Synchronization")'
  prefs: []
  type: TYPE_NORMAL
- en: Discusses the problems and solutions associated with multithreaded programming
    and concurrent execution.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 5](ch05.html "Chapter 5. Delaying Execution")'
  prefs: []
  type: TYPE_NORMAL
- en: Describes delaying code execution and asynchronous code execution, and explains
    why these tasks are needed.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 6](ch06.html "Chapter 6. Case Study: Virtual Null Modem")'
  prefs: []
  type: TYPE_NORMAL
- en: Contains the first of several occasions where I walk you through a real-world
    device driver.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 7](ch07.html "Chapter 7. Newbus and Resource Allocation")'
  prefs: []
  type: TYPE_NORMAL
- en: Covers the infrastructure used by FreeBSD to manage the hardware devices on
    the system. From here on, I deal exclusively with real hardware.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 8](ch08.html "Chapter 8. Interrupt Handling")'
  prefs: []
  type: TYPE_NORMAL
- en: Discusses interrupt handling in FreeBSD.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 9](ch09.html "Chapter 9. Case Study: Parallel Port Printer Driver")'
  prefs: []
  type: TYPE_NORMAL
- en: Walks through `lpt(4)`, the parallel port printer driver, in its entirety.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 10](ch10.html "Chapter 10. Managing and Using Resources")'
  prefs: []
  type: TYPE_NORMAL
- en: Covers port-mapped I/O and memory-mapped I/O.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 11](ch11.html "Chapter 11. Case Study: Intelligent Platform Management
    Interface Driver")'
  prefs: []
  type: TYPE_NORMAL
- en: Reviews the parts of `ipmi(4)`, the Intelligent Platform Management Interface
    driver, which uses port-mapped I/O and memory-mapped I/O.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 12](ch12.html "Chapter 12. Direct Memory Access")'
  prefs: []
  type: TYPE_NORMAL
- en: Explains how to use Direct Memory Access (DMA) in FreeBSD.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 13](ch13.html "Chapter 13. Storage Drivers")'
  prefs: []
  type: TYPE_NORMAL
- en: Teaches you how to manage storage devices, such as disk drives, flash memory,
    and so on.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 14](ch14.html "Chapter 14. Common Access Method")'
  prefs: []
  type: TYPE_NORMAL
- en: Provides an overview and introduction to Common Access Method (CAM), which you’ll
    use to manage host bus adapters.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 15](ch15.html "Chapter 15. USB Drivers")'
  prefs: []
  type: TYPE_NORMAL
- en: Teaches you how to manage USB devices. It also walks through `ulpt(4)`, the
    USB printer driver, in its entirety.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 16](ch16.html "Chapter 16. Network Drivers, Part 1: Data Structures")'
  prefs: []
  type: TYPE_NORMAL
- en: Describes the data structures used by network drivers. It also goes over Message
    Signaled Interrupts (MSI).
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 17](ch17.html "Chapter 17. Network Drivers, Part 2: Packet Reception
    and Transmission")'
  prefs: []
  type: TYPE_NORMAL
- en: Examines the packet reception and transmission components of `em(4)`, the Intel
    PCI Gigabit Ethernet adapter driver.
  prefs: []
  type: TYPE_NORMAL
- en: Welcome Aboard!
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I hope you find this book useful and entertaining. As always, I welcome feedback
    with comments or bug fixes to [joe@thestackframe.org](mailto:joe@thestackframe.org).
  prefs: []
  type: TYPE_NORMAL
- en: Okay, enough with the introductory stuff. Let’s begin.
  prefs: []
  type: TYPE_NORMAL
