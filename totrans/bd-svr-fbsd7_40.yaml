- en: Chapter 16\. OPENLDAP SERVER 2.3.38
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第16章. OPENLDAP服务器2.3.38
- en: '[HTTP://OPENLDAP.ORG](HTTP://OPENLDAP.ORG)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[HTTP://OPENLDAP.ORG](HTTP://OPENLDAP.ORG)'
- en: 16.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.1. 摘要
- en: LDAP (Lightweight Directory Access Protocol) is a TCP-based protocol used to
    access directory services. Directory services provide users with information about
    other users and resources within a network (usually in the form of address book
    entries). Entries are stored in a central database and accessed from an LDAP server
    (OpenLDAP, Windows Server Active Directory, etc.) via an LDAP-capable client (Microsoft
    Outlook, Mozilla Thunderbird, etc.).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: LDAP（轻量级目录访问协议）是一种基于TCP的协议，用于访问目录服务。目录服务为用户提供有关网络中其他用户和资源的信息（通常以地址簿条目的形式）。条目存储在中央数据库中，并通过LDAP服务器（OpenLDAP、Windows
    Server Active Directory等）从具有LDAP功能的客户端（Microsoft Outlook、Mozilla Thunderbird等）访问。
- en: OpenLDAP complies with the X.500 series of directory services standards developed
    by the ITU-T (the standards division of the International Telecommunication Union).
    This provides LDAP interoperability between X.500-based applications.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: OpenLDAP符合ITU-T（国际电信联盟的标准部门）开发的X.500系列目录服务标准。这为基于X.500的应用程序提供了LDAP互操作性。
- en: 'As per the X.500 standard, LDAP entries are stored in a hierarchal format consisting
    of sets of attributes within directory entries:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 根据X.500标准，LDAP条目以分层格式存储，由目录条目内的属性集组成：
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: LDAP was created by Tim Howes, Steve Kille, and Wengyik Yeong in 1992\. It started
    as a project to provide directory services alongside the University of Michigan's
    email system.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: LDAP是由Tim Howes、Steve Kille和Wengyik Yeong在1992年创建的。它最初是一个项目，旨在与密歇根大学的电子邮件系统一起提供目录服务。
- en: A company named Net Boolean Inc. was formed to provide email services for businesses
    in early 1998\. Available commercial LDAP implementations were too expensive for
    this young company. Net Boolean created Boolean LDAP from open source LDAP software
    made available by the University of Michigan. Kurt Zeilenga of Net Boolean later
    founded the OpenLDAP Foundation and the project in August of 1998\. Current OpenLDAP
    development consists of a core team that includes founder Kurt Zeilenga, Howard
    Chu, and Pierangelo Masarati.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 一家名为Net Boolean Inc.的公司在1998年初成立，为商业提供电子邮件服务。当时可用的商业LDAP实现对这个年轻的公司来说太昂贵了。Net
    Boolean从密歇根大学提供的开源LDAP软件中创建了Boolean LDAP。Net Boolean的Kurt Zeilenga后来在1998年8月创立了OpenLDAP基金会和该项目。当前的OpenLDAP开发由一个核心团队组成，包括创始人Kurt
    Zeilenga、Howard Chu和Pierangelo Masarati。
- en: 16.2\. RESOURCES
  id: totrans-9
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.2. 资源
- en: OpenLDAP 2.3 Administrator's Guide
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: OpenLDAP 2.3管理员指南
- en: '[http://www.openldap.org/doc/admin23](http://www.openldap.org/doc/admin23)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.openldap.org/doc/admin23](http://www.openldap.org/doc/admin23)'
- en: RFC 4511 - Lightweight Directory Access Protocol
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 4511 - 轻量级目录访问协议
- en: '[http://tools.ietf.org/html/rfc4511](http://tools.ietf.org/html/rfc4511)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://tools.ietf.org/html/rfc4511](http://tools.ietf.org/html/rfc4511)'
- en: 16.3\. REQUIRED
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.3. 必需
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) FreeBSD
    7.0-RELEASE（见"[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)"）'
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) 更新的ports集合（见"[FreeBSD
    Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)"）'
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Internet
    connection'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) 网络连接'
- en: 16.4\. OPTIONAL
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.4. 可选
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) OpenSSL with
    a signed SSL Certificate (see "[OpenSSL 0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)")'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) 使用带有签名SSL证书的OpenSSL（见"[OpenSSL
    0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)"）'
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Registered
    domain name'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) 已注册域名'
- en: 16.5\. PREPARATION
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.5. 准备
- en: Become the superuser.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: 16.6\. INSTALL
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.6. 安装
- en: 'To begin the OpenLDAP installation process, enter the following commands:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始OpenLDAP的安装过程，请输入以下命令：
- en: '[PRE1]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: A menu should appear displaying options for openldap-server. We will leave the
    options at their defaults; press [tab] to select OK and then press [enter] to
    continue the installation process.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 应该会出现一个菜单，显示openldap-server的选项。我们将保留选项的默认值；按[tab]键选择OK，然后按[enter]键继续安装过程。
- en: 16.7\. CONFIGURE
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.7. 配置
- en: Once the installation process is complete, it's time to configure OpenLDAP for
    use on your system.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候为您的系统配置OpenLDAP了。
- en: Set up an OpenLDAP root password. OpenLDAP stores the LDAP administrator's password
    in the main configuration file slapd.conf. OpenLDAP can read this password either
    as plaintext or as a hash. A hash obscures the password with an algorithm so it
    isn't in plain view. The commands below will create an SSHA (Salted Secure Hash
    Algorithm) hash of your root password for OpenLDAP and insert it into slapd.conf.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置OpenLDAP的根密码。OpenLDAP将LDAP管理员的密码存储在主配置文件slapd.conf中。OpenLDAP可以以明文或哈希的形式读取此密码。哈希通过算法将密码加密，使其不在明文中显示。以下命令将为OpenLDAP创建根密码的SSHA（加盐安全哈希算法）哈希，并将其插入到slapd.conf中。
- en: '[PRE2]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We''ll make a few more modifications to the slapd.conf file. Open slapd.conf:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将对slapd.conf文件进行一些修改。打开slapd.conf：
- en: '[PRE3]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Scroll down to the `suffix` declaration (~56). If your domain name is [example.com](http://example.com),
    enter `"dc=``*example*``,dc=``*com*``"`. Proceed to the next entry, `rootdn`,
    and enter the same information, leaving the `"cn=Manager"` segment alone. The
    two lines would appear as follows for a domain named [example.com](http://example.com):'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到`suffix`声明（约56行）。如果您的域名是[example.com](http://example.com)，请输入`"dc=``*example*``,dc=``*com*``"`。继续到下一个条目`rootdn`，并输入相同的信息，保留`"cn=Manager"`部分不变。对于名为[example.com](http://example.com)的域名，这两行将如下所示：
- en: '[PRE4]'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Scroll down to the bottom of slapd.conf and add the following two lines:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到slapd.conf文件的底部并添加以下两行：
- en: '[PRE5]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: These lines add support for the `COSINE` schema and the `inetOrgPerson` object
    class. `COSINE` and `inetOrgPerson` extend the core schema with attributes that
    are useful to organizations. Examples of additional attributes include employee
    numbers, room numbers, building names, and so on.
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些行添加了对`COSINE`模式和对`inetOrgPerson`对象类的支持。`COSINE`和`inetOrgPerson`通过添加对组织有用的属性扩展了核心模式。附加属性的示例包括员工编号、房间编号、建筑名称等。
- en: For information on the `COSINE` schema, see [http://tools.ietf.org/html/rfc4524](http://tools.ietf.org/html/rfc4524).
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关于`COSINE`模式的信息，请参阅[http://tools.ietf.org/html/rfc4524](http://tools.ietf.org/html/rfc4524)。
- en: For information on the `inetOrgPerson` object class, see [http://tools.ietf.org/html/rfc2798](http://tools.ietf.org/html/rfc2798).
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关于`inetOrgPerson`对象类的信息，请参阅[http://tools.ietf.org/html/rfc2798](http://tools.ietf.org/html/rfc2798)。
- en: 'Add a simple access policy to keep the `userPassword` attribute from being
    displayed to other users. Add these lines to the bottom of slapd.conf:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个简单的访问策略，以防止将`userPassword`属性显示给其他用户。将以下行添加到slapd.conf文件的底部：
- en: '[PRE6]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Add another access policy for user information. Users should have write access
    to their own information and read-only access to other people''s information.
    Anonymous users should have no access. Requests from the localhost should have
    read access. The lines should appear as follows:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加另一个访问策略以获取用户信息。用户应有权写入自己的信息，并对其他人的信息具有只读访问权限。匿名用户应无权访问。来自本地主机的请求应具有读取权限。这些行应如下所示：
- en: '[PRE7]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: If you possess a signed SSL Certificate and wish to enable secure LDAP connections
    using SSL, continue. Otherwise skip to step 8\. The following declarations will
    tell the slapd program where to find your SSL Certificates.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您拥有已签名的SSL证书并希望启用使用SSL的安全LDAP连接，请继续。否则跳到步骤8。以下声明将告诉slapd程序在哪里找到您的SSL证书。
- en: 'Code View:'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 代码视图：
- en: '[PRE8]'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Remember to change the paths and filenames (in italics) to point to your server
    certificates and key file. Save and exit.
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 记得将路径和文件名（斜体）更改为指向您的服务器证书和密钥文件。保存并退出。
- en: 'OpenLDAP uses an embedded database called Berkeley DB to store its data. The
    command below will copy the example database configuration file DB_CONFIG.example
    to OpenLDAP''s database path:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: OpenLDAP使用一个名为Berkeley DB的嵌入式数据库来存储其数据。以下命令将示例数据库配置文件DB_CONFIG.example复制到OpenLDAP的数据库路径：
- en: '[PRE9]'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 16.8\. TESTING
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.8\. 测试
- en: In this section, we'll perform some basic tests to confirm that OpenLDAP answers
    LDAP requests properly.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将执行一些基本测试，以确认OpenLDAP能够正确地响应LDAP请求。
- en: 'To start the LDAP server automatically at boot time, add these lines to the
    rc.conf file located in /etc. Open rc.conf:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在启动时自动启动LDAP服务器，请将以下行添加到位于`/etc`目录中的rc.conf文件中。打开rc.conf：
- en: '[PRE10]'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'If you did not choose to enable secure LDAP connections with SSL, add the following
    lines:'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您没有选择启用带有SSL的安全LDAP连接，请添加以下行：
- en: '[PRE11]'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'If you chose to enable secure LDAP connections with SSL, add the following
    lines:'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您选择启用带有SSL的安全LDAP连接，请添加以下行：
- en: '[PRE12]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Save and exit, then start the LDAP server:'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存并退出，然后启动LDAP服务器：
- en: '[PRE13]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Create data to import into the LDAP database. The first import to the LDAP
    database will consist of the domain and manager entries. Change to a working directory
    of your choice. Create a file named domainmgr.ldif:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建要导入到LDAP数据库中的数据。LDAP数据库的第一个导入将包括域名和管理员条目。切换到您选择的任何工作目录。创建一个名为domainmgr.ldif的文件：
- en: '[PRE14]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Enter the following text into the blank file:'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将以下文本输入到空白文件中：
- en: '[PRE15]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The LDAP abbreviations in use are:'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当前使用的LDAP缩写如下：
- en: '[PRE16]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: distinguished name
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 被区分的名字
- en: '[PRE17]'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: domain component
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 域组件
- en: '[PRE18]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: common name
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 常见名称
- en: '[PRE19]'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: organization
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 组织
- en: Substitute your domain name appropriately (items in italics must reflect your
    domain). Do not change any other parts of this file. The ldapadd utility we are
    going to run next is very specific about the syntax of LDIF (LDAP Data Interchange
    Format) files. Ensure that there are no extra spaces after the last letter of
    each line. The single blank line between the domain and manager entries is necessary.
    Save and exit.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 适当地替换你的域名（斜体中的项必须反映你的域名）。不要更改此文件的任何其他部分。我们接下来要运行的ldapadd实用程序对LDIF（LDAP数据交换格式）文件的语法非常具体。确保每行的最后一个字母后面没有多余的空格。域名和管理员条目之间的单个空行是必要的。保存并退出。
- en: 'Add the entries of domainmgr.ldif to the LDAP database (substitute your domain
    name):'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将domainmgr.ldif条目添加到LDAP数据库中（替换你的域名）：
- en: '[PRE20]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: You will be prompted for the LDAP root password you created in step 1 of "[Configure](configure-id15.html#configure-id15)".
    If the command completes without any errors, continue; otherwise reopen domainmgr.ldif,
    check spelling and spacing, and run the command again.
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你将被提示输入你在步骤1中创建的LDAP根密码。“[配置](configure-id15.html#configure-id15)”。如果命令无错误完成，则继续；否则重新打开domainmgr.ldif，检查拼写和空格，然后再次运行命令。
- en: 'Create an organizational unit to hold user entries. Create a file named people.ldif:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个组织单位来保存用户条目。创建一个名为people.ldif的文件：
- en: '[PRE21]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Enter the following text into the blank file:'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将以下文本输入到空白文件中：
- en: '[PRE22]'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Again, substitute your domain name (shown in italics) and be careful with spelling
    and spacing. Save and exit.
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 再次替换斜体中的域名（显示在斜体中）并注意拼写和空格。保存并退出。
- en: 'Add the entries of people.ldif to the LDAP database (substitute your domain
    name):'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将people.ldif条目添加到LDAP数据库中（替换你的域名）：
- en: '[PRE23]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Add a user to the LDAP database within the organizational unit you created.
    Create a file named user.ldif:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你创建的组织单位内将用户添加到LDAP数据库中。创建一个名为user.ldif的文件：
- en: '[PRE24]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Enter the following text into the blank file:'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将以下文本输入到空白文件中：
- en: '[PRE25]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Replace the items shown in italics with the appropriate data. Save and exit.
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将斜体中的项替换为适当的数据。保存并退出。
- en: 'Create a hashed password for this new user and append it to user.ldif:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为此新用户创建一个散列密码并将其追加到user.ldif中：
- en: '[PRE26]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Add the entries of user.ldif to the LDAP database (substitute your domain name):'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将user.ldif条目添加到LDAP数据库中（替换你的域名）：
- en: '[PRE27]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Check that all of the above entries made it into the LDAP database successfully
    (substitute your domain name):'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查上述所有条目是否已成功添加到LDAP数据库中（替换你的域名）：
- en: '[PRE28]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'You will be prompted for the manager password. Below is a sample of output
    from the `ldapsearch` command:'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你将被提示输入管理员密码。以下是`ldapsearch`命令的输出示例：
- en: '[PRE29]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[PRE30]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '* * *'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** When logging into the LDAP server from an LDAP client you may need
    to enter "Base DN," "Bind DN," password, and hostname. Here is what to enter for
    "Base DN" and "Bind DN" (replace the italicized items appropriately):'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 当从LDAP客户端登录LDAP服务器时，你可能需要输入“Base DN”、“Bind DN”、密码和主机名。以下是“Base DN”和“Bind
    DN”的输入内容（适当地替换斜体中的项）：'
- en: '* * *'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '[PRE31]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 16.9\. CONFIG FILES
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.9\. 配置文件
- en: /usr/local/etc/openldap/slapd.conf
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/openldap/slapd.conf
- en: Main configuration file for slapd
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: slapd的主配置文件
- en: 16.10\. LOG FILES
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.10\. 日志文件
- en: /var/log/debug.log
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/debug.log
- en: Contains slapd logs
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 包含slapd日志
- en: 16.11\. NOTES
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 16.11\. 备注
- en: Since ldapadd is sensitive to syntax errors, adding entries to the LDAP database
    manually (as we did in the test section above) can be very inconvenient. Utilities
    exist that allow you to administer the LDAP database in a more efficient and user-friendly
    manner. phpLDAPadmin is a web-based LDAP browser designed to manage the LDAP database
    more intuitively. See "phpLDAPadmin 1.1.0" on page 153 for details.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于ldapadd对语法错误敏感，手动将条目添加到LDAP数据库（如我们在上面的测试部分中所做的那样）可能非常不方便。存在一些实用程序，允许您以更高效和用户友好的方式管理LDAP数据库。phpLDAPadmin是一个基于Web的LDAP浏览器，旨在更直观地管理LDAP数据库。有关详细信息，请参阅第153页的“phpLDAPadmin
    1.1.0”。
- en: OpenLDAP 2.3 accepts only LDAPv3 requests by default. Ensure that your LDAP
    client is set to LDAPv3 if given the option. If LDAPv2 is needed you may add `allow
    bind_v2` to /usr/local/etc/openldap/slapd.conf; see the manual page for slapd.conf
    for details (view this by typing `man slapd.conf` at the prompt).
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenLDAP 2.3 默认只接受 LDAPv3 请求。如果提供了选项，请确保您的 LDAP 客户端设置为 LDAPv3。如果需要 LDAPv2，您可以在
    /usr/local/etc/openldap/slapd.conf 中添加 `allow bind_v2`；有关 slapd.conf 的详细信息，请参阅手册页（在提示符下输入
    `man slapd.conf` 查看此信息）。
