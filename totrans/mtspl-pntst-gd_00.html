<html><head></head><body><section epub:type="preface" id="introduction"><div class="titlepage"><div class="book"><div class="book"><h2 class="title1">Introduction</h2></div></div></div><p class="calibre2">Imagine that sometime in the not-so-distant future an attacker decides to attack a multinational company’s digital assets, targeting hundreds of millions of dollars worth of intellectual property buried behind millions of dollars in infrastructure. Naturally, the attacker begins by firing up the latest version of Metasploit.</p><p class="calibre2">After exploring the target’s perimeter, he finds a soft spot and begins a methodical series of attacks, but even after he’s compromised nearly every aspect of the network, the fun has only just begun. He maneuvers through systems, identifying core, critical business components that keep the company running. With a single keystroke, he could help himself to millions of company dollars and compromise all their sensitive data.</p><p class="calibre2">Congratulations on a job well done — you’ve shown true business impact, and now it’s time to write the report. Oddly enough, today’s penetration testers often find themselves in the role of a fictitious adversary like the one described above, performing legal attacks at the request of companies that <span class="strong"><em class="calibre4">need</em></span> high levels of security. Welcome to the world of penetration testing and the future of security.</p><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="why_do_a_penetration_test_question">Why Do a Penetration Test?</h2></div></div></div><p class="calibre2">Companies invest millions of dollars in security programs to protect critical infrastructures, identify chinks in the armor, and prevent serious data breaches. A penetration test is one of the most effective ways to identify systemic weaknesses and deficiencies in these programs. By attempting to circumvent security controls and bypass security mechanisms, a penetration tester is able to identify ways in which a hacker might be able to compromise an organization’s security and damage the organization as a whole.</p><p class="calibre2">As you read through this book, remember that you’re not necessarily targeting one system or multiple systems. Your goal is to show, in a safe and controlled manner, how an attacker might be able to cause serious harm to an organization and impact its ability to, among other things, generate revenue, maintain its reputation, and protect its customers.</p></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="why_metasploit_question">Why Metasploit?</h2></div></div></div><p class="calibre2">Metasploit isn’t just a tool; it’s an entire framework that provides the infrastructure needed to automate mundane, routine, and complex tasks. This allows you to concentrate on the unique or specialized aspects of penetration testing and on identifying flaws within your information security program.</p><p class="calibre2">As you progress through the chapters in this book and establish a well-rounded methodology, you will begin to see the many ways in which Metasploit can be used in your penetration tests. Metasploit allows you to easily build attack vectors to augment its exploits, payloads, encoders, and more in order to create and execute more advanced attacks. At various points in this book we explain several third-party tools — including some written by the authors of this book — that build on the Metasploit Framework. Our goal is to get you comfortable with the Framework, show you some advanced attacks, and ensure that you can apply these techniques responsibly. We hope you enjoy reading this book as much as we enjoyed creating it. Let the fun and games begin.</p></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="a_brief_history_of_metasploit">A Brief History of Metasploit</h2></div></div></div><p class="calibre2">Metasploit was originally developed and conceived by HD Moore while he was employed by a security firm. When HD realized that he was spending most of his time validating and sanitizing public exploit code, he began to create a flexible and maintainable framework for the creation and development of exploits. He released his first edition of the Perl-based Metasploit in October 2003 with a total of 11 exploits.</p><p class="calibre2">With the help of Spoonm, HD released a total rewrite of the project, Metasploit 2.0, in April 2004. This version included 19 exploits and over 27 payloads. Shortly after this release, Matt Miller (Skape) joined the Metasploit development team, and as the project gained popularity, the Metasploit Framework received heavy backing from the information security community and quickly became a necessary tool for penetration testing and exploitation.</p><p class="calibre2">Following a complete rewrite in the Ruby programming language, the Metasploit team released Metasploit 3.0 in 2007. The migration of the Framework from Perl to Ruby took 18 months and resulted in over 150,000 lines of new code. With the 3.0 release, Metasploit saw widespread adoption in the security community and a big increase in user contributions.</p><p class="calibre2">In fall 2009, Metasploit was acquired by Rapid7, a leader in the vulnerability-scanning field, which allowed HD to build a team to focus solely on the development of the Metasploit Framework. Since the acquisition, updates have occurred more rapidly than anyone could have imagined. Rapid7 released two commercial products based on the Metasploit Framework: Metasploit Express and Metasploit Pro. Metasploit Express is a lighter version of the Metasploit Framework with a GUI and additional functionality, including reporting, among other useful features. Metasploit Pro is an expanded version of Metasploit Express that touts collaboration and group penetration testing and such features as a one-click virtual private network (VPN) tunnel and much more.</p></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="about_this_book">About This Book</h2></div></div></div><p class="calibre2">This book is designed to teach you everything from the fundamentals of the Framework to advanced techniques in exploitation. Our goal is to provide a useful tutorial for the beginner and a reference for practitioners. However, we won’t always hold your hand. Programming knowledge is a definite advantage in the penetration testing field, and many of the examples in this book will use either the Ruby or Python programming language. Still, while we suggest that you learn a language like Ruby or Python to aid in advanced exploitation and customization of attacks, programming knowledge is not required.</p><p class="calibre2">As you grow more comfortable with Metasploit, you will notice that the Framework is frequently updated with new features, exploits, and attacks. This book was developed with the knowledge that Metasploit is continually changing and that no printed book is likely to be able to keep pace with this rapid development. Therefore, we focus on the fundamentals, because once you understand how Metasploit works you will be able to ramp up quickly with updates to the Framework.</p></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="whatas_in_the_book_question">What’s in the Book?</h2></div></div></div><p class="calibre2">How can this book help you to get started or take your skills to the next level? Each chapter is designed to build on the previous one and to help you build your skills as a penetration tester from the ground up.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><a class="xref" href="part0005.html#the_absolute_basics_of_penetration_testi">Chapter 1</a>, establishes the methodologies around penetration testing.</li><li class="listitem"><a class="xref" href="part0006.html#metasploit_basics">Chapter 2</a>, is your introduction to the various tools within the Metasploit Framework.</li><li class="listitem"><a class="xref" href="part0007.html#intelligence_gathering-id1">Chapter 3</a>, shows you ways to leverage Metasploit in the reconnaissance phase of a penetration test.</li><li class="listitem"><a class="xref" href="part0008.html#vulnerability_scanning">Chapter 4</a>, walks you through identifying vulnerabilities and leveraging vulnerability scanning technology.</li><li class="listitem"><a class="xref" href="part0009.html#the_joy_of_exploitation">Chapter 5</a>, throws you into exploitation.</li><li class="listitem"><a class="xref" href="part0010.html#meterpreter">Chapter 6</a>, walks you through the Swiss Army knife of post exploitation: Meterpreter.</li><li class="listitem"><a class="xref" href="part0011.html#avoiding_detection">Chapter 7</a>, focuses on the underlying concepts of antivirus evasion techniques.</li><li class="listitem"><a class="xref" href="part0012.html#exploitation_using_client-side_attacks">Chapter 8</a>, covers client-side exploitation and browser bugs.</li><li class="listitem"><a class="xref" href="part0013.html#metasploit_auxiliary_modules">Chapter 9</a>, walks you through auxiliary modules.</li><li class="listitem"><a class="xref" href="part0014.html#the_social-engineer_toolkit">Chapter 10</a>, is your guide to leveraging the Social-Engineer Toolkit in social-engineering attacks.</li><li class="listitem"><a class="xref" href="part0015.html#fast-track">Chapter 11</a>, offers a complete run down on Fast-Track, an automated penetration testing framework.</li><li class="listitem"><a class="xref" href="part0016.html#karmetasploit">Chapter 12</a>, shows you how to leverage Karmetasploit for wireless attacks.</li><li class="listitem"><a class="xref" href="part0017.html#building_your_own_module">Chapter 13</a>, teaches you how to build your own exploitation module.</li><li class="listitem"><a class="xref" href="part0018.html#creating_your_own_exploits">Chapter 14</a>, covers fuzzing and creating exploit modules out of buffer overflows.</li><li class="listitem"><a class="xref" href="part0019.html#porting_exploits_to_the_metasploit_frame">Chapter 15</a>, is an in-depth look at how to port existing exploits into a Metasploit-based module.</li><li class="listitem"><a class="xref" href="part0020.html#meterpreter_scripting">Chapter 16</a>, shows you how to create your own Meterpreter scripts.</li><li class="listitem"><a class="xref" href="part0021.html#simulated_penetration_test">Chapter 17</a>, pulls everything together as it walks you through a simulated penetration test.</li></ul></div></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="a_note_on_ethics">A Note on Ethics</h2></div></div></div><p class="calibre2">Our goal in writing this book is to help you to improve your skills as a penetration tester. As a penetration tester, you will be bypassing security measures; that’s simply part of the job. When you do, keep the following in mind:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Don’t be malicious.</li><li class="listitem">Don’t be stupid.</li><li class="listitem">Don’t attack targets without written permission.</li><li class="listitem">Consider the consequences of your actions.</li><li class="listitem">If you do things illegally, you can be caught and put in jail!</li></ul></div><p class="calibre2">Neither the authors of this book nor No Starch Press, its publisher, condones or encourages the misuse of the penetration testing techniques discussed herein. Our goal is to make you smarter, not to help you to get into trouble, because we won’t be there to get you out.</p></div></section></body></html>