<html><head></head><body><div class="chapter" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="how_computer_networks_are_organized"/>Chapter 4. HOW COMPUTER NETWORKS ARE ORGANIZED</h1></div></div></div><p>In order to exchange files and messages through a network, all the computers connected to that network must use the same set of rules (known to network designers as a <span class="emphasis"><em>protocol</em></span>). The rules that control the Internet are called <span class="emphasis"><em>transmission control protocol/Internet protocol (TCP/IP)</em></span>. Even if you don't plan to connect your network to the Internet right now, you should use TCP/IP for at least two reasons: First, TCP/IP is built into the Windows, Macintosh, and Linux operating systems and most inexpensive networking equipment; and second, you would waste a lot of time and money finding equipment that works with one of the other, older network protocols.<a class="indexterm" id="IDX-CHP-4-0315"/><a class="indexterm" id="IDX-CHP-4-0316"/><a class="indexterm" id="IDX-CHP-4-0317"/></p><p>This chapter offers a relatively simple explanation of the TCP/IP protocols and how your network uses them.</p><div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="tcp_solidus_ip_networks"/>TCP/IP Networks</h1></div></div></div><p>TCP/IP is really a suite of protocols. The most important are TCP (transmission control protocol), which controls the way commands, messages, and files are broken into packets and reassembled at the other end, and IP (Internet protocol), which provides the rules that guide each data packet through different kinds of networks to the correct destination.<a class="indexterm" id="IDX-CHP-4-0318"/><a class="indexterm" id="IDX-CHP-4-0319"/><a class="indexterm" id="IDX-CHP-4-0320"/><a class="indexterm" id="IDX-CHP-4-0321"/><a class="indexterm" id="IDX-CHP-4-0322"/></p><p>Your computer handles transmission control automatically, so you don't have to devote a lot of attention to individual data packets and their contents. The information in <a class="xref" href="ch02.html" title="Chapter 2. TYPES OF NETWORK CONNECTIONS">Chapter 2</a> of this book provides as much detail as most users ever need. But the Internet protocol is another matter; you should understand how your network (and just about every other network connected to the Internet) uses names and addresses for individual computers and other network nodes and how to use some of the standard software tools that are included in every network computer.<a class="indexterm" id="IDX-CHP-4-0323"/><a class="indexterm" id="IDX-CHP-4-0324"/></p><p>Fortunately, internal routing through the Internet is automatic; if you enter a valid address in your web browser, email client, or other program, the Internet will almost always find a path to the computer with that address. If it doesn't, the <code class="literal">ping</code> and <code class="literal">traceroute</code> commands described in "Network Tools" in <a class="xref" href="ch04s02.html" title="Network Tools">Network Tools</a> will help you find the source of the problem.<a class="indexterm" id="IDX-CHP-4-0325"/></p><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="names_and_addresses"/>Names and Addresses</h2></div></div></div><p>An "addressing convention" sounds like an event where people attend speeches and workshops about house numbers and receive awards for sending out five million pieces of junk mail without an error. The formal sessions are often boring, but the after-hours parties are great. In networks, <span class="emphasis"><em>addressing conventions</em></span> are actually the rules that everybody uses to identify the computers and other devices connected to a network and the people who use them. Every computer connected to a network has a unique name and address within that network, and every network connected to the Internet has its own unique numeric Internet address known as an <span class="emphasis"><em>IP address</em></span>.</p><div class="sect3" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="numeric_addresses"/>Numeric Addresses</h3></div></div></div><p>The technical committees, international standards organizations, and government agencies that manage the Internet have all agreed on a 32-bit numeric address format shown as four numbers between 0 and 255, separated by periods, like this:</p><table border="0" class="simplelist" summary="Simple list"><tr><td>192.168.3.200</td></tr></table><p>When you read an IP address out loud, you pronounce each digit separately and each period as "dot." So you would read this sample address as "one-nine-two dot one-six-eight dot three dot two-zero-zero."</p><p>You can think of an IP address as similar to your telephone number. Every computer connected to your LAN and every device or network connected to the Internet has a different address.</p><p>The agency responsible for assigning numeric IP addresses on the Internet is the <span class="emphasis"><em>Internet Assigned Names Authority (IANA)</em></span>. Some formal contracts with the US government are involved, but the real reason IANA can provide this service to the worldwide Internet community is that everybody agrees to respect their assignments.<a class="indexterm" id="IDX-CHP-4-0326"/></p><p>As the owner of a small LAN, you will never deal directly with IANA. Your Internet service provider controls a block of numeric addresses, and it will assign you one address (or more) when you set up your new connections.</p></div><div class="sect3" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="reserved_addresses"/>Reserved Addresses</h3></div></div></div><p>As <a class="xref" href="ch03.html" title="Chapter 3. HUBS, SWITCHES, AND ROUTERS">Chapter 3</a> explained, your LAN communicates with other networks through a router. As far as the networks connected to that router are concerned, the router is just one more network connection with an IP address. Therefore, as <a class="xref" href="ch04.html#a_router_presents_separate_ip_addresses" title="Figure 4-1. A router presents separate IP addresses to each network.">Figure 4-1</a> shows, a router has two different IP addresses: one for its connection to the LAN and the other for the WAN or the Internet. The router presents a single address to the Internet that represents all the computers and other devices on your LAN; it performs a function called <span class="emphasis"><em>network address translation (NAT)</em></span> that converts your public address to the addresses of individual network devices. One of the benefits of this system is that you can use the same IP addresses within your LAN as your neighbor across the street (or a LAN on the other side of the world), and the addresses won't interfere with one another.<a class="indexterm" id="IDX-CHP-4-0327"/><a class="indexterm" id="IDX-CHP-4-0328"/><a class="indexterm" id="IDX-CHP-4-0329"/><a class="indexterm" id="IDX-CHP-4-0330"/><a class="indexterm" id="IDX-CHP-4-0331"/><a class="indexterm" id="IDX-CHP-4-0332"/><a class="indexterm" id="IDX-CHP-4-0333"/><a class="indexterm" id="IDX-CHP-4-0334"/><a class="indexterm" id="IDX-CHP-4-0335"/><a class="indexterm" id="IDX-CHP-4-0336"/></p><p>In order to make this system work properly, IANA has reserved several blocks of IP address numbers for LANs; when a router receives a packet with an address in one of these ranges, it does not relay the packet to the Internet. If you use these addresses for the devices in your LAN, you can be certain that your packets (and the commands, messages, and files that make up those packets) won't end up at the reading room of the National Library of Ecuador when you wanted to send them to your assistant across the corridor.</p><p>The reserved IP addresses are:</p><table border="0" class="simplelist" summary="Simple list"><tr><td>10.0.0.0 to 10.255.255.255</td></tr><tr><td>169.254.0.0 to 169.254.255.255</td></tr><tr><td>172.16.0.0 to 172.31.255.255</td></tr><tr><td>192.168.0.0 to 192.168.255.255</td></tr></table></div><div class="sect3" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixed_and_dynamic_address_assignments"/>Fixed and Dynamic Address Assignments (DHCP)</h3></div></div></div><p>The computers and other nodes in your LAN can obtain their numeric IP addresses in one of two ways: The person who sets up the network connection can assign a permanent address, or a router or other network control device can automatically assign an address every time the device connects to the network. A permanent assignment is called a <span class="emphasis"><em>fixed</em></span> or <span class="emphasis"><em>static</em></span> IP address; an automatic assignment is a <span class="emphasis"><em>dynamic</em></span> address.<a class="indexterm" id="IDX-CHP-4-0337"/><a class="indexterm" id="IDX-CHP-4-0338"/></p><div class="figure"><a id="a_router_presents_separate_ip_addresses"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject4_d1e2741"/><img alt="A router presents separate IP addresses to each network." src="tagoreillycom20090324nostarchimages266232.png.jpg"/></div></div><p class="title"><b>Figure 4-1. A router presents separate IP addresses to each network.</b></p></div><br class="figure-break"/><p>The method for assigning dynamic IP addresses is called <span class="emphasis"><em>Dynamic Host Configuration Protocol (DHCP)</em></span>, so the device that makes the assignments is a <span class="emphasis"><em>DHCP server</em></span>. In a LAN, the DHCP server uses numbers from the reserved range; on the Internet, the servers use numbers from a range provided to your ISP by IANA.<a class="indexterm" id="IDX-CHP-4-0339"/><a class="indexterm" id="IDX-CHP-4-0340"/><a class="indexterm" id="IDX-CHP-4-0341"/><a class="indexterm" id="IDX-CHP-4-0342"/></p><p>Both fixed and dynamic IP address assignments can work equally well, but all the devices on the network must use the same system; otherwise, more than one device might use the same number at the same time.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If your LAN includes laptops and other portables that connect and disconnect from the network, DHCP is the better choice because it allows the network to assign an address automatically when a user connects and to re-use the same address after the first user has disconnected.</p></div><p>Some Internet service providers and corporate network managers assign static IP addresses to each user, whereas others use DHCP to generate addresses. <a class="xref" href="ch10.html" title="Chapter 10. CONNECTING YOUR NETWORK TO THE INTERNET">Chapter 10</a> and <a class="xref" href="ch11.html" title="Chapter 11. CONNECTING YOUR COMPUTER TO A NETWORK">Chapter 11</a> explain how to set up your own computer and LAN to use either method.</p></div><div class="sect3" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="the_domain_name_system"/>The Domain Name System</h3></div></div></div><p>Computers have no trouble handling long strings of numbers, but people often do. Addresses in the form of words rather than numbers are generally easier to remember and use. That's why the Internet and just about every LAN use names for each computer connected to a network. In a LAN, each computer reads the name of every other device on the same network automatically; on the Internet, a computer called a <span class="emphasis"><em>Domain Name System server (DNS server)</em></span> converts names to numeric addresses; when you type the name of a website into a browser, a DNS server finds the number that corresponds to that name and returns it to your browser, which connects to that numeric address.<a class="indexterm" id="IDX-CHP-4-0343"/><a class="indexterm" id="IDX-CHP-4-0344"/><a class="indexterm" id="IDX-CHP-4-0345"/><a class="indexterm" id="IDX-CHP-4-0346"/><a class="indexterm" id="IDX-CHP-4-0347"/><a class="indexterm" id="IDX-CHP-4-0348"/><a class="indexterm" id="IDX-CHP-4-0349"/><a class="indexterm" id="IDX-CHP-4-0350"/><a class="indexterm" id="IDX-CHP-4-0351"/><a class="indexterm" id="IDX-CHP-4-0352"/><a class="indexterm" id="IDX-CHP-4-0353"/><a class="indexterm" id="IDX-CHP-4-0354"/><a class="indexterm" id="IDX-CHP-4-0355"/><a class="indexterm" id="IDX-CHP-4-0356"/><a class="indexterm" id="IDX-CHP-4-0357"/><a class="indexterm" id="IDX-CHP-4-0358"/></p><p>You (or your network manager) will assign a name to each computer when you set up your network; your Internet service provider should set up a domain name for your connection to the Internet. Within a LAN, you can use simple descriptive names for each computer, such as "Sam" or "Kate."</p><p>On the other hand, the system for naming computers and networks connected to the Internet (rather than to your own LAN) follows some very specific rules called the <span class="emphasis"><em>Domain Name System (DNS)</em></span>. In the Domain Name System, every name starts with a top-level domain name at the extreme right that can be either a generic description (such as <span class="emphasis"><em>com</em></span>, <span class="emphasis"><em>net</em></span>, or <span class="emphasis"><em>edu</em></span>) or a two-letter country code (such as <span class="emphasis"><em>uk</em></span> for the United Kingdom or <span class="emphasis"><em>ca</em></span> for Canada). As you move to the left, the next word (or group of letters and numbers) is a name (called a <span class="emphasis"><em>subdomain</em></span>) that has been reserved by a specific owner—an individual, a business, a government agency, or some other formal or informal organization. Large organizations might have one or more additional subdomain names to the left of the first one. Each part of the name is divided from the next one by a period (read as <span class="emphasis"><em>dot</em></span>).<a class="indexterm" id="IDX-CHP-4-0359"/><a class="indexterm" id="IDX-CHP-4-0360"/><a class="indexterm" id="IDX-CHP-4-0361"/><a class="indexterm" id="IDX-CHP-4-0362"/><a class="indexterm" id="IDX-CHP-4-0363"/></p><p>For example, the University of Washington's domain name is <a class="ulink" href="http://washington.edu">washington.edu</a>. Within the university, the Department of Genome Science's address is <a class="ulink" href="http://gs.washington.edu">gs.washington.edu</a>. And within that department, the addresses of the research group studying evolutionary genetics is <a class="ulink" href="http://evolution.gs.washington.edu">evolution.gs.washington.edu</a>.</p><p>At the extreme left of a domain name, you will sometimes see a subdomain that identifies the type of server. This address might be the familiar <span class="emphasis"><em>www</em></span> or some other Internet service such as <span class="emphasis"><em>ftp (file transfer protocol)</em></span>.<a class="indexterm" id="IDX-CHP-4-0364"/></p><p>Many addresses also include the <span class="emphasis"><em>type</em></span> of Internet service (the <span class="emphasis"><em>protocol</em></span>) that the web resource at that address uses as a leading part of the address, followed by a colon and two forward slashes (<span class="emphasis"><em>//</em></span>), such as <a class="ulink" href="http://host.sample.com/">http://host.sample.com/</a>. The <span class="emphasis"><em>http</em></span> part stands for <span class="emphasis"><em>HyperText Transfer Protocol</em></span> —the protocol that defines most websites. If you want to reach a different service at the same destination such as a file transfer server, a telnet host, or an Internet Relay Chat server, you might instead use <a class="ulink" href="ftp://host.sample.com/">ftp://host.sample.com/</a>, <a class="ulink" href="http://telnet://host.sample.com/">telnet://host.sample.com/</a>, or <a class="ulink" href="http://irc://host.sample.com/">irc://host.sample.com/</a>, respectively. When an address does not include the protocol type and the two forward slashes, your web browser will assume it's an http address. Some top-level domains that use country codes have other structures that differ from one country to another. Domain names that have a <span class="emphasis"><em>us</em></span> (for United States) top-level domain sometimes use subdomains (also called <span class="emphasis"><em>second-level domains</em></span>) that identify the state and city where the owner is located, such as <a class="ulink" href="http://example.sf.ca.us">example.sf.ca.us</a>, which would be in San Francisco, California. In Canada and other countries, the domain name comes right before the country code (such as the Canadian Broadcasting Corporation's <span class="emphasis"><em>cbc.ca</em></span>), whereas other countries use generic identifiers along with the geographic domain, such as <a class="ulink" href="http://bbc.co.uk">bbc.co.uk</a> for the British Broadcasting Corporation; the <span class="emphasis"><em>co</em></span> stands for <span class="emphasis"><em>commercial</em></span> and the <span class="emphasis"><em>uk</em></span> for the <span class="emphasis"><em>United Kingdom</em></span>.<a class="indexterm" id="IDX-CHP-4-0365"/></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Just because a domain name address has a country code, the owner of that address is not necessarily located in that country. For example, many American FM radio stations have obtained addresses in the <span class="emphasis"><em>.fm</em></span> domain, which belongs to the Federated States of Micronesia, and some television stations use the <span class="emphasis"><em>.tv</em></span> domain assigned to the Pacific island nation of Tuvalu.</p></div><p><a class="xref" href="ch04.html#generic_top-level_domains" title="Table 4-1. Generic Top-Level Domains">Table 4-1</a> lists the most common generic top-level domains.<a class="indexterm" id="IDX-CHP-4-0366"/></p><div class="table"><a id="generic_top-level_domains"/><p class="title"><b>Table 4-1. Generic Top-Level Domains</b></p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Generic Top-Level Domains"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left" valign="bottom"><p>Top-Level Domain</p></th><th style="text-align: left" valign="bottom"><p>Used By</p></th></tr></thead><tbody><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.com</em></span><a class="indexterm" id="IDX-CHP-4-0367"/></p></td><td style="text-align: left" valign="top"><p>Originally commercial, but now a generic domain</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.net</em></span><a class="indexterm" id="IDX-CHP-4-0368"/></p></td><td style="text-align: left" valign="top"><p>Originally reserved for domains related to networks, but now a generic domain</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.edu</em></span><a class="indexterm" id="IDX-CHP-4-0369"/></p></td><td style="text-align: left" valign="top"><p>Reserved for US colleges and universities</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.org</em></span><a class="indexterm" id="IDX-CHP-4-0370"/></p></td><td style="text-align: left" valign="top"><p>Originally reserved for nonprofit organizations, but now a generic domain</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.gov</em></span><a class="indexterm" id="IDX-CHP-4-0371"/></p></td><td style="text-align: left" valign="top"><p>Originally reserved for the US government, but now also used by state and local governments</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.mil</em></span></p></td><td style="text-align: left" valign="top"><p>Reserved for branches of the US military</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.info</em></span><a class="indexterm" id="IDX-CHP-4-0372"/></p></td><td style="text-align: left" valign="top"><p>A generic domain with no restrictions</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.biz</em></span><a class="indexterm" id="IDX-CHP-4-0373"/></p></td><td style="text-align: left" valign="top"><p>A generic domain restricted to businesses</p></td></tr><tr><td style="text-align: left" valign="top"><p><span class="emphasis"><em>.name</em></span><a class="indexterm" id="IDX-CHP-4-0374"/></p></td><td style="text-align: left" valign="top"><p>A generic domain reserved for individuals</p></td></tr></tbody></table></div></div><br class="table-break"/><p>Some other top-level domains such as <span class="emphasis"><em>.asia</em></span>, <span class="emphasis"><em>.coop</em></span>, <span class="emphasis"><em>.museum</em></span>, and <span class="emphasis"><em>.travel</em></span> are restricted to certain categories of users. Still others, such as<a class="indexterm" id="IDX-CHP-4-0375"/><a class="indexterm" id="IDX-CHP-4-0376"/></p><table border="0" class="simplelist" summary="Simple list"><tr><td><span class="inlinemediaobject"><a id="I_inlinemediaobject4_d1e3162"/><img alt="Generic Top-Level Domains" src="tagoreillycom20090324nostarchimages266234.png"/></span></td></tr><tr><td><span class="inlinemediaobject"><a id="I_inlinemediaobject4_d1e3168"/><img alt="Generic Top-Level Domains" src="tagoreillycom20090324nostarchimages266236.png.jpg"/></span></td></tr><tr><td><span class="inlinemediaobject"><a id="I_inlinemediaobject4_d1e3174"/><img alt="Generic Top-Level Domains" src="tagoreillycom20090324nostarchimages266238.png.jpg"/></span></td></tr><tr><td><span class="inlinemediaobject"><a id="I_inlinemediaobject4_d1e3180"/><img alt="Generic Top-Level Domains" src="tagoreillycom20090324nostarchimages266240.png"/></span></td></tr></table><p>are for addresses that don't use the Roman alphabet.</p></div><div class="sect3" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="name_servers"/>Name Servers</h3></div></div></div><p>DNS name servers are an essential part of the Internet's internal plumbing, but most people don't know that they exist. If your computer can't find a DNS server, your email program, web browser, and other Internet programs won't work unless you use a numeric IP address to identify a destination.<a class="indexterm" id="IDX-CHP-4-0377"/><a class="indexterm" id="IDX-CHP-4-0378"/><a class="indexterm" id="IDX-CHP-4-0379"/><a class="indexterm" id="IDX-CHP-4-0380"/><a class="indexterm" id="IDX-CHP-4-0381"/><a class="indexterm" id="IDX-CHP-4-0382"/></p><p>DNS servers perform what seems like a simple task, but this task is more complicated than it first appears because millions of domain names are out there, and new ones are added all the time. Every DNS server in the world has to keep up with all the adds, moves, changes, and deletions. It accomplishes this through a system of <span class="emphasis"><em>root servers</em></span> that are continuously updated. If a local DNS server doesn't recognize a name, it consults the root server that keeps up with that name's top-level domain.<a class="indexterm" id="IDX-CHP-4-0383"/><a class="indexterm" id="IDX-CHP-4-0384"/></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>There's actually a hierarchy of DNS servers, so a root server might end up consulting yet another server (and so on up the line) if it can't handle a name request itself.</p></div><p>When you set up your computer for access to the Internet, you must specify the DNS servers that the computer will use to convert domain names to numeric IP addresses. In most cases, your Internet service provider or network manager will give you the numeric address of one or more nearby DNS servers. If your primary DNS server is not accessible, your computer will look for an alternate server if you have provided an alternate address.</p><p>It's generally best to use the DNS server address supplied by your ISP because the server with this address is probably closer to your own computer than any other server, and the system works best when total demand for DNS service is spread among as many servers as possible. But if you can't obtain reliable DNS service from your local service provider, a public DNS is often a useful alternative. You can find addresses for several public DNS servers though a Google or other web search for <span class="emphasis"><em>Public DNS server</em></span>.<a class="indexterm" id="IDX-CHP-4-0385"/></p><p>Some public DNS services can also provide some added features that your ISP might not offer. For example, OpenDNS (<a class="ulink" href="http://www.opendns.com/">http://www.opendns.com/</a>) can provide another layer of filtering against spyware, identity theft, adult sites, and other possible problems. It will also allow you to set up two three-letter shortcuts to frequently used addresses and will automatically correct common keystroke errors (such as typing <span class="emphasis"><em>example.cmo</em></span> instead of <span class="emphasis"><em>.com</em></span>). There's some controversy about some of these features, because they could lend themselves to returning names that are links to advertisements rather than the sites the original user requested.<a class="indexterm" id="IDX-CHP-4-0386"/></p></div></div></div></div>
<div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="network_tools"/>Network Tools</h1></div></div></div><p>You won't use them often if your LAN and your Internet connection are working properly, but you should know about a handful of troubleshooting tools that allow you to examine the innards of your network and its Internet connection.<a class="indexterm" id="IDX-CHP-4-0387"/><a class="indexterm" id="IDX-CHP-4-0388"/><a class="indexterm" id="IDX-CHP-4-0389"/></p><p>All of these tools are simple text commands that you can use with just about any operating system. When you type a command, the system will display the results in the same window or screen. In Microsoft Windows, you can open a Command Prompt window after selecting Start▸ Programs or by selecting Start▸ Run and then typing <span class="strong"><strong>cmd</strong></span>. In Mac OS X, select Applications▸ Utilities and the Terminal program. If you're using Linux or Unix, use a command prompt or an XTerminal.</p><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ipconfig"/>IPConfig</h2></div></div></div><p>The IPConfig tool displays detailed information about your computer's current LAN and Internet connection, as shown in <a class="xref" href="ch04s02.html#the_ipconfig_tool_displays_the_status_o" title="Example 4-1. The IPConfig tool displays the status of a computer's network configuration.">Example 4-1</a>.<a class="indexterm" id="IDX-CHP-4-0392"/><a class="indexterm" id="IDX-CHP-4-0393"/><a class="indexterm" id="IDX-CHP-4-0394"/><a class="indexterm" id="IDX-CHP-4-0395"/><a class="indexterm" id="IDX-CHP-4-0396"/><a class="indexterm" id="IDX-CHP-4-0397"/><a class="indexterm" id="IDX-CHP-4-0398"/><a class="indexterm" id="IDX-CHP-4-0399"/><a class="indexterm" id="IDX-CHP-4-0400"/><a class="indexterm" id="IDX-CHP-4-0390"/><a class="indexterm" id="IDX-CHP-4-0391"/></p><div class="example"><a id="the_ipconfig_tool_displays_the_status_o"/><p class="title"><b>Example 4-1. The IPConfig tool displays the status of a computer's network configuration.</b></p><div class="example-contents"><pre class="programlisting">C:\&gt;IPConfig
Windows IP Configuration
Ethernet adapter Local Area Connection:
        Connection-specific DNS Suffix  . : domain.actdsltmp
        IP Address. . . . . . . . . . . . : 192.168.1.100
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 192.168.1.1</pre></div></div><br class="example-break"/><p>In this example, <code class="literal">Connection-specific DNS Suffix</code> is an address assigned by a DHCP host. This address is often an arbitrary name used internally within the network, but if your computer is connected directly to the Internet, it might be your computer's DNS address. If you try to connect to a domain name without a suffix (such as "example" rather than "example.net"), the network will assign this suffix to the address when it sends it to a DNS server.<a class="indexterm" id="IDX-CHP-4-0401"/><a class="indexterm" id="IDX-CHP-4-0402"/><a class="indexterm" id="IDX-CHP-4-0403"/></p><p>The <code class="literal">IP Address</code> is the numeric address of this computer within the LAN or WAN. The <code class="literal">Subnet Mask</code> tells the network which parts of the numeric address identify individual computers, and the <code class="literal">Default Gateway</code> is the numeric address within the LAN of the gateway router that connects your LAN to the Internet.</p><p>For more details about your network connection, add <code class="literal">/all</code> to the command, as shown in <a class="xref" href="ch04s02.html#the_ipconfig_solidus_all_command_displa" title="Example 4-2. The IPConfig /all command displays additional information about your connection.">Example 4-2</a>.</p><div class="example"><a id="the_ipconfig_solidus_all_command_displa"/><p class="title"><b>Example 4-2. The <code class="literal">IPConfig /all</code> command displays additional information about your connection.</b></p><div class="example-contents"><pre class="programlisting">C:\&gt;IPConfig /all

Windows IP Configuration

        Host Name . . . . . . . . . . . . : desktop
        Primary Dns Suffix  . . . . . . . :
        Node Type . . . . . . . . . . . . : Unknown
        IP Routing Enabled. . . . . . . . : No
        WINS Proxy Enabled. . . . . . . . : No
        DNS Suffix Search List. . . . . . : domain.actdsltmp

Ethernet adapter Local Area Connection:

        Connection-specific DNS Suffix  . : domain.actdsltmp
        Description . . . . . . . . . . . : Intel(R) PRO/100 VE Network Connection
        Physical Address. . . . . . . . . : 00-0C-F1-AA-BF-BF
        Dhcp Enabled. . . . . . . . . . . : Yes
        Autoconfiguration Enabled . . . . : Yes
        IP Address. . . . . . . . . . . . : 192.168.1.100
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 192.168.1.1
        DHCP Server . . . . . . . . . . . : 192.168.1.1
        DNS Servers . . . . . . . . . . . : 198.137.231.1
                                            206.63.63.1
        Lease Obtained. . . . . . . . . . : Wednesday, April 08, 2009 3:11:22 PM
        Lease Expires . . . . . . . . . . : Friday, April 10, 2009 3:11:22 PM</pre></div></div><br class="example-break"/><p>Obviously, this command produces a lot more information. The <code class="literal">Host Name</code> is the name that this computer uses on the LAN. The <code class="literal">Description</code> identifies the type of network interface adapter that connects this computer to the network. The <code class="literal">Physical Address</code> is the <span class="emphasis"><em>MAC address</em></span>—the unique hardware identifier—of the network adapter. The <code class="literal">DHCP Server</code> is the address of the device that assigns IP addresses to other devices on the LAN (in this case, this device is the same as the <code class="literal">Default Gateway</code>), and the <code class="literal">DNS Servers</code> are the computers that this network consults to convert DNS addresses into numeric IP addresses. The <code class="literal">Lease Obtained</code> and <code class="literal">Lease Expires</code> lines show the date and time that this computer obtained its IP address from the DHCP server and the time the computer will give up that address; the host automatically renews the lease long before it expires, so you don't have to worry about the expiry time.<a class="indexterm" id="IDX-CHP-4-0404"/><a class="indexterm" id="IDX-CHP-4-0405"/></p></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ifconfig"/>ifconfig</h2></div></div></div><p>The <code class="literal">ifconfig</code> command is available in Macinstosh OS X and in Unix and Linux. This command displays information about the current network interface, including the connection type and the connection's current status. The format of the information display, however, varies in different operating systems. Therefore, the best place to find a detailed explanation of the <code class="literal">ifconfig</code> display produced by your own system is the man page for the <code class="literal">ifconfig</code> command.<a class="indexterm" id="IDX-CHP-4-0406"/><a class="indexterm" id="IDX-CHP-4-0407"/><a class="indexterm" id="IDX-CHP-4-0408"/><a class="indexterm" id="IDX-CHP-4-0409"/><a class="indexterm" id="IDX-CHP-4-0410"/><a class="indexterm" id="IDX-CHP-4-0411"/><a class="indexterm" id="IDX-CHP-4-0412"/><a class="indexterm" id="IDX-CHP-4-0413"/><a class="indexterm" id="IDX-CHP-4-0414"/><a class="indexterm" id="IDX-CHP-4-0415"/><a class="indexterm" id="IDX-CHP-4-0416"/><a class="indexterm" id="IDX-CHP-4-0417"/></p></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ping"/>ping</h2></div></div></div><p>The <code class="literal">ping</code> command is an echo request. When you type <code class="literal">ping target address</code>, your computer sends a series of "please answer" messages to the target address, and that computer sends you a reply, as shown in <a class="xref" href="ch04s02.html#the_ping_command_sends_a_series_of_echo" title="Example 4-3. The ping command sends a series of echo requests to a designated address.">Example 4-3</a>. Your computer measures the amount of time for each roundtrip and displays the duration in milliseconds.<a class="indexterm" id="IDX-CHP-4-0418"/><a class="indexterm" id="IDX-CHP-4-0419"/></p><div class="example"><a id="the_ping_command_sends_a_series_of_echo"/><p class="title"><b>Example 4-3. The <code class="literal">ping</code> command sends a series of echo requests to a designated address.</b></p><div class="example-contents"><pre class="programlisting">C:\&gt;ping nostarch.com

Pinging nostarch.com [72.32.92.4] with 32 bytes of data:

Reply from 72.32.92.4: bytes=32 time=140ms TTL=48
Reply from 72.32.92.4: bytes=32 time=99ms TTL=48
Reply from 72.32.92.4: bytes=32 time=99ms TTL=48
Reply from 72.32.92.4: bytes=32 time=97ms TTL=48

Ping statistics for 72.32.92.4:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 97ms, Maximum = 140ms, Average = 108ms</pre></div></div><br class="example-break"/><p>Many books and people will tell you that ping is an acronym for <span class="emphasis"><em>Packet InterNet Groper</em></span>, but Mike Muuss, who wrote the original program, always insisted that he chose the name to imitate the sound of a sonar system aboard a submarine; the sonar system makes an audible "ping" when an echo pulse returns from a target.<a class="indexterm" id="IDX-CHP-4-0420"/><a class="indexterm" id="IDX-CHP-4-0421"/></p><p><code class="literal">ping</code> has several uses. It can confirm that the distant computer is alive, and that your computer's connection is working properly. It can also provide a rough idea of the network's performance (less time means higher speed). <code class="literal">ping</code> is also useful for finding a DNS problem; if you get a successful ping echo when you enter the target's numeric IP address, but not when you enter the domain name, the glitch is almost certainly someplace in the DNS system.</p><p>In <a class="xref" href="ch04s02.html#the_ping_command_sends_a_series_of_echo" title="Example 4-3. The ping command sends a series of echo requests to a designated address.">Example 4-3</a>, it took about one-tenth of a second (100 ms) for each test to go from Seattle to San Francisco and back. That's a perfectly reasonable amount of time. But if one or more of the attempts had taken around 500 milliseconds or more, that would indicate some kind of problem.</p><p><span class="emphasis"><em>Ping</em></span> has also become a verb in computer jargon. You'll hear a technician at a help desk ask you to "ping me" at a specific address, meaning that you should send a ping request to that address. Some people have extended that usage beyond computer networks: They'll talk about "pinging" somebody when they intend to get that person's attention, either by email, telephone, or even poking their head into the recipient's office.</p><p>Many large commercial Internet sites, such as <a class="ulink" href="http://yahoo.com">yahoo.com</a> and <a class="ulink" href="http://microsoft.com">microsoft.com</a>, have chosen to block ping requests from outside their own network. If you get a <code class="literal">no reply</code> response to a ping request, try another address before you assume the problem is with your own Internet connection.<a class="indexterm" id="IDX-CHP-4-0422"/><a class="indexterm" id="IDX-CHP-4-0423"/></p></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="traceroute"/>TraceRoute</h2></div></div></div><p>The TraceRoute tool measures and displays the amount of time it takes for your computer to receive an echo from each network device between your computer and the target. As a result, a TraceRoute display can show you the route between your computer and any other computer on the Internet and pinpoint the segment of that route where a problem is occurring. In Windows, the command is <code class="literal">tracert</code>; in OS X, Linux and Unix, it's <code class="literal">traceroute</code>. TraceRoute sends three requests to each intermediate node, and shows the timing for each request.<a class="indexterm" id="IDX-CHP-4-0426"/><a class="indexterm" id="IDX-CHP-4-0427"/><a class="indexterm" id="IDX-CHP-4-0428"/><a class="indexterm" id="IDX-CHP-4-0429"/><a class="indexterm" id="IDX-CHP-4-0430"/><a class="indexterm" id="IDX-CHP-4-0431"/><a class="indexterm" id="IDX-CHP-4-0432"/><a class="indexterm" id="IDX-CHP-4-0433"/><a class="indexterm" id="IDX-CHP-4-0434"/><a class="indexterm" id="IDX-CHP-4-0435"/><a class="indexterm" id="IDX-CHP-4-0436"/><a class="indexterm" id="IDX-CHP-4-0437"/><a class="indexterm" id="IDX-CHP-4-0438"/><a class="indexterm" id="IDX-CHP-4-0439"/><a class="indexterm" id="IDX-CHP-4-0424"/><a class="indexterm" id="IDX-CHP-4-0425"/><a class="indexterm" id="IDX-CHP-4-0440"/><a class="indexterm" id="IDX-CHP-4-0441"/><a class="indexterm" id="IDX-CHP-4-0442"/></p><p><a class="xref" href="ch04s02.html#traceroute_shows_the_path_to_a_distant" title="Example 4-4. TraceRoute shows the path to a distant computer through the Internet.">Example 4-4</a> shows a TraceRoute from my office in Seattle to No Starch Press in San Francisco.</p><div class="example"><a id="traceroute_shows_the_path_to_a_distant"/><p class="title"><b>Example 4-4. TraceRoute shows the path to a distant computer through the Internet.</b></p><div class="example-contents"><pre class="programlisting">C:\&gt;tracert nostarch.com

Tracing route to nostarch.com [72.32.92.4]
over a maximum of 30 hops:

❶   1     4 ms     3 ms     3 ms  192.168.0.1
❶   2     3 ms     3 ms     3 ms  192.168.0.1
❷   3    71 ms    63 ms    64 ms  --..blv.nwnexus.net [206.63..]
❸   4    57 ms    53 ms    48 ms  fe000.cr1.sea.nwnexus.net [206.63.74.1]
    5     *       44 ms    42 ms  fe000.br4.sea.nwnexus.net [206.63.74.20]
    6    45 ms    43 ms    41 ms  204.181.35.197
    7    42 ms    42 ms    43 ms  sl-bb20-sea-4-0-0.sprintlink.net [144.232.6.121]
❹   8    86 ms    85 ms    87 ms  sl-bb25-chi-5-0.sprintlink.net [144.232.20.84]
    9    96 ms    97 ms    97 ms  sl-bb20-kc-2-0.sprintlink.net [144.232.20.108]
   10   108 ms   109 ms   107 ms  sl-crs1-fw-0-4-0-1.sprintlink.net [144.232.20.56]
❺  11   110 ms   110 ms   108 ms  sl-st20-dal-1-0.sprintlink.net [144.232.9.136]
   12    99 ms    98 ms    97 ms  sl-racks-5-0.sprintlink.net [144.223.244.138]
   13   101 ms    98 ms    97 ms  vlan903.core3.dfw1.rackspace.com [72.3.128.53]
   14   101 ms   100 ms    98 ms  aggr115a.dfw1.rackspace.net [72.3.129.109]
   15    97 ms   100 ms    99 ms  squid14.laughingsquid.net [72.32.92.4]

  Trace complete.</pre></div></div><br class="example-break"/><p>In this case, it took 15 hops to complete the connection:</p><p>❶ The first two lines show the very fast response from the router sitting on the same table as the computer through a 6-foot cable. Line 2 repeats line 1 because of a software problem in the router.</p><p>❷ Line 3, whose domain name and IP address I have hidden, is my Internet service provider's WAN, a couple of miles away in downtown Seattle. Completing that echo takes longer, but it's still pretty fast.</p><p>❸ Lines 4 to 7 show the packets moving through various routers in the same switching center in Seattle.</p><p>❹ Starting at line 8, the route apparently jumps through routers in Chicago, Kansas City, Fort Worth, and Dallas, which increases the response times.</p><p>❺ The path moves around a routing center in Dallas at lines 11 through 15 until it ends up at the Laughing Squid web host that houses the No Starch web server.</p><p>This connection goes from origin to destination with several thousand miles of detours. However, the whole thing takes only about a tenth of a second, so those detours don't really matter.</p><p>TraceRoute can help identify several possible problems:<a class="indexterm" id="IDX-CHP-4-0443"/></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>If a TraceRoute report ends with one or more lines of asterisks (<code class="literal">***</code>), that usually isolates the problem to either the router named in the preceding line or the connection from that router to the next one.</p></li><li class="listitem"><p>If the report shows a very long path that includes router addresses that don't seem to be a on a reasonable route (such as a path from New York to Philadelphia by way of Singapore), one of the network routers is not configured correctly.<a class="indexterm" id="IDX-CHP-4-0444"/></p></li><li class="listitem"><p>If the route shows that a pair of routers are passing the signal back and forth until TraceRoute times out, that usually indicates that one of those routers has lost a connection and is returning the signal back to the previous router. <span class="emphasis"><em>That</em></span> router still thinks the best path is through the other one, so it tries again.</p></li><li class="listitem"><p>If the report shows a long delay that always begins at the same router, it could indicate a problem with that router or very high demand for service through that part of the Internet.</p></li></ul></div><p>Unless you're a network manager, you probably won't have to analyze TraceRoute reports very often. But if you're having a connection problem, they can sometimes help you to understand why you're not getting through to a website or instant message recipient.</p></div></div></body></html>