["```\n# This is a simple threading example that, however,\n# doesn't work as anticipated!\n\nwords = [\"hello\", \"world\", \"goodbye\", \"mars\" ]\nnumbers = [1,2,3,4,5,6,7,8,9,10]\n\nThread.new{\n    words.each{ |word| puts( word ) }\n}\n\nThread.new{\n    numbers.each{ |number| puts( number ) }\n}\n```", "```\nsleep( 5 )\n```", "```\nhello1\n\n2world\n3\n\n4goodbye\n\n5mars\n6\n7\n8\n9\n```", "```\np( Thread.main )\n```", "```\n#<Thread:0x28955c8 run>\n```", "```\nputs( Thread.main.inspect )               #=> #<Thread:0x28955c8 run>\nputs( Thread.new{ sleep }.kill.inspect )  #=> #<Thread:0x28cddc0 dead>\nputs( Thread.new{ sleep }.inspect )       #=> #<Thread:0x28cdd48 sleep>\nthread1 = Thread.new{ }\nputs( thread1.status )                    #=> false\nthread2 = Thread.new{ raise( \"Exception raised!\" ) }\nputs( thread2 )                           #=> nil\n```", "```\np   d.kill                  #=> #<Thread:0x401b3678 aborting>\np   a.status                #=> nil\np   b.status                #=> \"sleep\"\np   c.status                #=> false\np   d.status                #=> \"aborting\"\np   Thread.current.status   #=> \"run\"\n```", "```\n#<Thread:0x401b3678 aborting>\n\"run\"\n\"sleep\"\nfalse\nfalse\n\"run\"\n```", "```\n#<Thread:0x401b3678 aborting>\n\"run\"\n\"run\"\n\"run\"\nfalse\n\"run\"\n```", "```\nt =  Thread.new{  }\np t\np t.kill\n# sleep( 1 )      # try uncommenting this\nputs( t.inspect )\n```", "```\n#<Thread:0x2be6420 run>\n#<Thread:0x2be6420 aborting>\n#<Thread:0x2be6420 aborting>\n```", "```\nsleep( 1 )\nputs( t.inspect )\n```", "```\n#<Thread:0x2be6420 dead>\n```", "```\nwords = [\"hello\", \"world\", \"goodbye\", \"mars\" ]\nnumbers = [1,2,3,4,5,6,7,8,9,10]\n\nThread.new{\n    words.each{ |word| puts( word ) }\n}.join\n\nThread.new{\n    numbers.each{ |number| puts( number ) }\n}.join\n```", "```\nwordsThread = Thread.new{\n    words.each{ |word| puts( word ) }\n}\nnumbersThread = Thread.new{\n    numbers.each{ |number| puts( number ) }\n}\n```", "```\n[wordsThread, numbersThread].each{ |t| t.join }\n```", "```\ndef fac(n)\n    n == 1 ? 1 : n * fac(n-1)\nend\n\nt1 = Thread.new{\n    0.upto(50) {fac(50); print( \"t1\\n\" )}\n}\n\nt2 = Thread.new{\n    0.upto(50) {fac(50); print( \"t2\\n\" )}\n}\n\nt3 = Thread.new{\n    0.upto(50) {fac(50); print( \"t3\\n\" )}\n}\n```", "```\nt1.priority = 0\nt2.priority = 0\nt3.priority = 0\n```", "```\ncount1 = count2 = 0\na = Thread.new do\n        loop { count1 += 1 }\n    end\na.priority = −1\n\nb = Thread.new do\n        loop { count2 += 1 }\n    end\n\nb.priority = −2\np sleep 1   #=> 1\np count1    #=> 622504\n\np count2    #=> 5832\n```", "```\nt3.priority = 1\n```", "```\nt1.priority = 2\nt2.priority = 2\nt3.priority = 1\n```", "```\nt1.priority = −1\nt2.priority = −1\nt3.priority = −2\n```", "```\nputs( Thread.main.priority )        #=> 0\n```", "```\nThread.main.priority=100\n```", "```\nThread.main.priority = 200\nt1.priority = 0\nt2.priority = 1\nt3.priority = 1\n```", "```\nt1 = Thread.new{\n   Thread.stop\n   0.upto(50){print( \"t1\\n\" )}\n}\n```", "```\nt1.run\n```", "```\n$i = 0\n\ndef addNum(aNum)\n    aNum + 1\nend\n\nsomethreads = (1..3).collect {\n    Thread.new {\n        1000000.times{ $i = addNum($i)  }\n    }\n}\n\nsomethreads.each{|t| t.join }\nputs( $i )\n```", "```\nrequire 'thread'\n\n$i = 0\nsemaphore = Mutex.new\n\ndef addNum(aNum)\n    aNum + 1\nend\n\nsomethreads = (1..3).collect {\n    Thread.new {\n        semaphore.synchronize{\n            1000000.times{ $i = addNum($i)  }\n        }\n    }\n}\n\nsomethreads.each{|t| t.join }\nputs( $i )\n```", "```\nrequire 'find'\nrequire 'thread'\n\n$totalsize = 0\n$dirsize = 0\n\nsemaphore = Mutex.new\n\ndef processFiles( baseDir )\n    Find.find( baseDir ) { |path|\n        $dirsize += $dirsize    # if a directory\n     if (FileTest.directory?(path)) && (path != baseDir ) then\n            print( \"\\n#{path} [#{$dirsize / 1024}K]\" )\n            $dirsize = 0\n        else                    # if a file\n            $filesize = File.size(path)\n            print( \"\\n#{path} [#{$filesize} bytes]\" )\n            $dirsize += $filesize\n            $totalsize += $filesize\n        end\n    }\nend\n\nt1 = Thread.new{\n    semaphore.synchronize{\n        processFiles( '..' ) # you may edit this directory name\n    }\n}\n\nt2 = Thread.new{\n    semaphore.synchronize{\n        while t1.alive? do\n            print( \"\\n\\t\\tProcessing...\" )\n            Thread.pass\n        end\n    }\n}\n\nt2.join\n\nprintf( \"\\nTotal: #{$totalsize} bytes, #{$totalsize/1024}K, %0.02\nfMB\\n\\n\",  \"#{$totalsize/1048576.0}\" )\nputs( \"Total file size: #{$filesize}, Total directory size: #{$dirsize}\" )\n```", "```\nf = Fiber.new do\n    puts( \"In fiber\" )\n    Fiber.yield( \"yielding\" )\n    puts( \"Still in fiber\" )\n    Fiber.yield( \"yielding again\" )\n    puts( \"But still in fiber\" )\nend\n\nputs( \"a\" )\nputs( f.resume )\nputs( \"b\" )\nputs( f.resume )\nputs( \"c\" )\nputs( f.resume )\nputs( \"d\" )\nputs( f.resume )   # dead fiber called\n```", "```\na\nIn fiber\nyielding\nb\nStill in fiber\nc\nBut still in fiber\nd\nC:/bookofruby/ch17/fiber_test.rb:18:in `resume': dead fiber called (FiberError)\nfrom C:/bookofruby/ch17/fiber_test.rb:18:in `<main>'\n```", "```\nrequire 'fiber'\n\nif (f.alive?) then\n    puts( f.resume )\nelse\n    puts(\"Error: Call to dead fiber\" )\nend\n```", "```\nfiber = Fiber.new do |first|\n    second = Fiber.yield first + 2\nend\n\nputs fiber.resume 10    #=> 12\nputs fiber.resume 14    #=> 14\nputs fiber.resume 18    #=> dead fiber called (FiberError)\n```", "```\nf = Fiber.new {\n    | s |\n    puts( \"In Fiber #1 (a) : \" +  s )\n    puts( \"In Fiber #1 (b) : \" +  s )\n    Fiber.yield\n    puts( \"In Fiber #1 (c) : \" +  s )\n}\n\nf2 = Fiber.new {\n    | s |\n    puts( \"In Fiber #2 (a) : \" +  s )\n    puts( \"In Fiber #2 (b) : \" +  s )\n    Fiber.yield\n    puts( \"In Fiber #2 (c) : \" +  s )\n}\n\nf.resume( \"hello\"  )\nf2.resume( \"hi\" )\nputs( \"world\" )\nf2.resume\nf.resume\n```", "```\nIn Fiber #1 (a) : hello\nIn Fiber #1 (b) : hello\nIn Fiber #2 (a) : hi\nIn Fiber #2 (b) : hi\nworld\nIn Fiber #2 (c) : hi\nIn Fiber #1 (c) : hello\n```", "```\na = Thread.new {    print \"a\"; Thread.pass;\n                    print \"b\"; Thread.pass;\n                    print \"c\" }\nb = Thread.new {    print \"x\"; Thread.pass;\n                    print \"y\"; Thread.pass;\n                    print \"z\" }\na.join\nb.join\n```", "```\na = Thread.new {    print \"a\";\n                    print \"b\";\n                    print \"c\" }\nb = Thread.new {    print \"x\";\n                    print \"y\";\n                    print \"z\" }\na.join\nb.join\n```", "```\ns = 'start '\na = Thread.new { (1..10).each{\n    s << 'a'\n    Thread.pass\n    }\n}\nb = Thread.new { (1..10).each{\n    s << 'b'\n    Thread.pass\n    }\n}\n\na.join\nb.join\nputs( \"#{s} end\" )\n```", "```\ns = 'start '\na = Thread.new { (1..10).each{\n    s << 'a'\n    }\n}\nb = Thread.new { (1..10).each{\n    s << 'b'\n    }\n}\n\na.join\nb.join\nputs( \"#{s} end\" )\n```", "```\ns = \"\"\na = Thread.new { s << \"a\"; Thread.pass;\n    s << \"b\"; Thread.pass;\n    s << \"c\" }\n\nb = Thread.new { s << \"x\"; Thread.pass;\n    s << \"y\"; Thread.pass;\n    s << \"z\" }\n\na.join\nb.join\nputs( s )\n```", "```\naxbycz\n```", "```\nabcxyz\n```", "```\nabcxyz\n```", "```\narr = []\nt1 = Thread.new{\n    Thread.stop\n    (1..10).each{\n        arr << Thread.current.to_s\n        Thread.pass\n    }\n}\nt2 = Thread.new{\n    Thread.stop\n    (1..10).each{ |i|\n        arr << Thread.current.to_s\n        Thread.pass\n    }\n}\nputs( \"Starting threads...\" )\nt1.run\nt2.run\nt1.join\nt2.join\nputs( arr )\n```"]