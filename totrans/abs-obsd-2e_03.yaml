- en: Chapter 3. Installation Walk-Through
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 3 章。安装指南
- en: '*Straightforward questions.*'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*简单直接的问题。*'
- en: '*Will you take the default prompts?*'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*您会接受默认提示吗？*'
- en: '*Think before you choose.*'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '*在选择之前先思考。*'
- en: '![](httpatomoreillycomsourcenostarchimages1616079.png) Armed with your OpenBSD
    software and a computer with supported hardware, you are now ready to start an
    actual installation. This chapter takes you through a full installation on amd64
    and i386 systems via CD and FTP, booting from a CD or floppy disk.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](httpatomoreillycomsourcenostarchimages1616079.png) 凭借您的 OpenBSD 软件和具有支持硬件的电脑，您现在可以开始实际安装了。本章将指导您通过
    CD 和 FTP 在 amd64 和 i386 系统上完成完整安装，从 CD 或软盘启动。'
- en: In this chapter, I assume that you’re dedicating your computer to OpenBSD. You
    can install multiple operating systems on a single computer, of course, but that’s
    a less common use case. If you want to install multiple operating systems on your
    computer, follow the instructions in the OpenBSD FAQ. (When installing multiple
    operating systems on a single computer, it’s easy to accidentally damage one of
    those operating systems, so proceed with caution.)
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我假设您要将您的电脑用于 OpenBSD。当然，您可以在一台电脑上安装多个操作系统，但这是一种不太常见的用例。如果您想在电脑上安装多个操作系统，请遵循
    OpenBSD FAQ 中的说明。（在单台电脑上安装多个操作系统时，很容易不小心损坏其中一个操作系统，因此请谨慎操作。）
- en: Before you begin OpenBSD installation, make sure the data on your machine is
    backed up! When you dedicate your machine to OpenBSD, you’ll overwrite the entire
    hard drive.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始安装 OpenBSD 之前，请确保您的机器上的数据已备份！当您将机器用于 OpenBSD 时，您将覆盖整个硬盘。
- en: Hardware Setup
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 硬件设置
- en: Before you begin, verify that OpenBSD supports your hardware. You’ll find the
    supported hardware list for the most recent version of OpenBSD on the platform-specific
    pages of the OpenBSD website (*[http://www.OpenBSD.org/i386.html](http://www.OpenBSD.org/i386.html)*
    for i386 and *[http://www.OpenBSD.org/amd64.html](http://www.OpenBSD.org/amd64.html)*
    for amd64), listing hardware that has been verified to work by the OpenBSD team.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，请确认 OpenBSD 支持您的硬件。您可以在 OpenBSD 网站的平台特定页面上找到 OpenBSD 最新版本的硬件支持列表（[http://www.OpenBSD.org/i386.html](http://www.OpenBSD.org/i386.html)
    用于 i386 和 [http://www.OpenBSD.org/amd64.html](http://www.OpenBSD.org/amd64.html)
    用于 amd64），列出由 OpenBSD 团队验证可以正常工作的硬件。
- en: If you find that your hardware isn’t listed, it might still run OpenBSD. In
    fact, a lot of unsupported hardware will run OpenBSD perfectly, but not all hardware
    has been tested, simply because the OpenBSD team doesn’t have access to all hardware
    ever manufactured. If you’re worried about a particular device, search the mailing
    list archives to see if it’s supported.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您发现您的硬件没有列出，它仍然可能运行 OpenBSD。事实上，许多不受支持的硬件可以完美运行 OpenBSD，但并非所有硬件都经过测试，这仅仅是因为
    OpenBSD 团队无法访问所有曾经制造的硬件。如果您对某个特定设备感到担忧，请搜索邮件列表存档以查看它是否受支持。
- en: The hardware compatibility lists frequently identify devices by chipset, not
    by vendor or model. The chipset is the actual hardware name, not the model name,
    which can cause a bit of confusion because, after all, when you buy a computer,
    the network card is frequently listed as a “gigabit Ethernet,” not as an “Intel
    PRO/1000MT Dual Port Server Adapter model PWLA8492MT.” To make matters worse,
    many vendors use identical hardware under a separate brand or model name or use
    different hardware under the same brand or model name. For example, Linksys sold
    many different network card models under the model name EtherLink. (Fortunately,
    this issue mostly applies to the lower end of the market, and OpenBSD almost always
    supports these older chipsets.)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 硬件兼容性列表通常通过芯片组来识别设备，而不是通过供应商或型号。芯片组是实际的硬件名称，而不是型号名称，这可能会造成一些混淆，因为毕竟，当你购买一台电脑时，网卡通常被列为“千兆以太网”，而不是“英特尔
    PRO/1000MT 双端口服务器适配器型号 PWLA8492MT”。更糟糕的是，许多供应商在单独的品牌或型号名称下使用相同的硬件，或者在相同的品牌或型号名称下使用不同的硬件。例如，Linksys
    在 EtherLink 型号名称下销售了许多不同的网卡型号。（幸运的是，这个问题主要适用于低端市场，而 OpenBSD 几乎总是支持这些较旧的芯片组。）
- en: Even if you’re not sure that you hardware is supported, you can still try installing
    OpenBSD to see what happens. The boot messages will offer a lot of information
    about the hardware you have.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 即使您不确定您的硬件是否受支持，您仍然可以尝试安装 OpenBSD 来查看会发生什么。引导信息将提供有关您硬件的大量信息。
- en: BIOS Configuration
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: BIOS 配置
- en: Be sure to evaluate your system’s Basic Input/Output System (BIOS) before installing
    OpenBSD. Because every BIOS differs, I can’t offer exact instructions on configuring
    yours. Your best bet is to consult your motherboard’s manual or the Internet.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装 OpenBSD 之前，务必评估你的系统基本输入/输出系统（BIOS）。由于每个 BIOS 都不同，我无法提供配置你的 BIOS 的确切说明。你最好的选择是查阅你的主板手册或互联网。
- en: Also, if your BIOS needs updating, take care of that before installing OpenBSD.
    Finally, check the boot device order, and be sure that it makes sense for how
    you plan to install your system.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果你的 BIOS 需要更新，请在安装 OpenBSD 之前处理这个问题。最后，检查启动设备顺序，并确保它符合你计划安装系统的计划。
- en: With your hardware set up, get the boot media.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置好硬件后，获取启动媒体。
- en: Making Boot Media
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 制作启动媒体
- en: We’ll cover booting the OpenBSD installer from a CD or floppy disk. Generally,
    booting via CD is preferable because all amd64 systems can boot from CD, as can
    most functioning i386 systems. We’ll start by making floppies for installation
    on old i386 hardware and then move on to CDs. While installing from USB and into
    virtual systems is possible, neither is supported. We’ll cover both of those installation
    types later in the book, in [Chapter 23](ch23.html "Chapter 23. Customizing OpenBSD").
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将介绍如何从 CD 或软盘启动 OpenBSD 安装程序。通常，通过 CD 启动更可取，因为所有 amd64 系统都可以从 CD 启动，大多数功能正常的
    i386 系统也是如此。我们将首先制作用于旧 i386 硬件安装的软盘，然后转向 CD。虽然从 USB 和虚拟系统安装是可能的，但都不受支持。我们将在本书的
    [第 23 章](ch23.html "第 23 章。自定义 OpenBSD") 中稍后介绍这两种安装类型。
- en: Making Boot Floppies
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 制作启动软盘
- en: 'You need to make boot floppies only if your hardware does not boot from CD,
    or if you have a floppy but not a CD drive. The OpenBSD boot floppies contain
    a very limited subset of OpenBSD—just enough to recognize your hardware, format
    your disk, and download and extract the file sets. In addition to the floppies
    themselves, you’ll also need a working Internet connection via Ethernet.^([[8](#ftn.id346326)])
    Because the full kernel is larger than a single floppy can hold, OpenBSD provides
    three floppy images for i386 hardware, each targeting a specific type of hardware.
    Each image name includes the release number. For example, the floppy images for
    release 5.3 are named *floppy53.fs*, *floppyB53.fs*, and *floppyC53.fs*. Download
    the image that most closely describes your system, as follows:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 只有当你的硬件不能从 CD 启动，或者你有软盘但没有 CD 驱动器时，你才需要制作启动软盘。OpenBSD 启动软盘包含 OpenBSD 的一个非常有限的子集——仅足够识别你的硬件、格式化你的磁盘以及下载和提取文件集。除了软盘本身，你还需要通过以太网建立有效的互联网连接。[8](#ftn.id346326)
    因为完整的内核大小超过了一张软盘的容量，OpenBSD 为 i386 硬件提供了三个软盘镜像，每个镜像针对特定类型的硬件。每个镜像名称都包含版本号。例如，版本
    5.3 的软盘镜像命名为 *floppy53.fs*、*floppyB53.fs* 和 *floppyC53.fs*。下载与你的系统最接近的镜像，如下所示：
- en: '**floppyXX.fs**. This is the image for the most common i386 hardware. It will
    boot the average workstation or low-end server.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**floppyXX.fs**. 这是最常见的 i386 硬件的镜像。它可以启动普通工作站或低端服务器。'
- en: '**floppyBXX.fs**. This image includes drivers for gigabit Ethernet cards, SCSI,
    and RAID. It’s meant for higher-end i386 servers.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**floppyBXX.fs**. 这个镜像包含千兆以太网卡、SCSI 和 RAID 的驱动程序。它适用于高端 i386 服务器。'
- en: '**floppyCXX.fs**. This image supports PCMCIA and CardBus. It’s meant for laptops.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**floppyCXX.fs**. 这个镜像支持 PCMCIA 和 CardBus。它适用于笔记本电脑。'
- en: 'OpenBSD provides only one floppy image for amd64 hardware: *floppyXX.fs*. (The
    amd64 platform doesn’t carry around 20 years of legacy drivers as baggage, so
    everything fits on a single disk.) Be sure to use the floppy image found in the
    amd64 directory. The amd64 image uses the same name as the standard i386 floppy.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: OpenBSD 为 amd64 硬件只提供了一个软盘镜像：*floppyXX.fs*。（amd64 平台没有携带 20 年的遗留驱动程序作为负担，所以所有内容都适合在一个磁盘上。）请确保使用
    amd64 目录中找到的软盘镜像。amd64 镜像使用与标准 i386 软盘相同的名称。
- en: Once you have the appropriate image file, you must copy it onto a floppy disk.
    You cannot use basic filesystem-level copying, such as Windows drag-and-drop,
    because the image files include not only files but also a filesystem. You must
    use appropriate tools to copy the images to a floppy.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你有了合适的镜像文件，你必须将其复制到软盘上。你不能使用基本的文件系统级别的复制，例如 Windows 的拖放，因为镜像文件不仅包含文件，还包含一个文件系统。你必须使用适当的工具将镜像复制到软盘。
- en: Creating Floppies on Unix-like Systems
  id: totrans-25
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 在 Unix-like 系统上创建软盘
- en: 'If you’re already running a Unix-like system, create your floppy with `dd(1)`.
    You’ll need to know your floppy drive’s device name, which is probably */dev/fd0*,
    */dev/floppy*, */dev/rfd0*, or */dev/rsd0* (for USB floppy drives). Once you know
    the device name, tell `dd` to copy the image to that disk device with a command
    like this:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经在运行类Unix系统，使用`dd(1)`创建你的软盘。你需要知道你的软盘驱动器的设备名称，可能是*/dev/fd0*、*/dev/floppy*、*/dev/rfd0*或*/dev/rsd0*（用于USB软盘驱动器）。一旦你知道设备名称，告诉`dd`使用如下命令将镜像复制到该磁盘设备：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'For example, to create a disk from image *floppyB52.fs* with the floppy device
    name */dev/fd0c*, enter the following:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，要使用软盘设备名称*/dev/fd0c*从镜像*floppyB52.fs*创建磁盘，请输入以下内容：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: If `dd` gives you an error immediately or exits silently without writing to
    the floppy disk, try specifying a different floppy disk device.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果`dd`立即报错或静默退出而没有写入软盘，请尝试指定不同的软盘设备。
- en: Creating Floppies on Microsoft Systems
  id: totrans-31
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 在 Microsoft 系统上创建软盘
- en: 'If you need to create a floppy on a descendant of Windows NT (including all
    modern Windows desktop operating systems), you’ll need an image-writing program.
    In the *tools* directory of your OpenBSD release, you’ll find a program named
    *ntrw.exe*. This program copies disk images to a disk. Download the program, open
    a command prompt, navigate to the folder containing *ntrw.exe*, put your blank
    floppy in the drive, and run this command:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要在Windows NT的衍生系统（包括所有现代Windows桌面操作系统）上创建软盘，你需要一个镜像写入程序。在你的OpenBSD发布版本的*tools*目录中，你会找到一个名为*ntrw.exe*的程序。这个程序将磁盘镜像复制到磁盘上。下载程序，打开命令提示符，导航到包含*ntrw.exe*的文件夹，将空白软盘放入驱动器，并运行以下命令：
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: If you get a permissions error, you might need to run your command prompt as
    Administrator. If the command still fails, chances are good that you’re using
    the bad floppy disk you tucked away in a drawer 15 years ago. Try another one.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你遇到权限错误，你可能需要以管理员身份运行你的命令提示符。如果命令仍然失败，很可能是你使用了15年前藏在抽屉里的坏软盘。尝试另一个。
- en: Making Boot CDs
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 制作启动光盘
- en: 'OpenBSD provides three ISO images for i386 and two for amd64, as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: OpenBSD为i386提供三个ISO镜像，为amd64提供两个，如下所示：
- en: '**cdXX.iso**. This image contains the kernel and installer, but no file sets.
    It’s used to boot a system into the minimal state where the installer can run.
    Once the system has booted, it fetches the file sets over the network.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**cdXX.iso**。这个镜像包含内核和安装程序，但没有文件集。它用于启动系统到安装程序可以运行的最小状态。一旦系统启动，它将通过网络获取文件集。'
- en: '**installXX.iso**. This image contains everything in the *cdXX.iso* image,
    as well as the file sets. Use it to install this version of OpenBSD on multiple
    systems.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**installXX.iso**。这个镜像包含*cdXX.iso*镜像中的所有内容，以及文件集。使用它来在多个系统上安装这个版本的OpenBSD。'
- en: '**cdemuXX.iso**. Some older i386 systems have a BIOS that makes CD drives emulate
    floppy drives. If you have a system like this, use *cdemuXX.iso*. If you’re unsure
    whether you need this image, you don’t. If you’ve ever owned one of these CD drives,
    you’ve probably replaced it by now. If you haven’t, maybe you should.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**cdemuXX.iso**。一些较旧的i386系统有一个BIOS，它使光盘驱动器模拟软盘驱动器。如果你有这种系统，请使用*cdemuXX.iso*。如果你不确定是否需要此镜像，你不需要。如果你曾经拥有过这种光盘驱动器，你现在可能已经更换了它。如果你还没有，也许你应该考虑更换。'
- en: Note
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Remember that you can save yourself the trouble of selecting an ISO by buying
    an official CD set, which will Just Work and will also contain precompiled packages.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，你可以通过购买官方CD集来节省选择ISO的麻烦，这样可以直接使用，并且还会包含预编译的软件包。
- en: The process of getting the ISO onto a physical disk varies widely from operating
    system to operating system. On a Microsoft Windows system, right-click the ISO
    and select **Burn to Disc**. Unix-like systems use several different programs,
    such as `burncd` and `cdrecord`. Different Linux versions have innumerable ISO-burning
    front ends integrated into their desktop environments. Check online for instructions
    on burning a CD on your particular operating system.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 将ISO镜像放到物理磁盘上的过程因操作系统而异。在Microsoft Windows系统上，右键单击ISO并选择**刻录到光盘**。类Unix系统使用几个不同的程序，如`burncd`和`cdrecord`。不同的Linux版本在它们的桌面环境中集成了无数的ISO刻录前端。在网上查找有关在你的特定操作系统上刻录光盘的说明。
- en: Installing OpenBSD
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 OpenBSD
- en: 'Once you boot from your chosen media, you should see something like this:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦从你选择的媒体启动，你应该会看到如下内容：
- en: '[PRE3]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: If you need to interrupt the boot process for any reason, you can do so at this
    point. We’ll discuss how to interrupt the boot process in [Chapter 5](ch05.html
    "Chapter 5. The Boot Process"), and reasons for doing so throughout the book.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要出于任何原因中断引导过程，您可以在这一点上做到。我们将在[第5章](ch05.html "第5章。引导过程")中讨论如何中断引导过程，并在整本书中讨论这样做的原因。
- en: If you wait five seconds, OpenBSD should boot. The kernel will then introduce
    itself and begin identifying your hardware.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您等待五秒钟，OpenBSD应该启动。内核将自我介绍并开始识别您的硬件。
- en: '[PRE4]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: In this output, you can tell at **1** from which device the system is booting—CD
    drive 0 in this case. Next, you see the copyright information, followed by the
    directory in which your kernel was compiled at **2**. You can see that this is
    an OpenBSD snapshot kernel, compiled by user `deraadt` on host *amd64.openbsd.org*.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个输出中，您可以从**1**处看到系统是从哪个设备引导的——在本例中是CD驱动器0。接下来，您看到版权信息，然后是您的内核是在哪个目录下编译的**2**。您可以看到这是一个OpenBSD快照内核，由用户`deraadt`在主机*amd64.openbsd.org*上编译。
- en: At this point, OpenBSD should probe your hardware and display the results as
    it attaches device drivers.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，OpenBSD应该探测您的硬件，并在附加设备驱动程序时显示结果。
- en: Running the Installation Program
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 运行安装程序
- en: 'Once the boot messages pass, you should see the following text:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦引导消息通过，您应该看到以下文本：
- en: '[PRE5]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'As you can see, there are three options: Install, Upgrade, and Shell. The OpenBSD
    installer is a shell script that calls programs to download files, format disks,
    and otherwise prepare your system. It might not be pretty, but it is extremely
    fast and, in educated hands, extremely powerful.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，有三个选项：安装、升级和Shell。OpenBSD安装程序是一个shell脚本，它调用程序下载文件、格式化磁盘以及准备您的系统。它可能看起来不怎么样，但它非常快，在受过教育的人手中，它非常强大。
- en: The Shell option will drop you into an OpenBSD command line, where you have
    access to the commands on the installation disk. These minimal commands might
    suffice to repair a damaged system. We’ll examine the Upgrade option in [Chapter 20](ch20.html
    "Chapter 20. Upgrading").
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: Shell选项将您带入OpenBSD命令行，在那里您可以访问安装磁盘上的命令。这些最小命令可能足以修复损坏的系统。我们将在[第20章](ch20.html
    "第20章。升级")中检查升级选项。
- en: 'Enter **`i`** to choose Install. You should see a welcome message and a few
    basic instructions:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 输入**`i`**选择安装。您应该看到一条欢迎信息和一些基本说明：
- en: '[PRE6]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The installer shows default answers in square brackets. To use the default,
    just press ENTER.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序在方括号中显示默认答案。要使用默认值，只需按回车键。
- en: If your system has a standard keyboard and monitor, OpenBSD will use it as the
    standard VT220 terminal, as shown at **1**. If you have an unusual terminal connected
    to your system, you’re probably an old geezer who knows exactly what terminal
    type it is. If you’re a young kid using some ancient, unidentified, dust-covered
    terminal found in a disused laboratory at the back of an abandoned fireworks factory
    because you thought it would be nifty, stop now and get a standard monitor and
    keyboard. While OpenBSD probably supports that antediluvian console, this is not
    the time to try it.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的系统有一个标准的键盘和显示器，OpenBSD将使用它作为标准的VT220终端，如**1**所示。如果您有一个连接到系统的非标准终端，您可能是一位老手，确切地知道它是哪种终端类型。如果您是一位使用一些古老的、未知的、满是灰尘的终端的年轻人，这种终端是在一个废弃的烟花工厂后面的废弃实验室里找到的，因为您认为它会很酷，现在就停止并获取一个标准的显示器和键盘。虽然OpenBSD可能支持那个古老的控制台，但这不是尝试它的时候。
- en: Next, the installer should prompt you for the system’s short hostname at **2**,
    which will be a single word to identify your system. This particular computer
    is named `caddis`; you can name yours whatever you like.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，安装程序应该提示您输入系统的短主机名**2**，这将是一个单词，用于标识您的系统。这台特定的计算机命名为`caddis`；您可以将其命名为您喜欢的任何名字。
- en: 'Now to configure the network:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 现在来配置网络：
- en: '[PRE7]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'At **1**, the installer lists the network interfaces it recognizes on your
    machine. It has found three: `em0`, `em1`, and `vlan0`. The first two, `em0` and
    `em1`, are network cards. I chose `em0` at **2**, the installer’s default, by
    pressing ENTER. Avoid configuring a virtual local area network (VLAN) during installation
    if possible, especially on your first installation. If you need a VLAN to connect
    to the Internet, see [Chapter 12](ch12.html "Chapter 12. Connecting to the Network").'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在**1**处，安装程序列出了它在您的机器上识别的网络接口。它找到了三个：`em0`、`em1`和`vlan0`。前两个，`em0`和`em1`，是网卡。我在**2**处选择了`em0`，这是安装程序的默认选项，按回车键。如果在可能的情况下，避免在安装期间配置虚拟局域网（VLAN），尤其是在您的第一次安装时。如果您需要VLAN来连接到互联网，请参阅[第12章](ch12.html
    "第12章。连接到网络")。
- en: When asked at **3** if you want to give a static IP address, you can choose
    to use DHCP by pressing ENTER. I chose to enter a static address because I’ll
    be using this machine as a server. (If you don’t need a static address, you can
    just let DHCP automatically assign you an IP address.)
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 当被问到是否想要提供一个静态IP地址时，你可以通过按回车键选择使用DHCP。我选择输入一个静态地址，因为我将使用这台机器作为服务器。（如果你不需要静态地址，你可以让DHCP自动为你分配一个IP地址。）
- en: When you use a static address, you must also enter a netmask at **4** and (if
    desired) an IPv6 address at **5**. Now, having configured one network card, OpenBSD
    asks at **6** if you’ve finished configuring the network. If you wanted the installer
    to walk you through configuring the second network card, you would enter `em1`
    instead of accepting the default of `done`.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用静态地址时，你必须在**4**处输入一个子网掩码，并且（如果需要）在**5**处输入一个IPv6地址。现在，配置了一张网络卡后，OpenBSD会在**6**处询问你是否已完成网络配置。如果你想让安装程序引导你配置第二张网络卡，你应该输入`em1`而不是接受默认的`done`。
- en: If you assign a static IP address, you must also configure a static route if
    you want to access the Internet, as shown at **7**. Similarly, you need to tell
    your host its domain name at **8** and the IP address of at least one name server
    at **9**.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你分配了一个静态IP地址，那么如果你想访问互联网，你必须配置一个静态路由，正如**7**所示。同样，你需要告诉你的主机它的域名在**8**处，以及至少一个名称服务器的IP地址在**9**处。
- en: At this point, you should be on your local network. If you can’t access the
    network, you probably entered something incorrectly. If nothing else, you can
    use an exclamation point (`!`) to interrupt the installation and get a shell prompt.
    ([Chapter 12](ch12.html "Chapter 12. Connecting to the Network") discusses OpenBSD’s
    network configuration in greater depth.)
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，你应该已经连接到本地网络。如果你无法访问网络，可能是因为输入有误。至少，你可以使用感叹号（`!`）来中断安装并获取一个shell提示符。（[第12章](ch12.html
    "第12章。连接到网络"）更深入地讨论了OpenBSD的网络配置。）
- en: Multiple Network Cards
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 多个网络卡
- en: Our example server has multiple network interfaces. I chose to configure interface
    `em0` because that machine was in front of me, and if I chose the wrong network
    card, I could move the cable. But what if you don’t have physical access to your
    machine? If you had two different network cards (say, an Intel and a 3Com), you
    would have a better idea which card is which, but having two identical cards leaves
    you guessing which card has a cable plugged into which network.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的示例服务器有多个网络接口。我选择配置接口`em0`，因为那台机器就在我面前，如果选错了网络卡，我可以移动电缆。但如果你无法物理访问你的机器怎么办？如果你有两张不同的网络卡（比如说，英特尔和3Com），你会更有可能知道哪张是哪张，但有两张相同的卡会让你猜测哪张卡插入了哪个网络。
- en: 'Luckily, the OpenBSD installer lets you escape to a command prompt to do a
    little investigating. How is this useful here? Network interfaces that are plugged
    in will tell you what kind of connection they have, and disconnected or otherwise
    failed interfaces will report that they have no media. Here’s how you can interrupt
    the installer to identify the live interface:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，OpenBSD安装程序允许你逃逸到命令提示符进行一些调查。这在这里有什么用？已插入的网络接口会告诉你它们有什么类型的连接，而未连接或失败的接口会报告它们没有媒体。以下是如何中断安装程序以识别活动接口的方法：
- en: '[PRE8]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Rather than choosing an interface, escape to a command prompt at **1** by entering
    an exclamation point (`!`). Then ask OpenBSD at **2** to tell you about its network
    interfaces by running `ifconfig`. You can see interfaces `em0` and `em1` in the
    output. While `em0` reports at **3** that it’s running 1000baseT at full-duplex,
    at **4** you can see that `em1` has a media type of `none`. Interface `em0` is
    plugged in, so that’s the interface I want to configure. Enter **`exit`** to return
    to the installer, and proceed to configure card `em0`.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 而不是选择一个接口，通过输入感叹号（`!`）在**1**处逃逸到命令提示符。然后通过运行`ifconfig`来让OpenBSD在**2**处告诉你它的网络接口。你可以在输出中看到接口`em0`和`em1`。当`em0`在**3**处报告它正在全双工模式下运行1000baseT时，在**4**处你可以看到`em1`的媒体类型为`none`。接口`em0`已连接，所以这就是我想配置的接口。输入**`exit`**返回到安装程序，并继续配置卡`em0`。
- en: Setting Up Services and the First User
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置服务和第一个用户
- en: 'The installer should now ask you to configure some basic system parameters:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序现在应该会要求你配置一些基本系统参数：
- en: '[PRE9]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: At **1**, enter your root password twice. If the passwords don’t match, the
    installer will make you do it over until they do.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在**1**处，输入两次root密码。如果密码不匹配，安装程序会要求你重新输入，直到它们匹配为止。
- en: You can enable the Secure Shell (SSH) daemon at **2** so that you can remotely
    connect to this machine immediately after installation. If you enable SSH but
    do not create a user later in the installation, you can SSH to the machine as
    root. This is a Very Bad Idea when using password authentication and will let
    intruders more easily compromise your server. If you enable `sshd` here, be absolutely
    certain to create a user during the installation process! If you don’t, at least
    disable SSH logins by the root account immediately after installing OpenBSD, as
    discussed in [Chapter 4](ch04.html "Chapter 4. Post-Install Setup").
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在**2**处启用安全壳（SSH）守护进程，以便您可以在安装后立即远程连接到这台机器。如果您启用了SSH但在安装过程中稍后没有创建用户，您可以用root身份SSH到这台机器。当使用密码认证时，这是一个非常糟糕的想法，会让入侵者更容易破坏您的服务器。如果您在这里启用了`sshd`，请务必在安装过程中创建用户！如果您不这样做，至少在安装OpenBSD后立即通过root账户禁用SSH登录，如[第4章](ch04.html
    "第4章。安装后设置")中所述。
- en: Correct time is important on a network. I usually enable the Network Time Protocol
    (NTP) daemon `ntpd(8)` during the installation process, as shown at **3**. OpenBSD
    chooses a set of publicly accessible time servers by default, but you can specify
    a local time server if you have one available.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络中，正确的时间设置很重要。我通常在安装过程中启用网络时间协议（NTP）守护进程`ntpd(8)`，如**3**处所示。OpenBSD默认选择一组公开可访问的时间服务器，但如果有可用的本地时间服务器，您可以指定它。
- en: Now tell the installer at **4** if you intend to run X Windows. X requires that
    software be permitted fairly broad access into the kernel. If the installer detects
    a graphic console, it defaults to permitting X. If you don’t need a graphic console,
    disable X access.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在告诉安装程序**4**，您是否打算运行X窗口。X需要软件被允许有相当广泛的权限进入内核。如果安装程序检测到图形控制台，它默认允许X。如果您不需要图形控制台，禁用X访问。
- en: If you’re running X, you might also want the X display manager `xdm(1)`. At
    **5**, tell the installer if you want `xdm`. By default, OpenBSD doesn’t start
    `xdm` when it boots; you’re generally better off installing OpenBSD on your system
    than configuring X, so I’ve accepted the default of `no` here.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在运行X，您可能还想要X显示管理器`xdm(1)`。在**5**处，告诉安装程序您是否想要`xdm`。默认情况下，OpenBSD在启动时不会启动`xdm`；您通常最好在系统上安装OpenBSD而不是配置X，所以我这里接受了`no`的默认值。
- en: If you want this system to use a serial port as the console, you can set that
    during the installation at **6**. I discuss serial consoles in [Chapter 5](ch05.html
    "Chapter 5. The Boot Process").
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想使用串行端口作为控制台，您可以在安装过程中**6**处设置。我将在[第5章](ch05.html "第5章。启动过程")中讨论串行控制台。
- en: Note
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For the basic system parameters, I’ve used the default for all but one. Enabling
    time service certainly isn’t mandatory—I could easily enable `ntpd` after installation
    instead. I could have also told the installer to disable X, but I can change that
    after installation as well.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 对于基本系统参数，我除了一个之外都使用了默认值。启用时间服务当然不是强制性的——我可以在安装后轻松启用`ntpd`。我也可以告诉安装程序禁用X，但我也可以在安装后更改这一点。
- en: Now to set up your first user.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在来设置您的第一个用户。
- en: '[PRE10]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: My usual user account name is `mwlucas`. Here, I enter that username, along
    with a real name entry. The installer creates this account and gives it permission
    to use the root password (see [Chapter 6](ch06.html "Chapter 6. User Management")).
    You should be prompted twice for the user’s password.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我的常用用户账户名是`mwlucas`。在这里，我输入这个用户名，以及一个真实姓名条目。安装程序创建此账户并授予它使用root密码的权限（见[第6章](ch06.html
    "第6章。用户管理")）。您应该会两次被提示输入用户的密码。
- en: Note
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: You’re offered a chance to disable root logins over SSH. Use this default. The
    root account should never be permitted to log in via SSH, unless using public
    key authentication, and even then, those logins should be restricted. For the
    reasons to avoid root logins over SSH, do an Internet search for “Hail Mary Cloud.”
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 您有机会禁用通过SSH的root登录。使用这个默认值。root账户永远不应该被允许通过SSH登录，除非使用公钥认证，即使那样，这些登录也应该受到限制。为了避免通过SSH进行root登录的原因，请在互联网上搜索“Hail
    Mary Cloud”。
- en: Setting the Time Zone
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置时区
- en: Set your time zone during installation. If you have Internet access when you
    install OpenBSD, the installer should try to determine your time zone. OpenBSD
    assumes that the BIOS clock is set in Coordinated Universal Time (UTC). If the
    BIOS clock is set in some other time zone, you’ll need to correct the system time
    after installation.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装过程中设置您的时区。如果您在安装OpenBSD时可以访问互联网，安装程序应尝试确定您的时区。OpenBSD假定BIOS时钟设置为协调世界时（UTC）。如果BIOS时钟设置为其他时区，您需要在安装后纠正系统时间。
- en: I’m in Detroit, Michigan. If you’re familiar with US geography, you might think
    that I need US Eastern Time, but my state has its own time zone.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我在密歇根州的底特律。如果您熟悉美国地理，您可能会认为我需要美国东部时间，但我的州有自己的时区。
- en: '[PRE11]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: I don’t recall my exact time zone, but I know it isn’t plain old US Eastern
    Time. I enter a question mark (**`?`**) at **1** to see the available options.
    I don’t recognize any of the time zones listed at **2** as correct for my city,
    but I know I’m in a US time zone, so I enter **`US`**. I don’t know what my choices
    of sub-time zones are, so I enter a question mark (**`?`**) at **3** to see the
    US time zones. And there’s Michigan! At **4**, I enter the full time zone name.^([[9](#ftn.id320931)])
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我记不清确切的时间区域，但我知道它不是普通的美国东部时间。我在**1**处输入一个问号（**`?`**）来查看可用的选项。我认不出**2**处列出的任何时区是我所在城市的正确时区，但我知道我处于美国时区，所以我输入**`US`**。我不知道我的子时区选择有哪些，所以我在**3**处输入一个问号（**`?`**）来查看美国的时区。那里有密歇根州！在**4**处，我输入了完整的时间区域名称.^([[9](#ftn.id320931)])
- en: Setting Up the Disk
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置磁盘
- en: As noted earlier, in a dedicated installation, the installer erases all data
    on the drive. Unlike most other operating system installers, the OpenBSD installer
    doesn’t warn you about this; it assumes that you understand the implications of
    repartitioning your hard drive.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，在专用安装中，安装程序会擦除驱动器上的所有数据。与其他大多数操作系统安装程序不同，OpenBSD安装程序不会警告您这一点；它假设您了解重新分区硬盘的后果。
- en: For this first installation, we’ll use OpenBSD’s default partitioning scheme.
    (We’ll discuss custom partitioning later in this chapter.) Our demo server has
    a single disk. We’ll first create an MBR partition on this disk and then add OpenBSD
    partitions.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这次首次安装，我们将使用OpenBSD的默认分区方案。（我们将在本章后面讨论自定义分区。）我们的演示服务器只有一个磁盘。我们首先将在该磁盘上创建一个MBR分区，然后添加OpenBSD分区。
- en: '[PRE12]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The installer tells us that it sees one disk, device `sd0`. The installer must
    know which disk will hold the root partition. (With only a single disk this seems
    superfluous, but it becomes important if you system has we’ll see an example with
    multiple disks, as discussed in [Custom Disk Layout](ch03.html#custom_disk_layout
    "Custom Disk Layout").) When you have only one disk, OpenBSD assumes that you’ll
    use it. It also asks if you want to use the disk’s DUID in the filesystem table
    rather than the device name. For reasons we’ll discuss in [Chapter 8](ch08.html
    "Chapter 8. Disks and Filesystems"), always answer **`yes`** to this.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序告诉我们它看到一个磁盘，设备`sd0`。安装程序必须知道哪个磁盘将包含根分区。（只有一个磁盘时这似乎是多余的，但如果您的系统有多个磁盘，这就会变得很重要，我们将在[自定义磁盘布局](ch03.html#custom_disk_layout
    "自定义磁盘布局")中讨论的例子中看到。）当您只有一个磁盘时，OpenBSD假设您会使用它。它还询问您是否想在使用文件系统表时使用磁盘的DUID而不是设备名称。正如我们将在[第8章](ch08.html
    "第8章。磁盘和文件系统")中讨论的，对此问题总是回答**`yes`**。
- en: The installer will now show you the MBR partition table.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序现在将显示MBR分区表。
- en: '[PRE13]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The first line shows the detected hard drive geometry. This particular drive
    has 6527 cylinders, 255 heads, and 63 sectors per cylinder. If you compare this
    to the label on the physical drive, it almost certainly won’t match (because hard
    drives lie). But note that this translated geometry has exactly the same number
    of sectors as shown in the hard drive documentation.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 第一行显示了检测到的硬盘几何形状。这个特定的驱动器有6527个磁柱，255个磁头，每个磁柱63个扇区。如果您将其与物理驱动器上的标签进行比较，几乎肯定不会匹配（因为硬盘会撒谎）。但请注意，这个翻译后的几何形状与硬盘文档中显示的扇区数量完全相同。
- en: Beneath this line, you see the existing MBR partition table. The partitions
    are all zeroed out, which means that this drive has no partitions. We want only
    OpenBSD on this machine, so take the default and let OpenBSD swallow the whole
    drive.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在此线下，您可以看到现有的MBR分区表。所有分区都被清零，这意味着该驱动器没有分区。我们只想在这台机器上安装OpenBSD，所以选择默认设置，让OpenBSD占用整个驱动器。
- en: Now it’s time to consider your OpenBSD partitions.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是考虑您的OpenBSD分区的时候了。
- en: '[PRE14]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Our first partition at **1** is `a`, which occupies 1GB and will be used as
    the root partition (*/*). On the installed system, this will be known as partition
    `sd0a`. Look down the list to see all of the standard partitions discussed in
    [Chapter 2](ch02.html "Chapter 2. Installation Preparations").
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第一分区在**1**处是`a`，占用1GB，将用作根分区（*/）。在安装的系统上，这将被称为分区`sd0a`。向下查看列表，查看[第2章](ch02.html
    "第2章。安装准备")中讨论的所有标准分区。
- en: We could do custom disk partitioning at this point, but for our first installation,
    we’ll use the defaults, as shown at **2**. The installer should then label the
    disk and **3** create filesystems on all the partitions.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在此时进行自定义磁盘分区，但为了我们的第一次安装，我们将使用默认设置，如**2**所示。然后安装程序应该在所有分区上创建文件系统。
- en: Choosing File Sets
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选择文件集
- en: Now that you have allocated disk space, let’s put the operating system onto
    the disk. The installer starts by asking some basic questions about how to get
    the sets.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经分配了磁盘空间，让我们将操作系统放到磁盘上。安装程序首先会询问一些基本问题，关于如何获取这些文件集。
- en: '[PRE15]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Although I booted this system off a CD, I’m going to install the file sets via
    **1** FTP. If my network needed to use a proxy to access the Internet, I would
    tell the installer.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我是从光盘启动这个系统的，但我将通过**1** FTP安装文件集。如果我的网络需要使用代理访问互联网，我会告诉安装程序。
- en: While the installer will choose an FTP server for you at **2**, you can specify
    an FTP server that you know is close or fast. If you’re installing a snapshot,
    give the file path to the desired snapshot on the FTP server. Finally, if this
    FTP server requires a username and password, enter it here.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然安装程序会为你选择一个FTP服务器**2**，但你也可以指定一个你知道的接近或快速的FTP服务器。如果你正在安装快照，请给出FTP服务器上所需快照的文件路径。最后，如果这个FTP服务器需要用户名和密码，请在此处输入。
- en: At this point, the installer should log in to the FTP server, find all available
    file sets, and display them for your approval.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 到这一步，安装程序应该登录到FTP服务器，找到所有可用的文件集，并供你批准。
- en: '[PRE16]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: I suggest you install everything, but you can choose to remove one or more sets.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议你安装所有内容，但你也可以选择删除一个或多个文件集。
- en: For example, suppose you are building a firewall machine. Firewalls traditionally
    don’t have compilers, documentation, or X. You can remove file sets by entering
    a minus sign (`-`) and the name of the file set.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设你正在构建一个防火墙机器。传统的防火墙通常没有编译器、文档或X。你可以通过输入一个减号(`-`)和文件集的名称来删除文件集。
- en: '[PRE17]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: This example removes the compiler and manual file sets at **1**. You can see
    that they’re no longer selected in the list of file sets.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 此示例在**1**处删除了编译器和手册文件集。你可以看到它们不再出现在文件集列表中。
- en: 'You can also use wildcards when selecting file sets. For example, here’s how
    to remove all file sets beginning with an `x`:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 你在选择文件集时也可以使用通配符。例如，以下是删除所有以`x`开头的文件集的方法：
- en: '[PRE18]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'If you change your mind, you can add file sets back in by entering a plus (`+`)
    sign and the file set name. Here, I add back everything by using a wildcard (`*`):'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你改变了主意，你可以通过输入一个加号(`+`)和文件集名称来重新添加文件集。在这里，我通过使用通配符(`*`)添加了所有内容：
- en: '[PRE19]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Once you’re ready, press ENTER to install the default or selected file sets.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 准备就绪后，按回车键安装默认或选定的文件集。
- en: After the installer unpacks all of the file sets on the hard drive, it will
    ask if you have more file sets to install.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序在硬盘上解包所有文件集后，会询问你是否还有更多文件集要安装。
- en: '[PRE20]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: If you have any custom file sets, you could install them at this point.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有任何自定义文件集，你现在可以安装它们。
- en: Finishing the Installation
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 完成安装
- en: 'After unpacking the file sets, the installer cleans up after itself and tells
    you it’s finished with this message:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 解包文件集后，安装程序会自行清理，并显示以下信息告知已完成：
- en: '[PRE21]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Do as you’re told and enter **`reboot`**, and then remove the CD if necessary.
    If you’re content with a default installation, you can skip to [Chapter 4](ch04.html
    "Chapter 4. Post-Install Setup") now.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 按照指示操作，输入**`reboot`**并重新启动，如果需要的话，请取出光盘。如果你对默认安装满意，现在就可以跳转到[第4章](ch04.html "第4章。安装后设置")。
- en: Custom Disk Layout
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自定义磁盘布局
- en: If you have multiple hard disks in a system, or if you want a different partition
    layout than the default, you must manually edit your disk layout.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你系统中有多个硬盘，或者你想要不同于默认的分区布局，你必须手动编辑你的磁盘布局。
- en: The installer partitions one disk at a time, and you can’t easily bounce between
    multiple disks. To successfully use multiple disks, decide on your partitioning
    scheme *before* you start the installation, and write down exactly which partitions
    you want on which disks as specifically as possible.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序一次分区一个磁盘，你无法轻松地在多个磁盘之间切换。要成功使用多个磁盘，请在开始安装之前确定你的分区方案，并尽可能具体地写下你希望在哪个磁盘上创建哪些分区。
- en: 'My system has two 50GB hard disks. I plan to divide the disks like this:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我的系统有两个50GB的硬盘。我计划这样划分磁盘：
- en: '****Disk 1****. 1GB */*, 1.2GB swap, 5GB */tmp*, 1GB */usr/X11R6*, 2GB */usr/src*,
    2GB */usr/obj*, and everything else */home*'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****磁盘1****. 1GB */*，1.2GB交换空间，5GB */tmp*，1GB */usr/X11R6*，2GB */usr/src*，2GB
    */usr/obj*，其余的 */home*'
- en: '****Disk 2****. 1GB */altroot*, 1.2GB swap, 6GB */var*, 10GB */usr/local*,
    and everything else */var/postgresql*'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '****磁盘 2****. 1GB */altroot*，1.2GB 交换分区，6GB */var*，10GB */usr/local*，以及其他所有
    */var/postgresql*'
- en: 'This layout includes all of the standard OpenBSD partitions, plus a few additions:
    I’ve increased some partition sizes above the installer-generated defaults, and
    I’ve added an extra swap partition on the second hard drive. OpenBSD doesn’t include
    a separate */var/postgresql* partition, but I’ve added one because I want my database
    data on its own partition. (We’ll discuss the */altroot* partition in [Chapter 9](ch09.html
    "Chapter 9. More Filesystems").)'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 此布局包括所有标准的 OpenBSD 分区，以及一些额外的分区：我将一些分区大小增加到安装程序生成的默认值以上，并在第二块硬盘上添加了一个额外的交换分区。OpenBSD
    不包括单独的 */var/postgresql* 分区，但我添加了一个，因为我希望我的数据库数据在它自己的分区上。（我们将在[第 9 章](ch09.html
    "第 9 章。更多文件系统")中讨论 */altroot* 分区。）
- en: The installer runs as usual until you get to the disk portion.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序像往常一样运行，直到您到达磁盘部分。
- en: '[PRE22]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: By default, the installer puts the root partition on the first hard drive, `sd0`.
    I’ll use this disk for the root partition and use the entire disk for OpenBSD.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，安装程序将根分区放在第一块硬盘上，`sd0`。我将使用此磁盘作为根分区，并使用整个磁盘安装 OpenBSD。
- en: The installer then presents a list of automatically generated disklabel partitions.
    We don’t want to use these partitions; we want to create our own from scratch.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序随后会显示一个自动生成的磁盘标签分区的列表。我们不想使用这些分区；我们想从头开始创建自己的分区。
- en: '[PRE23]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: We want a custom layout, so enter **`c`**.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要一个自定义布局，所以输入 **`c`**。
- en: 'The installer should now drop us to the `disklabel(8)` command prompt, indicated
    here by the `>` symbol:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序现在应该将我们带到 `disklabel(8)` 命令提示符，这里用 `>` 符号表示：
- en: '[PRE24]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: We can now use the interactive disklabel editor to create OpenBSD partitions
    within the MBR partition, as discussed in the following sections.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以使用交互式磁盘标签编辑器在 MBR 分区内创建 OpenBSD 分区，如以下章节所述。
- en: Viewing Disklabels
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 查看磁盘标签
- en: 'The `p` command prints the partition’s existing disklabel:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '`p` 命令打印分区现有的磁盘标签：'
- en: '[PRE25]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: This is exactly the same information discussed in [Understanding Disklabels](ch02.html#understanding_disklabels
    "Understanding Disklabels"). This hard drive previously had an OpenBSD installation,
    and the disklabel has those old partitions.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 这正是[理解磁盘标签](ch02.html#understanding_disklabels "理解磁盘标签")中讨论的信息。这个硬盘之前有一个 OpenBSD
    安装，磁盘标签有那些旧分区。
- en: 'To display partition sizes in megabytes, enter **`p m`**:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 要以兆字节为单位显示分区大小，请输入 **`p m`**：
- en: '[PRE26]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'You can also display partition sizes in gigabytes by entering **`p g`**:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以通过输入 **`p g`** 来以千兆字节为单位显示分区大小：
- en: '[PRE27]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Choose the unit of measurement best suited to your disk.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 选择最适合您磁盘的计量单位。
- en: Deleting Partitions
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 删除分区
- en: 'Use the `d` command to delete partitions:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `d` 命令删除分区：
- en: '[PRE28]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'That’s it. Tell `disklabel` to delete a partition on this disk, give it the
    partition letter, and it’s gone. But beware: `disklabel` won’t ask you to verify
    your choice, so be sure to choose the correct partition.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样。告诉 `disklabel` 在此磁盘上删除一个分区，给出分区字母，它就会消失。但请注意：`disklabel` 不会要求您验证您的选择，所以请确保选择正确的分区。
- en: Erasing Existing Disklabels
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 删除现有磁盘标签
- en: 'You could manually delete all partitions, but it’s much easier to zero out
    the existing disklabel with the `z` command:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以手动删除所有分区，但使用 `z` 命令将现有磁盘标签清零要容易得多：
- en: '[PRE29]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Here, we tell `disklabel` to erase the partition table with **`z`**, and then
    print the partition table with **`p`**. The output should be an empty disklabel,
    because the `c` disklabel partition represents the entire MBR partition. We can
    now create our desired partitions.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们告诉 `disklabel` 使用 **`z`** 删除分区表，然后使用 **`p`** 打印分区表。输出应该是一个空的磁盘标签，因为 `c`
    磁盘标签分区代表整个 MBR 分区。我们现在可以创建我们想要的分区。
- en: Creating Disklabel Partitions
  id: totrans-163
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建磁盘标签分区
- en: 'This first disk needs the following partitions:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这个第一个磁盘需要以下分区：
- en: 1GB */* (root)
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1GB */* (根)
- en: 1.2GB swap
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1.2GB 交换分区
- en: 5GB */tmp*
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5GB */tmp*
- en: 1GB */usr/X11R6*
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1GB */usr/X11R6*
- en: 2GB */usr/src*
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2GB */usr/src*
- en: 2GB */usr/obj*
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2GB */usr/obj*
- en: Everything else */home*
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他所有 */home*
- en: By default, `disklabel` creates partitions in order. You can manually create
    partitions in any order you want, but you’ll need to track sectors and cylinders
    in order to figure out where each partition should begin and end. I *strongly*
    recommend creating partitions in order and letting `disklabel` do the math.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，`disklabel` 按顺序创建分区。您可以手动以任何顺序创建分区，但您需要跟踪扇区和柱面，以便确定每个分区应该开始和结束的位置。我 **强烈**
    建议按顺序创建分区，并让 `disklabel` 做数学计算。
- en: 'Use the `a` command to create a partition beginning with */*:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `a` 命令以 */* 开始创建分区：
- en: '[PRE30]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: By default, at **1**, `disklabel` offers the next free letter for your new partition.
    The first partition on the disk is `a`. Press ENTER to accept it.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，在 **1** 处，`disklabel` 提供新的分区所用的下一个空闲字母。磁盘上的第一个分区是 `a`。按 ENTER 键接受它。
- en: The offset for a disklabel partition is the number of sectors from the beginning
    of the disk where the partition starts, not from the beginning of the MBR partition,
    which is the actual beginning of the disk. The first 63 sectors of a disk, numbers
    0 through 62, contain the MBR. We could use sector 63, but OpenBSD starts on sector
    64 to better align with memory cells in solid-state disks. At **2**, you can see
    that `disklabel` offers 64 as the default offset.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 磁盘标签分区的偏移量是从磁盘开始处到分区开始的扇区数，而不是从 MBR 分区的开始处，即磁盘的实际开始处。磁盘的前 63 个扇区，编号 0 到 62，包含
    MBR。我们可以使用扇区 63，但 OpenBSD 从扇区 64 开始，以便更好地与固态磁盘中的内存单元对齐。在 **2** 处，你可以看到 `disklabel`
    提供了 64 作为默认偏移量。
- en: 'The size at **3** is the number of sectors the partition uses. By default,
    `disklabel` offers all the remaining space on the disk, but I want a 1GB root
    partition. I could do the math to figure out how many sectors are in a gigabyte,
    but I’m lazy, so I use an abbreviation instead. The `disklabel` command recognizes
    the following abbreviations for sizes:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '**3** 处的大小是分区使用的扇区数。默认情况下，`disklabel` 提供磁盘上剩余的所有空间，但我想有一个 1GB 的根分区。我可以进行数学计算来确定千兆字节中有多少扇区，但我很懒，所以使用缩写。`disklabel`
    命令识别以下缩写作为大小：'
- en: '`b` for bytes'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`b` 代表字节'
- en: '`c` for cylinders'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`c` 代表圆柱体'
- en: '`k` for kilobytes'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`k` 代表千字节'
- en: '`m` for megabytes'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`m` 代表兆字节'
- en: '`g` for gigabytes'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`g` 代表千兆字节'
- en: All partitions must end on a cylinder boundary, so `disklabel` figures out the
    closest boundary and, at **4**, sizes my root partition to match. My root partition
    will be pretty close to 1GB.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 所有分区都必须以柱面边界结束，因此 `disklabel` 会计算出最近的边界，并在 **4** 处将我的根分区大小调整为匹配。我的根分区将非常接近 1GB。
- en: The `FS type` at **5** shows the filesystem used on this partition. For an OpenBSD
    disk, every data partition needs type `4.2BSD`. Your swap partition will be of
    type `swap`.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '**5** 处的 `FS type` 显示了该分区使用的文件系统。对于 OpenBSD 磁盘，每个数据分区都需要类型 `4.2BSD`。你的交换分区将是
    `swap` 类型。'
- en: The mount point at **6** is where you want this partition mounted. By default,
    `disklabel` doesn’t assign a mount point because it can’t guess what you want.
    Enter the partition’s mount point.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '**6** 处的挂载点是你要挂载此分区的地方。默认情况下，`disklabel` 不会分配挂载点，因为它无法猜测你的需求。输入分区的挂载点。'
- en: Partitions must end on a cylinder boundary, but should end with a whole block
    for the filesystem. The `disklabel` command **7** adjusts the partition size again,
    based on the standard block size of the filesystem.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 分区必须以柱面边界结束，但应以整个块结束以用于文件系统。`disklabel` 命令 **7** 根据文件系统的标准块大小再次调整分区大小。
- en: Our next partition is swap space.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 我们下一个分区是交换空间。
- en: '[PRE31]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The `disklabel` command assumes at **1** that you’re using the next partition
    letter, `b`. It automatically calculates the offset at **2**, which is the next
    free sector after the previous partition. I use decimal fractions at **3** to
    set the size (I could alternatively enter `1200m`). The size at **4** is rounded
    to the nearest cylinder boundary. Finally, `disklabel` knows that partition `b`
    is traditionally swap space, so it offers **5** that as the default. Swap space
    doesn’t need a mount point, and it doesn’t have a block size.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '`disklabel` 命令假设 **1** 你正在使用下一个分区字母 `b`。它自动计算偏移量 **2**，这是上一个分区之后的下一个空闲扇区。我在
    **3** 处使用十进制分数来设置大小（我也可以输入 `1200m`）。**4** 处的大小被四舍五入到最近的柱面边界。最后，`disklabel` 知道分区
    `b` 传统上是交换空间，因此它提供 **5** 作为默认选项。交换空间不需要挂载点，也没有块大小。'
- en: 'We can create the remaining partitions in the same way. Creating the last partition,
    */home*, is even easier:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以以相同的方式创建剩余的分区。创建最后一个分区 */home* 甚至更简单：
- en: '[PRE32]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: As you can see at **1**, we don’t need to track how much empty disk space remains,
    because `disklabel` does that for us. Press ENTER to swallow it all. Now is your
    chance to leave empty space on your disk.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 如 **1** 处所示，我们不需要跟踪剩余的磁盘空间量，因为 `disklabel` 会为我们做这件事。按 ENTER 键接受全部空间。现在是你留下磁盘空余空间的机会。
- en: Now that you’ve created all your partitions, print the disklabel (with the `p`
    command, as described earlier in the chapter) to double-check your work.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建了所有分区，使用 `p` 命令（如本章前面所述）打印磁盘标签以双重检查你的工作。
- en: Writing the New Disklabel
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编写新的磁盘标签
- en: 'When you’re satisfied with your partition scheme, enter **`q`** to write your
    disklabel to disk:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 当你对分区方案满意时，输入**`q`**将你的disklabel写入磁盘：
- en: '[PRE33]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '`disklabel` gives you one last chance to change your mind. Once you write a
    new disklabel, recovering any data on the disk becomes extremely difficult, so
    be sure you backed up any vital data on this disk before starting the installation.
    (This is a good time to make sure that you didn’t microwave your backup.)'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '`disklabel`给你最后一次改变主意的可能。一旦你写入一个新的disklabel，恢复磁盘上的任何数据将变得极其困难，所以请确保在开始安装之前备份了该磁盘上的任何重要数据。（这是确保你没有微波你的备份的好时机。）'
- en: Adding More Disks
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加更多磁盘
- en: 'After you partition your first disk, the installer offers you a chance to partition
    any other hard drives:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 在你分区第一个磁盘之后，安装程序会给你一个机会来分区任何其他硬盘：
- en: '[PRE34]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: The default is to not partition any other disks. If you choose another disk,
    you’ll need to create MBR partitions and then disklabel partitions.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下不会分区任何其他磁盘。如果你选择另一个磁盘，你需要创建MBR分区然后是disklabel分区。
- en: Once all of your hard drives have been formatted, you’ll return to installing
    the file sets.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦所有硬盘都格式化完毕，你将返回到安装文件集。
- en: Advanced Disklabel Commands
  id: totrans-203
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高级Disklabel命令
- en: While the basic commands should suffice to partition your disk, `disklabel`
    supports a variety of advanced commands. We’ll look at a few of them now.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然基本命令应该足以分区你的磁盘，但`disklabel`支持各种高级命令。我们现在将看看其中的一些。
- en: Changing Basic Drive Parameters
  id: totrans-205
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更改基本驱动器参数
- en: Remember all that stuff at the top of the disklabel that shows the drive’s basic
    physical characteristics? You can change all that, but it’s almost never necessary.
    In fact, if you think doing this is a good way to solve a problem, you’re probably
    on the wrong track.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 记得在disklabel顶部显示驱动器基本物理特性的所有那些东西吗？你可以更改所有这些，但几乎永远没有必要。事实上，如果你认为这样做是解决问题的好方法，你可能走错了路。
- en: 'If you enter `e`, `disklabel` walks you through each entry on the upper part
    of the disklabel. The existing values are presented as defaults, allowing you
    to quickly walk through the variables until you reach the one you want to change:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你输入`e`，`disklabel`会引导你通过disklabel上部的每个条目。现有值作为默认值提供，允许你快速浏览变量直到你到达想要更改的那个：
- en: '[PRE35]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Edit this information at your own risk because you can render your disk unbootable
    or your partitions unusable by changing it! Changing the drive’s physical description
    means you’re lying to your computer, and computers go ballistic when you lie to
    them about their hardware.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在自己的风险下编辑这些信息，因为通过修改它，你可能使你的磁盘无法启动或分区无法使用！更改驱动器的物理描述意味着你在向你的电脑撒谎，而电脑在你对其硬件撒谎时会变得非常激动。
- en: Modifying Existing Partitions
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 修改现有分区
- en: The `m` command modifies existing partitions. The `disklabel` tool walks you
    through each of the values you entered when creating the disk, offering your original
    values as defaults and allowing you to change them. But most of the time, it’s
    easier to just delete the partition and re-create it.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '`m`命令用于修改现有分区。`disklabel`工具会引导你通过创建磁盘时输入的每个值，将原始值作为默认值提供，并允许你更改它们。但大多数时候，直接删除分区然后重新创建它更容易。'
- en: Entering Expert Mode
  id: totrans-212
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 进入专家模式
- en: Expert mode gives the advanced user access to some rarely used options in `disklabel`.
    Most people don’t need these and find them simply clutter. (It’s not as if `disklabel`
    isn’t complicated enough already.)
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 专家模式为高级用户提供访问`disklabel`中一些很少使用的选项。大多数人不需要这些，并且觉得它们只是杂乱无章。（`disklabel`本身已经足够复杂了。）
- en: To access expert mode, use the `X` command. You won’t immediately see all of
    the options available, but entering other commands will produce more options and
    more output.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问专家模式，使用`X`命令。你不会立即看到所有可用的选项，但输入其他命令会产生更多选项和更多输出。
- en: Getting More Help
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 获取更多帮助
- en: You can enter a single question mark (`?`) at the `disklabel` prompt for a brief
    list of all available commands. If you want more detailed help, the `M` command
    displays the `disklabel(8)` man page.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在`disklabel`提示符下输入一个单个问号（`?`）来获取所有可用命令的简要列表。如果你需要更详细的帮助，`M`命令显示`disklabel(8)`手册页。
- en: You’ve now installed OpenBSD. Let’s see what to do next.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经安装了OpenBSD。让我们看看下一步该做什么。
- en: '* * *'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: ^([[8](#id346326)]) Yes, some of us have half-suppressed memories of i386 hardware
    that couldn’t boot OpenBSD from a CD, but would let you fetch the install sets
    from one once you had it boot from a floppy. But seriously, if your hardware is
    that aged and picky, please save yourself some pain. Go back to the dumpster you
    found that computer in. Find something more recent.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[8](#id346326)]) 是的，我们中的一些人对i386硬件还有半抑制的记忆，它不能从CD启动OpenBSD，但一旦你从软盘启动，它就会让你获取安装套件。但说真的，如果你的硬件那么老，那么挑剔，请为自己节省一些痛苦。回到你找到那台电脑的垃圾桶。找一些更现代的东西。
- en: ^([[9](#id320931)]) Of course, the US/Michigan time zone applies only to the
    four counties on the west end of the Upper Peninsula. But accepting the default
    wouldn’t let me illustrate this, and if I have to make something up, it might
    as well be vaguely plausible.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[9](#id320931)]) 当然，美国/密歇根时区仅适用于上半岛西端的四个县。但接受默认设置并不能让我说明这一点，而且如果我必须编造一些东西，那它至少应该是模糊可信的。
