<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_38">
<a name="ch04" class="calibre6" id="ch04"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="39" class="calibre16" id="39"/><a name="ch04lev1sec4" class="calibre16" id="ch04lev1sec4"/><span class="chapter-titlelabel">Program 30: </span>A Bit of Trouble</h2><p class="b24-bookeditorial">This program uses one variable to hold eight privilege flags. The programmer wants to set the administration (<span>P_ADMIN</span>) and backup master (<span>P_BACKUP</span>) privileges for the given user and then verify that the bits were properly set. What is really happening?</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 /************************************************
  2  * print_privs -- Print some of the privilege   *
  3  * flags.                                       *
  4  ************************************************/
  5 #include &lt;iostream&gt;
  6
  7 #define CI const int
  8 CI P_USER   = (1 &lt;&lt; 1);  // Normal user privileges
  9 CI P_REBOOT = (1 &lt;&lt; 2);  // Can reboot systems
 10 CI P_KILL   = (1 &lt;&lt; 3);  // Can kill any process
 11 CI P_TAPE   = (1 &lt;&lt; 4);  // Can use tape devices
 12 CI P_RAW    = (1 &lt;&lt; 5);  // Can do raw io
 13 CI P_DRIVER = (1 &lt;&lt; 6);  // Can load drivers
 14 CI P_ADMIN  = (1 &lt;&lt; 7);  // Can do administration
 15 CI P_BACKUP = (1 &lt;&lt; 8);  // Can do backups
 16
 17 int main()
 18 {
 19     // The privileges
 20     unsigned char privs = 0;
 21
 22     // Set some privs
 23     privs |= P_ADMIN;
 24     privs |= P_BACKUP;
 25
 26     std::cout &lt;&lt; "Privileges: ";
 27
 28     if ((privs &amp; P_ADMIN) != 0)
 29         std::cout &lt;&lt; "Administration ";
 30
 31     if ((privs &amp; P_BACKUP) != 0)
 32         std::cout &lt;&lt; "Backup ";
 33
 34     std::cout &lt;&lt; std::endl;
 35     return (0);
 36 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#143" target="_parent" class="calibre2">Hint 7</a>. <a href="LiB0121.html#509" target="_parent" class="calibre2">Answer 11</a>.)</p>
</div>
</div>



</body></html>