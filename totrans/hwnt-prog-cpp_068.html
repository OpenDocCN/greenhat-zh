<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_75">
<a name="ch05" class="calibre6" id="ch05"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="78" class="calibre16" id="78"/><a name="ch05lev1sec4" class="calibre16" id="ch05lev1sec4"/><span class="chapter-titlelabel">Program 66: </span>Buffer to Nowhere</h2><p class="b24-bookeditorial">The programmer decided to speed up the buffered I/O by increasing the size of the buffer. Normally this would make things faster, but in this case it makes things strange. Why?</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 /************************************************
  2  * buffer demo.  Show how big buffers can speed *
  3  * up I/O.                                      *
  4  ************************************************/
  5 #include &lt;stdio.h&gt;
  6
  7 /* Nice big buffer */
  8 #define BUF_SIZE  (50 * 1024)
  9
 10 /************************************************
 11  * print_stuff -- Print a bunch of stuff in a   *
 12  *      big buffer.                             *
 13  ************************************************/
 14 void print_stuff(void)
 15 {
 16     // Buffer to hold the data
 17     char buffer[BUF_SIZE];
 18
 19     // Printing counter.
 20     int i;
 21
 22     /* Things go much faster with this */
 23     setbuf(stdout, buffer);
 24
 25     for (i = 0; i &lt; 10; ++i)
 26         printf("Hello world\n");
 27 }
 28
 29
 30 int main()
 31 {
 32     print_stuff();
 33     printf("That's all\n");
 34     return (0);
 35 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#210" target="_parent" class="calibre2">Hint 74</a>. <a href="LiB0121.html#581" target="_parent" class="calibre2">Answer 83</a>.)</p>
</div>
</div>



</body></html>