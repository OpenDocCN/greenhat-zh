- en: Appendix B. Installing MySQL for Ruby on Rails
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录B. 为Ruby on Rails安装MySQL
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages860138.png.jpg)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages860138.png.jpg)'
- en: If you are working with Rails, you will need to install a database. Although
    quite a few choices are available to you, one of the most widely used is MySQL.
    If you’ve never used MySQL before, you may find some of the setup options confusing.
    Here, I’ll try to guide you through the process to avoid potential problems. The
    MySQL main site is at [http://www.mysql.com/](http://www.mysql.com/), where you
    can navigate to the download page for various versions.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用Rails，你需要安装一个数据库。尽管有许多选择可供你选择，但最广泛使用的是MySQL。如果你以前从未使用过MySQL，你可能会发现一些设置选项令人困惑。在这里，我将尝试引导你通过这个过程，以避免潜在的问题。MySQL主网站是[http://www.mysql.com/](http://www.mysql.com/)，你可以导航到各种版本的下载页面。
- en: Note
  id: totrans-3
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This appendix is based on an installation of MySQL 5.0 under Windows. There
    may be differences when installing other versions on other operating systems.
    Refer to the MySQL site for additional guidance.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本附录基于在Windows下安装MySQL 5.0。在其他操作系统上安装其他版本时可能会有所不同。请参考MySQL网站以获取更多指导。
- en: Downloading MySQL
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载MySQL
- en: I will assume you will be using the free edition of MySQL. This is available
    for download from [http://dev.mysql.com/downloads/](http://dev.mysql.com/downloads/).
    The current version, at the time of writing, is MySQL 5 Community Server. The
    name and version number will, of course, change over time. Download whichever
    is the current (not an upcoming, alpha, or beta) release. Choose the specific
    version recommended for your operating system (there may be different versions
    for Win32 and Win64, for example).
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我将假设你将使用MySQL的免费版。这可以从[http://dev.mysql.com/downloads/](http://dev.mysql.com/downloads/)下载。在撰写本文时，当前版本是MySQL
    5 Community Server。名称和版本号当然会随时间而变化。下载当前（不是即将发布的、alpha或beta）版本。选择为你操作系统推荐的特定版本（例如，Win32和Win64可能有不同的版本）。
- en: You will need to locate the installer for your operating system. For Windows,
    you can download either the complete MySQL package or, if available, the smaller
    Windows Essentials package. The complete package contains extra tools for database
    developers, but these are not required for simple Rails development. For most
    people, therefore, the smaller Windows Essentials download file is the one to
    get. You may be asked to select a mirror site, and you may also be shown a questionnaire,
    which you can fill out if you want.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要找到适合你操作系统的安装程序。对于Windows，你可以下载完整的MySQL包，或者如果可用，较小的Windows Essentials包。完整的包包含数据库开发人员的一些额外工具，但这些对于简单的Rails开发不是必需的。因此，对于大多数人来说，较小的Windows
    Essentials下载文件是首选。你可能需要选择镜像站点，也可能会有一个问卷调查，如果你想填写的话。
- en: Installing MySQL
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装MySQL
- en: Once the download has completed, run the program by selecting **Open** or **Run**
    in the download dialog if this is still visible or by double-clicking the installation
    file via, for example, the Windows Explorer.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，通过选择下载对话框中的**打开**或**运行**（如果此对话框仍然可见）或通过例如Windows资源管理器双击安装文件来运行程序。
- en: Note
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: During the installation of MySQL, some advertising screens may appear. Click
    the buttons to move through the screens. Some security warnings may also prompt
    you to verify your intention to install the software. When prompted, you should
    click the necessary options to continue with the installation.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装MySQL期间，可能会出现一些广告屏幕。点击按钮以浏览屏幕。一些安全警告也可能提示你验证安装软件的意图。当提示时，你应该点击必要的选项以继续安装。
- en: The first page of the Setup Wizard will now appear. Click the **Next** button.
    You can either leave the Typical setup option selected if you are happy to install
    the software into the default MySQL directory—on Windows that’s beneath *C:\Program
    Files\*. If you want to install to some other directory, however, select **Custom**.
    Then click **Next**. Click **Change** to change the directory.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 设置向导的第一页现在将出现。点击**下一步**按钮。如果你愿意将软件安装到默认的MySQL目录中——在Windows上是在 *C:\Program Files\*
    之下，你可以选择典型设置选项。但是，如果你想安装到其他目录，请选择**自定义**。然后点击**下一步**。点击**更改**以更改目录。
- en: When you are ready to move on, click **Next**.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 当你准备好继续时，点击**下一步**。
- en: You will see the screen stating “Ready To Install the Program.” Verify that
    the destination folder is correct, and then click the **Install** button.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到显示“准备安装程序”的屏幕。请确认目标文件夹是否正确，然后点击**安装**按钮。
- en: Depending on the version of MySQL, you may now be shown some promotional screens,
    or you may be prompted to create a new MySQL account, which will let you receive
    news of changes and updates. These are not an essential part of the software installation,
    and you can click the Next or Skip button to move on through the installation.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 根据 MySQL 的版本，你现在可能会看到一些促销屏幕，或者可能会提示你创建一个新的 MySQL 账户，这将让你能够接收有关更改和更新的消息。这些不是软件安装的必要部分，你可以点击“下一步”或“跳过”按钮继续安装过程。
- en: The Wizard Completed dialog now appears.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 现在会显示**向导完成**对话框。
- en: Click the **Finish** button.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**完成**按钮。
- en: Configuring MySQL
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 MySQL
- en: In fact, this isn’t the end of the installation after all. With some installers,
    a new screen pops up welcoming you to the MySQL Server Instance Configuration
    Wizard. If this does not occur, you will need to load this yourself. On Windows,
    click the **Start** menu, and then navigate through your program groups to **MySQL
    ▸ MySQL Server 5.0** (or whichever version number you are using) ▸ **MySQL Server
    Instance Config Wizard**. Click **Next**.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，这并不是安装的结束。在一些安装程序中，会出现一个新窗口，欢迎你进入 MySQL 服务器实例配置向导。如果这种情况没有发生，你需要自己加载它。在
    Windows 上，点击**开始**菜单，然后通过你的程序组导航到**MySQL ▸ MySQL 服务器 5.0**（或你正在使用的任何版本号）▸ **MySQL
    服务器实例配置向导**。点击**下一步**。
- en: Assuming that this is the first time you have installed MySQL on this machine,
    you can select **Standard Configuration** (if you are upgrading from an older
    version of MySQL, you need to select Detailed Configuration, but that is beyond
    the scope of this simple setup guide). Click **Next**. In the next dialog, leave
    the default options selected (that is, Install As Windows Service, Service Name
    = ‘MySQL’, and Launch the MySQL Server automatically). Then click **Next**.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 假设这是你第一次在这台机器上安装 MySQL，你可以选择**标准配置**（如果你是从较旧版本的 MySQL 升级，你需要选择详细配置，但这超出了本简单设置指南的范围）。点击**下一步**。在下一个对话框中，保留默认选项（即作为
    Windows 服务安装，服务名称为“MySQL”，并自动启动 MySQL 服务器）。然后点击**下一步**。
- en: On the next screen, leave Modify Security Settings checked, and enter the same
    password (of your choice) into the first two text fields. You will need this password
    later, so remember it or write it down in a secure location. If you need to access
    MySQL from another computer, you can check “Enable root access from remote machines.”
    Then click **Next**.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一屏，保留修改安全设置复选框选中，并将你选择的相同密码输入到前两个文本框中。你稍后需要这个密码，所以请记住它或将其写在安全的地方。如果你需要从另一台计算机访问
    MySQL，可以勾选“启用从远程机器的 root 访问。”然后点击**下一步**。
- en: Note
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The default MySQL username is “root.” The password is the one you just entered.
    You will need both of these items of information later when creating Rails applications.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的 MySQL 用户名是“root”。密码是你刚刚输入的那个。你稍后创建 Rails 应用程序时需要这两项信息。
- en: The next screen just gives you some information about the tasks that are about
    to be performed. Click the **Execute** button.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 下一屏只是提供了即将执行的任务的一些信息。点击**执行**按钮。
- en: If you have previously installed or configured MySQL, you may see an error message
    that tells you to skip the installation. You can click **Retry** to see whether
    you can bypass this problem. If not, click **Skip**, and then restart the MySQL
    configuration process, selecting Reconfigure Instance and Standard Instance when
    prompted.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你之前已安装或配置过 MySQL，你可能会看到一个错误消息，告诉你跳过安装。你可以点击**重试**以查看是否可以绕过此问题。如果不能，点击**跳过**，然后重新启动
    MySQL 配置过程，当提示时选择重新配置实例和标准实例。
- en: When everything is installed, click **Finish**.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当一切安装完成后，点击**完成**。
- en: And that’s it!
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样！
- en: Can’t Find the Database?
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 找不到数据库？
- en: 'When using MySQL with Rails, even following a successful installation of MySQL,
    Rails may display an error message similar to the following when you try to run
    your application:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用 Rails 与 MySQL 一起使用时，即使 MySQL 安装成功，当你尝试运行应用程序时，Rails 也可能会显示类似于以下错误消息：
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Some versions of Rails (Rails 2.2 and newer) require that the MySQL gem be
    installed as a separate operation. To do this, enter the following at the system
    prompt:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 一些版本的 Rails（Rails 2.2 及更高版本）要求将 MySQL 晶石（gem）作为单独的操作安装。为此，请在系统提示符下输入以下内容：
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Another problem may arise on Windows. When you run your application, it is
    possible that you will see an error message similar to this:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上还可能出现另一个问题。当你运行应用程序时，你可能会看到类似于以下错误消息：
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: If you encounter this problem, you should be able to fix it by making a copy
    of a file called *libmySQL.dll* from your MySQL binary directory (for example,
    *C:\Program Files\MySQL\MySQL Server 5.0\bin*) into the Ruby binary directory
    (for example, *C:\ruby\bin*). Restart your application (shut down and restart
    the server), and then try running it again.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如果遇到这个问题，你应该能够通过从MySQL二进制目录（例如，*C:\Program Files\MySQL\MySQL Server 5.0\bin*）复制一个名为
    *libmySQL.dll* 的文件到Ruby二进制目录（例如，*C:\ruby\bin*）来修复它。重启你的应用程序（关闭并重新启动服务器），然后再次尝试运行它。
