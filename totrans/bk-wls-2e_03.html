<html><head></head><body><div class="chapter" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="how_wi-fi_works"/>Chapter 3. HOW WI-FI WORKS</h1></div></div></div><div class="mediaobject"><a id="I_mediaobject3_d1e1877"/><img alt="HOW WI-FI WORKS" src="tagoreillycom20090210nostarchimages255004.png.jpg"/></div><p>Wireless Ethernet, better known as Wi-Fi, uses spread-spectrum radio signaling to distribute computer data through local area networks. This chapter describes the technical details of Wi-Fi networking, including the differences among the Wi-Fi standards and the structure of a network. It also includes basic information about Wi-Fi access points (also called <span class="emphasis"><em>base stations</em></span>) and network interface adapters.<a class="indexterm" id="idx-CHP-3-0167"/></p><div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="wi-fi_network_controls"/>Wi-Fi Network Controls</h1></div></div></div><p>Wi-Fi <a class="indexterm" id="idx-CHP-3-0168"/>specifications control the way data moves through the physical layer (the radio link), and it defines a <a class="indexterm" id="idx-CHP-3-0169"/>media access control (<a class="indexterm" id="idx-CHP-3-0170"/>MAC) layer that handles the interface between the physical layer and the rest of the network structure.</p><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="the_physical_layer-id001"/>The Physical Layer</h2></div></div></div><p>In an 802.11 network, the radio transmitter adds a 144-bit <a class="indexterm" id="idx-CHP-3-0171"/>preamble to each packet, with 128 bits that the receiver uses to synchronize with the transmitter and a 16-bit start-of-<a class="indexterm" id="idx-CHP-3-0172"/>frame field (a <span class="emphasis"><em>frame</em></span> is a packet with additional data added to the beginning or end of the bit string). This is followed by a 48-bit header that contains information about the data transfer speed, the length of the data contained in the packet, and an error-checking sequence. This header is called the <a class="indexterm" id="idx-CHP-3-0173"/>PHY preamble because it controls the physical layer (in the ISO model) of the communication link.<a class="indexterm" id="idx-CHP-3-0174"/></p><p>Because the header specifies the speed of the data that follows it, the <a class="indexterm" id="idx-CHP-3-0175"/>preamble and the header are always transmitted at 1Mbps. Therefore, even if a network link is operating at the full 11Mbps, the effective data transfer speed is considerably slower. In practice, the best you can expect is about 85 percent of the nominal speed, and the other types of overhead in the data packets reduce the actual speed even more.</p><p>The 144-bit <a class="indexterm" id="idx-CHP-3-0176"/>preamble is a holdover from the older and slower DSSS systems that has stayed in the specification to assure that 802.11 devices are still compatible with the older standards, but it really doesn't accomplish anything useful. There is an optional alternative that uses a shorter 72-bit preamble. In a <a class="indexterm" id="idx-CHP-3-0177"/>short preamble, the <a class="indexterm" id="idx-CHP-3-0178"/>synchronization field has 56 bits that are combined with the same 16-bit <a class="indexterm" id="idx-CHP-3-0179"/>start-of-frame field used in long preambles. The 72-bit preamble is not compatible with very old 802.11 hardware, but that doesn't matter in a modern Wi-Fi network because all the nodes can recognize the short preamble format. In all other respects, a short preamble works just as well as a long one.</p><p>It takes the network a maximum of 192 milliseconds to handle a long preamble, compared to 96 milliseconds for a short preamble. In other words, the short preamble cuts the overhead on each packet in half. This makes a significant difference in the actual data transmission speed, especially for things like streaming audio and video and voice over Internet services.</p><p>Some manufacturers use the long preamble as the default, and others use the short preamble. It's usually possible to change the preamble length in the configuration software for network adapters and access points.</p><p>For most users, preamble length is one of those technical details that you don't have to understand as long as it's the same for all the devices in the network. Fifteen years ago, when telephone modems were the most common way to connect one computer to another, we all had to worry about setting the data bits and stop bits every time we placed a call through a modem. You probably never knew exactly what a stop bit is (it's the amount of time an old mechanical Teletype printer needed to return to the idle state after sending or receiving each byte), but you knew that it had to be the same at both ends. Preamble length is the same kind of obscure setting: It has to be the same on every node in a network, but most people neither know nor care what it means.</p></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="the_mac_layer"/>The MAC Layer</h2></div></div></div><p>Within the ISO model, the <a class="indexterm" id="idx-CHP-3-0180"/>MAC layer (which is usually understood as a subset of the data link layer) controls the traffic that moves through the radio network. It prevents data collisions and conflicts by using a set of rules called <span class="emphasis"><em>carrier sense multiple access/collision avoidance (CSMA/CA)</em></span>, and it supports the security functions specified in the 802.11 standards. When the network includes more than one access point, the <a class="indexterm" id="idx-CHP-3-0181"/>MAC layer associates each network client with the access point that provides the best signal quality.<a class="indexterm" id="idx-CHP-3-0182"/><a class="indexterm" id="idx-CHP-3-0183"/></p><p>When more than one node in the network tries to transmit data at the same time, <a class="indexterm" id="idx-CHP-3-0184"/>CSMA/CA instructs all but one of the conflicting nodes to back off and try again later, and it allows the surviving node to send its packet. CSMA/CA works like this: When a network node is ready to send a packet, it listens for other signals first. If it doesn't hear anything, it waits for a random (but short) period of time and then listens again. If it still doesn't sense a signal, it transmits a packet. The device that receives the packet evaluates it, and if it's intact, the receiving mode returns an acknowledgment. But if the sending node does not receive the acknowledgment, it assumes that there has been a collision with another packet that scrambled the data, so it waits for another random interval and then tries again.</p><p>CSMA/CA also has an optional feature that sets an access point (the bridge between the wireless LAN and the backbone network) as a point coordinator that can grant priority to a network node that is trying to send time-critical data types, such as voice or streaming media.</p><p>The MAC layer can support two kinds of authentication to confirm that a network device is authorized to join the network: open authentication and shared key. When you configure your network, all the nodes in the network must use the same kind of authentication. The network supports all of these housekeeping functions in the MAC layer by exchanging (or trying to exchange) a series of control frames before it allows the higher layers to send data. It also sets several options on the network adapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The network supports two power modes: <a class="indexterm" id="idx-CHP-3-0185"/>continuous aware mode and power save <a class="indexterm" id="idx-CHP-3-0186"/>polling mode. In <span class="emphasis"><em>continuous aware mode</em></span>, the radio receiver is always on and consuming power. In <span class="emphasis"><em>power save polling mode</em></span>, the radio is idle much of the time, but it periodically polls the access point for new messages. As the name suggests, power save polling mode reduces the battery drain on portable devices such as laptop computers and PDAs.</p></li><li class="listitem"><p>The network contains the access control that keeps unauthorized users out of the network. A Wi-Fi network can use two forms of access control: the <span class="emphasis"><em>SSID</em></span> (the name of the network) and the <span class="emphasis"><em>MAC address</em></span> (a unique string of characters that identifies each network node). Each network node must have the SSID programmed into it or the access point will not associate with that node. An optional table of MAC addresses can restrict access to radios whose addresses are on the list. It controls the wired equivalent privacy (WEP) or <a class="indexterm" id="idx-CHP-3-0187"/>Wi-Fi protected <a class="indexterm" id="idx-CHP-3-0188"/>access (WPA) encryption function. WEP encryption can use either a 64-bit or a 128-bit encryption key to encode and decode data as it passes through the radio link; WPA uses a 128-bit key and a 48-bit initialization vector (see <a class="xref" href="ch12.html" title="Chapter 12. WIRELESS NETWORK SECURITY">Chapter 12</a> for information about using Wi-Fi encryption).</p></li></ul></div></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="other_control_layers"/>Other Control Layers</h2></div></div></div><p>All of the activity specified in the 802.11 standards takes place at the PHY and <a class="indexterm" id="idx-CHP-3-0189"/>MAC layers. The higher layers control things like addressing and routing, data integrity, syntax, and the format of the data contained inside each packet. It doesn't make any difference to these layers whether they're moving packets through wires, fiber optic lines, or radio links. Therefore, you can use a wireless network with any kind of LAN or other network protocol. The same radios can handle TCP/IP, Novell NetWare, and all the other <a class="indexterm" id="idx-CHP-3-0190"/>network protocols built into Windows, Unix, Macintosh, and other operating systems equally well.<a class="indexterm" id="idx-CHP-3-0191"/><a class="indexterm" id="idx-CHP-3-0192"/></p></div></div></div>
<div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="wi-fi_network_protocols"/>Wi-Fi Network Protocols</h1></div></div></div><p>The first Wi-Fi method to reach the marketplace was the <a class="indexterm" id="idx-CHP-3-0193"/>802.11b version in 1999, and the faster <a class="indexterm" id="idx-CHP-3-0194"/>802.11a followed about a year later, though the standards were released at the same time. By 2003, the IEEE standards group had developed the newer <a class="indexterm" id="idx-CHP-3-0195"/>802.11g specification that offered the best of both earlier types: It's as fast as 802.11a, and it has the greater signal range of 802.11b. The 802.11g specification is also backward compatible with 802.11b, so an older 802.11b-only network adapter will work (albeit at slower 802.11b speeds) with an 802.11g access point.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note-6"/>Note</h3><p><span class="emphasis"><em>There are also specifications designated as 802.11c, d, e and f, but they have to do with things like bridge operation and Quality of Service (QoS). Unless you're manufacturing your own base stations, you'll never have to worry about them</em></span>.</p></div><p>The latest Wi-Fi specification is <a class="indexterm" id="idx-CHP-3-0196"/>802.11n. It provides higher speed and better security than any of the earlier versions. You can expect 802.11n access points to also work with 802.11b and 802.11g network adapters.</p><p>When you're using a Wi-Fi system to connect to the Internet, it's important to remember that the data transfer speed across the wireless link is less relevant than you might expect. The maximum bandwidth of your incoming Wi-Fi signal can't be greater than the speed of the data that the access point receives. Even if the network's Wi-Fi base station can handle relatively high-speed signaling, it's probably connected to the Internet through a T-1, cable modem, or DSL line that has a maximum speed of 5Mbps or less, so that's the maximum speed that it can relay the signal to you.</p></div>
<div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="wi-fi_radio_frequencies"/>Wi-Fi Radio Frequencies</h1></div></div></div><p>By international agreement, a section of radio spectrum near 2.4 GHz is reserved for unlicensed industrial, scientific, <a class="indexterm" id="idx-CHP-3-0197"/>and medical (ISM) services, including spread spectrum wireless data networks. The 802.11b, 802.11g, and 802.11n services all use this band.<a class="indexterm" id="idx-CHP-3-0198"/></p><p>Another band of frequencies near 5.3 GHz is reserved for something called the <a class="indexterm" id="idx-CHP-3-0199"/>unlicensed national information infrastructure (<a class="indexterm" id="idx-CHP-3-0200"/>U-NII). The <a class="indexterm" id="idx-CHP-3-0201"/>Federal Communications Commission (FCC) in the United States and similar regulatory bodies in other countries permit wireless networking in both the ISM band and the U-NII band. 802.11a operates in the U-NII band.</p><p>However, the exact <a class="indexterm" id="idx-CHP-3-0202"/>frequency allocations for Wi-Fi services are slightly different from one part of the world to another; the authorities in different countries have assigned slightly different frequency bands. <a class="xref" href="ch03s03.html#unlicensed__ghz_spread_spectrum_frequenc" title="Table 3-1. Unlicensed 2.4 GHz Spread Spectrum Frequency Assignments">Table 3-1</a> shows the 2.4 GHz frequency assignments in several locations.</p><div class="table"><a id="unlicensed__ghz_spread_spectrum_frequenc"/><p class="title"><b>Table 3-1. Unlicensed 2.4 GHz Spread Spectrum Frequency Assignments</b></p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Unlicensed 2.4 GHz Spread Spectrum Frequency Assignments"><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Region</p></th><th style="border-bottom: 0.5pt solid ; "><p>ISM Frequency Band</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-3-0203"/>North America</p></td><td style="border-bottom: 0.5pt solid ; "><p>2.4000–2.4835 GHz</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-3-0204"/>Europe</p></td><td style="border-bottom: 0.5pt solid ; "><p>2.4000–2.4835 GHz</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-3-0205"/>France</p></td><td style="border-bottom: 0.5pt solid ; "><p>2.4465–2.4835 GHz</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-3-0206"/>Spain</p></td><td style="border-bottom: 0.5pt solid ; "><p>2.445–2.475 GHz</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-3-0207"/>Japan</p></td><td style=""><p>2.471–2.497 GHz</p></td></tr></tbody></table></div></div><br class="table-break"/><p>Just about every other country in the world also uses one of these bands. Those minor differences in frequency allocations are not particularly important (unless you plan to transmit across the border between France and Spain or something equally unlikely) because most networks operate entirely within a single country or region, and the normal signal range is usually just a few hundred feet. There's enough overlap among the various national standards to allow the same equipment to operate legally anywhere in the world. The set of channels your equipment can use is typically dictated by the country it was sold in, and it is usually set by the manufacturer.</p><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="wireless_channels"/>Wireless Channels</h2></div></div></div><p>The exact frequency that a particular wireless network uses is determined by its channel. In North America, Wi-Fi devices use 11 802.11b/g channels. Many other countries have authorized 13 channels, but Japan uses 14 channels, and only 4 are available in France. Fortunately, the entire world uses the same set of channel numbers, so channel 9 in New York uses exactly the same frequency as channel 9 in Tokyo or Paris. <a class="xref" href="ch03s03.html#wireless_ethernet_channel_assignments" title="Table 3-2. Wireless Ethernet Channel Assignments">Table 3-2</a> shows the channels used in different countries and regions.<a class="indexterm" id="idx-CHP-3-0208"/></p><div class="table"><a id="wireless_ethernet_channel_assignments"/><p class="title"><b>Table 3-2. Wireless Ethernet Channel Assignments</b></p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="Wireless Ethernet Channel Assignments"><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Channel</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><a class="indexterm" id="idx-CHP-3-0209"/>Frequency (GHz)</p></th><th style="border-bottom: 0.5pt solid ; "><p>Used In</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.412</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, <sup>[<a class="footnote" href="#ftn.CHP-3-FNOTE-1" id="CHP-3-FNOTE-1">a</a>]</sup>. EMEA,<sup>[<a class="footnote" href="#ftn.CHP-3-FNOTE-2" id="CHP-3-FNOTE-2">b</a>]</sup>. China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.417</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>3</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.422</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>4</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.427</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.432</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>6</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.437</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>7</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.442</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>8</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.447</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>9</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.452</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, Israel, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>10</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.457</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, France, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>11</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.462</p></td><td style="border-bottom: 0.5pt solid ; "><p>United States, EMEA, France, China, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>12</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.467</p></td><td style="border-bottom: 0.5pt solid ; "><p>EMEA, France, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>13</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2.472</p></td><td style="border-bottom: 0.5pt solid ; "><p>EMEA, France, Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>14</p></td><td style="border-right: 0.5pt solid ; "><p>2.484</p></td><td style=""><p>Japan</p></td></tr></tbody><tbody class="footnotes"><tr><td colspan="3"><div class="footnote"><p><sup>[<a class="para" href="#CHP-3-FNOTE-1" id="ftn.CHP-3-FNOTE-1">a</a>] </sup>Canada and some other countries in the Western Hemisphere use the same channel assignments as the United States</p></div><div class="footnote"><p><sup>[<a class="para" href="#CHP-3-FNOTE-2" id="ftn.CHP-3-FNOTE-2">b</a>] </sup><span class="emphasis"><em>EMEA</em></span> means <span class="emphasis"><em>Europe, Middle East</em></span>, and <span class="emphasis"><em>Africa</em></span>. France is part of the EMEA regulatory region, but the French government only permits Wi-Fi <a class="indexterm" id="idx-CHP-3-0210"/>usage on channels 10 through 14</p></div></td></tr></tbody></table></div></div><br class="table-break"/><p>You might have to set your network adapter to a different channel number when you take it abroad (if the adapter doesn't automatically detect a signal), but there's almost always a way to connect, assuming there's a network within range of your adapter. If you're not sure which channels to use in another country, consult the local regulatory authority for specific information. Alternatively, you can use channels 10 and 11, which are legal everywhere except Israel.<a class="indexterm" id="idx-CHP-3-0211"/></p></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="reducing_interference"/>Reducing Interference</h2></div></div></div><p>Note that the <a class="indexterm" id="idx-CHP-3-0212"/>frequency specified for each of those channels is actually the center frequency of a 22 MHz channel. Therefore, each channel overlaps with several other channels that are above and below it. The whole 2.4 GHz band only has space for three completely separate channels, so if your network runs on channel 4, for example, and your neighbor is using channel 5 or channel 6, each network will detect the other network's signals as interference. Both networks will work, but the performance (as reflected in the data transfer speed) will not be as good as it would be when the channels are more widely separated from one another.<a class="indexterm" id="idx-CHP-3-0213"/><a class="indexterm" id="idx-CHP-3-0214"/></p><p>To minimize this kind of interference, you should try to coordinate channel usage with other nearby network managers (your neighbors running their own home Wi-Fi networks count as network managers). If possible, each network should use channels that are at least 25 MHz or five channel numbers apart. If you're trying to eliminate <a class="indexterm" id="idx-CHP-3-0215"/>interference between two networks, use one high channel number and one low number. For three channels, your best choices are channels 1, 6, and 11, as shown in <a class="xref" href="ch03s03.html#channels_1_6_and_11_do_not_interfere_wit" title="Figure 3-1. Channels 1, 6, and 11 do not interfere with one another.">Figure 3-1</a>. For more than three networks, you'll have to put up with some amount of interference, but you can keep it to a minimum by assigning a new channel in the middle of an existing pair.</p><div class="figure"><a id="channels_1_6_and_11_do_not_interfere_wit"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject3_d1e2423"/><img alt="Channels 1, 6, and 11 do not interfere with one another." src="tagoreillycom20090210nostarchimages254211.png"/></div></div><p class="title"><b>Figure 3-1. Channels 1, 6, and 11 do not interfere with one another.</b></p></div><br class="figure-break"/><p>This all sounds more serious than it is likely to be on the ground. In practice, you can optimize the performance of your network by staying away from a channel that somebody else is using nearby, but even if you and your neighbor are on adjacent channels, your networks will probably work, although your connections might be a bit slower than they'd be on more widely separated channels. Unless your neighbor's network is extremely busy, you're likely to have more problems with interference from other devices using the 2.4 GHz band, such as cordless telephones and microwave ovens.</p><p>The 802.11a Wi-Fi specification uses a different range of <a class="indexterm" id="idx-CHP-3-0216"/>radio frequencies, as shown in <a class="xref" href="ch03s03.html#a_wi-fi_frequencies" title="Table 3-3. 802.11a Wi-Fi Frequencies">Table 3-3</a>. Each channel is 20 MHz wide, so similar rules about channel separation apply.</p><div class="table"><a id="a_wi-fi_frequencies"/><p class="title"><b>Table 3-3. 802.11a Wi-Fi Frequencies</b></p><div class="table-contents"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; " summary="802.11a Wi-Fi Frequencies"><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Channel Number</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Frequency in GHz</p></th><th style="border-bottom: 0.5pt solid ; "><p>Used In</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>34</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.17</p></td><td style="border-bottom: 0.5pt solid ; "><p>Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>36</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.18</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Europe, Singapore</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>38</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.19</p></td><td style="border-bottom: 0.5pt solid ; "><p>Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>40</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.20</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Europe, Singapore</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>42</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.21</p></td><td style="border-bottom: 0.5pt solid ; "><p>Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>44</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.22</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Europe, Singapore</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>46</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.23</p></td><td style="border-bottom: 0.5pt solid ; "><p>Japan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>48</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.24</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Europe, Singapore</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>52</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.26</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Taiwan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>56</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.28</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Taiwan</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>60</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5.30</p></td><td style="border-bottom: 0.5pt solid ; "><p>North America, Taiwan</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>64</p></td><td style="border-right: 0.5pt solid ; "><p>5.32</p></td><td style=""><p>North America, Taiwan</p></td></tr></tbody></table></div></div><br class="table-break"/><p>Choosing the operating channel is the network operator's responsibility. When you connect to an existing network, your computer or network adapter will automatically detect one or more Wi-Fi signals and allow you to choose the one you want to use. Most Wi-Fi adapters and network <a class="indexterm" id="idx-CHP-3-0217"/>interfaces can recognize more than one Wi-Fi protocol and configure the connection for the active signal. So, for example, if your computer finds both an 802.11a signal and an 802.11g signal, you can choose either one without the need to manually change the internal settings.</p><p>The 802.11 specifications and various national regulatory agencies (such as the FCC in the United States) have also set <a class="indexterm" id="idx-CHP-3-0218"/>limits on the amount of transmitter <a class="indexterm" id="idx-CHP-3-0219"/>power and antenna gain that a Wi-Fi device can use. This restriction is intended to limit the distance over which a network link can operate, and therefore it allows more networks to use the same channels without interference. We'll talk about methods for working around those power limits and extending the range of your wireless network without violating the law in <a class="xref" href="ch10.html" title="Chapter 10. LONG RANGE POINT-TO-POINT LINKS">Chapter 10</a>.</p></div></div>
<div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="wireless_network_devices"/>Wireless Network Devices</h1></div></div></div><p>After you have defined the data format and the <a class="indexterm" id="idx-CHP-3-0220"/>radio links, the next step is to set up a network structure. How do computers use the radios and the data format to actually exchange data?<a class="indexterm" id="idx-CHP-3-0221"/></p><p>Wi-Fi networks include two categories of radios: <a class="indexterm" id="idx-CHP-3-0222"/>network adapters and <a class="indexterm" id="idx-CHP-3-0223"/>access points. A <span class="emphasis"><em>network adapter</em></span> is connected to a computer or some other device, such as a printer, that exchanges data with a wireless network. An <span class="emphasis"><em>access point</em></span> is the base station for a wireless network, and is a bridge between the wireless network and a traditional wired network.</p><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="network_adapters"/>Network Adapters</h2></div></div></div><p>Wi-Fi network adapters can take several physical forms:<a class="indexterm" id="idx-CHP-3-0224"/></p><div class="variablelist"><dl><dt><span class="term"><span class="strong"><strong>Plug-in PC Cards that fit the PCMCIA sockets in most laptop computers</strong></span></span></dt><dd><p>To bypass the internal shielding in most computers, the built-in antennas and status lights in most wireless PC Card adapters extend about an inch beyond the opening of the card socket. Other PC Card adapters have sockets for <a class="indexterm" id="idx-CHP-3-0225"/>external antennas.<a class="indexterm" id="idx-CHP-3-0226"/><a class="indexterm" id="idx-CHP-3-0227"/></p></dd><dt><span class="term"><span class="strong"><strong>Internal network adapters on PCI cards that fit inside a desktop computer</strong></span></span></dt><dd><p>Most PCI adapters are actually PCMCIA sockets that allow a user to plug a PC Card into the back of the computer, but a few are built directly on the PCI expansion cards. As an alternative to a rear panel socket, separate PCMCIA sockets that fit a computer's external front panel drive bays are available from Actiontec and several other manufacturers.<a class="indexterm" id="idx-CHP-3-0228"/></p></dd><dt><span class="term"><span class="strong"><strong>External USB adapters</strong></span></span></dt><dd><p>USB adapters are often a better choice than PC Cards or internal adapters because they're easier to install, and it's almost always easier to move an adapter at the end of a cable to a position with the best possible radio signal path to and from the nearest access point.<a class="indexterm" id="idx-CHP-3-0229"/><a class="indexterm" id="I_indexterm3_d1e2680"/></p></dd><dt><span class="term"><span class="strong"><strong>Internal wireless adapters built into laptop computers</strong></span></span></dt><dd><p>Internal adapters are modules that plug into the computer's motherboard. They present the same appearance to the operating system as an external PCMCIA card. The antennas for built-in radios are usually hidden inside the computer's fold-over clamshell screen.<a class="indexterm" id="idx-CHP-3-0230"/></p></dd><dt><span class="term"><span class="strong"><strong>Plug-in adapters for PDAs and other handheld devices</strong></span></span></dt><dd><p>PDAs and other handheld devices often have expansion ports that can take one of several types of expansion cards. Typically, they present the same appearance to the operating system as a larger expansion card in a laptop. It is rare for adapters for PDAs and handhelds to have antenna jacks.<a class="indexterm" id="idx-CHP-3-0231"/><a class="indexterm" id="idx-CHP-3-0232"/></p></dd><dt><span class="term"><span class="strong"><strong>Internal network interfaces built into other devices, such as Internet-capable telephone sets and office or household appliances</strong></span></span></dt><dd><p>Today, printers, digital cameras, Internet radios, voice over Internet (VoIP) telephones, home entertainment systems, and many other devices can all use Wi-Fi links to send and receive images, audio, and other forms of data. In the future, sophisticated household appliances will use Wi-Fi to transmit status messages when your clothes are dry or your roast has reached its ideal temperature.<a class="indexterm" id="idx-CHP-3-0233"/><a class="indexterm" id="idx-CHP-3-0234"/></p></dd></dl></div><p>A <a class="indexterm" id="idx-CHP-3-0235"/>network adapter should work with any operating system as long as a driver for that adapter is available. In practice, that means you can find Windows drivers for just about everything, but you will have fewer choices if you're using a computer running Mac OS, Linux, or Unix. You can find pointers to sources for Linux and Unix drivers in <a class="xref" href="ch07.html" title="Chapter 7. WI-FI FOR LINUX AND UNIX">Chapter 7</a>, and information about using Wi-Fi with a Macintosh in <a class="xref" href="ch08.html" title="Chapter 8. WI-FI FOR MAC">Chapter 8</a>.</p><div class="sect3" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="adapters_for_multiple_network_types"/>Adapters for Multiple Network Types</h3></div></div></div><p>In some situations, you might want to use different kinds of network connections in different places. For example, when your laptop is running in your office, you will want it to connect to your LAN through a Wi-Fi link so you can use the company's high-speed Internet account and exchange files and messages with other local computers. But when you take the same computer on the road, you want to connect to the Internet through a cellular data service. Therefore, it would be very convenient if your computer could automatically choose the best connection for your current location.<a class="indexterm" id="idx-CHP-3-0236"/></p><p>Today, the only way to change network types is to manually choose the software that controls each type of network; you might also have to physically remove one network adapter and insert another one. But the makers of laptop computers and network interface adapters are working on this problem, and several of them will offer a single network adapter and control software in the near future that detects more than one type of wireless service and either offers an onscreen choice or automatically selects the best connection for you.</p><p>When you install one of these multiple-service adapters, you can set up your own list of priorities; for example, you might want it to look for your home or office LAN first, and if that's not available, to set up a connection to your cellular data account.</p></div></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="access_points"/>Access Points</h2></div></div></div><p><a class="indexterm" id="idx-CHP-3-0237"/>Access points are often combined with other network functions. It's quite possible to find a stand-alone access point that just plugs into a wired LAN through a data cable, but there are plenty of other options. Common access point configurations include:<a class="indexterm" id="idx-CHP-3-0238"/></p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Simple <a class="indexterm" id="idx-CHP-3-0239"/>base stations with a bridge to an Internet port for connection to a LAN</p></li><li class="listitem"><p>Base stations that include a switch, hub, or router with one or more wired Ethernet ports along with the wireless access point</p></li><li class="listitem"><p>Broadband <a class="indexterm" id="idx-CHP-3-0240"/>routers that provide a bridge between a cable modem or DSL port and the wireless access point</p></li><li class="listitem"><p>Software access points that use one of the wireless network interface adapters in your computer as the base station</p></li><li class="listitem"><p>Residential gateways that support a limited number of operating channels</p></li></ul></div><p>The physical design of access points varies from one manufacturer to another. Some look like industrial <a class="indexterm" id="idx-CHP-3-0241"/>devices that were intended to be placed out of sight on the floor or mounted on an inconspicuous wall, but others (especially the ones targeted at the home network market) have swooshy, "aerodynamic" shapes that appear to have been designed for the top of a coffee table or, more likely, next to a desktop computer. Some have internal antennas, others (like the one in <a class="xref" href="ch03s04.html#a_typical_wi-fi_access_point_this_one_fr" title="Figure 3-2. A typical Wi-Fi access point, this one from Linksys">Figure 3-2</a>) have short vertical whips permanently attached, and still others have connectors for external antennas (which may or may not be supplied with the access point). Regardless of its size and shape, every access point includes a radio that sends and receives messages and data between network stations and an Ethernet port that connects to a wired network.</p><div class="figure"><a id="a_typical_wi-fi_access_point_this_one_fr"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject3_d1e2801"/><img alt="A typical Wi-Fi access point, this one from Linksys" src="tagoreillycom20090210nostarchimages254647.png.jpg"/></div></div><p class="title"><b>Figure 3-2. A typical Wi-Fi access point, this one from Linksys</b></p></div><br class="figure-break"/></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="building_a_network"/>Building a Network</h2></div></div></div><p>Wi-Fi networks operate in two modes: <a class="indexterm" id="idx-CHP-3-0242"/>ad hoc networks and <a class="indexterm" id="idx-CHP-3-0243"/>infrastructure networks. As the name suggests, an ad hoc network is usually temporary. An <span class="emphasis"><em>ad hoc network</em></span> is a self-contained group of stations with no connection to a larger LAN or the Internet. It includes two or more wireless stations with no access point or connection to the rest of the world. <a class="indexterm" id="idx-CHP-3-0244"/>Ad hoc networks are also called <span class="emphasis"><em>peer-to-peer networks</em></span> and <span class="emphasis"><em>independent basic service sets (IBSS)</em></span>. <a class="xref" href="ch03s04.html#an_ad_hoc_wireless_network_with_three_st" title="Figure 3-3. An ad hoc wireless network with three stations">Figure 3-3</a> shows a simple ad hoc network.<a class="indexterm" id="idx-CHP-3-0245"/><a class="indexterm" id="idx-CHP-3-0246"/><a class="indexterm" id="idx-CHP-3-0247"/><a class="indexterm" id="idx-CHP-3-0248"/><a class="indexterm" id="idx-CHP-3-0249"/></p><div class="figure"><a id="an_ad_hoc_wireless_network_with_three_st"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject3_d1e2855"/><img alt="An ad hoc wireless network with three stations" src="tagoreillycom20090210nostarchimages254493.png.jpg"/></div></div><p class="title"><b>Figure 3-3. An ad hoc wireless network with three stations</b></p></div><br class="figure-break"/><p><span class="emphasis"><em>Infrastructure networks</em></span> have one or more access points that are almost always connected to a wired network. Each wireless station exchanges messages and data with the access point, which relays them to other nodes on the wireless network or the wired LAN. Any network that requires a wired connection through an access point to a printer, a fileserver, or an Internet gateway is an infrastructure network. <a class="xref" href="ch03s04.html#a_simple_infrastructure_network" title="Figure 3-4. A simple infrastructure network">Figure 3-4</a> shows an infrastructure network.<a class="indexterm" id="idx-CHP-3-0250"/></p><div class="figure"><a id="a_simple_infrastructure_network"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject3_d1e2872"/><img alt="A simple infrastructure network" src="tagoreillycom20090210nostarchimages254075.png.jpg"/></div></div><p class="title"><b>Figure 3-4. A simple infrastructure network</b></p></div><br class="figure-break"/><p>An infrastructure network with just one base station is also called a <span class="emphasis"><em>basic service set (BSS)</em></span>. When the <a class="indexterm" id="idx-CHP-3-0251"/>wireless network uses two or more access points, the network structure is an <span class="emphasis"><em>extended service set (ESS)</em></span>. Recall that the technical name for a network ID is the <span class="emphasis"><em>SSID</em></span>. You might also see it called a <span class="emphasis"><em>BSSID</em></span> if the network has just one access point or an <span class="emphasis"><em>ESSID</em></span> when it has two or more access points.<a class="indexterm" id="idx-CHP-3-0252"/><a class="indexterm" id="idx-CHP-3-0253"/><a class="indexterm" id="idx-CHP-3-0254"/><a class="indexterm" id="idx-CHP-3-0255"/></p><p>A network with more than one access point (an ESS) creates several new complications. First, the network must include a way for only one base station to handle data from a particular station, even if the station is within range of more than one base station. And if the station is moving during a network session, or if some kind of local interference crops up near the first access point, the network might have to hand off the connection from one access point to another. Wi-Fi networks handle this problem by associating a station with only one access point at a time and ignoring the signals from stations that are not associated. When the signal fades at one access point and improves at another, or when the amount of traffic forces the network to rebalance the load, the network will reassociate the station with a new access point that can provide acceptable service. If you think this sounds a lot like the way a cellular telephone system handles <a class="indexterm" id="idx-CHP-3-0256"/>roaming, you're absolutely correct; even the terminology is the same—it's also called <span class="emphasis"><em>roaming</em></span>.</p></div><div class="sect2" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="public_and_private_networks"/>Public and Private Networks</h2></div></div></div><p>Wi-Fi is an unlicensed radio service, and that means that anybody can set up a base station (<a class="indexterm" id="idx-CHP-3-0257"/>licensed radio services typically require an expensive license to operate a radio at a specific location for a fixed number of years). Some of these base stations limit access to a specific set of users, but others allow any computer within range of the radio signal to set up a connection.<a class="indexterm" id="idx-CHP-3-0258"/><a class="indexterm" id="idx-CHP-3-0259"/></p><p>When your computer searches for a Wi-Fi signal, it's likely that it will find more than one active network; some of them might be private networks, and others might be accessible to anybody who wants to use them. Public access points, also called <span class="emphasis"><em>hot spots</em></span>, allow any nearby computer to establish a connection; some require paid accounts, but many others, especially in places like schools and libraries, are free (although they might require a login name and password).<a class="indexterm" id="idx-CHP-3-0260"/></p><p>As a general rule, most private networks should have one or more security features, such as encryption or MAC address restriction that locks out unauthorized users, but it's not uncommon to find home and business networks that are wide open because the owner never bothered to turn on the security tools. We'll explain how to use MAC address restriction and other security tools in <a class="xref" href="ch12.html" title="Chapter 12. WIRELESS NETWORK SECURITY">Chapter 12</a>.<a class="indexterm" id="I_indexterm3_d1e2947"/></p></div></div>
<div class="sect1" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="putting_it_all_together"/>Putting It All Together</h1></div></div></div><p>The radio link, the data structure, and the network architecture are the three essential elements that form the internal plumbing of a Wi-Fi network. Like the components of most other networks (and most plumbing systems, for that matter), these elements should be entirely invisible to the people using the network—if users can send and receive messages, read files, and perform other activities on the network, they should never have to worry about the low-level details.</p><p>Of course, this assumes that it always works exactly as it's supposed to work, and users never have to call a network help desk to ask why they can't read their email. Now that you have read this chapter, you probably know more about the way your wireless LAN moves messages from here to there than 95 percent of the people who use Wi-Fi networks. And you have a good chance of understanding the support person who tells you to make sure you're using channel 11, or that you need to change your preamble length, or that your adapter is operating in infrastructure mode.</p></div></body></html>