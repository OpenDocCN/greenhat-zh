<html><head></head><body>

<div class="calibre1"><div class="calibre1"><a name="mediawiki_1.11.1" class="calibre8" id="mediawiki_1.11.1"/>
<div class="calibre24" id="calibre_pb_0"/><h2 id="title-ID0EAFPM" class="docPrefaceTitle">Chapter 13. MEDIAWIKI 1.11.1</h2>
<h4 class="calibre32"><a class="calibre2" target="_blank" href="HTTP://MEDIAWIKI.ORG">HTTP://MEDIAWIKI.ORG</a></h4>
<a name="summary-id12" class="calibre8" id="summary-id12"/>
<h3 class="docSection1Title" id="-100000">13.1. SUMMARY</h3>
<p class="docText1"><a name="MediaWiki is" class="calibre8" id="MediaWiki is"/>MediaWiki is an open source wiki implementation written in PHP (PHP: Hypertext Preprocessor). It utilizes a MySQL database to store content. <span class="docEmphasis1">Wikiwiki</span><a name="Hawaiian word" class="calibre8" id="Hawaiian word"/> is a Hawaiian word meaning <span class="docEmphasis1">quick</span>. In a technology sense, a <span class="docEmphasis1">wiki</span><a name="content is" class="calibre8" id="content is"/> is a collaborative website where content is modified by users. MediaWiki currently powers Wikipedia, the popular free-content encyclopedia written by volunteers.<a name="IDX-CHP-13-0204" class="calibre8" id="IDX-CHP-13-0204"/><a name="IDX-CHP-13-0205" class="calibre8" id="IDX-CHP-13-0205"/><a name="IDX-CHP-13-0206" class="calibre8" id="IDX-CHP-13-0206"/><a name="IDX-CHP-13-0207" class="calibre8" id="IDX-CHP-13-0207"/><a name="IDX-CHP-13-0208" class="calibre8" id="IDX-CHP-13-0208"/><a name="IDX-CHP-13-0209" class="calibre8" id="IDX-CHP-13-0209"/><a name="IDX-CHP-13-0210" class="calibre8" id="IDX-CHP-13-0210"/><a name="IDX-CHP-13-0211" class="calibre8" id="IDX-CHP-13-0211"/></p>
<p class="docText1"><a name="users the" class="calibre8" id="users the"/>Wikis allow users the ability to co-author content on pages without the need for HTML skills or administrative privileges. Editing a MediaWiki page is simpler than editing a typical HTML page. This is made possible by the <span class="docEmphasis1">Wikitext</span><a name="simplified syntax" class="calibre8" id="simplified syntax"/> format, which uses a simplified syntax and an easy-to-understand word processor-like toolbar. When the user submits an edit to a wiki page, MediaWiki saves the change along with the previous version. This allows for manual reversion, which is useful for fighting vandalism and correcting inaccuracies found by other users.</p>
<p class="docText1"><a name="from its" class="calibre8" id="from its"/>The software now known as MediaWiki was nameless from its creation in January 2002 until its public release in mid-2003. Magnus Manske, a University of Cologne student, wrote it specifically for Wikipedia to replace the Perl-based UseModWiki engine. The program he developed stored content in a relational database (i.e., MySQL) that provided more functionality than the traditional flat filesystem. Lee Daniel Crocker later rewrote the software to address scalability problems. Brion Vibber eventually took over as lead developer, and in mid-2003 the Wikimedia Foundation named the project <span class="docEmphasis1">MediaWiki</span> and released the software to the public.<a name="IDX-CHP-13-0212" class="calibre8" id="IDX-CHP-13-0212"/></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="resources-id12" class="calibre8" id="resources-id12"/>
<h3 class="docSection1Title" id="-100000">13.2. RESOURCES</h3>
<p class="docText1"><span class="b"><a name="MediaWiki Documentation" class="calibre8" id="MediaWiki Documentation"/>MediaWiki Documentation</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://www.mediawiki.org/wiki/Documentation">http://www.mediawiki.org/wiki/Documentation</a></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="required-id12" class="calibre8" id="required-id12"/>
<h3 class="docSection1Title" id="-100000">13.3. REQUIRED</h3>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/><a name="FreeBSD " class="calibre8" id="FreeBSD "/> FreeBSD 7.0-RELEASE (see "<a class="calibre2" href="freebsd_7.0_split_000.html#freebsd_7.0">FreeBSD 7.0</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/><a name="collection " class="calibre8" id="collection "/> Updated ports collection (see "<a class="calibre2" href="freebsd_ports_collection.html#freebsd_ports_collection">FreeBSD Ports Collection</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> Apache HTTP server (see "<a class="calibre2" href="apache_http_server_2.2.8_split_000.html#apache_http_server_2.2.8">Apache HTTP Server 2.2.8</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> PHP 5 (see "<a class="calibre2" href="php_5.2.5.html#php_5.2.5">PHP 5.2.5</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> MySQL 5 (see "<a class="calibre2" href="mysql_server_5.0.51.html#mysql_server_5.0.51">MySQL Server 5.0.51</a>")</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> Internet connection</p>
<p class="docText1"><img border="0" id="" src="OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg" alt="" class="calibre33"/> Registered domain name</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="preparation-id12" class="calibre8" id="preparation-id12"/>
<h3 class="docSection1Title" id="-100000">13.4. PREPARATION</h3>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="Become the" class="calibre8" id="Become the"/>Become the superuser.<a name="IDX-CHP-13-0213" class="calibre8" id="IDX-CHP-13-0213"/></p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="database in" class="calibre8" id="database in"/>Create a database in MySQL named <span class="docEmphasis1">mediawiki</span><a name="and assign" class="calibre8" id="and assign"/>. Create a user named mediawiki and assign full privileges to this user like this:</p><pre class="calibre30"># <b class="calibre28">mysql -u root -p</b>
mysql&gt; <b class="calibre28">create database mediawiki;</b>
mysql&gt; <b class="calibre28">grant all on mediawiki.* to</b>
    -&gt; <b class="calibre28">mediawiki@localhost identified by '</b><span class="docEmphBoldItalic">password</span><b class="calibre28">';</b>
mysql&gt; <b class="calibre28">quit</b></pre>
<p class="docText1">Replace <tt class="calibre20"><i class="docEmphasis1">password</i></tt><a name="password of" class="calibre8" id="password of"/> with a password of your choice (the single quotes are required). You'll need this password later.</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="install-id12" class="calibre8" id="install-id12"/>
<h3 class="docSection1Title" id="-100000">13.5. INSTALL</h3>
<p class="docText1"><a name="Enter the" class="calibre8" id="Enter the"/>Enter the following commands to launch the MediaWiki installation:</p>
<pre class="calibre30"># <b class="calibre28">cd /usr/ports/www/mediawiki</b>
# <b class="calibre28">make config ; make install clean</b></pre>
<p class="docText1"><a name="will appear" class="calibre8" id="will appear"/>A menu will appear with options for mediawiki. We will leave them at their defaults, so press [tab] to select <span class="b">OK</span> and then press [enter] to continue.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="configure-id12" class="calibre8" id="configure-id12"/>
<h3 class="docSection1Title" id="-100000">13.6. CONFIGURE</h3>
<p class="docText1"><a name="Once the" class="calibre8" id="Once the"/>Once the installation process is complete, it's time to configure MediaWiki for use on your system.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="Apache configuration" class="calibre8" id="Apache configuration"/>Create a MediaWiki-specific Apache configuration file. This points Apache to the correct location of the MediaWiki files and makes administration easier by keeping MediaWiki-specific options separate from the main <span class="docEmphasis1">httpd.conf</span> file. By default, Apache searches the <span class="docEmphasis1">/usr/local/etc/apache22/Includes</span><a name="configuration file" class="calibre8" id="configuration file"/> directory for configuration files. Create the configuration file for MediaWiki:</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/apache22/Includes/mediawiki.conf</b></pre>
<p class="docText1"><a name="the following" class="calibre8" id="the following"/>and add the following lines:</p><pre class="calibre30">Alias /<tt class="calibre20"><i class="docEmphasis1">mediawiki</i></tt> "/usr/local/www/mediawiki/"

&lt;Directory "/usr/local/www/mediawiki/"&gt;
Options Indexes FollowSymLinks
AllowOverride None</pre><br class="calibre1"/>
<pre class="calibre30">Order allow,deny
Allow from all
&lt;/Directory&gt;</pre><br class="calibre1"/>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> By default, MediaWiki is set up to be a subdirectory of your webserver's root site. This means you would enter <a class="calibre2" target="_blank" href="http://host.example.com/mediawiki">http://host.example.com/mediawiki</a> into your web browser. If you would like to change the default directory, replace <tt class="calibre20">mediawiki</tt> (in italics, following <tt class="calibre20"><i class="docEmphasis1">Alias</i></tt> in the code added to the configuration file) with a different name.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1"><a name="Apache to" class="calibre8" id="Apache to"/>Save and exit. Restart Apache to commit the changes:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/apache22 restart</b></pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Open <a class="calibre2" target="_blank" href="http://host.example.com/mediawiki">http://host.example.com/mediawiki</a><a name="your directory" class="calibre8" id="your directory"/> in your favorite web browser (substitute your hostname and your directory if you modified it).</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="with a" class="calibre8" id="with a"/>You should see the MediaWiki logo along with a link titled <span class="docEmphasis1">set up the wiki</span><a name="page will" class="calibre8" id="page will"/>. Click this link to begin the configuration process. The MediaWiki 1.11.1 Installation page will list some details about your server's environment.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="this page" class="calibre8" id="this page"/>There are about 20 different configuration options on this page. Most options are explained well. The following options should be entered carefully to ensure proper functionality of the wiki:</p><dl class="docList2">
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">Wiki name</span></span></p></dt>
<dd class="calibre36"><p class="docText1"><a name="to set" class="calibre8" id="to set"/>Be sure to set a name for your wiki here. Do not use the name <span class="docEmphasis1">MediaWiki</span><a name="or your" class="calibre8" id="or your"/> or your wiki will advertise itself generically as <span class="docEmphasis1">MediaWiki</span><a name="something specific" class="calibre8" id="something specific"/> instead of something specific.</p></dd>
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">Admin username</span></span></p></dt>
<dd class="calibre36"><p class="docText1"><a name="you wish" class="calibre8" id="you wish"/>Choose the username and password you wish to assign to the Administrator of the wiki (remember or record this information, as you will need it later to maintain the site).</p></dd>
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">SQL server host</span></span></p></dt>
<dd class="calibre36"><p class="docText1"><a name="be" class="calibre8" id="be"/>This should be <span class="docEmphasis1">localhost</span><a name="server resides" class="calibre8" id="server resides"/> unless your MySQL server resides on another system.</p></dd>
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">Database name</span></span></p></dt>
<dd class="calibre36"><p class="docText1">Set this to <span class="docEmphasis1">mediawiki</span>.</p></dd>
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">DB username</span></span></p></dt>
<dd class="calibre36"><p class="docText1">Set this to <span class="docEmphasis1">mediawiki</span>.</p></dd>
<dt class="calibre1"><br class="calibre1"/><p class="calibre23"><span class="docPubcolor"><span class="b">DB password</span></span></p></dt>
<dd class="calibre36"><p class="docText1"><a name="you created" class="calibre8" id="you created"/>Set this to the password you assigned when you created the database (see "<a class="calibre2" href="preparation.html#preparation">Preparation</a>").</p></dd>
</dl></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="you have" class="calibre8" id="you have"/>When you are satisfied with the options you have set, click <span class="b">Install Media Wiki!</span> at the bottom of the page to continue.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="last line" class="calibre8" id="last line"/>You should see comments pertaining to the options you set. The last line should say <tt class="calibre20">Installation successful!</tt>.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Move the <span class="docEmphasis1">LocalSettings.php</span><a name="permissions should" class="calibre8" id="permissions should"/> file into the main MediaWiki directory. The correct permissions should be set to avoid exposure of the MySQL database password it contains. We will also remove the <span class="docEmphasis1">config</span><a name="eliminate security" class="calibre8" id="eliminate security"/> directory to eliminate security risks associated with its existence:<a name="IDX-CHP-13-0214" class="calibre8" id="IDX-CHP-13-0214"/></p><pre class="calibre30"># <b class="calibre28">cd /usr/local/www/mediawiki</b>
# <b class="calibre28">mv config/LocalSettings.php .</b>
# <b class="calibre28">chmod 640 LocalSettings.php</b>
# <b class="calibre28">rm -r config</b></pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="You can" class="calibre8" id="You can"/>You can access your wiki with a web browser at <a class="calibre2" target="_blank" href="http://host.example.com/mediawiki">http://host.example.com/mediawiki</a> (substitute your server's hostname).</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="administration-id1" class="calibre8" id="administration-id1"/>
<h3 class="docSection1Title" id="-100000">13.7. ADMINISTRATION</h3>
<p class="docText1"><a name="Use this" class="calibre8" id="Use this"/>Use this URL to administer your MediaWiki installation (substitute your server's hostname):</p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://host.example.com/mediawiki">http://host.example.com/mediawiki</a></p>
<p class="docText1"><a name="MediaWiki Main" class="calibre8" id="MediaWiki Main"/>At the MediaWiki Main Page, click <span class="b">log in</span><a name="username and" class="calibre8" id="username and"/> (in the upper-right corner), and enter your Admin username and password to access the Administrator account.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="config_files-id12" class="calibre8" id="config_files-id12"/>
<h3 class="docSection1Title" id="-100000">13.8. CONFIG FILES</h3>
<p class="docText1"><span class="b">/usr/local/www/mediawiki/LocalSettings.php</span></p>
<p class="docText1"><a name="This file" class="calibre8" id="This file"/>This file contains configuration data recorded during the installation script. It may be modified with a text editor.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="notes-id8" class="calibre8" id="notes-id8"/>
<h3 class="docSection1Title" id="-100000">13.9. NOTES</h3>
<p class="docText1"><a name="You can" class="calibre8" id="You can"/>You can edit the logo in the upper-left corner of the wiki by editing the <span class="docEmphasis1">LocalSettings.php</span><a name="line to" class="calibre8" id="line to"/> file. Add a line to the bottom of the file that contains the following statement (substitute your hostname and image filename):</p>
<pre class="calibre30">$wgLogo = "http://host.example.com/logo.gif";</pre>
</div></div>

</body></html>