- en: Introduction
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages860138.png.jpg)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages860138.png.jpg)'
- en: 'As you are now reading a book on Ruby, I think it is safe to assume you don’t
    need me to persuade you of the merits of the Ruby language. Instead, I’ll take
    the somewhat unconventional step of starting with a warning: Many people are attracted
    to Ruby by its simple syntax and its ease of use. They are wrong. Ruby’s syntax
    may *look* simple at first sight, but the more you get to know the language, the
    more you will realize that it is, on the contrary, extremely complex. The plain
    fact of the matter is that Ruby has a number of pitfalls just waiting for unwary
    programmers to drop into.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 由于你现在正在阅读一本关于 Ruby 的书，我认为可以假设你不需要我向你证明 Ruby 语言的优点。相反，我将采取一种多少有些非传统的步骤，从警告开始：许多人被
    Ruby 的简单语法和易用性所吸引。他们错了。Ruby 的语法乍一看可能 *看起来* 很简单，但随着你对语言的了解越来越深，你将越来越意识到它实际上是非常复杂的。简单的事实是，Ruby
    有许多陷阱等待着粗心大意的程序员跌入。
- en: In this book, it is my aim to guide you safely over the pitfalls and lead you
    through the choppy waters of Ruby’s syntax and class libraries. In the process,
    I’ll be exploring both the smooth, well-paved highways and the gnarlier, bumpy
    little byways of Ruby. By the end of the journey, you should be able to use Ruby
    safely and effectively without getting caught by unexpected hazards along the
    way.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我的目标是引导你安全地越过陷阱，带领你穿越 Ruby 语法和类库的波涛汹涌的水域。在这个过程中，我将探索 Ruby 的平坦、铺好的高速公路和崎岖不平的小路。到旅程结束时，你应该能够安全有效地使用
    Ruby，而不会在途中遇到意外的危险。
- en: '*The Book of Ruby* describes versions 1.8.*x* and 1.9.*x* of the Ruby language.
    In most respects, Ruby 1.8 and 1.9 are very similar, and most programs written
    for one version will run unmodified in the other. There are important exceptions
    to this rule, however, and these are noted in the text. Ruby 1.9 may be regarded
    as a stepping stone toward Ruby 2.0\. At the time of writing, a release date for
    Ruby 2.0 has not been announced. Even so, on the basis of currently available
    information, I anticipate that most (or all) of the information on Ruby 1.9 in
    this book should also apply to Ruby 2.0.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '*《Ruby 编程宝典》* 描述了 Ruby 语言的 1.8.*x* 和 1.9.*x* 版本。在大多数方面，Ruby 1.8 和 1.9 非常相似，为其中一个版本编写的程序在另一个版本中无需修改即可运行。然而，这个规则有一些重要的例外，这些例外在文本中都有说明。Ruby
    1.9 可以看作是通往 Ruby 2.0 的一个过渡。在撰写本文时，Ruby 2.0 的发布日期尚未公布。即便如此，基于目前可用的信息，我预计本书中关于 Ruby
    1.9 的大部分（或全部）信息也应适用于 Ruby 2.0。'
- en: What Is Ruby?
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是 Ruby？
- en: Ruby is a cross-platform interpreted language that has many features in common
    with other “scripting” languages such as Perl and Python. It has an easily readable
    type of syntax that looks somewhat Pascal-like at first sight. It is thoroughly
    object-oriented and has a good deal in common with the great-granddaddy of “pure”
    object-oriented languages, Smalltalk. It has been said that the languages that
    most influenced the development of Ruby were Perl, Smalltalk, Eiffel, Ada, and
    Lisp. The Ruby language was created by Yukihiro Matsumoto (commonly known as Matz),
    and it was first released in 1995.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Ruby 是一种跨平台的解释型语言，它具有与其他“脚本”语言（如 Perl 和 Python）许多共同特征。它的语法易于阅读，乍一看有点像 Pascal
    语言。它是彻底面向对象的，并且与“纯”面向对象语言的鼻祖 Smalltalk 有很多共同之处。据说，对 Ruby 的发展影响最大的语言是 Perl、Smalltalk、Eiffel、Ada
    和 Lisp。Ruby 语言是由 Yukihiro Matsumoto（通常被称为 Matz）创建的，并于 1995 年首次发布。
- en: What Is Rails?
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是 Rails？
- en: Over the past few years, much of the excitement surrounding Ruby can be attributed
    to a web development framework called Rails—popularly known as *Ruby on Rails*.
    Rails is an impressive framework, but it is not the be-all, end-all of Ruby. Indeed,
    if you were to leap right into Rails development without first mastering Ruby,
    you might find that you end up creating applications that you don’t even understand.
    (This is all too common among Ruby on Rails novices.) Understanding Ruby is a
    necessary prerequisite for understanding Rails. You’ll look at Rails in [Chapter 19](ch19.html
    "Chapter 19. Ruby on Rails").
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去几年中，围绕 Ruby 的许多兴奋之处可以归因于一个名为 Rails 的 Web 开发框架——通常被称为 *Ruby on Rails*。Rails
    是一个令人印象深刻的框架，但它并不是 Ruby 的全部。实际上，如果你在没有首先掌握 Ruby 的情况下直接跳入 Rails 开发，你可能会发现你最终创建的应用程序连你自己都不理解。（这在
    Ruby on Rails 新手中非常普遍。）理解 Ruby 是理解 Rails 的必要前提。你将在第 19 章（ch19.html "第 19 章。Ruby
    on Rails"）中了解 Rails。
- en: Matters of Ruby Style
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Ruby 风格问题
- en: Some Ruby programmers have very fixed—or even obsessive—views on what constitutes
    a “Ruby style” of programming. Some, for example, are passionately wedded to the
    idea that `method_names_use_underscores` while `variableNamesDoNot`. The style
    of naming in which separate words are indicated by capital letters `likeThis`
    is called *camel case*—and that is the last time it will be mentioned in this
    book.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 一些Ruby程序员对“Ruby风格”编程的构成有着非常固定——甚至可以说是强迫性的——看法。例如，有些人热情地坚持认为`method_names_use_underscores`而`variableNamesDoNot`。将单词分开表示的命名风格被称为*驼峰式*——而且这是这本书中最后一次提到这一点。
- en: I have never understood why people get so worked up about naming conventions.
    You like underscores, I can’t stand them; you say po_ta_toes, I say poTaToes.
    As far as I am concerned, the way in which you choose to write the names of identifiers
    in Ruby is of no interest to anyone but you or your programming colleagues.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我从未理解为什么人们对命名约定如此激动。你喜欢下划线，我无法忍受；你说po_ta_toes，我说poTaToes。在我看来，你选择在Ruby中编写标识符名称的方式对任何人都没有兴趣，除了你或你的编程同事。
- en: That is not to say that I have no opinions on programming style. On the contrary,
    I have very strong opinions. In my view, good programming style has nothing to
    do with naming conventions and everything to do with good code structure and clarity.
    Language elements such as parentheses, for instance, are important. Parentheses
    clarify code and avoid ambiguity that, in a highly dynamic language such as Ruby,
    can mean the difference between a program that works as you expect and one that
    is full of surprises (also known as *bugs*). For more on this, refer to the index
    entries on “ambiguity” and “parentheses.”
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 这并不是说我对编程风格没有看法。相反，我有着非常强烈的看法。在我看来，良好的编程风格与命名约定无关，而与良好的代码结构和清晰度有关。例如，括号这样的语言元素很重要。括号可以澄清代码，避免在像Ruby这样的高度动态语言中可能意味着程序按预期工作或充满惊喜（也称为*错误*）的歧义。关于这一点，请参阅“歧义”和“括号”的索引条目。
- en: In more than two decades of programming, one thing I have learned through bitter
    experience is that the most important characteristics of well-written code are
    clarity and lack of ambiguity. Code that is easy to understand and easy to debug
    is also likely to be easier to *maintain*. If adopting certain naming conventions
    helps you achieve that goal, that’s fine. If not, that’s fine too. *The Book of
    Ruby* does not preach on matters of style.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在超过二十年的编程生涯中，我通过痛苦的教训学到的一点是，编写良好代码最重要的特性是清晰性和缺乏歧义。易于理解和调试的代码也更有可能易于*维护*。如果你通过采用某些命名约定来实现这一目标，那很好。如果你做不到，那也很好。“Ruby圣经”并不宣扬风格问题。
- en: How to Read This Book
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何阅读这本书
- en: The book is divided into bite-sized chunks. Each chapter introduces a theme
    that is subdivided into subtopics. Each programming topic is accompanied by one
    or more small, self-contained, ready-to-run Ruby programs.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本书分为小块。每一章介绍一个主题，该主题被细分为子主题。每个编程主题都伴随着一个或多个小型、自包含、可立即运行的Ruby程序。
- en: If you want to follow a well-structured “course,” read each chapter in sequence.
    If you prefer a more hands-on approach, you can run the programs first and refer
    to the text when you need an explanation. If you already have some experience
    with Ruby, feel free to cherry-pick topics in any order you find useful. There
    are no monolithic applications in this book, so you don’t have to worry you might
    lose the plot if you read the chapters out of order!
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要遵循一个结构良好的“课程”，请按顺序阅读每一章。如果你更喜欢更实用的方法，可以先运行程序，并在需要解释时参考文本。如果你已经有一些Ruby经验，你可以自由地按任何你认为有用的顺序挑选主题。这本书中没有庞大的应用程序，所以你不必担心如果你不按顺序阅读章节可能会迷失方向！
- en: Digging Deeper
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 深入挖掘
- en: Every chapter, apart from the first one, includes a section called [Digging
    Deeper](pr02s05.html "Digging Deeper"). This is where you will explore specific
    aspects of Ruby (including a few of those gnarly byways I mentioned a moment ago)
    in greater depth. In many cases, you could skip the “Digging Deeper” sections
    and still learn all the Ruby you will ever need. On the other hand, it is in these
    sections that you will often get closest to the inner workings of Ruby, so if
    you skip them, you are going to miss out on some pretty interesting stuff.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 除了第一章之外，本书每一章都包含一个名为[深入挖掘](pr02s05.html "深入挖掘")的部分。这是您将更深入地探索Ruby特定方面（包括我刚才提到的一些复杂路径）的地方。在许多情况下，您可以跳过“深入挖掘”部分，仍然可以学习到您需要的所有Ruby知识。另一方面，您通常在这些部分中会接近Ruby的内部工作原理，所以如果您跳过它们，您可能会错过一些相当有趣的内容。
- en: Making Sense of the Text
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解文本
- en: 'In *The Book of Ruby*, Ruby source code is written like this:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在《Ruby编程秘籍》中，Ruby源代码的编写方式如下：
- en: '[PRE0]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Often the code will be annotated with *comments*. Ruby comments are any text
    following a hash mark (`#`) on a single line. The comments are ignored by the
    Ruby interpreter. When I want to draw attention to some output that Ruby displays
    or to a value returned by a piece of code (even if that value is not displayed),
    I indicate this with this type of comment: `# =>`. Occasionally, when I want to
    draw attention to some input that the user should enter, I use this type of comment:
    `# <=`. Here is an example to illustrate these commenting conventions:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 通常代码会带有*注释*。Ruby注释是单行中跟随井号(`#`)的任何文本。注释会被Ruby解释器忽略。当我想要引起对Ruby显示的某些输出或代码返回的某个值（即使该值没有显示）的注意时，我会用这种类型的注释来表示：`#
    =>`。偶尔，当我想引起对用户应输入的某些输入的注意时，我会使用这种类型的注释：`# <=`。以下是一个示例，以说明这些注释约定：
- en: '[PRE1]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'When a piece of code returns or displays too much data to be shown in a single-line
    comment, the output may be shown like this:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 当一段代码返回或显示的数据太多，无法在单行注释中显示时，输出可能如下所示：
- en: '[PRE2]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '*helloname.rb*'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '*helloname.rb*'
- en: When a sample program accompanies the code, the program name is shown in the
    margin as it is here.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个示例程序伴随代码时，程序名称在此处以边注形式显示。
- en: 'Explanatory notes that provide hints or extra information are shown like this:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 提供提示或额外信息的说明性注释如下所示：
- en: Note
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This is an explanatory note.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个说明性注释。
- en: 'More in-depth explanation of points mentioned in the text may be shown in a
    box like this:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 对文本中提到的点的更深入解释可能如下所示：
- en: Further Explanation
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 进一步解释
- en: This is some additional information. You can skip it if you like—but if you
    do, you may miss something interesting!
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一些额外的信息。如果您愿意，可以跳过它——但是如果您这样做，可能会错过一些有趣的内容！
- en: Downloading Ruby
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载Ruby
- en: You can download the latest version of Ruby at [http://www.ruby-lang.org/en/downloads/](http://www.ruby-lang.org/en/downloads/).
    Be sure to download the binaries (not merely the source code). Windows users have
    the option of installing Ruby using the Ruby Installer, available at [http://www.rubyinstaller.org/](http://www.rubyinstaller.org/).
    There are also several alternative implementations of Ruby, the most established
    of which is JRuby. You can find information on where to download these implementations
    in [Appendix D](apd.html "Appendix D. Ruby and Rails Development Software").
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[http://www.ruby-lang.org/en/downloads/](http://www.ruby-lang.org/en/downloads/)下载最新的Ruby版本。请确保下载二进制文件（而不仅仅是源代码）。Windows用户可以选择使用Ruby
    Installer安装Ruby，该安装器可在[http://www.rubyinstaller.org/](http://www.rubyinstaller.org/)找到。Ruby还有几种替代实现，其中最著名的是JRuby。您可以在[附录D](apd.html
    "附录D. Ruby和Rails开发软件")中找到有关下载这些实现的信息。
- en: Getting the Source Code of the Sample Programs
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取示例程序的源代码
- en: All the programs in every chapter in this book are available for download as
    a *.zip* archive at [http://www.nostarch.com/boruby.htm](http://www.nostarch.com/boruby.htm).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 本书每一章的所有程序都可以作为*.zip*存档在[http://www.nostarch.com/boruby.htm](http://www.nostarch.com/boruby.htm)下载。
- en: When you unzip the programs, you will find that they are grouped into a set
    of directories—one for each chapter.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 当您解压程序时，您会发现它们被分组到一个目录集中——每个章节一个目录。
- en: Running Ruby Programs
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行Ruby程序
- en: 'It is often useful to keep a command window open in the source directory containing
    your Ruby program files. Assuming that the Ruby interpreter is correctly pathed
    on your system, you will then be able to run programs by entering `ruby` *`programname`*.
    For example, this is the command you would enter in order to run the *helloworld.rb*
    program:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在包含你的Ruby程序文件的源目录中保持一个命令窗口通常是很有用的。假设Ruby解释器在你的系统上正确配置了路径，那么你将能够通过输入`ruby` *`程序名`*来运行程序。例如，运行*helloworld.rb*程序的命令如下：
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: If you use a Ruby IDE, you may be able to load the Ruby programs into the IDE
    and run them using the integrated tools of that IDE.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用Ruby IDE，你可能能够将Ruby程序加载到IDE中，并使用该IDE的集成工具运行它们。
- en: The Ruby Library Documentation
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Ruby库文档
- en: '*The Book of Ruby* covers many of the classes and methods in the standard Ruby
    library—but by no means all of them! At some stage, therefore, you will need to
    refer to documentation on the full range of classes used by Ruby. Fortunately,
    the Ruby class library contains embedded documentation that has been extracted
    and compiled into an easily browsable reference, which is available in several
    formats. For example, you can find the online documentation for Ruby 1.9 at [http://www.ruby-doc.org/ruby-1.9/index.html](http://www.ruby-doc.org/ruby-1.9/index.html).
    For Ruby 1.8, go to [http://www.ruby-doc.org/ruby-1.8/index.html](http://www.ruby-doc.org/ruby-1.8/index.html).'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 《Ruby编程宝典》涵盖了标准Ruby库中的许多类和方法——但绝不是全部！因此，在某个阶段，你将需要参考Ruby所使用的所有类的完整文档。幸运的是，Ruby类库包含了嵌入的文档，这些文档已经被提取并编译成易于浏览的参考，并且以多种格式提供。例如，你可以找到Ruby
    1.9的在线文档，网址为[http://www.ruby-doc.org/ruby-1.9/index.html](http://www.ruby-doc.org/ruby-1.9/index.html)。对于Ruby
    1.8，请访问[http://www.ruby-doc.org/ruby-1.8/index.html](http://www.ruby-doc.org/ruby-1.8/index.html)。
- en: Okay, that’s enough of the preamble—let’s get down to work.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，前言就到这里——让我们开始工作吧。
