- en: INTRODUCTION
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**引言**'
- en: '*Being an account of the struggles and travails encountered by Our Hero in
    his zealous quest for performance: In which there is brief confusion and a beginning*.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*这是一段关于我们的英雄在追求性能的过程中所遇到的挣扎和艰辛的描述：其中有一段短暂的混乱和开始*。'
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages333191.png.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages333191.png.jpg)'
- en: Once upon a time, in the land of Armonk-where-the-shadows-lie, a band of fiendish
    programmers were weaving their evil schemes. And it seemed that dark days were
    upon the earth at last, and for all time, for the programmers seemed so very clever
    that no one would ever be able to stand against them. And even if some hero were,
    through great fortune or unimaginable heroism, to bring one low, then there would
    still be an innumerable quantity remaining, each more fiendish and subtle than
    the last.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 从前，在阴影之地阿蒙克，一群邪恶的程序员正在编织他们的邪恶计划。似乎地球终于迎来了黑暗的日子，而且永远如此，因为程序员们似乎非常聪明，没有人能够抵挡他们。即使某个英雄，通过极大的幸运或难以想象的英雄主义，将他们中的一个击败，那么仍然会剩下无数的人，每个人都比前一个更加邪恶和狡猾。
- en: Wait. That's not right at all. In fact, that's the beginning of an entirely
    different book. Let's try that again.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 等等。这完全不对。事实上，这是另一本完全不同的书的开始。让我们再试一次。
- en: This book is about Xen. It's not about Zen. It will not show you a path to enlightenment,
    expressed as a release from the floating world. We will not give you advice on
    the Eightfold Path, or enumerate the Four Noble Truths. Those are beyond our purview.
    But if all goes well, this book will make you happy.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是关于Xen的。它不是关于禅。它不会向你展示一条通往觉悟的道路，即从浮世解脱出来。我们不会给你关于八正道的建议，也不会列举四圣谛。这些都超出了我们的范围。但如果一切顺利，这本书将让你感到快乐。
- en: 'Virtualization: A Brief History'
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟化：简史
- en: In this case, the vehicle for happiness will be virtualization. It sounds bizarre,
    but people have attempted to become happy through virtualization since the Dawn
    Of Time. (In computing terms, that's the 1970s.) IBM's team of programmers in
    Armonk produced the first VM (virtual machine) solution that we know of, VM/370,
    to ensure that their new machine would be able to run programs developed for an
    older model. Customers loved it back in 1979, and the Xen developers credit it
    as a major inspiration. A similar, more modern example might be the Xbox 360's
    software emulation of the original Xbox.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，幸福的载体将是虚拟化。这听起来很奇怪，但自从时间的开始，人们就试图通过虚拟化来获得幸福。（在计算机术语中，那就是20世纪70年代。）IBM在阿蒙克的一支程序员团队推出了我们知道的第一个虚拟机（VM）解决方案，即VM/370，以确保他们的新机器能够运行为旧型号开发的程序。顾客在1979年非常喜欢它，Xen开发者将其视为一个重要的灵感来源。一个类似但更现代的例子可能是Xbox
    360对原始Xbox的软件模拟。
- en: For a while, not much came of it. Virtualization continued to play a part in
    computing, mostly in the very top end of the market, but people continued to obstinately
    require a complete machine for most tasks until about 2001.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 一段时间里，并没有什么成果。虚拟化在计算机领域继续发挥作用，主要在市场的高端，但人们仍然固执地要求大多数任务需要一个完整的机器，直到大约2001年。
- en: '2001, everyone had to admit, looked very different from 1979.^([[1](#ftn.CHP-00-FNOTE-1)])
    Computers had become small and ubiquitous. The great time-sharing machines had
    given way to PCs. Batch processing was a rarity, and fully interactive desktop
    applications had become the *raison d''etre* of computing. Most important, from
    our perspective, the single computer had been eclipsed by the network: Most computers
    worth having were connected to the Internet, and each of them required various
    services.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 2001年，每个人都必须承认，与1979年大不相同。计算机变得小巧而无处不在。大型分时机器让位于个人电脑。批量处理变得罕见，完全交互式的桌面应用已成为计算机的*存在理由*。最重要的是，从我们的角度来看，单台计算机已被网络所取代：大多数值得拥有的计算机都连接到互联网，并且每个都需要各种服务。
- en: These services, in turn, were designed in such a way that they could be readily
    provided by even the cheapest and smallest server, often many times over.^([[2](#ftn.CHP-00-FNOTE-2)])
    Suddenly the people operating these services had a terrible surplus of computing
    power, devouring electricity all out of proportion to the actual services they
    provided. Something had to be done. The stage was set for virtualization to re-emerge,
    this time as a means of server *consolidation*.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这些服务反过来被设计成可以由甚至最便宜、最小的服务器轻松提供，通常要多得多.^([[2](#ftn.CHP-00-FNOTE-2)]) 突然间，运营这些服务的人们有了大量的计算能力过剩，消耗的电力远远超出他们实际提供的服务。必须采取某种措施。虚拟化重新出现的舞台已经搭建，这次作为服务器
    *整合* 的手段。
- en: Some clever gentlemen at Cambridge decided that this idea could be extended
    even further—if virtualization allows an individual or company to consolidate
    their machines, they reasoned, shouldn't it also enable *multiple* organizations
    to consolidate their machines and reap even bigger benefits? That's the goal of
    Xen. It treats virtualization as a technology that allows people to ignore the
    hardware entirely. Computing, in this model, becomes a service or a commodity,
    "creating a world in which XenoServer execution platforms are scattered across
    the globe and available for any member of the public."^([[3](#ftn.CHP-00-FNOTE-3)])
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 剑桥的一些聪明人士决定，这个想法可以进一步扩展——如果虚拟化允许个人或公司合并他们的机器，他们推理，那么它是否也应该允许 *多个* 组织合并他们的机器并获取更大的利益？这就是
    Xen 的目标。它将虚拟化视为一种技术，允许人们完全忽略硬件。在这个模型中，计算成为一种服务或商品，“创造一个 XenoServer 执行平台遍布全球，任何公众成员都可以使用的世界。”^([[3](#ftn.CHP-00-FNOTE-3)])
- en: That's where we are today. Although the XenoServer platform was never released,
    its vision survives today as "cloud computing," made possible by Xen (and, admittedly,
    other virtualization systems). Xen fits into this grand cloud computing scheme
    by enabling sites to create "nodes" that can be managed, transferred, and billed
    in ways that aren't feasible with other computing-as-service mechanisms.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我们今天所在的位置。尽管 XenoServer 平台从未发布，但其愿景今天仍然以“云计算”的形式存在，这是由 Xen（以及诚然其他虚拟化系统）实现的。Xen
    通过允许站点创建“节点”，这些节点可以通过其他计算服务机制无法实现的方式进行管理、转移和计费，从而融入这个庞大的云计算方案。
- en: '* * *'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: ^([[1](#CHP-00-FNOTE-1)]) And, to our great dismay, also very different from
    the movie.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[1](#CHP-00-FNOTE-1)]) 然而，令我们非常沮丧的是，它与电影中的描述也非常不同。
- en: ^([[2](#CHP-00-FNOTE-2)]) We know, there are many applications where this is
    not the case—but there are still a lot of small web servers (for example) out
    there.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[2](#CHP-00-FNOTE-2)]) 我们知道，有许多应用情况并非如此——但仍然有许多小型网络服务器（例如）存在。
- en: ^([[3](#CHP-00-FNOTE-3)]) Hand et al., "Controlling the XenoServer Open Platform,"
    (University of Cambridge, England, 2003). Abstract.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[3](#CHP-00-FNOTE-3)]) Hand 等人，“控制 XenoServer 开放平台”，（英国剑桥大学，2003年）。摘要。
- en: So What's Xen Again? (And Why Should I Use It?)
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 那么，Xen 又是什么呢？（我为什么要使用它？）
- en: Even if you're not interested in this sort of grid computing thing, Xen offers
    some advantages to both the system administrator and the home user.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 即使你对这种网格计算类型不感兴趣，Xen 也为系统管理员和家用用户提供了某些优势。
- en: Xen is a piece of software that enables one machine to behave as if it were
    many *virtual* machines. Each of these machines can run its own operating system
    and exist almost independently of the other virtual machines running on the same
    hardware. Each virtual machine (an *instance*, or *domain* in Xen parlance) has
    its own apparent network interfaces, disks, and memory.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Xen 是一种软件，它使一台机器表现得就像多个 *虚拟* 机器。这些机器中的每一个都可以运行自己的操作系统，并且几乎独立于同一硬件上运行的其它虚拟机器。每个虚拟机器（在
    Xen 术语中称为 *实例* 或 *域*）都有自己的明显网络接口、磁盘和内存。
- en: At first, this makes Xen seem no different from an *emulator*, such as VMware,
    Microsoft's Virtual PC, or the open source QEMU.^([[4](#ftn.CHP-00-FNOTE-4)])
    However, these traditional emulators work by running software on a simulated processor
    that is, itself, also software—a rather slow proposition. Xen actually runs all
    software directly on the processor at full speed, with only a very small overhead
    for some resource management tasks.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 最初，这使 Xen 看起来与 *模拟器* 没有什么不同，例如 VMware、微软的 Virtual PC 或开源的 QEMU.^([[4](#ftn.CHP-00-FNOTE-4)])
    然而，这些传统的模拟器通过在模拟处理器上运行软件来实现，而这个模拟处理器本身也是软件——这是一个相当慢的过程。Xen 实际上以全速直接在处理器上运行所有软件，只为一些资源管理任务产生非常小的开销。
- en: 'This leads to the first, and probably the most important, advantage of Xen:
    Xen runs *fast* in comparison with traditional emulators. Preliminary results
    in "Xen and the Art of Virtualization"—one of the seminal Xen papers—indicated
    performance degradation of less than 2 percent for a standard workload and between
    10 and 20 percent for a worst-case scenario. Since then, Xen has improved. We
    usually just consider Xen''s performance to be "sufficient" and leave it at that.
    (Readers desiring a more precise answer might want to read [Chapter 10](ch10.html
    "Chapter 10. PROFILING AND BENCHMARKING UNDER XEN"), which discusses benchmarking
    Xen''s performance with your particular application.)'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了 Xen 的第一个，也可能是最重要的优势：与传统的模拟器相比，Xen 运行得*非常快*。"Xen 和虚拟化的艺术"——Xen 的开创性论文之一——的初步结果表明，在标准负载下性能下降不到
    2%，在最坏的情况下为 10% 到 20%。从那时起，Xen 已经得到了改进。我们通常只认为 Xen 的性能是"足够的"，就到此为止。（想要更精确答案的读者可能想阅读[第
    10 章](ch10.html "第 10 章。在 Xen 下的分析和基准测试")，该章节讨论了使用特定应用程序对 Xen 的性能进行基准测试。）
- en: Xen's advantages also show up in contrast to a standalone machine, even beyond
    the consolidation argument mentioned earlier. Like a traditional emulator, Xen
    provides robust fault isolation—that is, any software problem that affects one
    virtual machine is unlikely to affect the real machine or other virtual machines
    running on the same hardware. This makes it especially useful in environments
    where you can't be certain of the intentions or skill level of the users.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Xen 的优势在与独立机器的对比中也显现出来，甚至超出了之前提到的整合论点。就像传统的模拟器一样，Xen 提供了强大的故障隔离——也就是说，任何影响一个虚拟机的软件问题不太可能影响真实机器或同一硬件上运行的其它虚拟机。这使得它在用户意图或技能水平无法确定的环境中特别有用。
- en: Also like traditional emulators, Xen provides an additional layer of abstraction
    between the machine and the user, allowing the administrator increased flexibility—suddenly
    the application can be decoupled from the hardware almost completely; stopped,
    started, moved around; made into a genuine service.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，像传统的模拟器一样，Xen 在机器和用户之间提供了一个额外的抽象层，这增加了管理员的灵活性——突然之间，应用程序可以几乎完全与硬件解耦；可以停止、启动、移动；可以变成真正的服务。
- en: 'But Xen''s main advantage is, in a sense, psychological: It makes it possible
    to think of computer time as even more of a commodity than it already is.^([[5](#ftn.CHP-00-FNOTE-5)])
    With Xen, you can run your own virtual computer for as much or as little time
    as you need, with resources tailored to the desired application.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 但从某种意义上说，Xen 的主要优势是心理上的：它使得将计算机时间视为比它已经更像是商品成为可能。[^([5](#ftn.CHP-00-FNOTE-5))](#ftn.CHP-00-FNOTE-5)
    使用 Xen，你可以根据自己的需要运行自己的虚拟计算机，所需资源根据所需的应用程序进行定制。
- en: Further, Xen gives you the ability to run whatever configuration you happen
    to need at a given time. For example, the web developer who wants to test a new
    page against different versions of Microsoft's Internet Explorer doesn't have
    to maintain a farm of Windows boxes, each with different Windows versions, different
    patch levels, and different versions of Internet Explorer. Instead, it's possible
    to just keep different OS images on the hard drive and start them as needed.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Xen 还允许你在任何给定时间运行所需的任何配置。例如，想要测试新网页与不同版本的微软 Internet Explorer 的网页开发者不需要维护一个包含不同
    Windows 版本、不同补丁级别和不同 Internet Explorer 版本的 Windows 箱子农场。相反，只需在硬盘上保留不同的操作系统镜像，并在需要时启动它们。
- en: Xen's Limitations
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Xen 的局限性
- en: All right, we're getting carried away. Xen's not perfect, nor is it any sort
    of computing panacea. It has both disadvantages and limitations.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧，我们有点走远了。Xen 并非完美，也不是任何形式的计算万能药。它既有缺点也有局限性。
- en: 'Xen''s main disadvantage is that it only works with operating systems that
    have been specifically modified to support it. (But note that unmodified guest
    OSs are possible with sufficiently advanced hardware. We''ll talk about that later,
    in [Chapter 12](ch12.html "Chapter 12. HVM: BEYOND PARAVIRTUALIZATION").)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Xen 的主要缺点是它只能与专门修改以支持它的操作系统一起工作。（但请注意，在足够先进的硬件上，未修改的客户端操作系统也是可能的。我们将在[第 12 章](ch12.html
    "第 12 章。HVM：超越虚拟化")中稍后讨论这一点。）
- en: Xen's also more work to set up than a pure software emulator, requiring the
    user to work entirely in a guest domain (albeit a special, privileged guest domain)
    rather than simply starting an external emulation program as desired.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 与纯软件模拟器相比，设置 Xen 需要用户完全在客户端域（尽管是一个特殊、受保护的客户端域）中工作，而不是简单地启动一个外部的模拟程序。
- en: Additionally, the state of the Xen documentation is pretty dreadful. (That's
    what we're here for, you might say.) People are, of course, working on it, but
    everyone knows it's more fun to write code than to document it. Also, Xen's under
    such active development that much of the documentation that exists is out of date.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Xen 文档的状态相当糟糕。（你可能会说，这正是我们在这里的原因。）当然，人们正在努力改进它，但众所周知，编写代码比编写文档更有趣。此外，Xen
    正在如此积极地开发中，以至于现有的许多文档已经过时。
- en: These are significant disadvantages, but they aren't so bad that you should
    be discouraged from running Xen.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是重大的缺点，但它们并不糟糕到让你放弃运行 Xen。
- en: Finally, though there are also some situations in which Xen—and virtualization
    itself—simply isn't useful. Xen isn't especially useful to people with a constant,
    CPU-limited workload, for example. It's not great in large server farms, where
    individual nodes are already scaled to their jobs. In these situations, Xen is
    probably not what you want, although the developers (and the open source community)
    are working on compelling features even for environments like these.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，尽管也有一些情况下 Xen——以及虚拟化本身——根本不起作用。例如，对于具有持续、CPU 限制的工作负载的人来说，Xen 并不是特别有用。在大型服务器农场中，单个节点已经根据其工作进行了扩展，Xen
    也不是很好。在这些情况下，Xen 可能不是你想要的，尽管开发人员（以及开源社区）正在为这些环境开发吸引人的功能。
- en: But, in the end, it's not Xen itself that's interesting—it's what you can use
    it for.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，最终，真正有趣的不是 Xen 本身，而是你可以用它做什么。
- en: So, Why Should I Use Xen?
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 那么，为什么我应该使用 Xen 呢？
- en: The short answer is, *because it will make your life easier*. Don't trust a
    piece of software? Spin off a virtual machine and see how you like it. Need to
    test a network app? Start up a few machines and see how well they talk to each
    other. Have a cluster that you want to test some new software on but can't afford
    a second "test" cluster? Xen offers a solution. Want decent snapshot backups?
    Xen could be your answer, with its ability to pause and back up a running machine
    within, literally, seconds. Need to provide hosting for dozens of users, each
    of whom wants complete authority to mess with their configuration? Well, that's
    what we do, and Xen's the way we do it. (The astute reader might notice in our
    writing a certain bias toward that last application. That's why.)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 简短的回答是，*因为它会使你的生活更轻松*。不相信某个软件？创建一个虚拟机，看看你喜不喜欢。需要测试一个网络应用程序？启动几台机器，看看它们如何相互通信。有一个你想要在上面测试新软件的集群，但负担不起第二个“测试”集群？Xen
    提供了一个解决方案。想要良好的快照备份？Xen 可以是你的答案，它能够在几秒钟内暂停并备份正在运行的机器。需要为数十个用户提供托管服务，每个用户都希望完全控制他们的配置？这正是我们所做的，而
    Xen 是我们这样做的方式。（敏锐的读者可能会注意到我们的写作中存在某种偏向于最后一个应用。这就是原因。）
- en: On a more fundamental level, Xen lets you take a machine, stop it, send it somewhere
    else, and resume it at will. It's one less thing to think about—suddenly the hardware
    is no longer important. A good thing for both users and administrators!
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在更基本的层面上，Xen 允许你停止一台机器，将其发送到其他地方，并随意恢复其运行。这减少了一件事要考虑——突然间硬件不再重要。这对用户和管理员来说都是一件好事！
- en: 'Finally, there''s one last good reason to run Xen, one that''s so big and mundane
    it often gets ignored: Xen is simply cheaper than running multiple boxes. CPU
    usage in data centers ranges between 5 percent and 40 percent—a fairly unimpressive
    figure.^([[6](#ftn.CHP-00-FNOTE-6)]) Xen lets you put some of those unused cycles
    to use, without sacrificing reliability, performance, or scalability.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，还有一个很好的理由来运行 Xen，这个理由既大又平凡，常常被忽视：Xen 简直比运行多个盒子便宜。数据中心中的 CPU 使用率在 5% 到 40%
    之间——这个数字相当不引人注目。[^6](#ftn.CHP-00-FNOTE-6) Xen 允许你利用那些未使用的周期，而不会牺牲可靠性、性能或可扩展性。
- en: Unlike the virtualization technologies of a few decades ago, Xen virtualizes
    cheap commodity hardware; this might not make sense at first, until you realize
    that much of the market is *very* price sensitive, and power is becoming quite
    expensive. It's much cheaper to run one big dual quad-core rig than it is to run
    eight single-core boxes, and with Xen, you can easily split that quad-core system
    into individual systems.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 与几十年前的虚拟化技术不同，Xen 虚拟化了廉价的通用硬件；一开始这可能没有意义，直到你意识到市场的大部分内容对价格非常敏感，而电力正变得越来越昂贵。运行一个大型双四核系统比运行八个单核系统便宜得多，而使用
    Xen，你可以轻松地将那个四核系统分割成单独的系统。
- en: '* * *'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: ^([[4](#CHP-00-FNOTE-4)]) In fact, Xen uses QEMU extensively, as we'll see.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[4](#CHP-00-FNOTE-4)]) 事实上，Xen 广泛使用了 QEMU，正如我们将看到的。
- en: ^([[5](#CHP-00-FNOTE-5)]) This is sort of like cell phones. People use them,
    not as a substitute for landlines, but as a substitute for traditional planning.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[5](#CHP-00-FNOTE-5)]) 这有点像手机。人们使用它们，不是作为固定电话的替代品，而是作为传统计划的替代品。
- en: '^([[6](#CHP-00-FNOTE-6)]) This is a generally held belief, but one oft-cited
    source is the presentation "Virtualization: Taking Charge of Your Servers" by
    Thomas Bittman.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[6](#CHP-00-FNOTE-6)]) 这是一个普遍存在的信念，但经常引用的一个来源是托马斯·比特曼的演示文稿“虚拟化：掌握您的服务器”。
- en: Overview of the Book
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书概述
- en: All right, enough hype. Now for nuts and bolts.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 好了，不要过多吹嘘。现在让我们进入正题。
- en: We've organized this book (mostly) alternating between theoretical and practical
    discussion. In our experience, an admin needs both practical experience and a
    firm theoretical grounding to effectively solve problems, and that's what we aim
    to provide.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将本书（主要是）理论与实践讨论交替进行。根据我们的经验，管理员需要实际经验和坚实的理论基础才能有效地解决问题，这正是我们旨在提供的。
- en: '[Chapter 1](ch01.html "Chapter 1. XEN: A HIGH-LEVEL OVERVIEW") is an overview
    of Xen and virtualization technologies in general. We try to outline how Xen works,
    what distinguishes it from other virtualization packages, and why you might (or
    might not) want to use it. This one is theory-intensive.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](ch01.html "第1章. XEN：高级概述")是Xen和虚拟化技术的一般概述。我们试图概述Xen的工作原理，它与其他虚拟化软件包的区别，以及你为什么可能（或可能不）想使用它。这一章理论性较强。'
- en: '[Chapter 2](ch02.html "Chapter 2. GETTING STARTED") is a step-by-step quick
    start based on the rationale that there''s no substitute for experience. We install
    Xen from base principles on a CentOS system.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章. 入门")是一个基于经验的快速入门步骤，其理由是没有替代品。我们在CentOS系统上从基本原理安装Xen。'
- en: '[Chapter 3](ch03.html "Chapter 3. PROVISIONING DOMUS") describes manually creating
    virtual machine images to use with Xen.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章. DOMUS的配置")介绍了如何手动创建虚拟机镜像以供Xen使用。'
- en: '[Chapter 4](ch04.html "Chapter 4. STORAGE WITH XEN") covers storage. It sounds
    kind of mundane, but storage is actually a vital part of virtualization—if storage
    is tied to a particular machine or hardware configuration, then many of Xen''s
    coolest features won''t work. We cover various storage options, laying the groundwork
    for subsequent discussion of migration and snapshots.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](ch04.html "第4章. Xen下的存储")涵盖了存储。听起来可能有点平凡，但存储实际上是虚拟化的一个关键部分——如果存储与特定的机器或硬件配置相关联，那么Xen的一些最酷的功能将无法工作。我们涵盖了各种存储选项，为后续关于迁移和快照的讨论奠定了基础。'
- en: We talk about networking in [Chapter 5](ch05.html "Chapter 5. NETWORKING")—how
    to set it up and what options you have when doing so. Both this chapter and the
    previous focus a bit more on theory.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在第5章[第5章. 网络连接](ch05.html "第5章. 网络连接")中讨论了网络连接——如何设置以及这样做时有哪些选项。这一章和上一章都更多地侧重于理论。
- en: '[Chapter 6](ch06.html "Chapter 6. DOMU MANAGEMENT: TOOLS AND FRONTENDS") is
    about a couple of popular packaged frontends that can be used with the open source
    Xen hypervisor to automate the routine drudgery of VM administration. We also
    talk about scripting Xen, if you''d rather build your own frontend.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '[第6章](ch06.html "第6章. DOMU管理：工具和前端")介绍了几种流行的前端包装，这些前端可以与开源Xen虚拟机管理程序一起使用来自动化虚拟机管理的日常繁琐工作。我们还讨论了Xen的脚本编写，如果你更愿意构建自己的前端。'
- en: '[Chapter 7](ch07.html "Chapter 7. HOSTING UNTRUSTED USERS UNDER XEN: LESSONS
    FROM THE TRENCHES") goes back to the practical case studies to talk about Xen
    for shared hosting. It''s one of the big applications that''s driving early adoption
    of Xen, and we''ve got a lot of experience doing it.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '[第7章](ch07.html "第7章. 在XEN下托管不受信任的用户：来自战壕的经验教训")回到实际案例研究，讨论Xen在共享托管中的应用。这是推动Xen早期采用的主要应用之一，我们在这一领域有很多经验。'
- en: 'Moving on from shared hosting, in [Chapter 8](ch08.html "Chapter 8. BEYOND
    LINUX: USING XEN WITH OTHER UNIX-LIKE OSS") we discuss possible alternatives to
    Linux, both as a "host" and "guest" OS.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 从共享托管迁移过来，在第8章[第8章. 超越LINUX：在其他类UNIX开源系统中使用Xen](ch08.html "第8章. 超越LINUX：在其他类UNIX开源系统中使用Xen")中，我们讨论了Linux作为“主机”和“客户机”操作系统的可能替代方案。
- en: In [Chapter 9](ch09.html "Chapter 9. XEN MIGRATION") we describe migration,
    both in theory and practice.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第9章](ch09.html "第9章. Xen迁移")中，我们描述了迁移的理论和实践。
- en: '[Chapter 10](ch10.html "Chapter 10. PROFILING AND BENCHMARKING UNDER XEN")
    is about performance analysis with Xen. We discuss Xen''s robust support in this
    area, which doesn''t seem to get mentioned nearly as often as it deserves.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '[第10章](ch10.html "第10章. Xen下的性能分析和基准测试")是关于使用Xen进行性能分析的内容。我们讨论了Xen在这一领域的强大支持，这似乎没有得到应有的关注。'
- en: 'With [Chapter 11](ch11.html "Chapter 11. CITRIX XENSERVER: XEN FOR THE ENTERPRISE")
    we diverge a bit to cover the commercial product that XenSource (now a division
    of Citrix) has built around Xen.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第11章](ch11.html "第11章。CITRIX XENSERVER：企业级的XEN")中，我们稍微偏离一下，来介绍XenSource（现在是CITRIX的一个部门）围绕Xen构建的商业产品。
- en: '[Chapter 12](ch12.html "Chapter 12. HVM: BEYOND PARAVIRTUALIZATION") is about
    Xen''s HVM support—that is to say, the hardware virtualization supported by Intel''s
    and AMD''s newest processors.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '[第12章](ch12.html "第12章。HVM：超越Para虚拟化")是关于Xen的HVM支持——也就是说，由Intel和AMD最新处理器支持的硬件虚拟化。'
- en: '[Chapter 13](ch13.html "Chapter 13. XEN AND WINDOWS") covers Windows. We talk
    about using it with Xen, making it play nicely, how you can expect to access it,
    and what you might expect to do with it once you''ve got it working.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '[第13章](ch13.html "第13章。XEN和Windows")涵盖了Windows。我们讨论了如何与Xen一起使用它，使其表现良好，你可以期望如何访问它，以及一旦它运行正常后你可能期望用它做什么。'
- en: '[Chapter 14](ch14.html "Chapter 14. TIPS") is a collection of extremely practical
    tips for Xen admins.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[第14章](ch14.html "第14章。技巧")是针对Xen管理员的一组非常实用的技巧。'
- en: '[Chapter 15](ch15.html "Chapter 15. TROUBLESHOOTING") is a troubleshooting
    chapter—a collection of problems that we''ve run into and how we''ve solved them.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '[第15章](ch15.html "第15章。故障排除")是故障排除章节——收集了我们遇到的问题以及我们是如何解决它们的。'
- en: We've also included appendixes on Xen's domain configuration files and `xm`'s
    syntax.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还包含了关于Xen的域配置文件和`xm`语法的附录。
- en: But I Am Impatient!
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 但我很急躁！
- en: If you're really impatient to get started with Xen, skip to [Chapter 2](ch02.html
    "Chapter 2. GETTING STARTED") and follow our step-by-step instructions. Then skim
    the rest of the book as the fancy strikes you.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你真的迫不及待地想开始使用Xen，跳到[第2章](ch02.html "第2章。入门")并按照我们的分步指导进行。然后根据你的兴趣浏览书的其余部分。
- en: 'If you''re planning to deploy Xen as a service provider, we suggest following
    the steps in [Chapter 2](ch02.html "Chapter 2. GETTING STARTED"), then reading
    Chapters [Chapter 3](ch03.html "Chapter 3. PROVISIONING DOMUS"), [Chapter 4](ch04.html
    "Chapter 4. STORAGE WITH XEN"), [Chapter 5](ch05.html "Chapter 5. NETWORKING"),
    [Chapter 6](ch06.html "Chapter 6. DOMU MANAGEMENT: TOOLS AND FRONTENDS"), [Chapter 7](ch07.html
    "Chapter 7. HOSTING UNTRUSTED USERS UNDER XEN: LESSONS FROM THE TRENCHES"), [Chapter 8](ch08.html
    "Chapter 8. BEYOND LINUX: USING XEN WITH OTHER UNIX-LIKE OSS"), and probably 11,
    and finally just reading the whole book.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你计划将Xen作为服务提供商部署，我们建议按照[第2章](ch02.html "第2章。入门")中的步骤进行，然后阅读[第3章](ch03.html
    "第3章。DOMU的配置")、[第4章](ch04.html "第4章。XEN的存储")、[第5章](ch05.html "第5章。网络")、[第6章](ch06.html
    "第6章。DOMU管理：工具和前端")、[第7章](ch07.html "第7章。在XEN下托管不受信任的用户：来自战壕的经验")、[第8章](ch08.html
    "第8章。超越Linux：使用XEN与其他类UNIX开源软件")，可能还有第11章，最后再通读整本书。
- en: 'For those of you who are contemplating a large deployment of Xen, you''ll probably
    be most interested in Chapters [Chapter 3](ch03.html "Chapter 3. PROVISIONING
    DOMUS"), [Chapter 4](ch04.html "Chapter 4. STORAGE WITH XEN"), [Chapter 5](ch05.html
    "Chapter 5. NETWORKING"), [Chapter 6](ch06.html "Chapter 6. DOMU MANAGEMENT: TOOLS
    AND FRONTENDS"), and [Chapter 7](ch07.html "Chapter 7. HOSTING UNTRUSTED USERS
    UNDER XEN: LESSONS FROM THE TRENCHES"), with an excursion to 13 to consider the
    commercial XenSource product. But again, we think we''ve put useful information
    throughout the book.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些正在考虑大规模部署Xen的读者，你们可能最感兴趣的是第[第3章](ch03.html "第3章。DOMU的配置")、[第4章](ch04.html
    "第4章。XEN的存储")、[第5章](ch05.html "第5章。网络")、[第6章](ch06.html "第6章。DOMU管理：工具和前端")和[第7章](ch07.html
    "第7章。在XEN下托管不受信任的用户：来自战壕的经验")，以及第13章来考虑商业XenSource产品。但再次强调，我们认为我们在整本书中都提供了有用的信息。
- en: Note
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*We''ve tried to keep this book as distribution- and version-independent as
    possible, except in the tutorial sections, where we try to be extremely specific
    and detailed, and in the distro-specific notes, which are necessarily, er, distro-specific*.'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 我们尽量使这本书尽可能独立于发行版和版本，除了在教程部分，我们试图非常具体和详细，以及在特定发行版的笔记中，这些笔记必然是，嗯，特定发行版的。
- en: Often we will get carried away and make some ridiculous broad generalization,
    like "only an idiot would use Linux as an NFS server."^([[7](#ftn.CHP-00-FNOTE-7)])
    Where reasonable, we've tried to add footnotes that qualify and temper the occasionally
    strident claims we make.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们经常会陷入一些荒谬的广泛概括，比如“只有白痴才会用Linux作为NFS服务器。”^([[7](#ftn.CHP-00-FNOTE-7)]) 在合理的情况下，我们尽量添加脚注来限定和缓和偶尔过于尖锐的声明。
- en: '* * *'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: ^([[7](#CHP-00-FNOTE-7)]) Actually, we've seen morons and imbeciles do this
    too.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[7](#CHP-00-FNOTE-7)]) 实际上，我们也见过笨蛋和白痴也这样做。
