["```\n#define BUS_PROBE_SPECIFIC      0       /* Only I can use this device. */\n#define BUS_PROBE_VENDOR        (-10)   /* Vendor-supplied driver. */\n#define BUS_PROBE_DEFAULT       (-20)   /* Base OS default driver. */\n#define BUS_PROBE_LOW_PRIORITY  (-40)   /* Older, less desirable driver. */\n#define BUS_PROBE_GENERIC       (-100)  /* Generic driver for device. */\n#define BUS_PROBE_HOOVER        (-500)  /* Driver for all devices on bus. */\n#define BUS_PROBE_NOWILDCARD    (-2000000000) /* No wildcard matches. */\n```", "```\nstatic device_method_t foo_pci_methods[] = {\n        /* Device interface. */\n        DEVMETHOD(device_probe,         foo_pci_probe),\n        DEVMETHOD(device_attach,        foo_pci_attach),\n        DEVMETHOD(device_detach,        foo_pci_detach),\n        { 0, 0 }\n};\n```", "```\n#include <sys/param.h>\n#include <sys/kernel.h>\n#include <sys/bus.h>\n#include <sys/module.h>\n\nDRIVER_MODULE(name, busname, driver_t driver, devclass_t devclass,\n    modeventhand_t evh, void *arg);\n```", "```\nstatic driver_t foo_pci_driver = {\n        \"foo_pci\",\n        foo_pci_methods,\n        sizeof(struct foo_pci_softc)\n};\n```", "```\n#include <sys/param.h>\n  #include <sys/module.h>\n  #include <sys/kernel.h>\n  #include <sys/systm.h>\n\n  #include <sys/conf.h>\n  #include <sys/uio.h>\n  #include <sys/bus.h>\n\n  #include <dev/pci/pcireg.h>\n  #include <dev/pci/pcivar.h>\n\n struct foo_pci_softc {\n         device_t        device;\n         struct cdev     *cdev;\n  };\n\n  static d_open_t         foo_pci_open;\n  static d_close_t        foo_pci_close;\n  static d_read_t         foo_pci_read;\n  static d_write_t        foo_pci_write;\n\n static struct cdevsw foo_pci_cdevsw = {\n          .d_version =    D_VERSION,\n          .d_open =       foo_pci_open,\n          .d_close =      foo_pci_close,\n          .d_read =       foo_pci_read,\n          .d_write =      foo_pci_write,\n          .d_name =       \"foo_pci\"\n  };\n\n static devclass_t foo_pci_devclass;\n\n  static int\n  foo_pci_open(struct cdev *dev, int oflags, int devtype, struct thread *td)\n  {\n          struct foo_pci_softc *sc;\n\n          sc = dev->si_drv1;\n          device_printf(sc->device, \"opened successfully\\n\");\n          return (0);\n  }\n\n  static int\n  foo_pci_close(struct cdev *dev, int fflag, int devtype, struct thread *td)\n  {\n          struct foo_pci_softc *sc;\n\n          sc = dev->si_drv1;\n          device_printf(sc->device, \"closed\\n\");\n          return (0);\n  }\n\n  static int\n  foo_pci_read(struct cdev *dev, struct uio *uio, int ioflag)\n  {\n          struct foo_pci_softc *sc;\n\n          sc = dev->si_drv1;\n          device_printf(sc->device, \"read request = %dB\\n\", uio->uio_resid);\n          return (0);\n  }\n\n  static int\n  foo_pci_write(struct cdev *dev, struct uio *uio, int ioflag)\n  {\n          struct foo_pci_softc *sc;\n\n          sc = dev->si_drv1;\n          device_printf(sc->device, \"write request = %dB\\n\", uio->uio_resid);\n          return (0);\n  }\n\n  static struct _pcsid {\n          uint32_t        type;\n          const char      *desc;\n  } pci_ids[] = {\n          { 0x1234abcd, \"RED PCI Widget\" },\n          { 0x4321fedc, \"BLU PCI Widget\" },\n          { 0x00000000, NULL }\n  };\n\n  static int\n  foo_pci_probe(device_t dev)\n  {\n          uint32_t type = pci_get_devid(dev);\n          struct _pcsid *ep = pci_ids;\n\n          while (ep->type && ep->type != type)\n                  ep++;\n          if (ep->desc) {\n                  device_set_desc(dev, ep->desc);\n                  return (BUS_PROBE_DEFAULT);\n          }\n\n          return (ENXIO);\n  }\n\n  static int\n  foo_pci_attach(device_t dev)\n  {\n          struct foo_pci_softc *sc = device_get_softc(dev);\n          int unit = device_get_unit(dev);\n\n          sc->device = dev;\n          sc->cdev = make_dev(&foo_pci_cdevsw, unit, UID_ROOT, GID_WHEEL,\n              0600, \"foo_pci%d\", unit);\n          sc->cdev->si_drv1 = sc;\n\n          return (0);\n  }\n\n  static int\n  foo_pci_detach(device_t dev)\n  {\n          struct foo_pci_softc *sc = device_get_softc(dev);\n\n          destroy_dev(sc->cdev);\n          return (0);\n  }\n\n  static device_method_t foo_pci_methods[] = {\n          /* Device interface. */\n          DEVMETHOD(device_probe,         foo_pci_probe),\n          DEVMETHOD(device_attach,        foo_pci_attach),\n          DEVMETHOD(device_detach,        foo_pci_detach),\n          { 0, 0 }\n  };\n\n  static driver_t foo_pci_driver = {\n          \"foo_pci\",\n          foo_pci_methods,\n          sizeof(struct foo_pci_softc)\n  };\n DRIVER_MODULE(foo_pci, pci, foo_pci_driver, foo_pci_devclass, 0, 0);\n```", "```\nstatic struct _pcsid {\n      uint32_t        type;\n      const char      *desc;\n} pci_ids[] = {\n        { 0x1234abcd, \"RED PCI Widget\" },\n        { 0x4321fedc, \"BLU PCI Widget\" },\n        { 0x00000000, NULL }\n};\n```", "```\nstatic int\nfoo_pci_probe(device_t dev)\n{\n        uint32_t type = pci_get_devid(dev);\n        struct _pcsid *ep = pci_ids;\n\n      while (ep->type && ep->type != type)\n                ep++;\n        if (ep->desc) {\n              device_set_desc(dev, ep->desc);\n              return (BUS_PROBE_DEFAULT);\n        }\n\n        return (ENXIO);\n}\n```", "```\nstatic int\nfoo_pci_attach(device_t dev)\n{\n        struct foo_pci_softc *sc = device_get_softc(dev);\n        int unit = device_get_unit(dev);\n\n        sc->device = dev;\n        sc->cdev = make_dev(&foo_pci_cdevsw, unit, UID_ROOT, GID_WHEEL,\n            0600, \"foo_pci%d\", unit);\n        sc->cdev->si_drv1 = sc;\n\n        return (0);\n}\n```", "```\nstatic int\nfoo_pci_open(struct cdev *dev, int oflags, int devtype, struct thread *td)\n{\n        struct foo_pci_softc *sc;\n\n      sc = dev->si_drv1;\n      device_printf(sc->device, \"opened successfully\\n\");\n        return (0);\n}\n```", "```\nstatic int\nfoo_pci_detach(device_t dev)\n{\n        struct foo_pci_softc *sc = device_get_softc(dev);\n\n      destroy_dev(sc->cdev);\n        return (0);\n}\n```", "```\n$ `sudo kldload ./foo_pci.ko`\n$ `kldstat`\nId Refs Address    Size     Name\n 1    3 0xc0400000 c9f490   kernel\n 2    1 0xc3af0000 2000     foo_pci.ko\n$ `ls -l /dev/foo*`\nls: /dev/foo*: No such file or directory\n```", "```\n#include <sys/param.h>\n#include <sys/bus.h>\n\n#include <machine/bus.h>\n#include <sys/rman.h>\n#include <machine/resource.h>\n\nstruct resource *\nbus_alloc_resource(device_t dev, int type, int *rid, u_long start,\n    u_long end, u_long count, u_int flags);\n\nstruct resource *\nbus_alloc_resource_any(device_t dev, int type, int *rid,\n    u_int flags);\n\nint\nbus_activate_resource(device_t dev, int type, int rid,\n    struct resource *r);\n\nint\nbus_deactivate_resource(device_t dev, int type, int rid,\n    struct resource *r);\n\nint\nbus_release_resource(device_t dev, int type, int rid,\n    struct resource *r);\n```"]