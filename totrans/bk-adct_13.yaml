- en: Chapter 13. Configuring Linux for Best Audio Quality
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第13章. 配置Linux以获得最佳音频质量
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages797347.png.jpg)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages797347.png.jpg)'
- en: 'Linux audio is rather messy yet powerful. This chapter is a guide to getting
    everything working correctly for high-end audio production. Linux is a wonderful
    multimedia platform: It is stable, it is flexible, and if you use a lightweight
    graphical environment, you’ll get better performance out of modest hardware. Although
    Linux audio has some rough edges, it is advancing rapidly, and it has its own
    universe of sophisticated audio software.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Linux音频虽然杂乱但功能强大。本章是指导如何正确配置一切以适应高端音频制作的指南。Linux是一个出色的多媒体平台：它稳定，它灵活，如果你使用轻量级的图形环境，你将能从普通硬件中获得更好的性能。尽管Linux音频有一些粗糙的边缘，但它正在快速发展，并且拥有自己的复杂音频软件宇宙。
- en: You can use whatever Linux distribution you want, because you can customize
    any Linux distribution to serve as your recording studio, depending on what hoops
    you’re willing to jump through. The most important things you need, aside from
    Audacity and other audio software applications, are a real-time preemptible kernel
    for lowest latency and a few system configuration tweaks. You can configure and
    tune your favorite Linux distribution, or you can use one of specialized Linux
    distributions for multimedia production that takes care of the details for you.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用你想要的任何Linux发行版，因为你可以根据你愿意跳过的环环来定制任何Linux发行版，使其成为你的录音室。除了Audacity和其他音频软件应用之外，你需要最重要的东西是一个实时可抢占的内核以实现最低延迟，以及一些系统配置调整。你可以配置和调整你最喜欢的Linux发行版，或者你可以使用专为多媒体制作而设计的专业Linux发行版，它会为你处理细节。
- en: I used Ubuntu while writing this book because it was the first distribution
    to bundle the FFADO drivers for FireWire recording interfaces. (I have the excellent
    Focusrite Saffire Pro 26 I/O for multichannel recording.) FireWire recording interfaces
    are great performers, but they present some special driver problems, so if you
    don’t have one, don’t worry about finding a distribution that includes FFADO.
    You can always add it later anyway.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写这本书时，我使用了Ubuntu，因为它是第一个捆绑FFADO驱动程序的FireWire录音接口的发行版。（我有一个优秀的Focusrite Saffire
    Pro 26 I/O用于多通道录音。）FireWire录音接口是出色的性能者，但它们带来了一些特殊的驱动程序问题，所以如果你没有，不要担心寻找包含FFADO的发行版。无论如何，你都可以稍后添加它。
- en: Note
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The most important step is careful selection of your audio interface. Choose
    one that is well-supported on Linux. Life is too short to waste on something that
    doesn’t want to work right. Visit the ALSA Sound Card Matrix ([http://www.alsa-project.org/main/index.php/Matrix:Main](http://www.alsa-project.org/main/index.php/Matrix:Main))
    to find supported sound cards. Also check out [Appendix A](apa.html "Appendix A. Audio
    Hardware") for hardware information.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 最重要的一步是仔细选择你的音频接口。选择一个在Linux上得到良好支持的接口。生命太短暂，不能浪费在不愿意正常工作的事情上。访问ALSA声卡矩阵([http://www.alsa-project.org/main/index.php/Matrix:Main](http://www.alsa-project.org/main/index.php/Matrix:Main))以查找受支持的声音卡。还可以查看[附录A](apa.html
    "附录A. 音频硬件")以获取硬件信息。
- en: Using Distributions with Real-Time Kernels
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用具有实时内核的发行版
- en: If your particular Linux distribution packages a *real-time kernel*, that takes
    care of the biggest hurdle. What is a real-time kernel? This is a kernel where
    *real-time scheduling* and *real-time preemption* are configured to favor audio
    recording for the lowest possible latency. Latency is inherent in computers because
    modern CPUs use *preemptive multitasking*; they perform one task at a time but
    switch back and forth between tasks so rapidly that they appear to be performing
    multiple tasks at once. Multicore CPUs smooth out this switching, but they still
    need help from the Linux kernel.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的Linux发行版打包了*实时内核*，那么就解决了最大的障碍。什么是实时内核？这是一个配置了*实时调度*和*实时抢占*的内核，以优先保证音频记录的最小延迟。延迟是计算机固有的，因为现代CPU使用*抢占式多任务处理*；它们一次执行一个任务，但快速地在任务之间切换，以至于看起来它们同时执行多个任务。多核CPU平滑了这种切换，但它们仍然需要Linux内核的帮助。
- en: Because the Linux kernel continues to develop at warp speed, some folks are
    saying that a special real-time kernel really isn’t necessary anymore because
    real-time features are integrated into the mainline kernel. You can get by without
    one if you strip your Linux system down to the essentials needed for audio production
    and use a modern multicore PC, gigabytes of RAM, and fast hard drives. I’ll stick
    with real-time kernels for now, because they behave a little differently from
    general-purpose kernels.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Linux内核以超光速持续发展，有些人说，特殊的实时内核现在其实不再必要，因为实时功能已经集成到主线内核中。如果您将Linux系统简化为音频制作所需的基本要素，并使用现代的多核PC、数GB的RAM和快速的硬盘驱动器，您就可以不使用它。我目前会坚持使用实时内核，因为它们的行为与通用内核略有不同。
- en: Real-time preemption controls how tasks interrupt each other to get the CPU
    time they need. It’s like a classroom of kids trying to get the teacher’s attention,
    and the teacher can deal with only one at a time. A multicore CPU is like having
    more teachers. Interrupts are typically milliseconds in duration, which doesn’t
    matter when we’re typing a letter or editing a photograph but is enough to introduce
    defects into a recording. So, we can configure Linux to give the highest scheduling
    priority to audio functions.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 实时抢占控制着任务如何相互中断以获取它们所需的CPU时间。这就像一个教室里的孩子们试图引起老师的注意，而老师一次只能处理一个。多核CPU就像是拥有更多的老师。中断通常持续数毫秒，当我们正在打字或编辑照片时这并不重要，但足以在录音中引入缺陷。因此，我们可以配置Linux将最高调度优先级分配给音频功能。
- en: There are latencies inherent in the inner workings of the kernel itself, which
    in modern kernels have become very small. So, it is possible to tune a Linux kernel
    for very low-latency audio recording, down to less than 10 milliseconds. Anything
    less than 20 is excellent.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 内核本身的内部工作存在固有的延迟，在现代内核中这些延迟已经变得非常小。因此，可以将Linux内核调整为非常低延迟的音频录制，低至10毫秒以下。任何低于20毫秒的都是优秀的。
- en: Fedora and CentOS users should use Planet CCRMA packages ([http://ccrma.stanford.edu/planetccrma/software/planetccrma.html](http://ccrma.stanford.edu/planetccrma/software/planetccrma.html)).
    Planet CCRMA (pronounced “karma”) is a special collection of RPMs for Fedora and
    CentOS that includes a real-time kernel, all kinds of audio software, and up-to-date
    audio drivers. Just add the Planet CCRMA repositories to your system and then
    use Yum to install, update, and remove packages the usual way.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Fedora和CentOS用户应使用Planet CCRMA包（[http://ccrma.stanford.edu/planetccrma/software/planetccrma.html](http://ccrma.stanford.edu/planetccrma/software/planetccrma.html)）。Planet
    CCRMA（发音为“karma”）是针对Fedora和CentOS的特殊RPM集合，包括实时内核、各种音频软件和最新的音频驱动程序。只需将Planet CCRMA仓库添加到您的系统中，然后使用Yum以常规方式安装、更新和删除包。
- en: Arch Linux is a superior audio production platform, and it has its own special
    audio repository, ArchAudio. Red Hat, Mandriva, and openSUSE all package real-time
    kernels.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Arch Linux是一个优越的音频制作平台，它有自己的特殊音频仓库，ArchAudio。Red Hat、Mandriva和openSUSE都打包了实时内核。
- en: 'Ubuntu (and Kubuntu, Xubuntu, and all the rest of the family) provides a real-time
    kernel and related kernel modules; the bare minimum you need to get started with
    Audacity are these packages:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Ubuntu（以及Kubuntu、Xubuntu和该系列的所有其他版本）提供实时内核和相关内核模块；要开始使用Audacity所需的最小包包括这些：
- en: '*audacity*'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*audacity*'
- en: '*linux-rt*'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*linux-rt*'
- en: 'Once you have an rt kernel installed, add all human users who are going to
    be using Audacity to the *audio* group (in the */etc/group* file). Then add these
    lines to */etc/security/limits.conf*:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了rt内核，将所有将要使用Audacity的人类用户添加到*audio*组（在*/etc/group*文件中）。然后向*/etc/security/limits.conf*文件中添加以下行：
- en: '**`@audio - rtprio 99`**'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`@audio - rtprio 99`**'
- en: '**`@audio - memlock 3000000`**'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`@audio - memlock 3000000`**'
- en: The first line gives all members of the audio group the highest scheduling priority.
    The second value controls how memory is used.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 第一行将最高调度优先级赋予音频组的所有成员。第二个值控制内存的使用方式。
- en: '`rtprio` (real-time priority) values range from 0 to 99, with 99 being the
    most favorable priority. This is the very front of the line.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rtprio`（实时优先级）的值从0到99，其中99是最高优先级。这是队伍的最前面。'
- en: '`memlock` determines how much RAM the audio group locks up for itself, in kilobytes,
    and prevents it from writing to the much slower swap file. My system has 4GB RAM,
    so I set a limit of 3GB, or 3,000,000KB. Some how-tos say to set this to *unlimited*.
    This is a bit controversial, because it seems like common sense to leave some
    for system processes and nonaudio applications. A value of unlimited could also
    result in out-of-memory errors and interrupt your audio session. Some users report
    that setting any memlock value makes no difference.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`memlock` 决定了音频组锁定多少 RAM 用于自身，以千字节为单位，并防止它写入较慢的交换文件。我的系统有 4GB RAM，所以我将限制设置为
    3GB，即 3,000,000KB。有些指南建议将其设置为 *无限制*。这有点有争议，因为似乎常识是应该为系统进程和非音频应用程序留出一些空间。无限制的值也可能导致内存不足错误并中断您的音频会话。一些用户报告说设置任何
    memlock 值都没有区别。'
- en: 'Many how-tos also say to add one more line: `@audio - nice -19`. This isn’t
    necessary because the rtprio function takes care of scheduling priority. It doesn’t
    hurt anything to try it for yourself.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 许多指南还建议添加一行：`@audio - nice -19`。这并不是必要的，因为 rtprio 函数负责处理调度优先级。自己尝试一下也不会有什么坏处。
- en: 'Then reboot to your new kernel. Note that if you are already running your rt
    kernel, all you need to do to activate your new group membership and changes to
    *limits.conf* is to log out and then log back in. Then verify your audio group
    membership:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 然后重新启动到您的新内核。请注意，如果您已经运行了您的 rt 内核，您要激活新的组成员资格和 *limits.conf* 的更改，只需注销然后重新登录即可。然后验证您的音频组成员资格：
- en: '[PRE0]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Verify that your rt kernel is running:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 确认您的 rt 内核正在运行：
- en: '[PRE1]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `rt` tells you this is a real-time kernel; this example is from Ubuntu 10.04\.
    You should also keep a stock kernel installed. Using a different kernel is as
    easy as rebooting and choosing it from your boot menu. It will also help with
    troubleshooting, because you can try tasks that are giving you problems with different
    kernels to see whether they behave differently.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '`rt` 告诉您这是一个实时内核；此示例来自 Ubuntu 10.04。您还应该保留一个库存内核安装。使用不同的内核就像重新启动并从您的引导菜单中选择它一样简单。它还将有助于故障排除，因为您可以使用不同的内核尝试给您带来问题的任务，以查看它们是否表现不同。'
- en: Specialized Multimedia Linux Distributions
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 专业的多媒体 Linux 发行版
- en: There are several complete Linux distributions that are customized for audio
    and multimedia production. Some of them run from a CD, DVD, or USB stick, with
    a hard drive installation option. You should still verify audio group membership,
    */etc/security/limits.conf* settings, and a real-time kernel like we talked about
    in the previous section.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个完整的 Linux 发行版是为音频和多媒体制作定制的。其中一些可以从 CD、DVD 或 USB 棒运行，并提供硬盘安装选项。您仍然应该验证音频组成员资格、*/etc/security/limits.conf*
    设置以及我们在上一节中讨论的实时内核。
- en: 'Here is a sampling of specialized multimedia Linux distributions:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一些专业的多媒体 Linux 发行版的样本：
- en: 64 Studio ([http://www.64studio.com/](http://www.64studio.com/))
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 64 Studio ([http://www.64studio.com/](http://www.64studio.com/))
- en: Ubuntu Studio ([http://www.ubuntustudio.org/](http://www.ubuntustudio.org/))
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ubuntu Studio ([http://www.ubuntustudio.org/](http://www.ubuntustudio.org/))
- en: dyne:bolic ([http://www.dynebolic.org/](http://www.dynebolic.org/))
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: dyne:bolic ([http://www.dynebolic.org/](http://www.dynebolic.org/))
- en: pure:dyne ([http://www.puredyne.org/](http://www.puredyne.org/))
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: pure:dyne ([http://www.puredyne.org/](http://www.puredyne.org/))
- en: Musix ([http://www.musix.org.ar/en/](http://www.musix.org.ar/en/))
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Musix ([http://www.musix.org.ar/en/](http://www.musix.org.ar/en/))
- en: 64 Studio
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 64 Studio
- en: 64 Studio is a Debian-based distribution for all digital content creation, and
    it includes a huge assortment of audio, video, graphics, and publishing software.
    It supports both 32- and 64-bit architectures and runs on a wide range of PC hardware.
    The maintainers aim for stability rather than bleeding edge, so they issue updates
    conservatively. 64 Studio also builds and supports products such as the Trinity
    Indamixx digital audio workstation and the Lionstracs Mediastation.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 64 Studio 是一个基于 Debian 的发行版，适用于所有数字内容创作，它包括大量的音频、视频、图形和出版软件。它支持 32 位和 64 位架构，并在广泛的
    PC 硬件上运行。维护者追求稳定性而不是尖端技术，因此他们保守地发布更新。64 Studio 还构建并支持诸如 Trinity Indamixx 数字音频工作站和
    Lionstracs Mediastation 等产品。
- en: Ubuntu Studio
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Ubuntu Studio
- en: Ubuntu Studio is akin to 64 Studio in having nearly every Linux multimedia application
    there is, except that it is based on Ubuntu, which in turn is derived from Debian.
    Ubuntu is more than warmed-over Debian; the Ubuntu development teams maintain
    its own patches and customizations. Ubuntu Studio uses more up-to-date packages
    than 64 Studio, so you get newer software releases and perhaps newer bugs. As
    with all things Ubuntu, there is a large and enthusiastic user base and good community
    support.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: Ubuntu Studio 与 64 Studio 类似，拥有几乎所有 Linux 多媒体应用程序，但它基于 Ubuntu，而 Ubuntu 又源自 Debian。Ubuntu
    不仅仅是 Debian 的翻版；Ubuntu 开发团队维护自己的补丁和定制。Ubuntu Studio 使用比 64 Studio 更新的软件包，因此你将获得更新的软件版本，也许还有新的错误。与所有
    Ubuntu 一样，它有一个庞大且热情的用户基础和良好的社区支持。
- en: 'You can also add Ubuntu Studio packages to a regular Ubuntu system. Run **`$
    apt-cache search ubuntustudio`** to see your options. The *ubuntustudio-audio*
    and *ubuntustudio-audio-plugins* metapackages should give you everything you need
    for audio production, with one important exception: The linux-rt kernel is not
    included, so you will have to install it separately.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以将 Ubuntu Studio 软件包添加到常规的 Ubuntu 系统中。运行 **`$ apt-cache search ubuntustudio`**
    来查看你的选项。*ubuntustudio-audio* 和 *ubuntustudio-audio-plugins* 元软件包应该会为你提供音频制作所需的一切，但有一个重要的例外：linux-rt
    内核不包括在内，因此你将不得不单独安装它。
- en: dyne:bolic
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: dyne:bolic
- en: dyne:bolic is a unique software project. dyne:bolic is not based on any other
    Linux distribution but is built from scratch from source code. That’s just the
    beginning—dyne:bolic operates in its own creative ways. It uses only Free software
    as defined by the Free Software Foundation. This is good news for users who want
    a system unencumbered by proprietary software. It runs from a CD and is optimized
    both for speed and low hardware requirements, requiring at a minimum a Pentium
    II 400 MHz computer or an Xbox game console. You can use it with either a Linux
    or Windows PC, you can save your data to a USB stick or local hard drive, and
    it has a hard drive installation option. Customization is not as simple as using
    Yum or Apt to install new software packages because you have to build a new CD
    image. It comes with good documentation and a friendly user community.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: dyne:bolic 是一个独特的软件项目。dyne:bolic 不是基于任何其他 Linux 发行版，而是从头开始从源代码构建的。这只是开始——dyne:bolic
    以其独特的方式进行操作。它只使用自由软件基金会定义的免费软件。这对希望使用不受专有软件束缚的系统用户来说是个好消息。它可以从 CD 运行，并且针对速度和低硬件要求进行了优化，至少需要一台
    Pentium II 400 MHz 的计算机或一个 Xbox 游戏机。你可以使用 Linux 或 Windows PC，你可以将你的数据保存到 USB 棒或本地硬盘上，并且它还提供了硬盘安装选项。定制不像使用
    Yum 或 Apt 安装新软件包那样简单，因为你必须构建一个新的 CD 映像。它附带良好的文档和友好的用户社区。
- en: 'dyne:bolic is Rasta ([http://www.rastasoft.org/](http://www.rastasoft.org/))
    software. Jaromil, the main dyne:bolic developer, says this:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: dyne:bolic 是 Rasta ([http://www.rastasoft.org/](http://www.rastasoft.org/))
    软件。Jaromil，dyne:bolic 的主要开发者，说道：
- en: But remember there is no Peace without Justice. This software is about Resistance
    in a babylon world which tries to control more and more the way we communicate
    and we share informations and knowledge. This software is for all those who cannot
    afford to have the latest expensive hardware to speak out their words of consciousness
    and good will. This software has a full range of applications for the production
    and not only the fruition of information, it’s a full multimedia studio and has
    nothing to envy to other proprietary systems, because freedom and share of knowledge
    are solid principles for evolution and that’s where this software comes from.
  id: totrans-45
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 但请记住，没有正义就没有和平。这款软件是关于在巴比伦世界中抵抗的，它试图越来越多地控制我们沟通和分享信息与知识的方式。这款软件是为那些负担不起最新昂贵硬件来发表他们意识之言和善意的人准备的。这款软件拥有从信息生产到消费的全套应用，它是一个完整的多媒体工作室，并且不输给其他任何专有系统，因为自由和知识共享是进化的坚实基础，这也是这款软件的来源。
- en: pure:dyne
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: pure:dyne
- en: pure:dyne was initially based on dyne:bolic but has evolved into a blend of
    Ubuntu and Debian. It runs from CD, DVD, USB stick, or a hard drive installation.
    It is more up-to-date than dyne:bolic and is optimized for modern i686 processors,
    though it will also run on older hardware. It is designed to be user-customizable
    and comes with tools to create customized images.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: pure:dyne 最初基于 dyne:bolic，但已演变成 Ubuntu 和 Debian 的混合体。它可以从 CD、DVD、USB 棒或硬盘安装运行。它比
    dyne:bolic 更新，并且针对现代 i686 处理器进行了优化，尽管它也可以在旧硬件上运行。它旨在可由用户自定义，并附带创建定制映像的工具。
- en: Musix
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Musix
- en: Musix is Debian based, for 32-bit systems. It comes on a live CD or live DVD,
    and it also has a hard drive installation option. Musix is also a 100 percent
    free operating system. It provides a lightweight desktop environment based on
    IceWM and the wonderful Rox filer, so it is suitable for modest hardware.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Musix是基于Debian的，适用于32位系统。它提供Live CD或Live DVD，还有硬盘安装选项。Musix也是一个100%免费的操作系统。它提供了一个基于IceWM和出色的Rox文件管理器的轻量级桌面环境，因此适合硬件配置较低的计算机。
- en: Building a Real-Time Kernel
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建实时内核
- en: If you don’t want to use a multimedia Linux distribution and your favorite distro
    does not package a real-time kernel, you can build your own. A complete kernel-building
    how-to would be a whole chapter by itself, so I’m not going to try to stuff one
    into this chapter. You can easily find good how-tos; look for instructions specific
    to your distribution.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不想使用多媒体Linux发行版，而你喜欢的发行版没有打包实时内核，你可以自己构建。一个完整的内核构建指南将是一个完整的章节，所以我不打算在这个章节中尝试塞入一个。你可以轻松找到好的指南；寻找针对你发行版的特定说明。
- en: You’ll need a proper build environment installed, kernel sources, and a copy
    of the configuration file for your current kernel. Once those are in place, you
    need the rt patch, which you can get from the mothership of the Linux kernel,
    [http://www.kernel.org/](http://www.kernel.org/). Go to the rt wiki at ([http://rt.wiki.kernel.org/index.php/Main_Page](http://rt.wiki.kernel.org/index.php/Main_Page)),
    and look for the “CONFIG_PREEMPT_RT Patch” download. It must have the same version
    number as your kernel sources. Once you have that, apply it to your kernel sources.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要安装适当的构建环境、内核源代码以及当前内核的配置文件副本。一旦这些就位，你需要rt补丁，可以从Linux内核的母体网站[http://www.kernel.org/](http://www.kernel.org/)获取。访问rt
    wiki（[http://rt.wiki.kernel.org/index.php/Main_Page](http://rt.wiki.kernel.org/index.php/Main_Page)），寻找“CONFIG_PREEMPT_RT
    Patch”下载。它必须与你的内核源代码版本相同。一旦你有了它，就将其应用到你的内核源代码上。
- en: In your kernel makefile, set `EXTRAVERSION` equal to a value that tells you
    this is a real-time kernel, such as `EXTRAVERSION = -rt`. Then if your kernel
    version is 2.6.33.1, for example, your new kernel name will be linux-2.6.33.1-rt.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的内核makefile中，将`EXTRAVERSION`设置为表示这是一个实时内核的值，例如`EXTRAVERSION = -rt`。然后，如果你的内核版本是2.6.33.1，例如，你的新内核名称将是linux-2.6.33.1-rt。
- en: Now you are ready to configure your new kernel. Start with your existing kernel
    configuration and run the **`make oldconfig`** command; you don’t need to start
    from scratch just to enable real-time preemption. Review your kernel configuration
    and enable Processor type and features > Preemption Mode (Complete Preemption
    (Real-Time)), and Processor type and features > Timer frequency (1000 Hz).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经准备好配置你的新内核了。从现有的内核配置开始，运行**`make oldconfig`**命令；你不需要从头开始配置，只是为了启用实时抢占。检查你的内核配置，并启用处理器类型和功能
    > 抢占模式（完全抢占（实时）），以及处理器类型和功能 > 定时器频率（1000 Hz）。
- en: Then finish configuration, and compile and install your new kernel. That should
    be all there is to it, but review the rt wiki to make sure, because Linux kernel
    development is a fast-moving target. Keep your old stock kernel installed as well.
    You can have as many kernels as you want on your system, and if anything goes
    wrong, you’ll have a good kernel to boot to.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 然后完成配置，编译并安装你的新内核。这应该就是全部了，但请查看rt wiki以确保无误，因为Linux内核开发是一个快速发展的目标。同时也要保留你的旧版内核。你可以在系统上安装任意数量的内核，如果出现任何问题，你将有一个好的内核可以启动。
- en: Latency Is Not That Scary
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 延迟并不可怕
- en: Latency is not the great bugaboo that it is sometimes made out to be. One way
    to handle latency is to throw horsepower at it. A modern multicore CPU, gigabytes
    of RAM, and fast hard drives can make latency almost disappear.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 延迟并不是像有时被描述的那样可怕。处理延迟的一种方法是将马力投入其中。现代的多核CPU、千兆内存和快速的硬盘可以使延迟几乎消失。
- en: 'If that is not an option, it helps to understand when latency really is a problem
    and when it isn’t. It matters when you are overdubbing. And even here Audacity
    helps with that, because it has a configurable latency correction in the **Edit**
    > **Preferences** > **Recording** dialog. (See [Chapter 12](ch12.html "Chapter 12. Fix-its
    and Cleanups") to learn how to measure and correct for latency.) It matters when
    you are playing a software synthesizer or playing any instrument through special
    effects plug-ins on your computer: When you press a key or strum a string, you
    want music to come out, not lag. It matters when you are monitoring a recording
    session, because you don’t want what you hear to be out of sync.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有其他选择，了解何时延迟真正是问题，何时不是，会有所帮助。当你进行多轨录音时，这很重要。即使在这里，Audacity也能帮助你，因为它在**编辑**
    > **首选项** > **录音**对话框中有一个可配置的延迟校正功能。（参见[第12章](ch12.html "第12章。修复和清理")了解如何测量和校正延迟。）当你通过电脑上的特殊效果插件播放软件合成器或任何乐器时，这也很重要：当你按下键或弹拨琴弦时，你希望音乐响起，而不是延迟。当你监控录音会话时，这也很重要，因为你不希望听到的声音与实际不符。
- en: In the **Edit** > **Preferences** > **Recording** dialog, there is a setting
    that affects latency called “Audio to buffer.” Smaller buffers equal lower latency,
    but if they are too small for your CPU to handle, you’ll get dropouts.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在**编辑** > **首选项** > **录音**对话框中，有一个影响延迟的设置，称为“音频到缓冲区”。缓冲区越小，延迟越低，但如果它们对于你的CPU来说太小，你将遇到断点。
- en: Latency doesn’t matter so much during mixing or during multichannel recording
    where everything is plugged into a good recording interface that has a direct
    path to Audacity with no detours. It is more important to have a stable setup
    that doesn’t crash in the middle of a recording session. If you can live with
    higher latencies in exchange for stability, that is a good trade. It’s no good
    pushing latency levels down to the point of instability.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在混音或多声道录音期间，延迟并不那么重要，因为所有东西都连接到一个好的录音接口，该接口直接连接到Audacity而没有绕路。拥有一个稳定且不会在录音会话中途崩溃的设置更为重要。如果你可以接受更高的延迟以换取稳定性，那是一个很好的交易。将延迟水平降低到不稳定是不好的。
- en: Interrupts are less of a problem when you run a clean system with everything
    turned off except what you need for audio production. (See [Linux System Tweaks](ch13s10.html
    "Linux System Tweaks") in [Linux System Tweaks](ch13s10.html "Linux System Tweaks").)
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 当你运行一个干净的系统，除了音频制作所需之外，所有东西都关闭时，中断问题就小得多。（参见[Linux系统调整](ch13s10.html "Linux系统调整")中的[Linux系统调整](ch13s10.html
    "Linux系统调整")。）
- en: JACK, the Jack Audio Connection Kit, has its own configuration options for latency
    and buffer size, which you can read all about in [Using JACK with Audacity](ch13s08.html
    "Using JACK with Audacity") in [Using JACK with Audacity](ch13s08.html "Using
    JACK with Audacity").
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: JACK，即Jack音频连接套件，有自己的延迟和缓冲区大小配置选项，你可以在[使用Audacity与JACK](ch13s08.html "使用Audacity与JACK")中详细了解这些选项。（参见[使用Audacity与JACK](ch13s08.html
    "使用Audacity与JACK")。）
- en: Sorting Out Linux Audio
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 整理Linux音频
- en: In this book we use Audacity with ALSA and JACK. No PulseAudio, OSS, aRts, ESD,
    or whatever else might be lurking in the weeds.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们使用Audacity配合ALSA和JACK。不使用PulseAudio、OSS、aRts、ESD或其他可能潜伏在草丛中的任何东西。
- en: 'The Linux audio landscape has been complicated for some years, with multiple
    subsystems and overlapping functionality, and now it is going through some significant
    changes. There is not a single Linux audio API that developers can target, but
    rather they must deal with a herd of audio servers and subsystems: the Open Sound
    System (OSS), the Advanced Linux Sound Architecture (ALSA), the Enlightened Sound
    Daemon (ESD) on Gnome, the analog Real time synthesizer (aRts) for KDE2/3, Phonon
    for KDE4, PulseAudio, and the JACK Audio Connection Kit.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 几年来，Linux音频领域一直很复杂，有多个子系统重叠的功能，现在它正在经历一些重大变化。没有单一的Linux音频API供开发者针对，而是他们必须处理一群音频服务器和子系统：开放声音系统（OSS）、高级Linux声音架构（ALSA）、Gnome上的启蒙声音守护进程（ESD）、KDE2/3的模拟实时合成器（aRts）、KDE4的Phonon、PulseAudio和JACK音频连接套件。
- en: ESD and aRts are entering retirement, so that thins the herd a bit, leaving
    PulseAudio (which runs on any Unix-type operating system), Phonon (KDE4) for controlling
    playback, and JACK for professional audio production. ALSA provides a common driver
    base for all of these that interacts directly with audio hardware, and it also
    provides a useful set of user tools, such as a mixer, device discovery, a simple
    player and recorder, and a speaker tester. PulseAudio is finding its way into
    many Linux distributions, such as Ubuntu and Fedora, and it looks like it will
    become the dominant desktop audio server.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ESD和aRts正在进入退休，这使群体稍微减少了一些，留下了在任意Unix类型操作系统上运行的PulseAudio（用于控制播放），Phonon（KDE4）以及用于专业音频制作的JACK。ALSA为所有这些提供了一个共同的驱动程序基础，它直接与音频硬件交互，并且还提供了一套有用的用户工具，例如混音器、设备发现、简单的播放器和录音机，以及扬声器测试器。PulseAudio正在进入许多Linux发行版，如Ubuntu和Fedora，看起来它将成为主流桌面音频服务器。
- en: PulseAudio is a sound daemon, while Phonon is a multimedia API supporting multiple
    audio frameworks, including PulseAudio. PulseAudio and Phonon provide playback
    mixers and routers and networked sound. Many Linux applications do not have audio
    device choosers. For example, the Firefox web browser only uses the default audio
    device. PulseAudio and Phonon let you control which audio device Firefox uses.
    I prefer to turn PulseAudio off when I’m using Audacity; [Turning PulseAudio and
    Phonon Off](ch13s09.html "Turning PulseAudio and Phonon Off") in [Turning PulseAudio
    and Phonon Off](ch13s09.html "Turning PulseAudio and Phonon Off") tells you how
    to do this.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: PulseAudio是一个声音守护进程，而Phonon是一个支持多个音频框架的多媒体API，包括PulseAudio。PulseAudio和Phonon提供播放混音器和路由器以及网络声音。许多Linux应用程序没有音频设备选择器。例如，Firefox网络浏览器只使用默认音频设备。PulseAudio和Phonon让您控制Firefox使用哪个音频设备。当我使用Audacity时，我喜欢关闭PulseAudio；[关闭PulseAudio和Phonon](ch13s09.html
    "关闭PulseAudio和Phonon")中的[关闭PulseAudio和Phonon](ch13s09.html "关闭PulseAudio和Phonon")会告诉您如何操作。
- en: What about OSS? Some folks prefer it, and you’re welcome to give it a try. ALSA
    is better supported in Linux, and it includes OSS emulation for applications that
    want OSS.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，OSS怎么样？有些人更喜欢它，您可以尝试一下。ALSA在Linux中支持得更好，它包括为希望使用OSS的应用程序提供的OSS模拟。
- en: Note
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The Adobe Flash Player music player is buggy and unreliable. For example, Pandora
    Radio, the wonderful online music broadcaster, relies entirely on Flash. It is
    a great service, and I am happy to be a paid subscriber. But Flash Player is an
    ongoing source of trouble. It loses its connection to the audio system periodically,
    and it doesn’t like changes in device routing, such as when changing from computer
    speakers to an external sound system. When it flakes out, it takes a either a
    browser refresh or a restart to get it going again. If you need an audio source
    for testing, you should look for something else.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Adobe Flash Player音乐播放器存在错误和不稳定的问题。例如，Pandora Radio，这个出色的在线音乐广播电台，完全依赖于Flash。这是一个伟大的服务，我很高兴成为付费订阅者。但是Flash
    Player是一个持续的问题来源。它定期失去与音频系统的连接，并且不喜欢设备路由的变化，例如从电脑扬声器切换到外部声音系统时。当它出现问题时，需要刷新浏览器或重新启动才能再次启动。如果您需要用于测试的音频源，您应该寻找其他选项。
- en: 'JACK is a professional-quality, low-latency (meaning it adds no latency to
    your sound chain) sound server for connecting audio hardware to audio production
    software. JACK does not run standalone but requires *alsa-base*. JACK supports
    multiple audio backends: OSS; FFADO (formerly Freebob) for using FireWire recording
    interfaces on Linux; PortAudio, which is a simple cross-platform audio API; and
    CoreAudio, the Mac OS X audio API. Audacity uses PortAudio.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: JACK是一个专业质量、低延迟（意味着它不会向您的声音链添加延迟）的音频服务器，用于将音频硬件连接到音频生产软件。JACK不独立运行，但需要*alsa-base*。JACK支持多个音频后端：OSS；FFADO（以前称为Freebob）用于在Linux上使用FireWire录音接口；PortAudio，这是一个简单的跨平台音频API；以及CoreAudio，Mac
    OS X音频API。Audacity使用PortAudio。
- en: 'Let’s clear up some common confusions regarding PulseAudio and JACK. They address
    two different types of usage: PulseAudio is a device chooser and audio stream
    router for playback and recording, while JACK is an audio router for high-end
    audio production. JACK lets you route the output of multiple audio applications
    pretty much any way you want, so you can combine different synths and capture
    audio streams in various ways for recording. Pulse is CPU-intensive and creates
    too much latency for overdubbing and other latency-sensitive tasks, though both
    issues are improving as Pulse matures. It works fine for making simple recordings,
    and Audacity and JACK both support Pulse. You need the pulseaudio-module-jack
    plug-in for JACK support, which should be in your distro repositories.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们澄清一些关于PulseAudio和JACK的常见误解。它们针对两种不同的使用场景：PulseAudio是一个设备选择器和音频流路由器，用于播放和录音，而JACK是一个高端音频生产的音频路由器。JACK允许你以几乎任何你想要的方式路由多个音频应用程序的输出，因此你可以以不同的方式组合不同的合成器并捕获音频流进行录音。尽管PulseAudio在成熟的过程中这两个问题都在改善，但它对CPU的消耗很大，并且为叠加和其他对延迟敏感的任务创建了过多的延迟。它适用于制作简单的录音，Audacity和JACK都支持PulseAudio。你需要pulseaudio-module-jack插件来支持JACK，这个插件应该包含在你的发行版仓库中。
- en: When do you use JACK? You don’t need it when your recording interface handles
    all the connections you need for your recording session. If everything plugs into
    a single recording interface, just point Audacity to it, and you’re good to go.
    Though even here JACK can help by giving you flexible routing options, letting
    you mix the audio streams in different ways and making performance adjustments.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 你何时使用JACK？如果你的录音接口处理了录音会话所需的所有连接，你不需要它。如果所有设备都连接到单个录音接口，只需将Audacity指向它即可。尽管如此，JACK仍然可以通过提供灵活的路由选项来帮助你，让你以不同的方式混合音频流，并调整性能。
- en: You need JACK when you are using a FireWire recording interface. You need it
    when you want to incorporate software audio applications into your Audacity recording
    session. (JACK has great MIDI support, though Audacity does not support MIDI.)
    A simple example that we’ll go into in detail (in [Using JACK with Audacity](ch13s08.html
    "Using JACK with Audacity") in [Using JACK with Audacity](ch13s08.html "Using
    JACK with Audacity")) is adding the excellent Hydrogen software drum machine to
    an Audacity recording session. If you want to use Hydrogen to create a drum track
    in Audacity, you need JACK to connect the two.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用FireWire录音接口时，你需要JACK。当你想要将软件音频应用程序集成到Audacity录音会话中时，也需要它。（尽管Audacity不支持MIDI，但JACK对MIDI有很好的支持。）一个简单的例子，我们将在[使用Audacity与JACK](ch13s08.html
    "使用Audacity与JACK")（[使用Audacity与JACK](ch13s08.html "使用Audacity与JACK")）中详细说明，是将优秀的Hydrogen软件鼓机添加到Audacity录音会话中。如果你想用Hydrogen在Audacity中创建鼓轨，你需要JACK来连接这两个应用程序。
- en: Using ALSA
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用ALSA
- en: 'ALSA has two parts: the low-level base that supplies sound card drivers and
    interacts directly with audio hardware and a higher-level interface that contains
    the userland tools. *alsa-base* and its dependencies should already be present,
    but you may need to install *alsa-utils* to get the userland tools. *alsa-utils*
    gives you `alsamixer, aplay, speaker-test, arecord`, and number of sound files
    for testing your speakers.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ALSA由两部分组成：低级基础部分，提供声卡驱动程序并与音频硬件直接交互，以及一个高级接口，包含用户空间工具。*alsa-base*及其依赖项应该已经存在，但你可能需要安装*alsa-utils*来获取用户空间工具。*alsa-utils*为你提供了`alsamixer,
    aplay, speaker-test, arecord`以及用于测试扬声器的多个声音文件。
- en: 'Open a terminal and type in **`alsamixer`** to open the mixer console, shown
    in [Figure 13-1](ch13s05.html#using_alsamixer_to_configure_onboard_sur "Figure 13-1. Using
    alsamixer to configure onboard surround sound. On my system, all of the modules
    must be active—Surround, Center, LFE, and Side—for stereo sound to work, even
    though their volume controls have no effect."). ALSA runs in the console via an
    ncurses interface, which means it is completely keyboard controlled and does not
    require an X server. The top-left caption tells you a lot of useful information:
    your sound card and chipset, which set of functions you’re viewing, and the values
    for the highlighted setting. Use the arrow keys to navigate back and forth. There
    are three views: Playback, Capture, and All. Press the tab key to toggle between
    them. Pressing the esc key closes `alsamixer`.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 打开终端并输入**`alsamixer`**以打开混音控制台，如图[图13-1](ch13s05.html#using_alsamixer_to_configure_onboard_sur
    "图13-1. 使用alsamixer配置板载环绕声。在我的系统中，所有模块都必须处于活动状态——环绕、中心、LFE和侧面——才能使立体声工作，尽管它们的音量控制没有效果。")所示。ALSA通过ncurses界面在控制台运行，这意味着它是完全键盘控制的，不需要X服务器。左上角的标题告诉你很多有用的信息：你的声卡和芯片组，你正在查看的功能集，以及高亮设置的值。使用箭头键前后导航。有三个视图：播放、捕获和全部。按Tab键在它们之间切换。按Esc键关闭`alsamixer`。
- en: '![Using alsamixer to configure onboard surround sound. On my system, all of
    the modules must be active—Surround, Center, LFE, and Side—for stereo sound to
    work, even though their volume controls have no effect.](httpatomoreillycomsourcenostarchimages797851.png.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![使用alsamixer配置板载环绕声。在我的系统中，所有模块都必须处于活动状态——环绕、中心、LFE和侧面——才能使立体声工作，尽管它们的音量控制没有效果。](httpatomoreillycomsourcenostarchimages797851.png.jpg)'
- en: Figure 13-1. Using `alsamixer` to configure onboard surround sound. On my system,
    all of the modules must be active—Surround, Center, LFE, and Side—for stereo sound
    to work, even though their volume controls have no effect.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-1. 使用`alsamixer`配置板载环绕声。在我的系统中，所有模块都必须处于活动状态——环绕、中心、LFE和侧面——才能使立体声工作，尽管它们的音量控制没有效果。
- en: Press the F2 key to see detailed information on all your detected audio devices,
    as in [Figure 13-2](ch13s05.html#alsamixer_queries_the_solidus_proc_files "Figure 13-2. alsamixer
    queries the /proc filesystem to show detailed information on your audio devices.").
    Note that they are numbered from zero. Use the arrow keys to scroll up and down,
    and press the return key to close the information window.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 按下F2键，可以看到所有检测到的音频设备的详细信息，如图[图13-2](ch13s05.html#alsamixer_queries_the_solidus_proc_files
    "图13-2. alsamixer查询/proc文件系统以显示音频设备的详细信息。")所示。注意，它们从零开始编号。使用箭头键上下滚动，并按回车键关闭信息窗口。
- en: '![alsamixer queries the /proc filesystem to show detailed information on your
    audio devices.](httpatomoreillycomsourcenostarchimages797853.png.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![alsamixer查询/proc文件系统以显示音频设备的详细信息。](httpatomoreillycomsourcenostarchimages797853.png.jpg)'
- en: Figure 13-2. `alsamixer` queries the */proc* filesystem to show detailed information
    on your audio devices.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-2. `alsamixer`查询*/proc*文件系统以显示音频设备的详细信息。
- en: '[Figure 13-3](ch13s05.html#the_alsamixer_playback_screen_controls_m "Figure 13-3. The
    alsamixer playback screen controls muting and volume on playback devices.") shows
    the Playback configuration screen.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '[图13-3](ch13s05.html#the_alsamixer_playback_screen_controls_m "图13-3. alsamixer播放屏幕控制播放设备的静音和音量。")显示了播放配置屏幕。'
- en: '![The alsamixer playback screen controls muting and volume on playback devices.](httpatomoreillycomsourcenostarchimages797855.png.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![alsamixer播放屏幕控制播放设备的静音和音量。](httpatomoreillycomsourcenostarchimages797855.png.jpg)'
- en: Figure 13-3. The `alsamixer` playback screen controls muting and volume on playback
    devices.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-3. `alsamixer`播放屏幕控制播放设备的静音和音量。
- en: Setting Recording and Playback Levels in alsamixer
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在alsamixer中设置录音和播放级别
- en: '`alsamixer` only displays functions that your sound card is capable of performing.
    Here are the basic `alsamixer` commands:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '`alsamixer`仅显示您的声卡能够执行的功能。以下是基本的`alsamixer`命令：'
- en: The little boxes with MM in the playback menu mean those functions are muted,
    or disabled. Toggle the M key to mute/unmute, and the MM turns to 00.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 播放菜单中带有MM的小方块表示这些功能被静音或禁用。切换M键以静音/取消静音，MM变为00。
- en: 00 means zero volume, so use the up- and down-arrow keys to adjust it. page
    up increases volume by 5, page down decreases volume by 5, and end sets the volume
    to 0.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 00表示静音，因此请使用上下箭头键调整它。Page Up增加音量5，Page Down减少音量5，End将音量设置为0。
- en: When there are two channels on one slider, you can adjust each one independently.
    Q increases the left channel, and Z decreases it. E increases the right channel,
    and C decreases it.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当一个滑块上有两个通道时，你可以独立调整每个通道。Q增加左通道，Z减少它。E增加右通道，C减少它。
- en: In the Capture screen, press the spacebar to select the active recording (Capture)
    device. There may be more than two options, so press it several times to see what
    your choices are.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在捕获屏幕上，按空格键选择活动录音（捕获）设备。可能有超过两个选项，所以按几次以查看你的选择。
- en: Press the F1 key to see a Help menu. F2 displays your */proc* information, which
    shows you what is actually detected and working, as well as device addresses.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按F1键查看帮助菜单。按F2显示你的*/proc*信息，它显示实际检测和工作的内容，以及设备地址。
- en: Sometimes you will experience static or too-low volume that is caused by having
    unnecessary functions enabled. For example, the Playback screen for my ATI onboard
    sound shows a front mic volume control. When this is enabled, it causes static.
    When I’m using headphones, the Headphone control needs to be turned on, but changing
    the volume level has little effect, and I need to use both the Master and PCM
    volume controls. The Master volume control is not needed for the speakers, but
    the Headphone control is. Trial and error is about the only way to figure these
    things out, and lower-end sound cards are more troublesome and quirky than the
    better-quality ones.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你会遇到由启用不必要的功能引起的静电或音量太低的情况。例如，我的ATI板载声卡的播放屏幕显示一个前置麦克风音量控制。当这个功能被启用时，会导致静电。当我使用耳机时，耳机控制需要打开，但改变音量级别几乎没有效果，我需要使用主控和PCM音量控制。主控音量控制对于扬声器不是必需的，但耳机控制是。试错是找出这些事情的唯一方法，低端声卡比高质量声卡更麻烦和古怪。
- en: Master vs. PCM
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主控与PCM
- en: 'There is often confusion over Master and PCM playback settings. You usually
    need both Master and PCM to enable playback, though sometimes only the PCM slider
    has any effect. If the Master slider has no effect, this means either there is
    no hardware volume control built into your sound card or your sound card driver
    is lacking this functionality. Master is the master volume control, and PCM stands
    for *pulse code modulation*. Remember [Audio File Formats and Quality Settings](ch01s13.html
    "Audio File Formats and Quality Settings") in [Final Mixdown](ch01s12.html "Final
    Mixdown"), where we learned about converting analog signals to digital representations?
    ALSA’s definition of PCM sorts it out for us:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在主控和PCM播放设置上常常存在混淆。你通常需要主控和PCM才能启用播放，尽管有时只有PCM滑块有影响。如果主控滑块没有效果，这意味着你的声卡中可能没有内置硬件音量控制，或者你的声卡驱动程序缺少此功能。主控是主音量控制，PCM代表*脉冲编码调制*。记住[音频文件格式和质量设置](ch01s13.html
    "音频文件格式和质量设置")在[最终混音](ch01s12.html "最终混音")中，我们学习了将模拟信号转换为数字表示的方法？ALSA对PCM的定义为我们解决了这个问题：
- en: Although abbreviation PCM stands for “pulse code modulation,” we are understanding
    it as general digital audio processing with volume samples generated in continuous
    time periods.
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 虽然PCM的缩写代表“脉冲编码调制”，但我们理解它为在连续时间段内生成音量样本的通用数字音频处理。
- en: So think of ALSA’s PCM channel as a virtual sound card.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 所以把ALSA的PCM通道想象成一个虚拟声卡。
- en: Multiple Sound Cards
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 多个声卡
- en: 'If you have more than one audio interface, `alsamixer` numbers them from zero.
    For example, I have both onboard sound and the M-Audio MobilePre connected to
    a USB port. The MobilePre is #1, so to control it, I need to open `alsamixer`
    with this command:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个以上的音频接口，`alsamixer`从零开始编号。例如，我既有板载声卡也有M-Audio MobilePre连接到USB端口。MobilePre是#1，所以为了控制它，我需要用以下命令打开`alsamixer`：
- en: '[PRE2]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '`-c1` means “card number 1.” How do you know what your card numbers are? One
    way is to query */proc*:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '`-c1`意味着“卡号1”。你怎么知道你的卡号是多少？一种方法是通过查询*/proc*：'
- en: '[PRE3]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Another way is to press F2 in `alsamixer` ([Figure 13-2](ch13s05.html#alsamixer_queries_the_solidus_proc_files
    "Figure 13-2. alsamixer queries the /proc filesystem to show detailed information
    on your audio devices.")).
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种方法是按`alsamixer`中的F2（[图13-2](ch13s05.html#alsamixer_queries_the_solidus_proc_files
    "图13-2. alsamixer查询/proc文件系统以显示你的音频设备的详细信息")）。
- en: Adjusting Volume Levels
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 调整音量级别
- en: When you’re adjusting recording and playback settings in Audacity, you can have
    `alsamixer` open at the same time, as [Figure 13-4](ch13s05.html#the_alsamixer_capture_window_controls_de
    "Figure 13-4. The alsamixer Capture window controls device selection and volume
    on recording devices. Here it is tiled with Audacity for controlling the recording
    volume level.") shows. It’s a fast way to tweak volume settings and to find out
    what the `alsamixer` settings actually control. In this example, a bit of trial
    and error showed me that the Mic Boost and the first Capture slider controlled
    the microphone recording volume and that this sound card has a real stereo microphone
    input with two channels. (Remember, the Q and Z keys raise and lower the volume
    on the left channel, and E and C control the right channel.)
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在 Audacity 中调整录音和播放设置时，你可以同时打开 `alsamixer`，如图 13-4 所示。这是一种快速调整音量设置并了解 `alsamixer`
    设置实际控制什么的方法。在这个例子中，一些尝试和错误让我发现麦克风增益和第一个捕获滑块控制麦克风录音音量，并且这张声卡有一个真正的立体声麦克风输入，具有两个通道。（记住，Q
    和 Z 键提升和降低左通道的音量，而 E 和 C 控制右通道。）
- en: '![The alsamixer Capture window controls device selection and volume on recording
    devices. Here it is tiled with Audacity for controlling the recording volume level.](httpatomoreillycomsourcenostarchimages797857.png.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![alsamixer 捕获窗口控制录音设备上的设备选择和音量。这里它与 Audacity 并排，用于控制录音音量级别。](httpatomoreillycomsourcenostarchimages797857.png.jpg)'
- en: Figure 13-4. The `alsamixer` Capture window controls device selection and volume
    on recording devices. Here it is tiled with Audacity for controlling the recording
    volume level.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13-4。`alsamixer` 捕获窗口控制录音设备上的设备选择和音量。这里它与 Audacity 并排，用于控制录音音量级别。
- en: Even in a simple setup like this, there are multiple recording level controls,
    both in ALSA and Audacity. Keep `alsamixer` open for adjustments during recording.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 即使在这样的简单设置中，也有多个录音电平控制，包括 ALSA 和 Audacity。在录音期间保持 `alsamixer` 打开以进行调整。
- en: Note
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you need a good excuse to splurge on a dual-monitor setup, audio production
    is a great reason. You can have Audacity, JACK, and alsamixer on one screen and
    your other audio applications (like Hydrogen, other synths, special effects) on
    the second screen. Nice and tidy, and you don’t have to keep moving things out
    of the way.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要一个很好的理由来购买双显示器设置，音频制作是一个很好的理由。你可以在一个屏幕上运行 Audacity、JACK 和 alsamixer，而在第二个屏幕上运行你的其他音频应用程序（如
    Hydrogen、其他合成器、特殊效果）。既整洁又方便，你不必总是移动东西。
- en: Hardware Testing with alsa-utils
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 alsa-utils 进行硬件测试
- en: '*alsa-utils* includes some good commands to help you troubleshoot and test
    your hardware. Keep `alsamixer` open to the sound card you are testing so you
    can quickly try different settings. The most common cause of no sound is because
    it is muted in `alsamixer`.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '*alsa-utils* 包含一些有用的命令，可以帮助你排除硬件故障并进行测试。在测试声卡时保持 `alsamixer` 打开，这样你可以快速尝试不同的设置。没有声音的最常见原因是它在
    `alsamixer` 中被静音了。'
- en: Note
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you are running the JACK audio server, turn it off for these tests because
    these commands may not work when JACK is running. It is best to keep tests as
    simple as possible in any case.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在运行 JACK 音频服务器，请关闭它进行这些测试，因为这些命令在 JACK 运行时可能不起作用。在任何情况下，最好尽可能简化测试。
- en: 'This is a quick and annoying way to verify that your default sound card and
    speakers work. It should generate some white noise:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种快速且令人烦恼的验证默认声卡和扬声器是否正常工作的方法。它应该生成一些白噪声：
- en: '[PRE4]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'ctrl-C stops it. A nicer way is to use `aplay` to play a WAV file of your choosing,
    like this:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 按下 `ctrl-C` 可以停止它。一种更优雅的方法是使用 `aplay` 播放你选择的 WAV 文件，如下所示：
- en: '[PRE5]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '`-t` means “file type,” and your choices are `voc`, `wav`, `raw`, and `au`.
    `wav` is the default.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '`-t` 表示“文件类型”，你的选择有 `voc`、`wav`、`raw` 和 `au`。`wav` 是默认选项。'
- en: 'To see the PCM structure and a nice ASCII VU (volume units) meter, try this:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看 PCM 结构和漂亮的 ASCII VU（音量单位）表，请尝试以下操作：
- en: '[PRE6]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '`-V stereo` means “display stereo VU meter,” which is represented by the hash
    marks. These represent the RMS volume levels (root mean square, or average volume
    over time), and the percentage values are the peaks. You can see that this is
    a stereo CD-quality file, or 2-channel 16 bits at 44.1 kHz.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '`-V stereo` 表示“显示立体声VU表”，它由井号标记表示。这些代表均方根（RMS）音量水平（即时间上的平均音量），百分比值是峰值。你可以看到这是一个立体声CD质量文件，或者2通道16位44.1
    kHz。'
- en: 'What if you have more than one sound card? Use `aplay -l` to display the raw
    ALSA device information for all of your audio interfaces:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有多于一个声卡怎么办？使用 `aplay -l` 显示所有音频接口的原始 ALSA 设备信息：
- en: '[PRE7]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'ALSA devices are named in the format *interface:card,device*. Sound cards are
    numbered from zero. An ALSA interface is a PCM playback or recording device, a
    MIDI device, or a control device such as a mixer. The `hw` interface talks directly
    to the kernel, so this is the most direct way to test your audio hardware. This
    example sends a WAV file to the first ALSA interface, the ATI SB onboard sound
    chipset at `hw:0,0`:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: ALSA 设备的命名格式为 *interface:card,device*。声卡从零开始编号。ALSA 接口是一个 PCM 播放或录音设备、一个 MIDI
    设备，或者是一个控制设备，如混音器。`hw` 接口直接与内核通信，因此这是测试你的音频硬件的最直接方式。以下示例将一个 WAV 文件发送到第一个 ALSA
    接口，即 `hw:0,0` 的 ATI SB 板载声卡：
- en: '[PRE8]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Sometimes you’ll see an error message like this: `Warning: rate is not accurate
    (requested = 44100Hz, got = 48000Hz) please, try the plug plugin.` This means
    use `plughw` in place of `hw`:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你会看到这样的错误信息：“警告：速率不准确（请求 = 44100Hz，得到 = 48000Hz），请尝试使用 plug 插件。” 这意味着用 `plughw`
    替换 `hw`：
- en: '[PRE9]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '`hw` makes no conversions of any kind—think of it as your literal playback
    device. It can do only what the hardware supports, so some audio files might sound
    weird or not play at all. `plughw` is a special ALSA plug-in that is like `hw`
    with extra powers; it can perform whatever conversions are necessary to play your
    files. `aplay` supports only `voc`, `wav`, `raw`, or `au`, so you might as well
    stick with WAVs.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '`hw` 不进行任何转换——把它看作你的直接播放设备。它只能做硬件支持的事情，所以某些音频文件可能听起来很奇怪或者根本无法播放。`plughw` 是一个特殊的
    ALSA 插件，类似于 `hw` 但拥有额外的功能；它可以执行播放你的文件所需的任何转换。`aplay` 只支持 `voc`、`wav`、`raw` 或 `au`，所以你最好坚持使用
    WAV 文件。'
- en: 'This example plays a file on the second ALSA device, which in the example is
    the MobilePre:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子在第二个 ALSA 设备上播放文件，在这个例子中是 MobilePre：
- en: '[PRE10]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: If there were a third audio interface, it would be `hw:2,0`.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有第三个音频接口，它将是 `hw:2,0`。
- en: Testing Speakers
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试扬声器
- en: 'The `speaker-test` command helps you determine whether your speakers are connected
    in the correct order. This example tests two-channel stereo:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '`speaker-test` 命令可以帮助你确定你的扬声器是否按正确的顺序连接。以下示例测试了两通道立体声：'
- en: '[PRE11]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You should hear a pleasant woman’s voice say, “Front left, front right.” `-c2`
    means two channels, and `-l1` means run the test once.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该听到一位愉快的女士的声音说：“前左，前右。” `-c2` 表示两个通道，`-l1` 表示只运行一次测试。
- en: 'This chipset supports 5:1 surround sound, so you can test this too:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 这个芯片组支持 5:1 环绕声，所以你也可以测试这个：
- en: '[PRE12]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'You can test a single speaker with the `-s` option, like this example that
    tests the center speaker channel:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用 `-s` 选项测试单个扬声器，如下例测试中置扬声器通道：
- en: '[PRE13]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Notice the clever gotcha: The `speaker-test` output numbers the speakers from
    zero, but for the `-s` option, you have to start from 1.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 注意这个巧妙的陷阱：`speaker-test` 输出从零开始编号扬声器，但对于 `-s` 选项，你必须从 1 开始。
- en: '`-t wav` uses the included default WAV testing file; you might also try `pink`,
    which generates pink noise, and `sine`, which sounds like the sine wave tones
    from way back in the olden days of TV test screens. (Now they use infomercials.
    I miss the test screens.) You may specify different frequencies (in Hz) to use
    with the `sine` option, like this example that tests the subwoofer with a nice
    low 45 Hz tone:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '`-t wav` 使用包含的默认 WAV 测试文件；你也可以尝试 `pink`，它生成粉红噪声，以及 `sine`，它听起来像老式电视测试屏幕上的正弦波音调。（现在它们使用电视购物节目。我想念测试屏幕。）你可以指定与
    `sine` 选项一起使用的不同频率（以 Hz 为单位），如下例使用 45 Hz 的低音调测试低音炮：'
- en: '[PRE14]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: LFE means low frequency effects channel or low frequency emitter. This is the
    channel that handles low-pitched sounds ranging from 3 to 200 Hz. This is not
    the same as the physical port that you plug a subwoofer into, because the LFE
    signal can be routed to any speaker or speakers that support it.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: LFE 表示低频效果通道或低频发射器。这是处理 3 到 200 Hz 范围内低音的通道。这不同于你将低音炮插入的物理端口，因为 LFE 信号可以被路由到任何支持它的扬声器或扬声器组。
- en: Testing Recording
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试录音
- en: '`aplay` has a companion command, `arecord`. Remember to check `alsamixer` for
    the correct settings, such as capture device and volume controls. If your computer
    has both front and rear microphone ports, `alsamixer` should have an option to
    select the correct one. In this example, two audio devices are detected:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '`aplay` 有一个配套命令 `arecord`。记得检查 `alsamixer` 以获取正确的设置，例如捕获设备和音量控制。如果你的电脑有前后麦克风端口，`alsamixer`
    应该有一个选项来选择正确的端口。在这个例子中，检测到两个音频设备：'
- en: '[PRE15]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This example makes a test recording with the MobilePre:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子使用 MobilePre 进行测试录音：
- en: '[PRE16]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'ctrl-C stops recording. `-fcd` means CD-quality, which is 2-channel 16-bit
    at 44.1 kHz. `aplay` plays back the test recording:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: ctrl-C 停止录音。`-fcd` 表示 CD 质量，即 2 通道 16 位 44.1 kHz。`aplay` 播放测试录音：
- en: '[PRE17]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: ALSA Applications
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ALSA 应用程序
- en: 'ALSA creates a number of virtual interfaces for your sound card called *applications*.
    You can view these with `aplay`:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: ALSA 为你的声卡创建了许多虚拟接口，称为 *应用程序*。你可以使用 `aplay` 查看：
- en: '[PRE18]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'That’s a lot of applications! In ordinary use, these don’t matter to the user,
    or to applications that send sound streams to ALSA, because everything is handled
    behind the scenes. You can test these the same way you tested the `hw` interfaces:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 这有很多应用程序！在普通使用中，这些对用户或向 ALSA 发送声音流的应用程序来说并不重要，因为所有的事情都在幕后处理。你可以像测试 `hw` 接口一样测试这些：
- en: '[PRE19]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'On my system, `aplay` returned an identical set of applications for the MobilePre
    even though it doesn’t support surround sound but only two-channel stereo. So,
    this works:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在我的系统中，`aplay` 为 MobilePre 返回了相同的应用程序集合，即使它不支持环绕声，只有双声道立体声。所以，这是有效的：
- en: '[PRE20]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'But this doesn’t:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 但这并不：
- en: '[PRE21]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Querying Your Sound Card
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 查询你的声卡
- en: 'How do you know what abilities your sound card has, what bit depths and sample
    rates it supports, and how many channels? If you have no manual, you can query
    the */proc* filesystem to find out. Audio devices are in */proc/asound*. You can
    browse this directory in any file manager or from the command line. For example,
    on my system */proc/asound/card0* is the onboard ATI chipset. Reading */proc/asound/card0/codec#0*
    spits out a lot of information, and this snippet shows that this chipset supports
    high sampling rates and bit depths:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 你如何知道你的声卡有什么能力，它支持哪些位深度和采样率，以及有多少通道？如果你没有手册，你可以查询 */proc* 文件系统来找出这些信息。音频设备位于
    */proc/asound*。你可以使用任何文件管理器或从命令行浏览这个目录。例如，在我的系统中 */proc/asound/card0* 是集成在主板上的
    ATI 芯片组。读取 */proc/asound/card0/codec#0* 会输出大量信息，这个片段显示这个芯片组支持高采样率和位深度：
- en: '[PRE22]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The MobilePre looks like this:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: MobilePre 看起来是这样的：
- en: '[PRE23]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: How did I know which */proc* files to read? I tried ’em all. Do not try to edit
    */proc* files. */proc* is a pseudo-filesystem that exists only in memory, showing
    the current state of the kernel and operating system.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 我是如何知道该读取哪些 */proc* 文件的呢？我试了所有的。不要尝试编辑 */proc* 文件。*/proc* 是一个仅存在于内存中的伪文件系统，显示内核和操作系统的当前状态。
- en: Using JACK with Audacity
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 JACK 与 Audacity
- en: The JACK Audio Connection Kit is a marvelous creation. Its original creator
    was Paul Davis, and now Mr. Davis and a team of developers support JACK. It is
    a professional-quality, low-latency sound server for Linux and any POSIX-compliant
    operating system such as Mac OS X, Solaris, AIX, HP-UX, and IRIX. Currently it
    runs well on Linux, Mac OS X, and FreeBSD.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: JACK 音频连接套件是一个了不起的创造。它的原始创造者是 Paul Davis，现在 Davis 先生和一支开发团队支持 JACK。它是一个专业质量、低延迟的音效服务器，适用于
    Linux 和任何 POSIX 兼容的操作系统，如 Mac OS X、Solaris、AIX、HP-UX 和 IRIX。目前它在 Linux、Mac OS
    X 和 FreeBSD 上运行良好。
- en: Note
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Phonon (in KDE4) doesn’t get in the way when you’re using Audacity, but Pulse-Audio
    often does, so see [Turning PulseAudio and Phonon Off](ch13s09.html "Turning PulseAudio
    and Phonon Off") in [Turning PulseAudio and Phonon Off](ch13s09.html "Turning
    PulseAudio and Phonon Off") to learn how to disable it.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用 Audacity 时，Phonon（在 KDE4 中）不会妨碍你，但 Pulse-Audio 经常会，所以请参阅 [关闭 PulseAudio
    和 Phonon](ch13s09.html "关闭 PulseAudio 和 Phonon") 来了解如何禁用它。
- en: JACK acts like a switchboard to route audio signals between your audio hardware
    and software without adding latency. JACK can interface with only one sound card
    at a time, but it can interface with any number of software audio production applications,
    as long as they are JACK-aware. If you have a hardware device that controls all
    of your audio sources, then you don’t need JACK. For example, in my little studio,
    my MobilePre can handle up to 4 inputs, and the Saffire Pro can handle as many
    as 26\. If everything I want to record plugs into one of those, I don’t need JACK.
    But suppose I want to use Hydrogen, the software drum kit for Linux? This is an
    excellent, fun drum synthesizer that is in most distro repositories, and it comes
    with a batch of demos so I can immediately start playing with it. How do I connect
    Hydrogen to Audacity? This is where JACK comes in.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: JACK就像一个交换机，可以在你的音频硬件和软件之间路由音频信号，而不会增加延迟。JACK一次只能与一张声卡接口，但它可以与任何数量的软件音频制作应用程序接口，只要它们是JACK感知的。如果你有一个控制所有音频源的硬件设备，那么你不需要JACK。例如，在我的小型录音室里，我的MobilePre可以处理多达4个输入，而Saffire
    Pro可以处理多达26个。如果我想录制的所有设备都连接到这些设备之一，我就不需要JACK。但是，假设我想使用Hydrogen，Linux的软件鼓组？这是一个出色的、有趣的鼓合成器，大多数发行版仓库中都有，还附带了一系列演示，我可以立即开始使用它。我该如何将Hydrogen连接到Audacity？这就是JACK发挥作用的地方。
- en: The order in which you start your various applications is important. First get
    everything running and connected with JACK, and then Audacity always starts last.
    It seems we should be able to open Audacity after JACK is running, connect it
    to JACK, and then run whatever else we want. Sometimes this works because JACK
    updates new connections dynamically. But Audacity can be finicky, so I get everything
    else going first. Usually everything works fine on the first try, but sometimes
    Audacity throws out an error message about having the wrong sound device or some
    other unhappiness. Closing and reopening it usually takes care of this.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 你启动各种应用程序的顺序很重要。首先让所有东西都运行并连接到JACK，然后Audacity总是最后一个启动。看起来我们可以在JACK运行后打开Audacity，将其连接到JACK，然后运行我们想要的任何其他东西。有时这可以工作，因为JACK会动态更新新的连接。但Audacity可能会很挑剔，所以我先启动其他所有东西。通常第一次尝试一切都会正常工作，但有时Audacity会抛出一个错误消息，关于错误的音频设备或其他不愉快的事情。关闭并重新打开它通常可以解决这个问题。
- en: Let’s use the MobilePre, since it is easy and simple. It has two microphones
    connected for vocal and a guitar, and then we’ll add a nice drum track. First
    close all other audio applications, and then start JACK. JACK can run from the
    command line or the Qjackctl graphical interface. We’ll use Qjackctl, which should
    appear in your system menu as JACK Control ([Figure 13-5](ch13s08.html#qjackctl_comma_the_graphical_jack_contro
    "Figure 13-5. Qjackctl, the graphical JACK controller")).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用MobilePre，因为它简单易用。它连接了两个麦克风，用于声乐和吉他，然后我们将添加一个不错的鼓轨。首先关闭所有其他音频应用程序，然后启动JACK。JACK可以从命令行或Qjackctl图形界面运行。我们将使用Qjackctl，它应该出现在你的系统菜单中，作为JACK控制（[图13-5](ch13s08.html#qjackctl_comma_the_graphical_jack_contro
    "图13-5. Qjackctl，图形JACK控制器")）。
- en: '![Qjackctl, the graphical JACK controller](httpatomoreillycomsourcenostarchimages797859.png.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![Qjackctl，图形JACK控制器](httpatomoreillycomsourcenostarchimages797859.png.jpg)'
- en: Figure 13-5. Qjackctl, the graphical JACK controller
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-5. Qjackctl，图形JACK控制器
- en: If JACK starts up when you open Qjackctl, stop it, and then click the Setup
    button. You’ll see a configuration dialog like [Figure 13-6](ch13s08.html#selecting_your_audio_devices_and_configu
    "Figure 13-6. Selecting your audio devices and configuring JACK in the Qjackctl
    Setup dialog").
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打开Qjackctl时JACK启动了，请停止它，然后点击设置按钮。你会看到一个配置对话框，类似于[图13-6](ch13s08.html#selecting_your_audio_devices_and_configu
    "图13-6. 在Qjackctl设置对话框中选择你的音频设备并配置JACK")。
- en: '![Selecting your audio devices and configuring JACK in the Qjackctl Setup dialog](httpatomoreillycomsourcenostarchimages797861.png.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![在Qjackctl设置对话框中选择你的音频设备并配置JACK](httpatomoreillycomsourcenostarchimages797861.png.jpg)'
- en: Figure 13-6. Selecting your audio devices and configuring JACK in the Qjackctl
    Setup dialog
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-6. 在Qjackctl设置对话框中选择你的音频设备并配置JACK
- en: Check Realtime in the Parameters column if you are using a real-time kernel.
    Otherwise, don’t check it.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你使用的是实时内核，请在“参数”列中检查“实时”选项。否则，不要勾选。
- en: If there is a monitoring port on your recording interface, check H/W Monitor
    to enable it. Leave everything else in the first column unchecked.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你的录音接口上有监控端口，请勾选“H/W Monitor”以启用它。将第一列中的其他所有选项保持未勾选。
- en: In the next column, leave Priority at (default).
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一列中，将优先级保留为（默认）。
- en: Leave Frames/Period at the default of 1024.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将帧/时期保持在默认的1024。
- en: Set your sample rate and make sure it agrees with Audacity, Hydrogen, and any
    other audio software you are running. It must be a rate that your recording interface
    supports.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置您的采样率，并确保它与Audacity、Hydrogen和您正在运行的任何其他音频软件相匹配。它必须是您的录音接口支持的速率。
- en: Periods/Buffer defaults to 2; leave it there for now.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 时期/缓冲区默认为2；目前先保持这个设置。
- en: Leave Port Maximum and Timeout at their defaults of 256 and 500, respectively.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将端口最大值和超时时间分别保持在它们的默认值256和500。
- en: In the third column, choose “alsa” as the driver.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第三列，选择“alsa”作为驱动程序。
- en: Choose your input and output devices; click the little arrows to the right to
    display all of your sound devices.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您的输入和输出设备；点击右侧的小箭头以显示所有声音设备。
- en: Set the numbers of input and output channels, which are whatever your audio
    interface supports. The MobilePre has two channels for both input and output.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置输入和输出通道的数量，这些数量取决于您的音频接口支持的数量。MobilePre的输入和输出都有两个通道。
- en: Click **OK**, and then click the **Start** button. It is normal to see a few
    xruns at startup. Click the Messages and Status buttons to display everything
    you need to know about your JACK session, both good and bad.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**，然后点击**开始**按钮。启动时看到一些xruns是正常的。点击消息和状态按钮以显示有关您的JACK会话所需了解的一切，无论是好是坏。
- en: Now start up Hydrogen. [Figure 13-7](ch13s08.html#the_excellent_hydrogen_drum_synthesizer
    "Figure 13-7. The excellent Hydrogen drum synthesizer") shows what Hydrogen looks
    like.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 现在启动Hydrogen。[图13-7](ch13s08.html#the_excellent_hydrogen_drum_synthesizer "图13-7.
    优秀的Hydrogen鼓合成器")显示了Hydrogen的外观。
- en: '![The excellent Hydrogen drum synthesizer](httpatomoreillycomsourcenostarchimages797863.png.jpg)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![优秀的Hydrogen鼓合成器](httpatomoreillycomsourcenostarchimages797863.png.jpg)'
- en: Figure 13-7. The excellent Hydrogen drum synthesizer
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-7. 优秀的Hydrogen鼓合成器
- en: Hydrogen, like so many good Linux synths, lets you select which audio interface
    to use and which audio backend. Go into **Tools** > **Preferences** > **Audio
    System** and select JACK. Make sure that the Connect to Default Output Pair option
    is not checked ([Figure 13-8](ch13s08.html#configuring_hydrogen_to_use_jack "Figure 13-8. Configuring
    Hydrogen to use JACK")).
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: Hydrogen，像许多优秀的Linux合成器一样，允许您选择要使用的音频接口和音频后端。进入**工具** > **首选项** > **音频系统**并选择JACK。确保“连接到默认输出对”选项未被勾选([图13-8](ch13s08.html#configuring_hydrogen_to_use_jack
    "图13-8. 配置Hydrogen使用JACK"))。
- en: Now go to **Project** > **Open Demo** and select a demo to play. Click the **Loop
    Song** button (to the right of the Fast Forward button) to keep it going while
    you’re testing.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 现在转到**项目** > **打开演示**并选择一个演示来播放。点击（快进按钮右侧的）**循环歌曲**按钮，在您测试时保持其播放。
- en: Next, click the **Connect** button in Qjackctl. [Figure 13-9](ch13s08.html#jack_and_hydrogen_are_running_comma_and
    "Figure 13-9. JACK and Hydrogen are running, and the Connections window shows
    that Hydrogen is connected to your audio interface’s playback ports.") is the
    result. The System clients are the MobilePre channels; System clients always represent
    your audio interface, and of course Hydrogen is labeled as Hydrogen. You should
    hear a drum track on the playback device selected in JACK. If you don’t, connect
    the two Hydrogen out ports to two System playback ports. You will see lines connecting
    them.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，在Qjackctl中点击**连接**按钮。[图13-9](ch13s08.html#jack_and_hydrogen_are_running_comma_and
    "图13-9. JACK和Hydrogen正在运行，连接窗口显示Hydrogen已连接到您的音频接口的播放端口。")是结果。系统客户端是MobilePre通道；系统客户端始终代表您的音频接口，当然Hydrogen被标记为Hydrogen。您应该在JACK中选择的播放设备上听到鼓点。如果您没有听到，将两个Hydrogen输出端口连接到两个系统播放端口。您将看到连接它们的线条。
- en: Configure your playback device in JACK’s Setup dialog, whether it’s headphones,
    external speakers, or something else.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在JACK的设置对话框中配置您的播放设备，无论是耳机、外接扬声器还是其他设备。
- en: '![Configuring Hydrogen to use JACK](httpatomoreillycomsourcenostarchimages797865.png.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![配置Hydrogen使用JACK](httpatomoreillycomsourcenostarchimages797865.png.jpg)'
- en: Figure 13-8. Configuring Hydrogen to use JACK
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-8. 配置Hydrogen使用JACK
- en: '![JACK and Hydrogen are running, and the Connections window shows that Hydrogen
    is connected to your audio interface’s playback ports.](httpatomoreillycomsourcenostarchimages797867.png.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![JACK和Hydrogen正在运行，连接窗口显示Hydrogen已连接到您的音频接口的播放端口。](httpatomoreillycomsourcenostarchimages797867.png.jpg)'
- en: Figure 13-9. JACK and Hydrogen are running, and the Connections window shows
    that Hydrogen is connected to your audio interface’s playback ports.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-9. JACK和Hydrogen正在运行，连接窗口显示Hydrogen已连接到您的音频接口的播放端口。
- en: 'Now open Audacity. Configure Audacity to use JACK Audio Connection Kit: Hydrogen
    as the recording device and press the Record button. You should see something
    like [Figure 13-10](ch13s08.html#audacity_is_recording_the_hydrogen_drum "Figure 13-10. Audacity
    is recording the Hydrogen drum track, thanks to JACK.").'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: '![Audacity is recording the Hydrogen drum track, thanks to JACK.](httpatomoreillycomsourcenostarchimages797869.png.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
- en: Figure 13-10. Audacity is recording the Hydrogen drum track, thanks to JACK.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: Voilà! Audacity is recording Hydrogen! The JACK Connections window now displays
    two new PortAudio clients, which are the Audacity recording inputs ([Figure 13-11](ch13s08.html#jack_connects_hydrogen_and_the_mobilepre
    "Figure 13-11. JACK connects Hydrogen and the MobilePre to Audacity. Audacity
    is represented by the two PortAudio clients. In this example, Hydrogen is being
    recorded through the two PortAudio clients and simultaneously playing back through
    the two system playback ports.")).
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: '![JACK connects Hydrogen and the MobilePre to Audacity. Audacity is represented
    by the two PortAudio clients. In this example, Hydrogen is being recorded through
    the two PortAudio clients and simultaneously playing back through the two system
    playback ports.](httpatomoreillycomsourcenostarchimages797871.png.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
- en: Figure 13-11. JACK connects Hydrogen and the MobilePre to Audacity. Audacity
    is represented by the two PortAudio clients. In this example, Hydrogen is being
    recorded through the two PortAudio clients and simultaneously playing back through
    the two system playback ports.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: Usually the Connections window opens with the necessary connections in place
    and dynamically creates new ones on demand. If it doesn’t or you want to change
    them, just click a Readable Client, then click a Writable Client, and then click
    the Connect button (or Disconnect). You can create multiple connections to each
    client.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: The MobilePre is a two-channel recording interface that supports up to four
    inputs, so when I record something through the microphones, it goes into the same
    two-channel stereo track as the Hydrogen drum track.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: 'In some of the older versions of Audacity and JACK, the recording device selection
    was not consistent. Sometimes selecting JACK Audio Connection Kit: System worked,
    and sometimes I had to use JACK Audio Connection Kit: <something else>, depending
    on what else I was using. So, you may have to try a bit of trial and error.'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: Connecting a FireWire Recording Interface
  id: totrans-210
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[Figure 13-12](ch13s08.html#the_ffado-mixer_for_the_focusrite_saffir "Figure 13-12. The
    ffado-mixer for the Focusrite Saffire Pro I/O 26") shows a simple example of using
    the Saffire Pro with JACK and Audacity. You need the ffado driver for Linux ([http://www.ffado.org/](http://www.ffado.org/))
    to use a FireWire recording interface, a FireWire adapter on your computer, and
    the correct cable to connect your FireWire device. There are two different FireWire
    plugs, 4-pin and 6-pin, and you must have the one that matches your device.'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 13-12](ch13s08.html#the_ffado-mixer_for_the_focusrite_saffir "图 13-12. Focusrite
    Saffire Pro I/O 26 的 ffado-mixer") 展示了使用 Saffire Pro 与 JACK 和 Audacity 的一个简单示例。您需要
    Linux 的 ffado 驱动程序([http://www.ffado.org/](http://www.ffado.org/))来使用 FireWire
    录音接口，计算机上的 FireWire 适配器以及正确的电缆来连接您的 FireWire 设备。有两种不同的 FireWire 插头，4 针和 6 针，您必须使用与您的设备匹配的插头。'
- en: '![The ffado-mixer for the Focusrite Saffire Pro I/O 26](httpatomoreillycomsourcenostarchimages797873.png.jpg)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![Focusrite Saffire Pro I/O 26 的 ffado-mixer](httpatomoreillycomsourcenostarchimages797873.png.jpg)'
- en: Figure 13-12. The ffado-mixer for the Focusrite Saffire Pro I/O 26
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13-12. Focusrite Saffire Pro I/O 26 的 ffado-mixer
- en: This is how I got the Saffire Pro working for this example. First I opened ffado-mixer,
    which comes with the ffado driver ([Figure 13-12](ch13s08.html#the_ffado-mixer_for_the_focusrite_saffir
    "Figure 13-12. The ffado-mixer for the Focusrite Saffire Pro I/O 26")).
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我如何让 Saffire Pro 在这个示例中工作。首先我打开了与 ffado 驱动程序一起提供的 ffado-mixer ([图 13-12](ch13s08.html#the_ffado-mixer_for_the_focusrite_saffir
    "图 13-12. Focusrite Saffire Pro I/O 26 的 ffado-mixer"))。
- en: Then I started Qjackctl, opened the Setup dialog, changed the driver to “firewire,”
    and changed the Interface to hw:0\. Then I opened Hydrogen, set it to use JACK
    as the audio backend, and then started a demo loop playing. The Saffire has headphone-monitoring
    ports, so I plugged headphones into the appropriate port and created connections
    in the JACK connector to route Hydrogen’s playback to the first two Saffire input
    ports, System playback_1 and playback_2.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我启动了 Qjackctl，打开设置对话框，将驱动程序更改为“firewire”，并将接口更改为 hw:0。然后我打开了 Hydrogen，将其设置为使用
    JACK 作为音频后端，并开始播放演示循环。Saffire 有耳机监听端口，所以我将耳机插入适当的端口，并在 JACK 连接器中创建连接，将 Hydrogen
    的回放路由到前两个 Saffire 输入端口，System playback_1 和 playback_2。
- en: 'Then I opened Audacity last of all. I made sure the sample rate was the same
    in ffado-mixer, JACK, and Audacity, and I configured Audacity to record four tracks,
    using the recording device JACK Audio Connection Kit: System.'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我最后打开了 Audacity。我确保在 ffado-mixer、JACK 和 Audacity 中采样率相同，并将 Audacity 配置为录制四轨，使用录音设备
    JACK Audio Connection Kit：系统。
- en: '[Figure 13-13](ch13s08.html#everything_is_working_colon_hydrogen_is "Figure 13-13. Everything
    is working: Hydrogen is both recording and playing back. Two mics are plugged
    into the Saffire Pro and are recording from Capture 3 and 4 to PortAudio 16 and
    17.") shows what this all looks like: There are four PortAudio clients, which
    means that four recording channels are open in Audacity. Hydrogen is using two
    of them, and I have two mics plugged into the Saffire Pro for recording on the
    other two.'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 13-13](ch13s08.html#everything_is_working_colon_hydrogen_is "图 13-13. 一切正常：Hydrogen
    既能录音也能回放。两个麦克风插入到 Saffire Pro 中，从 Capture 3 和 4 录制到 PortAudio 16 和 17。") 展示了这一切的样子：有四个
    PortAudio 客户端，这意味着 Audacity 中打开了四个录音通道。Hydrogen 使用其中的两个，而我将两个麦克风插入到 Saffire Pro
    中，用于其他两个通道的录音。'
- en: '![Everything is working: Hydrogen is both recording and playing back. Two mics
    are plugged into the Saffire Pro and are recording from Capture 3 and 4 to PortAudio
    16 and 17.](httpatomoreillycomsourcenostarchimages797875.png.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![一切正常：Hydrogen 既能录音也能回放。两个麦克风插入到 Saffire Pro 中，从 Capture 3 和 4 录制到 PortAudio
    16 和 17。](httpatomoreillycomsourcenostarchimages797875.png.jpg)'
- en: 'Figure 13-13. Everything is working: Hydrogen is both recording and playing
    back. Two mics are plugged into the Saffire Pro and are recording from Capture
    3 and 4 to PortAudio 16 and 17.'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13-13. 一切正常：Hydrogen 既能录音也能回放。两个麦克风插入到 Saffire Pro 中，从 Capture 3 和 4 录制到 PortAudio
    16 和 17。
- en: '[Figure 13-14](ch13s08.html#how_it_looks_in_audacity_colon_two_hydro "Figure 13-14. How
    it looks in Audacity: two Hydrogen tracks recording and two mic tracks") shows
    how the recording session looks in Audacity.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 13-14](ch13s08.html#how_it_looks_in_audacity_colon_two_hydro "图 13-14. 在
    Audacity 中的样子：两个 Hydrogen 轨道正在录音，两个麦克风轨道") 展示了在 Audacity 中的录音会话。'
- en: '![How it looks in Audacity: two Hydrogen tracks recording and two mic tracks](httpatomoreillycomsourcenostarchimages797877.png.jpg)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![在 Audacity 中的样子：两个 Hydrogen 轨道正在录音，两个麦克风轨道](httpatomoreillycomsourcenostarchimages797877.png.jpg)'
- en: 'Figure 13-14. How it looks in Audacity: two Hydrogen tracks recording and two
    mic tracks'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-14. 在Audacity中的外观：两个Hydrogen轨道录音和两个麦克风轨道
- en: Creating Persistent Configurations
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建持久配置
- en: In the JACK Setup dialog, you can create and save multiple profiles. Make a
    configuration; then on the first tab enter a name for it in the Preset Name box,
    and then click **Save**. To open a profile, click the drop-down arrow in the Preset
    Name box.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在JACK设置对话框中，你可以创建和保存多个配置文件。创建一个配置；然后在第一个选项卡中在预设名称框中为其输入一个名称，然后点击**保存**。要打开一个配置文件，点击预设名称框中的下拉箭头。
- en: The Connections window only displays your current setup and does not save it,
    so you must use the Patchbay to create saved connections. Get everything hooked
    up the way you like in Connections, open the Patchbay, and then click the **New**
    button. A little message will pop up and ask you if you want to save your current
    Connections configuration ([Figure 13-15](ch13s08.html#the_patchbay_asks_if_you_want_to_save_yo
    "Figure 13-15. The Patchbay asks if you want to save your current Connections
    configuration.")).
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 连接窗口只显示你的当前设置，并不保存它，因此你必须使用Patchbay来创建保存的连接。在连接中按照你喜欢的设置连接好一切，打开Patchbay，然后点击**新建**按钮。一个小消息会弹出来询问你是否要保存当前的连接配置（[图13-15](ch13s08.html#the_patchbay_asks_if_you_want_to_save_yo
    "图13-15. Patchbay会询问你是否要保存当前的连接配置.")）。
- en: '![The Patchbay asks if you want to save your current Connections configuration.](httpatomoreillycomsourcenostarchimages797879.png.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![Patchbay会询问你是否要保存当前的连接配置](httpatomoreillycomsourcenostarchimages797879.png.jpg)'
- en: Figure 13-15. The Patchbay asks if you want to save your current Connections
    configuration.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-15. Patchbay会询问你是否要保存当前的连接配置。
- en: Click **Yes**, and this will automatically duplicate the current settings in
    the Connections window. You can modify this or accept it as is and save it with
    the Save button, giving it a unique name ([Figure 13-16](ch13s08.html#you_can_edit_what_the_patchbay_captured
    "Figure 13-16. You can edit what the Patchbay captured for you or save it as is.")).
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**是**，这将自动在连接窗口中复制当前设置。你可以修改它，或者直接接受并使用保存按钮保存，给它一个独特的名称（[图13-16](ch13s08.html#you_can_edit_what_the_patchbay_captured
    "图13-16. 你可以编辑Patchbay为你捕获的内容或直接保存.")）。
- en: '![You can edit what the Patchbay captured for you or save it as is.](httpatomoreillycomsourcenostarchimages797881.png.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![你可以编辑Patchbay为你捕获的内容或直接保存。](httpatomoreillycomsourcenostarchimages797881.png.jpg)'
- en: Figure 13-16. You can edit what the Patchbay captured for you or save it as
    is.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 图13-16. 你可以编辑Patchbay为你捕获的内容，或者直接保存。
- en: JACK Settings
  id: totrans-231
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: JACK设置
- en: Let’s take a look at the settings in the Qjackctl Setup window in more detail.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更详细地看看Qjackctl设置窗口中的设置。
- en: “Realtime” should be checked when you have a real-time kernel and unchecked
    when you do not.
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你使用实时内核时，应选中“实时”，不使用时则取消选中。
- en: Leave “No Memory Lock” unchecked when you have abundant RAM, but if you’re making
    do with a lower-end computer, try checking it if you get out-of-memory errors.
    This will prevent JACK from locking up memory for its exclusive use and freeing
    it for all processes that need it.
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你有充足的RAM时，请保持“无内存锁定”未选中，但如果你使用的是低端计算机，并且遇到内存不足错误，请尝试选中它。这将防止JACK锁定内存以供其专用，并释放给所有需要它的进程。
- en: Checking “Unlock Memory” helps lower-end computers by reclaiming memory slurped
    up by graphics toolkits like Qt and GTK, especially if you are running VST plug-ins
    under WINE. Leave it unchecked if you are not experiencing problems.
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选中“解锁内存”可以帮助低端计算机通过回收被Qt和GTK等图形工具包吞噬的内存，特别是如果你在WINE下运行VST插件时。如果没有遇到问题，请保持未选中状态。
- en: Checking “Soft Mode” tells JACK to ignore xrun errors and keep running. Use
    this when you want JACK to keep running no matter what, for example during a live
    show. It’s better to track down and fix the problem, but it’s not always possible,
    and xruns don’t always translate into big defects in your recording.
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选中“软模式”告诉JACK忽略xrun错误并继续运行。当你希望JACK无论发生什么都能继续运行时使用此选项，例如在直播表演期间。最好追踪并修复问题，但并非总是可能，而且xrun并不总是意味着你的录音有重大缺陷。
- en: You can check “Force 16-bit” when your audio interface supports only 16-bit
    recording. It’s not required because JACK uses 32-bit internally, and it tests
    32-, 24-, and 16-bit settings for your input and output devices. If your interface
    supports only 16 bits or you want to record at 16 bits, this will shush the routine
    error messages in the Messages window.
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当您的音频接口仅支持16位录音时，您可以勾选“强制16位”。这不是必需的，因为JACK内部使用32位，并且它会测试输入和输出设备的32位、24位和16位设置。如果您的接口仅支持16位或您想以16位进行录音，这将减少消息窗口中的常规错误消息。
- en: “H/W Monitor” and “H/W Meter” enable hardware monitoring and metering for devices
    with support for these functions. For example, the MobilePre has a zero-latency
    monitoring port, so this activates it. H/W Meter is for ALSA devices only, and
    few recording interfaces support this feature.
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “硬件监控”和“硬件计费”功能可以用于支持这些功能的设备进行硬件监控和计费。例如，MobilePre有一个零延迟监控端口，因此激活了该功能。硬件计费仅适用于ALSA设备，并且很少的录音接口支持此功能。
- en: The default Priority is 10, and this maxes out at 89. Usually the default is
    fine. If you are running a real-time kernel, try setting it to 70 or greater to
    see whether it makes any difference.
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认优先级为10，最大值为89。通常默认值就足够了。如果您正在运行实时内核，尝试将其设置为70或更高，以查看是否有所改变。
- en: Frames/Period controls your balance between lower latency and fewer errors.
    The default is a buffer of 1,024 frames per second sent from JACK to your sound
    card, and the lowest possible value that is supported by PC hardware is 64\. For
    lower latency, you want a lower value. If you see a lot of xruns in the Messages
    window, then increase this to a higher number until you have no *xruns*. An xrun
    is either a buffer overrun or an underrun, and xruns are audible as crackles and
    pops. On my system, JACK performs well at 128 frames, which results in very low
    latency. One audio frame is one sample times the number of channels, so a two-channel
    recording has two samples per frame. A *period* is a CPU processing cycle, so
    a Frames/Period rate of 128 results in a buffer size of 128 samples per channel,
    for a total of 256 samples per period for two channels. To get the buffer size
    in bytes, multiply Frames/Period by Periods/Buffers by 4.
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每周期帧数控制您在低延迟和较少错误之间的平衡。默认值是每秒从JACK发送到您的声卡的1,024帧缓冲区，PC硬件支持的最低值是64。为了降低延迟，您希望有一个更低的值。如果您在消息窗口中看到很多xruns，那么将此值增加到更高的数字，直到您没有*xruns*。xrun可能是缓冲区溢出或未溢出，xruns听起来像爆裂声和噼啪声。在我的系统中，JACK在128帧时表现良好，这导致非常低的延迟。一个音频帧是样本数乘以通道数，因此双通道录音每帧有两个样本。一个周期是CPU处理周期，因此每周期帧数为128意味着每个通道的缓冲区大小为128样本，对于两个通道总共是256样本。要获取缓冲区大小的字节数，将每周期帧数乘以周期/缓冲区数乘以4。
- en: The Sample Rate setting must equal your Audacity sample rate and be supported
    by your recording interface. Higher sample rates put a heavier load on your CPU
    and may require higher values in Frames/Period and Periods/Buffers.
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 样本率设置必须等于您的Audacity样本率，并且由您的录音接口支持。较高的样本率会对您的CPU造成更大的负担，可能需要在每周期帧数和周期/缓冲区数中设置更高的值。
- en: Periods/Buffers is an interesting bit of memory management. JACK divides the
    memory buffer into periods and transfers data in units of periods. The default
    is two periods per buffer. More periods equals higher latency and greater stability.
    Try different values in combination with Frames/Period to get latency down. For
    example, if it takes a high Frames/Period value to get xruns down, like 2,048,
    try increasing Periods/Buffers to 3 or 4, and try lowering Frames/Period.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 周期/缓冲区数是内存管理的一个有趣特性。JACK将内存缓冲区划分为周期，并以周期为单位传输数据。默认值是每个缓冲区两个周期。更多的周期意味着更高的延迟和更大的稳定性。尝试与每周期帧数不同的组合值以降低延迟。例如，如果需要较高的每周期帧数值来降低xruns，如2,048，尝试将周期/缓冲区数增加到3或4，并尝试降低每周期帧数。
- en: Every input or output connection is a port. The default is 256 ports, which
    is more than enough for most mortals, and you can have as many as 1,024.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个输入或输出连接都是一个端口。默认端口数量为256个，对于大多数人来说已经足够，您最多可以有1,024个端口。
- en: Timeout controls how long JACK waits to kill an application during periods of
    heavy congestion. The default is 500 milliseconds.
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 超时控制JACK在拥堵期间等待多长时间来杀死应用程序。默认值为500毫秒。
- en: The driver is set to whatever driver your recording interface uses. Freebob
    is the old version of the FFADO driver for FireWire interfaces, so select “firewire”
    since Freebob is obsolete (unless you are running an old system with actual old
    Freebob drivers). “dummy” is a fake driver for testing JACK.
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 驱动程序设置为你的录音接口使用的任何驱动程序。Freebob是FFADO驱动程序的老版本，用于FireWire接口，所以选择“firewire”，因为Freebob已经过时（除非你正在运行带有实际旧Freebob驱动程序的老系统）。“dummy”是一个用于测试JACK的假驱动程序。
- en: The Interface drop-down is active only when you select (default), meaning the
    ALSA default, for your Input and Output devices. Then you have a few extra choices
    such as */dev/dsp* and */dev/oss*. These are really not relevant in modern Linux
    systems, but JACK supports them if your system supports them.
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你为输入和输出设备选择（默认），即ALSA默认选项时，接口下拉菜单是激活的。然后你有一些额外的选择，如`/dev/dsp`和`/dev/oss`。这些在现代Linux系统中实际上并不相关，但如果你的系统支持它们，JACK会支持它们。
- en: Dither can make 16-bit recordings sound better; it is analogous to anti-aliasing
    fonts or dithering in graphical images. Don’t use dither for higher-bit depths
    because it is unnecessary, and they will sound worse. Think of it as blending
    the rough edges for a cleaner sound. Shaped dither is considered to be the best,
    but it is also the most CPU-intensive. Triangular is a good compromise between
    quality and CPU cost, and rectangular is lightweight and makes the smallest alterations.
    You don’t have to use dithering, but it doesn’t hurt to try it. Audacity also
    has dither, so be sure to use only one or the other.
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 混响可以使16位录音听起来更好；它类似于反锯齿字体或图形图像中的混响。不要为更高的位深度使用混响，因为它是不必要的，而且它们听起来会更差。把它想象成混合粗糙边缘以获得更干净的声音。形状混响被认为是最好的，但它也是最占用CPU的。三角形在质量和CPU成本之间提供了一个良好的折衷方案，而矩形则轻量级且改动最小。你不必使用混响，但尝试一下也无妨。Audacity也有混响，所以请确保只使用一个。
- en: On the Audio menu, you can choose Duplex, Capture Only, and Playback only. Usually
    Duplex works fine, but you can try the other settings to see whether there are
    any performance improvements.
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在音频菜单中，你可以选择全双工、仅捕获和仅回放。通常全双工工作得很好，但你也可以尝试其他设置，看看是否有性能提升。
- en: Pick your Input and Output Devices from the drop-down menus (the little arrows
    on the right).
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择你的输入和输出设备（右侧的小箭头）。
- en: Input Latency and Output Latency are for increasing latency. You might want
    to fiddle with these to bring your Input and Output streams into synchronization,
    especially when overdubbing or applying special effects.
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 输入延迟和输出延迟用于增加延迟。你可能需要调整这些设置，以便将输入和输出流同步，尤其是在进行多轨录音或应用特殊效果时。
- en: Turning PulseAudio and Phonon Off
  id: totrans-251
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关闭PulseAudio和Phonon
- en: 'PulseAudio can be a stubborn little daemon. The man page says you can turn
    it off with the command `pulseaudio --kill`. But depending on your particular
    Linux distribution, it won’t stay killed; instead, it respawns itself. This is
    how it works on Ubuntu 10.04: It has a normal init script to start it at boot,
    */etc/rc2.d/S03pulseaudio*. But when you try controlling this the normal way,
    it doesn’t work, because running `/etc/init.d/pulseaudio stop` doesn’t stop it.
    Removing */etc/rc2.d/S03pulseaudio* doesn’t prevent it from starting at boot.
    Fortunately, I am even more stubborn and have figured out how to control stopping
    and starting Pulse. I don’t want to remove it; I want it to run when I want it
    to run. (If you want to remove Pulse, it shouldn’t hurt anything to do so.)'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: PulseAudio可能是一个固执的小守护进程。手册页说明你可以使用命令`pulseaudio --kill`来关闭它。但根据你的特定Linux发行版，它不会一直保持关闭状态；相反，它会重新启动。这是在Ubuntu
    10.04上的工作方式：它有一个正常的初始化脚本在启动时启动它，`/etc/rc2.d/S03pulseaudio`。但当你尝试以正常方式控制它时，它不起作用，因为运行`/etc/init.d/pulseaudio
    stop`不会停止它。删除`/etc/rc2.d/S03pulseaudio`不会阻止它在启动时启动。幸运的是，我更加固执，已经找到了控制停止和启动Pulse的方法。我不想删除它；我想在我需要的时候运行它。（如果你想删除Pulse，这样做不会伤害任何东西。）
- en: First look for a graphical control panel for Pulse with an option to disable
    it. This is missing from my Ubuntu 10.04 installation but present on Fedora and
    other distros. If your system has this, it might be all you need.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 首先寻找一个带有禁用选项的Pulse图形控制面板。在我的Ubuntu 10.04安装中缺少这个选项，但在Fedora和其他发行版中存在。如果你的系统有这个选项，可能这就是你需要的所有东西。
- en: 'If there is no graphical control panel with an option to disable pulse, open
    */etc/pulse/client.conf*, change `autospawn = yes` to **`autospawn = no`**, and
    set `daemon-binary` to **`/bin/true`**. Make sure they are uncommented, like this:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有图形控制面板带有禁用 pulse 的选项，打开 */etc/pulse/client.conf*，将 `autospawn = yes` 改为
    **`autospawn = no`**，并将 `daemon-binary` 设置为 **`/bin/true`**。确保它们没有被注释，如下所示：
- en: '[PRE24]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Next, to stop it from starting at boot requires several steps. First remove
    the relevant `/etc/rc*.d/S*pulseaudio` link for your usual runlevel or rename
    it to a “kill” link. This prevents `init` from starting Pulse. On my system, that
    looks like this:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，要阻止它在启动时启动，需要几个步骤。首先，删除与你常用运行级别相关的 `/etc/rc*.d/S*pulseaudio` 链接，或者将其重命名为“kill”链接。这可以防止
    `init` 启动 Pulse。在我的系统中，看起来是这样的：
- en: '[PRE25]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'How do you know your runlevel? Use the **`runlevel`** command:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 你如何知道你的运行级别？使用 **`runlevel`** 命令：
- en: '[PRE26]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: That means runlevel 2, which is controlled by the links (which must be links
    to files in */etc/init.d*, not the files themselves!) in */etc/rc2.d/*. Your distro
    may have a nice graphical services manager, which is a good thing to use.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着运行级别 2，它由 */etc/rc2.d/* 中的链接控制（这些链接必须是 */etc/init.d* 中的文件链接，而不是文件本身！）！你的发行版可能有一个很好的图形服务管理器，这是一个很好的选择。
- en: 'On Ubuntu 10.04, there is one more startup file to dispense with: */etc/X11/Xsession.d/70pulseaudio*.
    This starts Pulse when a Gnome session starts. Move this file to a different directory,
    like your home directory. Don’t delete it because you might want it again someday.'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Ubuntu 10.04 中，还有一个启动文件需要处理：*/etc/X11/Xsession.d/70pulseaudio*。这个文件在 Gnome
    会话启动时启动 Pulse。将其移动到不同的目录，比如你的家目录。不要删除它，因为将来你可能还会用到它。
- en: Other distros customize Pulse in different ways, so if these instructions don’t
    work, then look for help specific to your distro. There is no shortage of it because
    a lot of users are struggling with this. Another little trick, when you find scripts
    that start PulseAudio, is to change the binary that they call from */usr/bin/pulseaudio*
    to */bin/true*. This is a nice little executable whose only job is to “do nothing,
    successfully.” It keeps the scripts happy, and it’s a convenient placeholder if
    you ever want to change it back.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 其他发行版以不同的方式定制 Pulse，所以如果这些说明不起作用，那么请寻找针对你发行版的特定帮助。这方面的帮助并不少，因为很多用户都在为此而奋斗。另一个小技巧，当你找到启动
    PulseAudio 的脚本时，可以将它们调用的二进制文件从 */usr/bin/pulseaudio* 改为 */bin/true*。这是一个很小的可执行文件，它的唯一任务是“什么都不做，但成功。”这可以让脚本保持满意，并且如果你将来想改回它，它也是一个方便的占位符。
- en: 'Now that you have purged all the startup scripts, how do you stop and start
    PulseAudio? It’s as easy as pie:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经清除所有启动脚本，如何停止和启动 PulseAudio？这就像做派一样简单：
- en: '[PRE27]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Phonon is a different kettle of clams. Phonon exists only on KDE4, and it is
    impossible to remove because virtually all of KDE4 depends on it. It is not necessary
    to stop or remove Phonon in any case, because it uses only a tiny bit of system
    resources and adds no latency to your audio chain. It does have one annoying habit—when
    a sound daemon like Pulse or JACK takes control of a sound card, Phonon freaks
    out and emits an error message about how that sound card is missing, and it wants
    to remove the sound card from its menus. Just click **Cancel** to shush it.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: Phonon 是另一回事。Phonon 只存在于 KDE4 中，并且无法删除，因为几乎所有的 KDE4 都依赖于它。在任何情况下，没有必要停止或删除 Phonon，因为它只占用很少的系统资源，并且不会给你的音频链增加延迟。它有一个令人烦恼的习惯——当像
    Pulse 或 JACK 这样的声音守护进程控制一个声卡时，Phonon 会惊慌失措并发出一个关于该声卡缺失的错误消息，并想要将其从菜单中删除。只需点击 **取消**
    来使其安静。
- en: Linux System Tweaks
  id: totrans-266
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux 系统调整
- en: Linux is a pretty efficient operating system, so you don’t need to go to heroic
    lengths to make it get out of its own way. However, there are a few things you
    can do to ensure the best possible performance.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 是一个相当高效的操作系统，所以你不需要采取过激的措施来让它摆脱自己的阻碍。然而，你可以做一些事情来确保最佳的性能。
- en: High-powered PC hardware is always good and is cheaper than high-end audio devices.
    My audio workstation has an AMD Phenom X3 2.4 GHz CPU, 4GB of RAM, and a terabyte’s
    worth of SATA II hard drives. Those extra cores make a nice difference, because
    even though Audacity is not optimized for multicore processors, those extra cores
    mean faster, smoother multitasking. I also have an old laptop with a 1.4 GHz CPU,
    1GB of RAM, and a slower hard drive. This handles up to four-channel 16/44.1 recording
    capably, but at higher bit depths or sampling rates it tends to stall. I consider
    a 1 GHz CPU and 512MB of RAM to be the bare minimum for music recording and editing.
    For podcasts and spoken-word recordings, you can go as low as 128MB RAM and a
    500 MHz CPU.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 高性能的PC硬件总是好的，而且比高端音频设备便宜。我的音频工作站配备了一个AMD Phenom X3 2.4 GHz CPU，4GB的RAM，以及一个TB的SATA
    II硬盘。那些额外的核心带来了很好的效果，因为尽管Audacity没有针对多核处理器进行优化，但这些额外的核心意味着更快速、更流畅的多任务处理。我还有一个配备1.4
    GHz CPU、1GB RAM和较慢硬盘的旧笔记本电脑。它可以熟练地处理多达四通道16/44.1的录音，但在更高的比特深度或采样率下，它往往会停滞。我认为1
    GHz CPU和512MB RAM是音乐录制和编辑的最低要求。对于播客和有声读物录制，你可以低至128MB RAM和500 MHz CPU。
- en: 'Turn off your screensaver and all fancy video effects. All that CompizFusion
    bling is pretty, but it gets in the way of good audio. In fact, you should turn
    off everything that is not absolutely needed: Don’t run other applications, and
    turn off unnecessary services. There usually isn’t too much cruft; Bluetooth,
    wireless daemons on systems without wireless devices, and Wacom tablet daemons
    are the most common on-by-default services that most users don’t need.'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 关闭你的屏幕保护程序和所有花哨的视频效果。所有那些CompizFusion的闪亮效果虽然很漂亮，但会妨碍良好的音频。实际上，你应该关闭所有绝对不需要的东西：不要运行其他应用程序，关闭不必要的服务。通常不会有太多冗余；蓝牙、无无线设备的系统上的无线守护进程，以及Wacom平板电脑守护进程是最常见的默认开启服务，大多数用户并不需要。
- en: Both KDE and GNOME are heavy-duty desktops that feast on CPU and memory, so
    you can slim your system down by using a lighter-weight graphical environment
    such as Xfce, IceWM, LXDE, Fluxbox, or any of the many other lightweight Linux
    graphical environments.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: KDE和GNOME都是耗资巨大的桌面系统，它们对CPU和内存的需求很大，因此你可以通过使用更轻量级的图形环境，如Xfce、IceWM、LXDE、Fluxbox或众多其他轻量级Linux图形环境来精简你的系统。
- en: Video is the single most demanding system on your PC, so you might want to upgrade
    to a better video card. Many lower-end systems use shared system memory instead
    of a dedicated graphics processing unit (GPU). In other words, they use some of
    your system RAM to process video, and this is quite a bit slower because it places
    an extra load on your system RAM and CPU, both of which are considerably slower
    than a GPU. GPUs are so much faster that they are used to build clusters for very
    fast, very powerful, high-end scientific calculations.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 视频是PC上对系统要求最高的单一组件，因此你可能想要升级到更好的显卡。许多低端系统使用共享的系统内存而不是专门的图形处理单元（GPU）。换句话说，它们使用你的一些系统RAM来处理视频，这相当慢，因为它会给你的系统RAM和CPU增加额外的负载，而这两者的速度都远远慢于GPU。GPU的速度如此之快，以至于它们被用来构建用于非常快速、非常强大的高端科学计算的集群。
- en: 'Depending on your distribution, you should have a good graphical system resources
    monitor so you can see where your system resources are being used. The good old-fashioned
    `top` command is still a useful tool for viewing active processes and how much
    system resources they are using. After starting `top`, press 1 to see all the
    cores in a multicore CPU:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的发行版，你应该有一个好的图形系统资源监控器，这样你可以看到你的系统资源在哪里被使用。古老的`top`命令仍然是查看活动进程及其使用多少系统资源的有用工具。启动`top`后，按1键可以看到多核CPU中的所有核心：
- en: '[PRE28]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'This shows that all is well. The summary at the top tells us many things: One
    process is running, and the rest, all 231 of ’em, are sleeping. Three CPU cores
    are chugging away.'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 这表明一切正常。顶部的摘要告诉我们许多信息：有一个进程正在运行，其余的，也就是全部231个，都在休眠状态。三个CPU核心正在忙碌地工作。
- en: All of these fields are explained in the nice man page, `man top`. Your version
    of `top` may display different fields, but it is still the same `top` command.
    The top section is the summary, and the bottom section is the task area.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些字段都在“man top”这个友好的手册页中进行了解释。你的`top`版本可能显示不同的字段，但它仍然是同一个`top`命令。顶部部分是摘要，底部部分是任务区域。
- en: CPU states (in the summary) are fun to examine in detail, but the main fields
    to keep an eye on are the `us`, or user field, which shows the load per CPU, and
    the `sy`, or system field, which shows the load from kernel processes. If you
    are seeing `sy` values greater than 10 percent consistently, you should track
    down the cause, because ordinarily it should be in the single digits.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 在总结中，CPU状态（详细查看）很有趣，但要注意的主要字段是`us`，即用户字段，它显示每个CPU的负载，以及`sy`，即系统字段，它显示来自内核进程的负载。如果你看到`sy`值持续大于10%，你应该追踪原因，因为通常它应该是单个数字。
- en: The `Mem` and `Swap` fields tell you whether your physical RAM is sufficient.
    As long as `Swap` usage is zero and your `Mem` is not maxed out, that is ideal
    for audio processing, since RAM is many times faster than a swap file, which is
    on your hard disk.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '`Mem`和`Swap`字段告诉你你的物理RAM是否足够。只要`Swap`的使用率为零，并且你的`Mem`没有达到最大值，这对音频处理来说就是理想的，因为RAM比硬盘上的交换文件快得多。'
- en: Down in the task area, you see information on every process on your system.
    Again, don’t go crazy on the minute details, but look at the biggest users at
    the top. This quickly reveals who the CPU and memory hogs are. Web browsers can
    be awful hogs in this era of lardy, script- and Flash-heavy websites, so shut
    ’em down. Audio processing chews up a lot of CPU cycles, so that’s the main thing
    to keep an eye on. If you’re hitting greater than 75 percent consistently, think
    about upgrading your CPU. The Linux kernel and most CPUs don’t mind working that
    hard, but at that level you’re probably noticing slower performance.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在任务区域下方，你可以看到关于你系统上每个进程的信息。再次强调，不要对细节过于着迷，但看看顶部最大的使用者。这很快就能揭示谁是CPU和内存的消耗者。在这个网站沉重、脚本和Flash繁多的时代，网络浏览器可能非常消耗资源，所以关闭它们。音频处理消耗了很多CPU周期，所以这是你要关注的主要事情。如果你持续达到75%以上，考虑升级你的CPU。Linux内核和大多数CPU不介意工作得那么努力，但在那个水平上，你可能注意到性能变慢。
- en: You can tune your swap file size a bit for better performance. If you have 512MB
    of RAM or less, make your swap file size at least equal to your RAM size. If you
    have 1GB of RAM or more, make your swap file no larger than half your RAM. But
    don’t remove your swap file entirely—laptops need them for suspend and hibernate,
    and if you ever use up all of your physical memory, that swap file might save
    your recording session.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以稍微调整交换文件的大小以获得更好的性能。如果你有512MB或更少的RAM，将你的交换文件大小至少设置为与你的RAM大小相等。如果你有1GB或更多的RAM，将你的交换文件大小不超过你RAM的一半。但不要完全删除你的交换文件——笔记本电脑需要它们来挂起和休眠，而且如果你用完了所有的物理内存，那个交换文件可能会救你的录音会话。
- en: If you are using a PCI sound card, check your motherboard manual to find a slot
    that does not use shared interrupts. PCI-Express sound cards are great because
    PCI-E uses dedicated buses, rather than shared buses like the old PCI 2.0 standard.
    There are not a lot of PCI-E sound cards yet; the RME HDSPe MADI series, for one
    example, is first-rate and works in Linux.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是PCI声卡，请查阅你的主板手册以找到一个不使用共享中断的插槽。PCI-Express声卡很棒，因为PCI-E使用专用总线，而不是像旧PCI
    2.0标准那样的共享总线。目前还没有很多PCI-E声卡；以RME HDSPe MADI系列为例，它是第一流的，并且在Linux上运行。
- en: Don’t use networked file shares, except for storing backups of your audio files,
    because they’re too slow.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 不要使用网络文件共享，除非是存储你的音频文件的备份，因为它们太慢了。
- en: The Tangled History of Linux Audio
  id: totrans-282
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux音频的错综复杂的历史
- en: The original Linux audio subsystem was Sound Blaster 16, which “just happened”
    because SB16 sound cards had the best support and a nice API. Those of us who
    are old enough to remember i386 PCs might also remember that competing brands
    used SB16 emulation because it was the path of least resistance. This evolved
    into the Open Sound System (OSS), which is portable across all Unix and Unix-type
    operating systems. It still exists and is maintained, and it is often confused
    with the OSS-compatible module in ALSA.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 原始的Linux音频子系统是Sound Blaster 16，这“只是发生了”因为SB16声卡有最好的支持和良好的API。那些足够老以至于还记得i386
    PC的人可能也会记得，竞争品牌使用SB16模拟，因为这是阻力最小的路径。这演变成了开放声音系统（OSS），它可以在所有Unix和Unix类型的操作系统上运行。它仍然存在并且得到维护，并且它经常与ALSA中的OSS兼容模块混淆。
- en: OSS fell out of favor as sound cards got cheaper and depended more on software
    to handle mixing, instead of doing the mixing in hardware. And so ESD (Gnome)
    and aRts (KDE) were born; these took care of mixing before sending audio streams
    to OSS. However, this complicated matters because Linux developers now had three
    different sound systems to deal with. The Simple DirectMedia Layer (SDL) was then
    invented as a portability layer that could use any audio backend, but it has some
    limitations that prevent it from ascending the throne as the Great Linux Audio
    Uniter. Like everything else in life, it hasn’t gone away but is still used in
    some applications. You probably have it on your own systems.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 随着声卡变得更便宜，并且更多地依赖软件来处理混音而不是在硬件中混音，OSS 失去了受欢迎的地位。因此，ESD（Gnome）和 aRts（KDE）应运而生；这些在将音频流发送到
    OSS 之前负责混音。然而，这使事情变得复杂，因为 Linux 开发者现在必须处理三个不同的声音系统。Simple DirectMedia Layer（SDL）随后被发明为一个可使用任何音频后端的可移植层，但它有一些限制，阻止它成为伟大的
    Linux 音频统一者。就像生活中的其他事物一样，它并没有消失，但仍然在一些应用程序中使用。你可能在你的系统上也有它。
- en: Then OSS went closed source, and users had to pay money for it. That was the
    last straw for hardy Linux developers, who retaliated by inventing ALSA. So, that
    is how ALSA became the standard Linux audio subsystem. A good way to start a flame
    war is to ignite an OSS versus ALSA debate—a lot of folks still have strong passions
    on the subject.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 然后 OSS 变成了闭源软件，用户必须为此付费。这对坚韧的 Linux 开发者来说是最后一根稻草，他们通过发明 ALSA 来反击。所以，ALSA 就这样成为了标准的
    Linux 音频子系统。一个好的引发争论的方法是点燃 OSS 与 ALSA 的辩论——很多人对这个话题仍然有强烈的激情。
- en: 'OSS 4.*x* became Free software again when it was released under the GPL for
    Linux in 2007, and now there are two versions: the GPL version and a commercial
    version that includes some non-Free drivers. Some users claim that their music
    sounds better with OSS and that it is simpler and better and easier to use. I
    think a lot of that is wishful thinking, but if you like OSS, I won’t think less
    of you.'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: OSS 4.*x* 在 2007 年以 GPL 许可发布 Linux 版本时再次成为自由软件，现在有两个版本：GPL 版本和包含一些非自由驱动器的商业版本。一些用户声称他们的音乐听起来更好，而且
    OSS 更简单、更好用。我认为这很多都是一厢情愿的想法，但如果你喜欢 OSS，我不会因此而小看你。
- en: I prefer plain old ALSA. It is the default in virtually all Linux systems, and
    it works. As always with Linux, do your homework before you buy to make sure you
    purchase well-supported hardware. The ALSA project has a supported sound cards
    matrix at [http://www.alsa-project.org/main/index.php/Matrix:Main](http://www.alsa-project.org/main/index.php/Matrix:Main).
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 我更喜欢朴素的 ALSA。它在几乎所有 Linux 系统中都是默认的，而且它工作得很好。就像 Linux 一样，在购买之前先做做功课，确保你购买的是得到良好支持的硬件。ALSA
    项目有一个支持的声音卡矩阵，可以在 [http://www.alsa-project.org/main/index.php/Matrix:Main](http://www.alsa-project.org/main/index.php/Matrix:Main)
    找到。
- en: ESD is the old Gnome and Enlightenment sound server, and it runs on top of ALSA.
    It can manage multiple sound streams and networked playback. PulseAudio has replaced
    ESD in GNOME.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: ESD 是旧的 Gnome 和 Enlightenment 声音服务器，它运行在 ALSA 之上。它可以管理多个声音流和网络播放。PulseAudio
    已经取代了 ESD 在 GNOME 中的位置。
- en: aRts also manages multiple streams and networked playback. Don’t use aRts because
    it increases latency beyond acceptable levels and because it is doomed—it has
    been unmaintained for some time now and is outdated. Phonon replaces aRts in KDE4\.
    Phonon is not a sound server or an API but is intended to be a universal interface
    for all audio and video playback servers and subsystems. Phonon doesn’t get in
    the way, so you can leave it alone.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: aRts 也管理多个流和网络播放。不要使用 aRts，因为它会增加超过可接受水平的延迟，并且它注定要失败——它已经有一段时间没有维护，并且过时了。Phonon
    在 KDE4 中取代了 aRts。Phonon 不是一个声音服务器或 API，而是旨在成为所有音频和视频播放服务器和子系统的通用接口。Phonon 不会妨碍，所以你可以让它保持原样。
- en: The future of desktop playback audio for Linux is cloudy. PulseAudio is poised
    to become the standard sound manager for desktop Linux, but some say there are
    still some deeper problems to resolve that Pulse can’t fix. So, don’t be surprised
    by anything.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 桌面播放音频的未来是模糊的。PulseAudio 准备成为桌面 Linux 的标准声音管理器，但有人说还有一些更深层的问题需要解决，而 PulseAudio
    无法解决。所以，不要对任何事感到惊讶。
- en: Sound Cards
  id: totrans-291
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 声音卡
- en: Please visit [Appendix A](apa.html "Appendix A. Audio Hardware") to learn about
    sound cards that are well supported on Linux, from low-budget to high-end. Remember,
    it is very important to shop carefully and purchase hardware that is well supported
    in Linux. There is a lot of great quality audio hardware that works in Linux—life
    is too short to waste on low-quality or poorly supported audio gear.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 请访问[附录A](apa.html "附录A. 音频硬件")了解在Linux上得到良好支持的声卡，从低预算到高端。记住，仔细购物并购买在Linux上得到良好支持的硬件非常重要。Linux上有许多高质量的音频硬件可以工作——生命太短暂了，不应该浪费在低质量或支持不佳的音频设备上。
