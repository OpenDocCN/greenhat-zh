["```\n  1 #include <cstdio>\n  2 #include <stdlib.h>\n  3 #include <pthread.h>\n  4 #include <sys/fcntl.h>\n  5\n  6 // Resource protection mutexes\n  7 static pthread_mutex_t resource1 =\n  8         PTHREAD_MUTEX_INITIALIZER;\n  9\n 10 static pthread_mutex_t resource2 =\n 11         PTHREAD_MUTEX_INITIALIZER;\n 12\n 13 /************************************************\n 14  * A couple of routines to do work.   Or they    *\n 15  *      would do work if we had any to do.      *\n 16  ***********************************************/\n 17 static void wait_for_work(void) {}      // Dummy\n 18 static void do_work(void) {}            // Dummy\n 19\n 20 /***********************************************\n 21  * process_1 -- First process of two.          *\n 22  *                                             *\n 23  * Grab both resources and then do the work    *\n 24  ***********************************************/\n 25 static void *process_1(void *)\n 26 {\n 27     while (1) {\n 28         wait_for_work();\n 29\n 30         pthread_mutex_lock(&resource1);\n 31         pthread_mutex_lock(&resource2);\n 32\n 33         do_work();\n 34\n 35         pthread_mutex_unlock(&resource2);\n 36         pthread_mutex_unlock(&resource1);\n 37     }\n 38 }\n 39\n 40 /************************************************\n 41  * process_2 -- Second process of two.          *\n 42  *                                              *\n 43  * Grab both resources and then do the work.    *\n 44  *      (but slightly different work from       *\n 45  *      process_1)                              *\n 46  ************************************************/\n 47 static void process_2(void)\n 48 {\n 49     while (1) {\n 50         wait_for_work();\n 51\n 52         pthread_mutex_lock(&resource2);\n 53         pthread_mutex_lock(&resource1);\n 54\n 55         do_work();\n 56\n 57         pthread_mutex_unlock(&resources1);\n 58         pthread_mutex_unlock(&resource2);\n 59     }\n 60 }\n 61\n 62 int main()\n 63 {\n 64     int status; /* Status of last system call */\n 65\n 66     /* Information on the status thread */\n 67     pthread_t thread1;\n 68\n 69     status = pthread_create(&thread1,\n 70             NULL, process_1, NULL);\n 71\n 72     if (status != o) {\n 73         perror(\n 74             \"ERROR: Thread create failed:\\n   \");\n 75         exit (8);\n 76     }\n 77\n 78     process_2();\n 79     return (0);\n 80 }\n\n```"]