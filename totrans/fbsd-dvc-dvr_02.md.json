["```\n#include <sys/types.h>\n#include <sys/malloc.h>\n\nvoid *\nmalloc(unsigned long size, struct malloc_type *type, int flags);\n\nvoid\nfree(void *addr, struct malloc_type *type);\n\nvoid *\nrealloc(void *addr, unsigned long size, struct malloc_type *type,\n    int flags);\n\nvoid *\nreallocf(void *addr, unsigned long size, struct malloc_type *type,\n    int flags);\n```", "```\n#include <sys/param.h>\n#include <sys/malloc.h>\n#include <sys/kernel.h>\n\nMALLOC_DEFINE(type, shortdesc, longdesc);\n```", "```\n#include <sys/types.h>\n#include <sys/malloc.h>\n\nMALLOC_DECLARE(type);\n```", "```\n#define MALLOC_DECLARE(type) \\\n        extern struct malloc_type type[1]\n```", "```\n#include <sys/param.h>\n  #include <sys/module.h>\n  #include <sys/kernel.h>\n  #include <sys/systm.h>\n\n  #include <sys/conf.h>\n  #include <sys/uio.h>\n  #include <sys/malloc.h>\n\n  #define BUFFER_SIZE     256\n\n MALLOC_DECLARE(M_ECHO);\n MALLOC_DEFINE(M_ECHO, \"echo_buffer\", \"buffer for echo driver\");\n\n  static d_open_t         echo_open;\n  static d_close_t        echo_close;\n  static d_read_t         echo_read;\n  static d_write_t        echo_write;\n\n  static struct cdevsw echo_cdevsw = {\n          .d_version =    D_VERSION,\n          .d_open =       echo_open,\n          .d_close =      echo_close,\n          .d_read =       echo_read,\n          .d_write =      echo_write,\n          .d_name =       \"echo\"\n  };\n\n  typedef struct echo {\n          char buffer[BUFFER_SIZE];\n          int length;\n  } echo_t;\n\n  static echo_t *echo_message;\n  static struct cdev *echo_dev;\n\n  static int\n  echo_open(struct cdev *dev, int oflags, int devtype, struct thread *td)\n  {\n  ...\n  }\n\n  static int\n  echo_close(struct cdev *dev, int fflag, int devtype, struct thread *td)\n  {\n  ...\n  }\n\n  static int\n  echo_write(struct cdev *dev, struct uio *uio, int ioflag)\n  {\n  ...\n  }\n\n  static int\n  echo_read(struct cdev *dev, struct uio *uio, int ioflag)\n  {\n  ...\n  }\n\n  static int\n  echo_modevent(module_t mod __unused, int event, void *arg __unused)\n  {\n          int error = 0;\n\n          switch (event) {\n          case MOD_LOAD:\n                  echo_message = malloc(sizeof(echo_t), M_ECHO, M_WAITOK);\n                  echo_dev = make_dev(&echo_cdevsw, 0, UID_ROOT, GID_WHEEL,\n                      0600, \"echo\");\n                  uprintf(\"Echo driver loaded.\\n\");\n                  break;\n          case MOD_UNLOAD:\n                  destroy_dev(echo_dev);\n                  free(echo_message, M_ECHO);\n                  uprintf(\"Echo driver unloaded.\\n\");\n                  break;\n          default:\n                  error = EOPNOTSUPP;\n                  break;\n          }\n\n          return (error);\n  }\n\n  DEV_MODULE(echo, echo_modevent, NULL);\n```", "```\n$ `sudo kldload ./echo-2.0.ko`\nEcho driver loaded.\n$ `vmstat -m | head -n 1 && vmstat -m | grep \"echo_buffer\"`\n         Type InUse MemUse HighUse Requests  Size(s)\n  echo_buffer     1     1K       -        1  512\n```", "```\n#include <sys/types.h>\n#include <sys/malloc.h>\n\nvoid *\ncontigmalloc(unsigned long size, struct malloc_type *type, int flags,\n    vm_paddr_t low, vm_paddr_t high, unsigned long alignment,\n    unsigned long boundary);\n\nvoid\ncontigfree(void *addr, unsigned long size, struct malloc_type *type);\n```", "```\n#include <sys/param.h>\n#include <sys/module.h>\n#include <sys/kernel.h>\n#include <sys/systm.h>\n\n#include <sys/conf.h>\n#include <sys/uio.h>\n#include <sys/malloc.h>\n\n#define BUFFER_SIZE     256\n\nMALLOC_DEFINE(M_ECHO, \"echo_buffer\", \"buffer for echo driver\");\n\nstatic d_open_t         echo_open;\nstatic d_close_t        echo_close;\nstatic d_read_t         echo_read;\nstatic d_write_t        echo_write;\n\nstatic struct cdevsw echo_cdevsw = {\n        .d_version =    D_VERSION,\n        .d_open =       echo_open,\n        .d_close =      echo_close,\n        .d_read =       echo_read,\n        .d_write =      echo_write,\n        .d_name =       \"echo\"\n};\n\ntypedef struct echo {\n        char buffer[BUFFER_SIZE];\n        int length;\n} echo_t;\n\nstatic echo_t *echo_message;\nstatic struct cdev *echo_dev;\n\nstatic int\necho_open(struct cdev *dev, int oflags, int devtype, struct thread *td)\n{\n...\n}\n\nstatic int\necho_close(struct cdev *dev, int fflag, int devtype, struct thread *td)\n{\n...\n}\n\nstatic int\necho_write(struct cdev *dev, struct uio *uio, int ioflag)\n{\n...\n}\n\nstatic int\necho_read(struct cdev *dev, struct uio *uio, int ioflag)\n{\n...\n}\n\nstatic int\necho_modevent(module_t mod __unused, int event, void *arg __unused)\n{\n        int error = 0;\n\n        switch (event) {\n        case MOD_LOAD:\n                echo_message = contigmalloc(sizeof(echo_t), M_ECHO,\n                    M_WAITOK | M_ZERO, 0, 0xffffffff,\n PAGE_SIZE,\n                    1024 * 1024);\n                echo_dev = make_dev(&echo_cdevsw, 0, UID_ROOT, GID_WHEEL,\n                    0600, \"echo\");\n                uprintf(\"Echo driver loaded.\\n\");\n                break;\n        case MOD_UNLOAD:\n                destroy_dev(echo_dev);\n                contigfree(echo_message, sizeof(echo_t), M_ECHO);\n                uprintf(\"Echo driver unloaded.\\n\");\n                break;\n        default:\n                error = EOPNOTSUPP;\n                break;\n        }\n\n        return (error);\n}\n\nDEV_MODULE(echo, echo_modevent, NULL);\n```", "```\n$ `sudo kldload ./echo_contig.ko`\nEcho driver loaded.\n$ `vmstat -m | head -n 1 && vmstat -m | grep \"echo_buffer\"`\n         Type InUse MemUse HighUse Requests  Size(s)\n  echo_buffer     1     4K       -        1\n```"]