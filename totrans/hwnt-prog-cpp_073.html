<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_80">
<a name="ch05" class="calibre6" id="ch05"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="83" class="calibre16" id="83"/><a name="ch05lev1sec9" class="calibre16" id="ch05lev1sec9"/><span class="chapter-titlelabel">Program 71: </span>Unsynchronized</h2><p class="b24-bookeditorial">The assignment here is to make a four-function calculator. The user is supposed to type in an operator and a number, and the calculator goes to work. For example:</p>
<div class="calibre1">
<pre class="literallayout-normal">
         Enter operator and value: <span class="underline" style="text-decoration:underline">+ 10</span>
         Total: 10
</pre>
</div>
<p class="b24-bookeditorial">But things don't go as expected.</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 /************************************************
  2  * calc -- Simple 4 function calculator.        *
  3  *                                              *
  4  * Usage:                                       *
  5  *      $ calc                                  *
  6  *      Enter operator and value: + 5           *
  7  *                                              *
  8  * At the end of each operation the acculated   *
  9  * results are printed.                         *
 10  ************************************************/
 11 #include &lt;stdio.h&gt;
 12 #include &lt;stdlib.h&gt;
 13 int main() {
 14     char oper;  /* Operator for our calculator */
 15     int  result;/* Current result */
 16     int value;  /* Value for the operation */
 17
 18     result = 0;
 19     while (1)
 20     {
 21         printf("Enter operator and value:");
 22         scanf("%c %d", &amp;oper, &amp;value);
 23
 24         switch (oper) {
 25             case '+':
 26                 result += value;
 27                 break;
 28             case '-':
 29                 result -= value;
 30                 break;
 31             case '*':
 32                 result *= value;
 33                 break;
 34             case '/':
 35                 if (value == 0)
 36                     printf("Divide by 0 error\n");
 37                 else
 38                     result /= value;
 39                 break;
 40             case 'q':
 41                 exit (0);
 42             default:
 43                 printf("Bad operator entered\n"); break;
 44         }
 45         printf("Total: %d\n", result);
 46     }
 47 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#360" target="_parent" class="calibre2">Hint 224</a>. <a href="LiB0121.html#526" target="_parent" class="calibre2">Answer 28</a>.)</p>
<div class="calibre1">
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="Start Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
<p class="b24-bookeditorial">Real Programmers disdain structured programming. Structured programming is for compulsive neurotics who were prematurely toilet-trained. Those people wear neckties and carefully line up pencils on otherwise clear desks.</p>
<p class="b24-bookeditorial">Real Programmers don't bring brown-bag lunches. If the vending machine doesn't sell it, they don't eat it. Vending machines don't sell quiche.</p>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="End Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
</div>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td height="16" class="calibre8"/>
</tr>
</table>
</div>
</div>



</body></html>