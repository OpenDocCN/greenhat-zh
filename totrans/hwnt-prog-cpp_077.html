<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_85">
<a name="ch06" class="calibre6" id="ch06"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="88" class="calibre16" id="88"/><a name="ch06lev1sec3" class="calibre16" id="ch06lev1sec3"/><span class="chapter-titlelabel">Program 75: </span>Quick Exit</h2><p class="b24-bookeditorial">The <span>ABORT</span> macro is designed to issue an error message and exit. The program should abort when something goes wrong.</p>
<p class="b24-bookeditorial">The program does exit when we have an error. It also exits when we don't have an error. In fact, it exits no matter what.</p>
<p class="b24-bookeditorial">Why?</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 /************************************************
  2  * Test the square_root function.               *
  3  ************************************************/
  4 #include &lt;iostream&gt;
  5 #include &lt;math.h&gt;
  6
  7 /************************************************
  8  * ABORT -- print an error message and abort.   *
  9  ************************************************/
 10 #define ABORT(msg) \
 11     std::cerr &lt;&lt; msg &lt;&lt; std::endl;exit(8);
 12 /************************************************
 13  * square_root -- Find the square root of the   *
 14  *      value.                                  *
 15  *                                              *
 16  * Returns:                                     *
 17  *      The square root.                        *
 18  ************************************************/
 19 static int square_root(
 20     const int value
 22 ) {
 23     if (value &lt; 0)
 24         ABORT("Illegal square root");
 25
 26     return (int(sqrt(float(value))));
 27 }
 28
 29 int main() {
 30     int square; // A number that's square
 31     int root;   // The square root of the number
 32
 33     square = 5 * 5;
 34     root = square_root(square);
 35
 36     std::cout &lt;&lt; "Answer is: " &lt;&lt; root &lt;&lt; '\n';
 37     return (0);
 38 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#169" target="_parent" class="calibre2">Hint 33</a>. <a href="LiB0121.html#603" target="_parent" class="calibre2">Answer 105</a>.)</p>
</div>
</div>



</body></html>