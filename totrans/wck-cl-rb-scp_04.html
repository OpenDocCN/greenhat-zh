<html><head></head><body>
  <div class="sgc-1" id="filepos331926"/>&#13;
&#13;
  <h1 class="calibre1" id="calibre_pb_190"><span class="calibre2"><a class="calibre7" shape="rect"/>Chapter 4. PICTURE UTILITIES</span></h1>&#13;
&#13;
  <div class="calibre3"><a class="calibre17" shape="rect"/><img alt="PICTURE UTILITIES" class="calibre23" src="../Images/00001.jpg"/></div>&#13;
&#13;
  <p class="calibre4">Photography is a wonderful hobby. It happens to be one of mine, and since I'm a techie, I have a monster Digital Single-Lens Reflex (DSLR) camera. I take tons of <a class="calibre17" shape="rect"/>pictures with it and enjoy the digital <a class="calibre17" shape="rect"/>editing involved afterward. But I have found that I take many more pictures with my digital camera than I did with my traditional film camera. The scripts in this chapter help me manage the daunting task of editing, converting, and resizing my vast photo collection. To edit 500 pictures one at a time would take days, but with a few tweaks to these scripts, that time is cut down to mere minutes. Break out your photos and let's start editing!</p>&#13;


  <div class="calibre3 calibre3 calibre3 calibre3">
    <h1 class="calibre1" id="calibre_pb_191"><span class="calibre2"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos333367"/>Mass Editing</span></h1>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_192"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos333653"/>Mass Editing</span></h2>
    </div>

    <div class="calibre3">
      <div class="calibre3 calibre3 calibre3">
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>massEdit.rb</h3>
      </div>

      <p class="calibre4">All right, I mentioned that I like to take pictures. I mean, I <span><em class="italic">really</em></span> like to take pictures, and I have gigabytes of photographs to prove it. If I needed to manipulate all of them in some way, such as renaming, performing that action on each picture individually would be very time consuming. This script will take a group of pictures and rename them numerically to something more manageable than <span><em class="italic">DSC_0127.JPEG</em></span>; work that would have taken a week now takes just minutes.<a class="calibre17" shape="rect"/></p>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_193"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos334914"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"><img alt="" class="calibre23" src="../Images/00002.jpg"/> unless ARGV[0]<br class="calibre20"/>&#13;
           puts "\n\n\nYou need to specify a filename:  <a class="calibre17" shape="rect"/>massEdit.rb &lt;filename&gt;\n\n\n"<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> name = ARGV[0]<br class="calibre20"/>&#13;
       x=0<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/><br class="calibre20"/>&#13;
       Dir['*.[Jj][Pp]*[Gg]'].each do |pic|<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00005.jpg"/><br class="calibre20"/>&#13;
           new_name = "#{name}_#{"%.2d" % x+=1}#{File.extname(pic)}"<br class="calibre20"/>&#13;
           puts "Renaming #{pic} ---&gt; #{new_name}"<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00006.jpg"/>     File.rename(pic, new_name)<br class="calibre20"/>&#13;
       end</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_194"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos336103"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">Let's assume you have a directory full of pictures from a Jamaican vacation. Presumably you'd want to rename the photos from <span><em class="italic">DSC_0</em></span>XXX.<span><em class="italic">jpeg</em></span> to <span><em class="italic">Jamaica</em></span>XX.<span><em class="italic">jpeg</em></span>. Make sure the script is in the directory that contains the pictures you want to rename and type the following:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby massEdit.rb <em class="italic"><code class="calibre19">Jamaica</code></em></code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_195"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos337263"/>The Results</span></h2>
    </div><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19">Renaming <em class="italic"><code class="calibre19">DSC_0001.jpeg ---&gt; Jamaica01.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0002.jpeg ---&gt; Jamaica02.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0003.jpeg ---&gt; Jamaica03.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0004.jpeg ---&gt; Jamaica04.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0005.jpeg ---&gt; Jamaica05.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0006.jpeg ---&gt; Jamaica06.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0007.jpeg ---&gt; Jamaica07.jpeg</code></em><br class="calibre20"/>
      Renaming <em class="italic"><code class="calibre19">DSC_0008.jpeg ---&gt; Jamaica08.jpeg</code></em><br class="calibre20"/>
      [...]</tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_196"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos338586"/>How It Works</span></h2>
    </div>

    <p class="calibre4"><a class="calibre17" shape="rect"/>Renaming files has to be one of the most common headaches I've dealt with throughout my digital photography career. This script is a really big aspirin to relieve the pain. The script starts by using the standard usage/error message to clue the user in on the proper command-line arguments <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. The script expects you to assign a generic name for all the pictures. For the purposes of this example, I renamed several pictures from a trip to Jamaica, so it only made sense to make the generic name <span><em class="italic">Jamaica</em></span>. Now that <code class="calibre19">name</code> is set to the generic picture name <span><em class="italic">Jamaica</em></span>, the variable <code class="calibre19">x</code> is initialized to represent the trailing numbers on each photograph<a class="calibre17" shape="rect"/> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>.</p>

    <p class="calibre4">I decided to use the <code class="calibre19">Dir::glob</code> method (in the form of the shortcut <code class="calibre19">Dir::[]</code>) in this script <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>. The importance of <code class="calibre19">Dir::glob</code> can be seen in the expression I used to hunt for each photograph in the directory. I always put groups of pictures in the same folder, and running this script in that folder will capture every picture. In English, <code class="calibre19">*.[Jj][Pp]*[Gg]</code> is saying that every file ending in a variation of <span><em class="italic">JPEG</em></span> should be manipulated. If you don't believe me, create four pictures with the extensions <span><em class="italic">jpg, jpeg, JPG</em></span>, and <span><em class="italic">JPEG</em></span>. The <code class="calibre19">Dir::glob</code> will get them all, and that is great for flexibility! The <code class="calibre19">Dir::glob</code> returns an array, so the <code class="calibre19">each</code> method is used to iterate through each discovered picture. The hard part was finding all the pictures; all that's left now is to rename them.<a class="calibre17" shape="rect"/></p>

    <p class="calibre4">I used a simple convention when renaming the pictures. The new filename is constructed from the object returned by the <code class="calibre19">File.extname</code> method, <code class="calibre19">name</code>, an underscore, and then a numeric value <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>. The <code class="calibre19">File.extname</code> method may not be obvious in its function; it simply grabs the file extension of the picture being renamed.<a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/></p>

    <p class="calibre4">You may be asking yourself, "Why did he bother adding that crazy <code class="calibre19">x</code> incrementing piece <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>"? Good question. Some operating systems aren't intelligent enough to know that <span><em class="italic">Jamaica10.jpeg</em></span> is the tenth photo in a series of pictures and not the second. So, I have succumbed to the operating systems' will and made the picture names have two numbers to ensure sequential display. If you are going to be renaming more than 99 photos, you'll want to change the <code class="calibre19">%.2d</code> to <code class="calibre19">%.3d</code>, which adds a third placeholder, for the hundreds place.</p>

    <p class="calibre4">After the name has been set and saved to the <code class="calibre19">new_name</code> variable, the script prints out the old filename and the new filename as a courtesy to the user. To execute the rename, the <code class="calibre19">File.rename</code> method is used with the original filename as the first parameter and the new filename as the second parameter <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00006.jpg"/></span>. That's all there is to <a class="calibre17" shape="rect"/>mass file renaming!<a class="calibre17" shape="rect"/></p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_197"/>


  <div class="calibre3 calibre3 calibre3 calibre3" id="filepos343591">
    <h1 class="calibre1" id="calibre_pb_198"><span class="calibre2"><a class="calibre7" shape="rect"/>Image Information Extraction</span></h1>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_199"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos344094"/>Image Information Extraction</span></h2>
    </div>

    <div class="calibre3">
      <div class="calibre3 calibre3 calibre3">
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>imageInfo.rb</h3>
      </div>

      <p class="calibre4">There is a wealth of information about a digital picture stored within the file itself. Some of the picture's data, such as colors, resolution, exposure, and flash settings, can be useful as you learn your craft. This script will help you pull the data out of your pictures for further analysis, giving insight into your best (and worst) shots.<a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/></p>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_200"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos345157"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"><img alt="" class="calibre23" src="../Images/00002.jpg"/> require 'exifr'<br class="calibre20"/>&#13;
       include EXIFR<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> unless ARGV[0] and File.exists?(ARGV[0])<br class="calibre20"/>&#13;
           puts "\n\n\nYou need to specify a filename:  ruby imageInfo.rb &lt;filename&gt;"<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <a class="calibre17" shape="rect"/><br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/> info = JPEG.new(ARGV[0])<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00005.jpg"/> File.open("info_#{File.basename(ARGV[0])}.txt", "w") do |output|<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00006.jpg"/>     output.puts info.exif.to_hash.map{ |k,v| "#{k}: #{v}"}<br class="calibre20"/>&#13;
       end</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_201"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos346325"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">This script takes an image file as input and returns a detailed text file that lists all of the available <a class="calibre17" shape="rect"/>information stored within the image. In this example, I used a Nikon D50 DSLR camera image. Type the following to run the script:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby imageInfo.rb <em class="italic"><code class="calibre19">DSC_0001.JPG</code></em></code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_202"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos347240"/>The Results</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19">Image Description:<br class="calibre20"/>&#13;
      Make:                       NIKON CORPORATION<br class="calibre20"/>&#13;
      Model:                      NIKON D50<br class="calibre20"/>&#13;
      Orientation:                EXIFR::TIFF::TopLeftOrientation<br class="calibre20"/>&#13;
      X Resolution:               300<br class="calibre20"/>&#13;
      Y Resolution:               300<br class="calibre20"/>&#13;
      Resolution unit:            2<br class="calibre20"/>&#13;
      Software:                   Ver.1.00<br class="calibre20"/>&#13;
      Date &amp; Time:                Sat Jun 02 13:40:26 +0400 2007<br class="calibre20"/>&#13;
      YCB cr positioning:         2<br class="calibre20"/>&#13;
      sensing_method:             2<br class="calibre20"/>&#13;
      color_space:                1<br class="calibre20"/>&#13;
      metering_mode:              5<br class="calibre20"/>&#13;
      x_resolution:               300<br class="calibre20"/>&#13;
      white_balance:              0<br class="calibre20"/>&#13;
      f_number:                   9<br class="calibre20"/>&#13;
      saturation:                 0<br class="calibre20"/>&#13;
      pixel_x_dimension:          3008<br class="calibre20"/>&#13;
      light_source:               0<br class="calibre20"/>&#13;
      date_time_original:         Wed Sep 12 05:52:34 -0400 2007<br class="calibre20"/>&#13;
      y_resolution:               300<br class="calibre20"/>&#13;
      resolution_unit:            2<br class="calibre20"/>&#13;
      digital_zoom_ratio:         1<br class="calibre20"/>&#13;
      subsec_time:                70<br class="calibre20"/>&#13;
      exposure_program:           0<br class="calibre20"/>&#13;
      ycb_cr_positioning:         2<br class="calibre20"/>&#13;
      sharpness:                  0<br class="calibre20"/>&#13;
      pixel_y_dimension:          2000<br class="calibre20"/>&#13;
      flash:                      0<br class="calibre20"/>&#13;
      date_time_digitized:        Wed Sep 12 05:52:34 -0400 2007<br class="calibre20"/>&#13;
      make:                       NIKON CORPORATION<br class="calibre20"/>&#13;
      focal_length_in_35mm_film:  82<br class="calibre20"/>&#13;
      subsec_time_original:       70<br class="calibre20"/>&#13;
      exposure_bias_value:        0<br class="calibre20"/>&#13;
      focal_length:               55<br class="calibre20"/>&#13;
      model:                      NIKON D50<br class="calibre20"/>&#13;
      software:                   Ver.1.00<br class="calibre20"/>&#13;
      scene_capture_type:         0<br class="calibre20"/>&#13;
      subsec_time_digitized:      70<br class="calibre20"/>&#13;
      max_aperture_value:         5<br class="calibre20"/>&#13;
      subject_distance_range:     0<br class="calibre20"/>&#13;
      custom_rendered:            0<br class="calibre20"/>&#13;
      compressed_bits_per_pixel:  4<br class="calibre20"/>&#13;
      date_time:                  Wed Sep 12 05:52:34 -0400 2007<br class="calibre20"/>&#13;
      gain_control:               0<br class="calibre20"/>&#13;
      exposure_mode:              0<br class="calibre20"/>&#13;
      exposure_time:              1/320</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_203"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos350953"/>How It Works</span></h2>
    </div>

    <p class="calibre4">How about that for <a class="calibre17" shape="rect"/>information hidden in a digital photograph? The <a class="calibre17" shape="rect"/>information isn't really hidden; it's placed in an <a class="calibre17" shape="rect"/>image according to the <span><em class="italic">Exchangeable Image File Format (EXIF)</em></span>. In addition to the information listed above, geographic information can also be <a class="calibre17" shape="rect"/>included in the EXIF section of the image file if the camera has GPS capabilities. Every camera writes to its images differently, so check your camera for the specifics.<a class="calibre17" shape="rect"/></p>

    <p class="calibre4">This script relies on the <a class="calibre17" shape="rect"/>exifr library to retrieve the important data in the image, so the library is required <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. This script also contains an <code class="calibre19">include</code> statement that prevents us from having to type <code class="calibre19">EXIFR</code> in front of every <code class="calibre19">exifr</code> method call. Next is the command-line argument verification <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>. The <code class="calibre19">unless</code> statement verifies that a file was included at the command line and that it is actually a file. Command-line <a class="calibre17" shape="rect"/>arguments make script execution a bit more streamlined, which is why you see them used so frequently throughout this book. If a command-line argument is provided and the file exists, then the script creates a new <code class="calibre19">JPEG</code> object called <code class="calibre19">info</code> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>.<a class="calibre17" shape="rect"/></p>

    <p class="calibre4">The next step is an exercise in writing to a file, which you may recall from previous chapters. I've condensed the code section to a few lines. Instead of initializing a new <code class="calibre19">File</code> object, saving it to a variable, then directing output to the variable, I just pass the <code class="calibre19">File</code> object as part of the code block <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>. Because of the differences with each camera's EXIF output, not all of the available fields will be used. For example, if your camera does not support the GPS feature, then all of those fields will be blank. I chose to use the <code class="calibre19">to_hash</code> function in conjunction with <code class="calibre19">map</code> to convert the EXIF output to something easily readable <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00006.jpg"/></span>. In the results, the empty fields are removed because <code class="calibre19">nil</code> attributes don't concern us. You can modify the output to display the fields, but I omit them here for brevity's sake.<a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/></p>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_204"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos354755"/>Hacking the Script</span></h2>
    </div>

    <p class="calibre4">Once you are comfortable with the data in the EXIF section of your <a class="calibre17" shape="rect"/>images, you can tweak this script to output only what is necessary. Many professional photographers are interested in viewing specific aspects of the camera configuration for a given photograph. This script is a tool that is entirely customizable. Take a look at the options and see what uses you might come up with.<a class="calibre17" shape="rect"/></p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_205"/>


  <div class="calibre3 calibre3 calibre3 calibre3" id="filepos355400">
    <h1 class="calibre1" id="calibre_pb_206"><span class="calibre2"><a class="calibre7" shape="rect"/>Creating a Thumbnail</span></h1>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_207"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos355895"/>Creating a Thumbnail</span></h2>
    </div>

    <div class="calibre3">
      <div class="calibre3 calibre3 calibre3">
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>thumbnail.rb</h3>
      </div>

      <p class="calibre4">Thumbnails are useful for displaying multiple images at the same time, especially on the Web. A perfect example is the ability to quickly view 25 photographs in a photo gallery without having to click <span><em class="italic">next</em></span> or wait for each large image to load. With lots of pictures to view, thumbnails can make browsing a much more relaxing and enjoyable experience. I find myself getting frustrated with websites that post each picture as big as possible so you end up with a huge stack of pictures that you have to scroll through. This script is the first step in making a web photo gallery. If you have the need for sample images for web design or smaller image sizes for faster transfers, then this script is for you.<a class="calibre17" shape="rect"/></p>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_208"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos357337"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"><img alt="" class="calibre23" src="../Images/00002.jpg"/> require 'RMagick'<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> include Magick<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/> Dir['*.[Jj][Pp]*[Gg]'].each do |pic|<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00005.jpg"/>     image = Image.read(pic)[0]<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00006.jpg"/>     next if pic =~ /^th_/<br class="calibre20"/>&#13;
           puts "Scaling down by 10% --- #{pic}"<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00007.jpg"/>     thumbnail = image.scale(0.10)<br class="calibre20"/>&#13;
           if File.exists?("th_#{pic}")<br class="calibre20"/>&#13;
               puts "Could not write file, thumbnail already exists."<br class="calibre20"/>&#13;
               next<br class="calibre20"/>&#13;
           end<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00008.jpg"/>     thumbnail.write "th_#{pic}"<br class="calibre20"/>&#13;
       end</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_209"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos358688"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">Run this script from the same directory as the images are located by typing:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby thumbnail.rb</code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_210"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos359328"/>The Results</span></h2>
    </div>

    <p class="calibre4">The result will be new images that are 10 percent of the original size called:<a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/></p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19">th_DSC_0001.JPG<br class="calibre20"/>
      th_DSC_0002.JPG<br class="calibre20"/>
      th_DSC_0003.JPG<br class="calibre20"/>
      th_DSC_0004.JPG<br class="calibre20"/>
      th_DSC_0005.JPG</tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_211"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos360047"/>How It Works</span></h2>
    </div>

    <p class="calibre4">The script is relatively small owing to the <a class="calibre17" shape="rect"/>RMagick library and <a class="calibre17" shape="rect"/>ImageMagick's power. Most of the work happens in the background—as it should! This is the first script that uses RMagick's methods, so I will take a moment to explain what RMagick is all about.</p>

    <p class="calibre4">RMagick is the Ruby way to interface with ImageMagick. You're probably thinking, "What's ImageMagick?" ImageMagick is a free, open source suite of tools used to manipulate images. Now that we have the "Magick" straight, you must have the ImageMagick suite installed on your machine (<a class="calibre6" href="http://www.imagemagick.org/" shape="rect">http://www.imagemagick.org/</a>), and you must also have the Ruby gem RMagick installed. Now we can get to the good stuff.</p>

    <p class="calibre4">With RMagick, you will find numerous methods to manipulate image files. For instance, when creating <a class="calibre17" shape="rect"/>thumbnails, there are several choices, such as <code class="calibre19">resize</code>, <code class="calibre19">scale</code>, and <code class="calibre19">thumbnail</code>. But don't worry about that until you get the hang of RMagick.<a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/></p>

    <p class="calibre4">This script begins by requiring RMagick <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. ImageMagick isn't required because RMagick handles all of the interactions. The next line includes Magick, which prevents the script from specifically calling each Magick method <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>. Instead of <code class="calibre19">Magick::Image.read()</code>, I can simply type <code class="calibre19">Image.read()</code>. Again, by using an <code class="calibre19">include</code>, you save space and typing.</p>

    <p class="calibre4">Next is the directory scan <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>. Learn this line if you plan on doing much directory searching while writing scripts. The line tells Ruby to find every file within the current directory that matches some filename with a variation of the JPEG extension. Next, the block starts to manipulate every JPEG image that is found.</p>

    <p class="calibre4">The first part of any image manipulation with RMagick is reading the image into an RMagick object <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>. Next, we need to ensure we aren't making a thumbnail out of a thumbnail. If the filename matches the regular expression (i.e., begins with <span><em class="italic">th</em></span>_), then it is skipped and the next image will be processed <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00006.jpg"/></span>. The script outputs the result by scaling the picture down to 10 percent of the original size <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00007.jpg"/></span>. We use the method <code class="calibre19">scale</code> and 0.10 to signify 10 percent and save all of the manipulations to a variable appropriately named <code class="calibre19">thumbnail</code>. The last step is to output the file with the new filename. As always, we look before we write, and if no other files with the new name exist, the thumbnail is written to the directory <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00008.jpg"/></span>.</p>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_212"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos364463"/>Hacking the Script</span></h2>
    </div>

    <p class="calibre4">Some variations to this script are saving the thumbnails into a separate folder or running through subdirectories searching for images. One of my colleagues even made an addition to label images based on the color heuristics. I'll leave these to your amusement.</p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_213"/>


  <div class="calibre3 calibre3 calibre3 calibre3" id="filepos364911">
    <h1 class="calibre1" id="calibre_pb_214"><span class="calibre2"><a class="calibre7" shape="rect"/>Resize a Picture</span></h1>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_215"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos365402"/>Resize a Picture</span></h2>
    </div>

    <div class="calibre3">
      <div class="calibre3 calibre3 calibre3">
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>resizePhoto.rb</h3>
      </div>

      <p class="calibre4">Digital SLR cameras provide tremendous resolution, but that makes for very large files. Many times I have found myself wanting to use a picture in a website or email and am forced to fire up the GIMP to shrink the <a class="calibre17" shape="rect"/>pictures to a more manageable <a class="calibre17" shape="rect"/>size. This script will tear through shrinking a picture to whatever size you want. We already covered how to rip through files to generate thumbnails in a previous script (see "#24 Creating a Thumbnail" on <a class="calibre6" href="../Text/dummy_split_170.html#filepos355400" shape="rect">Creating a Thumbnail</a>). This script is similar, but instead of shrinking everything to 10 percent, we'll set the final dimensions in the code—a nice feature if you're embedding images into the frame of a website.</p>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_216"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos366834"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"><img alt="" class="calibre23" src="../Images/00002.jpg"/> require 'RMagick'<br class="calibre20"/>&#13;
       include Magick<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> unless ARGV[0]<br class="calibre20"/>&#13;
           puts "\n\n\nYou need to specify a filename:  resizePhoto.rb &lt;filename&gt;\n\n\n"<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/> img = Image.read(ARGV[0]).first<br class="calibre20"/>&#13;
       width = nil<br class="calibre20"/>&#13;
       height = nil<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00005.jpg"/> img.change_geometry!('400x400') do |cols, rows, img|<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00006.jpg"/>      img.resize!(cols, rows)<br class="calibre20"/>&#13;
           width = cols<br class="calibre20"/>&#13;
           height = rows<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       file_name = "#{width}x#{height}_#{ARGV[0]}"<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       if File.exists?(file_name)<br class="calibre20"/>&#13;
           puts "File already exists.  Unable to write file."<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00007.jpg"/> img.write(file_name)</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_217"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos368340"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">As with most of the picture utility scripts, this takes an image as a command-line argument.</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby resizePhoto.rb <em class="italic"><code class="calibre19">DSC_0001.JPG</code></em></code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_218"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos369075"/>The Results</span></h2>
    </div>

    <p class="calibre4">The result will be a new image created called:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><em class="italic"><code class="calibre19">400x267_DSC_0001.JPG</code></em></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_219"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos369675"/>How It Works</span></h2>
    </div>

    <p class="calibre4">Using two methods from the <a class="calibre17" shape="rect"/>RMagick bag of tricks, this script <a class="calibre17" shape="rect"/>resizes an image while maintaining the aspect ratio. First we <code class="calibre19">require</code> RMagick and <code class="calibre19">include Magick</code> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. Just to make sure the <a class="calibre17" shape="rect"/>user is playing by our rules, we run his <a class="calibre17" shape="rect"/>input through the <a class="calibre17" shape="rect"/>verification line. If command-line arguments aren't supplied, he needs to be educated on how to run the script <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>. To begin the image manipulation, a new <code class="calibre19">Image</code> object is initialized, creatively called <code class="calibre19">img</code> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>. <code class="calibre19">height</code> and <code class="calibre19">width</code> are initialized, too, and will be used later for file naming specifics.</p>

    <p class="calibre4">The first method, and the one which maintains the aspect ratio, is <code class="calibre19">change_geometry</code> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>. I used the exclamation point variation to directly manipulate the image. In plain English, line <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span> says "the image must be smaller than 400 by 400" and whatever measurement exceeds the limits first will determine the other measurement. So, for an original image of 3,008 by 2,000 and a limit of 400 by 400, the width measurement is the larger of the width and height. To preserve the aspect ratio, the image will be 400 by 267. Of course, you could manually calculate the values to insert into the resize method, but that doesn't allow for much flexibility.<a class="calibre17" shape="rect"/></p>

    <p class="calibre4">Once <code class="calibre19">change_geometry!</code> has determined the correct aspect ratio, <code class="calibre19">resize!</code> is called upon to execute the new measurements <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00006.jpg"/></span> (again, the exclamation point signifies direct image manipulation). Two other variables, <code class="calibre19">width</code> and <code class="calibre19">length</code>, store the measurements for use when naming the file. The new image name will be the width by the length, all prepended to the original filename <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00007.jpg"/></span>.</p>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_220"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos373171"/>Hacking the Script</span></h2>
    </div>

    <p class="calibre4">This script is straightforward, but some interesting tweaks are possible; you could make the dimensions a command-line argument or choose from a few preset dimensions.</p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_221"/>


  <div class="calibre3 calibre3 calibre3 calibre3" id="filepos373525">
    <h1 class="calibre1" id="calibre_pb_222"><span class="calibre2"><a class="calibre7" shape="rect"/>Adding a Watermark to Pictures</span></h1>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_223"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos374030"/>Adding a Watermark to Pictures</span></h2>&#13;
    </div>&#13;
&#13;
    <div class="calibre3">&#13;
      <div class="calibre3 calibre3 calibre3">&#13;
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>watermark.rb</h3>&#13;
      </div>&#13;
&#13;
      <p class="calibre4">If you want to receive credit for your pictures while sharing them on the Internet, watermarks are a nice tool (see <a class="calibre6" href="#filepos374986" shape="rect">Figure 4-1</a>). Watermarks help ensure you remain the owner of your digital property. If there is a standard watermark you use, this script can incorporate it—big or small.<a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/><a class="calibre17" shape="rect"/></p>&#13;
&#13;
      <div class="calibre20">&#13;
        <span class="italic"><a class="calibre17" shape="rect"/></span>&#13;
&#13;
        <div class="calibre3 calibre3" id="filepos374986">&#13;
          <span class="italic"><a class="calibre17" shape="rect"/><img alt="Cover image with watermark" class="calibre23" src="../Images/00013.jpg"/></span>&#13;
        </div>&#13;
&#13;
        <p class="calibre4">Figure 4-1. Cover image with watermark</p>&#13;
      </div>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_224"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos375560"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"><img alt="" class="calibre23" src="../Images/00002.jpg"/> require 'RMagick'<br class="calibre20"/>&#13;
       include Magick<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       unless ARGV[0] and File.exists?(ARGV[0])<br class="calibre20"/>&#13;
           puts "\n\n\nYou need to specify a filename:  <a class="calibre17" shape="rect"/>watermark.rb &lt;filename&gt;\n\n\n"<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       img = Image.read(ARGV[0]).first<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> <a class="calibre17" shape="rect"/>watermark = Image.new(600, 50)<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/> watermark_text = <a class="calibre17" shape="rect"/>Draw.new<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00005.jpg"/> watermark_text.<a class="calibre17" shape="rect"/>annotate(watermark, 0,0,0,0, "No Starch Press") do<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00006.jpg"/>     watermark_text.gravity = CenterGravity<br class="calibre20"/>&#13;
           self.pointsize = 50<br class="calibre20"/>&#13;
           self.font_family = "Arial"<br class="calibre20"/>&#13;
           self.font_weight = BoldWeight<br class="calibre20"/>&#13;
           self.stroke = "none"<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00007.jpg"/> watermark.rotate!(45)<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00008.jpg"/> watermark = watermark.shade(true, 310, 30)<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00009.jpg"/> img.composite!(watermark, SouthWestGravity, HardLightCompositeOp)<br class="calibre20"/>&#13;
       watermark.rotate!(-90)<br class="calibre20"/>&#13;
       img.composite!(<a class="calibre17" shape="rect"/>watermark, NorthWestGravity, HardLightCompositeOp)<br class="calibre20"/>&#13;
       <a class="calibre17" shape="rect"/>watermark.rotate!(90)<br class="calibre20"/>&#13;
       img.composite!(watermark, NorthEastGravity, HardLightCompositeOp)<br class="calibre20"/>&#13;
       watermark.rotate!(-90)<br class="calibre20"/>&#13;
       img.composite!(watermark, SouthEastGravity, HardLightCompositeOp)   <br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       if File.exists?("wm_#{ARGV[0]}")<br class="calibre20"/>&#13;
           puts "Image already exists.  Unable to write file."<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       puts "Writing wm_#{ARGV[0]}"<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00011.jpg"/> img.write("wm_#{ARGV[0]}")</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_225"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos378143"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">Run the script with the image to be watermarked as the command-line argument:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby watermark.rb <em class="italic"><code class="calibre19">DSC_0001.JPG</code></em></code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_226"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos378861"/>The Results</span></h2>
    </div>

    <p class="calibre4">The result will be a new image with <span><em class="italic">No Starch Press</em></span> in every corner. The image is called:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><em class="italic"><code class="calibre19">wm_DSC_0001.JPG</code></em></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_227"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos379564"/>How It Works</span></h2>
    </div>

    <p class="calibre4">Watermarking has become the norm for rights holders in the age of ubiquitous copying. This script really flexes the RMagick muscles, so I'll spend a bit more time explaining exactly what is going on. The first two instructions are the same as in the previous RMagick script, save the usage line <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. To begin editing the image and creating the watermark, the script reads the photograph into an <code class="calibre19">Image</code> object called <code class="calibre19">img</code>.</p>

    <p class="calibre4">The next step is designing the watermark that will be placed in our photograph. A new image measuring 600 by 50 pixels is created and called <code class="calibre19">watermark</code> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>. This image isn't anything as of yet, but it will be after we follow a few more instructions. If you already have an image you want to use for watermarking, this is the area in which you'd want to put it. Since we want the words <span><em class="italic">No Starch Press</em></span> on the picture, the script will create them from scratch. A new <code class="calibre19">Draw</code> object is created which will hold our wicked cool text <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>.</p>

    <p class="calibre4">After the <code class="calibre19">Draw</code> and <code class="calibre19">Image</code> objects have been created, the <code class="calibre19">annotate</code> method is called on the <code class="calibre19">Draw</code> object <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>. The arguments passed to this method are the image which will be annotated, width of the rectangle, height of the rectangle, x-axis offset of the text, y-axis offset of the text, and, finally, the text to use. I specified zeros for the width and height to let the method know to use the entire 600-by-50-pixel rectangle.</p>

    <p class="calibre4">Within the <code class="calibre19">annotate</code> <a class="calibre17" shape="rect"/>method, the text is styled and centered. In this script, I've centered the text and made the font Arial, bold weight, and size 50 points <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00006.jpg"/></span>. Play around with these variables to customize the text to your liking.</p>

    <p class="calibre4">The <a class="calibre17" shape="rect"/>watermark has now been created as flat text. The next section will include placing the <a class="calibre17" shape="rect"/>watermark image on the original <a class="calibre17" shape="rect"/>photograph. You can literally put the watermark anywhere in the photograph that you think is appropriate. Caution: Try to disrupt the digital content as little as possible. In this example, the first watermark placement is on the lower-left corner of the photograph.</p>

    <p class="calibre4">I wanted the watermark to be angled so that when all four watermarks are set, the picture looks framed. To achieve the proper angles, I used the <code class="calibre19">.rotate!</code> method, which manipulates the image <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00007.jpg"/></span>. The <a class="calibre17" shape="rect"/>exclamation point reminds the user that the rotation will be "in place," or saved to the same variable permanently.<a class="calibre17" shape="rect"/></p>

    <p class="calibre4">To make the watermark stand out, I used the <a class="calibre17" shape="rect"/>shade method, which adds a cool 3D effect <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00008.jpg"/></span>. Essentially, these arguments make the image appear to be embossed and transparent. The first argument turns the shade attribute on, and the last two arguments specify the angle and height for the apparent light source. RMagick's website (<a class="calibre6" href="http://rmagick.rubyforge.org/" shape="rect">http://rmagick.rubyforge.org/</a>) has a great explanation of the different shades.</p>

    <p class="calibre4">To complete the watermarks, the <code class="calibre19">composite</code> method is used to blend the original photo and watermark images together <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00009.jpg"/></span>. The <code class="calibre19">composite</code> method is given the watermark image, the type of <span><em class="italic">gravity</em></span> (or where on the image the watermark will be placed), and also the <code class="calibre19">composite operator</code> to use. For a complete listing of <code class="calibre19">CompositeOperator</code> options, visit <a class="calibre6" href="http://www.imagemagick.org/RMagick/doc/constants.html#CompositeOperator/" shape="rect">http://www.imagemagick.org/RMagick/doc/constants.html#CompositeOperator/</a>. The final step is to ensure that a file with the same name doesn't already exist and then write the file <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00011.jpg"/></span>.<a class="calibre17" shape="rect"/></p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_228"/>


  <div class="calibre3 calibre3 calibre3 calibre3" id="filepos385627">
    <h1 class="calibre1" id="calibre_pb_229"><span class="calibre2"><a class="calibre7" shape="rect"/>Convert to Black and White</span></h1>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_230"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos386128"/>Convert to Black and White</span></h2>
    </div>

    <div class="calibre3">
      <div class="calibre3 calibre3 calibre3">
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>bwPhoto.rb</h3>
      </div>

      <p class="calibre4">Today most computer monitors are compared by how many colors they can display. Television screens can display almost 100 percent of all the colors a human eye can perceive. Yet, with all the colors in the world, black-and-white photography still captures beauty like nothing else. This script is awesome.<a class="calibre17" shape="rect"/></p>

      <p class="calibre4">A year ago, I had some of my orchid photographs on display in an art gallery in Alexandria, Virginia. One of the photographs was of a very ugly blossom, a sort of cream with muddled brown spots. It wasn't the vibrant fuchsia nor the angelic white most commonly associated with orchids. However, when the flower was converted to black and white, it showed itself to be a rare beauty. Now it's one of my personal favorites. This just goes to show the power of black-and-white photography.<a class="calibre17" shape="rect"/></p>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_231"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos387697"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"> require 'RMagick'<br class="calibre20"/>&#13;
       include Magick<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       unless ARGV[0]<br class="calibre20"/>&#13;
           puts "\n\n\nYou need <a class="calibre17" shape="rect"/>to specify a filename:  bwPhoto.rb &lt;filename&gt;\n\n\n"<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       new_img = "bw_#{ARGV[0]}"<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00002.jpg"/> img = Image.read(ARGV[0]).first<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> img = img.quantize(256, GRAYColorspace)<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       if File.exists?(new_img)<br class="calibre20"/>&#13;
           puts "Could not <a class="calibre17" shape="rect"/>write file. Image name already exists."<br class="calibre20"/>&#13;
           exit<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/> img.write(new_img)</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_232"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos388894"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">As with most of the picture utility scripts, this one takes an image as a command-line argument.</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby bwPhoto.rb <em class="italic"><code class="calibre19">DSC_0001.JPG</code></em></code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_233"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos389629"/>The Results</span></h2>
    </div>

    <p class="calibre4">The result will be a new image called:</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><em class="italic"><code class="calibre19">bw_DSC_0001.JPG</code></em></tt></span>
    </div>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_234"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos390216"/>How It Works</span></h2>
    </div>

    <p class="calibre4">The elegance of this script really impresses me every time I look at it. In essentially three lines of Ruby code, the script can completely transform a picture. (You could condense the script to one line, but I'll let you figure out how to do that.) By now, you should be getting used to the user input validation of command-line arguments. The main body begins by reading in the image that will be converted to <a class="calibre17" shape="rect"/>black and white <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. Next, the image is <span><em class="italic">quantized</em></span>, which means that the colors within the image are analyzed and a subset is used to represent the picture <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>.<a class="calibre17" shape="rect"/></p>

    <p class="calibre4">The <code class="calibre19">GRAYColorspace</code> is used as the second argument to convert the color image from red-green-blue (RGB) to grayscale. The first argument of <code class="calibre19">quantize</code> tells RMagick how many colors you want to use during the sampling. For a purely black-and-white photo, the first argument would be two. After the quantize method finishes execution, <code class="calibre19">img</code> will contain the black-and-white image <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>. Naturally, we want to save the image by using the <code class="calibre19">write</code> method. The file will be prepended with <code class="calibre19">bw_</code> to signify a black-and-white image.</p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_235"/>


  <div class="calibre3 calibre3 calibre3 calibre3" id="filepos392215">
    <h1 class="calibre1" id="calibre_pb_236"><span class="calibre2"><a class="calibre7" shape="rect"/>Creating a Photo Gallery</span></h1>
  </div>


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_237"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos392714"/>Creating a Photo Gallery</span></h2>
    </div>

    <div class="calibre3">
      <div class="calibre3 calibre3 calibre3">
        <h3 class="calibre16" id="heading_id_2"><a class="calibre7" shape="rect"/>createGallery.rb</h3>
      </div>

      <p class="calibre4">Electronic photo galleries provide a perfect forum for sharing pictures with friends and family. Stacks of full-size photos aren't very inviting, nor do they stand up by themselves. A nice gallery is needed to present them in the proper way. This is a quick <a class="calibre17" shape="rect"/>photo gallery script with a clean, simple style. The gallery can be modified and personalized as much as you like. You can get fancy, but for this example, I'll keep it as simple as possible. Familiarity with HTML is helpful but not necessary.</p>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_238"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos393897"/>The Code</span></h2>&#13;
    </div><a class="calibre17" shape="rect"/>&#13;
&#13;
    <div class="calibre3">&#13;
      <span class="calibre18"><tt class="calibre19"><img alt="" class="calibre23" src="../Images/00002.jpg"/> require 'RMagick'<br class="calibre20"/>&#13;
       require 'ftools'<br class="calibre20"/>&#13;
       include Magick<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00003.jpg"/> photos_row = 4<br class="calibre20"/>&#13;
       table_border = 1<br class="calibre20"/>&#13;
       html_rows = 1<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00004.jpg"/> File.makedirs("gallery/thumbs", "gallery/resize")<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00005.jpg"/> output = File.new("gallery/index.html","w+b")<br class="calibre20"/>&#13;
       html = &lt;&lt;EOF<br class="calibre20"/>&#13;
       &lt;html&gt;<br class="calibre20"/>&#13;
           &lt;head&gt;<br class="calibre20"/>&#13;
               &lt;title&gt;My Photos&lt;/title&gt;<br class="calibre20"/>&#13;
           &lt;/head&gt;<br class="calibre20"/>&#13;
           &lt;body bgcolor="#d0d0d0"&gt;<br class="calibre20"/>&#13;
               &lt;h1&gt;Welcome To My Photo Gallery&lt;/h1&gt;<br class="calibre20"/>&#13;
               &lt;table border=#{table_border}&gt;<br class="calibre20"/>&#13;
       EOF<br class="calibre20"/>&#13;
       output.puts html<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00006.jpg"/> Dir['*.[Jj][Pp]*[Gg]'].each do |pic|<br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00007.jpg"/>      thumb = Image.read(pic)[0]<br class="calibre20"/>&#13;
            thumb.change_geometry!('150x150') do |cols, rows, img|<br class="calibre20"/>&#13;
                thumb.resize!(cols, rows)<br class="calibre20"/>&#13;
            end<br class="calibre20"/>&#13;
            if File.exists?("gallery/thumbs/th_#{pic}")<br class="calibre20"/>&#13;
                puts "Could not write file. Thumbnail already exists."<br class="calibre20"/>&#13;
            else<br class="calibre20"/>&#13;
                thumb.write "gallery/thumbs/th_#{pic}"<br class="calibre20"/>&#13;
            end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00008.jpg"/>      resize = Image.read(pic)[0]<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
            resize.change_geometry!('800x600') do |cols, rows, img|<br class="calibre20"/>&#13;
               resize.resize!(cols, rows)<br class="calibre20"/>&#13;
            end<br class="calibre20"/>&#13;
            if File.exists?("gallery/resize/resize_#{pic}")<br class="calibre20"/>&#13;
               puts "Could not write file. Resized image already exists."<br class="calibre20"/>&#13;
            else<br class="calibre20"/>&#13;
               resize.write("gallery/resize/resize_#{pic}")<br class="calibre20"/>&#13;
            end<br class="calibre20"/>&#13;
      <a class="calibre17" shape="rect"/><br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00009.jpg"/>      if html_rows % photos_row == 1<br class="calibre20"/>&#13;
                output.puts "\n&lt;tr&gt;"<br class="calibre20"/>&#13;
            end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00011.jpg"/> output.puts &lt;&lt;EOF<br class="calibre20"/>&#13;
               &lt;td&gt;&lt;a href="resize/resize_#{pic}/" title="#{pic}"<br class="calibre20"/>&#13;
       target="_blank"&gt;&lt;img src="thumbs/th_#{pic}" alt="#{pic}"/&gt;&lt;/a&gt;&lt;/td&gt;<br class="calibre20"/>&#13;
       EOF<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
           if html_rows % photos_row == 0<br class="calibre20"/>&#13;
               output.puts "&lt;/tr&gt;"<br class="calibre20"/>&#13;
           end<br class="calibre20"/>&#13;
           html_rows+=1<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
       unless html_rows % photos_row == 1<br class="calibre20"/>&#13;
           output.puts "&lt;/tr&gt;"<br class="calibre20"/>&#13;
       end<br class="calibre20"/>&#13;
      <br class="calibre20"/>&#13;
      <img alt="" class="calibre23" src="../Images/00012.jpg"/> output.puts "&lt;/body&gt;\n&lt;/html&gt;"<br class="calibre20"/>&#13;
       output.puts "&lt;!-- Courtesy of No Starch Press: Wicked Cool Ruby Scripts --&gt;"<br class="calibre20"/>&#13;
       output.close</tt></span>&#13;
    </div>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_239"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos397700"/>Running the Code</span></h2>
    </div>

    <p class="calibre4">To run the code, simply run the script from the image directory in which you want the <a class="calibre17" shape="rect"/>photo gallery created.</p><a class="calibre17" shape="rect"/>

    <div class="calibre3">
      <span class="calibre18"><tt class="calibre19"><strong class="calibre22"><code class="calibre19">ruby createGallery.rb</code></strong></tt></span>
    </div>
  </div>


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_240"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos398415"/>Results</span></h2>&#13;
    </div>&#13;
&#13;
    <p class="calibre4">The result is a self-contained photo gallery in the same directory as the pictures (<a class="calibre6" href="../Text/dummy_split_201.html#filepos400625" shape="rect">Figure 4-2</a>). Navigate to the <span><em class="italic">gallery</em></span> directory and open <span><em class="italic">index.html</em></span>. There will be two subdirectories containing the thumbnail and resized images: <span><em class="italic">thumbs</em></span> and <span><em class="italic">resize</em></span>.</p>&#13;
  </div>&#13;


  <div class="calibre3">&#13;
    <div class="calibre3 calibre3 calibre3">&#13;
      <h2 class="calibre8" id="calibre_pb_241"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos399333"/>How It Works</span></h2>&#13;
    </div>&#13;
&#13;
    <p class="calibre4">Two libraries are required in this script <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00002.jpg"/></span>. <a class="calibre17" shape="rect"/>RMagick is required for the image manipulation, and <a class="calibre17" shape="rect"/>ftools is required because the script will create three directories. Magick is included so each RMagick method doesn't have to be called with an explicit (or fully qualified) receiver. Next, the three variables are initialized that will determine the final HTML output <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00003.jpg"/></span>. Two of these variables will format the web page output, and the third variable is a counter. The script is set up to display four images per row, but you can simply change the variable <code class="calibre19">photo_row</code> to any number you prefer. The same options go for the <code class="calibre19">table_border</code>, which specifies how thick the HTML table border will be.</p>&#13;
&#13;
    <div class="calibre20">&#13;
      <span class="italic"><a class="calibre17" shape="rect"/></span>&#13;
&#13;
      <div class="calibre3 calibre3" id="filepos400625">&#13;
        <span class="italic"><a class="calibre17" shape="rect"/><img alt="Photo gallery made by Ruby" class="calibre23" src="../Images/00014.jpg"/></span>&#13;
      </div>&#13;
&#13;
      <p class="calibre4">Figure 4-2. Photo gallery made by Ruby</p>&#13;
    </div>&#13;
&#13;
    <p class="calibre4">The directory structure the <a class="calibre17" shape="rect"/>photo gallery uses includes a main folder called <span><em class="italic">gallery</em></span> with a separate directory for the thumbnail images and resized images. To set up this directory structure, <code class="calibre19">File.makedirs</code> is called <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00004.jpg"/></span>. Each argument within the method will create a directory. Additionally, if the directory is buried within several directories, the method will create the parent directories. So, for <span><em class="italic">gallery/thumbs</em></span>, I don't need to separately specify the folder <span><em class="italic">gallery</em></span> since the method creates the directory <span><em class="italic">gallery</em></span> while making <span><em class="italic">thumbs</em></span>.<a class="calibre17" shape="rect"/></p>&#13;
&#13;
    <p class="calibre4">The main result of this script will be a web page. We'll call the web page <span><em class="italic">index.html</em></span> so a web server will know it is the main photo gallery page. Because <span><em class="italic">index.html</em></span> doesn't exist, we must create it using the <code class="calibre19">File.new</code> method. The file will be created in our new <span><em class="italic">gallery</em></span> directory <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00005.jpg"/></span>. The next block of code is called a <span><em class="italic">here-doc</em></span>, and it lets me write text as I would in a normal text editor. I don't have to worry about escaping quotes or adding <code class="calibre19">\n</code> for line breaks—the here-doc preserves it all. The here-doc in this script contains the beginnings of the HTML output with several tags. The first few pieces create the web page title, and the last two lines create the bold title and start our table.<a class="calibre17" shape="rect"/></p>&#13;
&#13;
    <p class="calibre4">After the directories have been put in place and the web page has been created, it's time to start adding some photos. To do this, we need to scan the directory for any JPEG images. If you're going to be adding other types of images, you'll need to change this line accordingly <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00006.jpg"/></span>. The main directory traversal block is broken down into three distinct sections: thumbnail creation, resizing the original image, and adding the appropriate HTML code to our web page.</p>&#13;
&#13;
    <p class="calibre4">To create thumbnails, I used a different function than in the previous thumbnail script (see "#24 Creating a Thumbnail" on <a class="calibre6" href="../Text/dummy_split_170.html#filepos355400" shape="rect">Creating a Thumbnail</a>). The reason I used a different method was to ensure uniformity within the web page. I wanted the thumbnails to all be the same size since it looks better. First, a new Image object is created, called <code class="calibre19">thumb</code> <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00007.jpg"/></span>. Then <code class="calibre19">thumb</code> is passed into the aspect ratio preserving <code class="calibre19">change_geometry!</code> method. Thumbnails are typically around 150 by 150 pixels, so that is the limit set as the <code class="calibre19">change_geometry!</code> argument. After the <code class="calibre19">thumb</code> image had been resized, it was written into the <span><em class="italic">thumbs</em></span> directory with a <code class="calibre19">th_</code> prepended to the image name.</p>&#13;
&#13;
    <p class="calibre4">A similar manipulation of the image was done to resize it <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00008.jpg"/></span>. Instead of limiting the image to 150 by 150 pixels, a larger scale of 800 by 600 pixels was used. The full-scale size can be as big as the screen resolution of your viewers. In my experience with website visitors, most have a resolution of 1,280 by 1,024, but there are some who choose a smaller 800-by-600 resolution. You'll need to keep that in mind when deciding on an appropriate image resolution for your purposes. When creating the thumbnails and resizing the image, we never want to overwrite an existing file. So, an error message is displayed stating the image name that could not be created because that image name already exists.</p>&#13;
&#13;
    <p class="calibre4">After the images have been created, the script turns its attention back to the HTML file. This script uses a table to organize the images. With a bit of math trickery and some precise calculations, that table is symmetrical <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00009.jpg"/></span>. The <code class="calibre19">%</code>, or <span><em class="italic">modulo</em></span>, operator returns the remainder of a division operation. If there is a remainder of 1, the script knows a new row should be started. The script uses that same modulo operator, now looking for a remainder of 0, to calculate whether a row should be closed. No matter what number <code class="calibre19">$photos_row</code> contains, a table matching the specifications will be created. In between each row are columns signified by <code class="calibre19">&lt;td&gt;</code> and <code class="calibre19">&lt;/td&gt;</code>: This is where each image is inserted. Again, using a here-doc on line <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00011.jpg"/></span>, the HTML text tells the web page to insert a new column entry, a hyperlink to the larger image that opens in a new window, a title, and, lastly, the image thumbnail. This process is done for each image.</p>&#13;
&#13;
    <p class="calibre4">Once all the images have been manipulated and added to the web page, the script checks to see if a row needs to be closed and then outputs some final HTML comments to tidy up the web page <span><a class="calibre17" shape="rect"/><img alt="" class="calibre23" src="../Images/00012.jpg"/></span>. The HTML file is then closed.</p>&#13;
&#13;
    <p class="calibre4">You can test the image gallery by going to the gallery folder and clicking the <span><em class="italic">index.html</em></span> file you just created. Building a photo gallery doesn't get much easier than that!</p>&#13;
  </div>&#13;


  <div class="calibre3">
    <div class="calibre3 calibre3 calibre3">
      <h2 class="calibre8" id="calibre_pb_242"><span class="calibre9"><a class="calibre7" shape="rect"/><a class="calibre7" id="filepos408468"/>Hacking the Script</span></h2>
    </div>

    <p class="calibre4">Take some time to play around with the embedded HTML code and make the photo gallery your own! There are endless possibilities with tables, colors, fonts, and so on. If you come up with a wicked cool photo gallery, feel free to send it to me.<a class="calibre17" shape="rect"/></p>
  </div>

  <div class="mbppagebreak" id="calibre_pb_243"/>
</body></html>