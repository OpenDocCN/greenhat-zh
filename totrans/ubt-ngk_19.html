<html><head></head><body><div class="chapter" title="Chapter&#xA0;19.&#xA0;DEFENDING THE NEST"><div class="titlepage"><div><div><h1 class="title"><a id="defending_the_nest"/>Chapter 19. DEFENDING THE NEST</h1></div><div><h3 class="subtitle">Security</h3></div></div></div><div class="informalfigure"><div class="mediaobject"><a id="I_mediaobject19_d1e23421"/><img src="httpatomoreillycomsourcenostarchimages656092.png.jpg" alt="image with no caption"/></div></div><p>Many a Windows user has entered the Linux fold after a host of bad experiences with <span class="emphasis"><em>malware</em></span> in the Windows world—viruses, spyware, and all sorts of other malicious bits of software code, too numerous to imagine. Windows is also plagued by a seemingly endless array of security vulnerabilities, leaving the system easy prey to invaders with less than noble intentions. Every trip out into cyberspace thus becomes something like a run through the infectious diseases ward of a hospital. For a Windows user, it can sometimes seem that more time is spent ridding the system of viral pests and defending it from invaders than is actually spent getting things done.<a id="IDX-CHP-19-1512" class="indexterm"/><a id="IDX-CHP-19-1513" class="indexterm"/></p><p>Fortunately, Linux does not suffer greatly from such problems, leading to the much-touted claim that Linux is practically virus free and quite secure. Numerous lines of reasoning have been proffered to explain Linux's malware-and exploit-resistant nature. One reason is simply popularity—or lack thereof. Because Linux is not as widespread a system as Windows is, it is also a much less attractive target of digital evil-doers, who very often seem to be motivated by the challenge and headline-catching glory that comes with creating a truly global virus or finding a theretofore unknown back door.</p><p>Another reason is that Linux users, as a general rule, work on their computers in a nonprivilege mode, one in which the user does not have the right to install software without a password. This is not the case in some versions of Windows. A virus or other form of malware attached to an email or piggybacked upon another file or application cannot, therefore, install itself in your Linux system without that password . . . well, theoretically, at least. Of course, now that more recent versions of Windows use a privilege structure by default, this point is a bit less of an issue.<a id="IDX-CHP-19-1514" class="indexterm"/></p><p>There is also the matter of structural design. Every system has security holes that can be exploited by digital and human foe alike. Windows might well be called the Swiss cheese of operating systems in this regard. Of course, Linux has its holes too, though far fewer of them than Windows does; and Linux plugs them through downloadable updates faster, once they are found.</p><p>Finally, Ubuntu's preconfigured security policy brings a defensive edge—there are no open incoming ports in Ubuntu desktop systems. This means your Ubuntu Linux system is even less susceptible to unwanted intrusions.</p><div class="sect1" title="Does My System Need Protection?"><div class="titlepage"><div><div><h1 class="title"><a id="does_my_system_need_protection_question"/>Does My System Need Protection?</h1></div></div></div><p>So, with all this talk about Linux's great security, you may wonder whether you need to bother worrying about it at all. Well, if you take a look at the Ubuntu forums, you might find yourself a bit confused. When asked whether Linux users need to install antivirus software or firewalls, most users answer with an emphatic <span class="emphasis"><em>no</em></span>. On the other hand, you'll find that an awful lot of people have installed or are trying to install that software. Hmmm.<a id="IDX-CHP-19-1515" class="indexterm"/><a id="IDX-CHP-19-1516" class="indexterm"/><a id="IDX-CHP-19-1517" class="indexterm"/><a id="IDX-CHP-19-1518" class="indexterm"/><a id="IDX-CHP-19-1519" class="indexterm"/><a id="IDX-CHP-19-1520" class="indexterm"/></p><p>So, what's a Linux user to do?</p><p>If you are on a network where you transfer a lot of files among a lot of Windows machines, you might want to think about installing some antivirus software, if for nothing more than the good of the Windows systems involved and the users of those systems—your unenlightened (i.e., Windows-using) email pals, for example. You might also want to give it a go if you are, by nature, on the cautious side of the spectrum. Basically, if it makes you feel safer to install some protection, go ahead. If it makes you feel safer to go whole-hog and install the full line of defense mechanisms I cover in this chapter, go ahead. After all, either way you go, it isn't going to cost you anything, and it certainly isn't going to hurt you any.</p></div></div>
<div class="sect1" title="The First Line of Defense"><div class="titlepage"><div><div><h1 class="title"><a id="the_first_line_of_defense"/>The First Line of Defense</h1></div></div></div><p>Regardless of the system you happen to be using (though I am assuming that you have become a Linux devotee by now), the first line of defense for any computer permanently hooked up to the Internet is a <span class="emphasis"><em>router</em></span>—an electronic device that allows a number of computers on a local network (such as in your home or at your office) to connect to and share a single connection from your Internet service provider (ISP). While the router is connected to your modem via cable, the connection from the router to the computers on your local network can be wired, wireless, or both.<a id="IDX-CHP-19-1521" class="indexterm"/><a id="IDX-CHP-19-1522" class="indexterm"/></p><p>What does a router have to do with the defense of your computer? Well, most routers include a <span class="emphasis"><em>firewall</em></span>, which essentially functions to keep all of the bad stuff on the Web away from your computer, much in the way that the firewall in your car keeps the heat, fumes, and noise from your engine out of the passenger compartment. This built-in firewall is one reason that even people with only one computer, who could just as easily connect their computer directly to their cable or DSL modem, use a router. Of course, just how much security the firewall in your router provides depends on which filters you select in the firewall setup software. For example, a very common and useful filter (particularly for those with a wireless network) limits Internet access to those machines specified on the firewall's access list. This prevents your next-door neighbors from hitching a wireless ride via your ISP connection. They aren't paying the bill, after all.<a id="IDX-CHP-19-1523" class="indexterm"/><a id="IDX-CHP-19-1524" class="indexterm"/></p><p>The setup software for a router is built into the router, so you don't have to worry about software installation and system compatibility. Using your router with Linux is no different from using it with Windows. You can access the software and modify your settings via a simple web browser, as you can see in <a class="xref" href="ch19s02.html#setting_up_a_router" title="Figure 19-1. Setting up a router">Figure 19-1</a>. Just type the IP address of the router (usually provided in the owner's manual) in the browser's location bar, press <span class="keycap"><strong>enter</strong></span>, and you'll be ready to go.<a id="IDX-CHP-19-1525" class="indexterm"/></p><div class="figure"><a id="setting_up_a_router"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23541"/><img src="httpatomoreillycomsourcenostarchimages656689.png.jpg" alt="Setting up a router"/></div></div><p class="title">Figure 19-1. Setting up a router</p></div></div>
<div class="sect1" title="Software Firewalls"><div class="titlepage"><div><div><h1 class="title"><a id="software_firewalls"/>Software Firewalls</h1></div></div></div><p>If you don't have a router and don't plan on getting one or if you have one but are bordering on paranoia, you might want to consider using a software firewall, in particular one of the most popular software firewalls available for Linux, Firestarter.<a id="IDX-CHP-19-1526" class="indexterm"/><a id="IDX-CHP-19-1527" class="indexterm"/><a id="IDX-CHP-19-1528" class="indexterm"/><a id="IDX-CHP-19-1529" class="indexterm"/></p><p>You can get Firestarter via the Ubuntu Software Center by searching for <span class="emphasis"><em>firestarter</em></span> and installing it. Once it is installed, run it by selecting <span class="strong"><strong>System</strong></span> ▸ <span class="strong"><strong>Administration</strong></span> ▸ <span class="strong"><strong>Firestarter</strong></span> (you might be asked for your password). Firestarter will open with a self-explanatory setup wizard the first time. Just read each screen carefully; make whatever selection are suggested, if any; and click the <span class="strong"><strong>Forward</strong></span> button in each of the wizard screens until you get to the last one (shown in <a class="xref" href="ch19s03.html#the_last_screen_of_the_firestarter_setup" title="Figure 19-2. The last screen of the Firestarter setup wizard">Figure 19-2</a>). On that screen, make sure that the box next to <span class="emphasis"><em>Start firewall now</em></span> is checked, and then click the <span class="strong"><strong>Save</strong></span> button. The wizard window will then close, and the main Firestarter window will appear. Assuming the correct network device was detected and selected and the correct wizard choice made, the firewall will be up and running.</p><div class="figure"><a id="the_last_screen_of_the_firestarter_setup"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23601"/><img src="httpatomoreillycomsourcenostarchimages656691.png.jpg" alt="The last screen of the Firestarter setup wizard"/></div></div><p class="title">Figure 19-2. The last screen of the Firestarter setup wizard</p></div><p>If the wrong network device was selected, a warning window will appear telling you so. In that case, you can do a bit of trial-and-error manipulation by selecting <span class="strong"><strong>Edit</strong></span> ▸ <span class="strong"><strong>Preferences</strong></span> in the main Firestarter window and then clicking <span class="strong"><strong>Network Settings</strong></span> in the Preferences window that appears (<a class="xref" href="ch19s03.html#selecting_network_devices_in_firestarter" title="Figure 19-3. Selecting network devices in Firestarter">Figure 19-3</a>). In that window, select one of the other devices listed in the Detected device(s) drop-down menu, and then click the <span class="strong"><strong>Accept</strong></span> button. Once back at the main Firestarter window, click the <span class="strong"><strong>Start Firewall</strong></span> button (which looks like a Play button), and see what happens. If you still can't start the firewall, repeat the process I've just described, this time selecting a different network device.</p><div class="figure"><a id="selecting_network_devices_in_firestarter"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23629"/><img src="httpatomoreillycomsourcenostarchimages656693.png.jpg" alt="Selecting network devices in Firestarter"/></div></div><p class="title">Figure 19-3. Selecting network devices in Firestarter</p></div><p>Once your firewall is up and running, there is nothing more that you really need to do. You can simply look at the Firestarter window (<a class="xref" href="ch19s03.html#firestarter_in_action" title="Figure 19-4. Firestarter in action">Figure 19-4</a>) to see what is going on network-wise on your computer—which active connections you have, how much information has been coming and going, and whether there have been any events in which, for example, the firewall has blocked an intruder. If you click the <span class="strong"><strong>Events</strong></span> tab, you can then see the details of those events, such as what connection attempts were blocked, where they came from, and when they happened.</p><div class="figure"><a id="firestarter_in_action"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23644"/><img src="httpatomoreillycomsourcenostarchimages656695.png.jpg" alt="Firestarter in action"/></div></div><p class="title">Figure 19-4. Firestarter in action</p></div><div class="sect2" title="Taking Control of Firestarter"><div class="titlepage"><div><div><h2 class="title"><a id="taking_control_of_firestarter"/>Taking Control of Firestarter</h2></div></div></div><p>You can control how Firestarter deals with various network events by creating your own <span class="emphasis"><em>policies</em></span>. The default policy set in Firestarter allows you to do whatever you normally do via the Internet, while it blocks new connections to your computer from the Internet or any other computer on your network.<a id="IDX-CHP-19-1530" class="indexterm"/><a id="IDX-CHP-19-1531" class="indexterm"/><a id="IDX-CHP-19-1532" class="indexterm"/><a id="IDX-CHP-19-1533" class="indexterm"/></p><p>To make things a bit more draconian, you can click the <span class="strong"><strong>Policy</strong></span> tab, select <span class="strong"><strong>Outbound traffic policy</strong></span> in the Editing drop-down menu, and then select <span class="strong"><strong>Restrictive by default, whitelist traffic</strong></span>. If you just want to deny anyone working on your computer access to a specific website, for instance, simply select <span class="strong"><strong>Permissive by default, blacklist traffic</strong></span>, right-click the <span class="strong"><strong>Deny connections to host</strong></span> field, and select <span class="strong"><strong>Add Rule</strong></span> in the pop-up menu. In the Add new outbound rule window, enter the domain name for the targeted site (as in <span class="emphasis"><em>example.com</em></span>), click <span class="strong"><strong>Add</strong></span>, and then click the <span class="strong"><strong>Apply Policy</strong></span> button in the main Firestarter window (it's the one that looks like a green check mark).</p></div><div class="sect2" title="Confirming That Firestarter Runs Automatically"><div class="titlepage"><div><div><h2 class="title"><a id="confirming_that_firestarter_runs_automat"/>Confirming That Firestarter Runs Automatically</h2></div></div></div><p>After you run Firestarter the first time, it will set itself to automatically start up whenever you start your system. Don't be concerned when you don't see the graphical interface you saw when you first started it; Firestarter will be running in the background, silently protecting your computer.</p><p>If you are the doubting type, you can check to see whether Firestarter actually is running in the background by opening a Terminal window, typing <strong class="userinput"><code>sudo /etc/init.d/firestarter status</code></strong>, and then pressing <span class="keycap"><strong>enter</strong></span>. If Firestarter is running, you will see the message <code class="literal">* Firestarter is running...</code> in the Terminal window. Worries over. If Firestarter isn't running, the response will read <code class="literal">* Firestarter is stopped</code>.</p></div><div class="sect2" title="Finding Out More"><div class="titlepage"><div><div><h2 class="title"><a id="finding_out_more"/>Finding Out More</h2></div></div></div><p>If the world of firewalls is new to you, you can check out the Firestarter home page to learn a bit more. To check out the online manual, just to go to the Firestarter <span class="strong"><strong>Help</strong></span> menu, and select <span class="strong"><strong>Online Users' Manual</strong></span>, which will open the page in your web browser. If you prefer to check out the manual before installing Firestarter, point your browser to <a class="ulink" href="http://www.fs-security.com/docs/">http://www.fs-security.com/docs/</a>. You will also find a pretty good quick tutorial there.</p></div></div>
<div class="sect1" title="ClamAV: Antivirus Software, Linux Style"><div class="titlepage"><div><div><h1 class="title"><a id="clamav_colon_antivirus_software_comma_li"/>ClamAV: Antivirus Software, Linux Style</h1></div></div></div><p>Despite the lack of viruses that can wreak havoc upon your Linux system, your computer could still act as a transmitter of Windows viruses. As a result, a number of free antivirus scanners are available for Linux users interested in helping protect Windows users from viruses. These include Panda Desktop Secure (<a class="ulink" href="http://www.pandasecurity.com/usa/homeusers/downloads/desktopsecure/">http://www.pandasecurity.com/usa/homeusers/downloads/desktopsecure/</a>), f-Prot (<a class="ulink" href="http://www.f-prot.com/">http://www.f-prot.com/</a>), and numerous others. For most Linux users, however, the virus scanner of choice is the open source contender: ClamAV.<a id="IDX-CHP-19-1534" class="indexterm"/><a id="IDX-CHP-19-1535" class="indexterm"/><a id="IDX-CHP-19-1536" class="indexterm"/><a id="IDX-CHP-19-1537" class="indexterm"/><a id="IDX-CHP-19-1538" class="indexterm"/><a id="IDX-CHP-19-1539" class="indexterm"/><a id="IDX-CHP-19-1540" class="indexterm"/></p><p>Although it can be used on a number of operating systems, ClamAV is considered to be <span class="emphasis"><em>the</em></span> Linux antivirus software package. It is open source and totally free, and you don't have to worry about licenses or suffer the bother of renewing them. Unfortunately, on its own, ClamAV is a command-driven application, which makes it a bit less user-friendly. Fortunately for all involved, a graphical interface, albeit a simple one, is available; it goes by the name of ClamTk. Both ClamAV and ClamTk are available via the Ubuntu Software Center—just search for <span class="emphasis"><em>clamtk</em></span>, and install Virus Scanner. The Ubuntu Software Center will then automatically install ClamAV and all other packages it needs in order to run.<a id="IDX-CHP-19-1541" class="indexterm"/></p><p>Once ClamAV is installed, you can perform a virus scan by selecting <span class="strong"><strong>Applications</strong></span> ▸ <span class="strong"><strong>Accessories</strong></span> ▸ <span class="strong"><strong>Virus Scanner</strong></span>. This will open the ClamTk Virus Scanner window (<a class="xref" href="ch19s04.html#clamtkmthe_graphical_interface_for_clama" title="Figure 19-5. ClamTk—the graphical interface for ClamAV">Figure 19-5</a>).</p><p>Once up and running, you can scan your system on demand from the Scan menu. To scan a single folder, select <span class="strong"><strong>A Directory</strong></span>. To scan a directory and everything within it, choose <span class="strong"><strong>Recursive Scan</strong></span>. In either case, the Select a Directory window will appear. Select the folder or disc you want to scan, and click <span class="strong"><strong>OK</strong></span>. ClamAV will then start scanning your system. ClamTk will let you know what it is scanning at any given moment in the empty space just below the button bar. If it finds anything suspicious, it will list that item in the main pane of the window.</p><div class="figure"><a id="clamtkmthe_graphical_interface_for_clama"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23822"/><img src="httpatomoreillycomsourcenostarchimages656697.png.jpg" alt="ClamTk—the graphical interface for ClamAV"/></div></div><p class="title">Figure 19-5. ClamTk—the graphical interface for ClamAV</p></div><p>ClamAV is set up by default to check for <span class="emphasis"><em>signature updates</em></span> when it starts. These signature updates tell ClamAV what new viruses to be on the lookout for. If you leave your machine on for days and days at a time, it is probably also a good idea to set things up so that ClamAV will automatically check for signature updates daily rather than just on startup. To do this, go to the <span class="strong"><strong>Advanced</strong></span> menu, and select <span class="strong"><strong>Scheduler</strong></span>. In the Schedule window, select a time for ClamAV to do its update check in the bottom half of the window. Click the <span class="strong"><strong>Add</strong></span> button when done. You can also use this window to set up a time to regularly scan the system—just select the time you'd like the scan to occur, and click <span class="strong"><strong>Add</strong></span>. When you're finished, click <span class="strong"><strong>Close</strong></span>.</p><p>As I mentioned, the only viruses you are likely to encounter during a virus scan are those designed for Windows systems, which cannot affect your Linux system. Although it won't hurt you any to scan your entire system for viruses, it is probably better to focus your virus-scanning activities on your Windows partition, if you have one, and on any files that you will be sending as email attachments, particularly to Windows users.</p></div>
<div class="sect1" title="Project 19A: Virus Scanning with avast!"><div class="titlepage"><div><div><h1 class="title"><a id="project_19a_colon_virus_scanning_with_av"/>Project 19A: Virus Scanning with avast!</h1></div></div></div><p>Although ClamAV may be the virus scanner of choice in the Linux world, my personal favorite is still avast!, which defended me during my Windows years. I think it is easier to use and, for what it's worth, nicer to look at. On the downside, it does require you to register every year so that you can get a license key, but that is hardly a monumental task, and it is still free.<a id="IDX-CHP-19-1545" class="indexterm"/><a id="IDX-CHP-19-1546" class="indexterm"/><a id="IDX-CHP-19-1547" class="indexterm"/><a id="IDX-CHP-19-1542" class="indexterm"/><a id="IDX-CHP-19-1543" class="indexterm"/><a id="IDX-CHP-19-1544" class="indexterm"/><a id="IDX-CHP-19-1548" class="indexterm"/><a id="IDX-CHP-19-1549" class="indexterm"/><a id="IDX-CHP-19-1550" class="indexterm"/></p><div class="sect2" title="19A-1: Downloading the avast! DEB Package and License Key"><div class="titlepage"><div><div><h2 class="title"><a id="a-1_colon_downloading_the_avast_exclamat"/>19A-1: Downloading the avast! DEB Package and License Key</h2></div></div></div><p>First you have to get the avast! file and license key. You can do this by opening your web browser and going to <a class="ulink" href="http://www.avast.com/linux-home-edition/">http://www.avast.com/linux-home-edition/</a>. Once you're there, click the <span class="strong"><strong>Download</strong></span> tab, and then download the DEB package of the avast! Linux Edition.</p><p>Once the download is complete, double-click the DEB package, and when the Package Installer window appears, click the <span class="strong"><strong>Install Package</strong></span> button. You will then be prompted for your password, so provide that, and click <span class="strong"><strong>OK</strong></span>. The download and installation will then begin. When these processes are complete, close the notification window and the Package Installer. Once you've downloaded and installed avast!, you'll need a license key in order to use it. Just go back to the avast! Download page in Firefox, click the <span class="strong"><strong>registration form</strong></span> link, and then fill out and submit that form. You should receive your license key by email a few minutes later (though the page says it could take up to 24 hours).</p></div><div class="sect2" title="19A-2: Running and Using avast!"><div class="titlepage"><div><div><h2 class="title"><a id="a-2_colon_running_and_using_avast_exclam"/>19A-2: Running and Using avast!</h2></div></div></div><p>Once avast! is installed, you can run it by selecting <span class="strong"><strong>Applications</strong></span> ▸ <span class="strong"><strong>Accessories</strong></span> ▸ <span class="strong"><strong>avast! Antivirus</strong></span>. The first time you run avast!, a small window (<a class="xref" href="ch19s05.html#entering_your_avast_exclamation_license" title="Figure 19-6. Entering your avast! license key">Figure 19-6</a>) will appear asking you to input your license code. Assuming you registered your free copy of avast! at the beginning of the project as I instructed you to do, your registration key should already be waiting for you in your email inbox. Copy the key, and paste it into the text field in the Registration window using <span class="keycap"><strong>ctrl</strong></span>-V or by right-clicking in the box and selecting <span class="strong"><strong>Paste</strong></span>. Once the license key is in place, click the <span class="strong"><strong>OK</strong></span> button.</p><p>The main avast! window (<a class="xref" href="ch19s05.html#avast_exclamation_virus_scanner" title="Figure 19-7. avast! virus scanner">Figure 19-7</a>) will now appear, but before you get started scanning away, it is a good idea to check for any updates to your virus database. New viruses are constantly appearing in cyberspace, so you should keep avast!'s virus database up-to-date so that it recognizes any viral newcomers. To perform the update, just click the <span class="strong"><strong>Update database</strong></span> button, and let avast! do its thing.</p><div class="figure"><a id="entering_your_avast_exclamation_license"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23953"/><img src="httpatomoreillycomsourcenostarchimages656699.png.jpg" alt="Entering your avast! license key"/></div></div><p class="title">Figure 19-6. Entering your avast! license key</p></div><div class="figure"><a id="avast_exclamation_virus_scanner"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e23961"/><img src="httpatomoreillycomsourcenostarchimages656701.png.jpg" alt="avast! virus scanner"/></div></div><p class="title">Figure 19-7. avast! virus scanner</p></div><p>When avast! is done updating the virus database, you can get on to the work of virus scanning by first deciding whether you want to scan just your home directory, the entire system, or selected folders. You can also decide how thorough a scan you want to perform via the three choices available in the middle of the window: Quick, Standard, or Thorough.</p><p>Which one of these sensitivity modes you choose depends on how thorough you want the scan to be. The Quick scan just scans files that end in certain extensions (<span class="emphasis"><em>.exe</em></span>, <span class="emphasis"><em>.scr</em></span>, <span class="emphasis"><em>.com</em></span>, <span class="emphasis"><em>.doc</em></span>, and so on), because these are the file types that are most often virus carriers. The Standard scan targets more files, ignoring extensions but still limiting the scan to those file types that are usually associated with viruses. Finally, the Thorough scan scans everything and searches for every type of virus.<a id="IDX-CHP-19-1551" class="indexterm"/></p><p>Once you have made your selections, click the <span class="strong"><strong>Start scan</strong></span> button, and avast! will start doing exactly that—showing its progress within the same window. When the scan is complete, a small window will pop up telling you, ideally, that no viruses were found. When was the last time you got a message like that on your Windows machine?</p></div></div>
<div class="sect1" title="Project 19B: Encrypting Your Files"><div class="titlepage"><div><div><h1 class="title"><a id="project_19b_colon_encrypting_your_files"/>Project 19B: Encrypting Your Files</h1></div></div></div><p>Protecting yourself against Internet nasties is all well and good, but what if someone gains physical access to your computer? Data theft is a serious business, so if you have any sensitive files, you should think about protecting them. A good way of doing this is to <span class="emphasis"><em>encrypt</em></span> your sensitive files. Encryption is a way of taking a file and scrambling it in such a way that only a person with the right <span class="emphasis"><em>decryption key</em></span> will be able to recover the original information. If someone tries to look at the file while it's still encrypted, all they will be able to see is a bunch of nonsense characters.<a id="IDX-CHP-19-1552" class="indexterm"/><a id="IDX-CHP-19-1553" class="indexterm"/><a id="IDX-CHP-19-1554" class="indexterm"/><a id="IDX-CHP-19-1555" class="indexterm"/></p><div class="sect2" title="19B-1: Creating an Encrypted File Folder"><div class="titlepage"><div><div><h2 class="title"><a id="b-1_colon_creating_an_encrypted_file_fol"/>19B-1: Creating an Encrypted File Folder</h2></div></div></div><p>Ubuntu has a nice way of encrypting files, but you should take care when using it! The whole point of encrypting your files is that no one but you will be able to access them, so there's little chance of recovering them if you forget your password. Here are the steps you need to follow to get encrypted:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Open the Ubuntu Software Center, and search for and install <span class="emphasis"><em>ecryptfs-utils</em></span>.</p></li><li class="listitem"><p>Once installation has completed, open a Terminal by clicking <span class="strong"><strong>Applications</strong></span> ▸ <span class="strong"><strong>Accessories</strong></span> ▸ <span class="strong"><strong>Terminal</strong></span>, type <strong class="userinput"><code>ecryptfs-setup-private</code></strong>, and press <span class="keycap"><strong>enter</strong></span>.</p></li><li class="listitem"><p>You'll be prompted for the password that you use to log in to Ubuntu. Type it, and press <span class="keycap"><strong>enter</strong></span>. (The letters won't show up on the screen, but that's normal.)</p></li><li class="listitem"><p>You'll be asked to enter your mount passphrase (password). Pick something <span class="emphasis"><em>very</em></span> memorable—there's no recovering this password if you forget it! Press <span class="keycap"><strong>enter</strong></span>, retype the password (to make sure there were no typos), and press <span class="keycap"><strong>enter</strong></span> again.</p></li><li class="listitem"><p>Close the Terminal window, log out of your user account, and log back in again.</p></li><li class="listitem"><p>When you log in, an Update information window will appear (<a class="xref" href="ch19s06.html#checking_your_encryption_passphrase" title="Figure 19-8. Checking your encryption passphrase">Figure 19-8</a>). Click <span class="strong"><strong>Run this action now</strong></span>, type your login password into the window that appears (it will look as if nothing is being typed again), and press <span class="keycap"><strong>enter</strong></span>.</p></li><li class="listitem"><p>Your mount password (also referred to as <span class="emphasis"><em>encryption passphrase</em></span>) will be displayed on the screen. Make a careful note of it, press <span class="keycap"><strong>enter</strong></span>, and then click <span class="strong"><strong>Close</strong></span> in the Update information window to continue logging in.</p><div class="figure"><a id="checking_your_encryption_passphrase"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e24102"/><img src="httpatomoreillycomsourcenostarchimages656703.png.jpg" alt="Checking your encryption passphrase"/></div></div><p class="title">Figure 19-8. Checking your encryption passphrase</p></div></li></ol></div><p>If you open your home folder, you'll now see a folder called <span class="emphasis"><em>Private</em></span>. Anything you put in this folder will be encrypted and will be safe from prying eyes. This is especially useful if your computer gets stolen—only someone with your mount password will be able to look at the files, and ideally the only person who knows it is you!</p></div><div class="sect2" title="19B-2: Recovering Encrypted Files If Something Goes Wrong"><div class="titlepage"><div><div><h2 class="title"><a id="b-2_colon_recovering_encrypted_files_if"/>19B-2: Recovering Encrypted Files If Something Goes Wrong</h2></div></div></div><p>If you have problems with your computer and need to recover the files in the encrypted <span class="emphasis"><em>Private</em></span> directory, use the following steps after you get Ubuntu up and running again. If you don't feel confident following these instructions, you should definitely ask for advice on the Ubuntu forums first.<a id="IDX-CHP-19-1556" class="indexterm"/></p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Open a Terminal, type <strong class="userinput"><code>sudo mount -t ecryptfs /home/</code></strong><strong class="userinput"><code><em class="replaceable"><code>username</code></em></code></strong><strong class="userinput"><code>/.Private /home/</code></strong><strong class="userinput"><code><em class="replaceable"><code>username</code></em></code></strong><strong class="userinput"><code>/Private</code></strong>, and press <span class="keycap"><strong>enter</strong></span>. You should, of course, replace <strong class="userinput"><code><em class="replaceable"><code>username</code></em></code></strong> with your own username.</p></li><li class="listitem"><p>You'll be asked for your passphrase. Type your mount passphrase (password), and press <span class="keycap"><strong>enter</strong></span>.</p></li><li class="listitem"><p>Now you'll be prompted a few times to make a section. Hit <span class="keycap"><strong>enter</strong></span> a few times until you're given a <code class="literal">WARNING</code> message.</p></li><li class="listitem"><p>Type <strong class="userinput"><code>yes</code></strong>, and press <span class="keycap"><strong>enter</strong></span>; then type <strong class="userinput"><code>no</code></strong>, and press <span class="keycap"><strong>enter</strong></span>.</p></li><li class="listitem"><p>If you entered the right mount password, the <span class="emphasis"><em>Private</em></span> folder will be decrypted, and you'll be able to access your files. Copy them from that folder to somewhere safe!</p></li></ol></div><p>If you have no luck recovering your files, take a look at <a class="ulink" href="https://help.ubuntu.com/community/EncryptedPrivateDirectory/">https://help.ubuntu.com/community/EncryptedPrivateDirectory/</a> to see whether there's anything further you can try.</p></div></div>
<div class="sect1" title="Project 19C: Shredding Documents Digitally"><div class="titlepage"><div><div><h1 class="title"><a id="project_19c_colon_shredding_documents_di"/>Project 19C: Shredding Documents Digitally</h1></div></div></div><p>Although most people are satisfied with deleting their files when they no longer need them, they may not realize that the deleted file data is still retrievable. This may pose little concern when it comes to photos of your summer trip to Maryland or reports you may have written for a class on Thai cooking, but it is a completely different situation if you've been storing bank details or other confidential information on your hard disk. Even if you reformat that disk, the data stays. That is great news if you want to retrieve any files you may have accidentally deleted (or formatted away), but it isn't such good news if your computer gets lost or stolen or if you just decide to give it away. In such cases, it might not be a bad idea to do some digital shredding.<a id="IDX-CHP-19-1557" class="indexterm"/><a id="IDX-CHP-19-1558" class="indexterm"/><a id="IDX-CHP-19-1559" class="indexterm"/></p><div class="sect2" title="19C-1: Trying the shred Command"><div class="titlepage"><div><div><h2 class="title"><a id="c-1_colon_trying_the_shred_command"/>19C-1: Trying the shred Command</h2></div></div></div><p>Digital shredding in Linux is done with the <code class="literal">shred</code> command. Its usage is very similar to the <code class="literal">rm</code> command you learned to use in <a class="xref" href="ch09.html" title="Chapter 9. SIMPLE KITTEN WAYS">Chapter 9</a>, though in terms of removal, <code class="literal">shred</code> is much more thorough. To give it a try, create a dummy file by going to the <span class="strong"><strong>File</strong></span> menu of a Nautilus window, and selecting <span class="strong"><strong>Create Document</strong></span> ▸ <span class="strong"><strong>Empty File</strong></span>. Name the new document <strong class="userinput"><code>myShredExp.txt</code></strong>, and then double-click the file. This will open gedit. Type a couple of sentences in the document—anything will do—and then save it. Close gedit. The first couple of words you typed should now appear on the icon of the new dummy file you created (as shown in the example on the left side of <a class="xref" href="ch19s07.html#files_change_their_appearances_after_bei" title="Figure 19-9. Files change their appearances after being shredded.">Figure 19-9</a>).<a id="IDX-CHP-19-1560" class="indexterm"/></p><div class="figure"><a id="files_change_their_appearances_after_bei"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e24255"/><img src="httpatomoreillycomsourcenostarchimages656705.png.jpg" alt="Files change their appearances after being shredded."/></div></div><p class="title">Figure 19-9. Files change their appearances after being shredded.</p></div><p>With your new file in hand and placed in your home folder to make it easier to follow along, you are ready to try <code class="literal">shred</code>. Open a Terminal window, type <strong class="userinput"><code>shred myShredExp.txt</code></strong>, and then press <span class="keycap"><strong>enter</strong></span>. If you now look in your home folder, you will notice the difference right away: Your original file is still there, but the text on the icon now looks like gibberish (as you can see in the example on the right side of <a class="xref" href="ch19s06.html#checking_your_encryption_passphrase" title="Figure 19-8. Checking your encryption passphrase">Figure 19-8</a>), which is what your file has become. If you double-click the file, gedit will open like it did before, but this time around, it won't be able to read your file, and it will tell you so (<a class="xref" href="ch19s07.html#gedit_can_apostrophy_t_open_your_shredde" title="Figure 19-10. gedit can't open your shredded files.">Figure 19-10</a>).</p><div class="figure"><a id="gedit_can_apostrophy_t_open_your_shredde"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e24278"/><img src="httpatomoreillycomsourcenostarchimages656707.png.jpg" alt="gedit can't open your shredded files."/></div></div><p class="title">Figure 19-10. gedit can't open your shredded files.</p></div><p>So, now you've got yourself a shredded file sitting in your folder, but it sure would be handy to get rid of the file rather than just have it sitting there littering things up, wouldn't it? Of course, you can remove the file via the Terminal by using the <code class="literal">rm</code> command, but it would be easier to get future shredded files deleted immediately after being shredded. Fortunately, this is easy enough to do by using the <code class="literal">shred</code> command with the <code class="literal">-u</code> flag. You can try it on the file you've already shredded by opening a Terminal window, typing <strong class="userinput"><code>shred -u myShredExp.txt</code></strong>, and then pressing <span class="keycap"><strong>enter</strong></span>. Your file will then be further shredded and deleted.</p></div><div class="sect2" title="19C-2: Taking the shred Command Graphical in Nautilus"><div class="titlepage"><div><div><h2 class="title"><a id="c-2_colon_taking_the_shred_command_graph"/>19C-2: Taking the shred Command Graphical in Nautilus</h2></div></div></div><p>Although using the <code class="literal">shred</code> command isn't all that difficult, most average users would prefer to do things graphically. After all, you don't <span class="emphasis"><em>have</em></span> to type commands to delete or move a file, right? You can do all of that easily enough through Nautilus, and it's the same with <code class="literal">shred</code>. The only difference is that <code class="literal">shred</code>'s functionality does not come bundled into Nautilus out of the box—you have to add it yourself. Here are the steps you need to follow:<a id="IDX-CHP-19-1561" class="indexterm"/><a id="IDX-CHP-19-1562" class="indexterm"/><a id="IDX-CHP-19-1563" class="indexterm"/><a id="IDX-CHP-19-1564" class="indexterm"/><a id="IDX-CHP-19-1565" class="indexterm"/><a id="IDX-CHP-19-1566" class="indexterm"/><a id="IDX-CHP-19-1567" class="indexterm"/><a id="IDX-CHP-19-1568" class="indexterm"/></p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>From the Ubuntu Software Center, search for <span class="emphasis"><em>nautilus-actions</em></span>, and install Nautilus Actions Configuration. This package allows you to add commands and other functionality to Nautilus.</p></li><li class="listitem"><p>Once the installation is complete, select <span class="strong"><strong>System</strong></span> ▸ <span class="strong"><strong>Preferences</strong></span> ▸ <span class="strong"><strong>Nautilus Actions Configuration</strong></span>.</p></li><li class="listitem"><p>When the Nautilus Actions windows appears, click the <span class="strong"><strong>Add</strong></span> button.</p></li><li class="listitem"><p>In the Add a New Action window that appears, type <strong class="userinput"><code>Shred</code></strong> in the Label box and <strong class="userinput"><code>Erase files more securely</code></strong> in the Tooltip box.</p></li><li class="listitem"><p>If you want to choose an icon for your Shred menu entry in Nautilus, click the arrow button to the left of the Browse button, and then select an icon of your choosing (I just used the delete icon). When you're finished, your window should look like that in <a class="xref" href="ch19s07.html#making_the_shred_command_graphical_via_n" title="Figure 19-11. Making the shred command graphical via Nautilus">Figure 19-11</a>.</p><div class="figure"><a id="making_the_shred_command_graphical_via_n"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e24413"/><img src="httpatomoreillycomsourcenostarchimages656709.png.jpg" alt="Making the shred command graphical via Nautilus"/></div></div><p class="title">Figure 19-11. Making the <code class="literal">shred</code> command graphical via Nautilus</p></div></li><li class="listitem"><p>Next, click the <span class="strong"><strong>Command</strong></span> tab, and type <strong class="userinput"><code>shred</code></strong> in the Path box, and <strong class="userinput"><code>-f -u -v -z %M</code></strong> in the Parameters box (making sure you use an uppercase <span class="emphasis"><em>M</em></span>).</p></li><li class="listitem"><p>Now click the <span class="strong"><strong>Conditions</strong></span> tab. In the Appears if selection contains section of that tab, choose whether you want the new Shred menu to appear only when you have selected a file, only when you've selected a folder, or both. To play it safe at first, you might want to stick with the default, Only files, so you don't inadvertently shred a whole folder full of important files. Once done, check the <span class="strong"><strong>Appears if selection has multiple files or folders</strong></span> box, and then save your work by going to the <span class="strong"><strong>File</strong></span> menu and selecting <span class="strong"><strong>Save</strong></span>.</p></li><li class="listitem"><p>The label for the <code class="literal">shred</code> command in the left pane of the still-open Nautilus Actions window will now no longer be in italics. Click the <span class="strong"><strong>Close</strong></span> button in that window.</p></li></ol></div><p>To put <code class="literal">shred</code> to work in its new graphical manifestation, you must first log out and log back in to your account. After, that just right-click a file you want to shred, and then select <span class="strong"><strong>Shred</strong></span> from the pop-up menu (<a class="xref" href="ch19s07.html#invoking_the_shred_command_via_nautilus" title="Figure 19-12. Invoking the shred command via Nautilus">Figure 19-12</a>). The file will be securely, and permanently, deleted. Decidedly cool.</p><div class="figure"><a id="invoking_the_shred_command_via_nautilus"/><div class="figure-contents"><div class="mediaobject"><a id="I_mediaobject19_d1e24473"/><img src="httpatomoreillycomsourcenostarchimages656711.png.jpg" alt="Invoking the shred command via Nautilus"/></div></div><p class="title">Figure 19-12. Invoking the <code class="literal">shred</code> command via Nautilus</p></div></div></div></body></html>