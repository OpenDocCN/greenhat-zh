- en: Chapter 1\. FREEBSD 7.0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://WWW.FREEBSD.ORG](HTTP://WWW.FREEBSD.ORG)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 1.1\. SUMMARY
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: FreeBSD is a free, UNIX-like operating system based on BSD (the Berkeley Software
    Distribution), which was originally developed at the University of California,
    Berkeley. FreeBSD is open source software; the source code (software blueprint)
    is freely available to the public to be modified or improved upon.
  prefs: []
  type: TYPE_NORMAL
- en: FreeBSD is developed as an entire operating system that includes the kernel
    (the core of the operating system), a shell (the user interface), and device drivers
    (software that controls hardware). The Linux kernel, on the other hand, is developed
    separately from the Linux userland. In other words, the shell, system utilities,
    and applications are developed separately and are packaged with the kernel as
    various distributions (Ubuntu, Red Hat, SUSE, and so on).
  prefs: []
  type: TYPE_NORMAL
- en: 1.1.1\. License
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Linux is licensed under version 2 of the GPL (the GNU General Public License);
    FreeBSD is released under the new BSD license. Visit [http://www.opensource.org](http://www.opensource.org)
    for details about the GPL and BSD licenses.
  prefs: []
  type: TYPE_NORMAL
- en: 1.1.2\. The Ports Collection
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The standard FreeBSD distribution includes a proven array of powerful utilities
    together with a massive library of dynamically developed third-party software
    known as the ports collection.
  prefs: []
  type: TYPE_NORMAL
- en: The ports collection is one of the most convenient features of FreeBSD. It is
    laid out as a hierarchy of categorical directories containing makefiles (scripts
    that build software from source code). Each makefile contains scripts that patch,
    compile, and install applications automatically, making it relatively easy to
    install and track software.
  prefs: []
  type: TYPE_NORMAL
- en: 1.1.3\. FreeBSD's Roots, Briefly
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: FreeBSD had its beginnings when Bell Labs employees Ken Thompson and Dennis
    Ritchie presented a paper on UNIX at the ACM (Association for Computing Machinery)
    Symposium on Operating Systems Principles in 1973\. A UC Berkeley professor, Robert
    Fabry, heard their presentation and convinced staff at UC Berkeley to purchase
    a PDP-11 (a 16-bit computer built by Digital Equipment Corporation, costing nearly
    $11,000 at the time) to run Thompson's AT&T UNIX. The system's popularity grew
    and Berkeley faculty and students set up a system to share time on the PDP-11.
  prefs: []
  type: TYPE_NORMAL
- en: With UNIX running on the PDP-11, two Berkeley graduate students, Bill Joy and
    Chuck Haley, began to write programs for UNIX. UNIX development at Berkeley eventually
    caught the eye of the US government, and the Department of Defense awarded UC
    Berkeley a contract to create a customized version of UNIX for use by its contractors
    working with DARPA (the Defense Advanced Research Projects Agency). Code developed
    at Berkeley was integrated into the existing AT&T UNIX system to meet the needs
    of the DARPA project, and Joy was chosen to lead the project, which he did until
    mid-1982 when he left to co-found Sun Microsystems. (Bill Joy was also the creator
    of the vi text editor and developed the TCP/IP stack for UNIX.)
  prefs: []
  type: TYPE_NORMAL
- en: Corporate interest in using Berkeley's BSD Unix grew. However, at the time,
    BSD Unix contained source code from AT&T UNIX, requiring that a license fee be
    paid to AT&T for its use. This fee was cost-prohibitive for many small companies
    and liberation from AT&T's license became a priority. Developers were called upon
    en masse to rewrite and replace the AT&T kernel and utilities.
  prefs: []
  type: TYPE_NORMAL
- en: After considerable coding effort, BSD Unix was free of AT&T code in 1991, but
    it still lacked six kernel files needed to make it fully functional. These files,
    originally coded by AT&T, were not easily rewritable. In late 1991, Bill and Lynne
    Jolitz (two UC Berkeley alumni) coded the six missing files and released 386/BSD.
    The FreeBSD Project, responsible for development of the FreeBSD operating system,
    was formed a few months later and based its initial code on the Jolitzes' 386/BSD.
  prefs: []
  type: TYPE_NORMAL
- en: In January of 1992, Berkeley Software Design Inc. (BSDI) began to sell a commercial
    version of Unix that was also based on 386/BSD. In late 1992 UNIX System Labs
    (a subsidiary of AT&T responsible for UNIX development) filed a lawsuit against
    both BSDI and UC Berkeley citing copyright infringement and unauthorized release
    of trade secrets. A settlement was reached in January of 1994 that required small
    modifications to be made to the Berkeley code. The resultant code, released as
    4.4BSD-Lite, is the foundation of the current FreeBSD.
  prefs: []
  type: TYPE_NORMAL
- en: 1.2\. RESOURCES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Official FreeBSD Handbook
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.freebsd.org/doc/en/books/handbook](http://www.freebsd.org/doc/en/books/handbook)'
  prefs: []
  type: TYPE_NORMAL
- en: Why FreeBSD by Frank Pohlmann
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.ibm.com/developerworks/opensource/library/os-freebsd](http://www.ibm.com/developerworks/opensource/library/os-freebsd)'
  prefs: []
  type: TYPE_NORMAL
- en: A Brief History of FreeBSD by Jordan Hubbard
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/history.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/history.html)'
  prefs: []
  type: TYPE_NORMAL
- en: 1.3\. REQUIRED
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The following are minimum hardware and software requirements needed for a CD
    install of the FreeBSD operating system. For an official list of supported hardware,
    visit [http://www.freebsd.org/releases/7.0R/hardware.html](http://www.freebsd.org/releases/7.0R/hardware.html).
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) x86 based
    computer with a i80486 processor or higher, or an AMD Am486 processor or higher;
    32MB of RAM; at least 2GB hard drive space; a system BIOS that supports booting
    from CD'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) CD drive'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    install CD1 (ISO image available at [http://www.freebsd.org/where.html](http://www.freebsd.org/where.html))'
  prefs: []
  type: TYPE_IMG
- en: 1.4\. OPTIONAL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The following are not required for a basic installation of FreeBSD, but may
    be needed to run a functional network server:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Network adapter
    and Internet connection, if you wish to use the ports collection'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Registered
    domain name, if you wish to host a server on the Internet'
  prefs: []
  type: TYPE_NORMAL
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) A second
    physical hard drive of comparable size to store backups or to mirror the primary
    hard drive'
  prefs: []
  type: TYPE_NORMAL
- en: 1.5\. PREPARATION
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Back up all data you wish to retain on the system in which you intend to install
    FreeBSD. This guide assumes that FreeBSD will be the sole operating system in
    use on the computer. Make sure that booting from CD is enabled in your system's
    BIOS settings.
  prefs: []
  type: TYPE_NORMAL
- en: 1.6\. INSTALL
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Below are the steps needed to begin the FreeBSD installation process.
  prefs: []
  type: TYPE_NORMAL
- en: Insert the FreeBSD CD into the system and reboot. A Welcome to FreeBSD menu
    should appear. You can either press [enter] or let the timer run down to zero.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After booting, the country selection menu should appear. Choose your country
    using the arrow keys and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The sysinstall Main Menu should appear. Choose the Standard Install option with
    the arrow keys and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A message should appear with details about different partitioning schemes. Press
    [enter]. You may see another dialog appear with a warning about incorrect geometry;
    if so, sysinstall should automatically adjust this. Press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For simplicity's sake, we will devote the entire disk to FreeBSD. To do so,
    press A, then press Q to finish.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select Standard in the Boot Manager dialog to make the drive we just partitioned
    bootable.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next dialog will explain that we need to create BSD partitions inside the
    new partition. Press [enter], then press A to have the editor automatically create
    the standard partitions. Press Q to exit and continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A dialog will appear asking you to select a distribution type. Scroll down to
    User and press [spacebar] to select it. Another dialog will appear asking if you
    would like to install the FreeBSD ports collection. Select yes and press [enter]
    to proceed. After returning to the Choose Distributions menu, press [tab] to highlight
    OK and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next screen will ask you to choose installation media. Since we are using
    the CD, choose CD/DVD and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you are asked to confirm that you are ready to install. Choose yes
    if you are and press [enter]. sysinstall should copy all necessary files to your
    hard drive.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 1.7\. CONFIGURE
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once sysinstall finishes copying the necessary files to the hard drive, it is
    time to configure FreeBSD's options.
  prefs: []
  type: TYPE_NORMAL
- en: The Congratulations dialog should appear. Press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you may configure your Ethernet adapter. If you have one installed, select
    yes and press [enter]. Otherwise select no and proceed to step 5.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next dialog lists the available interfaces. Your installed Ethernet adapter
    is most likely at the top of the list. If so, simply press [enter]; if not, select
    it and press [enter]. sysinstall will ask you if you want to try IPv6 configuration.
    Select no and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You are asked if you want to try DHCP (Dynamic Host Configuration Protocol).
    Choose yes and press [enter]. (To do this manually, select no and enter your settings.)
    A screen appears with the cursor at the position labeled host. Enter the fully
    qualified domain name (FQDN) here (for example, [server.example.com](http://server.example.com)).
    Replace `*server*` with a name of your choice and [example.com](http://example.com)
    with your registered domain name. If this computer will be a server on a domain,
    enter the domain name in the domain field. If you have not registered a domain
    name yet or want to set this up later, just leave the domain name field blank
    and continue (See "[Configuring a Static IP](configuring_a_static_ip.html#configuring_a_static_ip)"
    to configure later). Finally, press [tab] until OK is highlighted, then press
    [enter] to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked if you want the machine to be a network gateway, choose no and press
    [enter]. A dialog asking if you would like to configure inetd should appear. Choose
    no and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: sysinstall will ask if you want to enable SSH (secure shell) login. Choose yes
    and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked if you would like to allow anonymous FTP access, choose no and press
    [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked if you would like to configure the machine as an NFS server, choose
    no and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked if you want to configure the machine as a NFS client, choose no and
    press [enter]. sysinstall will ask to customize system console settings. Choose
    no and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked to set the time zone, choose yes and press [enter]. A dialog appears
    asking if the CMOS clock is set to UTC. Most likely it is not, so choose no and
    press [enter]. Choose the region/country/time zone that your computer is set to
    and press [enter]. sysinstall will ask you to confirm your selections; choose
    yes if everything looks okay and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked if you would like to enable Linux binary compatibility, choose no
    and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You are asked if you have a mouse. Since this install is from the command line,
    choose no and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When asked if you would like to browse the applications, choose no and press
    [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next dialog asks if you want to add a user account. Choose yes and press
    [enter]. Select user from the menu and press [enter]. The cursor should now be
    at the login ID field in the following screen. Enter a username of your choice
    (this will be the account you will use to manage the system), then press [tab]
    until the cursor is at the password field and enter a password for this account
    (a strong one, preferably a combination of numbers and letters, avoiding guessable
    words), then press [tab] until the cursor is at the full name field and type in
    your full name. Now tab again to the field labeled member groups and enter the
    word `**wheel**` to allow the user to become root/administrator with the `su`
    command (See "[su](general.html#su)" for details). Tab to OK and press [enter].
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You are returned to the User/Group Management menu. Select exit and press [enter].
    A notification will come up telling you to set the system manager's (i.e., root)
    password. Press [enter] and enter a password of your choice. (Use a strong one,
    preferably a combination of numbers and letters, avoiding guessable words.) Retype
    your password for verification.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, sysinstall asks if you would like to set any last options. Choose no
    and press [enter]. You should now be at the main menu. Press [tab] until exit
    install is highlighted and press [enter]. When asked if you are sure, choose yes
    before removing the FreeBSD CD from the CD drive. The system should now reboot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 1.7.1\. Logging In
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Once the system reboots, a login prompt will appear. You may log in as root
    to perform administrative tasks. When logging in remotely through SSH, you will
    need to log in as a normal user and then switch user identity to that of the root
    user using the `su` command (See "[su](general.html#su)" for details).
  prefs: []
  type: TYPE_NORMAL
- en: 1.7.2\. Default Search Path
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: When you type a command at the command prompt, FreeBSD looks in a list of directories
    for the name of the command you entered and runs the program if a match is found.
    This list of directories is called the default search path or path environment
    variable.
  prefs: []
  type: TYPE_NORMAL
- en: 'The order in which FreeBSD searches this path is important when installing
    third-party software, which this book concentrates on. Most third-party program
    files are put into subdirectories of /usr/local. The default position of the /usr/local
    directory is near the end of the path statement. If a command that is part of
    a third-party application has the same name as a command that is part of the base
    FreeBSD command set, it will never run because the FreeBSD command will be found
    first and always take precedence. Since we''ll be installing third-party applications
    to extend and/or update FreeBSD''s base system, it is beneficial to invert the
    order of the search path. Let''s change the order of the default search path for
    the root user using Easy Editor:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'We''ll comment out (disable) the default set path statement and enter our own
    customized one. Scroll down to the `set path` declaration (~17) and precede it
    with a hash mark (`#`) to disable it, then add the alternative path below so that
    your third-party programs will run even if they have the same names as native
    FreeBSD commands. The `set path` statement should now appear as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** The text is wrapped above but each `*set path*` statement should
    only occupy a single line in the .cshrc file.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'Save, exit, log out, and log in. You can display the current search path with
    this command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: By default, non-root users use the sh shell (interface), and root defaults to
    the tcsh shell. The default search path can be modified for non-root users in
    the same way. The sh shell stores this setting in the .profile file of each user's
    home directory.
  prefs: []
  type: TYPE_NORMAL
- en: 1.7.3\. Limiting SSH Access
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: By default, all users (except the root account) have remote SSH access. To limit
    SSH access to specific users add `AllowUsers` `*username*` to the /etc/ssh/sshd_config
    file, separating multiple users with spaces. Only users who appear on this line
    will have remote SSH access.
  prefs: []
  type: TYPE_NORMAL
- en: 'To do so, open sshd_config with Easy Editor:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Add the following line (substitute your names for the usernames in italics):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Save and exit (press [esc] for Easy Editor''s main menu). For the above setting
    to take effect you''ll need to reboot (see below) or restart the ssh daemon using
    the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 1.7.4\. Shutting Down
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'When shutting down the system, use the `shutdown` command to safely flush the
    filesystem cache to disk and allow processes to properly terminate. If your system''s
    BIOS supports ACPI (Advanced Configuration and Power Interface), power will also
    be removed. Log in as root, then enter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 1.7.5\. Rebooting
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: To reboot the system you may use the `reboot` command as shown below (you will
    need to be logged in as root).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 1.8\. CONFIGURING A STATIC IP
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'It is important for a server to have a static IP or permanent address for much
    the same reason a person needs a phone number: It allows callers or clients to
    reach the recipient. FreeBSD uses a file named rc.conf to establish the system''s
    IP address, among other settings, during system startup. In this section we''ll
    customize the rc.conf file to reflect your server''s intended configuration.'
  prefs: []
  type: TYPE_NORMAL
- en: The rc.conf file contains configuration settings for the computer's hostname,
    network interface cards, and which services to start at boot time. It is important
    that the settings in this file are correct; a typo here could hamper the system's
    functionality.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** The following discussion assumes that you''re building your FreeBSD
    system to function as an Internet server. If this is not the case, then the options
    we selected during installation should be sufficient and you can skip this section.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'We will cover two scenarios for configuring a static IP address:'
  prefs: []
  type: TYPE_NORMAL
- en: Server behind a NAT (Network Address Translation) router
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Server directly connected to the Internet
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1.8.1\. A. FreeBSD Server Behind a NAT Router
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: A small office or home network commonly has one Internet connection that needs
    to be shared by multiple computers. A NAT router allows the sharing of a single
    Internet connection within the local (private) network. The router functions as
    a firewall, creating a protected zone in the private network by allowing all traffic
    out, but only allowing known or solicited traffic in.
  prefs: []
  type: TYPE_NORMAL
- en: Port Forwarding
  prefs: []
  type: TYPE_NORMAL
- en: Most NAT routers provide a port-forward function that forwards traffic received
    at the router to a computer with a static IP address inside the private network.
    If, for example, you were hosting a web server, you would need to forward TCP
    port 80 (the IANA standard for HTTP) to the IP address of your FreeBSD server.
    (See your router's documentation for details on port forwarding.)
  prefs: []
  type: TYPE_NORMAL
- en: Most NAT routers that support port forwarding have built-in DHCP servers that
    assign computers in the private network a dynamic IP address, one that may change
    each time the computer logs on to the network.
  prefs: []
  type: TYPE_NORMAL
- en: DHCP works when machines simply need to connect to a network and get the first
    available IP address, but it's no help to you if you want to use your FreeBSD
    system as a server. You'll need a static (permanent) IP address so that information
    destined for your server will arrive.
  prefs: []
  type: TYPE_NORMAL
- en: Modifying rc.conf to Specify a Static IP Address
  prefs: []
  type: TYPE_NORMAL
- en: To specify your server's static IP address you'll modify rc.conf. But first
    you need to tell the DHCP server to assign IP addresses in a range that doesn't
    conflict with the server's IP address.
  prefs: []
  type: TYPE_NORMAL
- en: Your router's DHCP options should allow you to set the starting IP address (consult
    your router's documentation for details). For this example, we'll use 192.168.1.12
    as the starting address for the range of addresses that can be assigned to machines,
    knowing that numbers are assigned from this address up (.13, .14, .15, and so
    on). We'll assign 192.168.1.11 as your server's static IP address since it is
    outside the range of the DHCP server.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let''s set this in rc.conf. Open rc.conf:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: You should see something like the following in your rc.conf file (~7). Your
    FQDN should be here if specified during setup; the `*xl0*` may be different.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** If you don''t already have the hostname set, be sure to set it
    correctly. The hostname should be your system''s fully qualified domain name;
    `host` is the name of the machine and [example.com](http://example.com) is your
    registered domain name.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'Insert your router''s IP address in the `defaultrouter` statement as shown
    below (~7). Using our example scenario above, the `hostname`, `ifconfig`, and
    `defaultrouter` statements should now look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: Notice that we have replaced "DHCP" with our static IP address and added the
    netmask address (255.255.255.0 is the default netmask address in most configurations).
  prefs: []
  type: TYPE_NORMAL
- en: We've also added a `defaultrouter` line which points to the NAT router's IP
    address. This address, 192.168.1.1, will be the IP address you enter into your
    web browser to access the router web configuration; this is also called the default
    gateway.
  prefs: []
  type: TYPE_NORMAL
- en: Now save and exit. (Skip to "[Dynamic DNS](#dynamic_dns)".)
  prefs: []
  type: TYPE_NORMAL
- en: 1.8.2\. B. FreeBSD Server Connected Directly to the Internet
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: If your FreeBSD system is connected directly to a cable or DSL modem and you
    have correctly entered your FQDN during configuration step 4 above, no further
    configuration is necessary. However, if you did not enter a hostname during the
    DHCP configuration, then you will need to edit /etc/rc.conf to include your FQDN.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open rc.conf with Easy Editor:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'rc.conf (~7) should look like this (replace [host.example.com](http://host.example.com)
    with your FQDN):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 1.8.3\. Dynamic DNS
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Dynamic DNS is a service provided by third-party companies that keeps track
    of a computer's public IP address. These providers automatically update your domain
    name's associated IP address if it changes for any reason. Most Internet service
    providers use DHCP servers to assign public IP addresses to their customers dynamically.
    Unless you pay for a static IP address, this dynamically assigned address may
    change from time to time.
  prefs: []
  type: TYPE_NORMAL
- en: When you register your domain name, you can specify the target IP address of
    your server if you wish to host your own services. Many people mistakenly assume
    that their current, dynamic IP address will be theirs indefinitely. When your
    dynamic IP address changes (which may happen frequently or once every few months),
    you appear to "drop off " the Internet since your domain registrar's records point
    to the previous IP address, which is no longer valid. You would then have to go
    back to your domain registrar and notify them of your new IP address to regain
    your Internet presence (this is usually accomplished through a web-based control
    panel).
  prefs: []
  type: TYPE_NORMAL
- en: This is where dynamic DNS service providers become useful. These third-party
    companies allow you to keep your IP address updated by using a client program
    on your server to detect when the IP changes. When it does, the client program
    automatically contacts the dynamic DNS service to update your DNS record so you
    stay "live." When using these services you need to point your domain registrar
    to your dynamic DNS service's servers, which then point to your updated IP address.
    Most dynamic DNS providers charge a fee for their services, though there are a
    few free ones, like ZoneEdit ([http://zoneedit.com](http://zoneedit.com)). By
    combining a dynamic DNS service provider with a dynamic DNS updating client like
    ddclient, you can provide a static IP-like Internet presence. See "[ddclient 3.7.3](ddclient_3.7.3.html#ddclient_3.7.3)"
    for information on ddclient.
  prefs: []
  type: TYPE_NORMAL
- en: 1.9\. HOSTS AND RESOLV.CONF
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The hosts and resolv.conf files are used to control how FreeBSD performs DNS
    lookups. A DNS lookup is like calling a telephone operator: You give the operator
    a person''s name and she gives you a phone number in return. For example, if a
    web page like [http://www.google.com](http://www.google.com) is requested, FreeBSD
    (by default) first consults the hosts file (/etc/hosts), then the DNS servers
    specified in resolv.conf in order to translate [www.google.com](http://www.google.com)
    into an IP address like 66.102.7.99.'
  prefs: []
  type: TYPE_NORMAL
- en: Let's take a closer look at each of these files and see how to set them up.
  prefs: []
  type: TYPE_NORMAL
- en: 1.9.1\. hosts
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The hosts file resolves (translates) hostnames to IP addresses. At minimum,
    the hosts file should be modified to reflect your system's domain name and hostname.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the hosts file in a text editor:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'Your hosts file (~14) should look like this (replace [example.com](http://example.com)
    with your domain name, [host.example.com](http://host.example.com) with your hostname,
    and `*192.168.1.11*` with your IP address):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: Save and exit.
  prefs: []
  type: TYPE_NORMAL
- en: Settings in this file only affect the local system. The hosts file supplies
    basic hostname resolution for daemons and other system processes. If you need
    to provide DNS services, you'll need to use a DNS server. (See "ISC BIND DNS Server
    9.4.2" for more information.)
  prefs: []
  type: TYPE_NORMAL
- en: 1.9.2\. resolv.conf
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The resolv.conf file contains the IP addresses of the DNS servers that your
    system will query when trying to resolve any hostname whose IP address is not
    found in the hosts file. The addresses in this file are automatically set if you
    chose DHCP to configure your network adapter during the initial FreeBSD installation.
    To set this file manually, open it:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'The resolv.conf file should look something like this, where [example.com](http://example.com)
    is your domain name, `*206.12.29.11*` is the IP address of the DNS server, and
    `*192.168.1.11*` is the IP address of the backup DNS server (both IP addresses
    are provided by your ISP):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 1.10\. CONFIG FILES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Following are a few common FreeBSD configuration files important to basic FreeBSD
    administration:'
  prefs: []
  type: TYPE_NORMAL
- en: /etc/rc.conf
  prefs: []
  type: TYPE_NORMAL
- en: Contains most of the common configuration and startup options for daemons, which
    are programs that run in the background to provide a service, such as a web server
    (Apache) or mail server (Postfix).
  prefs: []
  type: TYPE_NORMAL
- en: /etc/resolv.conf
  prefs: []
  type: TYPE_NORMAL
- en: The resolver configuration file. This contains the DNS servers to query when
    resolving a hostname to an IP address.
  prefs: []
  type: TYPE_NORMAL
- en: /etc/hosts
  prefs: []
  type: TYPE_NORMAL
- en: The system's hostname to IP address table. This file contains manually entered
    hostnames and their associated IP addresses. FreeBSD will look at this file prior
    to querying a DNS server listed in the resolv.conf file.
  prefs: []
  type: TYPE_NORMAL
- en: The following two directories contain startup scripts that execute automatically
    at boot time. These scripts are designed to consult the rc.conf file for instructions
    on whether or not to start services. For example, the /etc/rc.d/sshd script will
    look for `SSHD_ENABLE="YES"` in rc.conf. If an enable line exists, `rc` starts
    the specified service; otherwise it does not.
  prefs: []
  type: TYPE_NORMAL
- en: /etc/rc.d
  prefs: []
  type: TYPE_NORMAL
- en: This directory contains system startup scripts that execute at boot time.
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/rc.d
  prefs: []
  type: TYPE_NORMAL
- en: This directory contains third-party startup scripts that execute at boot time.
  prefs: []
  type: TYPE_NORMAL
- en: 1.11\. NOTES
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If you aren't familiar with Unix commands, make sure you consult [Appendix A](commands.html#commands)
    before attempting to go any further in this guide. You'll save yourself a lot
    of time and frustration. [Appendix B](backup_and_restore.html#backup_and_restore)
    contains details on backup and restore, which are very important to any server
    setup. [Appendix D](the_protocols.html#the_protocols) contains details on protocols
    and terms mentioned throughout this book.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It is important to monitor FreeBSD security advisories for up-to-date information
    on known security issues. Security advisories are documents that detail security
    issues with the FreeBSD operating system. To have FreeBSD security advisories
    emailed to you, visit [http://lists.freebsd.org/mailman/listinfo/freebsd-security-notifications](http://lists.freebsd.org/mailman/listinfo/freebsd-security-notifications).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Additionally, check FreeBSD''s security page: [http://www.freebsd.org/security](http://www.freebsd.org/security).'
  prefs: []
  type: TYPE_NORMAL
- en: If a security issue requires a software update, you can update your system with
    the `freebsd-update` command instead of compiling the source manually.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** This is meant for binary installations of FreeBSD as mentioned
    in this book. Visit [http://www.daemonology.net/freebsd-update](http://www.daemonology.net/freebsd-update)
    for additional information on `*freebsd-update*`. It is prudent to back up your
    system before any update.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'After rebooting, display the release level using the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: The release level should match or supersede the release level mentioned in the
    security advisory.
  prefs: []
  type: TYPE_NORMAL
- en: See "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)"
    for more information on the ports collection.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
