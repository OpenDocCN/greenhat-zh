<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Interactive Ruby and the Ruby Environment"><div class="titlepage"><div><div><h1 class="title"><a id="interactive_ruby_and_the_ruby_environmen"/>Chapter 1. Interactive Ruby and the Ruby Environment</h1></div></div></div><div class="informalfigure"><div class="mediaobject"><a id="I_mediaobject1_d1e345"/><img alt="image with no caption" src="httpatomoreillycomsourcenostarchimages686190.png.jpg"/></div></div><p>In Ruby, as in most programming languages, we’ll generally store programs in external files and execute them at once, as a unit. However, Ruby also gives you the option of typing the lines of a program one at a time and seeing the results as you go along, using <a class="indexterm" id="idx-CHP-1-0001"/>Interactive Ruby (irb); irb is a shell, similar to bash in a Unix or Unix-like system or the command prompt in Windows. Using irb will give you a good idea of how Ruby processes information, and it should also help you gain an understanding of Ruby’s basics before you ever even write a program.</p><div class="sidebar"><a id="I_sidebar1_d1e356"/><p class="title"/><p>Who should read this chapter? If you’ve already used Ruby and also already know the meaning of the terms <span class="emphasis"><em>expression, irb, flow control, variable, function, method</em></span>, and <span class="emphasis"><em>constant</em></span>, you can probably just skim this chapter. (If you encounter anything unfamiliar later, you can always come back.) If you’ve never programmed before, you should read this chapter carefully. If you’ve already used a language with an interactive environment, like Lisp or Python, you can probably just look at the irb sessions to see how Ruby differs from the language you already know—it’s likely that it does in some key ways.</p></div><p>The irb program is an example of a <span class="emphasis"><em>read-eval-print-loop</em></span> (<a class="indexterm" id="idx-CHP-1-0002"/>REPL) environment. This is an idea that comes from <a class="indexterm" id="idx-CHP-1-0003"/>Ruby’s ancestor Lisp. It means just what the name says: It <span class="emphasis"><em>reads</em></span> a line, <span class="emphasis"><em>evaluates</em></span> that line, <span class="emphasis"><em>prints</em></span> the results of the evaluation, and <span class="emphasis"><em>loops</em></span>, waiting to read another line. The shell gives you immediate <a class="indexterm" id="idx-CHP-1-0004"/>feedback for every line you enter, which is an ideal way to learn the syntax of a language.<a class="indexterm" id="idx-CHP-1-0005"/></p><div class="sect1" title="Starting irb"><div class="titlepage"><div><div><h1 class="title"><a id="starting_irb"/>Starting irb</h1></div></div></div><p>Starting irb is very straightforward. On a <a class="indexterm" id="idx-CHP-1-0006"/>Unix or Unix-like machine (such as GNU/<a class="indexterm" id="idx-CHP-1-0007"/>Linux or Mac OS X), you can just type <strong class="userinput"><code>irb</code></strong> at the shell prompt. This should give you the following result:<a class="indexterm" id="idx-CHP-1-0008"/></p><a id="I_programlisting1_d1e419"/><pre class="programlisting">$ irb
irb(main):001:0&gt;</pre><p>On a <a class="indexterm" id="idx-CHP-1-0009"/>Windows machine, you’ll choose <span class="strong"><strong>Start ▸ Run</strong></span>, type <strong class="userinput"><code>irb</code></strong>, then click <span class="strong"><strong>OK</strong></span>. You can also run the command <strong class="userinput"><code>irb</code></strong> directly from the command line.</p></div></div>
<div class="sect1" title="Using irb"><div class="titlepage"><div><div><h1 class="title"><a id="using_irb"/>Using irb</h1></div></div></div><p>Now that you’ve started it, irb is waiting for you to type your first line. <span class="emphasis"><em>Lines</em></span> consist of one or more <a class="indexterm" id="idx-CHP-1-0010"/>expressions.<a class="indexterm" id="idx-CHP-1-0011"/></p><div class="sect2" title="Expressions"><div class="titlepage"><div><div><h2 class="title"><a id="expressions"/>Expressions</h2></div></div></div><p>As far as Ruby is concerned, an <span class="emphasis"><em>expression</em></span> is just a bit of code that has a value. In fine computer programming tradition, let’s see how irb reacts to the expression <code class="literal">“Hello, world!”</code></p><a id="I_programlisting1_d1e464"/><pre class="programlisting">irb(main):001:0&gt; "Hello, world!"
=&gt; "Hello, world!"</pre><div class="note" title="Note"><h3 class="title"><a id="note-3"/>Note</h3><p><span class="emphasis"><em>This listing shows the line you need to type as well as how irb responds. Note also that irb shows you line numbers at the beginning of each line. I will occasionally refer to these numbers, as well</em></span>.<a class="indexterm" id="idx-CHP-1-0012"/></p></div><p>What has happened here? You typed <code class="literal">“Hello, world!”</code>, and irb happily spat it right back at you. The interesting part of this is what isn’t explicit. The expression you entered has a value in Ruby, and therefore in irb. <code class="literal">“Hello, world!”</code> is a <span class="emphasis"><em>String</em></span>, which is a sequence of characters, usually enclosed with either single or double quotation marks. Let’s prove it.</p></div><div class="sect2" title="Everything Is an Object"><div class="titlepage"><div><div><h2 class="title"><a id="everything_is_an_object"/>Everything Is an Object</h2></div></div></div><p>In Ruby, like its ancestor <a class="indexterm" id="idx-CHP-1-0013"/>Smalltalk, everything is an <span class="emphasis"><em>object</em></span>, which is just an instance of a class. <code class="literal">“Hello, world!”</code> happens to an instance of the class String.<a class="indexterm" id="I_indexterm1_d1e500"/></p><p>Let’s verify that in irb:</p><a id="I_programlisting1_d1e505"/><pre class="programlisting">irb(main):002:0&gt; "Hello, world!".class
=&gt; String</pre><p><a class="indexterm" id="idx-CHP-1-0014"/>Objects have <span class="emphasis"><em>methods</em></span> (called on an object as <code class="literal">some_object.some_method</code>), which are just actions an object can perform. The method called <code class="literal">class</code> simply reports which class something belongs to; in other words, the type of thing that it is. Since <code class="literal">“Hello, world!”</code> is a String, that’s exactly what the <code class="literal">class</code> method reports when called on <code class="literal">“Hello, world!”</code>. There are other types <a class="indexterm" id="idx-CHP-1-0015"/>of objects besides Strings, of course.<a class="indexterm" id="idx-CHP-1-0016"/><a class="indexterm" id="idx-CHP-1-0017"/></p><div class="note" title="Note"><h3 class="title"><a id="note-4"/>Note</h3><p><span class="emphasis"><em>This book assumes that you are familiar with object orientation. If you’re not, here’s a crash description. An object is a thing. It could be any type of thing. Every object is an instance of a class; for example, the objects</em></span> Glasgow, Cairo, <span class="emphasis"><em>and</em></span> Buffalo <span class="emphasis"><em>would all be instances of the class <em class="replaceable"><code>City</code></em>. The objects are distinct from each other, but they are the same type of thing</em></span>. Monty Python <span class="emphasis"><em>and</em></span> The Kids in the Hall <span class="emphasis"><em>would both be instances of the class <em class="replaceable"><code>Comedy Troupe</code></em>, and so on. In Ruby, you will traditionally name instances with all lowercase letters and use underscores in the place of spaces; you will name classes with CamelCase. In actual Ruby code, the class <em class="replaceable"><code>ComedyTroupe</code></em> would have instances (objects) called <em class="replaceable"><code>monty_python</code></em> and <em class="replaceable"><code>kids_in_the_hall</code></em></em></span>.<a class="indexterm" id="idx-CHP-1-0018"/><a class="indexterm" id="idx-CHP-1-0019"/><a class="indexterm" id="idx-CHP-1-0020"/><a class="indexterm" id="idx-CHP-1-0021"/><a class="indexterm" id="idx-CHP-1-0022"/><a class="indexterm" id="idx-CHP-1-0023"/></p></div></div><div class="sect2" title="Integers, Fixnums, and Bignums"><div class="titlepage"><div><div><h2 class="title"><a id="integers_fixnums_and_bignums"/>Integers, Fixnums, and Bignums</h2></div></div></div><p>One other type of object (or class) is <span class="emphasis"><em>Integer</em></span>, which is any number that is divisible by one. These should be familiar to you: 0, 1, -5, 27, and so on. Let’s enter an Integer in irb.<a class="indexterm" id="idx-CHP-1-0024"/></p><a id="I_programlisting1_d1e614"/><pre class="programlisting">irb(main):003:0&gt; 100
=&gt; 100</pre><div class="note" title="Note"><h3 class="title"><a id="note-5"/>Note</h3><p><span class="emphasis"><em>If you call the method <em class="replaceable"><code>class</code></em> on an Integer, it will report either Fixnum or Bignum, not Integer. This stems from how Ruby stores numbers internally. Computers can operate faster if they don’t waste space, so they have to worry about how much space numbers take up. However, computers also need to be able to handle very large numbers. Therefore, they compromise and store small numbers so that they take up little space, but they also store very large numbers, which inevitably take up more space. Sophisticated high-level languages like Ruby translate between these different types of numbers automatically, so you can just deal with numbers without worrying about these specific details. Isn’t that handy? For example, <em class="replaceable"><code>100.class</code></em> returns <em class="replaceable"><code>Fixnum</code></em>, and <em class="replaceable"><code>(100 ** 100).class</code></em> returns <em class="replaceable"><code>Bignum</code></em>. That’s because 100 is small enough to fit in a Fixnum, but the value of <em class="replaceable"><code>(100 ** 100)</code></em> will only fit in a Bignum—it’s too big for a Fixnum</em></span>.<a class="indexterm" id="idx-CHP-1-0025"/><a class="indexterm" id="idx-CHP-1-0026"/><a class="indexterm" id="idx-CHP-1-0027"/></p></div><p>We see that the number 100 has the value of 100 in irb, as you might expect. But we want to be able to do more than just see what we’ve typed, so let’s do something with our number 100. Let’s add it to 100.</p><a id="I_programlisting1_d1e651"/><pre class="programlisting">irb(main):004:0&gt; 100 + 100<a class="indexterm" id="idx-CHP-1-0028"/>
=&gt; 200</pre><p>You can see that irb has added these numbers correctly, and it shows you the result. In Ruby, <code class="literal">100 + 100</code> is an expression, just as <code class="literal">“Hello, world!”</code> and <code class="literal">100</code> by itself are <a class="indexterm" id="idx-CHP-1-0029"/>expressions. The value of <code class="literal">100 + 100</code> is, naturally, 200. Numbers have a method called <code class="literal">+</code>, which is how they add themselves to other numbers. That’s precisely what we’ve done here.<a class="indexterm" id="idx-CHP-1-0030"/></p></div><div class="sect2" title="Addition, Concatenation, and Exceptions"><div class="titlepage"><div><div><h2 class="title"><a id="addition_concatenation_and_exceptions"/>Addition, Concatenation, and Exceptions</h2></div></div></div><p>The <code class="literal">+</code> sign can do more than just add numbers. Let’s add two other expressions:<a class="indexterm" id="idx-CHP-1-0031"/></p><a id="I_programlisting1_d1e693"/><pre class="programlisting">irb(main):005:0&gt; "Hello, " + "world!"
=&gt; "Hello, world!"</pre><p>By adding the String <code class="literal">“Hello,”</code> to the String <code class="literal">“world!”</code>, we’ve created the new longer String <code class="literal">“Hello, world!”</code>. Strings don’t perform addition, exactly. They use the <code class="literal">+</code> sign to do an operation called <span class="emphasis"><em>concatenation</em></span>, which is just tacking one thing onto the end of another. In Ruby, the <code class="literal">+</code> sign means <span class="emphasis"><em>Do whatever addition-like operations make the most sense for this class of object</em></span>. This allows you to just use the <code class="literal">+</code> sign and assume that Integers will add themselves in a reasonable “numbery” way, Strings will add themselves in a reasonable “stringy” way, and so on.<a class="indexterm" id="idx-CHP-1-0032"/></p><p>What happens when we try to add two different types of objects? Let’s find out in irb.</p><a id="I_programlisting1_d1e727"/><pre class="programlisting">irb(main):006:0&gt; "Hello, world!" + 100
<a class="indexterm" id="idx-CHP-1-0033"/>TypeError: failed to convert Fixnum into String
        from (irb):6:in '+'
        from (irb):6</pre><p>That expression didn’t work out as well as the others. <code class="literal">TypeError</code> is an example of what Ruby (and many other languages) call an <span class="emphasis"><em>exception</em></span>, which is a notice from a programming language that there has been an error. Our <code class="literal">TypeError</code> means that Ruby wasn’t happy that we asked to add a String to a number.<sup>[<a class="footnote" href="#ftn.CHP-1-FNOTE-1" id="CHP-1-FNOTE-1">4</a>]</sup> Strings know how to add themselves to each other, as do numbers—but they can’t cross types. When adding, we want both operands to be the same type.</p></div><div class="sect2" title="Casting"><div class="titlepage"><div><div><h2 class="title"><a id="casting"/>Casting</h2></div></div></div><p>The solution to this problem is an operation called <span class="emphasis"><em>casting</em></span>, which is the conversion of something from one type to another. Let’s see an example of casting in irb:<a class="indexterm" id="idx-CHP-1-0035"/><a class="indexterm" id="I_indexterm1_d1e764"/><a class="indexterm" id="I_indexterm1_d1e767"/></p><a id="I_programlisting1_d1e770"/><pre class="programlisting">irb(main):007:0&gt; "Hello, world!" + 100.to_s
=&gt; "Hello, world!100"</pre><p>We call the <a class="indexterm" id="idx-CHP-1-0036"/>method <code class="literal">to_s</code> on <code class="literal">100</code> before trying to add it to <code class="literal">“Hello, world!”</code>. This method stands for to <span class="emphasis"><em>String</em></span>—as you may have guessed, it converts the object it is called upon into a String. By the time we need to add these two operands together, they are both Strings, and Ruby dutifully concatenates them.<sup>[<a class="footnote" href="#ftn.CHP-1-FNOTE-2" id="CHP-1-FNOTE-2">5</a>]</sup> Let’s verify that <code class="literal">100.to_s</code> is a String:</p><a id="I_programlisting1_d1e805"/><pre class="programlisting">irb(main):008:0&gt; 100.to_s
=&gt; "100"</pre><p>So it is. But what happens when we want to convert something into an Integer? Is there a <code class="literal">to_i</code> method that we could call on the String <code class="literal">“100”</code> ? Let’s find out.<a class="indexterm" id="idx-CHP-1-0039"/></p><div class="note" title="Note"><h3 class="title"><a id="note-6"/>Note</h3><p><span class="emphasis"><em>Casting is common in strongly-typed languages, like Ruby. It’s less common in weakly-typed languages, although it still can come up. Both approaches have their proponents</em></span>.</p></div><a id="I_programlisting1_d1e823"/><pre class="programlisting">irb(main):009:0&gt; "100".to_i
=&gt; 100</pre><p>We can, indeed. So we now know how to convert both Strings and Integers into each other, via either the <code class="literal">to_s</code> or <code class="literal">to_i</code> <a class="indexterm" id="idx-CHP-1-0040"/>methods. It would be nice if we could see a list of all the methods we could call on a given object. We can do that too, with an aptly named method: <code class="literal">methods</code>. Let’s call it on the Integer 100:</p><a id="I_programlisting1_d1e842"/><pre class="programlisting">irb(main):010:0&gt; 100.methods
=&gt; ["&lt;=", "to_f", "abs", "-", "upto", "succ", "|", "/", "type", "times", "%",
"-@", "&amp;", "~", "&lt;", "**", "zero?", "^", "&lt;=&gt;", "to_s", "step", <a class="indexterm" id="idx-CHP-1-0041"/>"[]", "&gt;",
"==", "modulo", "next", "id2name", "size", "&lt;&lt;", "*", "downto", "&gt;&gt;", "&gt;=",
"divmod", "+", "floor", "to_int", "to_i", "chr", "truncate", "round", "ceil",
"integer?", "prec_f", "prec_i", "prec", "coerce", "nonzero?", "+@", "remainder",
"eql?", "===", "clone", "between?", "is_a?", "equal?", "singleton_methods",
"freeze", "instance_of?", "send", "methods", "tainted?", "id",
"instance_variables", "extend", "dup", "protected_methods", "=~", "frozen?",
"kind_of?", "respond_to?", "class", "nil?", "instance_eval", "public_methods",
"__send__", "untaint", "__id__", "inspect", "display", "taint", "method",
"private_methods", "hash", "to_a"]</pre><p>You can see that both <code class="literal">+</code> and <code class="literal">to_s</code> are in the list of method names.<sup>[<a class="footnote" href="#ftn.CHP-1-FNOTE-3" id="CHP-1-FNOTE-3">6</a>]</sup></p></div><div class="sect2" title="Arrays"><div class="titlepage"><div><div><h2 class="title"><a id="arrays"/>Arrays</h2></div></div></div><p>Notice how the output of <code class="literal">methods</code> is enclosed with square brackets (<code class="literal">[]</code>). These brackets indicate that the enclosed items are the members of an <span class="emphasis"><em>Array</em></span>, which is a list of objects. Arrays are just another class in Ruby, like String or Integer, and (unlike some other languages) there is no requirement for all members of a given Array to be instances of the same class.<a class="indexterm" id="idx-CHP-1-0042"/></p><p>An easy way to convert a single <a class="indexterm" id="idx-CHP-1-0043"/>item <a class="indexterm" id="idx-CHP-1-0044"/>into an <a class="indexterm" id="idx-CHP-1-0045"/>Array is to wrap it in brackets, like so:</p><a id="I_programlisting1_d1e900"/><pre class="programlisting">irb(main):011:0&gt; [100].class
=&gt; Array</pre><p><a class="indexterm" id="idx-CHP-1-0046"/>Arrays also know how to add themselves, as shown:</p><a id="I_programlisting1_d1e907"/><pre class="programlisting">irb(main):012:0&gt; [100] + ["Hello, world!"]
=&gt; [100, "Hello, world!"]</pre><p>The result is just an another Array, comprised of all the elements of the added Arrays.</p></div><div class="sect2" title="Booleans"><div class="titlepage"><div><div><h2 class="title"><a id="booleans"/>Booleans</h2></div></div></div><p>Along with String, Integer, and Array, Ruby also has a class called <a class="indexterm" id="idx-CHP-1-0047"/>Boolean. Strings are sequences of characters, Integers are any numbers divisible by 1, and Arrays are lists of members. <span class="emphasis"><em>Boolean</em></span> values can only be <a class="indexterm" id="idx-CHP-1-0048"/>true or <a class="indexterm" id="idx-CHP-1-0049"/>false. Booleans have many uses, but they are most commonly used in evaluations that determine whether to perform one action or an alternative. Such operations are called <span class="emphasis"><em>flow control</em></span>.<a class="indexterm" id="idx-CHP-1-0050"/></p><div class="note" title="Note"><h3 class="title"><a id="note-7"/>Note</h3><p><span class="emphasis"><em>Booleans are named after the mathematician George Boole, who did much of the early work of formalizing them</em></span>.<a class="indexterm" id="idx-CHP-1-0051"/></p></div></div><div class="sect2" title="Flow Control"><div class="titlepage"><div><div><h2 class="title"><a id="flow_control"/>Flow Control</h2></div></div></div><p>One of the most commonly used flow control operations is <code class="literal">if</code>. It evaluates the expression that follows it as either true or false. Let’s demonstrate some flow control with <code class="literal">if</code> :<a class="indexterm" id="idx-CHP-1-0052"/></p><a id="I_programlisting1_d1e960"/><pre class="programlisting">irb(main):013:0&gt; 100 if true
=&gt; 100</pre><p>We just asked whether or not the expression <code class="literal">100 if true</code> is true. Since the expression <code class="literal">true</code> evaluates to a true value, we do get the value <code class="literal">100</code>. What happens when the expression evaluated by <code class="literal">if</code> isn’t true?</p><a id="I_programlisting1_d1e976"/><pre class="programlisting">irb(main):014:0&gt; 100 if false
<a class="indexterm" id="idx-CHP-1-0053"/>=&gt; nil</pre><p>This is something new. The expression <code class="literal">false</code> is not true, so we don’t get the expression <code class="literal">100</code>. In fact, we get no expression at all—irb tells us it has no value to report. Ruby has a specific value that stands for the <a class="indexterm" id="idx-CHP-1-0054"/>absence of a value (or an otherwise meaningless value), which is <code class="literal">nil</code>.<a class="indexterm" id="I_indexterm1_d1e999"/></p><p>The value could be absent for several reasons. It could be an inexpressible concept, or it could refer to missing data, which is what happened in our example. We never told irb what to report when the evaluated expression was false, so the value is missing. Any value that might need to be represented  as <span class="emphasis"><em>n/a</em></span> is a good candidate for a <code class="literal">nil</code> <a class="indexterm" id="idx-CHP-1-0055"/>value. This situation comes up often when you are interacting with a database. Not all languages have a <code class="literal">nil</code>; some have it, but assume that it must be an error. Ruby is completely comfortable with <code class="literal">nil</code> values being used where appropriate.<a class="indexterm" id="idx-CHP-1-0056"/></p><p>The <code class="literal">nil</code> value is distinct from all other values. However, when we force Ruby to evaluate <code class="literal">nil</code> as a <a class="indexterm" id="idx-CHP-1-0057"/>Boolean, it evaluates to <code class="literal">false</code>, as shown:</p><a id="I_programlisting1_d1e1043"/><pre class="programlisting">irb(main):015:0&gt; <a class="indexterm" id="idx-CHP-1-0058"/>"It's true!" if nil<a class="indexterm" id="idx-CHP-1-0059"/>
=&gt; nil</pre><p>The only values that evaluate to false Booleans are <code class="literal">nil</code> and <code class="literal">false</code>. In many other languages <code class="literal">0</code> or <code class="literal">“”</code> (a String with zero characters) will also evaluate to false, but this is not so in Ruby. Everything other than <code class="literal">nil</code> or <code class="literal">false</code> evaluates to true when forced into a Boolean.</p><div class="note" title="Note"><h3 class="title"><a id="note-8"/>Note</h3><p><span class="emphasis"><em>We have to explicitly cast Strings and Integers into each other with the <em class="replaceable"><code>to_s</code></em> and <em class="replaceable"><code>to_i</code></em> methods, but notice that we don’t need to do this for Boolean values. Boolean casting is implicit when you use <em class="replaceable"><code>if</code></em>. If you were to do explicit casting into a Boolean, you might expect a method similar to <em class="replaceable"><code>to_s</code></em> and <em class="replaceable"><code>to_i</code></em>, called <em class="replaceable"><code>to_b</code></em>. There is no such method in Ruby yet, but we’ll write our own in <a class="xref" href="ch03.html" title="Chapter 3. Programmer Utilities">Chapter 3</a></em></span>.<a class="indexterm" id="idx-CHP-1-0060"/></p></div><p>Let’s say we want a certain value if an evaluated expression is true (as we’ve done with <code class="literal">if</code> already), but that we also want some non-<code class="literal">nil</code> value when the evaluated expression is false. How do we do that? Here’s an example in irb:</p><a id="I_programlisting1_d1e1115"/><pre class="programlisting">irb(main):016:0&gt; if true
irb(main):017:1&gt; 100
irb(main):018:1&gt; else
irb(main):019:1* 50
irb(main):020:1&gt; end
=&gt; 100</pre><p>That’s our first multi-line expression in irb. It should be fairly straightforward, returning <code class="literal">100</code>, because <code class="literal">true</code> evaluates to true. Let’s try again, with a few differences:</p><a id="I_programlisting1_d1e1125"/><pre class="programlisting">irb(main):021:0&gt; if false
irb(main):022:1&gt; 100
irb(main):023:1&gt; else
irb(main):024:1* 50
irb(main):025:1&gt; end
=&gt; 50</pre><p>This time, since <code class="literal">false</code> evaluates as not true, the value of the multi-line expression is the value from the <code class="literal">else</code>, which is <code class="literal">50</code>. This format is a bit wordier than the previous tests that just used <code class="literal">if</code>. We also need the <code class="literal">end</code> keyword to tell irb when we’re done with the expression we started with <code class="literal">if</code>. If we wanted to do tests like these multi-line expressions often, retyping slight variations of the same basic idea over and over could become tedious. That’s where methods come into play.<a class="indexterm" id="I_indexterm1_d1e1148"/></p><div class="note" title="Note"><h3 class="title"><a id="note-9"/>Note</h3><p><a class="indexterm" id="idx-CHP-1-0061"/><span class="emphasis"><em>Notice that irb gives you some useful information in its prompt. The prompt often ends with a <em class="replaceable"><code>&gt;</code></em> symbol, which is usually preceded by a number. That number is how many levels deep you are, meaning the number of end statements you’ll need to get back to the top level. You’ll also notice that sometimes instead of ending with a <em class="replaceable"><code>&gt;</code></em> symbol, the prompt will end with an asterisk (<em class="replaceable"><code>*</code></em>). This means that irb only has an incomplete statement and is waiting for that statement to be completed. Very useful</em></span>.<a class="indexterm" id="idx-CHP-1-0062"/><a class="indexterm" id="idx-CHP-1-0063"/></p></div></div><div class="sect2" title="Methods"><div class="titlepage"><div><div><h2 class="title"><a id="methods"/>Methods</h2></div></div></div><p>We touched on <a class="indexterm" id="idx-CHP-1-0064"/>methods earlier, but we’ll discuss them in more detail now. A <span class="emphasis"><em>method</em></span> is just a bit of code that is attached to an object; it takes one or more input values and returns something as a result.<sup>[<a class="footnote" href="#ftn.CHP-1-FNOTE-4" id="CHP-1-FNOTE-4">7</a>]</sup> We call the inputs to a method the <span class="emphasis"><em>arguments</em></span> or <span class="emphasis"><em>parameters</em></span>, and we call the resulting value the <span class="emphasis"><em>return value</em></span>. We define methods in Ruby with the keyword <code class="literal">def</code>:<a class="indexterm" id="idx-CHP-1-0066"/><a class="indexterm" id="idx-CHP-1-0067"/><a class="indexterm" id="idx-CHP-1-0068"/><a class="indexterm" id="idx-CHP-1-0069"/></p><a id="I_programlisting1_d1e1231"/><pre class="programlisting">irb(main):026:0&gt; def <a class="indexterm" id="idx-CHP-1-0070"/>first_if_true(first, second, to_be_tested)
irb(main):027:1&gt; <a class="indexterm" id="idx-CHP-1-0071"/>if to_be_tested
irb(main):028:2&gt; first
irb(main):029:2&gt; else
irb(main):030:2* second
irb(main):031:2&gt; end
irb(main):032:1&gt; end
=&gt; nil</pre><p>We just defined a method called <code class="literal">first_if_true</code>, which takes three arguments (which it calls <code class="literal">first, second</code>, and <code class="literal">to_be_tested</code>, respectively) and returns either the value of <code class="literal">first</code> or <code class="literal">second</code>, based on whether or not <code class="literal">to_be_tested</code> evaluates to true. We’ve now defined our earlier multi-line tests as something abstract that can be re-used with different values. Let’s try it out.</p><div class="note" title="Note"><h3 class="title"><a id="note-10"/>Note</h3><p><span class="emphasis"><em>Notice that the name of <em class="replaceable"><code>first_if_true</code></em> tells you what it will do. This is a good habit to get into. Method names should tell you what they do. Clear, intuitive method names are an important part of good documentation. The same advice holds for variables, described later. By that criterion, <em class="replaceable"><code>result</code></em> (as seen later) is not a very good name. It’s okay for a simple example that merely introduces the concept of assigning into a variable, but it’s unsuitably vague for real production code</em></span>.</p></div><p>Remember that <code class="literal">first_if_true</code> tests the third value and then returns either the first value or the second value.<a class="indexterm" id="I_indexterm1_d1e1278"/></p><a id="I_programlisting1_d1e1281"/><pre class="programlisting">irb(main):033:0&gt; first_if_true(1, 2, true)
=&gt; 1
irb(main):034:0&gt; first_if_true(1, 2, false)
=&gt; 2
irb(main):035:0&gt; first_if_true(1, 2, nil)
=&gt; 2
irb(main):036:0&gt; first_if_true(nil, "Hello, world!", true)
=&gt; nil
irb(main):037:0&gt; first_if_true(nil, "Hello, world!", false)
=&gt; "Hello, world!"</pre><p>Feel free to try out the <code class="literal">first_if_true</code> method in irb with different arguments, either now or later. It should give you a good idea of how Ruby processes expressions.</p><div class="note" title="Note"><h3 class="title"><a id="note-11"/>Note</h3><p><span class="emphasis"><em>While methods return values when they are used, the simple act of defining a method returns <em class="replaceable"><code>nil</code></em>, as you can see</em></span>.<a class="indexterm" id="idx-CHP-1-0072"/><a class="indexterm" id="idx-CHP-1-0073"/></p></div></div><div class="sect2" title="Variables"><div class="titlepage"><div><div><h2 class="title"><a id="variables"/>Variables</h2></div></div></div><p>What would happen if you wanted to use the output of one method as an input to another method? One of the most convenient ways to do so is with <span class="emphasis"><em>variables</em></span>. Similar to algebra or physics, we just decide to refer to some value by name, like <span class="emphasis"><em>m</em></span> for some specific mass or <span class="emphasis"><em>v</em></span> for some specific velocity. We assign a value into a variable with a single <code class="literal">=</code> sign, as shown:<a class="indexterm" id="idx-CHP-1-0074"/></p><a id="I_programlisting1_d1e1325"/><pre class="programlisting">irb(main):038:0&gt; result = first_if_true(nil, "Hello, world!", false)
=&gt; "Hello, world!"
irb(main):039:0&gt; result
=&gt; "Hello, world!"</pre><p>We assigned the value of <code class="literal">first_if_true(nil, “Hello, world!”, false)</code> (which happens to be <code class="literal">“Hello, world!”</code>) into a variable called <code class="literal">result</code>. We now have the value <code class="literal">“Hello, world!”</code> stored under the name <code class="literal">result</code>, which still evaluates as you’d expect it to, as you can see at line 39. We can now use <code class="literal">result</code> like we would any other value:</p><a id="I_programlisting1_d1e1348"/><pre class="programlisting">irb(main):040:0&gt; first_if_true(result, 1, true)
=&gt; "Hello, world!"
irb(main):041:0&gt; first_if_true(result, 1, result)
=&gt; "Hello, world!"</pre><p>Notice how we can pass <code class="literal">result</code> through <code class="literal">first_if_true</code> and also evaluate it (as <code class="literal">to_be_tested</code>) for Boolean value. We can use it as a part of a larger expression, too:</p><a id="I_programlisting1_d1e1361"/><pre class="programlisting">irb(main):042:0&gt; first_if_true(result, 1, (<a class="indexterm" id="idx-CHP-1-0075"/>not result))
=&gt; 1</pre><p>In the example on line 42, we’ve reversed the Boolean value of <code class="literal">result</code> with the keyword <code class="literal">not</code> before we pass it into <code class="literal">first_if_true</code>. We don’t make any changes to <code class="literal">result</code> on line 42. We just create a new expression with <code class="literal">(not result)</code> that happens to evaluate to whatever the Boolean opposite of <code class="literal">result</code> is. The <code class="literal">result</code> itself stays unchanged.</p><div class="note" title="Note"><h3 class="title"><a id="note-12"/>Note</h3><p><span class="emphasis"><em>I’ve added some spaces just to make it easier to read which parentheses enclose the arguments to the method and which enclose the <em class="replaceable"><code>(not result)</code></em> expression. Ruby and irb don’t care about whitespace very much</em></span>.<a class="indexterm" id="idx-CHP-1-0076"/></p></div></div><div class="sect2" title="Constants"><div class="titlepage"><div><div><h2 class="title"><a id="constants"/>Constants</h2></div></div></div><p>Sometimes we want to refer to a value by name, but we don’t need to change it. In fact, sometimes we intend not to change it. Good examples from physics are the speed of light or the acceleration due to Earth’s gravity—they don’t change. In <a class="indexterm" id="idx-CHP-1-0077"/>Ruby, we can define such values as <span class="emphasis"><em>constants</em></span>, which must start with a <a class="indexterm" id="idx-CHP-1-0078"/>capital letter. (By tradition, they are often entirely uppercase.) Let’s define a constant and then use it:<a class="indexterm" id="idx-CHP-1-0079"/><a class="indexterm" id="idx-CHP-1-0080"/></p><a id="I_programlisting1_d1e1428"/><pre class="programlisting">irb(main):043:0&gt; HUNDRED = 100
=&gt; 100
irb(main):044:0&gt; first_if_true( HUNDRED.to_s + ' is true', false, HUNDRED )
=&gt; "100 is true"</pre><p>We see that we can assign into a constant just like we did into a variable. We can then use that constant by name, as an expression or within a larger expression, as desired.</p></div><div class="footnotes"><br/><hr/><div class="footnote"><p><sup>[<a class="para" href="#CHP-1-FNOTE-1" id="ftn.CHP-1-FNOTE-1">4</a>] </sup>Specifically a Fixnum, in our case.<a class="indexterm" id="idx-CHP-1-0034"/></p></div><div class="footnote"><p><sup>[<a class="para" href="#CHP-1-FNOTE-2" id="ftn.CHP-1-FNOTE-2">5</a>] </sup>Technically, instead of <a class="indexterm" id="idx-CHP-1-0037"/>casting, we’ve created an entirely new object that happens to be the String equivalent of 100.<a class="indexterm" id="idx-CHP-1-0038"/></p></div><div class="footnote"><p><sup>[<a class="para" href="#CHP-1-FNOTE-3" id="ftn.CHP-1-FNOTE-3">6</a>] </sup>By the way, you can chain methods together, such as <code class="literal">100.methods.sort</code>. If you try that in irb, you’ll get the same list of methods as you’d get with <code class="literal">100.methods</code>, but in alphabetical order.</p></div><div class="footnote"><p><sup>[<a class="para" href="#CHP-1-FNOTE-4" id="ftn.CHP-1-FNOTE-4">7</a>] </sup>Ruby is object oriented, so it uses the term <span class="emphasis"><em>method</em></span>. Languages with less of an object-oriented focus will call methods <span class="emphasis"><em>functions</em></span>. A <span class="emphasis"><em>method</em></span> is simply a function that is attached to an object.<a class="indexterm" id="idx-CHP-1-0065"/></p></div></div></div>
<div class="sect1" title="Using the Ruby Interpreter and Environment"><div class="titlepage"><div><div><h1 class="title"><a id="using_the_ruby_interpreter_and_environme"/>Using the Ruby Interpreter and Environment</h1></div></div></div><p>If you come from a Unix background, you’re probably already familiar with the concept of command-line options and environment <a class="indexterm" id="idx-CHP-1-0081"/>variables. If you’re not familiar with these terms, they’re just ways for the computer to keep track of external data, usually configuration options. Ruby uses <span class="emphasis"><em>command-line options</em></span> and <span class="emphasis"><em>environment variables</em></span> to keep track of things like how paranoid or lax it should be in relation to security or how verbose to be about warnings. We’ve already seen an example of this in the instructions for installing Ruby from a source download, when we executed this command:<a class="indexterm" id="idx-CHP-1-0082"/></p><a id="I_programlisting1_d1e1452"/><pre class="programlisting">ruby --version</pre><p>As you’d expect, that just asks Ruby to report its <a class="indexterm" id="idx-CHP-1-0083"/>version. You can find out the various command-line options that Ruby understands by executing this command:<a class="indexterm" id="I_indexterm1_d1e1460"/></p><a id="I_programlisting1_d1e1463"/><pre class="programlisting">ruby -h</pre><p>Environment variables can store these command-line options as defaults; they can also store other information not specific to Ruby that Ruby may still find necessary to perform certain tasks. Users of Unix-like systems store their files inside what’s called a <span class="emphasis"><em>HOME</em></span> directory, which keeps their data out of the way of other users. The My Documents folder in Windows is similar. Another important environment variable is <code class="literal">ARGV</code>, which is an Array that keeps track of all of the arguments passed to Ruby. When you execute an external Ruby program, as you often will by using the syntax below, the program’s name will be found in <code class="literal">ARGV</code>.<a class="indexterm" id="idx-CHP-1-0084"/><a class="indexterm" id="idx-CHP-1-0085"/></p><a id="I_programlisting1_d1e1482"/><pre class="programlisting">ruby some_external_program.rb</pre><p>Let’s move on to some specific example programs. We’ll be dealing with many of the topics we’ve only touched on in this chapter in greater detail appropriate to each example.</p></div></body></html>