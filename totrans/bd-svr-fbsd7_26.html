<html><head></head><body>

<div class="calibre1"><div class="calibre1"><a name="drupal_5.5" class="calibre8" id="drupal_5.5"/>
<div class="calibre24" id="calibre_pb_0"/><h2 id="title-ID0E14OM" class="docPrefaceTitle">Chapter 9. DRUPAL 5.5</h2>
<h4 class="calibre32"><a class="calibre2" target="_blank" href="HTTP://DRUPAL.ORG">HTTP://DRUPAL.ORG</a></h4>
<a name="summary-id8" class="calibre8" id="summary-id8"/>
<h3 class="docSection1Title" id="-100000">9.1. SUMMARY</h3>
<p class="docText1"><a name="Drupal is" class="calibre8" id="Drupal is"/>Drupal is an open source web-based <span class="docEmphasis1"><a name="System " class="calibre8" id="System "/>Content Management System (CMS)</span><a name="be used" class="calibre8" id="be used"/>. Content management systems can be used to organize, store, and distribute various kinds of content, including web pages, images, audio, and documents. Modern CMS applications like Drupal make it relatively easy for users to add, remove, and modify content. This provides a viable platform for company intranet sites and even personal blogs. Drupal is written in PHP and stores content in a MySQL (or PostgreSQL) database.<a name="IDX-CHP-9-0152" class="calibre8" id="IDX-CHP-9-0152"/><a name="IDX-CHP-9-0153" class="calibre8" id="IDX-CHP-9-0153"/><a name="IDX-CHP-9-0154" class="calibre8" id="IDX-CHP-9-0154"/><a name="IDX-CHP-9-0155" class="calibre8" id="IDX-CHP-9-0155"/><a name="IDX-CHP-9-0156" class="calibre8" id="IDX-CHP-9-0156"/><a name="IDX-CHP-9-0157" class="calibre8" id="IDX-CHP-9-0157"/><a name="IDX-CHP-9-0158" class="calibre8" id="IDX-CHP-9-0158"/></p>
<p class="docText1"><a name="include role" class="calibre8" id="include role"/>Some of Drupal's features include role-based permissions, a template/theme system, version control, and built-in site analytics. It also has a powerful module/plug-in system that allows third-party developers to extend the default feature set. If you need functionality that isn't included with Drupal's default feature set, it is probably available as a module.</p>
<p class="docText1"><a name="the University" class="calibre8" id="the University"/>Early Drupal development began in 2000 when Dries Buytaert, a student at the University of Antwerp, built a web-based bulletin board system that he and his friends used to share notes. After graduation, Buytaert continued to add features, and in 2001, he released Drupal as an open source project. Drupal's popularity has increased steadily over the years; it is now deployed on many sites, such as those for <span class="docEmphasis1">The Onion</span>, <span class="docEmphasis1">Forbes</span><a name="In " class="calibre8" id="In "/> magazine, and the Electronic Frontier Foundation. In 2006, Drupal's developers numbered over 400, with Buytaert serving as the project lead.<a name="IDX-CHP-9-0159" class="calibre8" id="IDX-CHP-9-0159"/></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="resources-id8" class="calibre8" id="resources-id8"/>
<h3 class="docSection1Title" id="-100000">9.2. RESOURCES</h3>
<p class="docText1"><span class="b"><a name="Drupal Handbooks" class="calibre8" id="Drupal Handbooks"/>Drupal Handbooks (documentation and video tutorials on using Drupal)</span></p>
<p class="docText1"><a class="calibre2" target="_blank" href="http://drupal.org/handbooks">http://drupal.org/handbooks</a></p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="required-id8" class="calibre8" id="required-id8"/>
<h3 class="docSection1Title" id="-100000">9.3. REQUIRED</h3>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/><a name="FreeBSD " class="calibre8" id="FreeBSD "/> FreeBSD 7.0-RELEASE (see "<a class="calibre2" href="freebsd_7.0_split_000.html#freebsd_7.0">FreeBSD 7.0</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/><a name="collection " class="calibre8" id="collection "/> Updated ports collection (see "<a class="calibre2" href="freebsd_ports_collection.html#freebsd_ports_collection">FreeBSD Ports Collection</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> Apache HTTP server (see "<a class="calibre2" href="apache_http_server_2.2.8_split_000.html#apache_http_server_2.2.8">Apache HTTP Server 2.2.8</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> PHP 5 (see "<a class="calibre2" href="php_5.2.5.html#php_5.2.5">PHP 5.2.5</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> MySQL 5 (see "<a class="calibre2" href="mysql_server_5.0.51.html#mysql_server_5.0.51">MySQL Server 5.0.51</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> Lynx (see "<a class="calibre2" href="lynx_2.8.6.html#lynx_2.8.6">Lynx 2.8.6</a>")</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> Internet connection</p>
<p class="docText1"><img border="0" id="" src="bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg" alt="" class="calibre33"/> Registered domain name</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="preparation-id8" class="calibre8" id="preparation-id8"/>
<h3 class="docSection1Title" id="-100000">9.4. PREPARATION</h3>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="Become the" class="calibre8" id="Become the"/>Become the superuser.<a name="IDX-CHP-9-0160" class="calibre8" id="IDX-CHP-9-0160"/></p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="database in" class="calibre8" id="database in"/>Create a database in MySQL named <span class="docEmphasis1">drupal</span><a name="drupal and" class="calibre8" id="drupal and"/>. Next, create a user named drupal and assign full privileges to this user:</p><pre class="calibre30"># <b class="calibre28">mysql -u root -p</b>
mysql&gt; <b class="calibre28">create database drupal;</b>
mysql&gt; <b class="calibre28">grant all on drupal.* to</b>
    -&gt; <b class="calibre28">drupal@localhost identified by '</b><span class="docEmphBoldItalic">password</span><b class="calibre28">';</b>
mysql&gt; <b class="calibre28">quit</b></pre>
<p class="docText1">Replace <tt class="calibre20"><i class="docEmphasis1">password</i></tt><a name="of your" class="calibre8" id="of your"/> with a password of your choice (the single quotes are required). You'll need this password later.</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="install-id8" class="calibre8" id="install-id8"/>
<h3 class="docSection1Title" id="-100000">9.5. INSTALL</h3>
<p class="docText1"><a name="Enter the" class="calibre8" id="Enter the"/>Enter the following commands to begin the Drupal installation:</p>
<pre class="calibre30"># <b class="calibre28">cd /usr/ports/www/drupal5</b>
# <b class="calibre28">make config ; make install clean</b></pre>
<p class="docText1"><a name="with options" class="calibre8" id="with options"/>A menu with options for Drupal will appear. We will leave them at their defaults, so press [tab] to highlight <span class="b">OK</span><a name="start the" class="calibre8" id="start the"/> and then press [enter] to start the installation.</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="configure-id8" class="calibre8" id="configure-id8"/>
<h3 class="docSection1Title" id="-100000">9.6. CONFIGURE</h3>
<p class="docText1"><a name="Once installation" class="calibre8" id="Once installation"/>Once installation is complete, it's time to configure Drupal for use on your system.</p>
<div class="calibre34"><ol class="docList" type="1"><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="Apache configuration" class="calibre8" id="Apache configuration"/>Create a Drupal-specific Apache configuration file. This file points Apache to the correct location of the Drupal files and makes administration easier by keeping Drupal-specific options separate from the main <span class="docEmphasis1">httpd.conf</span> file. By default, Apache searches the <span class="docEmphasis1">/usr/local/etc/apache22/Includes</span><a name="to create" class="calibre8" id="to create"/> directory for configuration files. Here's how to create one for Drupal:</p><pre class="calibre30"># <b class="calibre28">ee /usr/local/etc/apache22/Includes/drupal.conf</b></pre>
<p class="docText1">Add the following lines:</p><pre class="calibre30">Alias /<tt class="calibre20"><i class="docEmphasis1">drupal</i></tt> "/usr/local/www/drupal5/"

&lt;Directory "/usr/local/www/drupal5/"&gt;
Options Indexes FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
&lt;/Directory&gt;</pre><br class="calibre1"/>
<hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> By default, Drupal is set up as a subdirectory of your web server's root site. This means you would enter <a class="calibre2" target="_blank" href="http://host.example.com/drupal">http://host.example.com/drupal</a> into your web browser. To change this default directory, replace <tt class="calibre20">drupal</tt> (in italics) with a different name.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1"><a name="Apache to" class="calibre8" id="Apache to"/>Save and exit. Restart Apache to commit the changes:</p><pre class="calibre30"># <b class="calibre28">/usr/local/etc/rc.d/apache22 restart</b></pre><br class="calibre1"/>
</div></li><li class="calibre16"><div class="calibre35"><p class="docText1">A line needs to be added to <span class="docEmphasis1">/etc/crontab</span><a name="service that" class="calibre8" id="service that"/> to allow Drupal's maintenance tasks to run automatically. Crontab is a system service that allows automatic execution of scripts or programs according to a schedule specified in the <span class="docEmphasis1">/etc/crontab</span> file.</p><pre class="calibre30"># <b class="calibre28">ee /etc/crontab</b></pre><br class="calibre1"/>
<p class="docText1">Add the following line:</p><div class="calibre1">
              Code View:</div><pre class="calibre30">45 */4 * * * root /usr/local/bin/lynx http:<tt class="calibre20"><i class="docEmphasis1">//host.example.com/drupal/</i></tt>cron.php

					  </pre><br class="calibre1"/>
<p class="docText1">Replace <a class="calibre2" target="_blank" href="http://host.example.com/drupal">host.example.com/drupal</a><a name="Drupal directory" class="calibre8" id="Drupal directory"/> with your hostname and Drupal directory. This line will run the Drupal maintenance script every four hours.</p><hr size="1" noshade="noshade" class="calibre27"/><span><i class="docEmphasis1"><b class="calibre28">Note:</b></i> Make sure Lynx is installed or this won't execute properly.</span><hr size="1" noshade="noshade" class="calibre27"/><p class="docText1">Save and exit.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Open <a class="calibre2" target="_blank" href="http://host.example.com/drupal/install.php">http://host.example.com/drupal/install.php</a><a name="and directory" class="calibre8" id="and directory"/> in your favorite web browser, substituting your hostname and directory (if you modified it).</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1">Change the database type to <span class="b">mysqli</span><a name="password that" class="calibre8" id="password that"/> then enter the database name, username, and password that you set in "<a class="calibre2" href="preparation.html#preparation">Preparation</a>". Click <span class="b">Save configuration</span>.</p></div></li><li class="calibre16"><div class="calibre35"><p class="docText1"><a name="the" class="calibre8" id="the"/>You should see a Drupal Installation Complete page. Click the <span class="b">your new site</span><a name="your Drupal" class="calibre8" id="your Drupal"/> link and follow the instructions to complete your Drupal installation.</p></div></li></ol></div>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="config_files-id8" class="calibre8" id="config_files-id8"/>
<h3 class="docSection1Title" id="-100000">9.7. CONFIG FILES</h3>
<p class="docText1"><span class="b">usr/local/www/drupal5/sites/default/settings.php</span></p>
<p class="docText1"><a name="Holds the" class="calibre8" id="Holds the"/>Holds the username, password, and database information for Drupal</p>
</div></div>




<div class="calibre1"><div class="calibre1"><a name="notes-id6" class="calibre8" id="notes-id6"/>
<h3 class="docSection1Title" id="-100000">9.8. NOTES</h3>
<p class="docText1"><a name="When logging" class="calibre8" id="When logging"/>When logging in as the Drupal site administrator for the first time, you may notice <span class="docEmphasis1">Cron maintenance tasks</span><a name="on the" class="calibre8" id="on the"/> in red on the status report page. This indicates a possible misconfiguration. The crontab entry we made in step 2 will eventually run and correct this error condition. You may click the <span class="b">manually run</span><a name="to execute" class="calibre8" id="to execute"/> link if you wish to execute the script sooner, and thus remove the warning.<a name="IDX-CHP-9-0161" class="calibre8" id="IDX-CHP-9-0161"/></p>
</div></div>

</body></html>