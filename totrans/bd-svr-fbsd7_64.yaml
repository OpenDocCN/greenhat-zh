- en: Chapter 28\. SPAMASSASSIN 3.2.4
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[HTTP://SPAMASSASSIN.APACHE.ORG](HTTP://SPAMASSASSIN.APACHE.ORG)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 28.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: SpamAssassin is a highly effective open source email classifier. It is designed
    to examine email using a diverse set of tests to determine if a message is spam.
    Messages are scored using keywords, historical data (e.g., Bayesian filtering),
    and fingerprinting methods (e.g., Vipul's Razor and DCC databases) to maximize
    effectiveness by leveraging the benefits of each type of test. SpamAssassin stores
    the results of these tests in each email's header. Mail Delivery Agents (MDA)
    like Procmail (see "[Procmail 3.22](procmail_3.22.html#procmail_3.22)") can use
    these headers to route or perform further processing of the message.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: Typically, SpamAssassin is invoked as a daemon or background process. A mail
    transfer agent like Postfix is configured to pipe email through SpamAssassin for
    analysis. If a message is determined to be spam, SpamAssassin can be configured
    to modify the message in a number of ways. By default, spam is re-encoded as an
    attachment and the body of the message displays the list of tests that triggered
    the positive result. Spam and ham (legitimate email) are then delivered to users'
    mailboxes.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: Many commercially available anti-spam packages incorporate SpamAssassin in their
    products. These include SpamKiller by McAfee, Kerio MailServer by Kerio, and SmarterMail
    by SmarterTools.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: SpamAssassin was written in 2001 by Justin Mason, an Irish software developer.
    It is based on filter.plx, a spam filter written in Perl by Mark Jeftovic in 1997\.
    Justin contributed patches to Jeftovic's filter.plx and later decided to rewrite
    the code (also in Perl) from scratch. This recode became SpamAssassin and is now
    a project of the Apache Software Foundation. Mason currently directs SpamAssassin
    development as a vice president of the Apache Software Foundation.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: 28.2\. RESOURCES
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Official SpamAssassin Documentation
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: '[http://spamassassin.apache.org/doc.html](http://spamassassin.apache.org/doc.html)'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: SpamAssassin Test Descriptions and Scores
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: '[http://spamassassin.apache.org/tests_3_2_x.html](http://spamassassin.apache.org/tests_3_2_x.html)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: SpamAssassin Rules Emporium
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.rulesemporium.com](http://www.rulesemporium.com)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: 28.3\. REQUIRED
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Postfix SMTP
    server (see "[Postfix SMTP Server 2.5.1](postfix_smtp_server_2.5.1.html#postfix_smtp_server_2.5.1)")'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Internet
    connection'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: 28.4\. PREPARATION
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Become the superuser.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: 28.5\. INSTALL
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Install SpamAssassin and support for DCC tests.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** DCC (Distributed Checksum Clearinghouse) is a method of sharing
    centralized email fingerprints with a community similar to Vipul''s Razor and
    Pyzor. It is protected by a patent owned by Commtouch Software Ltd. and is free
    to use for non-commercial applications. If you agree to the terms of the license,
    you may install DCC as detailed below; if not, omit `*-D WITH_DCC*` in step 1\.
    The license agreement can be found at [http://www.rhyolite.com/anti-spam/dcc](http://www.rhyolite.com/anti-spam/dcc).'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: 'Enter the following commands to begin the installation of SpamAssassin:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu with options for p5-Mail-SpamAssassin should appear. Scroll down to DKIM
    and press [spacebar] to enable DomainKeys support. Continue down to SPF_QUERY
    and press [spacebar] to enable SPF query support as well. We'll leave the other
    options at their defaults. Press [tab] to select OK and then press [enter] to
    begin the build process.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Enter the following commands to install support for DCC tests:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 28.6\. CONFIGURE
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the installation process completes, it is time to configure SpamAssassin
    for use on your system.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: Set up two community-based email fingerprinting tests, Vipul's Razor and DCC.
    These spam identification systems vary slightly, but both rely on community input
    to keep their databases current as spam evolves. Vipul's Razor and DCC employ
    a web-of-trust scheme to give more weight to clients that accurately report spam.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To set up Vipul''s Razor reporting capabilities, create the default configuration
    file and directory structure and register an identity with the Razor Nomination
    Servers as follows (substitute your domain name for [example.com](http://example.com)):'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Create SpamAssassin''s primary configuration file, local.cf:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Add the following lines (replace the italicized items with values that match
    your network):'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '`trusted_networks` specifies an IP or range of IPs for systems that don''t
    relay spam. In other words, you are confident that these computers aren''t compromised
    and the people using them aren''t spammers. In the example above you are vouching
    for your internal network of 192.168.1.xxx, 209.85.146.176-182 (Gmail''s outbound
    mail servers), and 204.13.250.97 (this could be the backup mail server/exchanger
    for your domain). These IPs will be exempt from DNS blacklist checks.'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`internal_networks` specifies an IP or range of IPs for systems that handle
    mail for your domain. In general, you should specify your domain''s mail servers/exchangers
    here. In the example above we are saying that 192.168.1.11 and 204.13.250.97 handle
    mail delivery for our domain. All values of `internal_networks` must also be present
    in the `trusted_networks` statement.'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Save, exit, and test for configuration file syntax errors:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: If your configuration file parsed successfully, no message will be displayed.
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** For further information on the local.cf file, enter:'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Create a short script to be called by Postfix when new email arrives. This
    script will send the email to SpamAssassin for analysis and then redirect the
    result back into the mail system for delivery. Create the script:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'and add these lines:'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Configure Postfix to pipe new email messages through the script you just created.
    First, open the Postfix configuration file, master.cf:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Scroll down and find the `smtp` declaration (~9). Create a new line under the
    `smtp` declaration and add a `content_filter` statement. The `smtp` declaration
    should look like this:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '* * *'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Be sure to leave at least one space at the beginning of the second
    line as shown or Postfix will not parse the file correctly.'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Add a `spamd` declaration to tell Postfix to call on the spamd.sh script so
    SpamAssassin can process the message. Scroll to the bottom of master.cf and add
    these two lines:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '* * *'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Again, be sure to leave at least one space at the beginning of
    the second and third lines so Postfix will parse the file correctly.'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Save, exit, and reload the Postfix configuration files:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 28.7\. TESTING
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this section, we'll perform some basic tests to confirm that SpamAssassin
    is being called by Postfix and processing messages correctly.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: 'Configure SpamAssassin to start automatically at system startup. Open rc.conf:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'and add the following lines:'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Save and exit.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Start the SpamAssassin daemon so it will answer requests submitted by Postfix:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Send a test spam message into the mail system. First, open a telnet connection:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '* * *'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** Your hostname should appear instead of [host.example.com](http://host.example.com).'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Enter the following (substituting your domain for [example.com](http://example.com)):'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Then enter the following lines as shown, pressing [enter] after each line.
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** The long string below is known as the GTUBE (Generic Test for Unsolicited
    Bulk Email). It will cause SpamAssassin to flag the message as spam.'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '* * *'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '***Note:*** The italicized ID tag will be different in your output.'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '* * *'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, close the connection:'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Display the contents of spamd''s mailbox:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'If SpamAssassin processed the message successfully, you should see output similar
    to this:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: 'Code View:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 28.8\. UTILITIES
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Following is brief information on the `sa-update` and `sa-learn` commands.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: 28.8.1\. SA-UPDATE
  id: totrans-100
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This utility downloads and installs updates and/or custom rules for SpamAssassin.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: Command
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
- en: '`sa-update`'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: Syntax
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: '`sa-update` `*options*`'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: Options
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Retrieve rule updates from a specified channel.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Do not use GPG (GNU Privacy Guard) to ensure authenticity.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
- en: 'To update SpamAssassin''s default ruleset:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'To install a ruleset that specializes in catching adult-oriented spam:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The channel in italics is from:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
- en: List of channels
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: '[http://wiki.apache.org/spamassassin/SareChannels](http://wiki.apache.org/spamassassin/SareChannels)'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: Channel information
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.rulesemporium.com/rules.htm](http://www.rulesemporium.com/rules.htm)'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: 28.8.2\. sa-learn
  id: totrans-121
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This utility helps the Bayesian classifier learn characteristics of spam and
    ham. Bayesian classification is based on word probabilities and can be highly
    effective if trained properly.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: Command
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: '`sa-learn`'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: Syntax
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: '`sa-learn` `*options*` `*file*`'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: Options
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Learn messages as ham (not spam).
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Learn messages as spam.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Specify the location of the Bayes database files.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Show progress using a progress bar.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Display contents of the Bayes database.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: 'To teach SpamAssassin that all messages in the current directory are spam:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'To teach SpamAssassin that all messages in the /usr/home/john/Maildir/cur directory
    are ham:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'To show a content summary of the Bayes database:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE33]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 28.9\. CONFIG FILES
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Use the following files to customize SpamAssassin''s configuration:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/mail/spamassassin/local.cf
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: SpamAssassin's main configuration file
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/mail/spamassassin/init.pre
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: The plug-in configuration file for 3.0.x releases
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/mail/spamassassin/v310.pre
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: The plug-in configuration file for the 3.1.0 release
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/mail/spamassassin/v312.pre
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: The plug-in configuration file for the 3.1.2 release
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: /usr/local/etc/mail/spamassassin/v320.pre
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: The plug-in configuration file for the 3.2.0 release
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: The plug-in configuration files are loaded when SpamAssassin's spamd daemon
    is loaded. Each file contains plug-ins that were specifically added at the time
    of each respective release.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: 28.10\. LOG FILE
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: /var/log/maillog
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: Contains a log of activity and status information for SpamAssassin's spamd daemon
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: 28.11\. NOTES
  id: totrans-161
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Using a Mail Delivery Agent SpamAssassin delivers both spam and ham to users'
    default mailboxes; it cannot apply rules to spam. To set rules for handling email
    that is flagged as spam, use a tool like Procmail (see ) to process messages once
    they have been tagged by SpamAssassin.
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Whitelisting If there are certain senders or domains that you want to effectively
    exempt from SpamAssassin's array of tests, you can add their email addresses or
    domains to the system whitelist. SpamAssassin will accept whitelist declarations
    in local.cf in /usr/local/etc/mail/spamassassin or user_prefs in /var/spool/spamd/.spamassassin.
    Keeping whitelist entries in user_prefs is preferable because it keeps them separate
    from the primary configuration settings.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To demonstrate, we''ll add whitelist entries for [vip@example.com](mailto:vip@example.com.html)
    and anyone from [gmail.com](http://gmail.com) to the user_prefs file. Open user_prefs:'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE34]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'and add the following lines:'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE35]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: The `whitelist_from` statement subtracts 100 points from the spam score on all
    email that claims to be from [vip@example.com](mailto:vip@example.com.html).
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The `whitelist_auth` statement subtracts 100 points from the spam score on all
    email verified by SPF, DomainKeys, or DKIM from any [gmail.com](http://gmail.com)
    email address.
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If you can confirm that senders employ SPF, DomainKeys, or DKIM on their email
    systems, use `whitelist_auth` instead of `whitelist_from`.
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Reporting Spam to Vipul''s Razor You can report messages to a Razor Nomination
    Server with the razor-report utility. Reporting spam to the Razor system helps
    the community better recognize the ever-changing types of spam in circulation.
    If you have a folder with known spam messages you can submit them to the Razor
    servers like so (replace the italicized path with a path to your spam directory):'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向Vipul's Razor报告垃圾邮件 你可以使用razor-report实用工具向Razor提名服务器报告消息。向Razor系统报告垃圾邮件有助于社区更好地识别不断变化的垃圾邮件类型。如果你有一个包含已知垃圾邮件的文件夹，你可以像这样提交给Razor服务器（将斜体路径替换为你垃圾邮件目录的路径）：
- en: '[PRE36]'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: Bayesian Classification Tests Bayesian classification tests will not run on
    incoming email until 200 spam and 200 ham messages have been recorded in the database.
    The Bayes system will automatically learn spam and ham messages over time. If
    you have an existing collection of spam and ham, use the sa-learn utility to speed
    up this process. See "[sa-learn](utilities-id10.html#sa-learn)" for examples.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯分类测试 贝叶斯分类测试将在数据库中记录了200条垃圾邮件和200条正常邮件之前不会在收件箱中运行。贝叶斯系统将自动随着时间的推移学习垃圾邮件和正常邮件。如果你有一个现有的垃圾邮件和正常邮件集合，可以使用sa-learn实用工具来加速此过程。有关示例，请参阅"[sa-learn](utilities-id10.html#sa-learn)"。
