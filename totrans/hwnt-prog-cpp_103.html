<html><head></head><body>

<div class="calibre21" id="calibre_pb_0"/><div class="calibre1" id="calibre_toc_114">
<a name="ch09" class="calibre6" id="ch09"/>
<div class="calibre1">
<h2 class="lot-title" id="calibre_pb_1"><a name="118" class="calibre16" id="118"/><a name="ch09lev1sec2" class="calibre16" id="ch09lev1sec2"/><span class="chapter-titlelabel">Program 101: </span>Point of No Return</h2><p class="b24-bookeditorial">Why does the following program write out a correct file on UNIX and a bad one on Microsoft Windows? The program writes out 128 characters, but Microsoft Windows contains 129. Why?</p>
<div class="calibre1">
<pre class="literallayout-normal">
  1 /*************************************************
  2  * Create a test file containing binary data.    *
  3  *************************************************/
  4 #include &lt;iostream&gt;
  5 #include &lt;fstream&gt;
  6 #include &lt;stdlib.h&gt;
  7
  8 int main()
  9 {
 10     // current character to write
 11     unsigned char cur_char;
 12
 13     // output file
 14     std::ofstream out_file;
 15
 16     out_file.open("test.out", std::ios::out);
 17     if (out_file.bad())
 18     {
 19         std::cerr &lt;&lt; "Can not open output file\n";
 20         exit (8);
 21     }
 22
 23     for (cur_char = 0;
 24          cur_char &lt; 128;
 25          ++cur_char)
 26     {
 27         out_file &lt;&lt; cur_char;
 28     }
 29     return (0);
 30 }
</pre>
</div>
<p class="b24-bookeditorial">(Next <a href="LiB0120.html#485" target="_parent" class="calibre2">Hint 349</a>. <a href="LiB0121.html#503" target="_parent" class="calibre2">Answer 5</a>.)</p>
<div class="calibre1">
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="Start Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
<p class="b24-bookeditorial">To err is human; to really foul up you need a computer. To keep things fouled up you need a bureaucracy.</p>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td class="bluecell"><span class="calibre22"><b class="calibre13"><img src="_1.gif" alt="End Sidebar" border="0" class="calibre23"/></b></span></td>
</tr>
</table>
</div>
<table class="calibre3" border="0" cellspacing="0" cellpadding="0" width="100%">
<tr class="calibre4">
<td height="16" class="calibre8"/>
</tr>
</table>
</div>
</div>



</body></html>