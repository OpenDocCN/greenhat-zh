<html><head></head><body><section epub:type="appendix" id="configuring_your_target_machines"><div class="titlepage"><div class="book"><div class="book"><h2 class="title1">Appendix A. Configuring Your Target Machines</h2></div></div></div><p class="calibre2">The best way to learn to use the Metasploit Framework is by practicing — repeating a task until you fully understand how it is accomplished. This appendix explains how to set up a test environment to use with the examples in this book.<a id="IDX-APP-A-0070" class="strong"/><a id="IDX-APP-A-0071" class="strong"/><a id="IDX-APP-A-0072" class="strong"/></p><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="installing_and_setting_up_the_system">Installing and Setting Up the System</h2></div></div></div><p class="calibre2">The examples in this book use a combination of Back|Track, Ubuntu 9.04, Metasploitable, and Windows XP. Back|Track serves as our vehicle for exploitation, and the Ubuntu and Windows systems are our target systems.<a id="IDX-APP-A-0073" class="strong"/><a id="IDX-APP-A-0074" class="strong"/></p><p class="calibre2">First create an unpatched Windows XP Service Pack 2 installation to test the examples presented throughout this book. The Back|Track and Ubuntu 9.04 virtual machines can be run on a host machine running Windows, Mac OS X, or Linux on any VMware product, including Workstation, Server, Player, Fusion, or ESX.</p><div class="book"><hr class="calibre5"/></div><div class="note"><h3 class="title4">Note</h3><p class="calibre2">Be careful with your Ubuntu and Windows XP virtual machines, because these systems are vulnerable and easy to exploit. Do not conduct any sensitive activities on these machines: If you can exploit them, anyone else can, too.<a id="IDX-APP-A-0075" class="strong"/><a id="IDX-APP-A-0076" class="strong"/><a id="IDX-APP-A-0077" class="strong"/><a id="IDX-APP-A-0078" class="strong"/><a id="IDX-APP-A-0079" class="strong"/><a id="IDX-APP-A-0080" class="strong"/></p></div><div class="book"><hr class="calibre5"/></div><p class="calibre2">If you don’t already have the free VMware Player for Windows and Linux, download and install it. If you’re using OS X, download the free 30-day trial of VMware Fusion. (If you’re running Windows, you can also use the free VMware Server edition.)</p><p class="calibre2">After you have installed VMware, double-click the <span class="strong"><em class="calibre4">.vmx</em></span> file to use with VMware, or open the virtual machine files in VMware Player by choosing <span class="strong"><strong class="calibre3">File</strong></span> ▸ <span class="strong"><strong class="calibre3">Open</strong></span> and pointing to the folder that contains all the virtual machines and associated files. If you’re installing from an ISO disc image, create a new virtual machine and specify this ISO file as the CD-ROM device.</p><div class="book"><hr class="calibre5"/></div><div class="note"><h3 class="title4">Note</h3><p class="calibre2">Download Back|Track from <a class="xref" href="http://www.backtrack-linux.org/" target="_top">http://www.backtrack-linux.org/</a> and Ubuntu 9.04 from <a class="xref" href="http://www.vmware.com/appliances/directory/" target="_top">http://www.vmware.com/appliances/directory/</a> by searching for Ubuntu 9.04. Metasploitable can be downloaded from <a class="xref" href="http://blog.metasploit.com/2010/05/introducing-metasploitable.html" target="_top">http://blog.metasploit.com/2010/05/introducing-metasploitable.html</a>.</p></div><div class="book"><hr class="calibre5"/></div></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="booting_up_the_linux_virtual_machines">Booting Up the Linux Virtual Machines</h2></div></div></div><p class="calibre2">After powering on either of the Linux virtual machines, you need to log in. The default credentials for both Linux environments are username <span class="strong"><em class="calibre4">root</em></span> and password <span class="strong"><em class="calibre4">toor</em></span>.</p><p class="calibre2">If you don’t have a DHCP server on your network, find your system’s address range and use the commands shown in the following listing. (Make sure that you replace your IP address with an unused one, and edit the network interface that you will be using. For more on manual network setup, see <a class="xref" href="http://www.yolinux.com/TUTORIALS/LinuxTutorialNetworking.html" target="_top">http://www.yolinux.com/TUTORIALS/LinuxTutorialNetworking.html</a>.)</p><a id="I_programlisting_d1e20362" class="strong"/><pre class="programlisting">root@bt:˜# <strong class="calibre3"><code class="calibre6">nano /etc/network/interfaces</code></strong>
Password:
&lt;inside the nano editor place your valid information into the system&gt;
# The primary network interface
auto eth0 # the interface used
iface eth0 inet static # configure static IP address
      address 192.168.1.10 # your IP address you want
      netmask 255.255.255.0 # your subnet mask
      network 192.168.1.0 # your network address
      broadcast 192.168.0.255 # your broadcast address
      gateway 192.168.1.1 # your default gateway
&lt;control-x&gt;
&lt;y&gt;</pre><p class="calibre2">After configuration is complete, your Linux environment should be ready for use. Do not update the Ubuntu installation, because this system should remain vulnerable.</p></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h2 class="title2" id="setting_up_a_vulnerable_windows_xp_insta">Setting Up a Vulnerable Windows XP Installation</h2></div></div></div><p class="calibre2">To run the examples in this book, you will need to install a licensed copy of Windows XP on a virtualization platform such as VMware. After you have completed the installation, log in as Administrator, open the Control Panel, switch to Classic View, and choose <span class="strong"><strong class="calibre3">Windows Firewall</strong></span>. Select <span class="strong"><strong class="calibre3">Off</strong></span> and click <span class="strong"><strong class="calibre3">OK</strong></span>. (This may seem unrealistic, but this scenario is more common than you might imagine in large corporations.)<a id="IDX-APP-A-0081" class="strong"/><a id="IDX-APP-A-0082" class="strong"/><a id="IDX-APP-A-0083" class="strong"/><a id="IDX-APP-A-0084" class="strong"/><a id="IDX-APP-A-0085" class="strong"/><a id="IDX-APP-A-0086" class="strong"/><a id="IDX-APP-A-0087" class="strong"/><a id="IDX-APP-A-0088" class="strong"/><a id="IDX-APP-A-0089" class="strong"/><a id="IDX-APP-A-0090" class="strong"/><a id="IDX-APP-A-0091" class="strong"/><a id="IDX-APP-A-0092" class="strong"/><a id="IDX-APP-A-0093" class="strong"/><a id="IDX-APP-A-0094" class="strong"/><a id="IDX-APP-A-0095" class="strong"/><a id="IDX-APP-A-0096" class="strong"/><a id="IDX-APP-A-0097" class="strong"/><a id="IDX-APP-A-0098" class="strong"/><a id="IDX-APP-A-0099" class="strong"/><a id="IDX-APP-A-0100" class="strong"/></p><p class="calibre2">Next, open Automatic Updates and select <span class="strong"><strong class="calibre3">Turn off Automatic Updates</strong></span>; then click <span class="strong"><strong class="calibre3">OK</strong></span>. You don’t want Windows to patch vulnerabilities as you’re trying to learn how to exploit them.</p><p class="calibre2">Now configure your installation with a static IP address via the Network Connections Control Panel. While not required, doing this will save you from having to recheck the target address every time you launch an exploit.</p><div class="book"><div class="titlepage"><div class="book"><div class="book"><h3 class="title3" id="configuring_your_web_server_on_windows_x">Configuring Your Web Server on Windows XP</h3></div></div></div><p class="calibre2">To make things interesting and provide for a larger attack surface, we’ll enable some additional services.<a id="IDX-APP-A-0101" class="strong"/><a id="IDX-APP-A-0102" class="strong"/></p><div class="book"><ol class="orderedlist" type="1"><li class="listitem" value="1">In the Control Panel, select <span class="strong"><strong class="calibre3">Add or Remove Programs</strong></span>, and then select <span class="strong"><strong class="calibre3">Add/Remove Windows Components</strong></span>. You should be looking at the <span class="strong"><em class="calibre4">Windows Components Wizard</em></span>.</li><li class="listitem" value="2">Select the checkbox for <span class="strong"><strong class="calibre3">Internet Information Services (IIS)</strong></span> and click <span class="strong"><strong class="calibre3">Details</strong></span>. Then select the checkbox for <span class="strong"><strong class="calibre3">File Transfer Protocol (FTP) Service</strong></span> and click <span class="strong"><strong class="calibre3">OK</strong></span>. Conveniently enough, the FTP service allows anonymous connections by default.</li><li class="listitem" value="3">Select the <span class="strong"><strong class="calibre3">Management and Monitoring Tools</strong></span> checkbox and click <span class="strong"><strong class="calibre3">OK</strong></span>. By default, this installs the Simple Network Management Protocol (SNMP) and Windows Management Interface (WMI) SNMP Provider.<a id="IDX-APP-A-0103" class="strong"/><a id="IDX-APP-A-0104" class="strong"/></li><li class="listitem" value="4">Click <span class="strong"><strong class="calibre3">Next</strong></span> to complete the installation and reboot the machine for good measure.</li></ol></div><p class="calibre2">The combination of these steps adds different services that we test throughout this book. The IIS server will allow you to run a website and can be downloaded from <a class="xref" href="http://www.secmaniac.com/files/nostarch1.zip" target="_top">http://www.secmaniac.com/files/nostarch1.zip</a>. The FTP service will allow you to perform FTP-based attacks against the Windows system, and the SNMP configuration will allow you to test auxiliary modules within Metasploit.</p></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h3 class="title3" id="building_a_sql_server">Building a SQL Server</h3></div></div></div><p class="calibre2">Many database modules within Metasploit and Fast-Track target Microsoft SQL Server, so you need to install SQL Server 2005 Express, available for free from Microsoft. As of this writing, you can locate the non–service pack version of SQL Server Express at <a class="xref" href="http://www.microsoft.com/" target="_top">http://www.microsoft.com/</a>. To install SQL Server Express, you will need to install Windows Installer 3.1 and the .NET Framework 2.0. You can find links to the resources on this page, and all other URLs referenced in this book, at <a class="xref" href="http://www.secmaniac.com/files/nostarch1.zip" target="_top">http://www.secmaniac.com/files/nostarch1.zip</a>.</p><p class="calibre2">Once you have the prerequisites installed, run the SQL Express installer and select all the defaults except for Authentication Mode. Select <span class="strong"><strong class="calibre3">Mixed Mode</strong></span>, set a <span class="strong"><em class="calibre4">sa</em></span> login password of <span class="strong"><em class="calibre4">password1</em></span>, and then continue with the installation.<a id="IDX-APP-A-0105" class="strong"/><a id="IDX-APP-A-0106" class="strong"/><a id="IDX-APP-A-0107" class="strong"/><a id="IDX-APP-A-0108" class="strong"/><a id="IDX-APP-A-0109" class="strong"/><a id="IDX-APP-A-0110" class="strong"/><a id="IDX-APP-A-0111" class="strong"/><a id="IDX-APP-A-0112" class="strong"/><a id="IDX-APP-A-0113" class="strong"/><a id="IDX-APP-A-0114" class="strong"/><a id="IDX-APP-A-0115" class="strong"/><a id="IDX-APP-A-0116" class="strong"/></p><p class="calibre2">With the basic installation of SQL Server complete, you need to make a few more changes to make it accessible on your network:</p><div class="book"><ol class="orderedlist" type="1"><li class="listitem" value="1">Select <span class="strong"><strong class="calibre3">Start</strong></span> ▸ <span class="strong"><strong class="calibre3">All Programs</strong></span> ▸ <span class="strong"><strong class="calibre3">Microsoft SQL Server 2005</strong></span> ▸ <span class="strong"><strong class="calibre3">Configuration Tools</strong></span>, and then select <span class="strong"><strong class="calibre3">SQL Server Configuration Manager</strong></span>.</li><li class="listitem" value="2">When the Configuration Manager starts, select <span class="strong"><strong class="calibre3">SQL Server 2005 Services</strong></span>, right-click <span class="strong"><strong class="calibre3">SQL Server (SQLEXPRESS)</strong></span>, and select <span class="strong"><strong class="calibre3">Stop</strong></span>.</li><li class="listitem" value="3">Expand SQL Server 2005 Network Configuration Manager and select <span class="strong"><strong class="calibre3">Protocols for SQLEXPRESS</strong></span>, as shown in <a class="xref" href="part0022.html#protocols_for_sqlexpress">Figure A-1</a>.<div class="figure1"><a id="protocols_for_sqlexpress" class="strong"/><div class="book"><div class="mediaobject"><a id="I_mediaobject_d1e20650" class="strong"/><img src="../images/00063.jpeg" alt="Protocols for SQLEXPRESS" hisrc="httpatomoreillycomsourcenostarchimages867580.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure A-1. Protocols for SQLEXPRESS</div></div></li><li class="listitem" value="4">Double-click <span class="strong"><strong class="calibre3">TCP/IP</strong></span>, and on the Protocol tab, set <span class="strong"><strong class="calibre3">Enabled</strong></span> to <span class="strong"><strong class="calibre3">Yes</strong></span> and <span class="strong"><strong class="calibre3">Listen All</strong></span> to <span class="strong"><strong class="calibre3">No</strong></span>.</li><li class="listitem" value="5">Next, while still within the TCP/IP Properties dialog, select the IP Addresses tab and remove any entries under IPAll. Under IP1 and IP2, remove the values for TCP Dynamic Ports and set <span class="strong"><strong class="calibre3">Active</strong></span> and <span class="strong"><strong class="calibre3">Enabled</strong></span> for each of them to <span class="strong"><strong class="calibre3">Yes</strong></span>.</li><li class="listitem" value="6">Finally, set the IP1 IP Address to match your static IP address set earlier, set the IP2 address to <span class="strong"><strong class="calibre3">127.0.0.1</strong></span>, and set the TCP port for each of them to <span class="strong"><strong class="calibre3">1433</strong></span>. Your settings should look similar to those shown in <a class="xref" href="part0022.html#setting_sql_server_ip_addresses_in_the_t">Figure A-2</a>. Click <span class="strong"><strong class="calibre3">OK</strong></span> when you are all set.</li></ol></div><p class="calibre2">Next, you’ll need to enable the SQL Server Browser service:<a id="IDX-APP-A-0117" class="strong"/></p><div class="book"><ol class="orderedlist" type="1"><li class="listitem" value="1">Select <span class="strong"><strong class="calibre3">SQL Server 2005 Services</strong></span> and double-click <span class="strong"><strong class="calibre3">SQL Server Browser</strong></span>.</li><li class="listitem" value="2">On the Service tab, set the <span class="strong"><strong class="calibre3">Start Mode</strong></span> to <span class="strong"><strong class="calibre3">Automatic</strong></span>.</li></ol></div><div class="figure"><a id="setting_sql_server_ip_addresses_in_the_t" class="strong"/><div class="book"><div class="book"><a id="I_mediaobject_d1e20726" class="strong"/><img src="../images/00064.jpeg" alt="Setting SQL Server IP addresses in the TCP/IP Properties dialog" hisrc="httpatomoreillycomsourcenostarchimages867582.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure A-2. Setting SQL Server IP addresses in the TCP/IP Properties dialog</div></div><p class="calibre2">By default, the SQL Server runs under the low-privilege Network Service account, which is a great default. However, it’s not entirely realistic for what we find deployed in the field, and often administrators change this rather than trying to troubleshoot permissions issues.<a id="IDX-APP-A-0118" class="strong"/><a id="IDX-APP-A-0119" class="strong"/><a id="IDX-APP-A-0120" class="strong"/><a id="IDX-APP-A-0121" class="strong"/><a id="IDX-APP-A-0122" class="strong"/><a id="IDX-APP-A-0123" class="strong"/></p><p class="calibre2">On most target systems, we have found that the SQL Server Browser service is running as an elevated SYSTEM-based account. Most systems have the SQL Server Service logged on as Local System, the default in older versions of Microsoft SQL Server (2000 and earlier). Therefore, you should change the account by double-clicking <span class="strong"><strong class="calibre3">SQL Server (SQLEXPRESS)</strong></span> and setting <span class="strong"><strong class="calibre3">Log on as</strong></span> to <span class="strong"><strong class="calibre3">Local System</strong></span>. Click <span class="strong"><strong class="calibre3">OK</strong></span> when you have finished. Then right-click <span class="strong"><strong class="calibre3">SQL Server (SQLEXPRESS)</strong></span> and select <span class="strong"><strong class="calibre3">Start</strong></span>. Do the same with SQL Server browser.<a id="IDX-APP-A-0124" class="strong"/></p><p class="calibre2">Finally, close the Configuration Manager and verify that everything is working properly by opening a command prompt and running <strong class="calibre3"><code class="calibre6">netstat -ano |find "1433"</code></strong> and <strong class="calibre3"><code class="calibre6">netstat -ano |find "1434"</code></strong>. Your IP addresses configured earlier should be listening on TCP port 1433 and UDP port 1434, as shown here:</p><a id="I_programlisting_d1e20792" class="strong"/><pre class="programlisting">Microsoft Windows XP [Version 5.1.2600]
© Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\Administrator&gt;<strong class="calibre3"><code class="calibre6">netstat -ano |find "1433"</code></strong>
   TCP      127.0.0.1:1433          0.0.0.0:0   LISTENING   512
   TCP      192.168.1.155:1433      0.0.0.0:0   LISTENING   512
C:\Documents and Settings\Administrator&gt;<strong class="calibre3"><code class="calibre6">netstat -ano |find "1434"</code></strong>
   UDP      0.0.0:1434        *:*
C:\Documents and Settings\Administrator&gt;</pre></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h3 class="title3" id="creating_a_vulnerable_web_application">Creating a Vulnerable Web Application</h3></div></div></div><p class="calibre2">To use some of the more advanced features of Metasploit and external tools such as Fast-Track and the Social-Engineer Toolkit (SET), you will need a vulnerable web application to test against. To create the database and tables, download and install SQL Server Management Studio Express from the link provided at <a class="xref" href="http://www.nostarch.com/metasploit.htm" target="_top">http://www.nostarch.com/metasploit.htm</a>.<a id="IDX-APP-A-0125" class="strong"/><a id="IDX-APP-A-0126" class="strong"/><a id="IDX-APP-A-0127" class="strong"/><a id="IDX-APP-A-0128" class="strong"/><a id="IDX-APP-A-0129" class="strong"/><a id="IDX-APP-A-0130" class="strong"/><a id="IDX-APP-A-0131" class="strong"/><a id="IDX-APP-A-0132" class="strong"/><a id="IDX-APP-A-0133" class="strong"/><a id="IDX-APP-A-0134" class="strong"/><a id="IDX-APP-A-0135" class="strong"/><a id="IDX-APP-A-0136" class="strong"/><a id="IDX-APP-A-0137" class="strong"/><a id="IDX-APP-A-0138" class="strong"/><a id="IDX-APP-A-0139" class="strong"/></p><p class="calibre2">After the installation and a healthy reboot, do the following:</p><div class="book"><ol class="orderedlist" type="1"><li class="listitem" value="1">Start the application by choosing <span class="strong"><strong class="calibre3">Start</strong></span> ▸ <span class="strong"><strong class="calibre3">All Programs</strong></span> ▸ <span class="strong"><strong class="calibre3">Microsoft SQL Server 2005</strong></span> ▸ <span class="strong"><strong class="calibre3">SQL Server Management Studio Express</strong></span>.</li><li class="listitem" value="2">When prompted for credentials, select <span class="strong"><strong class="calibre3">SQL Server Authentication</strong></span> from the Authentication drop-down, and log in using the username <span class="strong"><em class="calibre4">sa</em></span> and the password <span class="strong"><em class="calibre4">password1</em></span>.</li><li class="listitem" value="3">In Object Explorer, right-click <span class="strong"><strong class="calibre3">Databases</strong></span> and select <span class="strong"><strong class="calibre3">New Database</strong></span>.</li><li class="listitem" value="4">For the Database name, enter <span class="strong"><strong class="calibre3">WebApp</strong></span> and click <span class="strong"><strong class="calibre3">OK</strong></span>.</li><li class="listitem" value="5">Expand Databases and the WebApp database tree.</li><li class="listitem" value="6">Right-click <span class="strong"><strong class="calibre3">Tables</strong></span> and select <span class="strong"><strong class="calibre3">New Table</strong></span>. Name your new table <span class="strong"><em class="calibre4">users</em></span> with the column names and types shown in <a class="xref" href="part0022.html#users_table_columns">Figure A-3</a>.<div class="figure1"><a id="users_table_columns" class="strong"/><div class="book"><div class="mediaobject"><a id="I_mediaobject_d1e20933" class="strong"/><img src="../images/00065.jpeg" alt="Users table columns" hisrc="httpatomoreillycomsourcenostarchimages867584.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure A-3. <span class="strong"><em class="calibre4">Users</em></span> table columns</div></div></li><li class="listitem" value="7">Save the <span class="strong"><em class="calibre4">users</em></span> table, and then right-click it and select <span class="strong"><strong class="calibre3">Open Table</strong></span>.</li><li class="listitem" value="8">Populate the table with some sample data similar to that shown in <a class="xref" href="part0022.html#populated_users_table">Figure A-4</a>, and then save your work.<div class="figure1"><a id="populated_users_table" class="strong"/><div class="book"><div class="mediaobject"><a id="I_mediaobject_d1e20958" class="strong"/><img src="../images/00066.jpeg" alt="Populated users table" hisrc="httpatomoreillycomsourcenostarchimages867586.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure A-4. Populated <span class="strong"><em class="calibre4">users</em></span> table</div></div></li><li class="listitem" value="9">Expand the Security tree under Object Explorer, and then expand Logins.</li><li class="listitem" value="10">Right-click <span class="strong"><strong class="calibre3">Logins</strong></span> in the User Properties window and select <span class="strong"><strong class="calibre3">New Login</strong></span>. In the Login-New window, click <span class="strong"><strong class="calibre3">Search</strong></span>, enter <span class="strong"><strong class="calibre3">ASPNET</strong></span>, and then click <span class="strong"><strong class="calibre3">Check Names</strong></span>. The full username should automatically populate. Click <span class="strong"><strong class="calibre3">OK</strong></span> to exit the user search.</li><li class="listitem" value="11">Finally, while still in the User Properties window, select <span class="strong"><strong class="calibre3">User Mapping</strong></span>, select the check box next to <span class="strong"><strong class="calibre3">WebApp</strong></span>, select the <span class="strong"><strong class="calibre3">db_owner</strong></span> role membership, and then click <span class="strong"><strong class="calibre3">OK</strong></span>.</li></ol></div><p class="calibre2">That takes care of the entire configuration required on the SQL backend for the web application. Save and exit Management Studio.</p><p class="calibre2">All that remains is to create the website to interact with the database you created. Let’s do that now:</p><div class="book"><ol class="orderedlist" type="1"><li class="listitem" value="1">Download the vulnerable web application from <a class="xref" href="http://www.nostarch.com/metasploit.htm" target="_top">http://www.nostarch.com/metasploit.htm</a> and extract the contents of the archive to <span class="strong"><em class="calibre4">C:\Inetpub\wwwroot\</em></span>.</li><li class="listitem" value="2">Open your browser and point to <span class="strong"><em class="calibre4">http://&lt;youripaddress&gt;/Default.aspx</em></span>. You should see a log-in form, as shown in <a class="xref" href="part0022.html#sample_attack_website">Figure A-5</a>.</li><li class="listitem" value="3">Enter bogus credentials to verify that the SQL query is being executed properly. To test some basic SQL injection to identify whether the web application is functioning properly, enter a single quote (<strong class="calibre3"><code class="calibre6">'</code></strong>) in the username field, and enter anything as the password (doesn’t matter). The application should produce a yellow page with a SQL-related error.</li><li class="listitem" value="4">Click the back arrow on your browser and enter <span class="strong"><strong class="calibre3">OR 1=1--</strong></span> and something (doesn’t matter) in the password field. You should see a “You have successfully logged on” message.</li></ol></div><p class="calibre2">If you have gotten this far, everything is set up properly, and you are ready to plunge in.</p><div class="figure"><a id="sample_attack_website" class="strong"/><div class="book"><div class="book"><a id="I_mediaobject_d1e21041" class="strong"/><img src="../images/00067.jpeg" alt="Sample attack website" hisrc="httpatomoreillycomsourcenostarchimages867588.png.jpg" class="calibre7"/></div></div><div class="figure-title">Figure A-5. Sample attack website</div></div></div><div class="book"><div class="titlepage"><div class="book"><div class="book"><h3 class="title3" id="updating_back_pipe_track">Updating Back|Track</h3></div></div></div><p class="calibre2">As with any operating system, make sure you’re running the latest version of Back|Track and its tools. When logging into Back|Track (<span class="strong"><em class="calibre4">root</em></span>/<span class="strong"><em class="calibre4">toor</em></span>), issue the following commands:</p><a id="I_programlisting_d1e21057" class="strong"/><pre class="programlisting">root@bt:˜# <strong class="calibre3"><code class="calibre6">apt-get update &amp;&amp; apt-get upgrade &amp;&amp; apt-get dist-upgrade</code></strong></pre><p class="calibre2">This sequence of commands will select all available updates within Back|Track. After you have updated Back|Track by entering <strong class="calibre3"><code class="calibre6">y</code></strong> (for yes) when prompted to accept the SVN certificate, your system still needs some minor updates to Metasploit, Fast-Track, and the SET.<a id="IDX-APP-A-0140" class="strong"/><a id="IDX-APP-A-0141" class="strong"/><a id="IDX-APP-A-0142" class="strong"/><a id="IDX-APP-A-0143" class="strong"/><a id="IDX-APP-A-0144" class="strong"/></p><a id="I_programlisting_d1e21081" class="strong"/><pre class="programlisting"><img src="../images/00002.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867458.png" class="calibre7"/> root@bt:˜# <strong class="calibre3"><code class="calibre6">cd /opt/framework3/msf3</code></strong>/
<img src="../images/00004.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867462.png" class="calibre7"/> root@bt:/opt/framework3/msf3# <strong class="calibre3"><code class="calibre6">msfupdate</code></strong>

  <strong class="calibre3"><code class="calibre6">. . . SNIP . . .</code></strong>

  Updated to revision XXXX.
<img src="../images/00005.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867464.png" class="calibre7"/> root@bt:/opt/framework3/msf3# <strong class="calibre3"><code class="calibre6">cd /pentest/exploits/set/</code></strong>
  root@bt:/pentest/exploits/set# <strong class="calibre3"><code class="calibre6">svn update</code></strong>

  <strong class="calibre3"><code class="calibre6">. . . SNIP . . .</code></strong>

  Updated to revision XXXX.
<img src="../images/00006.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867466.png" class="calibre7"/> root@bt:/pentest/exploits/set# <strong class="calibre3"><code class="calibre6">cd /pentest/exploits/fasttrack/</code></strong>
  root@bt:/pentest/exploits/fasttrack# <strong class="calibre3"><code class="calibre6">svn update</code></strong>

  <strong class="calibre3"><code class="calibre6">. . . SNIP . . .</code></strong>

  At revision XXXX.
  root@bt:/pentest/exploits/fasttrack#</pre><p class="calibre2">In Back|Track, Metasploit is located at <span class="strong"><em class="calibre4">/opt/framework3/msf3/</em></span> <span class="inlinemediaobject"><a id="I_inlinemediaobject_d1e21140" class="strong"/><img src="../images/00002.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867458.png" class="calibre8"/></span>, so change to that directory prior to updating the Framework via subversion with <strong class="calibre3"><code class="calibre6">msfupdate</code></strong> <span class="inlinemediaobject"><a id="I_inlinemediaobject_d1e21149" class="strong"/><img src="../images/00004.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867462.png" class="calibre8"/></span>.</p><p class="calibre2">Once Metasploit is updated, change to <span class="strong"><em class="calibre4">/pentest/exploits/set</em></span><code class="literal">/</code> <span class="inlinemediaobject"><a id="I_inlinemediaobject_d1e21162" class="strong"/><img src="../images/00005.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867464.png" class="calibre8"/></span> and run <strong class="calibre3"><code class="calibre6">svn update</code></strong>. Lastly, change to <span class="strong"><em class="calibre4">/pentest/exploits/fasttrack</em></span><code class="literal">/</code> <span class="inlinemediaobject"><a id="I_inlinemediaobject_d1e21177" class="strong"/><img src="../images/00006.gif" alt="" hisrc="httpatomoreillycomsourcenostarchimages867466.png" class="calibre8"/></span> and update Fast-Track.</p><p class="calibre2">You have now created and updated the testing environment that you will use as you work through the examples in this book.</p></div></div></section></body></html>