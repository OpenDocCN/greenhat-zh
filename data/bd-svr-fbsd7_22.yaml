- en: Chapter 7\. CYRUS SASL 2.1.22
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 7 章\. Cyrus SASL 2.1.22
- en: '[HTTP://ASG.WEB.CMU.EDU/SASL](HTTP://ASG.WEB.CMU.EDU/SASL)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[CMU ASG SASL](HTTP://ASG.WEB.CMU.EDU/SASL)'
- en: 7.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1\. 摘要
- en: SASL (Simple Authentication and Security Layer) is a system for adding authentication
    support to connection-based protocols. For the purposes of this book, we will
    be using this mechanism for the Simple Mail Transfer Protocol (SMTP). The Postfix
    MTA employs SMTP to transfer Internet email. Adding authentication support to
    Postfix is important for users who wish to relay email through their server from
    an unsecured public network. A secure mail relay can be attained by coupling SASL
    with SSL/TLS-based encryption.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: SASL（简单认证和安全层）是一个用于向基于连接的协议添加认证支持的系统。在本书中，我们将使用此机制用于简单邮件传输协议（SMTP）。Postfix MTA
    使用 SMTP 传输互联网电子邮件。为 Postfix 添加认证支持对于希望从不受保护的网络发送电子邮件的用户来说很重要。通过将 SASL 与基于 SSL/TLS
    的加密结合使用，可以获得安全的邮件中继。
- en: By default, the Postfix MTA is not an open email relay. While this prevents
    unauthorized users from using the server to relay spam, it also prevents legitimate
    users from sending email from a location other than the local private network.
    Cyrus SASL allows the SMTP server to verify the identity of remote users. Once
    authenticated, users are allowed remote relay privileges.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Postfix MTA 不是一个开放的电子邮件中继。虽然这阻止了未经授权的用户使用服务器中继垃圾邮件，但也阻止了合法用户从除本地私有网络以外的位置发送电子邮件。Cyrus
    SASL 允许 SMTP 服务器验证远程用户的身份。一旦认证，用户将被允许远程中继权限。
- en: John Myers, a former systems architect at Carnegie Mellon University, published
    the SASL specification in October 1997\. Cyrus SASL is maintained under Project
    Cyrus at Carnegie Mellon.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 卡内基梅隆大学前系统架构师约翰·迈尔斯（John Myers）于 1997 年 10 月发布了 SASL 规范。Cyrus SASL 在卡内基梅隆的 Project
    Cyrus 下维护。
- en: 7.2\. RESOURCES
  id: totrans-6
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2\. 资源
- en: Official Cyrus SASL Website at Carnegie Mellon University
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 卡内基梅隆大学的官方 Cyrus SASL 网站
- en: '[http://asg.web.cmu.edu/sasl/](http://asg.web.cmu.edu/sasl/)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[CMU ASG SASL](http://asg.web.cmu.edu/sasl/)'
- en: 7.3\. REQUIRED
  id: totrans-9
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3\. 必需的
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![FreeBSD 7.0-RELEASE](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg)'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![更新后的端口集合](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 更新后的端口集合（参见
    "[FreeBSD 端口集合](freebsd_ports_collection.html#freebsd_ports_collection)"）'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '![互联网连接](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg)'
- en: 7.4\. PREPARATION
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4\. 准备
- en: Become the superuser.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: '* * *'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** This guide is relevant for the configuration of Cyrus SASL with
    the Postfix MTA, and it assumes that you intend to utilize SASL with SMTP coupled
    with SSL/TLS encryption to secure the PLAIN and/or LOGIN authentication methods.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 本指南适用于配置 Cyrus SASL 与 Postfix MTA，并假设您打算使用 SASL 与 SMTP 结合 SSL/TLS
    加密来保护 PLAIN 和/或 LOGIN 认证方法。'
- en: '* * *'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 7.5\. INSTALL
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.5\. 安装
- en: 'You will be installing the Cyrus SASL authentication server, which includes
    Cyrus SASL. To begin the installation of the Cyrus SASL authentication server,
    type the following commands:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 您将安装 Cyrus SASL 认证服务器，它包括 Cyrus SASL。要开始安装 Cyrus SASL 认证服务器，请输入以下命令：
- en: '[PRE0]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu should appear showing options for Cyrus SASL. We will leave these settings
    at their defaults, so press [tab] to highlight OK and then press [enter].
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 应该会出现一个菜单，显示 Cyrus SASL 的选项。我们将保留这些设置在默认值，因此按 [tab] 键高亮显示“确定”，然后按 [enter] 键。
- en: 7.6\. CONFIGURE
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.6\. 配置
- en: Once the installation process is complete, it's time to configure Cyrus SASL
    for use on your system.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候为您的系统配置 Cyrus SASL 了。
- en: 'Create a file named smtpd.conf. The smtpd.conf file is used by Cyrus SASL when
    it is configured to work with the Postfix MTA. Create the file:'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为 smtpd.conf 的文件。当 Cyrus SASL 配置为与 Postfix MTA 一起工作时，该文件被 Cyrus SASL 使用。创建文件：
- en: '[PRE1]'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'and add these two lines to it:'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并向其中添加以下两行：
- en: '[PRE2]'
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The first line directs Cyrus SASL to use the SASL authentication server that
    you installed. The second line tells Cyrus SASL to announce only PLAIN and LOGIN
    methods when a client initially connects to the SMTP server.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 第一行指示 Cyrus SASL 使用您已安装的 SASL 认证服务器。第二行告诉 Cyrus SASL 当客户端最初连接到 SMTP 服务器时，只宣布
    PLAIN 和 LOGIN 方法。
- en: Save and exit.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 7.7\. TESTING
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.7\. 测试
- en: In this section, we'll enable the SASL authentication server to start at boot
    time, then perform a test to confirm that it is running.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将启用SASL身份验证服务器在启动时启动，然后进行测试以确认其正在运行。
- en: 'To configure the SASL authentication server to start automatically at boot
    time, open rc.conf:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要配置SASL身份验证服务器在启动时自动启动，打开rc.conf文件：
- en: '[PRE3]'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'and add the following startup lines:'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下启动行：
- en: '[PRE4]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Save your changes and test by running the startup script:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的更改并通过运行启动脚本进行测试：
- en: '[PRE5]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'If the SASL authentications server is running, you''ll see:'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果SASL身份验证服务器正在运行，您将看到：
- en: '[PRE6]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The pid (process ID) will vary.
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 进程ID（PID）可能会有所不同。
- en: 7.8\. CONFIG FILES
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.8. 配置文件
- en: /usr/local/lib/sasl2/smtpd.conf
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/lib/sasl2/smtpd.conf
- en: This file controls the behavior of the SASL daemon when used with the Postfix
    MTA. It stores parameters that tell Cyrus SASL what method of authentication to
    announce to SMTP clients.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 此文件控制SASL守护进程在使用Postfix MTA时的行为。它存储了告诉Cyrus SASL向SMTP客户端宣布哪种身份验证方法的参数。
