- en: Part III-1. NAME SYSTEMS AND TCP/IP NAME REGISTRATION AND NAME RESOLUTION
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三部分-1. 命名系统与TCP/IP命名注册及名称解析
- en: TCP/IP APPLICATION LAYER PROTOCOLS
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: TCP/IP应用层协议
- en: 'The OSI Reference Model is used to describe the architecture of networking
    protocols and technologies and to show how they relate to one another. In the
    chapter describing OSI Reference Model concepts ([Chapter 5](ch05.html "Chapter 5. GENERAL
    OSI REFERENCE MODEL ISSUES AND CONCEPTS")), I mentioned that its seven layers
    could be organized into two layer groupings: the lower layers (1 through 4) and
    the upper layers (5 through 7). While there are certainly other ways to divide
    the layers, this split best reflects the different roles that the layers play
    in a network.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: OSI参考模型用于描述网络协议和技术的架构，并展示它们如何相互关联。在第5章（[第5章](ch05.html "第5章. 一般OSI参考模型问题和概念"））中描述OSI参考模型概念时，我提到其七个层次可以被组织成两组：底层（1至4层）和高层（5至7层）。虽然当然有其他划分层次的方法，但这种划分最能反映层次在网络中扮演的不同角色。
- en: The lower layers are concerned primarily with the mechanics of formatting, encoding,
    and sending data over a network. These layers involve software elements, but they
    are often closely associated with networking hardware devices. In contrast, the
    upper layers are concerned mainly with user interaction and the implementation
    of software applications, protocols, and services that let us actually use the
    network. These elements generally don't need to worry about details, relying on
    the lower layers to ensure that data gets to where it needs to go reliably.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 底层主要关注在网络上格式化、编码和发送数据的机制。这些层次涉及软件元素，但它们通常与网络硬件设备紧密相关。相比之下，高层主要关注用户交互和实现软件应用、协议和服务，使我们能够真正使用网络。这些元素通常不需要担心细节，依靠底层确保数据可靠地到达目的地。
- en: 'In this section, I describe the details of the many protocols and applications
    that occupy the upper layers in TCP/IP. The organization of this section is quite
    different from the previous section''s organization. Since the TCP/IP protocol
    suite uses an architecture that lumps all the higher layers together, even attempting
    to differentiate between these layers is not worthwhile. For these reasons, this
    section is divided by functions, rather than by layers. It contains ten parts:
    four that discuss application layer protocols that support the operation of TCP/IP,
    and six that discuss actual application protocols.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我描述了占据TCP/IP上层许多协议和应用的细节。本节的组织结构与上一节大不相同。由于TCP/IP协议族使用将所有高层合并在一起的架构，甚至尝试区分这些层也是不值得的。因此，本节按功能划分，而不是按层次划分。它包含十个部分：四个讨论支持TCP/IP操作的应用层协议，六个讨论实际的应用协议。
- en: 'The first part discusses naming systems, especially the TCP/IP Domain Name
    System (DNS). The second part overviews file and resource sharing protocols, with
    a focus on the Network File System (NFS). The third part covers TCP/IP host configuration
    and the host configuration protocols: the Boot Protocol (BOOTP) and the Dynamic
    Host Configuration Protocol (DHCP). The fourth part describes the TCP/IP network
    management framework, including the Simple Network Management Protocol (SNMP)
    and Remote Network Monitoring (RMON).'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 第一部分讨论命名系统，特别是TCP/IP域名系统（DNS）。第二部分概述文件和资源共享协议，重点关注网络文件系统（NFS）。第三部分涵盖TCP/IP主机配置和主机配置协议：引导协议（BOOTP）和动态主机配置协议（DHCP）。第四部分描述TCP/IP网络管理框架，包括简单网络管理协议（SNMP）和远程网络监控（RMON）。
- en: 'The fifth part introduces TCP/IP applications with a look at application layer
    addressing and an overview of file and message transfer applications. The sixth
    part covers the general file transfer protocols: the File Transfer Protocol (FTP)
    and the Trivial File Transfer Protocol (TFTP). The seventh part explains the many
    related protocols that together form TCP/IP''s electronic mail application. The
    eighth part covers the Web and the important Hypertext Transfer Protocol (HTTP).
    The ninth part describes Usenet (network news) and Gopher. Finally, the tenth
    part discusses interactive and administrative protocols.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 第五部分介绍了TCP/IP应用，包括对应用层寻址的探讨以及文件和消息传输应用的概述。第六部分涵盖了通用的文件传输协议：文件传输协议（FTP）和简单文件传输协议（TFTP）。第七部分解释了构成TCP/IP电子邮件应用的许多相关协议。第八部分涵盖了万维网和重要的超文本传输协议（HTTP）。第九部分描述了Usenet（网络新闻）和Gopher。最后，第十部分讨论了交互式和管理协议。
- en: '[Chapter 50](ch50.html "Chapter 50. NAME SYSTEM ISSUES, CONCEPTS, AND TECHNIQUES")'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[第50章](ch50.html "第50章。名称系统问题、概念和技术")'
- en: '[Chapter 51](ch51.html "Chapter 51. TCP/IP NAME SYSTEMS OVERVIEW AND THE HOST
    TABLE NAME SYSTEM")'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[第51章](ch51.html "第51章。TCP/IP名称系统概述和主机表名称系统")'
- en: '[Chapter 52](ch52.html "Chapter 52. DOMAIN NAME SYSTEM (DNS) OVERVIEW, FUNCTIONS,
    AND CHARACTERISTICS")'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第52章](ch52.html "第52章。域名系统（DNS）概述、功能和特性")'
- en: '[Chapter 53](ch53.html "Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY")'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第53章](ch53.html "第53章。DNS名称空间、架构和术语")'
- en: '[Chapter 54](ch54.html "Chapter 54. DNS NAME REGISTRATION, PUBLIC ADMINISTRATION,
    ZONES, AND AUTHORITIES")'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第54章](ch54.html "第54章。DNS名称注册、公共管理、区域和权限")'
- en: '[Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER CONCEPTS AND OPERATION")'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第55章](ch55.html "第55章。DNS名称服务器概念和操作")'
- en: '[Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION CONCEPTS AND RESOLVER OPERATIONS")'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第56章](ch56.html "第56章。DNS解析概念和解析器操作")'
- en: '[Chapter 57](ch57.html "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD,
    AND MASTER FILE FORMATS")'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第57章](ch57.html "第57章。DNS消息和消息、资源记录和主文件格式")'
- en: Humans and computers first started dealing with each other several decades ago.
    The relationship between man (and woman!) and machine has been a pretty good one
    overall, and this is reflected in the fact that while computers were once just
    the province of techies, they are now *mainstream*. However, there are areas where
    humans and computers simply don't see eye to eye. One of these is in the way that
    we deal with information.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 人类和计算机在几十年前开始相互打交道。总的来说，人类（和女性！）与机器的关系相当不错，这反映在计算机曾经只是技术人员的领域，而现在已经成为*主流*的事实上。然而，有些领域人类和计算机根本无法达成共识。其中之一就是我们处理信息的方式。
- en: Computers work best with numbers, while most people prefer not to work with
    numbers. This fundamental difference represented a problem for the designers of
    networking technology. It made sense from a technical standpoint to design addressing
    schemes for networks and internetworks using simple numeric identifiers, for simplicity
    and efficiency. Unfortunately, identifying computers using numeric addresses is
    cumbersome for people and becomes more so as the number of devices on a network
    increases. To solve this problem, the techies went to work and came up with *name
    systems* for networks. These mechanisms allow computers to continue to use simple,
    efficient numeric addresses, while letting humans specify names to identify network
    devices.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 计算机最适合处理数字，而大多数人更喜欢不处理数字。这种根本性的差异给网络技术的设计者带来了问题。从技术角度来看，使用简单的数字标识符设计网络和互联网的寻址方案是合理的，因为这样可以简化并提高效率。不幸的是，使用数字地址来识别计算机对人类来说很麻烦，随着网络设备数量的增加，这种情况变得更加麻烦。为了解决这个问题，技术人员开始努力工作，并为网络发明了*名称系统*。这些机制允许计算机继续使用简单、高效的数字地址，同时让人类指定名称来识别网络设备。
- en: This part includes eight chapters that explain both the theory and practice
    behind networking name systems. The first chapter describes the motivation for
    name systems and the important concepts and techniques behind how they work. The
    second chapter provides an introduction to name systems on TCP/IP and a brief
    description of the simple host table name system.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分包括八个章节，解释了网络名称系统背后的理论和实践。第一章描述了名称系统的动机以及它们工作背后的重要概念和技术。第二章介绍了TCP/IP上的名称系统，并对简单的主机表名称系统进行了简要描述。
- en: The remaining chapters describe the very important Domain Name System (DNS).
    The third chapter provides an overview of DNS, including a description of its
    characteristics and components. The fourth chapter discusses the DNS name space
    and architecture, and the fifth chapter covers the DNS name registration process,
    including hierarchical authorities and administration. The sixth chapter describes
    DNS name servers and how they represent, manage, and provide data when resolution
    is invoked. The seventh chapter describes DNS clients, called *resolvers*, how
    they initiate resolution, and the steps involved in the resolution process. Finally,
    the eighth chapter ties together the information about name servers and resolvers
    by providing a look at message exchange between these units, and describing the
    formats of messages, resource records, and DNS master files. This chapter includes
    a brief look at the changes made to DNS to support the new version 6 of the Internet
    Protocol (IPv6) and its much longer addresses.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 剩余章节详细介绍了非常重要的域名系统（DNS）。第三章提供了DNS的概述，包括对其特性和组件的描述。第四章讨论了DNS命名空间和架构，第五章涵盖了DNS名称注册过程，包括分层权限和管理。第六章描述了DNS名称服务器以及它们在解析调用时如何表示、管理和提供数据。第七章描述了DNS客户端，称为*解析器*，它们如何启动解析以及解析过程中涉及的步骤。最后，第八章通过查看这些单元之间的消息交换，并描述消息、资源记录和DNS主文件的格式，将有关名称服务器和解析器的信息联系起来。本章还简要介绍了对DNS所做的更改，以支持互联网协议（IPv6）的新版本及其更长的地址。
- en: Note that even though the abbreviation *DNS* usually stands for *Domain Name
    System*, you will also sometimes see the *S* stand for other words, especially
    *Service* or *Server*. Also, some documents refer to this name system as *the
    DNS*. Most people just say *DNS*, without the definite article, and that's the
    convention I follow here as well.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，尽管缩写*DNS*通常代表*域名系统*，但你有时也会看到*S*代表其他单词，特别是*服务*或*服务器*。此外，一些文档将这个名称系统称为*the
    DNS*。大多数人只是说*DNS*，不带定冠词，这也是我在这里遵循的惯例。
- en: A set of related TCP/IP utilities called *nslookup, host*, and *dig* can be
    used by an administrator to query DNS name servers for information. They are useful
    for a variety of purposes, including manually determining the IP address of a
    host, checking for specific resource records maintained for a DNS name, and verifying
    the name resolution function. You can find more information about these utilities
    in [Part III-10](pt21.html "Part III-10. INTERACTIVE AND ADMINISTRATIVE UTILITIES
    AND PROTOCOLS").
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 一组相关的TCP/IP实用工具，称为*nslookup、host*和*dig*，可以被管理员用来查询DNS名称服务器以获取信息。它们用于各种目的，包括手动确定主机的IP地址、检查为DNS名称维护的特定资源记录，以及验证名称解析功能。你可以在[第三部分-10](pt21.html
    "第三部分-10.交互式和行政工具与协议")中找到更多关于这些实用工具的信息。
- en: Chapter 50. NAME SYSTEM ISSUES, CONCEPTS, AND TECHNIQUES
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第50章 名称系统问题、概念和技术
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: Name systems can be considered as the diplomats of the networking protocol stack.
    Just as a political diplomat is skilled at speaking multiple languages and ensuring
    good communications between those who may view the world in different ways, name
    systems bridge the gulf between the numeric addresses that computers like to use
    and the simpler names that humans prefer.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 可以将名称系统视为网络协议栈的使节。正如政治使节擅长使用多种语言并确保那些可能以不同方式看待世界的人之间良好沟通一样，名称系统弥合了计算机喜欢使用的数字地址和人类更偏好的简单名称之间的鸿沟。
- en: Before looking at specific name systems, it makes sense to discuss them generally.
    This will help you to understand the reasons why these systems are important and
    the concepts that underlie all name systems, regardless of their specific implementation.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在查看具体的名称系统之前，讨论它们的一般性是有意义的。这将帮助你理解为什么这些系统很重要，以及所有名称系统（无论其具体实现如何）背后的概念。
- en: 'I begin this chapter with an overview of name systems and a discussion of why
    they were created. I then discuss the three main functions of a name system: the
    name space, name registration, and name resolution. I then expand on this functional
    overview, illustrating how name spaces and architectures work, the issues behind
    name registration and administration, and finally, name resolution techniques
    and the practical issues in the resolution process.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我以对名称系统的概述和讨论其为何被创造开始本章。然后，我讨论名称系统的三个主要功能：名称空间、名称注册和名称解析。接着，我扩展了这个功能概述，说明了名称空间和架构是如何工作的，名称注册和管理背后的问题，以及最后，名称解析技术和解析过程中的实际问题。
- en: This chapter provides an introduction to name systems and doesn't discuss specific
    name systems. I like to use examples to explain concepts and, for this purpose,
    do make reference to the TCP/IP Domain Name System (DNS) at times. However, you
    do not need to be familiar with DNS to follow this chapter.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了名称系统，但不讨论具体的名称系统。我喜欢用例子来解释概念，为此，有时会提到TCP/IP域名系统（DNS）。然而，你不需要熟悉DNS就能理解本章内容。
- en: Name System Overview
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 名称系统概述
- en: One of several important differences between humans and computers is how we
    prefer to deal with information. Computers work with numbers, while very few humans
    like to do so. This distinction becomes particularly important when we look at
    how identifiers, or addresses, are assigned to network devices.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 人类与计算机之间几个重要差异之一是我们处理信息的方式。计算机处理数字，而很少有人喜欢这样做。当我们观察标识符或地址如何分配给网络设备时，这种区别变得尤为重要。
- en: Symbolic Names for Addressing
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用于寻址的符号名称
- en: To a computer, there is no problem with simply giving a number to each device
    on the network and using those numbers to move information around. Your computer
    would be perfectly happy if you assigned a number like 341,481,178,295 to it and
    all the other machines on your network, and then issued commands such as, "Send
    this file to machine 56,712,489,901." However, most humans don't want to use a
    network in this manner. These long, cryptic numbers don't mean anything to them.
    They want to tell their machine, "Send this file to Joe's computer," or "Print
    this on the color laser in the Sales department," or "Check the latest headlines
    on CNN's website."
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 对于计算机来说，给网络上的每个设备分配一个数字并使用这些数字来移动信息没有任何问题。如果你的电脑被分配了一个像341,481,178,295这样的数字，并且你网络上的所有其他机器也是如此，那么你的电脑会非常高兴。你可以发出这样的命令：“将这个文件发送到机器56,712,489,901。”然而，大多数人不想以这种方式使用网络。这些长而神秘的数字对他们来说没有任何意义。他们希望告诉他们的机器：“将这个文件发送到乔的电脑上，”或者“在销售部门的彩色激光打印机上打印这个文件，”或者“检查CNN网站上最新的头条新闻。”
- en: This difference led to the development of *name systems*. These technologies
    allow computers on a network to be given both a conventional numeric address and
    a more user-friendly, human-readable name, composed of letters, numbers, and other
    special symbols. Sometimes called a *symbolic name*, this can be used as an alternative
    form of addressing for devices. The name system takes care of the functions necessary
    to manage this system, including ensuring that names are unique, translating from
    names to numbers, and managing the list of names and numbers.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这种差异导致了名称系统的开发。这些技术允许网络上的计算机同时拥有一个传统的数字地址和一个更用户友好、人类可读的名称，由字母、数字和其他特殊符号组成。有时被称为“符号名称”，这可以作为设备寻址的替代形式。名称系统负责管理此系统的必要功能，包括确保名称唯一性、从名称到数字的转换以及管理名称和数字列表。
- en: 'A Paradox: Name Systems Are Both Essential and Unnecessary'
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 悖论：名称系统既是必需的又是非必需的
- en: What's interesting about name systems is that they are extremely important to
    networks, but at the same time, they often aren't strictly necessary for a network
    to operate. This seeming paradox is due again to the difference between humans
    and computers. Computers need only the numeric addressing scheme, not the names
    assigned to them. So, without name systems, the computers and the network can
    still work, but it will be much harder for people to use them!
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 名称系统有趣的地方在于，它们对网络来说极其重要，但与此同时，它们对于网络的运行往往并不是严格必要的。这种看似矛盾的悖论再次源于人类与计算机之间的差异。计算机只需要数字寻址方案，而不需要分配给它们的名称。因此，没有名称系统，计算机和网络仍然可以工作，但人们使用它们会变得非常困难！
- en: An example of this can most readily be seen when a problem disables the operation
    of a part of DNS used to provide naming services on the Internet. Technically,
    DNS isn't needed to use most parts of the Internet, because all communications
    use IP addresses. This means that even though you might normally access CNN's
    website at [www.cnn.com](http://www.cnn.com), you could instead just use the IP
    address 64.236.16.20.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况的例子最容易被看到，当一个问题使提供互联网命名服务的DNS的一部分无法运行时。技术上讲，使用互联网的大部分内容并不需要DNS，因为所有通信都使用IP地址。这意味着尽管你通常可以通过[www.cnn.com](http://www.cnn.com)访问CNN的网站，但你也可以只使用IP地址64.236.16.20。
- en: The problem is that prior to reading this, you probably had no idea what the
    IP address of CNN's website is, and that's true of almost everyone else who uses
    the site as well. Also, you might want to check not just CNN's website, but perhaps
    1, 2, or 20 other news sites. It would be difficult to remember the numbers for
    even a small percentage of the thousands of different websites on the Internet,
    so each time you wanted to access a resource, you would need to manually look
    up its address, as shown in [Figure 50-1](ch50.html#internetwork_access_without_a_name_syste
    "Figure 50-1. Internetwork access without a name system When there is no name
    system, a user must know the address of any device he or she wishes to access
    on the internetwork. Since most of us have limited memories for numbers, this
    means each access must be preceded by an inefficient, tedious, manual address
    lookup.").
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 问题在于，在阅读这篇文章之前，你可能不知道CNN网站的IP地址，对其他使用该网站的几乎每个人来说也是如此。此外，你可能还想检查的不仅仅是CNN网站，可能是1、2或20个其他新闻网站。记住互联网上成千上万个不同网站中的数字对即使是少数人来说也是困难的，所以每次你想访问资源时，你都需要手动查找其地址，如图[图50-1](ch50.html#internetwork_access_without_a_name_syste
    "图50-1. 无命名系统时的互联网访问 当没有命名系统时，用户必须知道他们想要在互联网上访问的任何设备的地址。由于我们大多数人的数字记忆有限，这意味着每次访问之前都必须进行低效、繁琐的手动地址查找。")所示。
- en: '![Internetwork access without a name system When there is no name system, a
    user must know the address of any device he or she wishes to access on the internetwork.
    Since most of us have limited memories for numbers, this means each access must
    be preceded by an inefficient, tedious, manual address lookup.](httpatomoreillycomsourcenostarchimages288143.png.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![无命名系统时的互联网访问 当没有命名系统时，用户必须知道他们想要在互联网上访问的任何设备的地址。由于我们大多数人的数字记忆有限，这意味着每次访问之前都必须进行低效、繁琐的手动地址查找。](httpatomoreillycomsourcenostarchimages288143.png.jpg)'
- en: Figure 50-1. Internetwork access without a name system When there is no name
    system, a user must know the address of any device he or she wishes to access
    on the internetwork. Since most of us have limited memories for numbers, this
    means each access must be preceded by an inefficient, tedious, manual address
    lookup.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图50-1. 无命名系统时的互联网访问 当没有命名系统时，用户必须知道他们想要在互联网上访问的任何设备的地址。由于我们大多数人的数字记忆有限，这意味着每次访问之前都必须进行低效、繁琐的手动地址查找。
- en: In contrast, it's much easier to remember the names of resources. With a name
    system, you just enter the name of a device, and the name system converts it to
    an address, as shown in [Figure 50-2](ch50.html#internetwork_access_with_a_name_system
    "Figure 50-2. Internetwork access with a name system"). This is why name systems
    are so important, even if they aren't needed by the networking technologies themselves.
    In fact, the reliance on name systems like DNS is so significant that many people
    don't even realize they can enter IP addresses into their web browsers!
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，记住资源的名称要容易得多。有了命名系统，你只需输入设备的名称，命名系统就会将其转换为地址，如图[图50-2](ch50.html#internetwork_access_with_a_name_system
    "图50-2. 使用命名系统的互联网访问")所示。这就是为什么即使网络技术本身不需要，命名系统仍然如此重要的原因。事实上，对像DNS这样的命名系统的依赖如此之大，以至于许多人甚至没有意识到他们可以在他们的网络浏览器中输入IP地址！
- en: '![Internetwork access with a name system](httpatomoreillycomsourcenostarchimages288145.png.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![使用命名系统的互联网访问](httpatomoreillycomsourcenostarchimages288145.png.jpg)'
- en: Figure 50-2. Internetwork access with a name system
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 图50-2. 使用命名系统的互联网访问
- en: When an internetwork is equipped with a name system, the user no longer needs
    to know the address of a device to access it. He or she enters the name, and the
    name system converts it into an address automatically, like a computerized Rolodex,
    as shown here. The name system then passes the address to the client software,
    which uses that address to access the requested resource as if the user had entered
    it directly.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个互联网配备了一个命名系统时，用户不再需要知道设备的地址来访问它。他或她输入名称，命名系统会自动将其转换为地址，就像一个计算机化的旋转索引卡，如下所示。然后命名系统将地址传递给客户端软件，该软件使用该地址来访问请求的资源，就像用户直接输入它一样。
- en: Factors That Determine the Necessity of a Name System
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 决定命名系统必要性的因素
- en: 'More generally, the importance of a name system depends greatly on the characteristics
    of the network where it is used. The following are the three main issues in determining
    the need for a name system:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 更普遍地说，命名系统的重要性在很大程度上取决于它所使用的网络的特征。以下是在确定命名系统需求时需要考虑的三个主要问题：
- en: '**Network Size** With a really small network and only a handful of computers,
    having human users remember the numeric addresses for these machines is at least
    feasible, if not ideal. For example, a small home network with two or three machines
    doesn''t really *need* a name system, in theory. If you have thousands or millions
    of devices, however, the name system becomes essential.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**网络规模** 在一个非常小的网络和只有几台计算机的情况下，让人类用户记住这些机器的数字地址至少是可行的，如果不是理想的话。例如，一个有两三台机器的小型家庭网络在理论上并不真的*需要*一个命名系统。然而，如果你有成千上万或数百万的设备，命名系统就变得至关重要了。'
- en: '**Address Size and Complexity** The more complex the numeric addressing scheme,
    or the larger the numbers used, the more difficult it is for humans to remember
    the numbers. This makes having a name system all the more essential for the users
    of those addresses.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '**地址大小和复杂性** 数字地址方案越复杂，或使用的数字越大，人类记住这些数字就越困难。这使得对于这些地址的用户来说，拥有一个命名系统变得尤为重要。'
- en: '**User Base Size and Skill** In the early days of networks, a small number
    of highly skilled and well-trained engineers used them, and these people sometimes
    just memorized the numbers of the machines they worked with every day. In modern
    networks with thousands or millions of regular users, expecting the average person
    to remember device numbers is not reasonable.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**用户基础规模和技能** 在网络早期，只有少数技术精湛且受过良好训练的工程师使用它们，这些人有时只是记住了他们每天使用的机器的数字。在拥有成千上万或数百万普通用户的现代网络中，期望普通人记住设备号码是不合理的。'
- en: Tip
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Networking name systems are important because they allow devices
    to be assigned efficient numeric addresses, while still enabling humans to access
    them using names that are easier to remember. Name systems become more important
    as you increase the size of the network, the address, or the user base. They are
    also more essential when the user base is limited in skill or experience.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 网络命名系统之所以重要，是因为它们允许设备被分配有效的数字地址，同时仍然允许人类使用更容易记住的名称来访问它们。随着网络规模、地址或用户基础的增大，命名系统变得更加重要。当用户基础在技能或经验方面有限时，它们也变得更加必要。'
- en: Looking at these issues, we can see that the trends in today's networks are
    all in the direction of increasing the importance of name systems. Our networks,
    both private and public, are growing larger, and we have more people using them,
    including more people without a technical background. We are also increasingly
    moving from small addresses to larger ones. The best example of this is the upcoming
    change to IP. While DNS is important for the 32-bit addresses used in IPv4, it's
    even *more* important for dealing with the enormous 128-bit addresses of IPv6
    (see [Part II-4](pt07.html "Part II-4. INTERNET PROTOCOL VERSION 6 (IPV6)")).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 观察这些问题，我们可以看到，当今网络的趋势都是朝着增加命名系统重要性的方向发展。我们的网络，无论是私有的还是公共的，都在不断增长，使用它们的人数也在增加，包括更多没有技术背景的人。我们也在从小的地址转向更大的地址。最好的例子是即将到来的IP变化。虽然DNS对于IPv4中使用的32位地址很重要，但它对于处理IPv6的巨大128位地址来说甚至*更重要*（见[第二部分-4](pt07.html
    "第二部分-4. 互联网协议版本6 (IPv6)")）。
- en: 'Basic Name System Functions: Name Space, Name Registration, and Name Resolution'
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基本命名系统功能：命名空间、名称注册和名称解析
- en: 'While the difference between numeric addresses and symbolic names is very significant
    to the users of network devices, it''s important to remember that both numbers
    and names really serve the same basic purpose: *device identification*. Even when
    we use a name system to make devices easier to access, the computers themselves
    will still normally need to use the underlying numeric identifier. In essence,
    every device will end up with (at least) two identifiers: a number *and* a name.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然数字地址和符号名称之间的差异对网络设备的用户来说非常显著，但重要的是要记住，数字和名称实际上都服务于相同的基本目的：*设备识别*。即使我们使用名称系统使设备更容易访问，计算机本身仍然通常需要使用底层的数字标识符。本质上，每个设备最终都会拥有（至少）两个标识符：一个数字
    *和一个名称*。
- en: The fact that devices end up with multiple identifiers is what allows both people
    and their machines to use the method of identification they prefer. However, it
    means that there must be ways of managing the assignment of names to devices and
    converting between them. A name system involves more than just slapping names
    on computers. It must be a complete *system* that allows names to be used by the
    humans while numbers continue to be used by the devices.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 设备最终拥有多个标识符的事实使得人们和他们的机器可以使用他们偏好的识别方法。然而，这意味着必须有一种管理名称分配和它们之间转换的方法。名称系统不仅涉及在计算机上贴上名称，而必须是一个完整的
    *系统*，允许人类使用名称，而设备继续使用数字标识符。
- en: 'At the highest level, a name system must handle three basic functions:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在最高层次上，名称系统必须处理三个基本功能：
- en: '**Name Space Definition** The name system defines a *name space* for the networking
    system on which it runs. The name space, also sometimes called a *name architecture*,
    describes the rules for how names are structured and used. It also defines how
    the name of one device is related to the names of other devices in the system
    and how to ensure that there are no invalid names that would cause problems with
    the system as a whole.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**命名空间定义** 命名系统为它运行的联网系统定义了一个 *命名空间*。命名空间，有时也称为 *命名架构*，描述了命名结构和使用规则。它还定义了单个设备名称与系统中其他设备名称之间的关系，以及如何确保没有无效的名称会导致整个系统出现问题。'
- en: '**Name Registration** To implement the name system, a name must be assigned
    to each device on the network. Like any addressing system, a name system cannot
    work properly unless every name on the system is unique. We need some way of managing
    how the names are assigned so the result is sensible. The process of linking specific
    names to particular devices is usually called *name registration*.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**名称注册** 为了实现名称系统，必须为网络上的每个设备分配一个名称。像任何寻址系统一样，除非系统中的每个名称都是唯一的，否则名称系统无法正常工作。我们需要某种方式来管理名称的分配，以便结果是有意义的。将特定名称与特定设备链接的过程通常称为
    *名称注册*。'
- en: '**Name Resolution** Even though humans like symbolic names, computers usually
    have little use for them. It is necessary to define a mechanism by which a device''s
    symbolic name can be translated into its numeric address. This process is usually
    called *name resolution*.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**名称解析** 尽管人类喜欢符号名称，但计算机通常对它们用处不大。有必要定义一种机制，通过该机制可以将设备的符号名称转换为它的数字地址。这个过程通常称为
    *名称解析*。'
- en: The name space is more of a descriptive function, which defines how names work
    in the system. Name registration and resolution are more active functions, with
    each name system including one or more specific procedures for how these jobs
    are carried out. Name registration and resolution are in some ways complements
    of each other, so certain registration techniques are most often associated with
    particular resolution methods. In turn, the types of registration and resolution
    methods that are possible depend on the name space, and in particular, its architecture.
    These relationships are shown in simplified form in [Figure 50-3](ch50.html#name_system_functions
    "Figure 50-3. Name system functions").
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 命名空间更多的是一种描述性功能，它定义了系统中的命名是如何工作的。名称注册和解析是更主动的功能，每个名称系统都包括一个或多个特定程序，用于执行这些任务。在某种程度上，名称注册和解析是相互补充的，因此某些注册技术通常与特定的解析方法相关联。反过来，可能的注册和解析方法的类型取决于命名空间，特别是其架构。这些关系以简化的形式在[图50-3](ch50.html#name_system_functions
    "图50-3. 命名系统功能")中展示。
- en: '![Name system functions](httpatomoreillycomsourcenostarchimages288147.png.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![命名系统功能](httpatomoreillycomsourcenostarchimages288147.png.jpg)'
- en: Figure 50-3. Name system functions
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图50-3. 命名系统功能
- en: This diagram shows the relationships between the three main functions of a name
    system. The *name space* defines the structure of the name system and the rules
    for creating names. The name space is used as the basis for the *name registration*
    method, which defines the mappings between names and addresses. When a user wants
    to access a device by name, a *name resolution* method is used to consult the
    name space, determine what address is associated with a name, and then convert
    the name to an address. The processes of registration and resolution can be either
    quite plain or fairly complicated, depending on the type of name system used.
    Simple name systems are largely manual in operation, easy to understand, and best
    used in smaller networks. Larger, more complex networks and internetworks require
    more sophisticated methods of registration and resolution, which involve less
    administrator intervention and *scale* better as new machines are added to the
    network.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 此图显示了名称系统三个主要功能之间的关系。名称空间定义了名称系统的结构和创建名称的规则。名称空间用作名称注册方法的依据，该方法定义了名称和地址之间的映射。当用户想要通过名称访问设备时，使用名称解析方法来咨询名称空间，确定与名称关联的地址，然后将名称转换为地址。注册和解析的过程可能非常简单，也可能相当复杂，这取决于所使用的名称系统类型。简单的名称系统在操作上主要手动进行，易于理解，最适合用于较小的网络。较大的、更复杂的网络和互联网需要更复杂的注册和解析方法，这些方法涉及较少的管理员干预，并且随着网络中新机器的增加而更好地扩展。
- en: Although name registration and name resolution work as functions at the highest
    level, they are probably better thought of as *sets* of functions. Name registration
    is necessarily tied to issues such as name system administration and management,
    and understanding resolution requires that we look at a number of important implementation
    issues in the areas of efficiency and reliability. The rest of this chapter expands
    on this overview by considering each of these three functions in more detail.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然名称注册和名称解析在最高级别上作为功能工作，但它们可能更好地被视为功能的集合。名称注册必然与名称系统管理和维护等问题相关联，而理解解析需要我们查看效率性和可靠性领域的一些重要实现问题。本章的其余部分通过更详细地考虑这三个功能中的每一个来扩展这个概述。
- en: Tip
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**KEY CONCEPT** A name system consists of three theoretical high-level functions:
    the *name space*, which describes how names are created and organized; the *name
    registration* technique, which is used to set up relationships between names and
    addresses; and the *name resolution* method, which is responsible for translating
    names to addresses.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 名称系统由三个理论上的高级功能组成：名称空间，它描述了名称的创建和组织方式；名称注册技术，它用于建立名称和地址之间的关系；以及名称解析方法，它负责将名称转换为地址。'
- en: Name Spaces and Name Architectures
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 名称空间和名称架构
- en: The main idea of a name system is to provide a way to identify devices using
    symbolic names. Like any identification mechanism, before it can be used, we must
    define the way that identification will be performed. Numeric addressing schemes
    (like IP addresses) have rules for how addresses are created and assign addresses
    to each device from their *address space*. In a similar way, devices in a name
    system are given names from the system's *name space*.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 名称系统的核心思想是提供一种使用符号名称识别设备的方法。像任何识别机制一样，在可以使用之前，我们必须定义识别将如何执行的方式。数字寻址方案（如IP地址）有关于地址创建的规则，并将地址分配给每个设备，这些地址来自它们的地址空间。以类似的方式，名称系统中的设备从系统的名称空间中获得名称。
- en: Name Space Functions
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称空间功能
- en: 'Of the three main components of a name system, the name space is the most abstract.
    It is also the most fundamental part of the system, since it actually describes
    how the names are created. There are several aspects to what the name space defines
    in a name system:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在名称系统的三个主要组成部分中，名称空间是最抽象的。它也是系统最基本的部分，因为它实际上描述了名称是如何创建的。名称空间在名称系统中定义了几个方面：
- en: '**Name Size and Maximum Number of Names** The name space specifies the number
    of characters (symbols) that compose names. It also defines the maximum number
    of names that can appear in the system.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '**名称大小和最大名称数量** 名称空间指定了组成名称的字符（符号）数量。它还定义了系统中可以出现的最大名称数量。'
- en: '**Name Rules and Syntax** The name space specifies which characters and symbols
    are allowed in a name. This is used to allow legal names to be chosen for all
    devices, while avoiding illegal names.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '**名称规则和语法** 名称空间指定了在名称中允许使用的字符和符号。这用于允许为所有设备选择合法的名称，同时避免非法名称。'
- en: '**Name Architecture and Semantics** Each name space uses a specific *architecture*
    or *structure*, which describes how names are constructed and interpreted.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**命名架构和语义** 每个命名空间使用特定的架构或结构，这描述了名称是如何构建和解释的。'
- en: The concepts of name size and name syntax are relatively straightforward. The
    *name architecture* is probably the most important differentiating characteristic
    of name systems. For this reason, name spaces are sometimes even *called* name
    architectures. The architecture of the name space determines whether names are
    assigned and used as a simple unstructured set of symbols or have a more complex
    internal structure. In the latter case, the name space also must define how elements
    of a particular name are related to each other.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 名称大小和名称语法的概念相对简单。名称架构可能是名称系统最重要的区分特征。因此，命名空间有时甚至被称为名称架构。名称空间的架构决定了名称是否被分配和使用为简单的无结构符号集，或者具有更复杂的内部结构。在后一种情况下，名称空间还必须定义特定名称的元素之间是如何相互关联的。
- en: 'Theoretically, many different name architectures are possible. In practice,
    most fall into one of two categories: flat and hierarchical.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 理论上，可能存在许多不同的命名架构。在实践中，大多数可以分为两类：平面和层次。
- en: Flat Name Architecture (Flat Name Space)
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 平面命名架构（平面命名空间）
- en: In a *flat name architecture*, names are assigned as a sequence of symbols that
    are interpreted as a single, whole label without any internal structure. There
    is no clear relationship between any name and any other name.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在平面命名架构中，名称被分配为一系列符号，这些符号被解释为一个单一的、整体的标签，没有任何内部结构。任何名称与其他名称之间没有明确的关系。
- en: An example of this sort of architecture would be a name system where computers
    are given unstructured names like Engineering Workstation 1 or Joanne's PC, as
    shown in the example in [Figure 50-4](ch50s02.html#flat_name_architecture_flat_name_s-id001
    "Figure 50-4. Flat name architecture (flat name space) This diagram shows an example
    of a flat name architecture. There is no structure that organizes the names or
    dictates how they must be constructed. Logically, each device is a peer of each
    of the others.").
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这种架构的一个例子是，计算机被分配无结构的名称，如工程工作站1或乔安妮的PC，如[图50-4](ch50s02.html#flat_name_architecture_flat_name_s-id001
    "图50-4. 平面命名架构（平面命名空间）此图展示了平面命名架构的一个示例。没有结构来组织名称或规定它们必须如何构建。逻辑上，每个设备都是其他每个设备的对等体。")中的示例所示。
- en: '![Flat name architecture (flat name space) This diagram shows an example of
    a flat name architecture. There is no structure that organizes the names or dictates
    how they must be constructed. Logically, each device is a peer of each of the
    others.](httpatomoreillycomsourcenostarchimages288149.png.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![平面命名架构（平面命名空间）此图展示了平面命名架构的一个示例。没有结构来组织名称或规定它们必须如何构建。逻辑上，每个设备都是其他每个设备的对等体。](httpatomoreillycomsourcenostarchimages288149.png.jpg)'
- en: Figure 50-4. Flat name architecture (flat name space) This diagram shows an
    example of a flat name architecture. There is no structure that organizes the
    names or dictates how they must be constructed. Logically, each device is a peer
    of each of the others.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图50-4. 平面命名架构（平面命名空间）此图展示了平面命名架构的一个示例。没有结构来组织名称或规定它们必须如何构建。逻辑上，每个设备都是其他每个设备的对等体。
- en: Hierarchical Name Architecture (Structured Name Space)
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 层次命名架构（结构化命名空间）
- en: In a *hierarchical name architecture*, or structured name space, the names are
    a sequence of symbols, but these symbols are assigned using a specific and clear
    structure. Each name consists of discrete elements that are related to each other,
    usually by using hierarchical parent/child semantics. There are many naming architectures
    in various contexts that use this type of hierarchical structure. For example,
    consider how a large company might set up an organization chart and name the executives
    and officers in the organization. One hypothetical example of a hierarchical name
    architecture is illustrated in [Figure 50-5](ch50s02.html#hierarchical_name_architecture_str-id001
    "Figure 50-5. Hierarchical name architecture (structured name space)").
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在层次命名架构或结构化命名空间中，名称是一系列符号，但这些符号使用特定的和清晰的架构进行分配。每个名称由相互关联的离散元素组成，通常通过使用层次父子语义。在许多不同环境中，有许多使用这种类型层次结构的命名架构。例如，考虑一个大公司如何设置组织结构图并命名组织中的高管和官员。一个假设的层次命名架构示例如图[图50-5](ch50s02.html#hierarchical_name_architecture_str-id001
    "图50-5. 层次命名架构（结构化命名空间")所示。
- en: The best-known real-world example of a hierarchical name space is the name space
    of DNS (see [Chapter 53](ch53.html "Chapter 53. DNS NAME SPACE, ARCHITECTURE,
    AND TERMINOLOGY")), which uses text labels separated by periods (or *dots*) to
    form an internal structure. All the names in the system are organized into a structure,
    and a particular device's place in the structure can be determined by looking
    at its name. For example, [www.tcpipguide.com](http://www.tcpipguide.com) refers
    to the World Wide Web server for *The TCP/IP Guide*, which is named under the
    umbrella of commercial (.com) companies.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 分层名称空间最著名的现实世界例子是DNS（名称空间）的名称空间（见[第53章](ch53.html "第53章. DNS名称空间、架构和术语"))，它使用由点（或*点*）分隔的文本标签来形成内部结构。系统中的所有名称都组织成一个结构，并且可以通过查看其名称来确定特定设备在结构中的位置。例如，[www.tcpipguide.com](http://www.tcpipguide.com)指的是*TCP/IP指南*的万维网服务器，该服务器位于商业公司（.com）的伞下。
- en: '![Hierarchical name architecture (structured name space)](httpatomoreillycomsourcenostarchimages288151.png.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![分层名称架构（结构化名称空间）](httpatomoreillycomsourcenostarchimages288151.png.jpg)'
- en: Figure 50-5. Hierarchical name architecture (structured name space)
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图50-5. 分层名称架构（结构化名称空间）
- en: This diagram contains the same devices as [Figure 50-4](ch50s02.html#flat_name_architecture_flat_name_s-id001
    "Figure 50-4. Flat name architecture (flat name space) This diagram shows an example
    of a flat name architecture. There is no structure that organizes the names or
    dictates how they must be constructed. Logically, each device is a peer of each
    of the others."), but they have been arranged using a hierarchical, structured
    name architecture. In this case, the organization has chosen to structure its
    device names first by facility location, and then by department. Each name starts
    with something like USA-Service- or EU-Mfg-. This has immediate benefits by providing
    local control over device naming without risk of conflicts. If someone named John
    were hired into the USA sales force, his machine could be named USA-Sales-John,
    without conflicting with the machine owned by John of the European sales force
    (EU-Sales-John). The structure also makes it easier to know immediately where
    a device can be found within the organization.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 此图包含与[图50-4](ch50s02.html#flat_name_architecture_flat_name_s-id001 "图50-4. 平面名称架构（平面名称空间）此图展示了平面名称架构的一个示例。没有结构来组织名称或规定它们必须如何构建。逻辑上，每个设备都是其他每个设备的对等体。"),相同的设备，但它们是使用分层、结构化的名称架构排列的。在这种情况下，组织选择首先按设施位置来结构化其设备名称，然后按部门。每个名称都以类似USA-Service-或EU-Mfg-的某种东西开头。这通过提供对设备命名的本地控制而无需担心冲突，带来了直接的好处。如果有人名叫John被雇佣到美国销售团队，他的机器可以被命名为USA-Sales-John，而不会与欧洲销售团队（EU-Sales-John）拥有的John的机器发生冲突。这种结构还使得立即知道设备在组织中的位置变得更加容易。
- en: Comparing Name Architectures
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较名称架构
- en: As you will see in the next two sections in this chapter, the architecture of
    the name space is intimately related to how names are registered and managed,
    and ultimately, how they are resolved. A flat name space requires a central authority
    of some sort to assign names to all devices in the system to ensure uniqueness.
    A hierarchical name architecture is ideally suited to a more distributed registration
    scheme that allows many authorities to share in the registration and administrative
    process.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您将在本章接下来的两个部分中看到的那样，名称空间的架构与名称的注册和管理方式密切相关，最终与它们的解析方式密切相关。平面名称空间需要一个某种形式的中央权威来为系统中的所有设备分配名称以确保唯一性。分层名称架构非常适合更分散的注册方案，允许许多权威机构共同参与注册和管理过程。
- en: All of this means that the advantages and disadvantages of each of these architectures
    are not a great mystery. Flat name spaces have the advantage of simplicity and
    the ability to create short and easily remembered names, as shown in [Figure 50-4](ch50s02.html#flat_name_architecture_flat_name_s-id001
    "Figure 50-4. Flat name architecture (flat name space) This diagram shows an example
    of a flat name architecture. There is no structure that organizes the names or
    dictates how they must be constructed. Logically, each device is a peer of each
    of the others."). However, they do not scale well to name systems containing hundreds
    or thousands of machines, due to the difficulties in ensuring each name is unique.
    For example, what happens if there are four people named John who all try to name
    their computers John's PC? Another issue is the overhead needed to centrally manage
    these names.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些都意味着这些架构的优缺点并不是一个很大的谜团。平面名称空间具有简单性和创建简短且易于记忆的名称的能力，如[图50-4](ch50s02.html#flat_name_architecture_flat_name_s-id001
    "图50-4. 平面名称架构（平面名称空间）此图显示了平面名称架构的一个示例。没有结构来组织名称或规定它们必须如何构建。逻辑上，每个设备都是其他每个设备的对等体。")所示。然而，由于确保每个名称都是唯一的困难，它们在包含数百或数千台机器的名称系统中扩展性不好。例如，如果有四个人都叫约翰，他们都试图将他们的电脑命名为约翰的PC，会发生什么？另一个问题是集中管理这些名称所需的开销。
- en: In contrast, hierarchical name spaces are more sophisticated and flexible, because
    they allow names to be assigned using a logical structure. We can name our machines
    using a hierarchy that reflects our organization's structure, for example, and
    give authority to different parts of the organization to manage parts of the name
    space. As long as each department is named uniquely and that unique department
    name is part of each machine name, we don't need to worry about each assigned
    name being unique across the entire organization; it just needs to be unique within
    the department. Thus, we can have four different machines named with their department
    name and John, as [Figure 50-5](ch50s02.html#hierarchical_name_architecture_str-id001
    "Figure 50-5. Hierarchical name architecture (structured name space)") demonstrates.
    The price of this flexibility is the need for longer names and more complexity
    in name registration and resolution.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，分层名称空间更复杂、更灵活，因为它们允许使用逻辑结构来分配名称。我们可以使用反映我们组织结构的分层结构来命名我们的机器，例如，并授权组织的不同部分管理名称空间的一部分。只要每个部门都有独特的名称，并且这个独特的部门名称是每个机器名称的一部分，我们就不必担心在整个组织中分配的每个名称都是唯一的；它只需要在部门内部是唯一的。因此，我们可以有四台不同的机器，它们的名称由部门名称和约翰组成，如[图50-5](ch50s02.html#hierarchical_name_architecture_str-id001
    "图50-5. 分层名称架构（结构化名称空间")所示。这种灵活性的代价是需要更长的名称和在名称注册和解析中更多的复杂性。
- en: Tip
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The two most common types of name architecture are the flat
    name space and the hierarchical name space. Names in a flat name space are all
    peers with no relationship. In a hierarchical architecture, a multiple-level structure
    is used to organize names in a specific way. The flat system is simpler and satisfactory
    for small networks. The hierarchical name space is more flexible and powerful,
    and better suited to larger networks and internetworks.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 最常见的两种名称架构类型是平面名称空间和分层名称空间。平面名称空间中的名称都是对等的，没有关系。在分层架构中，使用多级结构以特定方式组织名称。平面系统更简单，对于小型网络来说是令人满意的。分层名称空间更灵活、更强大，更适合大型网络和互联网。'
- en: Name Registration Methods, Administration, and Authorities
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 名称注册方法、管理和权限
- en: It seems obvious that for our name system to be implemented, we need some method
    of assigning names to each of the devices that will use the system. Just as a
    name system has a name space that is comparable to an addressing system's address
    space, it also must implement a set of rules and procedures for assigning names,
    comparable to how an addressing system assigns addresses. This is called *name
    registration*.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，为了实施我们的名称系统，我们需要一种方法来为将使用该系统的每个设备分配名称。正如名称系统有一个与寻址系统的地址空间相当的名字空间，它也必须实施一套规则和程序来分配名称，类似于寻址系统分配地址的方式。这被称为*名称注册*。
- en: Name Registration Functions
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称注册功能
- en: 'In general, name registration encompasses the following four concepts and tasks:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，名称注册包括以下四个概念和任务：
- en: '**Name Assignment and Guarantee of Uniqueness** The core task of the name registration
    process is assigning names to devices. Like all identification schemes, a key
    requirement of name registration is ensuring that each name is unique. Duplicated
    names cause ambiguity and make consistent name resolution impossible.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '**名称分配和唯一性保证** 名称注册过程的核心任务是给设备分配名称。像所有识别方案一样，名称注册的一个关键要求是确保每个名称都是唯一的。重复的名称会导致歧义，并使得一致的名称解析变得不可能。'
- en: '**Central Registration Authority Designation** Ensuring uniqueness of names
    requires that there be someone in charge of the name assignment process. This
    *central registration authority* may be a single individual that maintains a file
    containing names, or it may be an organization that is responsible for the overall
    name registration process. The authority is also charged with resolving problems
    and conflicts that may arise in registrations.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '**中央注册权威机构指定** 确保名称的唯一性需要有人负责名称分配过程。这个**中央注册权威机构**可能是一个维护包含名称的文件的单一个人，或者是一个负责整个名称注册过程的组织。该机构还负责解决注册过程中可能出现的任何问题和冲突。'
- en: '**Registration Authority Delegation** In smaller name systems, the central
    registration authority may be responsible for the actual registration process
    for all devices. In larger, hierarchical name systems, having this process centralized
    is impractical. Instead, the central registration authority will divide the name
    space and *delegate* authority for registering names in different parts of it
    to subordinate organizations. This requires a delegation policy to be developed
    and implemented.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**注册权威机构委派** 在较小的名称系统中，中央注册权威机构可能负责所有设备的实际注册过程。在较大、分层的名称系统中，集中处理这一过程是不切实际的。相反，中央注册权威机构将名称空间划分，并将注册不同部分名称的权力委派给下属组织。这需要制定并实施委派政策。'
- en: '**Hierarchical Structure Definition** When a hierarchical name space is used,
    the central authority is responsible for defining how the structure will look.
    This, in turn, dictates how names can be registered in different parts of the
    hierarchy, and of course, also impacts how authority is delegated.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**分层结构定义** 当使用分层名称空间时，中央权威机构负责定义结构的外观。这反过来又决定了如何在层次结构的各个部分注册名称，当然，这也影响了权力的委派。'
- en: The complexity of the name registration process depends to a great extent on
    the size and complexity of the name system as a whole, and, in particular, on
    the architecture of the name space. In a simple name system using a flat name
    space, registration is usually accomplished using a single authority. There is
    no structure and usually no delegation of authority, so there isn't much to registration.
    For hierarchical name systems, name registration is tied tightly to the hierarchy
    used for names.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 名称注册过程的复杂性在很大程度上取决于整个名称系统的大小和复杂性，特别是名称空间的架构。在简单使用平面名称空间的名称系统中，注册通常通过单一权威机构完成。没有结构，通常也没有权力委派，因此注册过程相对简单。对于分层名称系统，名称注册与用于名称的层次结构紧密相关。
- en: Hierarchical Name Registration
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分层名称注册
- en: The central authority defines the structure of the hierarchy and decides how
    the hierarchy is to be *partitioned* into subsets that can be independently administered
    by other authorities. Those authorities may, in turn, delegate subsets of their
    name spaces as well, creating a flexible and extensible system.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 中央权威机构定义了层次结构的结构，并决定如何将层次结构划分为可以由其他权威机构独立管理的子集。这些权威机构反过来也可能将它们名称空间的部分子集委派出去，从而创建一个灵活且可扩展的系统。
- en: This ability to delegate authority for name registration is one of the most
    powerful benefits of a hierarchical name space. For example, in DNS, a central
    authority is responsible for name registration as a whole. This central authority
    is in charge of deciding which top-level domains—such as .com, .edu, .info, and
    .uk—are allowed to exist. Authority for managing each of these subsets of the
    worldwide hierarchy is then delegated to other organizations. These organizations
    continue the process of dividing the hierarchy as they see fit. Eventually, each
    organization is able to decide how it will name its own internal systems independently;
    for example, IBM can register names in any way it sees fit within the ibm.com
    name.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 能够委派名称注册的权限是层次结构名称空间最强大的好处之一。例如，在DNS中，中央权威机构负责整个名称注册。这个中央权威机构负责决定哪些顶级域名——例如.com、.edu、.info和.uk——被允许存在。管理全球层次结构中这些子集的权限随后被委派给其他组织。这些组织根据自身情况继续划分层次结构的过程。最终，每个组织都能够独立决定如何为其内部系统命名；例如，IBM可以在ibm.com名称下以任何它认为合适的方式注册名称。
- en: Name Registration Methods
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称注册方法
- en: There are several common methods by which the actual process of registration
    is carried out. These include table name registration, broadcast name registration,
    and database registration. Each of these has its strengths and weaknesses, and
    again, some are better suited to flat name spaces and some to hierarchical ones.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 实际注册过程通常有几种常见方法。这些包括表名注册、广播名称注册和数据库注册。每种方法都有其优势和劣势，再次强调，有些更适合扁平名称空间，而有些则更适合层次结构名称空间。
- en: Table Name Registration
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表名注册
- en: Using table name registration, name assignments are maintained in a table by
    an administrator. When names need to be added, deleted, or changed, the table
    is edited.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 使用表名注册，名称分配由管理员在表中维护。当需要添加、删除或更改名称时，表格会被编辑。
- en: 'This technique is usually associated with small, flat name space name systems.
    It has the same benefits and drawbacks as flat architecture in general: It is
    simple and easy to implement, but doesn''t scale well to larger systems. With
    a dozen machines, having someone edit name registration tables is practical; with
    thousands of machines, it is not. It is also not conducive to a hierarchical system
    where there are multiple authorities, because the table needs to be kept in one
    place.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术通常与小型、扁平名称空间名称系统相关联。它具有与扁平架构相同的优点和缺点：简单且易于实现，但扩展性不佳，不适合较大的系统。对于十几台机器，有人编辑名称注册表是可行的；但对于成千上万的机器来说，则不可行。它也不利于存在多个权威机构的层次结构系统，因为表格需要保存在一个地方。
- en: In larger internetworks, tables may be used as an adjunct to one of the other,
    more sophisticated, registration techniques.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在较大的互联网中，表格可能被用作其他更复杂注册技术的一种辅助手段。
- en: Broadcast Name Registration
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 广播名称注册
- en: Broadcast name registration is a trial-and-error technique. A device that wants
    to use a particular name sends out a message to all other devices on the network,
    asking if anyone else is already using it. If so, it chooses a different name.
    If not, the name is considered registered and can then be used.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 广播名称注册是一种试错技术。一个想要使用特定名称的设备会向网络上的所有其他设备发送消息，询问是否有人已经在使用它。如果是这样，它会选择一个不同的名称。如果不是，该名称就被认为是已注册的，然后可以开始使用。
- en: This technique is more sophisticated than using tables, but it is still limited
    to use in relatively small systems. It is not practical to attempt to broadcast
    to thousands of systems, and this method could not be used over the Internet,
    since there is no way to broadcast to every device on an internetwork.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术比使用表格更复杂，但它仍然限于在相对较小的系统中使用。尝试向成千上万的系统广播是不切实际的，并且这种方法不能在互联网上使用，因为在互联网中无法向每个网络设备广播。
- en: Database Registration
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据库注册
- en: With database registration, a database of name assignments is maintained. To
    register a name, a request must be made to have the name assignment added to the
    database. If the authority for the name system is entirely centralized, the database
    will be centralized and maintained by that authority. If authority for parts of
    the hierarchy is delegated, then a *distributed database* is used for registration,
    with each authority maintaining the part of the database describing its section
    of the hierarchy.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 使用数据库注册，维护一个名称分配的数据库。要注册一个名称，必须向数据库提交请求以添加名称分配。如果名称系统的权限完全集中，则数据库将集中并由该权限机构维护。如果层次结构的一部分权限被委派，则使用*分布式数据库*进行注册，每个权限机构维护描述其层次结构部分的数据库部分。
- en: This is the most sophisticated technique and one normally associated with hierarchical
    name systems like DNS. It has several benefits, including flexibility, reliability,
    and distribution of maintenance effort. Its main drawback is complexity.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 这是最复杂的技巧，通常与像DNS这样的分层名称系统相关联。它具有几个优点，包括灵活性、可靠性和维护工作的分布。其主要缺点是复杂性。
- en: Tip
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**KEY CONCEPT** *Name registration* is the process by which names are linked
    to addresses in a name system. It encompasses activities such as central registry
    authority designation and delegation, and name space structure management. The
    most common methods of name registration, in order of both increasing capability
    and complexity, are manual table maintenance, broadcast registration, and database
    registration.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** *名称注册*是将名称与名称系统中的地址链接起来的过程。它包括中央注册机构授权和委派以及名称空间结构管理等活动。最常见的名称注册方法，按能力递增和复杂性递增的顺序排列，是手动表维护、广播注册和数据库注册。'
- en: Name Resolution Techniques and Elements
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 名称解析技术和元素
- en: 'As we discussed earlier in this chapter, using a name system creates two parallel
    identification systems for computers: the numbers used by machines and the names
    used by people. The job of the name system is to integrate these two schemes.
    Name registration allows humans to specify which machines use which names. This
    is only half the process, however; we also need a way for machines to take a name
    given to them by a human and translate it into the numeric address it can actually
    use for communication. This is called *name resolution*.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在本章前面讨论的那样，使用名称系统为计算机创建了两个并行识别系统：机器使用的数字和人们使用的名称。名称系统的任务是整合这两个方案。名称注册允许人类指定哪些机器使用哪些名称。然而，这只是一个过程的一半；我们还需要一种方法，让机器能够将人类给它们的名称翻译成它们实际用于通信的数字地址。这被称为*名称解析*。
- en: Name resolution, also sometimes called *name translation, mapping*, or *binding*,
    is the most well-known aspect of name systems, because it is where most of the
    "heavy lifting" of a name system occurs. The name space is generally set up once,
    and name registration occurs infrequently—only when names must be created or changed.
    In contrast, every user of a name system instructs the machines he or she uses
    to perform name resolution, hundreds or even thousands of times a day.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 名称解析，有时也称为*名称翻译、映射*或*绑定*，是名称系统最知名的部分，因为它是在这里发生名称系统大部分“重活”的地方。名称空间通常只设置一次，名称注册很少发生——仅在必须创建或更改名称时发生。相比之下，名称系统的每个用户每天都会指示他们使用的机器执行名称解析，数百次甚至数千次。
- en: Name Resolution Methods
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称解析方法
- en: 'Several different techniques can be used for name resolution. How this function
    is implemented depends a great deal on the other two name system functions: name
    space and name registration. As you might imagine, a simple name system with a
    simple name registration method will most often use a simple resolution method
    as well. Complex hierarchical systems with distributed databases require more
    sophistication in how names are resolved. There are three common name resolution
    methods: table name resolution, broadcast name resolution, and client/server name
    resolution.'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用几种不同的技术进行名称解析。此功能的实现方式在很大程度上取决于其他两个名称系统功能：名称空间和名称注册。正如你可能想象的那样，具有简单名称注册方法的简单名称系统通常会使用简单的解析方法。具有分布式数据库的复杂分层系统在名称解析方面需要更多的复杂性。有三种常见的名称解析方法：表名称解析、广播名称解析和客户端/服务器名称解析。
- en: Table-Based Name Resolution
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于表的名称解析
- en: The table used for table-based name registration is consulted by a device when
    resolution needs to be performed. The table tells the device how to transform
    the name of the machine it needs to contact into an address.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 当需要执行解析时，设备会咨询用于基于表的名称注册的表。该表告诉设备如何将需要联系的主机的名称转换成地址。
- en: This technique obviously corresponds to table name registration. It is the simplest
    and least capable of the three methods. Table name resolution is suitable for
    stand-alone use only in very small name systems, but it can be a supplement to
    other methods as well.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术显然对应于表名称注册。这是三种方法中最简单且功能最弱的一种。表名称解析仅适用于非常小的名称系统中的独立使用，但它也可以作为其他方法的补充。
- en: Broadcast Name Resolution
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 广播名称解析
- en: 'When a device needs to resolve a name, it broadcasts a query that says something
    to this effect: "I need to send to the device named *X*. Who is that?" The device
    whose name is *X* responds, "I''m *X*, and my numeric address is *N*."'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 当设备需要解析一个名称时，它会广播一个查询，内容如下：“我需要发送到名为 *X* 的设备。它是谁？”名为 *X* 的设备回应：“我是 *X*，我的数字地址是
    *N*。”
- en: This is the complement of broadcast name registration. It, too, can be used
    only in simple systems where every device can hear a broadcast. The use of broadcasts
    also makes it wasteful of network bandwidth.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 这是广播名称注册的补充。它也只能在简单系统中使用，在这些系统中每个设备都能听到广播。使用广播也会造成网络带宽的浪费。
- en: Client/Server Name Resolution
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 客户端/服务器名称解析
- en: With client/server name resolution, servers are programmed with software that
    allows them to respond to name resolution requests sent by clients. These servers
    take the name in the request, look up the associated numeric identifier in a database,
    and send it back in a response.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在客户端/服务器名称解析中，服务器被编程为能够响应客户端发送的名称解析请求。这些服务器在请求中查找相关的数字标识符，并在响应中将其发送回去。
- en: This technique is generally used in conjunction with database name registration.
    It is the most complex name resolution method, but it is also the most efficient
    and the only one that can really work properly on a large, distributed hierarchical
    name system.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术通常与数据库名称注册结合使用。这是最复杂的名称解析方法，但也是最有效率的，也是唯一能够在大型、分布式分层名称系统上真正正常工作的方法。
- en: Client/Server Name Resolution Functional Elements
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 客户端/服务器名称解析功能元素
- en: Client/server name resolution is the method used for most large, modern name
    systems. The client/server method of request/reply resolution is similar to how
    many other protocols function. One thing that is unique about name resolution,
    however, is that name resolution isn't often invoked directly by the client. It's
    rare, for example, for a human user to say, "Please resolve the following name."
    We also certainly wouldn't want users to need to manually resolve a name to an
    address each time they wished to contact a device, as this would be cumbersome.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端/服务器名称解析是大多数大型、现代名称系统使用的方法。客户端/服务器请求/回复解析方法与许多其他协议的功能相似。然而，名称解析的一个独特之处在于，名称解析通常不是由客户端直接调用的。例如，用户很少会说“请解析以下名称。”我们当然也不希望用户每次想要联系设备时都需要手动将名称解析为地址，因为这会很麻烦。
- en: Instead, the system is automated by having software accept machine names input
    by users. The software resolves the name by passing it to a *name resolver* software
    component. The resolver acts as the client in the name resolution process. It
    contacts a *name server*, which responds to the request. The name resolver and
    name server constitute the two main functional elements in name resolution.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，系统通过软件自动接受用户输入的机器名称。软件通过将其传递给 *名称解析器* 软件组件来解析名称。解析器在名称解析过程中充当客户端。它联系 *名称服务器*，该服务器响应请求。名称解析器和名称服务器构成了名称解析中的两个主要功能元素。
- en: Tip
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** *Name resolution* is arguably the most important of the main
    functional elements of a name system, because it is the part of the system that
    actually converts names into addresses. The two main components of name resolution
    are *name resolvers*, which act as clients in the resolution process, and *name
    servers*. The three main name resolution methods—table-based, broadcast, and client/server—correspond
    closely to the table, broadcast, and database methods of name registration.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念**名称解析可以说是名称系统的主要功能元素中最重要的，因为它是将名称转换为地址的系统部分。名称解析的两个主要组件是**名称解析器**，它在解析过程中充当客户端，以及**名称服务器**。三种主要的名称解析方法——基于表格、广播和客户端/服务器——与名称注册的表格、广播和数据库方法紧密对应。'
- en: In a distributed database for a hierarchical name system, multiple requests
    may be required, since name servers will contain only information for certain
    machines and not others. Resolvers follow a special procedure to travel the hierarchy
    until they find the server that has the information they want. Again, DNS's name
    resolution is the best example of this method.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在用于分层名称系统的分布式数据库中，可能需要多个请求，因为名称服务器只会包含某些机器的信息，而不是所有机器。解析器遵循一个特殊程序来遍历层次结构，直到找到包含所需信息的服务器。再次强调，DNS的名称解析是这种方法的最佳例子。
- en: Efficiency, Reliability, and Other Name Resolution Considerations
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 效率、可靠性及其他名称解析考虑因素
- en: 'As described in the previous section, the primary function of name resolution
    is allowing humans to identify devices using names, then converting these names
    into numbers so that computers can use the numbers instead. This basic task is
    conceptually quite simple, but it can become quite complex in implementation.
    The reason for this is the key characteristic that makes name resolution so different
    from the other tasks performed by a name system: the frequency with which it is
    done.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，名称解析的主要功能是允许人类使用名称来识别设备，然后将这些名称转换为数字，以便计算机可以使用这些数字。这个基本任务在概念上相当简单，但在实现上可能会变得相当复杂。原因是名称解析与其他名称系统执行的任务如此不同的关键特性：它执行的频率。
- en: Name registration is seldom done, but name resolution is done very often. If
    you consider a large internetwork with thousands of users running various applications,
    millions of names must be resolved every day. Now, consider something like the
    Internet, which must process billions of client/server requests and replies daily!
    Ensuring that such systems work requires that we do more than just implement a
    resolution process; we must add facilities to ensure that resolution is done as
    effectively as possible.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 名称注册很少进行，但名称解析非常频繁。如果你考虑一个有数千用户运行各种应用程序的大型互联网，每天必须解析数百万个名称。现在，考虑像互联网这样的系统，它每天必须处理数十亿客户端/服务器请求和回复！确保这些系统能够正常工作，我们需要做的不仅仅是实现一个解析过程；我们必须添加确保解析尽可能有效进行的设施。
- en: Efficiency Considerations
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 效率考虑
- en: 'The first major concern with name resolution is *efficiency*. Name resolution
    uses up system resources, especially with resolution techniques that require requests
    and replies to be sent. This means we want to minimize the number of times resolution
    is performed, if at all possible. Now, consider that many people will frequently
    access the same machines over and over again. For example, if you go to a website
    called [www.thisisasite.com](http://www.thisisasite.com) for the first time, your
    system will need to resolve that name. After the home page for that site loads,
    if you click a link to another page on that site, the page will also be found
    at that same name: [www.thisisasite.com](http://www.thisisasite.com). So, it would
    be wasteful to need to resolve that name a second time.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 名称解析的第一个主要问题是**效率**。名称解析会消耗系统资源，尤其是在需要发送请求和回复的解析技术中。这意味着我们希望尽可能减少解析的次数。现在，考虑许多人会频繁地重复访问相同的机器。例如，如果你第一次访问名为[www.thisisasite.com](http://www.thisisasite.com)的网站，你的系统将需要解析该名称。在该网站的首页加载后，如果你点击该网站上的另一个页面链接，该页面也将以相同的名称找到：[www.thisisasite.com](http://www.thisisasite.com)。因此，如果需要再次解析该名称将是浪费的。
- en: To avoid this, name systems almost always include some sort of *caching* capability,
    which allows devices to remember recent name resolutions and retain the mapping
    from name to address for a period of time. Whenever a name needs to be resolved,
    the cache is first checked before going through the formal process of resolution.
    The use of caching eliminates the vast majority of actual name resolution requests
    that would otherwise be required.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免这种情况，名称系统几乎总是包括某种形式的**缓存**能力，这允许设备记住最近的名字解析，并在一段时间内保留从名称到地址的映射。每当需要解析一个名称时，都会首先检查缓存，然后再通过正式的解析过程。缓存的使用消除了绝大多数实际名称解析请求，否则这些请求是必需的。
- en: The drawbacks of caching are that it requires some system resources of its own
    and that it adds complexity to the system. One issue is deciding how long to retain
    data in the cache. If we keep it too short a time, we generate extra unnecessary
    resolution requests. If we keep it too long, we risk having the mapping become
    stale if the name assignment for the machine changes. These are issues that a
    sophisticated name system must handle. A typical solution is to allow each name
    registration to specify how long information about that name-to-address link may
    be cached.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 缓存的缺点是它需要一些自己的系统资源，并且会增加系统的复杂性。一个问题是决定在缓存中保留数据的时间长度。如果我们保留得太短，就会产生额外的、不必要的解析请求。如果我们保留得太长，如果机器的名称分配发生变化，映射可能会变得过时。这些都是一个复杂的名称系统必须处理的问题。一个典型的解决方案是允许每个名称注册指定有关该名称到地址链接的信息可以缓存多长时间。
- en: Reliability Considerations
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可靠性考虑
- en: The next main concern after efficiency is name resolution *reliability*. As
    I said earlier in this chapter, having a name system isn't strictly necessary
    for the computers, but it's very important for the users, especially on a large
    network like the Internet.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在效率之后的主要关注点是名称解析的**可靠性**。正如我在本章前面所说的，对于计算机来说，拥有一个名称系统并不是严格必要的，但对于用户来说，尤其是在像互联网这样的大型网络中，它非常重要。
- en: While having a single central place that maintains all information about a name
    system may make administration simpler, it creates a dangerous single point of
    failure. If anything happens to the device storing the information, the entire
    name system fails. Modern name systems employ redundancies to prevent having the
    entire system rely on any particular device for resolution. A typical approach
    in a client/server system is to have multiple servers in different locations (or
    attached to different networks) that can respond to name resolution requests.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然有一个单一的中心位置维护关于名称系统的所有信息可能会使管理变得简单，但它创建了一个危险的单点故障。如果存储信息的设备发生任何问题，整个名称系统都会失败。现代名称系统采用冗余来防止整个系统依赖于任何特定设备进行解析。在客户端/服务器系统中，一个典型的方法是在不同位置（或连接到不同的网络）拥有多个服务器，这些服务器可以响应名称解析请求。
- en: Tip
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Since name resolution is the part of a name system that is
    used most often, it is here that we must pay careful attention to implementation
    issues. The two most important ones are efficiency and reliability. Efficiency
    is essential due to the many thousands or millions of resolutions performed every
    day on a large system. Reliability is a consideration because users of the name
    system quickly come to rely on it, so we must make sure it is robust.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 由于名称解析是名称系统中使用最频繁的部分，因此我们必须在这里仔细注意实现问题。最重要的两个问题是效率和可靠性。效率对于每天在大系统上执行成千上万或数百万次解析至关重要。可靠性是一个考虑因素，因为名称系统的用户很快就会依赖它，因此我们必须确保它是健壮的。'
- en: Other Considerations
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 其他考虑因素
- en: An optional feature in some name resolution systems is *load balancing*. When
    properly implemented, load balancing allows a single name to map to more than
    one underlying address. This allows requests sent to a particular virtual device
    to actually be directed to a number of different actual physical devices, spreading
    the load over multiple machines. A common use of this feature is for very popular
    websites that are visited often.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 一些名称解析系统中的一个可选功能是**负载均衡**。当正确实现时，负载均衡允许一个名称映射到多个底层地址。这允许发送到特定虚拟设备的请求实际上被导向多个不同的实际物理设备，从而在多台机器上分散负载。这个功能的常见用途是用于经常访问的非常受欢迎的网站。
- en: 'Finally, while name resolution is obviously designed to allow names to be mapped
    to addresses, there are cases where we may wish to go in the other direction:
    given a numeric address, find the name that goes with it. This process, called
    *reverse resolution*, is analogous to having a phone number and trying to find
    the name of the person or company to which it belongs. Just as we can''t easily
    find the name matching a phone number using a conventional phone book (we would
    need to scan every page looking for the number), reverse resolution requires special
    support on the part of the name system. This is especially true if the name system
    data is distributed over many servers.'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，虽然名称解析显然是为了允许将名称映射到地址，但在某些情况下，我们可能希望朝相反的方向进行：给定一个数字地址，找到与之对应的名称。这个过程称为*反向解析*，类似于拥有一个电话号码并试图找到属于该号码的个人信息或公司。正如我们无法轻易通过传统的电话簿找到匹配电话号码的名称（我们需要扫描每一页以查找号码），反向解析需要名称系统提供特殊支持。如果名称系统数据分布在多个服务器上，这一点尤为重要。
- en: Chapter 51. TCP/IP NAME SYSTEMS OVERVIEW AND THE HOST TABLE NAME SYSTEM
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第51章。TCP/IP名称系统概述和主机表名称系统
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: TCP/IP has become sufficiently popular that many people—even those who aren't
    geeks—are fairly comfortable working with its numeric identifiers (IP addresses).
    Even so, it's a lot easier to work with names than numbers, and it's certainly
    easier to remember names. We can consider also that name systems become more important
    when used on larger networks, and TCP/IP is used to implement the Internet, the
    world's largest internetwork. Having a good name system is vital to the operation
    of the Internet, and thus, has become an important element of TCP/IP as a whole.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: TCP/IP已经足够流行，以至于许多人——甚至不是极客的人——都相当舒适地使用它的数字标识符（IP地址）。即便如此，使用名称比使用数字要容易得多，而且名称的记忆性也更强。我们还可以考虑，当在更大的网络上使用时，名称系统变得更加重要，而TCP/IP被用来实现互联网，这是世界上最大的互联网。拥有一个好的名称系统对于互联网的运行至关重要，因此，已经成为TCP/IP整体的一个重要元素。
- en: In this chapter, I begin the discussion of TCP/IP's name systems with a look
    at the history of the use of host names in TCP/IP and the early development of
    its name systems. I then provide a description of the simple host table name system,
    the first one used in the protocol suite. I discuss why host tables were replaced
    by the Domain Name System (DNS) and how, even today, they can be used to complement
    DNS functions.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我首先回顾了TCP/IP中主机名称的使用历史以及其名称系统的早期发展。然后，我描述了简单的主机表名称系统，这是在协议集中首次使用的。我讨论了为什么主机表被域名系统（DNS）所取代，以及即使在今天，它们也可以用来补充DNS功能。
- en: Tip
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**BACKGROUND INFORMATION** *This chapter assumes that you are already familiar
    with the general concepts and issues of name systems explained in the preceding
    chapter*.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '**背景信息** *本章假设您已经熟悉了上一章中解释的名称系统的一般概念和问题*。'
- en: A Brief History of TCP/IP Host Names and Name Systems
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: TCP/IP主机名称和名称系统简史
- en: 'In the previous chapter, I described an interesting paradox: Even though name
    systems aren''t strictly necessary for the functioning of a networking system,
    they make using a network so much easier for people that they are considered an
    essential part of most networks. No better evidence of this can be found than
    in the history of name system development in TCP/IP.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我描述了一个有趣的悖论：尽管名称系统对于网络系统的运行并不是严格必要的，但它们使人们使用网络变得如此容易，以至于被认为是大多数网络的一个基本组成部分。没有比在TCP/IP中名称系统的发展历史中更好的证据了。
- en: 'Developing the First Name System: ARPAnet Host Name Lists'
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 开发第一个名称系统：ARPAnet主机名称列表
- en: The history of name systems in the TCP/IP protocol suite actually goes back
    well before the Transmission Control Protocol (TCP) and Internet Protocol (IP)
    were themselves even created. In the late 1960s and early 1970s, when the predecessor
    of the Internet, called the *ARPAnet*, was being developed, it used older networking
    protocols that served the same function that TCP and IP do today.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: TCP/IP协议集中名称系统的发展历史实际上可以追溯到在传输控制协议（TCP）和互联网协议（IP）本身被创造之前很久。在20世纪60年代末和70年代初，当互联网的前身，被称为*ARPAnet*，正在开发时，它使用了较老的联网协议，这些协议今天与TCP和IP的功能相同。
- en: The ARPAnet was very small by today's standards, containing at first only a
    few machines, referred to as *hosts*, just as TCP/IP machines often are called
    today. The addressing scheme was also very simple, consisting of just the combination
    of a computer number and a port number for each host. With only a handful of machine
    names, it was easy to memorize addresses, but as the ARPAnet grew to several dozen
    machines, this scheme became untenable.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 与今天的标准相比，ARPAnet非常小，最初只包含几台机器，被称为*主机*，就像TCP/IP机器今天通常被称为一样。地址方案也很简单，仅由每个主机的计算机号和端口号组合而成。只有少数机器名，很容易记住地址，但随着ARPAnet发展到几十台机器，这种方案变得不可行。
- en: As early as 1971, it was apparent to the engineers designing the ARPAnet that
    symbolic names were much easier for everyone to work with than numeric addresses.
    They began to assign simple host names to each of the devices on the network.
    Each site managed its own *host table*, which listed the mappings of names to
    addresses.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 早在1971年，设计ARPAnet的工程师们就明显意识到，与数字地址相比，符号名称对每个人来说都更容易操作。他们开始为网络上的每个设备分配简单的主机名。每个站点管理自己的*主机表*，列出了名称到地址的映射。
- en: Naturally, the ARPAnet engineers immediately recognized the dangers of having
    each site maintain a list of possibly inconsistent host names. Since the internetwork
    was just a small "club" at this point, they used the Request for Comment (RFC)
    process itself to document standard host-name-to-address mappings. RFC 226, "Standardization
    of Host Mnemonics," is the first RFC I could find showing how host names were
    assigned. It was published on September 20, 1971.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 自然，ARPAnet工程师立即认识到每个站点维护可能不一致的主机名列表的危险。由于当时互联网只是一个小的“俱乐部”，他们使用请求评论（RFC）过程本身来记录标准的域名到地址映射。RFC
    226，“主机助记符标准化”，是我能找到的第一个显示主机名如何分配的RFC。它于1971年9月20日发布。
- en: This initial name system was about as manual as a system could be. As additions
    and changes were made to the network, the list of host names was updated in a
    new RFC, leading to a series of RFCs being published in the 1970s. Each host administrator
    still maintained his or her own host table, which was updated when a new RFC was
    published. During this time, the structure of host names was still under discussion,
    and changes were made to just about every aspect of the name system as new ideas
    were explored and refined.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这个初始的命名系统几乎和手动操作一样。随着网络中添加和更改的增加，主机名列表在新的RFC中被更新，导致在20世纪70年代出版了一系列RFC。每个主机管理员仍然维护自己的主机表，当新的RFC发布时进行更新。在这段时间里，主机名的结构仍在讨论中，并且随着新想法的探索和细化，对命名系统的几乎所有方面都进行了更改。
- en: Storing Host Names in a Host Table File
  id: totrans-165
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在主机表文件中存储主机名
- en: This early name system worked fine while the ARPAnet was very small, but it
    presented many problems as the internetwork grew. One problem was that it was
    extremely slow in responding to network modifications, because additions and changes
    would be entered into device tables only after a new list was published. Also,
    even with the centralized list, there were still potential consistency issues,
    because a site manager might forget to update a file or make a typographical error.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在ARPAnet非常小的时候，这个早期的命名系统运行得很好，但随着互联网的发展，它提出了许多问题。一个问题是在对网络修改做出响应时非常缓慢，因为只有在发布新列表之后，才会将添加和更改输入到设备表中。此外，即使有集中的列表，仍然存在潜在的一致性问题，因为站点管理员可能忘记更新文件或犯打字错误。
- en: The first improvement was to make the list of host name assignments a standard
    "master" text file, which was centrally managed and could be downloaded using
    network protocols like the File Transfer Protocol (FTP). The file was maintained
    at the Network Information Center (NIC) at Stanford University. The process for
    defining and using this file was described in RFCs 606 and 608, both entitled
    "Host Names On-Line," published in December 1973 and January 1974, respectively.
    These documents also formally specified the syntax for the TCP/IP host table name
    system, described later in this chapter.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个改进是将主机名分配的列表变成一个标准的“主”文本文件，该文件由中心管理，可以使用文件传输协议（FTP）等网络协议下载。该文件存储在斯坦福大学的网络信息中心（NIC）。定义和使用此文件的过程在1973年12月和1974年1月分别发布的RFC
    606和RFC 608中进行了描述，这两个RFC的标题都是“在线主机名”。这些文件还正式指定了TCP/IP主机表名称系统的语法，这在本章后面将进行描述。
- en: The use of a centrally managed host table continued through the 1970s. When
    TCP/IP was developed, the system was maintained, and the mappings were made between
    host names and 32-bit IP addresses. RFC 810, "DoD Internet Host Table Specification,"
    shows how host tables were defined for use with IP addresses. It was published
    in March 1982.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 使用集中管理的主机表一直持续到20世纪70年代。当TCP/IP被开发时，系统得到了维护，并且主机名与32位IP地址之间的映射被建立。RFC 810，“DoD
    Internet Host Table Specification”展示了如何为主机表定义与IP地址一起使用。它于1982年3月发布。
- en: Outgrowing the Host Table Name System and Moving to DNS
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 超越主机表名称系统，转向DNS
- en: The continuing growth of the ARPAnet/Internet made it apparent that the simple
    host table name system would eventually become unmanageable. With at first dozens,
    and then hundreds and thousands of new hosts connecting to the internetwork, a
    single text file maintained in a central location just wasn't up to the task.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: ARPAnet/Internet的持续增长表明，简单的主机表名称系统最终将变得难以管理。随着最初几十个，然后是数百个和数千个新主机连接到互联网，一个位于中央位置的单个文本文件根本无法胜任这项任务。
- en: The idea of moving to a hierarchical name system based on the concept of *domains*
    was first introduced in September 1981 in RFC 799, "Internet Name Domains." Considerable
    discussion and development of this concept occurred in the early 1980s. By 1983,
    a plan was put in place to migrate from the flat host table name system to the
    new Domain Name System (DNS). The detailed history of the development of this
    name system is continued in the overview of DNS in [Chapter 52](ch52.html "Chapter 52. DOMAIN
    NAME SYSTEM (DNS) OVERVIEW, FUNCTIONS, AND CHARACTERISTICS").
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 将名称系统迁移到基于*域名*概念的分层名称系统的想法最早在1981年9月的RFC 799，“Internet Name Domains”中提出。在20世纪80年代初，对这个概念进行了大量的讨论和发展。到1983年，一项计划被制定，从平面主机表名称系统迁移到新的域名系统（DNS）。这个名称系统发展的详细历史在[第52章](ch52.html
    "第52章. 域名系统（DNS）概述、功能和特性")中概述。
- en: The TCP/IP Host Table Name System
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: TCP/IP主机表名称系统
- en: The pioneers of the modern Internet made the first name system for the TCP/IP
    suite when they created simple files containing the names and addresses of the
    machines in the early ARPAnet, as explained in the preceding section. This system
    was so simple that it originally wasn't even formally specified as a name system
    per se. Since the files contained names for network hosts, the process for relating
    names to addresses was simply called the *host name* mechanism. Later, these files
    were called *host tables*, and for this reason, this technology is commonly called
    the TCP/IP *host table name system*.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 现代互联网的先驱们在早期ARPAnet创建包含机器名称和地址的简单文件时，为TCP/IP套件创建了第一个名称系统，正如前文所述。这个系统非常简单，最初甚至没有正式指定为名称系统本身。由于文件包含网络主机的名称，将名称与地址关联的过程简单地称为*主机名机制*。后来，这些文件被称为*主机表*，因此，这项技术通常被称为TCP/IP
    *主机表名称系统*。
- en: As a system, it is extremely simple, since it consists of nothing more than
    a text file maintained on each machine on the network. This file is normally called
    /etc/hosts on a UNIX system and HOSTS on a Windows system (usually residing in
    the main Windows directory). The file usually begins with some comment lines and
    then lists pairs of IP addresses and host names. A very simplified example (using
    the modern table structure, which is slightly different from the original host
    table format) is shown in [Example 51-1](ch51s02.html#example_tcpip_host_table
    "Example 51-1. Example TCP/IP host table").
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一种系统，它极其简单，因为它仅由网络上每台机器上维护的文本文件组成。在UNIX系统中，这个文件通常被称为/etc/hosts，而在Windows系统中被称为HOSTS（通常位于主Windows目录中）。文件通常以一些注释行开始，然后列出IP地址和主机名的配对。一个非常简化的例子（使用现代的表结构，这与原始的主机表格式略有不同）在[示例51-1](ch51s02.html#example_tcpip_host_table
    "示例51-1. TCP/IP主机表示例")中展示。
- en: '[PRE0]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Example 51-1. Example TCP/IP host table
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 示例51-1. TCP/IP主机表示例
- en: The name space and architecture for the host table name system is theoretically
    flat, with each name being able to take any form, without any real structure.
    Despite this, for consistency, certain rules were eventually put in place regarding
    how names should be created, as discussed in [Chapter 53](ch53.html "Chapter 53. DNS
    NAME SPACE, ARCHITECTURE, AND TERMINOLOGY"). As you will learn later in this chapter,
    it's also possible to use host tables to support the implementation of a hierarchical
    name space, which would mean that the names would need to be created using that
    name space's structural rules.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 主机表名称系统的命名空间和架构在理论上来说是扁平的，每个名称都可以采取任何形式，没有任何实际结构。尽管如此，为了保持一致性，最终还是制定了一些关于名称创建的规则，如[第53章](ch53.html
    "第53章。DNS名称空间、架构和术语")中所述。你将在本章后面了解到，使用主机表也可以支持实现层次名称空间，这意味着名称的创建需要使用该名称空间的规则。
- en: Host Table Name Resolution
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主机表名称解析
- en: Name resolution in the host table name system is very simple. Each device reads
    the host table into memory when it starts up. Users of the system can refer to
    the names in that host table by using names, instead of a numeric IP addresses,
    in their invocation of various applications. When the software detects a name
    has been used in this manner, it refers the name to the internal resolver routine
    in the device, which looks up the name in the host table in memory and returns
    its address. There is no need for any transmissions or servers to be contacted;
    resolution is entirely local.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 主机表名称系统中的名称解析非常简单。每个设备在启动时将主机表读入内存。系统用户可以通过使用名称而不是数字IP地址来调用各种应用程序中的名称来引用该主机表中的名称。当软件检测到名称以这种方式使用时，它会将该名称指向设备内部的解析例程，该例程在内存中的主机表中查找名称并返回其地址。不需要任何传输或联系服务器；解析完全是局部的。
- en: Host Table Name Registration
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主机表名称注册
- en: Now, here is the part where I am supposed to say that name registration in the
    host table name system is simple as well, right? Well, yes and no. From a purely
    technical standpoint, it certainly is simple. A name is registered on a particular
    device when the name and corresponding IP address are entered into the device's
    host table, and that's it.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，这里是我应该说出在主机表名称系统中的名称注册同样简单的那部分，对吧？好吧，是的，也不是。从纯粹的技术角度来看，它确实很简单。当名称和相应的IP地址被输入到设备的主机表中时，名称就在特定设备上注册了，就是这样。
- en: 'However, name registration is much more complicated from an administrative
    standpoint, and this is where we find the major weakness of using host tables.
    Each network device maintains its own host table independent of the others, usually
    stored as a file on its local hard disk. This is in contrast to database registration
    systems (see [Chapter 50](ch50.html "Chapter 50. NAME SYSTEM ISSUES, CONCEPTS,
    AND TECHNIQUES")), where the data is centrally stored and managed. This approach
    to name registration leads to two very important concerns:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，从管理角度来看，名称注册要复杂得多，这也是使用主机表的主要弱点。每个网络设备都维护自己的主机表，独立于其他设备，通常存储在其本地硬盘上的文件中。这与数据库注册系统（见[第50章](ch50.html
    "第50章。名称系统问题、概念和技术"））形成对比，其中数据是集中存储和管理的。这种名称注册方法导致两个非常重要的问题：
- en: '**Consistency** Since every device has its own host table, how do we ensure
    that information is consistent throughout all the tables on the different devices?'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '**一致性** 由于每个设备都有自己的主机表，我们如何确保信息在所有不同设备上的表中保持一致？'
- en: '**Modifications** How do we ensure that information about new device mappings
    and changes to existing ones are propagated to all devices?'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '**修改** 我们如何确保关于新设备映射和现有映射更改的信息传播到所有设备？'
- en: As explained earlier in this chapter, the original mechanism for name registration
    was simply hand-editing, with administrators consulting updated published lists
    of device names. This was a very inefficient method that was prone to error and
    slow to acknowledge changes to the network. The revised system used a centrally
    managed master file that was downloaded by all sites on a regular basis. Name
    registration in this method required that the name/address mapping be submitted
    to the authority managing the central file, the NIC.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 如本章前面所述，名称注册的原始机制是简单地手动编辑，管理员咨询更新发布的设备名称列表。这是一个非常低效的方法，容易出错，并且对网络变化的确认速度慢。改进的系统使用一个由所有站点定期下载的集中管理的主文件。在这种方法中，名称/地址映射需要提交给管理中央文件的主管机构，即网络信息中心（NIC）。
- en: Weaknesses of the Host Table Name System
  id: totrans-186
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**主机表名称系统的弱点**'
- en: 'The use of a centralized master file for name registration certainly worked
    better than using the equivalent of interoffice memos to publish host name lists,
    but it was practical only in the early days of TCP/IP. As the internetwork grew,
    more weaknesses of the host table system became apparent:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 使用集中式主文件进行名称注册当然比使用内部备忘录发布主机名称列表更有效，但在TCP/IP的早期阶段是实用的。随着互联网的发展，主机表系统的更多弱点变得明显：
- en: '**Central Administration Overload** The changes to the central file became
    more frequent, increasing the administrative load on the individual managing the
    master file, to the point where changes were being made many times per day. As
    the Internet continued to grow, it would eventually have become impossible for
    human beings to enter the changes as fast as they were being submitted.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '**中央管理过载** 中央文件的变化变得越来越频繁，这增加了管理主文件的个人行政负担，以至于每天需要进行多次更改。随着互联网的持续增长，最终人类将无法像提交速度那样快地输入这些更改。'
- en: '**Growth in the Master File Size** Every host needed a line in the master file.
    When the Internet grew to be thousands and eventually millions of devices, the
    file size would have become excessive.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '**主文件大小增长** 每个主机都需要在主文件中有一行。当互联网发展到数千甚至数百万台设备时，文件大小将变得过大。'
- en: '**Excessive Bandwidth Use** Since the master file was changing so often, this
    also meant that all the devices on the network needed to keep downloading this
    master file repeatedly to stay current. At the same time, the file was also growing
    in size. Frequent downloads of a big file meant large amounts of network bandwidth
    were being consumed on something that was, in essence, an overhead activity.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '**过度使用带宽** 由于主文件经常变化，这也意味着网络上的所有设备都需要反复下载这个主文件以保持最新状态。同时，文件的大小也在增长。频繁下载大文件意味着大量网络带宽被消耗在本质上是一种开销活动上。'
- en: '**Flat Name Space Problems** The lack of a hierarchical name space led to conflicts
    when users chose identical names for their devices, and this further increased
    the workload on the central administrator. These issues were ameliorated in part
    by using naming conventions, such as using a prefix with a location before each
    individual machine name (like the example we saw in [Chapter 50](ch50.html "Chapter 50. NAME
    SYSTEM ISSUES, CONCEPTS, AND TECHNIQUES")), but this was not an ideal solution.'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '**扁平命名空间问题** 由于缺乏分层命名空间，当用户为他们的设备选择相同的名称时，会导致冲突，这进一步增加了中央管理员的负担。这些问题部分通过使用命名约定得到缓解，例如在每个单独的机器名称之前使用带有位置的名称前缀（如我们在[第50章](ch50.html
    "第50章。名称系统问题、概念和技术")中看到的示例），但这并不是一个理想的解决方案。'
- en: All of these are reasons why the designers of the Internet eventually moved
    away from using host tables for the entire Internet to the more capable DNS.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些原因都说明了互联网的设计者最终放弃了在整个互联网上使用主机表，转而采用了更强大的DNS。
- en: Tip
  id: totrans-193
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '**提示**'
- en: '**KEY CONCEPT** The *host table name system* was the original mechanism used
    for implementing names on the early Internet. It consists simply of a set of tables
    containing mappings between names and addresses maintained on each machine in
    the internetwork. When a name needs to be resolved, the table is consulted to
    determine the appropriate address. This system is extremely simple, but not very
    capable and not well suited to a large global Internet, which is why it was eventually
    abandoned in favor of DNS.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** *主机表名称系统* 是早期互联网上用于实现名称的原初机制。它简单地由一组表组成，包含在每个网络中的每台机器上维护的名称与地址之间的映射。当需要解析名称时，会查阅该表以确定适当的地址。这个系统非常简单，但功能有限，并且不适合大型全球互联网，这就是为什么它最终被DNS所取代。'
- en: Use of the Host Table Name System in Modern Networking
  id: totrans-195
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**现代网络中使用主机表名称系统**'
- en: Although the host table name system has critical weaknesses, it has not gone
    away entirely. There are two circumstances in which this technique is still of
    value, as explained in this section.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然主机表名称系统存在关键弱点，但它并未完全消失。本节中解释了两种情况下这种技术仍然有价值。
- en: Small "Island" Networks
  id: totrans-197
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小型“岛屿”网络
- en: 'If you are setting up a small local area network (LAN) using TCP/IP, and you
    don''t need the names of your devices to be accessible by those outside your network,
    then guess what: You have the equivalent, of sorts, of the early Internet. In
    that case, the host table system is as applicable to you as it was to the Internet
    in the 1970s. You can simply set up host tables on each device and manage them
    manually.'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用TCP/IP设置一个小型局域网（LAN），并且不需要你的设备名称被网络外的人访问，那么猜猜看：你拥有某种形式的早期互联网。在这种情况下，主机表系统对你来说就像它在20世纪70年代的互联网上一样适用。你可以在每个设备上简单地设置主机表并手动管理它们。
- en: As long as the LAN is small enough that editing these files periodically is
    not a hassle, this is actually a fast and effective name system, because no exchange
    of messages is needed for resolution. You can even maintain a master file on one
    machine and copy it to the others when changes are required using a script, to
    save time.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 只要局域网足够小，定期编辑这些文件不会造成麻烦，这实际上是一个快速有效的命名系统，因为不需要交换消息进行解析。你甚至可以在一台机器上维护一个主文件，并在需要更改时使用脚本将其复制到其他机器上，以节省时间。
- en: Local Name Mappings to Supplement DNS
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 补充DNS的本地名称映射
- en: Even though modern systems use DNS for most name resolution, they also usually
    still support the use of host table files. You can manually enter common name
    mappings into this file, even for devices that are on the global Internet. Your
    system can then be set up to consult this list before making use of its assigned
    DNS server.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管现代系统通常使用DNS进行大多数名称解析，但它们通常仍然支持使用主机表文件。你可以手动将常见的名称映射输入到这个文件中，即使是全球互联网上的设备也可以。然后，你的系统可以设置为在利用其分配的DNS服务器之前先咨询这个列表。
- en: The use of the HOSTS file in conjunction with DNS allows you to manually specify
    mappings for commonly accessed sites, which may provide a slight performance improvement
    since there is no need to access a server. Since the HOSTS file doesn't enforce
    any particular structure to names, it is naturally quite possible to put DNS-style
    hierarchical names into the file, as I showed in [Example 51-1](ch51s02.html#example_tcpip_host_table
    "Example 51-1. Example TCP/IP host table"). The file is loaded into memory and
    used to *override* the normal DNS process for names listed in it.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 将HOSTS文件与DNS结合使用允许你手动指定常用网站的映射，这可能由于无需访问服务器而提供轻微的性能提升。由于HOSTS文件不对名称施加任何特定的结构，因此自然可以将DNS风格的分层名称放入文件中，就像我在[示例51-1](ch51s02.html#example_tcpip_host_table
    "示例51-1. TCP/IP主机表示例")中展示的那样。该文件被加载到内存中，并用于*覆盖*其中列出的名称的正常DNS过程。
- en: Of course, you then subject yourself to all the potential maintenance headaches
    of manually edited files. You must update these files as host names or addresses
    are changed in the DNS system. For this reason, this second use of the HOSTS file
    for Internet sites served by DNS is less popular than the use of the file for
    local machines.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，然后你必须承受手动编辑文件可能带来的所有潜在维护问题。你必须更新这些文件，因为DNS系统中的主机名或地址发生变化。因此，这种将HOSTS文件用于由DNS服务的网站的第二种用途不如用于本地机器的用途受欢迎。
- en: Tip
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Even though the host table name system is not the primary mechanism
    used for TCP/IP naming, it is still used in two circumstances. The first is to
    implement a basic name system in a small local TCP/IP internetwork. The second
    is as an adjunct to DNS, where it allows manual mappings to be created that override
    the DNS process when needed.'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 尽管主机表名称系统不是TCP/IP命名的首选机制，但它仍然在两种情况下使用。第一种是在小型本地TCP/IP互联网中实现基本命名系统。第二种是作为DNS的辅助工具，它允许在需要时创建手动映射来覆盖DNS过程。'
- en: Chapter 52. DOMAIN NAME SYSTEM (DNS) OVERVIEW, FUNCTIONS, AND CHARACTERISTICS
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第52章。域名系统（DNS）概述、功能和特性
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: The creation of host tables to map computer names to addresses greatly improved
    the usability of the early Internet and the TCP/IP protocol suite that implemented
    it. Unfortunately, while the host table name system worked well when the internetwork
    was small, it did not scale particularly well as the Internet started to grow
    in size and complexity. The name system had to stay, but the use of host tables
    had to be dispensed with in favor of a newer, more capable system.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 创建主机表将计算机名称映射到地址大大提高了早期互联网和实现它的TCP/IP协议套件的可用性。不幸的是，尽管主机表名称系统在互联网规模较小的时候运行良好，但它并没有很好地扩展，随着互联网开始增长其规模和复杂性。名称系统必须保留，但必须放弃使用主机表，转而采用一个更新、更强大的系统。
- en: Over the period of several years, many engineers worked to create a system that
    would meet not just the needs of TCP/IP internetworks of the time, but also those
    of the future. The new name system was based on a hierarchical division of the
    network into groups and subgroups, with names reflecting this structure. It was
    designed to store data in a distributed fashion to facilitate decentralized control
    and efficient operation, and included flexible and extensible mechanisms for name
    registration and resolution. This new name system for TCP/IP was called the *Domain
    Name System (DNS)*.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去几年里，许多工程师致力于创建一个系统，这个系统能够满足当时TCP/IP互联网的需求，同时也能适应未来的需求。新的命名系统基于网络按层次划分成组和子组，名称反映了这种结构。它被设计成以分布式方式存储数据，以促进分散控制和高效运行，并包括灵活和可扩展的名称注册和解析机制。这个新的TCP/IP命名系统被称为*域名系统（DNS）*。
- en: We'll begin our look at DNS in this introductory chapter. I start by providing
    an overview of DNS's development, history, and standards, continuing the history
    begun in the overall look at TCP/IP name systems. I discuss the design goals and
    objectives of the creators of DNS, to help you understand better what its designers
    were trying to do. I then talk about the main components of DNS and the functions
    it performs, relating these to the basic functions explained in the overview section
    on name systems.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本章中开始对DNS的探讨。我首先提供DNS的发展、历史和标准的概述，继续在TCP/IP名称系统的整体概述中开始的历史。我讨论了DNS创建者的设计目标和目的，以帮助您更好地理解设计者试图做什么。然后，我谈论DNS的主要组件和它执行的功能，将这些与在名称系统概述部分解释的基本功能联系起来。
- en: DNS Overview, History, and Standards
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS概述、历史和标准
- en: The aversion that most people have to trying to remember numeric identifiers
    led to the very quick adoption of a name system for devices on the predecessors
    of what we now call the Internet. In the 1960s and early 1970s, names were given
    to machines, and these names were maintained in host tables. The TCP/IP host table
    name system (described in [Chapter 51](ch51.html "Chapter 51. TCP/IP NAME SYSTEMS
    OVERVIEW AND THE HOST TABLE NAME SYSTEM")) worked well for a number of years,
    with a centrally maintained master list used by device administrators to ensure
    a consistent view of the network.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数人对尝试记住数字标识符的反感导致了为我们现在所说的互联网的先驱设备快速采用命名系统。在20世纪60年代和70年代初，机器被赋予名称，这些名称被保存在主机表中。TCP/IP主机表名称系统（在第51章中描述[Chapter 51](ch51.html
    "Chapter 51. TCP/IP NAME SYSTEMS OVERVIEW AND THE HOST TABLE NAME SYSTEM")）在多年中运行良好，一个由设备管理员使用的集中维护的主列表确保了网络的一致视图。
- en: Unfortunately, such a system works well only when the number of devices is small.
    As the budding Internet grew, numerous weaknesses became apparent in the host
    table method, as I detailed in [Chapter 51](ch51.html "Chapter 51. TCP/IP NAME
    SYSTEMS OVERVIEW AND THE HOST TABLE NAME SYSTEM"). Furthermore, the problems with
    the system weren't something that could be easily patched with small changes;
    the problems were structural, part of the basic idea of host tables as a whole.
    A completely new approach was needed for how names would be used on the Internet.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，这样的系统只有在设备数量较少时才能很好地工作。随着互联网的成长，主机表方法中的许多弱点变得明显，正如我在第51章中详细描述的那样[Chapter 51](ch51.html
    "Chapter 51. TCP/IP NAME SYSTEMS OVERVIEW AND THE HOST TABLE NAME SYSTEM")。此外，系统的问题并不是可以通过小改动轻易修复的；问题是结构性的，是主机表整体基本想法的一部分。对于如何在互联网上使用名称，需要一种全新的方法。
- en: Early DNS Development and the Move to Hierarchical Domains
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 早期DNS发展和向分层域的转变
- en: The most important paradigm shift made by the TCP/IP engineers was the decision
    to change the name system from one that used a single, centralized list of names
    to a more decentralized system. The idea was to create a structured topology where
    names were organized into *domains*. This idea was first introduced in RFC 799,
    "Internet Name Domains," published in September 1981.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: TCP/IP工程师做出的最重要的范式转变是决定将名称系统从使用单一集中式名称列表转变为更加分散的系统。这个想法是在1981年9月发布的RFC 799，“互联网名称域”中首次提出的，即在结构化的拓扑中组织名称为*域*。
- en: RFC 799 actually describes more the mechanics of delivering electronic mail
    messages between domains than the domains themselves. Interestingly, the standard
    assumes a flat structure of domains in its discussion, while mentioning the possibility
    of creating a hierarchical structure instead. It was the decision to go to such
    a hierarchical name space for domains that led to the creation of DNS in the form
    in which we know it today.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 799实际上更多地描述了在域之间传递电子邮件消息的机制，而不是域本身。有趣的是，该标准在其讨论中假设域具有平面结构，同时提到了创建层次结构结构的可能性。正是决定采用这种层次名称空间来创建DNS，才导致了我们今天所知道的DNS形式的产生。
- en: 'Many RFC documents describing the development of different aspects of DNS were
    published in the early 1980s. The first real milestone in DNS''s history was probably
    the publishing, in November 1983, of three initial documents discussing DNS concepts:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在20世纪80年代初，发布了大量描述DNS不同方面发展的RFC文档。DNS历史上的第一个真正里程碑可能是1983年11月发布的三个初始文档，讨论了DNS概念：
- en: RFC 881, "Domain Names Plan and Schedule," discusses the issues involved in
    implementing the new DNS and how to migrate from the older host table system.
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 881，“域名计划与时间表”，讨论了实施新DNS以及如何从较旧的宿主表系统迁移的问题。
- en: 'RFC 882, "Domain Names: Concepts and Facilities," describes the concepts and
    functional elements of DNS in fairly extensive detail. It includes a discussion
    of the name space, resource records, and how name servers and resolvers work.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 882，“域名：概念与设施”，相当详细地描述了DNS的概念和功能元素。它包括对名称空间、资源记录以及名称服务器和解析器如何工作的讨论。
- en: 'RFC 883, "Domain Names: Implementation Specification," provides the nitty-gritty
    details on DNS messaging and operation.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 883，"域名：实现规范"，提供了DNS消息和操作的详细细节。
- en: Standardization of DNS and Initial Defining Standards
  id: totrans-221
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS标准化和初始定义标准
- en: 'The three "Domain Names" RFC documents published in November 1983 were discussed
    frequently over the months that followed, and the basic DNS mechanism was revised
    many times. Several subsequent RFCs were published, updating the DNS transition
    plan and schedule. Finally, in November 1987, agreement on the operation of the
    system was finalized, and four new RFCs were published that formalized the DNS
    system for the first time:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 1983年11月发布的三个“域名”RFC文档在接下来的几个月里被频繁讨论，基本的DNS机制被多次修订。随后还发布了几个后续RFC，更新了DNS过渡计划和时间表。最后，在1987年11月，关于系统操作的协议最终确定，并发布了四篇新的RFC，首次正式化了DNS系统：
- en: RFC 1032, "Domain Administrators Guide," specifies administrative procedures
    and policies for those running a domain.
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1032，“域名管理员指南”，规定了运行域的管理程序和策略。
- en: RFC 1033, "Domain Administrators Operations Guide," provides technical details
    on how to operate a DNS server, including how to maintain portions of the DNS
    distributed database of names.
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1033，"域名管理员操作指南"，提供了关于如何操作DNS服务器的技术细节，包括如何维护DNS分布式数据库中的名称部分。
- en: RFC 1034, "Domain Names - Concepts and Facilities," replaces RFC 882, providing
    an introduction and conceptual description of DNS.
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1034，“域名 - 概念与设施”，取代了RFC 882，提供了DNS的介绍和概念描述。
- en: RFC 1035, "Domain Names - Implementation and Specification," is an update to
    RFC 883, specifying how DNS works in detail, including resource record definitions,
    message types, master file format, and resolver and name server implementation
    details.
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1035，"域名 - 实现与规范"，是RFC 883的更新，详细说明了DNS的工作原理，包括资源记录定义、消息类型、主文件格式以及解析器和名称服务器的实现细节。
- en: These last two documents, RFCs 1034 and 1035, are considered the definitive
    original specification for the operation of DNS. While they are now many years
    old, they still provide the essential description of how DNS works.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 这最后两个文档，RFC 1034和1035，被认为是DNS操作的权威原始规范。虽然它们现在已经很多年了，但它们仍然提供了DNS工作原理的基本描述。
- en: 'As the Internet has grown to include thousands and then millions of sites,
    the importance of DNS has grown as well. Today, most people use DNS almost every
    time they use TCP/IP to access the Internet. It has gone from an alternative form
    of addressing for applications to one that is preferred by most users. It is also
    an important building block of the more complete application layer addressing
    scheme developed for TCP/IP: Uniform Resource Identifiers (URIs) (described in
    [Chapter 70](ch70.html "Chapter 70. TCP/IP APPLICATION LAYER ADDRESSING: UNIFORM
    RESOURCE IDENTIFIERS, LOCATORS, AND NAMES (URIS, URLS, AND URNS)")).'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 随着互联网的发展，包括成千上万个网站，DNS的重要性也随之增长。如今，大多数人几乎每次使用TCP/IP访问互联网时都会使用DNS。它已经从应用程序的替代寻址形式转变为大多数用户首选的形式。它也是为TCP/IP开发的更完整的应用层寻址方案的一个重要组成部分：统一资源标识符（URIs）（在[第70章](ch70.html
    "第70章。TCP/IP应用层寻址：统一资源标识符、定位符和名称（URIs、URLs和URNs）")中描述）。
- en: The hierarchical nature of the DNS name space has allowed the Internet to grow
    by making the assignment and mapping of names manageable. The authority structure
    (which defines who is in charge of parts of the name space) is also hierarchical,
    giving local administrators control over the names of devices they manage, while
    ensuring name consistency across the hierarchy as a whole. The distribution of
    data using many name servers and a standardized resolution technique following
    a standard message protocol provides efficiency and reliability. These concepts
    will become clearer as we explore DNS more completely in later sections of this
    chapter.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: DNS名称空间的分层性质使得互联网能够通过使名称的分配和映射变得可管理来增长。权威结构（它定义了谁负责名称空间的部分）也是分层的，这使本地管理员能够控制他们管理的设备名称，同时确保整个层次结构中的名称一致性。使用多个名称服务器和遵循标准消息协议的标准解析技术来分配数据提供了效率和可靠性。随着我们在本章后面的部分更全面地探索DNS，这些概念将变得更加清晰。
- en: DNS Evolution and Important Additional Standards
  id: totrans-230
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS的发展与重要附加标准
- en: 'TCP/IP and the Internet have both changed a lot since 1987, of course, and
    DNS has also had to change. Many RFCs have been written since the base documents
    were published in the late 1980s, most of which further clarify the operation
    of DNS, expand on its capabilities, or define new features for it. You can find
    all of these by searching for "domain" or "DNS" in a list of RFCs. There are dozens
    of these. The following are a few of the more interesting ones:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 自从1987年以来，TCP/IP和互联网都发生了很大的变化，当然，DNS也必须做出相应的改变。自1980年代末基础文档发布以来，已经编写了许多RFC，其中大部分进一步阐明了DNS的操作，扩展了其功能，或为其定义了新的特性。您可以通过在RFC列表中搜索“域名”或“DNS”来找到所有这些内容。这些RFC有数十个。以下是一些更有趣的例子：
- en: RFC 1183, "New DNS RR Definitions," defines several new experimental resource
    record types. Other subsequent RFCs have also defined new resource records.
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1183，“新的DNS RR定义”，定义了几个新的实验性资源记录类型。其他后续的RFC也定义了新的资源记录。
- en: RFC 1794, "DNS Support for Load Balancing," discusses load balancing for greater
    performance in DNS servers.
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1794，“DNS对负载均衡的支持”，讨论了DNS服务器中为了提高性能的负载均衡。
- en: RFC 1995, "Incremental Zone Transfer in DNS," specifies a new feature that allows
    only part of a zone to be transferred to a secondary name server for efficiency.
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1995，“DNS中的增量区域传输”，指定了一个新功能，该功能允许只将区域的一部分传输到辅助名称服务器以提高效率。
- en: RFC 1996, "A Mechanism for Prompt Notification of Zone Changes (DNS NOTIFY),"
    adds a new message type to DNS to allow primary (authoritative) DNS servers to
    tell secondary servers that information has changed in the main database.
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 1996，“快速通知区域更改（DNS NOTIFY）的机制”，向DNS添加了一种新的消息类型，允许主（权威）DNS服务器告诉辅助服务器主数据库中的信息已更改。
- en: RFC 2136, "Dynamic Updates in the Domain Name System (DNS UPDATE)," describes
    a technique for dynamically making resource record changes in the DNS database
    (also called *Dynamic DNS*).
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 2136，“域名系统（DNS）中的动态更新（DNS UPDATE）”，描述了一种在DNS数据库中动态进行资源记录更改的技术（也称为*动态DNS*）。
- en: RFC 2181, "Clarifications to the DNS Specification," discusses several issues
    with the main DNS standards as defined in RFCs 1034 and 1035 and how to address
    them.
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 2181，“DNS规范的澄清”，讨论了在RFC 1034和RFC 1035中定义的主要DNS标准中存在的一些问题以及如何解决这些问题。
- en: RFC 2308, "Negative Caching of DNS Queries (DNS NCACHE)," specifies the operation
    of negative caching, a feature that allows a server to maintain information about
    names that do not exist more efficiently.
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RFC 2308，“DNS查询的负缓存（DNS NCACHE）”，指定了负缓存的操作，这是一个允许服务器更有效地维护关于不存在名称的信息的功能。
- en: DNS Adaptation for Internet Protocol Version 6
  id: totrans-239
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS适应互联网协议第6版
- en: Version 6 of the Internet Protocol (IPv6, covered in [Part II-4](pt07.html "Part II-4. INTERNET
    PROTOCOL VERSION 6 (IPV6)")) was developed starting in the mid-1990s and brought
    with it the need to make changes and enhancements to the operation of DNS. (Even
    though DNS operates at the higher layers, it deals intimately with addresses,
    and addresses have changed in IPv6, as discussed in [Chapter 25](ch25.html "Chapter 25. IPV6
    ADDRESSING").) The modifications required to allow DNS to support IPv6 were first
    defined in RFC 1886, "IPv6 DNS Extensions," which was part of a group of RFCs
    that laid out the fundamentals of IPv6\. Several subsequent standards have been
    published since that time; these are discussed in the section on IPv6 DNS near
    the end of [Chapter 57](ch57.html "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE
    RECORD, AND MASTER FILE FORMATS").
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网协议第6版（IPv6，在第II-4部分中介绍[Part II-4](pt07.html "Part II-4. INTERNET PROTOCOL
    VERSION 6 (IPV6)"))从20世纪90年代中期开始开发，并带来了对DNS操作进行更改和改进的需求。（尽管DNS在高层运行，但它与地址紧密相关，而地址在IPv6中已经改变，如第25章[Chapter 25](ch25.html
    "Chapter 25. IPV6 ADDRESSING")中所述。）允许DNS支持IPv6所需的修改首先在RFC 1886，“IPv6 DNS扩展”中定义，这是介绍IPv6基础的一组RFC的一部分。从那时起，已经发布了几个后续标准；这些标准在[第57章](ch57.html
    "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD, AND MASTER FILE FORMATS")中IPv6
    DNS部分进行了讨论。
- en: The rest of this chapter provides a more complete overview of DNS and its development,
    by discussing the design goals of its creators and the protocol's key characteristics.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的其余部分通过讨论其创造者的设计目标和协议的关键特性，提供了对DNS及其发展的更全面概述。
- en: DNS Design Goals, Objectives, and Assumptions
  id: totrans-242
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS设计目标、目标和假设
- en: As we just saw, the elapsed time from the first RFC discussing TCP/IP domain
    names to the publishing of the official standards describing the operation of
    DNS was more than six years. This is a very long time for the development of a
    system, but it isn't surprising. A lot of thought had to go into the creation
    of DNS, to be certain that it would meet all of the many demands that would be
    placed on it.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们刚才看到的，从讨论TCP/IP域名系统的第一个RFC到发布描述DNS操作的官方标准，所经过的时间超过了六年。对于一个系统的发展来说，这是一个非常长的时间，但这并不令人惊讶。在创建DNS时，必须投入大量的思考，以确保它能够满足所有即将对其提出的众多需求。
- en: The first problem was that the creators of DNS needed to worry about both how
    to define the new system and how to migrate from the old one. Considerable time
    was spent figuring out how all the existing hosts would be moved over to the new
    DNS name space and how the new protocols for exchanging DNS information would
    be implemented on them.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个问题是DNS的创造者需要担心如何定义新系统以及如何从旧系统迁移。他们花费了大量时间来弄清楚如何将所有现有的主机迁移到新的DNS命名空间，以及如何在它们上实施交换DNS信息的新的协议。
- en: The creators of DNS knew they were making the new system because the old one
    didn't scale very well. They also knew that if migration was a difficult problem
    with the small number of hosts in existence at that time, it would be much more
    difficult if they needed to go to another new system in the future. This made
    the key challenge in DNS to create a system that would meet the needs of the Internet
    not just the day it was introduced, or the following year, but even ten years
    or more down the road.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: DNS的创造者知道他们正在创建一个新系统，因为旧系统扩展性并不好。他们也知道，如果当时存在的少量主机迁移已经是一个难题，那么如果他们未来需要迁移到另一个新系统，这将会更加困难。这使得DNS的关键挑战在于创建一个能够满足互联网需求的系统，不仅是在它被引入的那一天，或下一年，甚至是在十年或更长时间之后。
- en: DNS Design Goals and Objectives
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS设计目标和目标
- en: 'Back in the 1980s, no one had any idea how the Internet would grow as it has
    in the last decade. That DNS still works as well as it does is a testament to
    the skill of its designers. Much of this success is due to the early groundwork
    put into the design of the system. DNS engineers documented some of what they
    considered to be the main design goals in creating it, which can help us understand
    not just what DNS does, but also why. These design goals and objectives are as
    follows:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 回到20世纪80年代，没有人能想到互联网会像过去十年那样增长。DNS仍然像现在这样工作，是对其设计师技能的证明。这种成功的大部分归功于在系统设计早期所打下的基础。DNS工程师记录了他们认为在创建过程中的一些主要设计目标，这有助于我们不仅了解DNS做什么，还了解为什么这样做。以下设计目标和目标如下：
- en: '**Creation of a Global, Scalable, Consistent Name Space** The name space needed
    to be capable of spanning a large, global internetwork containing millions of
    machines. It was necessary that it provide a consistent and predictable method
    for naming devices and resources, so they could be easily found. It was also,
    obviously, essential that name duplication be avoided, even when conflicts could
    potentially be between devices on different continents.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '**创建一个全球、可扩展、一致的命名空间** 命名空间需要能够跨越包含数百万台机器的大型、全球互联网。它必须提供一种一致且可预测的方法来命名设备和资源，以便它们可以轻松找到。显然，避免名称重复也是必不可少的，即使潜在的冲突可能发生在不同大陆的设备之间。'
- en: '**Local Control over Local Resources** Administrators of networks and small
    internetworks on the Internet as a whole needed to be able to have control over
    the naming of their own devices. It would not be acceptable to need to go through
    a central authority for naming every single object, nor would it be acceptable
    for every administrator to need to know the names of everyone else''s networks
    and machines.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '**对本地资源的本地控制** 互联网上整个网络和小型互联网网络的管理员需要能够控制他们自己的设备命名。对于需要通过中央权威机构为每个对象命名，或者每个管理员都需要知道其他所有人的网络和机器的名称，这都是不可接受的。'
- en: '**Distributed Design to Avoid Bottlenecks** The designers of DNS knew that
    they would need to abandon the idea of a centralized database in favor of a distributed
    approach to data storage, to avoid the bottlenecks that would result in using
    DNS with many devices.'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '**分布式设计以避免瓶颈** DNS的设计者知道他们需要放弃集中式数据库的想法，转而采用分布式数据存储方法，以避免使用DNS时因多设备使用而产生的瓶颈。'
- en: '**Application Universality** The system needed to be general enough that it
    would support a wide variety of applications. For example, it needed to support
    host identification, mail delivery, and other functions.'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '**应用通用性** 该系统需要足够通用，以支持各种应用。例如，它需要支持主机识别、邮件投递和其他功能。'
- en: '**Multiple Underlying Protocol Support** DNS needed to be inherently able to
    support different underlying protocols. Many people don''t realize, for example,
    that DNS can support not just IP addresses, but other types of addresses, simply
    because IP is so dominant in networking today.'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '**多种底层协议支持** DNS需要能够内在地支持不同的底层协议。许多人没有意识到，例如，DNS不仅可以支持IP地址，还可以支持其他类型的地址，这仅仅是因为在今天的网络中IP如此主导。'
- en: '**Hardware Universality** Both large and small computers needed to be able
    to use the system.'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: '**硬件通用性** 大型和小型计算机都需要能够使用该系统。'
- en: 'Keep these objectives in mind as you learn more about DNS, and they will help
    you understand better why certain design attributes were chosen. For example,
    if we consider the first two objectives listed, they seem almost contradictory:
    How can we have a global name space with unique names if individual administrators
    were able to assign local names? As you will see, this is where the power of the
    DNS hierarchical name space shines through.'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 在你学习更多关于DNS的知识时，请牢记这些目标，它们将帮助你更好地理解为什么选择了某些设计属性。例如，如果我们考虑列出的前两个目标，它们似乎几乎相互矛盾：如果个人管理员能够分配本地名称，我们如何能有一个具有唯一名称的全局命名空间？正如你将看到的，这正是DNS分层命名空间的强大之处得以体现的地方。
- en: DNS Design Assumptions
  id: totrans-255
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS设计假设
- en: 'The design goals tell us what DNS''s creators wanted to make sure the new system
    addressed. In addition, the engineers that worked on the protocol''s implementation
    details needed to make decisions based on certain assumptions of how it would
    be used:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 设计目标告诉我们DNS的创造者希望确保新系统能够解决的问题。此外，参与协议实现细节的工程师需要根据某些关于其使用方式的假设做出决策：
- en: '**Rapidly Growing Database Size** By the mid-1980s, it was obvious that the
    DNS database of names would start out rather small but would grow quickly. The
    system needed to be capable of handling this rapid growth.'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据库规模快速增长** 到1980年代中期，很明显，DNS名称数据库将从一个相对较小的规模开始，但会迅速增长。系统需要能够处理这种快速增长。'
- en: '**Variable Data Modification Rate** Most of the data in the name database would
    change only infrequently, but some data would change more often than that. This
    meant flexibility would be required in how data changes were handled and how information
    about those changes was communicated.'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: '**可变数据修改率** 命名数据库中的大部分数据只会偶尔更改，但有些数据会比这更频繁地更改。这意味着在处理数据更改以及如何传达这些更改的信息方面需要灵活性。'
- en: '**Delegatable Organizational Responsibility** Responsibility for portions of
    the name database would be delegated primarily on the basis of organizational
    boundaries. Many organizations would also run their own hardware and software
    to implement portions of the overall system.'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '**可委托的组织责任** 名称数据库的部分责任将主要基于组织边界进行委托。许多组织也会运行自己的硬件和软件来实施整个系统的一部分。'
- en: '**Relative Importance of Name Information Access** It was assumed that the
    most important thing about DNS was providing reliable name resolution, so the
    system was created so that it was always possible for a user to access a name
    and determine its address. A key decision in creating the system was deciding
    that even if the information were slightly out of date, it was better than no
    information at all. If a name server were unable to provide the latest data to
    fill a request, it would return the best information it had available.'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: '**名称信息访问的相对重要性** 假设DNS最重要的任务是提供可靠的名字解析，因此系统被创建得总是允许用户访问名称并确定其地址。在创建系统时的一个关键决策是，即使信息略有过时，也比没有信息要好。如果名称服务器无法提供最新数据来满足请求，它将返回它拥有的最佳信息。'
- en: '**Handling of Requests for Missing Information** Since the name data was to
    be distributed, a particular name server might not have the information requested
    by a user. In this case, the name server should not just say, "I don''t know."
    It should provide a referral to a more likely source of the information or take
    care of finding the data by issuing its own requests. This led to the creation
    of the several DNS name resolution techniques: local, iterative, and recursive.'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: '**处理缺失信息请求** 由于名称数据将被分发，一个特定的名称服务器可能没有用户请求的信息。在这种情况下，名称服务器不应只是说，“我不知道。”它应提供对更有可能提供信息的来源的引用，或者通过发出自己的请求来寻找数据。这导致了几个DNS名称解析技术的创建：本地、迭代和递归。'
- en: '**Use of Caching for Performance** From the start, it was assumed that DNS
    would make extensive use of caching to avoid unnecessary queries to servers containing
    parts of the distributed name database.'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '**缓存的使用以提高性能** 从一开始，就假设DNS会大量使用缓存来避免对包含分布式名称数据库部分的服务器进行不必要的查询。'
- en: Arguably, a lot more assumptions were made in creating this system, as is the
    case in the development of every system. For example, DNS needed to make assumptions
    about how exactly data would be stored, the transport mechanism for sending messages,
    the role of administrators, and so on. You'll learn more about these as we go
    through our look at the system.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建这个系统时，可以说做出了很多假设，正如在开发每个系统时的情况一样。例如，DNS需要对其数据的确切存储方式、消息传输机制、管理员的角色等做出假设。随着我们逐步了解该系统，您将了解更多关于这些内容。
- en: DNS Components and General Functions
  id: totrans-264
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS组件和一般功能
- en: 'To meet the many objectives set for it by its designers, DNS requires a great
    deal of functionality. It is a true name system with the emphasis on *system*,
    and as such, is considerably more complex than the host table name system used
    earlier in TCP/IP. In [Chapter 50](ch50.html "Chapter 50. NAME SYSTEM ISSUES,
    CONCEPTS, AND TECHNIQUES"), I divided the many tasks of a full-featured name system
    into three categories. DNS includes functions in all of these categories, and
    so using these categories is a good way to take a high-level look at the way DNS
    works (see [Figure 52-1](ch52s03.html#dns_functions_dns_consists_of_three_main
    "Figure 52-1. DNS functions DNS consists of three main functional categories:
    name space, name registration, and name servers/resolution. Each of these consists
    of a number of specific tasks and responsibilites.")).'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 为了满足其设计者设定的许多目标，DNS需要大量的功能。它是一个真正的名称系统，强调的是*系统*，因此比TCP/IP早期使用的宿主表名称系统复杂得多。在[第50章](ch50.html
    "第50章。名称系统问题、概念和技术")中，我将一个功能齐全的名称系统的许多任务分为三个类别。DNS包括所有这些类别的功能，因此使用这些类别是了解DNS工作方式的好方法（参见[图52-1](ch52s03.html#dns_functions_dns_consists_of_three_main
    "图52-1。DNS功能 DNS由三个主要功能类别组成：名称空间、名称注册和名称服务器/解析。每个类别都包含许多具体任务和责任。")）。
- en: '![DNS functions DNS consists of three main functional categories: name space,
    name registration, and name servers/resolution. Each of these consists of a number
    of specific tasks and responsibilites.](httpatomoreillycomsourcenostarchimages288153.png.jpg)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![DNS功能 DNS由三个主要功能类别组成：名称空间、名称注册和名称服务器/解析。每个类别都包含许多具体任务和责任。](httpatomoreillycomsourcenostarchimages288153.png.jpg)'
- en: 'Figure 52-1. DNS functions DNS consists of three main functional categories:
    name space, name registration, and name servers/resolution. Each of these consists
    of a number of specific tasks and responsibilites.'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 图 52-1. DNS 功能 DNS 由三个主要功能类别组成：域名空间、域名注册和域名服务器/解析。每个类别都包含一系列具体任务和责任。
- en: DNS Name Space
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 域名空间
- en: DNS uses a hierarchical name space consisting of a single, complex, multiple-level
    structure into which all names in the system fit. The name space is organized
    starting from a single root into which containers (called *domains*) are placed.
    Each can contain either individual device names or more specific subcontainers.
    The overall structure is somewhat analogous to how a directory system on a computer
    organizes files from general to specific, using an arbitrary structure that can
    be optimized to various needs. A specific syntax is used to define valid names,
    and special terminology is used to describe parts of the structure and identify
    domain names, from the root down to the device level.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 使用一个由单一、复杂、多级结构组成的层次化域名空间，系统中的所有名称都适合这个结构。域名空间从单个根开始组织，其中放置了容器（称为 *域名*）。每个容器可以包含单个设备名称或更具体的子容器。整体结构在某种程度上类似于计算机目录系统从一般到具体组织文件的方式，使用一种可以优化到各种需求的任意结构。使用特定的语法来定义有效名称，并使用特殊术语来描述结构的一部分和识别域名，从根到设备级别。
- en: Name Registration (Including Administration and Authorities)
  id: totrans-270
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 域名注册（包括管理和权限）
- en: DNS name registration is used to enter individual names into the DNS distributed
    database. DNS uses a hierarchical arrangement of authorities that complements
    the hierarchical name space. A centralized authority determines the overall shape
    and structure of the name space and handles registration of names at the highest
    level. Authority is then *delegated* to different organizations to manage various
    parts of the name space. A set of universal policies controls the registration
    process and deals with problems and conflicts.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 域名注册用于将单个名称输入到 DNS 分布式数据库中。DNS 使用一种层次化的权限安排，这与层次化的域名空间相辅相成。一个中央权限机构决定了域名空间的整体形状和结构，并处理最高级别的名称注册。权限随后被
    *委托* 给不同的组织来管理域名空间的各个部分。一套通用政策控制注册过程，并处理问题和冲突。
- en: Name Resolution
  id: totrans-272
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 域名解析
- en: DNS uses a powerful, distributed, client/server name resolution mechanism. This
    is probably the area where the most attention needed to be put into the design
    of DNS, to ensure that it could scale to handle millions and eventually billions
    of name resolution requests each day.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 使用了一种强大、分布式、客户端/服务器模式的域名解析机制。这可能是 DNS 设计中需要投入最多关注的地方，以确保其能够扩展以处理每天数百万甚至数十亿次的域名解析请求。
- en: 'The name resolution process is implemented using two basic software elements
    that play the role of server and client: name servers and name resolvers.'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 域名解析过程是通过两个基本的软件元素来实现的，这两个元素分别扮演服务器和客户端的角色：域名服务器和域名解析器。
- en: DNS name servers are special programs running on hardware servers that are the
    heart of DNS. Servers are maintained by organizations that have administrative
    control over part of the DNS name space. They contain *resource records* that
    describe names, addresses, and other characteristics of those portions of the
    name space. As such, the servers themselves are arranged into a hierarchy analogous
    to that of the name space, although not identical in structure.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 域名服务器是在硬件服务器上运行的特殊程序，是 DNS 的核心。这些服务器由拥有 DNS 域名空间部分管理权的组织维护。它们包含 *资源记录*，这些记录描述了该域名空间部分的名字、地址和其他特性。因此，服务器本身被组织成一个类似于域名空间的层次结构，尽管在结构上并不完全相同。
- en: The main job of name servers is to receive requests for name resolution and
    respond with either the data requested from the database or with the name of another
    name server that will lead to the requested information. Name servers are also
    responsible for data caching and other administrative tasks to ensure efficient
    operation of the system as a whole.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 域名服务器的主要任务是接收域名解析请求，并响应请求，要么提供数据库中请求的数据，要么提供指向另一个将导致所需信息的域名服务器的名称。域名服务器还负责数据缓存和其他管理任务，以确保整个系统的有效运行。
- en: Name resolvers are the usual clients in the name resolution process. When a
    user makes reference to a name in a networking application, the name is passed
    to the resolver, which issues a request to a name server. Depending on the configuration,
    more than one request may be needed, and several different resolution processes
    may be combined to find the needed information. Resolvers also may employ caching
    or implement other features.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 名称解析器是名称解析过程中的常规客户端。当用户在网络应用程序中引用一个名称时，该名称会被传递给解析器，解析器向名称服务器发出请求。根据配置，可能需要多个请求，并且可能将几个不同的解析过程组合起来以找到所需的信息。解析器还可能使用缓存或实现其他功能。
- en: Note
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*The division between resolvers and servers is based on roles. As you''ll see
    when we look at name resolution, name servers may also function as clients in
    certain exchanges of data. See [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION
    CONCEPTS AND RESOLVER OPERATIONS") for an explanation of this apparent paradox*.'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '*解析器和服务器之间的划分基于角色。当我们查看名称解析时，你将看到名称服务器也可能在某些数据交换中充当客户端。参见[第56章](ch56.html "第56章。DNS解析概念和解析器操作")以了解这种看似矛盾的说明*。'
- en: If this seems a lot like the classic description of a name system that I gave
    in [Chapter 50](ch50.html "Chapter 50. NAME SYSTEM ISSUES, CONCEPTS, AND TECHNIQUES"),
    that's not a coincidence. DNS is considered *the* name system against which most
    others are usually compared. If you understand these high-level descriptions,
    then you already know the basics of how DNS works. The next three chapters delve
    into each of these three functional areas in more detail and will help you really
    learn how DNS does its thing.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这听起来很像我在[第50章](ch50.html "第50章。命名系统问题、概念和技术")中给出的经典命名系统描述，那不是巧合。DNS被认为是*唯一*的命名系统，通常与其他大多数命名系统进行比较。如果你理解了这些高级描述，那么你已经知道了DNS工作的基本原理。接下来的三章将更详细地探讨这三个功能区域，并将帮助你真正了解DNS是如何工作的。
- en: Tip
  id: totrans-281
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** As a complete name system, DNS provides numerous capabilities
    that implement each of the three basic name system functions. The DNS *name space*
    is hierarchical and is organized using a multilevel structure with particular
    naming rules. The DNS *name registration* system is based on the idea of a hierarchy
    of domains and registration authorities responsible for them. DNS *name resolution*
    is similarly hierarchical, and it is designed around interaction between *name
    resolver* and *name server* software components that consult databases of DNS
    *resource records* and communicate using a special messaging protocol to answer
    client queries.'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 作为完整的命名系统，DNS提供了实现三个基本命名系统功能的各种能力。DNS的*命名空间*是分层的，并使用具有特定命名规则的多级结构进行组织。DNS的*名称注册*系统基于域的层次结构和负责它们的注册机构的概念。DNS的*名称解析*也是分层的，它围绕*名称解析器*和*名称服务器*软件组件之间的交互设计，这些组件咨询DNS的*资源记录*数据库，并使用特殊的消息协议进行通信以回答客户端查询。'
- en: Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第53章。DNS命名空间、架构和术语
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-284
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: The name space is the most fundamental part of any name system, since it is
    what defines the ways that the names themselves are created. The name space tells
    us what form names may take and provides the rules for how they are created. Most
    important, it specifies the *architecture* of the names—the internal structure
    of names themselves. This, in turn, has a critical influence on how name registration
    and resolution work, making an examination of name space and architecture issues
    the obvious place to start in learning the details of the Domain Name System (DNS).
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 命名空间是任何命名系统的最基本部分，因为它定义了名称本身是如何创建的。命名空间告诉我们名称可能采取的形式，并提供了创建它们的规则。最重要的是，它指定了名称的*架构*——名称本身的内部结构。这反过来又对名称注册和解析的工作方式产生关键影响，使得对命名空间和架构问题的研究成为学习域名系统（DNS）细节的明显起点。
- en: In this chapter, I describe the concepts behind the DNS name space and its structure.
    I begin with an overview of the DNS name space and description of the hierarchical
    architecture it uses. I then explain the terminology often used to refer to parts
    of the name space. Next, I provide a formal description of DNS labels and the
    official and unofficial rules for creating domain names. I conclude with a description
    of domain name specifications, and I explain the concept of qualification and
    how fully qualified and partially qualified names differ.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我描述了DNS名称空间及其结构背后的概念。我首先概述了DNS名称空间及其使用的分层架构。然后，我解释了常用来指代名称空间各部分的术语。接下来，我提供了DNS标签的正式描述以及创建域名时的官方和非官方规则。最后，我描述了域名规范，并解释了资格的概念以及完全限定名和部分限定名的区别。
- en: DNS Domains and the DNS Hierarchical Name Architecture
  id: totrans-287
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS域和DNS分层名称架构
- en: The most important element of a name system's name space is its *name architecture*,
    which describes how names are constructed and interpreted. The architecture of
    DNS is, unsurprisingly, based on the concept of an abstraction called a *domain*.
    This is obviously a good place to start in explaining how DNS works.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 名称系统名称空间的最重要元素是其*名称架构*，它描述了名称是如何构建和解释的。DNS的架构显然是基于一个称为*域*的抽象概念。这显然是解释DNS如何工作的一个很好的起点。
- en: 'The Essential Concept in the DNS Name Space: Domains'
  id: totrans-289
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS名称空间中的基本概念：域
- en: Dictionary definitions of the word *domain* generally convey the notion of a
    sphere of influence or an area of control or rulership. An essential concept is
    that in various contexts, control or authority can be exerted at many different
    levels. One sphere of influence may contain smaller ones, which can, in turn,
    contain still smaller ones. This means that such domains are naturally arranged
    in a hierarchy.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: “域”这个词的词典定义通常传达了影响范围或控制或统治区域的概念。一个基本的概念是，在不同的语境中，控制或权威可以在许多不同的层面上施加。一个影响范围可能包含较小的范围，而这些较小的范围又可以包含更小的范围。这意味着这样的域自然地按层次排列。
- en: As an example, consider geopolitical domains. We have no centralized "world
    government" on earth, but we do have the United Nations, which deals with worldwide
    issues. At the next level down, we have individual countries. Some of these countries
    have divisions such as states and provinces. Still lower levels have counties,
    municipalities, neighborhoods, and individual residences or businesses. The "domains"
    are inherently hierarchical in organization.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 以地缘政治域为例。我们地球上没有集中的“世界政府”，但我们有联合国，它处理全球性问题。在下一级，我们有各个国家。一些国家有州和省这样的划分。更低的级别有县、市镇、社区以及单个住宅或企业。这些“域”在组织上天生就是分层的。
- en: DNS uses the word *domain* in a manner very similar to this, and it employs
    a hierarchical structure that works in much the same way as the geopolitical example.
    In DNS, a *domain* is defined as either a single object or a set of objects that
    have been collected together based on some type of commonality. Usually, in DNS,
    that commonality is that they are all administered by the same organization or
    authority, which makes the name hierarchy tightly linked to the notion of the
    DNS hierarchical authority structure (see [Chapter 54](ch54.html "Chapter 54. DNS
    NAME REGISTRATION, PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES")).
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: DNS使用“域”这个词的方式与这非常相似，并且它采用了一种分层结构，其工作方式与地缘政治示例非常相似。在DNS中，“域”被定义为单个对象或一组基于某种共同性收集在一起的对象。通常，在DNS中，这种共同性是它们都由同一个组织或权威机构管理，这使得名称层次紧密地与DNS分层权威结构（见[第54章](ch54.html
    "第54章。DNS名称注册、公共管理、区域和权威")）的概念相关联。
- en: Note
  id: totrans-293
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*The term domain is also used in other contexts in the world of networking.
    The most notable example of this is in Microsoft networking, where domain is also
    used to represent the notion of a collection of objects under common authority.
    However, the two types of domains are completely different and not related beyond
    this conceptual level*.'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: '*术语“域”在网络世界的其他语境中也被使用。最显著的例子是在微软网络中，其中“域”也用来表示一组在共同权威下集合的对象。然而，这两种类型的域在概念层面上完全不同，并且没有超出这一层面的关联*。'
- en: The DNS Hierarchical Tree Structure of Names
  id: totrans-295
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称的DNS分层树结构
- en: We could construct a tree diagram with the United Nations on top, with lines
    pointing to each of the countries in the world. Then, within the United States,
    we could draw lines to each of the states. Within each state, we could draw lines
    to each county, and so on. The result would be something that looks like an upside-down
    tree, as illustrated in [Figure 53-1](ch53.html#example_of_a_global_hierarchical_domain_
    "Figure 53-1. Example of a global hierarchical domain architecture This diagram
    shows an example of hierarchical architecture, based on political divisions. The
    United Nations is an umbrella organization representing (to one extent or another)
    all of the world's nations. It is the root of the tree; underneath it we find
    individual nations. Each nation then is further subdivided in a manner it chooses.
    For example, Canada has provinces and territories, and the United States has individual
    states. These can be further subdivided in any number of ways."). This is called
    a *tree structure*.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以构建一个树状图，将联合国置于顶部，线条指向世界上的每个国家。然后，在美国内部，我们可以画出线条指向每个州。在每个州内部，我们可以画出线条指向每个县，以此类推。结果将是一个倒置的树状结构，如图[图53-1](ch53.html#example_of_a_global_hierarchical_domain_
    "图53-1. 全球分层域架构示例 此图展示了基于政治划分的分层架构示例。联合国是一个代表（在某种程度上）世界上所有国家的伞状组织。它是树的根；在其下方我们发现各个国家。每个国家随后以它选择的方式进一步细分。例如，加拿大有省和地区，而美国有各个州。这些可以以任何数量的方式进一步细分。")所示。这被称为*树结构*。
- en: Tree structures are common in computing and networking. For example, trees are
    a type of topology used to connect networks into a local area network.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 树结构在计算和网络中很常见。例如，树是用于将网络连接成局域网的一种拓扑类型。
- en: For understanding DNS, the best example of a tree structure is the directory
    tree used to store files on a computer's hard disk. The root directory is at the
    top of the structure and may contain named files and/or named directories. Each
    directory can itself contain individual files or subdirectories, which can, in
    turn, contain their own subdirectories, and so on. The domain name structure in
    DNS is conceptually arranged in the same way, but instead of dealing with files,
    DNS deals with named objects, usually devices like Internet Protocol (IP) hosts.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 对于理解DNS来说，树结构的最佳例子是用于在计算机硬盘上存储文件的目录树。根目录位于结构顶部，可能包含命名文件和/或命名目录。每个目录本身可以包含单个文件或子目录，这些子目录又可以包含它们自己的子目录，以此类推。DNS中的域名结构在概念上以相同的方式排列，但DNS处理的是命名对象，通常是像互联网协议（IP）主机这样的设备。
- en: '![Example of a global hierarchical domain architecture This diagram shows an
    example of hierarchical architecture, based on political divisions. The United
    Nations is an umbrella organization representing (to one extent or another) all
    of the world''s nations. It is the root of the tree; underneath it we find individual
    nations. Each nation then is further subdivided in a manner it chooses. For example,
    Canada has provinces and territories, and the United States has individual states.
    These can be further subdivided in any number of ways.](httpatomoreillycomsourcenostarchimages288155.png.jpg)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![全球分层域架构示例 此图展示了基于政治划分的分层架构示例。联合国是一个代表（在某种程度上）世界上所有国家的伞状组织。它是树的根；在其下方我们发现各个国家。每个国家随后以它选择的方式进一步细分。例如，加拿大有省和地区，而美国有各个州。这些可以以任何数量的方式进一步细分。](httpatomoreillycomsourcenostarchimages288155.png.jpg)'
- en: Figure 53-1. Example of a global hierarchical domain architecture This diagram
    shows an example of hierarchical architecture, based on political divisions. The
    United Nations is an umbrella organization representing (to one extent or another)
    all of the world's nations. It is the root of the tree; underneath it we find
    individual nations. Each nation then is further subdivided in a manner it chooses.
    For example, Canada has provinces and territories, and the United States has individual
    states. These can be further subdivided in any number of ways.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图53-1. 全球分层域架构示例 此图展示了基于政治划分的分层架构示例。联合国是一个代表（在某种程度上）世界上所有国家的伞状组织。它是树的根；在其下方我们发现各个国家。每个国家随后以它选择的方式进一步细分。例如，加拿大有省和地区，而美国有各个州。这些可以以任何数量的方式进一步细分。
- en: The highest level is still the *root* of the tree. It contains a number of domains,
    each of which can contain individual objects (names) and/or lower-level domains.
    Lower-level domains can, in turn, have still lower-level domains, allowing the
    tree as a whole to take on an arbitrary structure.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 最高级别仍然是树的*根节点*。它包含多个域名，每个域名可以包含单个对象（名称）和/或低级别的域名。低级别域名反过来又可以有更低级别的域名，使得整个树可以具有任意结构。
- en: Like a directory structure, the DNS hierarchical name architecture allows names
    to be organized from most general to most specific. It also has complete flexibility,
    allowing us to arrange the structure in any way that we want. For example, we
    could make a name system that is structured exactly paralleling the geopolitical
    organization chart shown in [Figure 53-1](ch53.html#example_of_a_global_hierarchical_domain_
    "Figure 53-1. Example of a global hierarchical domain architecture This diagram
    shows an example of hierarchical architecture, based on political divisions. The
    United Nations is an umbrella organization representing (to one extent or another)
    all of the world's nations. It is the root of the tree; underneath it we find
    individual nations. Each nation then is further subdivided in a manner it chooses.
    For example, Canada has provinces and territories, and the United States has individual
    states. These can be further subdivided in any number of ways."). We could have
    the root of the name structure represent the United Nations and create a domain
    for each country. Then, for those countries that have states, we could create
    state domains within those country domains. Smaller countries not needing those
    domains could have city domains directly under the country domain. The hierarchy
    is flexible, because at each level, it can be given a suitable substructure.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于目录结构，DNS层次结构命名架构允许从最一般到最具体的组织名称。它还具有完全的灵活性，允许我们以任何我们想要的方式安排结构。例如，我们可以创建一个与[图53-1](ch53.html#example_of_a_global_hierarchical_domain_
    "图53-1. 全球层次域名架构示例 此图显示了一个基于政治划分的层次架构示例。联合国是一个伞形组织，代表（在某种程度上）世界上所有国家。它是树的根；在其下方我们发现各个国家。每个国家随后以它选择的方式进一步细分。例如，加拿大有省和地区，美国有各个州。这些可以以任何数量的方式进一步细分。")中显示的地理政治组织图完全平行的名称系统。我们可以让名称结构的根代表联合国，并为每个国家创建一个域名。然后，对于有州的那些国家，我们可以在那些国家域名内创建州域名。不需要这些域名的较小国家可以直接在国家域名下拥有城市域名。层次结构是灵活的，因为在每个级别，它都可以被赋予一个合适的子结构。
- en: Tip
  id: totrans-303
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The DNS name space is arranged into a *hierarchy of domains*
    shaped like an inverted tree. It is structurally similar to the directory structure
    of a file system, with a root that contains domains, each of which can contain
    subdomains and so forth.'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 域名空间被组织成一个类似倒置树的*域名层次结构*。它在结构上类似于文件系统的目录结构，有一个根节点，包含多个域名，每个域名可以包含子域名以及更多。'
- en: It's important to remember that every stand-alone internetwork can have its
    own name space and unique hierarchical structure. Many times, people conflate
    the idea of *a* DNS name space with *the* DNS name space. The latter refers to
    the DNS hierarchy used for the global Internet, and it's obvious that this deserves
    a great deal of attention. But it is just one possible arrangement, although an
    important one, of an infinite number of possible structures.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要记住，每个独立的互联网网络都可以有自己的域名空间和独特的层次结构。很多时候，人们会将*一个*域名空间的概念与*该*域名空间的概念混淆。后者指的是用于全球互联网的DNS层次结构，很明显，这值得极大的关注。但这只是无限多种可能结构中的一种可能安排，尽管它很重要。
- en: Note
  id: totrans-306
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*[Chapter 54](ch54.html "Chapter 54. DNS NAME REGISTRATION, PUBLIC ADMINISTRATION,
    ZONES, AND AUTHORITIES") provides more specific information about the Internet''s
    DNS hierarchy. As you''ll see, geopolitical structures are, in fact, used to assign
    names to some of the Internet''s computers, but other parts of the hierarchy are
    different*.'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第54章](ch54.html "第54章。DNS名称注册、公共管理、区域和权限")提供了关于互联网DNS层次结构的更具体信息。正如您将看到的，地缘政治结构实际上被用来为互联网的一些计算机分配名称，但层次结构的其他部分是不同的*。'
- en: DNS Structural Elements and Terminology
  id: totrans-308
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS结构元素和术语
- en: Now that we've reviewed the fundamentals of the DNS name space, let's look at
    its structure in more detail. At the same time, I'll define the many different
    terms used to refer to parts of the DNS domain name hierarchy.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经回顾了 DNS 名称空间的基本知识，让我们更详细地看看其结构。同时，我将定义许多用于指代 DNS 域名层次结构各部分的术语。
- en: DNS Tree-Related Terminology
  id: totrans-310
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 树相关术语
- en: 'As I explained in the previous section, the DNS name structure is shaped somewhat
    like a tree. The comparison between structured elements and trees is a common
    one in networking. The main difference between technology and biology is that
    DNS trees grow from the top down, instead of reaching for the sky. The analogy
    to a tree naturally leads to the use of several tree-related terms in describing
    the DNS name structure, some of which are illustrated in [Figure 53-2](ch53s02.html#dns_tree-related_and_domain-related_term
    "Figure 53-2. DNS tree-related and domain-related terminology The top of the DNS
    name space is the root of the tree, and it has no name. Under the root comes any
    number of top-level domains (TLDs). Within each of these can be placed second-level
    domains, then within those subdomains, and so forth. Some of the tree terminology
    used in DNS is also shown here. The portion of the tree with the light shading
    is one branch; the darker area highlights a smaller subbranch within that branch.
    The darkest nodes within that area are the leaves of that smaller branch of the
    tree."):'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我在上一节中解释的那样，DNS 名称结构在某种程度上类似于一棵树。在计算机网络中，结构化元素与树的比较是常见的。技术与生物学的区别在于 DNS 树是从上往下生长的，而不是向天空伸展。将树作为类比自然导致在描述
    DNS 名称结构时使用几个与树相关的术语，其中一些在[图 53-2](ch53s02.html#dns_tree-related_and_domain-related_term
    "图 53-2. DNS 树相关和域相关术语 DNS 名称空间的最顶层是树的根，它没有名称。在根下面可以有任意数量的顶级域（TLDs）。在这些顶级域中可以放置二级域，然后在这些子域中，以此类推。DNS
    中使用的某些树术语也在此处展示。浅色阴影的部分是一个分支；较暗的区域突出显示该分支内部的一个较小的子分支。该区域中最暗的节点是该较小分支的叶子。")中有说明。
- en: '**Root** This is the conceptual top of the DNS name structure. The *root* domain
    in DNS contains the entire structure. By definition, it has no name; it is *null*.'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '**根** 这是 DNS 名称结构的概念性顶部。DNS 中的 *根* 域包含整个结构。根据定义，它没有名称；它是 *空* 的。'
- en: '**Branch** A *branch* is any contiguous portion of DNS hierarchy. It consists
    of a domain and all the domains and objects within it. All branches connect together
    to the root, just as in a real tree. (Yes, it would be better if the root were
    called the *trunk*, but computer science majors apparently don''t take botany
    electives.)'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: '**分支** 一个 *分支* 是 DNS 层次结构中的任何连续部分。它由一个域及其内部的所有域和对象组成。所有分支都连接到根，就像在真实树木中一样。（是的，如果将根称为
    *树干* 会更好，但显然计算机科学专业的学生没有选修植物学选修课。）'
- en: '**Leaf** This is an end object in the structure; that is, a domain that doesn''t
    have anything underneath it. The analogy to a leaf being at the end of a sequence
    of branches is apt.'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: '**叶子** 这是结构中的末端对象；也就是说，一个下面没有任何内容的域。将叶子作为一系列分支的末端的类比是恰当的。'
- en: There is no specific term to refer to a domain that is not a leaf. These are
    sometimes called *interior nodes*, meaning that they are in the middle of the
    structure. A *node* is the generic computing term for an object in a topology
    or structure. So, in DNS, every node is a domain, and it may be an interior node
    that contains additional domains and/or objects or a leaf that is a specific,
    named device. The term *domain* is thus somewhat ambiguous, as it can refer to
    either a collection of objects that represents a branch of the tree or to a specific
    leaf.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 没有特定的术语来指代不是叶子的域。这些有时被称为 *内部节点*，意味着它们位于结构中间。*节点* 是拓扑或结构中对象的通用计算机术语。因此，在 DNS
    中，每个节点都是一个域，它可能是一个包含附加域和/或对象的内部节点，也可能是一个特定的、有名称的设备。因此，术语 *域* 有点含糊，因为它可以指代代表树的一个分支的对象集合，也可以指代一个特定的叶子。
- en: DNS Domain-Related Terminology
  id: totrans-316
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 域相关术语
- en: 'There are also several domain-like terms that are often used to refer to domains
    at different levels of the hierarchy. These terms are also shown in [Figure 53-2](ch53s02.html#dns_tree-related_and_domain-related_term
    "Figure 53-2. DNS tree-related and domain-related terminology The top of the DNS
    name space is the root of the tree, and it has no name. Under the root comes any
    number of top-level domains (TLDs). Within each of these can be placed second-level
    domains, then within those subdomains, and so forth. Some of the tree terminology
    used in DNS is also shown here. The portion of the tree with the light shading
    is one branch; the darker area highlights a smaller subbranch within that branch.
    The darkest nodes within that area are the leaves of that smaller branch of the
    tree."):'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: '还有几个类似域名的术语经常用来指代层次结构中不同级别的域名。这些术语也显示在[图53-2](ch53s02.html#dns_tree-related_and_domain-related_term
    "图53-2. DNS树相关和域名相关术语 DNS名称空间的顶部是树的根，它没有名称。在根下面可以有任意数量的顶级域名（TLDs）。在每个这些下面可以放置二级域名，然后在这些子域名下面，依此类推。这里也显示了DNS中使用的部分树术语。浅色阴影的部分是一个分支；较暗的区域突出显示该分支内的较小子分支。该区域内最暗的节点是该较小分支的叶子。"):'
- en: '**Root Domain** This is the root of the tree.'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '**根域名** 这是树的根。'
- en: '**Top-Level Domains (TLDs)** These are the highest-level domains directly under
    the root of the tree. They are also sometimes called *first-level domains*.'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: '**顶级域名（TLDs）** 这些是树根下面的最高级域名。它们有时也被称为*一级域名*。'
- en: '**Second-Level Domains** Shockingly enough, these are the domains located directly
    below the top-level domains.'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: '**二级域名** 令人惊讶的是，这些域名位于顶级域名直接下方。'
- en: '**Subdomains** In some contexts, this term refers only to domains that are
    located directly below the second-level domains.'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: '**子域名** 在某些上下文中，这个术语仅指位于二级域名直接下方的域名。'
- en: '![DNS tree-related and domain-related terminology The top of the DNS name space
    is the root of the tree, and it has no name. Under the root comes any number of
    top-level domains (TLDs). Within each of these can be placed second-level domains,
    then within those subdomains, and so forth. Some of the tree terminology used
    in DNS is also shown here. The portion of the tree with the light shading is one
    branch; the darker area highlights a smaller subbranch within that branch. The
    darkest nodes within that area are the leaves of that smaller branch of the tree.](httpatomoreillycomsourcenostarchimages288157.png)'
  id: totrans-322
  prefs: []
  type: TYPE_IMG
  zh: '![DNS树相关和域名相关术语 DNS名称空间的顶部是树的根，它没有名称。在根下面可以有任意数量的顶级域名（TLDs）。在每个这些下面可以放置二级域名，然后在这些子域名下面，依此类推。这里也显示了DNS中使用的部分树术语。浅色阴影的部分是一个分支；较暗的区域突出显示该分支内的较小子分支。该区域内最暗的节点是该较小分支的叶子。](httpatomoreillycomsourcenostarchimages288157.png)'
- en: Figure 53-2. DNS tree-related and domain-related terminology The top of the
    DNS name space is the root of the tree, and it has no name. Under the root comes
    any number of top-level domains (TLDs). Within each of these can be placed second-level
    domains, then within those subdomains, and so forth. Some of the tree terminology
    used in DNS is also shown here. The portion of the tree with the light shading
    is one branch; the darker area highlights a smaller subbranch within that branch.
    The darkest nodes within that area are the leaves of that smaller branch of the
    tree.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 图53-2. DNS树相关和域名相关术语 DNS名称空间的顶部是树的根，它没有名称。在根下面可以有任意数量的顶级域名（TLDs）。在每个这些下面可以放置二级域名，然后在这些子域名下面，依此类推。这里也显示了DNS中使用的部分树术语。浅色阴影的部分是一个分支；较暗的区域突出显示该分支内的较小子分支。该区域内最暗的节点是该较小分支的叶子。
- en: Tip
  id: totrans-324
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The top of the DNS name space is the *root*. Under the root
    come *top-level domains*, and within these are *second-level domains* and then
    *subdomains*. In theory, any number of levels of subdomains can be created. A
    branch is any contiguous portion of the DNS tree. A leaf is a domain with nothing
    underneath it in the structure, and it usually represents a single device.'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS名称空间的顶部是*根*。在根下面是*顶级域名*，在这些顶级域名下面是*二级域名*，然后是*子域名*。理论上，可以创建任意数量的子域名级别。分支是DNS树中的任何连续部分。叶子是一个在结构中没有下级的域名，它通常代表一个单一设备。'
- en: The term *subdomain* can also be used generically, like the word *domain* itself.
    In that case, it refers simply to the relationship between two domains, with a
    subdomain being under another domain in the structure. This means, for example,
    that top-level domains can be said to be subdomains of the root; every second-level
    domain is a subdomain of a top-level domain, and so on. But again, sometimes *subdomain*
    means specifically a third-level or lower domain.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 术语*子域*也可以像*域*这个词本身一样通用。在这种情况下，它仅仅指的是两个域之间的关系，其中子域在结构上位于另一个域之下。这意味着，例如，顶级域可以说成是根域的子域；每个二级域都是顶级域的子域，依此类推。但再次强调，有时*子域*特指三级或更低级的域。
- en: DNS Family-Related Terminology
  id: totrans-327
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS相关术语
- en: 'Another set of terminology related to DNS compares the tree structure not to
    a living tree, but to another analogy: a family tree. These terms are most often
    used to describe how a particular domain relates to the other domains or subdomains
    around it, so they are relative terms. The following family-related terms are
    common (see [Figure 53-3](ch53s02.html#dns_name_space_family_tree_this_diagram_
    "Figure 53-3. DNS name space "family tree" This diagram is similar to Figure 53-2,
    but the nodes are labeled to show the family-oriented terminology sometimes used
    in DNS. In this case, the names are relative to the interior node shown in the
    darker shade. The domain immediately above it is its parent node. Other nodes
    on the same level are siblings, and subdomains within it are children of that
    node.")).'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 与DNS相关的另一组术语将树结构比作不是一棵活树，而是另一个类比：家谱。这些术语通常用来描述特定域与其周围的其他域或子域之间的关系，因此它们是相对术语。以下常见的家谱相关术语（参见[图53-3](ch53s02.html#dns_name_space_family_tree_this_diagram_
    "图53-3. DNS名称空间“家谱”此图类似于图53-2，但节点被标记以显示DNS中有时使用的面向家庭的术语。在这种情况下，名称相对于较暗的阴影所示的内部节点。位于其上方的域是其父节点。同一级别的其他节点是同级节点，而它内部的子域是该节点的子域。"))）。
- en: '**Parent Domain** This is the domain that is above this one in the hierarchy.
    For example, the root domain is the parent of all top-level domains.'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: '**父域** 这是指在本层级之上的一级域。例如，根域是所有顶级域的父域。'
- en: '**Child** This is a domain at the next level down from this one in the hierarchy.
    Thus, the top-level domains are *children* of the root.'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: '**子域** 这是指在本层级之下的一级域。因此，顶级域是根域的**子域**。'
- en: '**Sibling** This is a peer at the same level as this one in the hierarchy,
    with the same parent. Thus, all top-level domains are *siblings* with the root
    as a parent; all second-level domains within a particular top-level domain are
    siblings, and so on.'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '**同级域** 这是指在本层级与当前域相同级别且具有相同父域的域。因此，所有顶级域都是根域的**同级域**；特定顶级域内的所有二级域都是同级域，依此类推。'
- en: '![DNS name space "family tree" This diagram is similar to , but the nodes are
    labeled to show the family-oriented terminology sometimes used in DNS. In this
    case, the names are relative to the interior node shown in the darker shade. The
    domain immediately above it is its parent node. Other nodes on the same level
    are siblings, and subdomains within it are children of that node.](httpatomoreillycomsourcenostarchimages288159.png.jpg)'
  id: totrans-332
  prefs: []
  type: TYPE_IMG
  zh: '![DNS名称空间“家谱”此图类似于，但节点被标记以显示DNS中有时使用的面向家庭的术语。在这种情况下，名称相对于较暗的阴影所示的内部节点。位于其上方的域是其父节点。同一级别的其他节点是同级节点，而它内部的子域是该节点的子域。](httpatomoreillycomsourcenostarchimages288159.png.jpg)'
- en: Figure 53-3. DNS name space "family tree" This diagram is similar to [Figure 53-2](ch53s02.html#dns_tree-related_and_domain-related_term
    "Figure 53-2. DNS tree-related and domain-related terminology The top of the DNS
    name space is the root of the tree, and it has no name. Under the root comes any
    number of top-level domains (TLDs). Within each of these can be placed second-level
    domains, then within those subdomains, and so forth. Some of the tree terminology
    used in DNS is also shown here. The portion of the tree with the light shading
    is one branch; the darker area highlights a smaller subbranch within that branch.
    The darkest nodes within that area are the leaves of that smaller branch of the
    tree."), but the nodes are labeled to show the family-oriented terminology sometimes
    used in DNS. In this case, the names are relative to the interior node shown in
    the darker shade. The domain immediately above it is its parent node. Other nodes
    on the same level are siblings, and subdomains within it are children of that
    node.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 图53-3. DNS名称空间“家谱图”此图与[图53-2](ch53s02.html#dns_tree-related_and_domain-related_term
    "图53-2. DNS树相关和域名相关术语DNS名称空间的顶部是树的根，它没有名称。在根下面可以有任意数量的顶级域名（TLDs）。在这些顶级域名中可以放置二级域名，然后在这些子域名中，依此类推。DNS中使用的某些树术语也在此处显示。浅色阴影部分的树是一个分支；较暗的区域突出显示该分支中的较小子分支。该区域中最暗的节点是该较小分支的叶子。"),但节点被标记以显示DNS中有时使用的以家庭为导向的术语。在这种情况下，名称相对于较暗阴影中的内部节点。位于其上方的域名是其父节点。同一级别的其他节点是兄弟节点，而该节点内的子域名是该节点的子节点。
- en: Tip
  id: totrans-334
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**KEY CONCEPT** The domain above a given domain in the DNS name space is called
    its *parent domain*. Domains at the same level within the same parent are *siblings*.
    Subdomains are called *children* of that domain.'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 在DNS名称空间中位于给定域名之上的域名称为其*父域名*。在同一父节点内同一级别的域名是*兄弟节点*。子域名被称为该域名的*子节点*。'
- en: Like a real tree, the DNS name structure must be a true tree in its structure.
    Every domain can have only one parent (except the root), just as every branch
    of a tree connects to only one limb (except the root/trunk). Also, no loops can
    appear in the structure; you cannot have a domain whose child is also its parent,
    for example.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 就像一棵真正的树一样，DNS名称结构在其结构上必须是一个真正的树。每个域名只能有一个父节点（除了根节点），就像树的每一枝（除了根/树干）只能连接到一个树枝一样。此外，结构中不能出现循环；你不能有一个子节点也是其父节点的域名，例如。
- en: Tip
  id: totrans-337
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**KEY CONCEPT** A DNS name space must be arranged as a true topological tree.
    This means each domain can have only one parent, and no loops are permitted in
    the structure.'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS名称空间必须作为一个真正的拓扑树来组织。这意味着每个域名只能有一个父节点，结构中不允许有循环。'
- en: Keep in mind that even though the name hierarchy represents an arrangement of
    named devices, it is only a logical structure. There is no necessary correspondence
    to the physical location of devices. A domain with 10 children may represent 11
    devices in 11 different countries. We'll explore this more when we look at DNS
    authority structures in the next chapter.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，尽管名称层次结构代表了命名设备的组织方式，但它只是一种逻辑结构。它与设备的物理位置没有必然的联系。一个有10个子域名的域名可能代表11个位于11个不同国家的设备。我们将在下一章讨论DNS授权结构时进一步探讨这一点。
- en: DNS Labels, Names, and Syntax Rules
  id: totrans-340
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS标签、名称和语法规则
- en: 'We''ve seen how the DNS name space hierarchy allows us to arrange domains into
    a virtual tree that reflects the characteristics of how the devices themselves
    are organized. While using a hierarchical name space is inherently more complex
    than a flat name space, it yields a powerful result: the ability to specify names
    that can be locally managed while remaining globally unique. At the same time,
    the complexity of the tree yields the benefit of relatively simple name construction
    using domain identifiers.'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到DNS名称空间层次结构如何使我们能够将域名组织成一个虚拟树，该树反映了设备本身的组织特性。虽然使用层次名称空间在本质上比平面名称空间更复杂，但它产生了一个强大的结果：能够指定可以在本地管理的同时保持全局唯一性的名称。同时，树的复杂性带来了相对简单的名称构造的好处，这使用户标识符来实现。
- en: DNS Labels and Label Syntax Rules
  id: totrans-342
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS标签和标签语法规则
- en: 'Naming in DNS begins with giving each domain, or node, in the DNS name space
    a text *label*. The label identifies the domain within the structure and must
    follow several syntax rules:'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: DNS中的命名从给DNS名称空间中的每个域名或节点分配一个文本*标签*开始。标签标识结构中的域名，并必须遵循几个语法规则：
- en: '**Length** Each label can theoretically be from 0 to 63 characters in length.
    In practice, a length of 1 to about 20 characters is most common, with a special
    exception for the label assigned to the root of the tree (which is 0 characters
    in length, as explained in the next section).'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: '**长度** 每个标签理论上可以从0到63个字符长。在实践中，长度为1到大约20个字符是最常见的，对于分配给树根的标签（如下一节所述，长度为0个字符）有一个特殊例外。'
- en: '**Symbols** Letters and numbers are allowed, as well as the dash character
    (-). No other punctuation is permitted. For example, an underscore (_) cannot
    be used in a label.'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: '**符号** 允许使用字母、数字以及破折号字符（-）。不允许使用其他标点符号。例如，下划线（_）不能用于标签中。'
- en: '**Case** Labels are not case-sensitive. For example, *Jabberwocky* and *jabberwocky*
    are equivalent domain name labels.'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: '**大小写** 标签不区分大小写。例如，*Jabberwocky* 和 *jabberwocky* 是等效的域名标签。'
- en: Every label must be unique within its parent domain. So, for example, if we
    have a top-level domain called Rocks, we can have only one subdomain within Rocks
    called Crystal. Due to the case-insensitivity of labels, we cannot have both CRYSTAL
    and Crystal within Rocks, because they are considered the same.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 每个标签必须在它的父域内是唯一的。所以，例如，如果我们有一个名为Rocks的顶级域，我们可以在Rocks内只有一个名为Crystal的子域。由于标签的不区分大小写，我们无法在Rocks内同时有CRYSTAL和Crystal，因为它们被认为是相同的。
- en: It is this concept of *local uniqueness* within a parent domain that ensures
    the uniqueness of names as a whole, while allowing local control over naming.
    Whoever is in charge of the Rocks domain can assign names to as many individual
    objects or subdomains as he likes, as long as those names are unique within the
    domain. Someone else, say, the maintainer of the Glass domain, can also create
    a subdomain called Crystal within Glass. There will not be a conflict, because
    the Glass and Rocks domains are separate. Of course, since all top-level domains
    have the same parent (the root), all top-level domains must be unique.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 正是这种在父域内的*本地唯一性*概念确保了名称的整体唯一性，同时允许对命名进行本地控制。无论谁负责Rocks域，都可以为尽可能多的单个对象或子域分配名称，只要这些名称在域内是唯一的。其他人，比如Glass域的维护者，也可以在Glass内创建一个名为Crystal的子域。不会发生冲突，因为Glass和Rocks域是分开的。当然，由于所有顶级域都有相同的父级（根），所有顶级域都必须是唯一的。
- en: Tip
  id: totrans-349
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Each node in the DNS name space is identified by a label. Each
    *label* must be unique within a parent domain, but it does not need to be unique
    across domains. This enables each domain to have local control over the names
    of subdomains, without causing any conflicts in the full domain names created
    on a global level.'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS名称空间中的每个节点都通过一个标签来标识。每个*标签*必须在父域内是唯一的，但不需要在整个域名空间内唯一。这允许每个域对子域的名称进行本地控制，而不会在全球层面上创建的完整域名中引起任何冲突。'
- en: Domain Name Construction
  id: totrans-351
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 域名构造
- en: Each individual domain within the domain name structure can be uniquely identified
    using the sequence of labels that starts from the root of the tree and progresses
    down to that domain. The labels at each level in the hierarchy are listed in sequence,
    starting with the highest level, from right to left, separated by dots. The result
    is the formal definition of a *domain name*.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用从树根开始并向下到该域的标签序列来唯一标识域名结构中的每个单独的域。在层次结构中的每个级别的标签按顺序列出，从最高级别开始，从右到左，由点分隔。结果是*域名*的正式定义。
- en: The root of the name space is given a zero-length, null name by default; that
    is, the label for the root exists, but it's empty. This is done because the root
    technically is part of every domain name, so it must be included in every domain
    name. If it were something long like Root, we would need to include that at the
    end of every domain name. This would simply make every name longer, while not
    really adding any useful information—we already know every domain name is under
    the root.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 名称空间的根默认被赋予一个零长度的空名称；也就是说，根的标签存在，但它是空的。这样做是因为从技术上讲，根是每个域名的一部分，所以它必须包含在每个域名中。如果它像Root那样很长，我们就需要在每个域名的末尾包含它。这只会使每个名称更长，而实际上并没有添加任何有用的信息——我们已知每个域名都在根之下。
- en: Consider the example of a top-level domain called Rocks, within which is a second-level
    domain Crystal. The domain name of Rocks is Rocks., with the dot separating Rocks
    and the empty label (the null root). In practice, the trailing dot is often omitted,
    so the domain name of the top-level domain Rocks can be considered as just Rocks.
    The subdomain Crystal within Rocks has the domain name Crystal.Rocks. If we had
    a device named Salt within the Crystal.Rocks domain, it would be called Salt.Crystal.Rocks.
    This is fairly straightforward, as you can see in [Figure 53-4](ch53s03.html#dns_labels_and_domain_name_construction_
    "Figure 53-4. DNS labels and domain name construction Each node in the DNS name
    space has a label (except the root, whose label is null). The domain name for
    a node is constructed simply by placing in order the sequence of labels from the
    top of the tree down to the individual domain, going from right to left, separating
    each label with a dot (period).").
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个顶级域名为Rocks的例子，其中包含一个二级域名Crystal。Rocks的域名是Rocks.，点分隔Rocks和空标签（空根）。在实践中，尾随的点通常被省略，因此顶级域名Rocks的域名可以被认为是仅仅是Rocks。Rocks中的子域Crystal的域名是Crystal.Rocks。如果我们有一个名为Salt的设备位于Crystal.Rocks域中，它将被称为Salt.Crystal.Rocks。这相当直接，如[图53-4](ch53s03.html#dns_labels_and_domain_name_construction_
    "图53-4. DNS标签和域名构造 DNS名称空间中的每个节点都有一个标签（根节点除外，其标签为空）。节点的域名通过将树顶部的标签顺序排列到单个域名，从右到左，用点（句号）分隔每个标签来简单地构造。")所示。
- en: '![DNS labels and domain name construction Each node in the DNS name space has
    a label (except the root, whose label is null). The domain name for a node is
    constructed simply by placing in order the sequence of labels from the top of
    the tree down to the individual domain, going from right to left, separating each
    label with a dot (period).](httpatomoreillycomsourcenostarchimages288161.png.jpg)'
  id: totrans-355
  prefs: []
  type: TYPE_IMG
  zh: '![DNS标签和域名构造 DNS名称空间中的每个节点都有一个标签（根节点除外，其标签为空）。节点的域名通过将树顶部的标签顺序排列到单个域名，从右到左，用点（句号）分隔每个标签来简单地构造。](httpatomoreillycomsourcenostarchimages288161.png.jpg)'
- en: Figure 53-4. DNS labels and domain name construction Each node in the DNS name
    space has a label (except the root, whose label is null). The domain name for
    a node is constructed simply by placing in order the sequence of labels from the
    top of the tree down to the individual domain, going from right to left, separating
    each label with a dot (period).
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 图53-4. DNS标签和域名构造 DNS名称空间中的每个节点都有一个标签（根节点除外，其标签为空）。节点的域名通过将树顶部的标签顺序排列到单个域名，从右到左，用点（句号）分隔每个标签来简单地构造。
- en: We can use these names to easily identify subdomains of a particular domain.
    For example, if we start with Salt.Crystal.Rocks, it's obvious that Crystal.Rocks
    is its parent domain. It's also clear that both Crystal.Rocks and Salt.Crystal.Rocks
    are subdomains of Rocks; one is a single level down from Rocks, and the other
    is two levels down.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用这些名称轻松地识别特定域的子域。例如，如果我们从Salt.Crystal.Rocks开始，很明显Crystal.Rocks是其父域。这也清楚地表明，Crystal.Rocks和Salt.Crystal.Rocks都是Rocks的子域；一个比Rocks低一个级别，另一个低两个级别。
- en: Note that there is a maximum limit of 255 characters for a complete domain name,
    for implementation purposes. In practice, most domain names are much shorter than
    this limit, as it would violate the whole purpose of domain names if we let them
    get so long that no one could remember them.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，为了实施目的，完整的域名有一个最大字符限制为255个字符。实际上，大多数域名都比这个限制短得多，如果我们让它们变得如此之长以至于没有人能记住它们，这将违背域名整体的目的。
- en: Tip
  id: totrans-359
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** A *domain name* is a string of text that uniquely identifies
    a particular node in the name space. The domain name for a node is constructed
    by concatenating in right-to-left order all the labels in the branch of the DNS
    tree, starting from the top of the tree down to the particular node, separating
    each by a dot (period).'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 域名是一个文本字符串，它唯一地标识了名称空间中的特定节点。节点的域名是通过将DNS树分支中的所有标签从树顶开始到特定节点按右到左的顺序连接起来来构造的，每个标签之间用点（句号）分隔。'
- en: 'Finally, note that in many protocols, it is possible to specify a particular
    resource within a domain name by providing a directory structure after a name.
    This is done using the standard TCP/IP URL syntax, where a path is indicated using
    slashes to separate subdirectories. For example, a specific file at Salt.Crystal.Rocks
    might be located at Salt.Crystal.Rocks/chem/composition. While DNS names are case-insensitive,
    the labels in a path are case-sensitive. So, this example would be different from
    Salt.Crystal.Rocks/chem/Composition. See the discussion of URL syntax in [Chapter 70](ch70.html
    "Chapter 70. TCP/IP APPLICATION LAYER ADDRESSING: UNIFORM RESOURCE IDENTIFIERS,
    LOCATORS, AND NAMES (URIS, URLS, AND URNS)") for more details.'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，请注意，在许多协议中，通过在名称之后提供目录结构，可以指定域名内的特定资源。这是使用标准的TCP/IP URL语法完成的，其中路径是通过斜杠分隔子目录来指示的。例如，位于Salt.Crystal.Rocks的特定文件可能位于Salt.Crystal.Rocks/chem/composition。虽然DNS名称不区分大小写，但路径中的标签是区分大小写的。因此，此示例与Salt.Crystal.Rocks/chem/Composition不同。有关URL语法的讨论，请参阅[第70章](ch70.html
    "第70章。TCP/IP应用层寻址：统一资源标识符、定位符和名称（URIS、URLS和URNs）")的更多详细信息。
- en: Absolute (Fully Qualified) and Relative (Partially Qualified) Domain Name Specifications
  id: totrans-362
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绝对（完全限定）和相对（部分限定）域名规范
- en: As explained in the previous section, we can specify the domain name of any
    node in the DNS name hierarchy by simply starting at the root node and following
    the sequence of subdomains down to the node in question, listing each level's
    labels separated by a dot. When we do this, we get a single name that uniquely
    identifies a particular device. In practice, domain names can be specified by
    their fully qualified names or their partially qualified names.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们可以通过从根节点开始并按顺序跟随子域的序列到所讨论的节点，列出每个级别的标签并用点分隔，来指定DNS名称层次结构中任何节点的域名。当我们这样做时，我们得到一个唯一标识特定设备名称的单个名称。在实践中，域名可以通过它们的完全限定名称或部分限定名称来指定。
- en: Fully Qualified Domain Names
  id: totrans-364
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完全限定域名
- en: Technically, if a top-level domain A contains a subdomain B that contains subdomain
    C, the full domain name for C is C.B.A.. This is called the *fully qualified domain
    name (FQDN)* for the node. Here, the word *qualified* is synonymous with *specified*.
    The domain name C.B.A. is fully qualified because it gives the full location of
    the specific domain that bears its name within the whole DNS name space.
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 技术上，如果一个顶级域名A包含一个子域名B，而B又包含子域名C，那么C的完整域名就是C.B.A.. 这被称为节点的*完全限定域名（FQDN）*。在这里，单词*限定*与*指定*同义。域名C.B.A.是完全限定的，因为它给出了整个DNS名称空间中特定域名所在的全局位置。
- en: FQDNs are also sometimes called *absolute* domain names. This term reflects
    the fact that you can refer unambiguously to the name of any device using its
    FQDN from any other portion of the name space. Using the FQDN always instructs
    the person or software interpreting the name to start at the root, and then follow
    the sequence of domain labels from right to left, going top to bottom within the
    tree.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: FQDN有时也称为*绝对*域名。这个术语反映了这样一个事实：您可以使用FQDN从名称空间的任何其他部分无歧义地引用任何设备的名称。使用FQDN始终指示解释名称的人或软件从根开始，然后从右到左按顺序跟随域名标签的序列，在树中从上到下。
- en: Partially Qualified Domain Names
  id: totrans-367
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 部分限定域名
- en: There are also some situations in which you may refer to a device using an incomplete
    name specification. This is called a *partially qualified domain name (PQDN)*,
    which means that the name only partially specifies the location of the device.
    By definition, a PQDN is ambiguous, because it doesn't give the full path to the
    domain. Thus, you can use a PQDN only within the context of a particular parent
    domain, whose absolute domain name is known.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，您可能使用不完整的名称规范来引用设备。这被称为*部分限定域名（PQDN）*，这意味着该名称仅部分指定了设备的位置。根据定义，PQDN是模糊的，因为它没有给出完整的域名路径。因此，您只能在已知特定父域的绝对域名的情况下使用PQDN。
- en: We can find the FQDN of a partially specified domain name by appending the partial
    name to the absolute name of the parent domain. For example, if we have the PQDN
    Z within the context of the FQDN Y.X., we know the FQDN for Z is Z.Y.X.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过将部分名称附加到父域的绝对名称上来找到部分指定的域名的FQDN。例如，如果我们有一个在FQDN Y.X.上下文中的PQDN Z，我们知道Z的FQDN是Z.Y.X。
- en: Why bother with this? The answer is convenience. An administrator for a domain
    can use PQDNs as a shorthand to refer to devices or subdomains without needing
    to repeat the entire full name. For example, suppose you are in charge of the
    computer science department at the University of Widgetopia. The domain name for
    the department as a whole is cs.widgetopia.edu., and the individual hosts you
    manage are named after fruit. In the DNS files you maintain, you could refer to
    each device by its FQDN every time; for example, apple.cs.widgetopia.edu., banana.cs.widgetopia.edu.,
    and so on. But it's easier to tell the software, "If you see a name that is not
    fully qualified, assume it is in the cs.widgetopia.edu domain." Then you can just
    call the machines apple, banana, and so on. Whenever the DNS software sees a PQDN
    such as kiwi, it will treat it as kiwi.cs.widgetopia.edu.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么要这样做呢？答案是方便。一个域的管理员可以使用PQDN作为缩写来引用设备或子域名，而无需重复整个全名。例如，假设你是Widgetopia大学计算机科学系的负责人。整个系的域名是cs.widgetopia.edu.，而你管理的单个主机以水果命名。在你维护的DNS文件中，你可以每次都通过FQDN来引用每个设备；例如，apple.cs.widgetopia.edu.，banana.cs.widgetopia.edu.等等。但告诉软件“如果你看到一个不是完全限定的名称，假设它位于cs.widgetopia.edu域中”会更简单。然后你只需称这些机器为apple、banana等等。每当DNS软件看到像kiwi这样的PQDN时，它将把它视为kiwi.cs.widgetopia.edu。
- en: Tip
  id: totrans-371
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** A *fully qualified domain name (FQDN)* is a complete domain
    name that uniquely identifies a node in the DNS name space by giving the full
    path of labels from the root of the tree down to that node. It defines the absolute
    location of a domain. In contrast, a *partially qualified domain name (PQDN)*
    specifies only a portion of a domain name. It is a relative name that has meaning
    only within a particular context. The partial name must be interpreted within
    that context to fully identify the node.'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 一个*完全限定域名（FQDN）*是一个完整的域名，它通过给出从树根到该节点的完整标签路径，唯一地标识DNS命名空间中的一个节点。它定义了域的绝对位置。相比之下，一个*部分限定域名（PQDN）*仅指定域名的一部分。它是一个相对名称，仅在特定上下文中才有意义。部分名称必须在该上下文中解释，才能完全识别节点。'
- en: I mentioned earlier in this chapter that the trailing dot for the null root
    domain is usually omitted. This is true in common parlance and when users specify
    a domain name in an application. You don't use the trailing dot in your web browser,
    for instance. However, the dot is used to clearly distinguish a FQDN from a PQDN
    within DNS master files. This allows us to use both FQDNs and PQDNs together.
    In our example, apple would refer to apple.cs.widgetopia.edu., but apple.com.
    would refer to the FQDN for Apple Computer, Inc. You must be careful about watching
    the dots here, because apple.com (without a trailing period) would be a PQDN and
    would refer to apple.com.cs.widgetopia.edu., not the domain of Apple Computer.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 我在本章前面提到，对于空根域的尾随点通常省略。这在日常用语中以及当用户在应用程序中指定域名时是正确的。例如，你不会在网页浏览器中使用尾随点。然而，点用于在DNS主文件中清楚地区分FQDN和PQDN。这允许我们同时使用FQDN和PQDN。在我们的例子中，apple将指apple.cs.widgetopia.edu.，但apple.com.将指苹果电脑公司的FQDN。你必须小心观察这里的点，因为apple.com（没有尾随点）将是一个PQDN，它将指apple.com.cs.widgetopia.edu.，而不是苹果电脑的域。
- en: Chapter 54. DNS NAME REGISTRATION, PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES
  id: totrans-374
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第54章。DNS域名注册、公共管理、区域和权威机构
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-375
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: 'The previous chapter explained how the Domain Name System (DNS) name space
    consists of a hierarchy of domains and subdomains. From the root, we have a number
    of top-level domains, then second-level domains below them, and still lower-level
    domains below that. The obvious questions then become: How do we determine the
    shape and structure of the name space, and who will manage it? More specifically,
    who will control the root of the tree and decide what the top-level domains will
    be called? How will we then subdivide control over the rest of the name space?
    How do we ensure there are no conflicts in choosing the names of sibling subdomains
    within a domain?'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 前一章解释了域名系统（DNS）命名空间由一系列域名和子域名组成。从根开始，我们有一系列顶级域名，然后是它们下面的二级域名，再下面是更低级的域名。那么，显然的问题就变成了：我们如何确定命名空间的形状和结构，以及谁将管理它？更具体地说，谁将控制树的根并决定顶级域的名称？我们如何对剩余的命名空间进行细分控制？我们如何确保在域内选择兄弟子域的名称时没有冲突？
- en: DNS can be used on private networks controlled by a single organization, and
    if so, that organization is obviously in charge of the name space. We'll discuss
    private naming, but in reality, it's just not that interesting. The vast majority
    of DNS use occurs on the public Internet. Here, we have a much greater challenge,
    because we need to construct a name space that spans the globe and covers millions
    of machines managed by different organizations. For this, we need a very capable
    *name registration* process and administration methods to support it.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: DNS可以用于由单个组织控制的私有网络，如果是这样，那么该组织显然负责名称空间。我们将讨论私有命名，但实际上，这并不那么有趣。DNS的大多数使用都发生在公共互联网上。在这里，我们面临着一个更大的挑战，因为我们需要构建一个跨越全球并覆盖由不同组织管理的数百万台机器的名称空间。为此，我们需要一个非常强大的**名称注册**过程和支撑它的管理方法。
- en: In this chapter, I will describe the process of name registration and how authorities
    are managed within DNS, focusing on the public Internet. I begin with a description
    of the DNS hierarchical authority structure and how it relates to the hierarchical
    name space, and a discussion of the concepts behind the DNS distributed name database.
    I describe the Internet's organizational and geopolitical top-level domains, and
    how they are administered by various authorities. I then discuss how authority
    is delegated to the second-level and lower-level domains, and how public registration
    of domain names works, including how public registration issues and problems are
    resolved. I explain how the DNS name space is partitioned into administrative
    zones of authority, and then I conclude with a brief discussion of private DNS
    name registration.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我将描述名称注册的过程以及如何在DNS中管理权限，重点关注公共互联网。我首先描述DNS的分层权限结构以及它与分层命名空间的关系，并讨论DNS分布式名称数据库背后的概念。我描述了互联网的组织和地缘政治顶级域名，以及它们是如何由不同的权限机构管理的。然后，我讨论了权限是如何委派给二级和更低级域的，以及域名公共注册的工作方式，包括如何解决公共注册的问题和问题。我解释了DNS名称空间是如何划分为权限管理区的，然后我简要讨论了私人DNS名称注册。
- en: Tip
  id: totrans-379
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**RELATED INFORMATION** *Most TCP/IP implementations include a special utility
    called whois that can be used to interrogate the DNS distributed name database
    to obtain registration information about domains. This application can be very
    useful for troubleshooting. For details, see the section discussing whois in [Chapter 88](ch88.html
    "Chapter 88. TCP/IP ADMINISTRATION AND TROUBLESHOOTING UTILITIES AND PROTOCOLS")*.'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关信息** *大多数TCP/IP实现都包含一个名为whois的特殊实用程序，可以用来查询DNS分布式名称数据库以获取域名的注册信息。这个应用程序在故障排除中非常有用。有关详细信息，请参阅讨论whois的[第88章](ch88.html
    "第88章。TCP/IP管理及故障排除实用程序和协议")部分*。'
- en: DNS Hierarchical Authority Structure and the Distributed Name Database
  id: totrans-381
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS分层权限结构和分布式名称数据库
- en: In the previous chapter, I explained that the central concept of naming in DNS
    is based on *domains*. Each domain can be considered akin to a sphere of influence
    or control. A domain "spreads its wings" over all the objects and subdomains that
    it contains. Due to this concept of influence, when we consider any DNS name space,
    we see that it is hierarchical because it reflects a hierarchy of organizations
    that control domains and the nodes within them. This means that there is a *hierarchical
    authority structure* that complements the hierarchical name structure in DNS.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我解释了DNS中命名的核心概念是基于**域名**的。每个域名都可以被认为类似于一个影响或控制的范围。一个域名“展开其翅膀”覆盖了它包含的所有对象和子域名。由于这种影响的概念，当我们考虑任何DNS名称空间时，我们会看到它是分层的，因为它反映了控制域名及其内部节点的组织层次结构。这意味着存在一个**分层权限结构**，它补充了DNS中的分层名称结构。
- en: The primary reason why the name space hierarchy leads to an authority hierarchy
    is the requirement that sibling subdomains be unique within a domain. As soon
    as we have a need for uniqueness, we must have some sort of authority or process
    that ensures that each subdomain or object picks a different name within that
    domain. This is what name registration is all about.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 名称空间分层导致权限分层的主要原因是对兄弟子域名在域名内唯一性的要求。一旦我们有了唯一性的需求，我们就必须有一些形式的权限或过程来确保每个子域名或对象在该域名内选择不同的名称。这正是名称注册的全部内容。
- en: This concept of a hierarchical authority structure is a bit abstract, but it's
    easier to understand if we examine a sample DNS name space and discuss the issues
    involved in assigning names within it. Naturally, we want to start at the top
    of the name hierarchy, with the root domain, null.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 这种分层权限结构的概念有点抽象，但如果我们检查一个示例 DNS 名称空间并讨论其中涉及的问题，就更容易理解。自然地，我们希望从名称层级的顶部开始，即根域，null。
- en: The DNS Root Domain Central Authority
  id: totrans-385
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 根域中央权限机构
- en: To start off the name space, we must create top-level domains (TLDs) within
    the root. Now, each of these must be unique, so one authority must manage the
    creation of all TLDs. This means that the authority that controls the root domain
    controls the entire name space.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始名称空间，我们必须在根域内创建顶级域名 (TLD)。现在，每个都必须是唯一的，因此必须有一个权限机构来管理所有 TLD 的创建。这意味着控制根域的权限机构控制整个名称空间。
- en: In the case of the Internet, this central authority is ultimately responsible
    for every name in DNS. The central DNS authority for the Internet, which controls
    the creation of TLDs, was initially called the *Network Information Center*. It
    was later the *Internet Assigned Numbers Authority (IANA)*, which is also responsible
    for protocol numbers, IP addresses, and more. These functions are now shared by
    IANA and the *Internet Corporation for Assigned Names and Numbers (ICANN)*. We'll
    discuss the specific TLDs of the Internet in the next few chapters; IANA, ICANN,
    and related organizations are discussed in the section on Internet registration
    authorities in [Chapter 3](ch03.html "Chapter 3. NETWORK STANDARDS AND STANDARDS
    ORGANIZATIONS").
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 在互联网的情况下，这个中央权限机构最终对 DNS 中的每个名称负责。最初控制 TLD 创建的互联网中央 DNS 权限机构被称为 *网络信息中心*。后来，它被称为
    *互联网分配号码权威机构 (IANA)*，它还负责协议号码、IP 地址等。这些功能现在由 IANA 和 *互联网名称与数字地址分配机构 (ICANN)* 共享。我们将在下一章讨论互联网的具体
    TLD；IANA、ICANN 和相关组织在 [第 3 章](ch03.html "第 3 章。网络标准和标准组织") 中的互联网注册权限机构部分进行讨论。
- en: TLD Authorities
  id: totrans-388
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: TLD 权限机构
- en: At the next level down in the authority hierarchy, we create second-level domains
    within each of the TLDs. Each TLD must itself be managed using a coordinating
    authority, however, this is not necessarily the organization that runs the root
    (IANA). IANA *delegates* authority for some of the TLDs to other organizations.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 在权限层级的下一级，我们在每个 TLD 内创建二级域名。每个 TLD 必须使用协调权限机构进行管理，但这不一定是运行根域（IANA）的组织。IANA *委派*
    一些 TLD 的权限给其他组织。
- en: IANA may delegate control for each TLD to a different authority at this level
    of the hierarchy. In fact, there can be completely different rules for managing
    the creation of second-level domains in one TLD than there are in another. And
    in some TLDs, there are multiple authorities that work together on name registration.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: IANA 可以将每个 TLD 的控制权委派给层级中的不同权限机构。实际上，在管理二级域名的创建方面，一个 TLD 可能会有与另一个 TLD 完全不同的规则。在某些
    TLD 中，存在多个权限机构共同进行名称注册。
- en: Lower-Level Authority Delegation
  id: totrans-391
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 低级别权限委派
- en: This process of authority delegation continues as we move down the name space
    hierarchy. At each level, the name space becomes more specific.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 随着我们向下移动名称空间层级，权限委派的过程继续进行。在每一级，名称空间变得更加具体。
- en: If we use an organizational hierarchy, like the .COM TLD, we generally delegate
    authority for each second-level domain to the organization whose name it represents.
    So, for example, IBM.COM is managed by IBM. Since IBM is huge, it may itself subdivide
    the authority structure further, but smaller organizations probably won't.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们使用组织层级，例如 .COM TLD，我们通常将每个二级域名的权限委派给代表该名称的组织。例如，IBM.COM 由 IBM 管理。由于 IBM
    规模庞大，它可能进一步细分权限结构，但较小的组织可能不会这么做。
- en: Authority Hierarchy's Relationship to the Name Hierarchy
  id: totrans-394
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 权限层级与名称层级的关系
- en: The authority hierarchy is complementary to the name hierarchy; they are not
    exactly the same. It is not necessary that there be a different authority for
    every level of the hierarchy. In many cases, a single authority may manage a section
    of the name space that spans more than one level of the structure. For example,
    IANA manages the Internet root domain (null) and also the .INT TLD, but other
    TLDs are managed by other organizations. The name hierarchy is divided into *zones
    of authority* that reflect the hierarchy of authorities that manage parts of the
    name space.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 授权层次结构与名称层次结构是互补的；它们并不完全相同。并不一定需要在层次结构的每个级别都有一个不同的授权。在许多情况下，一个单一的授权机构可以管理跨越结构多个级别的名称空间的一部分。例如，IANA管理互联网根域名（null）和.int顶级域，但其他顶级域由其他组织管理。名称层次结构被划分为*授权区域*，这些区域反映了管理名称空间部分授权的层次结构。
- en: Also, authority over a domain doesn't necessarily imply physical control. A
    domain can contain subdomains that are managed by organizations on different continents,
    and a single subdomain can contain named devices that are on different continents
    as well.
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，对一个域的管辖权并不一定意味着物理控制。一个域可以包含由不同大陆上的组织管理的子域，而且一个单独的子域也可以包含位于不同大陆上的命名设备。
- en: The DNS Distributed Name Database
  id: totrans-397
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS分布式名称数据库
- en: Of course, with authority comes responsibility, and the main responsibility
    an authority has for a domain is registering names within the domain. When a name
    is registered, a set of data is created for it, which can then be used by internetwork
    devices to resolve the name into an address or perform other functions.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，有了权限也就有了责任，一个授权机构对一个域的主要责任是在域内注册名称。当名称被注册时，就会为其创建一组数据，然后这些数据可以被互联网设备用来解析名称到地址或执行其他功能。
- en: The set of all the data describing all DNS domains constitutes the DNS *name
    database*. Just as registration authority is distributed and hierarchical, this
    database is distributed and hierarchical. In other words, there is no single place
    where all DNS name information is stored. Instead, DNS servers carry resource
    records (see [Chapter 57](ch57.html "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE
    RECORD, AND MASTER FILE FORMATS")) that describe the domains for which they have
    authority. As you'll see, the fact that this database is distributed has major
    implications on how name resolution is carried out.
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 描述所有DNS域的所有数据集构成了DNS的*名称数据库*。正如注册权限是分布的和分层的，这个数据库也是分布的和分层的。换句话说，没有单一的地方存储所有DNS名称信息。相反，DNS服务器携带资源记录（见[第57章](ch57.html
    "第57章。DNS消息和消息、资源记录和主文件格式"）），这些记录描述了它们有权限的域。正如您将看到的，这个数据库的分布性对名称解析的执行有重大影响。
- en: Tip
  id: totrans-400
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The name space of the public Internet is managed by a *hierarchy
    of authorities* that is similar in structure to the hierarchical DNS name space,
    though not identical. The top of the hierarchy is centrally managed by IANA/ICANN,
    which delegates authority to other organizations for registering names in various
    other parts of the hierarchy. The information about name registrations is maintained
    in resource records stored in various locations, which form a distributed name
    database on the Internet.'
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 公共互联网的命名空间由一个与DNS命名空间结构类似的*授权层次结构*管理，尽管它们并不完全相同。该层次结构的顶部由IANA/ICANN集中管理，它将权限委托给其他组织以在层次结构的各个部分注册名称。关于名称注册的信息存储在各个位置的资源记录中，这些记录构成了互联网上的分布式名称数据库。'
- en: DNS Organizational (Generic) TLDs and Authorities
  id: totrans-402
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS组织（通用）顶级域和授权
- en: The top of the DNS name hierarchy is managed by a central authority, which controls
    the entire name space by virtue of deciding which TLDs are allowed to exist. Obviously,
    it is very important that a great deal of thought go into how the TLDs are chosen.
    A poor design at this top level would make the entire hierarchy poorly reflect
    the actual structure of organizations using the name space.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: DNS名称层次结构的顶部由一个中央授权机构管理，它通过决定哪些顶级域允许存在来控制整个名称空间。显然，在如何选择顶级域方面投入大量思考是非常重要的。在这个顶级水平上的糟糕设计会使整个层次结构无法很好地反映使用名称空间的组织结构。
- en: 'The creators of DNS could have chosen any number of ways to structure the Internet''s
    name hierarchy. One obvious possibility is to structure the Internet based on
    geopolitical boundaries: countries, states, and so forth. Another sensible idea
    is to structure the name space based on types of organizations.'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: DNS的创造者可以选择任何数量的方式来构建互联网的命名层次结构。一个明显的可能性是基于地缘政治边界来构建互联网：国家、州等等。另一个合理的想法是基于组织的类型来构建命名空间。
- en: The beauty of the hierarchical name space is that we don't need to choose between
    different methods of structuring the name space. We can use more than one technique
    at the same time, and this is exactly what was done when DNS was first implemented.
    Both the organization type and geography structures were used for TLDs. This gives
    multiple options for name registration for most groups and individuals.
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 层次化命名空间的美丽之处在于我们不需要在命名空间的不同结构方法之间做出选择。我们可以同时使用多种技术，这正是DNS最初实施时所做的事情。组织类型和地理结构都被用于TLDs。这为大多数团体和个人提供了多种名称注册的选项。
- en: I'll begin here by discussing organizational TLDs, and then we'll look at geopolitical
    ones. As you'll see, although there are only a handful of organizational TLDs,
    there is no doubt that they have been much more popular than the geopolitical
    ones.
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 我将从讨论组织顶级域名（TLDs）开始，然后我们将探讨地缘政治性的TLDs。正如您将看到的，尽管组织TLDs只有少数几个，但毫无疑问，它们比地缘政治性的TLDs更受欢迎。
- en: Original Generic TLDs
  id: totrans-407
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 原始通用TLDs
- en: The initial deployment of DNS featured a set of seven top-level domains that
    are called *generic* TLDs. The idea was that each company or organization could
    choose a name within one of these TLDs; they were generic enough that every organization
    would find a place that suited them. I prefer to call them *organizational*, because
    they divide the generic portion of the name space by organization type.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: DNS的初始部署包括一组被称为*通用* TLDs的七个顶级域名。其想法是每个公司或组织都可以在这些TLDs中选择一个名称；它们足够通用，以至于每个组织都能找到一个适合他们的地方。我更喜欢称它们为*组织性的*，因为它们通过组织类型划分了名称空间的通用部分。
- en: 'The initial TLDs and their original intended organization types were as follows:'
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 初始的TLDs及其原始预期的组织类型如下：
- en: '**.ARPA** A temporary domain used many years ago for transition to DNS; today,
    this domain is used for reverse name resolution (see [Chapter 56](ch56.html "Chapter 56. DNS
    RESOLUTION CONCEPTS AND RESOLVER OPERATIONS")).'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: '**.ARPA** 多年前用于过渡到DNS的临时域名；今天，这个域名用于反向名称解析（见[第56章](ch56.html "第56章. DNS解析概念和解析器操作")）。'
- en: '**.COM** Corporations and businesses'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: '**.COM** 公司和企业'
- en: '**.EDU** Universities and other educational organizations'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: '**.EDU** 大学和其他教育机构'
- en: '**.GOV** Government agencies'
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: '**.GOV** 政府机构'
- en: '**.MIL** Military organizations'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: '**.MIL** 军事组织'
- en: '**.NET** Organizations that implement, deal with, or manage networking technologies
    and/or the Internet'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: '**.NET** 实施、处理或管理网络技术以及/或互联网的组织'
- en: '**.ORG** Other organizations that don''t fit into any of the previous classifications'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: '**.ORG** 不适合任何先前分类的其他组织'
- en: At first glance, this seems like a reasonable way to cover the organizations
    of the world. However, since the .ARPA domain (whose name refers to the ARPAnet,
    the precursor of the modern Internet, as described in [Chapter 8](ch08.html "Chapter 8. TCP/IP
    PROTOCOL SUITE AND ARCHITECTURE")) was temporary, this left only six categories
    for all other organizations. Also, the TLDs weren't all used as was originally
    foreseen. For example, the .GOV and .MIL domains were not used for all types of
    government and military organizations, but primarily for the United States federal
    government and military. The .EDU domain ended up being used only for universities,
    again in the United States.
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 初看这似乎是一种合理的方式来涵盖世界上的组织。然而，由于.ARPAnet域名（其名称指的是ARPAnet，现代互联网的前身，如[第8章](ch08.html
    "第8章. TCP/IP协议套件和架构")所述）是临时的，这为所有其他组织留下了只有六个类别。此外，TLDs并没有像最初预期的那样被全部使用。例如，.GOV和.MIL域名并没有用于所有类型的政府和军事组织，而主要是用于美国联邦政府和军事。.EDU域名最终只用于大学，同样是在美国。
- en: This left only three common TLDs—.COM, .NET, and .ORG—for almost all other groups
    and companies that wanted to use the organizational hierarchy. Since there were
    only three such TLDs, they quickly became very crowded, especially the .COM domain.
    A new fourth domain, .INT for international organizations, was added fairly soon
    to the original seven. However, it was intended only for a small number of organizations,
    such as international standards bodies.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得只有三个常见的顶级域名——.COM、.NET和.ORG——几乎适用于所有其他希望使用组织层次结构的团体和公司。由于只有这三个顶级域名，它们很快就变得非常拥挤，尤其是.COM域名。不久之后，又增加了一个新的第四个域名——.INT，用于国际组织。然而，它仅打算用于少数几个组织，例如国际标准机构。
- en: Of course, there was no inherent reason why the generic domains should be limited
    to only the few that were originally created.
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，没有固有的理由说明通用域名应该仅限于最初创建的少数几个。
- en: New Generic TLDs
  id: totrans-420
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 新的通用顶级域名
- en: Over the years, many suggestions were made for new generic TLDs that would expand
    the number of possible second-level domain names and also provide better categorization
    for different organization types—that is, to make the generic TLDs less generic.
    There was some resistance at first to adopting these new names, especially because
    there were so many different ideas about what new TLDs should be created.
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的几年里，提出了许多关于新的通用顶级域名的建议，这些域名将扩大可能的二级域名的数量，并为不同的组织类型提供更好的分类——也就是说，使通用顶级域名不那么通用。最初对这些新名称的采用存在一些阻力，特别是因为关于应该创建哪些新顶级域名的想法有很多不同。
- en: IANA took input from a lot of people and followed a complex procedure to determine
    what new TLDs should be made. In 2001 and 2002, approval was given for the creation
    of several new TLDs, and decisions were made about authorities for administering
    them.
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: IANA 从很多人那里收集了意见，并遵循了一个复杂的程序来确定应该创建哪些新的顶级域名。在2001年和2002年，批准创建了几个新的顶级域名，并做出了关于管理它们的权威机构的决定。
- en: Of the new TLDs approved in the past few years, the number that has achieved
    widespread popularity is, to my knowledge, zero. Humans are creatures of inertia,
    and most people are still used to names ending in .COM, .NET, or .ORG. In time
    this may change, but it will probably take a few years.
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去几年中批准的新顶级域名中，据我所知，没有哪一个实现了广泛的流行。人类是惰性的生物，大多数人仍然习惯于以.COM、.NET或.ORG结尾的名称。随着时间的推移，这可能会改变，但可能需要几年时间。
- en: Note
  id: totrans-424
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Some people actually felt that adding new generic TLDs was a bad idea, since
    it makes organizations potentially more difficult to locate (due to the possibility
    of a name ending in a variety of different TLDs). This is debatable, however,
    especially since the exhaustion of address space in the existing TLDs means many
    companies have needed to choose unintuitive domain names anyway*.'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: '*有些人实际上觉得增加新的通用顶级域名是一个糟糕的想法，因为这可能会使组织更难定位（由于域名可能以各种不同的顶级域名结尾）。然而，这还是有争议的，尤其是由于现有顶级域名的地址空间耗尽，许多公司已经不得不选择不直观的域名了*。'
- en: '[Table 54-1](ch54s02.html#internet_dns_organizational_generic_top_ "Table 54-1. Internet
    DNS Organizational (Generic) Top-Level Domains") shows all the current generic
    TLDs and describes how they are used, and it lists the current central authority
    that manages each. The original TLDs are highlighted in italics (I am including
    .INT as an original TLD, since it was created long before the "new" ones). [Figure 54-1](ch54s02.html#internet_dns_organizational_generic_tlds
    "Figure 54-1. Internet DNS organizational (generic) TLDs There are 15 generic
    TLDs currently defined for the Internet. They are shown here in alphabetical order,
    with the original TLDs shown in light shading and the new ones added in 2001/2002
    in darker shading.") shows the 15 generic TLDs in graphical form.'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: '[表54-1](ch54s02.html#internet_dns_organizational_generic_top_ "表54-1. Internet
    DNS组织（通用）顶级域名") 展示了所有当前的通用顶级域名，并描述了它们的使用方式，并列出了管理每个域名的当前中央权威机构。原始顶级域名以斜体突出显示（我将
    .INT 作为原始顶级域名包括在内，因为它是在“新”的之前创建的）。[图54-1](ch54s02.html#internet_dns_organizational_generic_tlds
    "图54-1. Internet DNS组织（通用）顶级域名 目前为互联网定义了15个通用顶级域名。它们按字母顺序在此处显示，原始顶级域名以浅色阴影显示，而2001/2002年添加的新域名以较深的阴影显示.")
    以图形形式显示了15个通用顶级域名。'
- en: '![Internet DNS organizational (generic) TLDs There are 15 generic TLDs currently
    defined for the Internet. They are shown here in alphabetical order, with the
    original TLDs shown in light shading and the new ones added in 2001/2002 in darker
    shading.](httpatomoreillycomsourcenostarchimages288163.png.jpg)'
  id: totrans-427
  prefs: []
  type: TYPE_IMG
  zh: '![互联网DNS组织（通用）顶级域名 互联网目前定义了15个通用顶级域名。它们按字母顺序排列在此，原始顶级域名以浅色阴影显示，而2001/2002年新增的顶级域名以深色阴影显示。](httpatomoreillycomsourcenostarchimages288163.png.jpg)'
- en: Figure 54-1. Internet DNS organizational (generic) TLDs There are 15 generic
    TLDs currently defined for the Internet. They are shown here in alphabetical order,
    with the original TLDs shown in light shading and the new ones added in 2001/2002
    in darker shading.
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 图54-1. 互联网DNS组织（通用）顶级域名 目前为互联网定义了15个通用顶级域名。它们按字母顺序排列在此，原始顶级域名以浅色阴影显示，而2001/2002年新增的顶级域名以深色阴影显示。
- en: Table 54-1. Internet DNS Organizational (Generic) Top-Level Domains
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 表54-1. 互联网DNS组织（通用）顶级域名
- en: '| Generic TLD | Abbreviation For | Authority | Description |'
  id: totrans-430
  prefs: []
  type: TYPE_TB
  zh: '| 通用顶级域名 | 缩写 | 权威机构 | 描述 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-431
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| .AERO | Aerospace | Société Internationale de Télécommunications Aéronautiques
    (SITA) | Used for members of the aerospace industry, such as airlines and airports.
    (Yes, that is French!) |'
  id: totrans-432
  prefs: []
  type: TYPE_TB
  zh: '| .AERO | 航空航天 | 国际航空航天电信公司（SITA） | 用于航空航天行业的成员，如航空公司和机场。（是的，这是法语！）|'
- en: '| *.ARPA* | Address and Routing Parameter Area | IANA/ ICANN | First defined
    as a temporary domain for migration from the older host table system, the *ARPA*
    of course originally stood for the Advanced Research Projects Agency, creators
    of the predecessors of the Internet. Today, the .ARPA domain is used for internal
    Internet management purposes; the expanded name shown in this table was, I believe,
    chosen to fit the acronym. The best-known use of this domain is for reverse DNS
    lookups. |'
  id: totrans-433
  prefs: []
  type: TYPE_TB
  zh: '| *.ARPA* | 地址和路由参数区域 | IANA/ICANN | 最初定义为从较旧的宿主表系统迁移的临时域名，当然，*ARPA*最初代表高级研究计划署，互联网前身创造者。今天，.ARPA域名用于内部互联网管理目的；表中显示的扩展名称，我相信是为了符合缩写。此域名最著名的用途是用于反向DNS查找。'
- en: '| .BIZ | Business | NeuLevel, Inc. | Used for businesses. Intended as a competitor
    to .COM. |'
  id: totrans-434
  prefs: []
  type: TYPE_TB
  zh: '| .BIZ | 商业 | NeuLevel公司 | 用于商业。旨在与.COM竞争。'
- en: '| *.COM* | Commercial Organizations | VeriSign, Inc. | Originally intended
    for corporations and other commercial interests, .COM is also widely used for
    other purposes, including small businesses and even individuals who like the popularity
    of the .COM domain. |'
  id: totrans-435
  prefs: []
  type: TYPE_TB
  zh: '| *.COM* | 商业组织 | VeriSign公司 | 最初旨在为公司和其它商业利益使用，.COM也被广泛用于其他目的，包括小型企业和甚至喜欢.COM域名流行度的个人。'
- en: '| .COOP | Cooperative Associations | Dot Cooperation, LLC | Used for cooperative
    associations. |'
  id: totrans-436
  prefs: []
  type: TYPE_TB
  zh: '| .COOP | 合作协会 | Dot Cooperation公司 | 用于合作协会。|'
- en: '| *.EDU* | Education | Educause | Originally intended for all types of educational
    organizations, .EDU is now used only for degree-granting higher-education institutions
    accredited in the US. Other educational institutions such as public schools usually
    use the country code TLDs. |'
  id: totrans-437
  prefs: []
  type: TYPE_TB
  zh: '| *.EDU* | 教育 | Educause | 最初旨在为所有类型的学校组织使用，.EDU现在仅用于在美国获得认证的学位授予高等教育机构。其他教育机构，如公立学校通常使用国家代码顶级域名。'
- en: '| *.GOV* | Government | U.S. General Services Administration | Reserved for
    the U.S. federal government. |'
  id: totrans-438
  prefs: []
  type: TYPE_TB
  zh: '| *.GOV* | 政府 | 美国总务管理局 | 保留供美国联邦政府使用。'
- en: '| .INFO | Information | Afilias, Ltd. | A very generic TLD designed for information
    resources of various sorts. It is unrestricted, in that anyone can register any
    sort of organization in .INFO. It''s also positioned as an alternative to .COM.
    |'
  id: totrans-439
  prefs: []
  type: TYPE_TB
  zh: '| .INFO | 信息 | Afilias公司 | 一个非常通用的顶级域名，旨在用于各种类型的信息资源。它是无限制的，任何人都可以在.INFO中注册任何类型的组织。它也被定位为.COM的替代品。'
- en: '| *.INT* | International | IANA .int Domain Registry | Used only for large
    organizations established by international treaty. |'
  id: totrans-440
  prefs: []
  type: TYPE_TB
  zh: '| *.INT* | 国际 | IANA .int域名注册处 | 仅用于由国际条约建立的大型组织。'
- en: '| *.MIL* | Military | U.S. DoD Network Information Center | Reserved for the
    U.S. military. |'
  id: totrans-441
  prefs: []
  type: TYPE_TB
  zh: '| *.MIL* | 军事 | 美国国防部网络信息中心 | 保留供美国军事使用。'
- en: '| .MUSEUM | Museum | Museum Domain Management Association | Take a guess. See
    http://index.museum for a complete list of museums using this TLD. |'
  id: totrans-442
  prefs: []
  type: TYPE_TB
  zh: '| .MUSEUM | 博物馆 | 博物馆域名管理协会 | 猜猜看。查看http://index.museum获取使用此顶级域名的完整博物馆列表。'
- en: '| .NAME | Names | Global Name Registry | In the original generic hierarchy,
    there was no place set aside for individuals to register names for themselves,
    so people would create domains like jonesfamily.org. This was not ideal, so .NAME
    was created as a place for individuals and families to register a domain for their
    names. .NAME also competes with the country code TLDs. |'
  id: totrans-443
  prefs: []
  type: TYPE_TB
  zh: '| .NAME | 名称 | 全球名称注册 | 在原始的通用层次结构中，没有为个人预留注册自己名称的地方，因此人们会创建像jonesfamily.org这样的域名。这并不理想，因此创建了.NAME作为个人和家庭注册自己名称域名的场所。.NAME还与国家代码顶级域名竞争。|'
- en: '| *.NET* | Network | VeriSign, Inc. | This was supposed to be used only for
    Internet service providers (ISPs) and other organizations working intimately with
    the Internet or networking. Due to the exhaustion of name spaces in .COM and .ORG,
    many .NET domains are registered to other organizations, however. |'
  id: totrans-444
  prefs: []
  type: TYPE_TB
  zh: '| *.NET* | 网络 | VeriSign, Inc. | 这原本只用于互联网服务提供商（ISPs）和其他与互联网或网络紧密合作的组织。然而，由于.COM和.ORG中的名称空间耗尽，许多.NET域名被注册给了其他组织。'
- en: '| *.ORG* | Organizations | Public Interest Registry | Originally intended for
    organizations not fitting into the other generic TLDs, .ORG quickly became associated
    with professional and nonprofit organizations. It is possible, however, to have
    a for-profit company use an .ORG name. |'
  id: totrans-445
  prefs: []
  type: TYPE_TB
  zh: '| *.ORG* | 组织 | 公共利益注册局 | 最初是为不适合其他通用顶级域的组织设计的，.ORG很快与专业和非营利组织相关联。然而，有盈利公司可以使用.ORG名称。'
- en: '| .PRO | Professional | RegistryPro | Reserved for credentialed professionals
    such as lawyers and doctors. |'
  id: totrans-446
  prefs: []
  type: TYPE_TB
  zh: '| .PRO | 专业 | RegistryPro | 保留给有资质的专业人士，如律师和医生。|'
- en: Tip
  id: totrans-447
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** One of the two ways in which the Internet''s DNS name space
    is divided is using a set of generic TLDs. These TLDs are intended to provide
    a place for all companies and organizations to be named based on their organization
    type. There were originally six such domains, but this has been expanded so that
    there are now 15.'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 互联网的DNS名称空间被划分为两种方式之一是使用一组通用顶级域名（TLDs）。这些TLDs旨在为所有公司和组织提供一个基于其组织类型命名的场所。最初有六个这样的域名，但现在已经扩展到有15个。'
- en: DNS Geopolitical (Country Code) TLDs and Authorities
  id: totrans-449
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS 地缘政治（国家代码）顶级域名和机构
- en: In theory, the generic TLDs would be sufficient to meet the needs of all the
    individuals, companies, and groups in the world. This is especially true since
    .ORG, by definition, is a catchall that can include anyone or anything. Thus,
    in an ideal world, everyone in the world would have been able to find a place
    in those simple domains.
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 理论上，通用顶级域名应该足以满足世界上所有个人、公司和团体的需求。这一点尤其正确，因为根据定义，.ORG是一个可以包括任何人或任何事物的通用域名。因此，在一个理想的世界里，世界上每个人都能在这些简单的域名中找到一个位置。
- en: 'However, back at the beginning of DNS, its creators recognized that the generic
    TLDs might not meet the needs of everyone around the world, especially in certain
    cases. There are several reasons for this:'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在DNS的早期，其创造者意识到通用顶级域名可能无法满足世界上所有人的需求，尤其是在某些情况下。这有几个原因：
- en: '**Americentricism of the Generic Domains** I don''t mean this as a criticism
    (I''m an American citizen and love my country!). It is indisputable, however,
    that United States organizations and companies dominate the generic TLDs. This
    is not surprising, given that the Internet was first developed in the United States,
    but it still presents a problem for certain groups. For example, if the United
    States military controls the .MIL domain, where does, say, Great Britain''s military
    fit into the name space?'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: '**通用域名的美国中心主义** 我并不是在批评这一点（我是一个美国公民，热爱我的国家！）。然而，无可争议的是，美国组织和公司在通用顶级域名中占据主导地位。考虑到互联网最初是在美国开发的，这一点并不令人惊讶，但它仍然给某些群体带来问题。例如，如果美国军方控制着.MIL域名，那么比如大不列颠的军方在名称空间中该如何定位？'
- en: '**Language** Most of the generic domains are populated by organizations that
    primarily do business in English. There are hundreds of languages in the world,
    however, and it''s easier for the speakers of those tongues if they can more readily
    locate resources they can understand.'
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: '**语言** 大多数通用域名由主要用英语进行商业活动的组织占据。然而，世界上有数百种语言，对于那些语言的说话者来说，如果他们能够更容易地找到他们能理解的资源，那就更容易了。'
- en: '**Local Control** Countries around the world rarely agree on much, and they
    certainly differ on how organizations within their nations should have their Internet
    presence arranged. There was a desire on the parts of many to allow nations to
    have the ability to set up subsets of the name space for their own use.'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: '**本地控制** 世界各地的国家很少达成一致，他们当然在如何安排其国家内组织互联网存在方面存在差异。许多人希望允许国家能够为自己设置命名空间的一部分。'
- en: For these and other reasons, the Internet's name space was set up with a set
    of *country code* TLDs paralleling the generic ones, sometimes called *ccTLDs*.
    I call these *geopolitical* TLDs, since they are based on geopolitical divisions
    of the world (similar to the example I used in the overview of the DNS name space
    in [Chapter 53](ch53.html "Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY")).
    In this hierarchy, every country of the world is assigned a particular two-letter
    code as a TLD, with a specific authority put in charge of administering the domain.
    For example, the ccTLD for Great Britain is .UK, the one for Canada is .CA, and
    the one for Japan is .JP. The codes often are more meaningful in the local language
    than in English. For example, Germany's is .DE, and Switzerland's is .CH.
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这些以及其他原因，互联网的命名空间被设置了一套与通用顶级域名平行的*国家代码* TLDs，有时被称为*ccTLDs*。我称这些为*地缘政治* TLDs，因为它们基于世界的地缘政治划分（类似于我在[第53章](ch53.html
    "第53章. DNS 命名空间、架构和术语")中概述 DNS 命名空间时使用的例子）。在这个等级结构中，世界上每个国家都被分配了一个特定的两位字母代码作为
    TLD，并指定一个特定的权威机构负责管理该域名。例如，大不列颠的 ccTLD 是 .UK，加拿大的是 .CA，日本的则是 .JP。这些代码在本地语言中往往比在英语中更有意义。例如，德国的是
    .DE，瑞士的是 .CH。
- en: Country Code Designations
  id: totrans-456
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 国家代码指定
- en: When I said that countries rarely agree on anything, I wasn't kidding. In fact,
    they can't even agree on what's a country! Real shooting wars have been fought
    over whether or not a particular territory was independent or part of another
    nation, and the creators of DNS wanted no part of this sort of controversy. As
    the IANA website says, "The IANA is not in the business of deciding what is and
    what is not a country, nor what code letters are appropriate for a particular
    country."
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: 当我说国家很少达成一致时，我并不是在开玩笑。事实上，他们甚至不能就什么是国家达成一致！为了是否某个领土是独立还是另一个国家的组成部分而进行的真实射击战争已经发生，DNS
    的创造者不想参与这种争议。正如 IANA 网站所说：“IANA 不参与决定什么是国家，什么不是国家，以及哪些代码字母适用于特定国家。”
- en: To remain neutral, IANA's ccTLD codes are taken directly from the standard country
    abbreviations maintained by the International Organization for Standardization
    (ISO) in ISO Standard 3166-1\. When a country is recognized by the ISO and a code
    assigned to it on this list, IANA creates it as a TLD. There are presently more
    than 200 different geopolitical TLDs. You can find the current list of IANA country
    code TLDs at [http://www.iana.org/cctld/cctld-whois.htm](http://www.iana.org/cctld/cctld-whois.htm).
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保持中立，IANA 的 ccTLD 代码直接来自国际标准化组织（ISO）维护的 ISO 标准 3166-1 中的标准国家缩写。当一个国家被 ISO
    认可并分配了此列表上的代码时，IANA 就将其创建为 TLD。目前有超过 200 个不同的地缘政治 TLDs。您可以在[http://www.iana.org/cctld/cctld-whois.htm](http://www.iana.org/cctld/cctld-whois.htm)找到
    IANA 国家代码 TLDs 的当前列表。
- en: Tip
  id: totrans-459
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Due to the limitations of the generic TLDs, a set of *country*
    code top-level domains was created. This *geopolitical hierarchy* allows each
    nation on earth to set up its own name system based on its own requirements and
    to administer it in the manner it sees fit. The IANA determines what is a country
    based on official decisions made by ISO.'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 由于通用 TLDs 的限制，创建了一套*国家*代码顶级域名。这种*地缘政治层次结构*允许地球上每个国家根据自己的需求建立自己的命名系统，并以他们认为合适的方式管理它。根据
    ISO 的官方决定，IANA 确定什么是国家。'
- en: Country Code TLD Authorities
  id: totrans-461
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 国家代码 TLD 权威机构
- en: Each country has the authority to set up its TLD with whatever internal substructure
    it chooses; again, this is the power of a hierarchical structure.
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: 每个国家都有权根据自己的选择设置其 TLD 的内部子结构；这再次显示了层次结构的权力。
- en: Some countries enforce a further geographical substructure at the lower levels.
    For example, the .US domain for the United States was originally set up so that
    all second-level domains were two-letter state abbreviations (this was later changed).
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 一些国家在较低级别强制实施进一步的地理子结构。例如，美国的 .US 域最初被设置，以便所有二级域名都是两位字母的州缩写（这后来有所改变）。
- en: Other countries may actually use organizational subdomains within their country
    code. For example, Great Britain has .CO.UK for companies in the country (like
    .COM but for the UK only; they left off the *M*), and .COM.AU is for corporations
    in Australia.
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: 其他国家实际上可能在它们的国代码中使用组织子域名。例如，大不列颠有 .CO.UK 用于该国的公司（就像 .COM 但仅限于英国；他们省略了 *M*），而
    .COM.AU 是用于澳大利亚的公司的。
- en: Other countries may not have any particular substructure at all, especially
    if they are small.
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: 其他国家可能根本没有任何特定的子结构，尤其是如果它们很小的话。
- en: Leasing/Sale of Country Code Domains
  id: totrans-466
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 国家代码域名的租赁/销售
- en: Interestingly, some very small countries with recognizable country codes, especially
    to English speakers, have used their codes for very creative purposes, including
    selling or renting the name space to enterprising companies.
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，一些具有可识别国家代码的小国家，尤其是对英语使用者来说，已经将它们的代码用于非常创造性的目的，包括将名称空间出售或出租给有进取心的公司。
- en: A good example is the .TV domain, which technically belongs to the island nation
    of *Tuvalu*. Of course, to most people, "TV" means something quite different.
    Some folks thought that domain names ending in .TV might be popular in the English-speaking
    world, so they formed a company called The .TV Corporation and negotiated with
    the government of Tuvalu to use the .TV domain. Today, the authority for this
    TLD is this corporation, headquartered in California! Similar arrangements can
    be found with the .CC, .NU, .TO, and other TLDs.
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: 一个很好的例子是 .TV 域名，技术上属于岛国 *图瓦卢*。当然，对大多数人来说，“TV”意味着完全不同的东西。有些人认为以 .TV 结尾的域名可能在英语世界很受欢迎，所以他们成立了一家名为
    The .TV Corporation 的公司，并与图瓦卢政府协商使用 .TV 域名。如今，这个 TLD 的管理机构就是这家总部位于加利福尼亚的公司！类似的安排也可以在
    .CC、.NU、.TO 以及其他 TLDs 中找到。
- en: This serves as a good reminder that the name space is logical and not physical.
    Obviously, the many computers with .TV names are not actually located on a remote
    island in the South Pacific. Similarly, if a website ends with .CA, for example,
    it probably represents a Canadian organization, but that doesn't necessarily mean
    the website itself is actually hosted in Canada.
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: 这提醒我们，名称空间是逻辑的，而不是物理的。显然，拥有 .TV 名称的许多计算机实际上并不位于南太平洋的一个偏远岛屿上。同样，如果一个网站以 .CA 结尾，例如，它可能代表一个加拿大组织，但这并不一定意味着该网站本身实际上托管在加拿大。
- en: Drawbacks of the Geopolitical TLDs
  id: totrans-470
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地缘政治 TLDs 的缺点
- en: The geopolitical domains have been very popular for certain uses. National governments
    and other official institutions like to use them, for obvious reasons. Typing
    www.gov.*xx* or www.government.*xx*, where *xx* is a country code is likely to
    bring you to the national government website of most countries. Some companies
    and organizations use the ccTLDs because they allow them to choose a name already
    taken in the generic hierarchies or simply to express national pride.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 地缘政治域名在特定用途中非常受欢迎。国家政府和其他官方机构喜欢使用它们，这是显而易见的。输入 www.gov.*xx* 或 www.government.*xx*（*xx*
    是国家代码），很可能会把你带到大多数国家的国家政府网站。一些公司和组织使用 ccTLDs，因为它们允许他们选择在通用层次结构中已被占用的名称，或者简单地表达民族自豪感。
- en: For many other companies and organizations, however, the generic TLDs have been
    much more popular than the country codes. I think the most important reason for
    this is that organizations are easier to locate using the generic domains.
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，对于许多其他公司和组织来说，通用顶级域名（TLDs）比国家代码更受欢迎。我认为最重要的原因是组织使用通用域名更容易定位。
- en: Here's a good example of what I mean. In the town near where I live, a new grocery
    store called Aldi recently opened. I like the store and wanted to learn more about
    it, so I fired up my web browser and sought out its website. Yes, I could have
    typed it into a search engine, but like most people, I'm lazy. It was much easier
    to just enter www.aldi.com into my browser, and lo and behold, up popped the website
    of Aldi International.
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个很好的例子来说明我的意思。在我居住的城镇附近，一家名为 Aldi 的新杂货店最近开业了。我喜欢这家商店，并想了解更多关于它的信息，所以我打开了我的网络浏览器，并寻找它的网站。是的，我可以在搜索引擎中输入它，但像大多数人一样，我很懒。直接在我的浏览器中输入
    www.aldi.com 要容易得多，结果，Aldi 国际的网站就弹出来了。
- en: Now, Aldi is actually headquartered in Germany, and the company does have a
    website at www.aldi.de as well. But I didn't know that. I found them easily by
    going to www.aldi.com, because I didn't need to know their physical location,
    and because I know that most large companies have a .COM domain. Of course, being
    findable is very important, especially for commercial organizations trying to
    do business.
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，Aldi 实际上总部位于德国，该公司确实有一个位于 www.aldi.de 的网站。但我不知情。我通过访问 www.aldi.com 轻易地找到了他们，因为我不需要知道他们的物理位置，而且我知道大多数大公司都有
    .COM 域名。当然，可查找性非常重要，尤其是对于试图开展商业活动的商业组织。
- en: Another good example is the United States, which has its own country code, .US,
    in addition to dominating the generic TLDs. The authority in charge of this domain
    initially chose to make it follow a strict geographical hierarchy, so every domain
    had to be of the form *organization.city.state-code*.us. So, to use this part
    of the name space, a company in Boston must be within the .boston.ma.us domain.
    That's very neat and logical, but it makes names both longer and harder to guess
    than the generic equivalents.
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个很好的例子是美国，它除了主导通用 TLD 外，还有自己的国家代码 .US。负责该域名的权威机构最初选择使其遵循严格的地理层级结构，因此每个域名都必须是
    *organization.city.state-code*.us 的形式。因此，要使用这部分命名空间，波士顿的公司必须位于 .boston.ma.us 域名下。这非常整洁且逻辑性强，但它使得名称比通用等价物更长且更难猜测。
- en: 'Suppose you wanted to get information on metals giant Alcoa. If you''re in
    the industry, you might know Alcoa is located in Pittsburgh, but if not, which
    is easier to find: www.alcoa.pittsburgh.pa.us or www.alcoa.com? Anyone here know
    how to spell Albuquerque?'
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你想获取金属巨头 Alcoa 的信息。如果你在行业里，你可能知道 Alcoa 位于匹兹堡，但如果你不在，哪个更容易找到：www.alcoa.pittsburgh.pa.us
    还是 www.alcoa.com？这里有人知道如何拼写阿尔伯克基吗？
- en: It is for this reason that the .US domain achieved success in certain segments
    of society but not in others, especially commercial entities (corporations). The
    strict hierarchy does have some real advantages, such as avoiding name space conflicts,
    but its disadvantages were such that the rules were recently relaxed in the .US
    domain.
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: 正因如此，.US 域名在某些社会群体中取得了成功，但在其他群体中却没有，尤其是商业实体（公司）。严格的层级结构确实有一些实际优势，例如避免命名空间冲突，但其缺点如此之多，以至于最近在
    .US 域名中放宽了规则。
- en: Public Registration for Second-Level and Lower Domains
  id: totrans-478
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 二级和更低级别域名的公共注册
- en: The IANA is in charge of deciding which TLDs exist in the Internet name space,
    and as such, they are ultimately responsible for all names in the Internet. The
    entire point of the authority hierarchy, however, is that IANA should not be responsible
    for the whole name space. So, while IANA maintains control over certain TLDs,
    such as .INT and .ARPA, control for managing the others is delegated to secondary
    authorities for each TLD.
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: IANA 负责决定哪些 TLD 存在于互联网名称空间中，因此，他们最终对互联网中的所有名称负责。然而，权威层级的整个目的在于 IANA 不应负责整个命名空间。因此，尽管
    IANA 维护对某些 TLD（如 .INT 和 .ARPA）的控制，但管理其他 TLD 的控制权被委派给了每个 TLD 的二级权威机构。
- en: Just as IANA had the choice of how to delegate authority to the subdomains of
    the root domain, the organization in charge of each TLD gets to make the same
    decision about how second-level domains are to be created under the TLD.
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 正如 IANA 有权选择如何将权限委派给根域的子域一样，负责每个顶级域（TLD）的组织也有权决定如何在 TLD 下创建二级域。
- en: In many TLDs, especially the generic ones, second-level domains are assigned
    directly to individuals or organizations. For example, a company named XYZ Industries
    might want to get the domain xyzindustries.com.
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多 TLD 中，尤其是通用 TLD，二级域名直接分配给个人或组织。例如，名为 XYZ Industries 的公司可能想要获得 xyzindustries.com
    的域名。
- en: In other TLDs, second-level domains are set up in a particular structure, like
    the state codes used in the .US domain. There, you need to go down more levels,
    but eventually you get to the point where companies and people register their
    own domains. For example, in the .US domain, XYZ Industries might want to register
    xyz.phoenix.az.us if it were headquartered in Phoenix.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他 TLD 中，二级域名的设置遵循特定的结构，就像 .US 域名中使用的州代码。在那里，你需要向下走更多层级，但最终你会到达公司和个人注册自己域名的点。例如，在
    .US 域名中，XYZ Industries 如果总部位于凤凰城，可能会想要注册 xyz.phoenix.az.us。
- en: This transition point between the authorities granted responsibility for parts
    of the name space and the regular people and groups who want to get names is important.
    A process of *public registration* had to be established to allow such name assignment
    to occur in a consistent and manageable way. This was not that difficult to accomplish
    back when the original generic TLDs and country code TLDs were first created.
    The Internet was quite small, and it made sense to just have the authority in
    charge of each TLD perform registrations within that TLD. This ensured that there
    was no duplication of names within a TLD with a minimum of fuss.
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: 这个从被授权负责部分名称空间的权威机构到希望获取名称的普通人和团体之间的过渡点很重要。必须建立一个*公开注册*的过程，以允许以一致和可管理的方式发生此类名称分配。当最初创建通用的顶级域名和国家代码顶级域名时，这并不难实现。当时互联网相当小，让每个顶级域名的管理机构在该顶级域名内执行注册是有意义的。这确保了在顶级域名内没有名称重复，而且没有太多麻烦。
- en: Registration Authority
  id: totrans-484
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 注册管理机构
- en: For very important generic TLDs such as .COM, .NET, and .ORG, the authority
    in charge of registration was the Internet Network Information Center (the InterNIC).
    The InterNIC was set up as a service administered by the United States government,
    who later granted the contract to manage it to Network Solutions Inc. (NSI). NSI
    was eventually purchased by VeriSign, who later spun it off as a separate venture.
    (Things change quickly in the networking world!)
  id: totrans-485
  prefs: []
  type: TYPE_NORMAL
  zh: 对于像.COM、.NET和.ORG这样非常重要的通用顶级域名，负责注册的权威机构是互联网网络信息中心（InterNIC）。InterNIC是由美国政府管理的服务，后来将管理它的合同授予了Network
    Solutions Inc.（NSI）。NSI最终被VeriSign收购，后来将其作为独立的企业分离出来。（网络世界的变化真是快！）
- en: NSI single-handedly performed all registrations within the .COM, .NET, and .ORG
    TLDs for many years. The popularity of the original generic TLDs, however, led
    to an explosion in demand for name registration in these domains in the 1990s.
    Having a single company in charge of registration led to this becoming another
    bottleneck in the Internet's Domain Name System. There were also many folks who
    didn't like the lack of accountability and competition that came with having a
    single monopoly in charge of registration. The InterNIC could set its own price
    and originally charged $35 per year per domain name, then later $50 per year.
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 多年来，NSI独立执行了.COM、.NET和.ORG顶级域名内的所有注册。然而，原始通用顶级域名的流行导致了20世纪90年代这些域名名称注册需求的激增。有一个公司负责注册导致这成为互联网域名系统中的另一个瓶颈。还有很多人不喜欢单一垄断负责注册所带来的缺乏责任感和竞争。InterNIC可以自行设定价格，最初每个域名每年收费35美元，后来增加到每年50美元。
- en: In the late 1990s, responsibility for name registration was given to ICANN.
    The registration process was *deregulated*, to borrow a term referring to removal
    of monopolies from industries like power generation. As of December 1999, there
    was still a single authority with overall responsibility for each TLD, including
    .COM, .NET, and .ORG.
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 在20世纪90年代末，域名注册的责任被赋予了ICANN。注册过程被*去监管化*，借用一个指从发电等行业中去除垄断的术语。截至1999年12月，每个顶级域名（包括.COM、.NET和.ORG）仍然只有一个负责整体管理的单一机构。
- en: Today, NSI is still the authority running .COM and .NET. However, it isn't the
    only organization that registers names within these TLDs. It further delegates
    registration authority to a multitude of other companies, called *accredited registrars*.
    Any registrar can register names within the TLD(s) for which they are accredited.
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，NSI仍然是运行.COM和.NET的权威机构。然而，它并不是唯一注册这些顶级域名下名称的组织。它进一步将注册管理权委托给许多其他公司，称为*认证注册商*。任何注册商都可以为其认证的顶级域名(s)注册名称。
- en: Registration Coordination
  id: totrans-489
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 注册协调
- en: Naturally, coordination becomes much more of a concern when you have multiple
    companies registering names in a TLD. A special set of technical and administrative
    procedures is followed to ensure that there are no problems, such as two registrars
    trying to grab a name at the same time.
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: 当有多个公司在顶级域名下注册名称时，自然协调变得更加重要。遵循一套特殊的技性行政程序，以确保不会出现问题，例如两个注册商同时试图抢注一个名称。
- en: 'The system has worked well, and those who wish to use TLDs where competition
    exists now can choose from a variety of registering companies. The most noticeable
    result of this was also the most predictable one: the cost of registering a domain
    name in the deregulated generic TLDs is usually much lower than the fees originally
    charged by the InterNIC.'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: 该系统运行良好，现在希望使用存在竞争的TLDs的公司可以选择各种注册公司。这一结果最引人注目的是最可预测的：在非监管的通用TLDs中注册域名的成本通常远低于最初由InterNIC收取的费用。
- en: Once a company, individual, or organization has a registered lower-level domain,
    he/she/it becomes the authority for that domain. Use of the domain then becomes
    private, but depending on how the domain is used, further public name registration
    may be required. See the discussion of private registration, near the end of this
    chapter, for more information.
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦公司、个人或组织注册了低级域名，他/她/它就成为了该域名的权威。域名的使用因此变得私密，但根据域名的使用方式，可能还需要进一步进行公共名称注册。有关私人注册的讨论，请参阅本章末尾，以获取更多信息。
- en: DNS Public Registration Disputes and Dispute Resolution
  id: totrans-493
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS公共注册争议和争议解决
- en: The Internet started off as a medium for research into networking, evolved into
    a system for interconnecting scientists, and ended up as a global communications
    tool used by just about everyone. As part of this evolution, the Internet also
    became a very important part of how business is done in the world. Money started
    to come into the Internet picture in the early 1990s, and just a few short years
    later, its impact on the Internet was so significant that the growth of the stock
    market to dizzying heights in the late 1990s is now often called "the Internet
    bubble."
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网最初是一种研究网络的中介，后来发展成为连接科学家的系统，最终成为几乎每个人都使用的全球通信工具。作为这一演变的一部分，互联网也成为了世界上商业活动的重要组成部分。20世纪90年代初，金钱开始进入互联网领域，仅仅几年后，它对互联网的影响就如此之大，以至于20世纪90年代末股市飙升的现象现在常被称为“互联网泡沫”。
- en: Public Registration Disputes
  id: totrans-495
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 公共注册争议
- en: Unfortunately, the increasing importance of the Internet to commercial interests
    crashed headlong into the noncommercial original design of Internet technology,
    and nowhere was this more evident than in DNS. Since there were only a few generic
    TLDs, each name within a TLD had to be unique, and humans are often confrontational
    creatures, it didn't take long before arguments broke out over who should be able
    to use what name and why. And, of course, from there, it didn't take long before
    lawsuits and other unpleasantries were common.
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，互联网对商业利益的重要性日益增加，与互联网技术的非商业原始设计发生了正面冲突，这在DNS中尤为明显。由于只有少数通用TLDs，TLD内的每个名称都必须是唯一的，而人类往往是好斗的生物，因此很快就出现了关于谁可以使用什么名称以及为什么的争论。当然，从那里开始，不久之后，诉讼和其他不愉快的事情就变得司空见惯了。
- en: 'There are a surprising number of significant problems associated with public
    registration of domain names:'
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 与公共注册域名相关的重大问题数量惊人：
- en: '**Corporate Name Conflicts** The .COM domain is for corporations, but many
    corporations have the same name. The ACME Furniture Company, the ACME Restaurant
    Supply Corporation, and ACME Footwear, Inc., probably all would like to have the
    acme.com domain. But there can be only one such domain within .COM. (These are
    fictional examples; acme.com is actually owned by an organization called *Acme
    Labs*.)'
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: '**公司名称冲突** .COM域名是针对公司的，但许多公司拥有相同的名称。ACME家具公司、ACME餐饮用品公司以及ACME鞋业公司，都可能希望拥有acme.com域名。但在.COM中只能有一个这样的域名。（这些都是虚构的例子；acme.com实际上由一个名为*Acme
    Labs*的组织拥有。）'
- en: '**Corporate/Individual/Small Business Name Conflicts** There are many corporations
    that have names similar to or even identical to the names of individuals, leading
    to potential conflicts. For example, suppose your first name is Wendy and you
    own a small fabric store called Wendy''s Fabrics. But you are Internet savvy and
    decide you want to register wendys.com as soon as you hear about the Internet
    in 1993\. Then this big hamburger chain comes along and has a problem with that.'
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: '**公司/个人/小型企业名称冲突** 许多公司拥有与个人姓名相似甚至完全相同的名称，这可能导致潜在的冲突。例如，假设你的名字是Wendy，你拥有一家名为Wendy''s
    Fabrics的小型布料店。但你很懂互联网，并在1993年一听到互联网就决定注册wendys.com。然后这家大型汉堡连锁店出现了，并对此产生了问题。'
- en: Note
  id: totrans-500
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*To my knowledge, no such issue arose with respect to Wendy''s, but there actually
    was a widely publicized case that shows just how recently most corporations were
    out of the loop with respect to domain naming. In 1994, a writer for Wired magazine
    was astonished to find that the mcdonalds.com domain name was unregistered! To
    show just how unregulated the registration process was, he registered it himself,
    and caused a bit of a stir as a result. The Golden Arches folks eventually acquired
    the domain from him in an amicable arrangement, where he relinquished the name
    and they made a donation to charity*.'
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: '*据我所知，温迪公司并没有出现此类问题，但实际上有一个广为人知的案例，展示了大多数公司最近在域名命名方面是如何脱离轨道的。1994年，《连线》杂志的一名撰稿人惊讶地发现，mcdonalds.com这个域名尚未注册！为了展示注册过程是多么不受监管，他自己注册了这个域名，并因此引起了一些骚动。最终，金拱门的人通过友好的安排从他那里购买了该域名，他放弃了名称，他们向慈善机构捐赠了一笔钱*。'
- en: '**Corporate Warfare** A particularly ugly type of conflict is when companies
    intentionally try to take business from each other by registering names that have
    nothing to do with their own companies. An example would be if Burger King had
    tried to register mcdonalds.com and use it to advertise Burger King products.
    (Which they didn''t do, I might add, so please nobody sue me!) Another example
    is when companies try to use alternate TLDs, such as registering burgerking.org
    to confuse people trying to find burgerking.com. In fact, many companies have
    taken the step of registering their names in many different TLDs to prevent this
    sort of thing from happening.'
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: '**企业战争** 当公司故意通过注册与自身公司无关的名称来试图从对方那里夺取业务时，就会发生一种特别丑陋的冲突。一个例子是，如果汉堡王试图注册mcdonalds.com并用来宣传汉堡王的产品。（顺便说一句，他们并没有这样做，所以请不要起诉我！）另一个例子是，公司试图使用替代顶级域名（TLD），例如注册burgerking.org来混淆试图找到burgerking.com的人。事实上，许多公司已经采取了在许多不同TLD上注册自己名称的措施，以防止这类事情发生。'
- en: '**Cybersquatting** Some ambitious (to choose a nice term) individuals, recognizing
    early on the potential value of certain names, registered large volumes of names
    with the hopes of reselling them. Many people condemned this as exploitative,
    and the term *cybersquatting* was created to refer to this type of activity. Unfortunately,
    a lot of money was made this way, and there are many domain names that, to this
    day, cannot be used because they have been reserved indefinitely by people or
    individuals who will never use them.'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: '**网络域名抢注** 一些雄心勃勃（用这个词来形容很合适）的个人，很早就意识到某些名称的潜在价值，注册了大量名称，希望将来转售。许多人谴责这种行为是剥削性的，因此创造了“网络域名抢注”这个术语来指代这种活动。不幸的是，通过这种方式赚了很多钱，至今仍有许多域名因为被某些人或个人无限期保留而无法使用。'
- en: '**Deceptive Naming Practices** Another type of somewhat diabolic creativity
    has been displayed by people who seek to take advantage of the inability of some
    of us to spell. For example, if you were a competitor of a large company called
    Superb Transceivers Inc., which registered superbtransceivers.com, you might register
    superbtranscievers.com and redirect traffic from there to your own domain. Another
    example takes advantage of the common mix-up between the letter *O* and 0 (zero).
    For example, a software company once registered micros0ft.com, much to the chagrin
    of the Redmond, Washington software giant.'
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: '**误导性命名实践** 另一种有点邪恶的创造力体现在那些试图利用我们中一些人拼写能力不足的人身上。例如，如果你是一家名为Superb Transceivers
    Inc.的大公司的竞争对手，该公司注册了superbtransceivers.com，你可能会注册superbtranscievers.com，并将流量从那里重定向到你的域名。另一个例子是利用字母*O*和数字0（零）之间的常见混淆。例如，一家软件公司曾经注册了micros0ft.com，这让华盛顿州雷德蒙德的软件巨头感到非常不快。'
- en: Incidentally, it was all this nonsense that led, in part, to the clamor for
    new generic TLDs. Even though the more complicated schemes used by TLDs like .US
    are not very popular, they have a huge advantage over the generic domains. Since
    all these registrations are geographic, there are far fewer conflicts. For example,
    the ACME Furniture Company might use acme.seattle.wa.us, the ACME Restaurant Supply
    Corporation might have acme.mendocino.ca.us, and ACME Footwear, Inc., could go
    with acme.anchorage.ak.us. A dispute would arise only when organizations have
    the same name and also are in the same state and town. You could still have three
    Joe's Pizza Parlors in Chicago duke it out, but it's not likely to be a problem
    for big companies.
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 顺便提一下，正是这些荒谬的事情部分导致了对新通用顶级域名的强烈呼声。尽管像.US这样的顶级域使用的更复杂的方案并不受欢迎，但它们在通用域名上具有巨大的优势。由于所有这些注册都是地域性的，因此冲突要少得多。例如，ACME家具公司可能会使用acme.seattle.wa.us，ACME餐饮供应公司可能拥有acme.mendocino.ca.us，而ACME鞋业公司则可以选择acme.anchorage.ak.us。只有在组织名称相同且位于同一州和城镇时，才会出现争议。你仍然可以在芝加哥有三个乔的比萨店竞争，但这不太可能成为大公司的问题。
- en: Methods of Registration Dispute Resolution
  id: totrans-506
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 注册争议解决方法
- en: 'So, how do we resolve these situations? As the saying goes, it can be done
    either the easy way or the hard way. Here are some methods that have been used
    for dispute resolution:'
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们如何解决这些情况呢？俗话说，这可以通过简单或困难的方式完成。以下是一些用于争议解决的方法：
- en: '**Domain Name Sharing** Sometimes, the antagonists agree on a productive solution.
    One particularly constructive idea is to agree to *share* the domain name. For
    example, the three different ACME companies could each create their own more specifically
    named domains, such as acmefurniture.com, acmerestaurantsupply.com, and acmefootwear.com.
    Then they might agree to have the www.acme.com registered to nobody, by having
    one company register it and not use it for anything. Even better, they could set
    it up with a simple web page that says the domain is shared, with a link to the
    three sites. Unfortunately, it seems grade school children understand the concept
    of sharing better than most corporate executives do, so this type of resolution
    is rare.'
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: '**域名共享**有时，对立双方会同意一个富有成效的解决方案。一个特别有建设性的想法是同意*共享*域名。例如，三个不同的ACME公司可以各自创建自己的更具特定名称的域名，例如acmefurniture.com、acmerestaurantsupply.com和acmefootwear.com。然后他们可能同意将www.acme.com注册给无人使用，通过一家公司注册但不用于任何目的。更好的是，他们可以设置一个简单的网页，说明域名是共享的，并提供到三个网站的链接。不幸的是，似乎小学生比大多数企业高管更理解共享的概念，因此这种解决方案很少见。'
- en: '**Domain Name Purchase** Another option is purchase. If a big company wants
    a domain name already registered by an individual or a small business, it will
    often just purchase the name, as this is the easiest thing to do. During the height
    of the Internet mania, there were domain names that sold for *millions* of dollars—just
    for the right to use the name! Many cybersquatters and other speculators got rich
    selling names.'
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: '**域名购买**另一个选择是购买。如果一家大公司想要购买一个个人或小企业已经注册的域名，它通常会直接购买该域名，因为这是最容易的做法。在互联网狂热的高峰期，有些域名以*数百万*美元的价格出售——仅仅是使用该名称的权利！许多网络抢注者和其他投机者通过出售域名而致富。'
- en: '**Litigation** Often, the combatants don''t play nice, and the usual occurs:
    threats, intimidation, lawsuits, and so forth. Sometimes, a letter from a lawyer
    is enough to resolve the issue, especially when some poor individual owning a
    website gets threatened with legal action by a large company—this has happened
    many times. However, often the disagreeing parties stick to their guns, especially
    if two companies lock horns and their lawyers refused to back down. Usually, the
    matter then ends up in the courts, where it is eventually resolved one way or
    the other. Usually, claims of trademark infringement would be used by a company
    challenging a prior domain name registration.'
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: '**诉讼**通常，争斗者不会表现得很好，通常会发生：威胁、恐吓、诉讼等等。有时，一封律师函就足以解决争议，特别是当一些拥有网站的可怜个人受到大公司的法律行动威胁时——这种情况已经发生很多次。然而，经常有争议的各方坚持自己的立场，特别是当两家公司发生冲突，他们的律师拒绝退让时。通常，事情最终会进入法院，以某种方式解决。通常，商标侵权的主张会被挑战先前域名注册的公司使用。'
- en: The Uniform Domain Name Dispute Resolution Policy
  id: totrans-511
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 统一域名争议解决政策
- en: Lawsuits are expensive and time-consuming, so there was a desire that some other
    mechanism exist for resolving these conflicts as well. Since the authority for
    each TLD controls what happens within it, it also has the right to create its
    own policies for how to deal with these sorts of issues. For the generic TLDs,
    the original registering authority, the InterNIC, had a dispute resolution policy
    that allowed people with a complaint to challenge a domain name registration if
    they had a trademark interest in that name. The policy was controversial for a
    number of reasons, not the least of which because it led to some domain names
    being successfully challenged, even if there was no proof of trademark infringement.
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: 诉讼费用高昂且耗时，因此人们希望存在其他机制来解决这些冲突。由于每个顶级域（TLD）的权威机构控制着其内部发生的事情，因此它也有权制定自己的政策来处理这类问题。对于通用顶级域，原始注册机构InterNIC曾有一个争议解决政策，允许对某个名称有商标利益的人挑战域名注册。这项政策因多个原因而备受争议，其中最不重要的是，它导致一些域名在没有任何商标侵权证据的情况下被成功挑战。
- en: The current authority for the generic TLDs, IANA/ICANN, created a new Uniform
    Domain Name Dispute Resolution Policy (UDRP) in 1999, to better handle domain
    name conflicts. This policy specifies a procedure whereby a company that has a
    valid trademark can challenge a domain name if it infringes on the trademark,
    is confusingly similar to it, or was registered by someone else in bad faith.
    At the same time, it also lists ways that the original registrant can prove that
    the registration is valid and should be maintained. This new system eliminates
    many of the problems associated with public registration of domain names—such
    as deceptive naming, corporate warfare, and cybersquatting—while not automatically
    allowing a second-comer to shut down a legitimate domain.
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 当前通用顶级域的权威机构IANA/ICANN于1999年创建了一个新的统一域名争议解决政策（UDRP），以更好地处理域名冲突。这项政策规定了一个程序，即如果一个公司拥有有效的商标，并且如果该域名侵犯了商标、与商标混淆相似或被他人恶意注册，它可以挑战该域名。同时，它还列出了原始注册人可以证明注册有效并应予以维持的方法。这个新系统消除了与域名公开注册相关的大多数问题——如欺骗性命名、企业战争和域名抢注——同时不会自动允许后来者关闭合法域名。
- en: 'DNS Name Space Administrative Hierarchy Partitioning: DNS Zones of Authority'
  id: totrans-514
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称空间管理层次结构分区：DNS授权区域
- en: I explained earlier in this chapter that the DNS name space is arranged in a
    hierarchy and that there is also a hierarchy of authorities that is related to
    that hierarchical name structure. However, the two hierarchies are not exactly
    the same. If they were the same, we would need a separate authority for every
    domain at every level of the tree, and that's something we are very unlikely to
    want to have everywhere in the structure.
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 我在本章前面解释过，DNS名称空间是按层次结构排列的，并且还有一个与该层次结构名称相关的权威机构层次结构。然而，这两个层次结构并不完全相同。如果它们是相同的，我们将在树的每一级为每个域名都需要一个单独的权威机构，而这在我们结构的任何地方都是不太可能想要实现的。
- en: At the very top levels of the DNS tree, it seems reasonable that we might want
    to designate a separate authority at each level of the structure. Consider the
    geopolitical name hierarchy; IANA/ICANN manages the root domain, but each of the
    ccTLDs is managed by a distinct national authority.
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: 在DNS树的最顶层，我们可能希望在结构的每一级都指定一个单独的权威机构似乎是合理的。考虑地缘政治名称层次结构；IANA/ICANN管理根域名，但每个国家顶级域（ccTLD）都由一个独特的国家权威机构管理。
- en: 'However, when we get to the lower levels of the structure, it is often inconvenient
    or downright impossible to have each level correspond to a separate authority.
    As an example, let''s suppose you are in charge of the Googleplex University IT
    department, which runs its own DNS servers for the googleplex.edu domain. Suppose
    there were only two schools at this university, teaching fine arts and computer
    science. Suppose also that the name space for the computers were divided into
    three subdomains: finearts.googleplex.edu, compsci.googleplex.edu, and admin.googleplex.edu
    (for central administrative functions, including the IT department itself).'
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，当我们到达结构的较低层次时，通常不方便或根本不可能让每一级都对应一个单独的权威机构。例如，假设你负责Googleplex大学IT部门，该部门运行自己的googleplex.edu域名DNS服务器。假设这所大学只有两所学校，分别是艺术系和计算机科学系。假设计算机名称空间被分为三个子域：finearts.googleplex.edu、compsi.googleplex.edu和admin.googleplex.edu（包括IT部门在内的中央行政职能）。
- en: Most likely, you don't want or need the Fine Arts department running its own
    DNS servers. The same is likely true of the administration machines. However,
    it's possible that the Computer Science department does want to run its own DNS
    servers, because this department probably has many more computers than the other
    departments, and the staff might use running a DNS server as part of the curriculum.
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能，你不想也不需要艺术系运行自己的DNS服务器。同样，对于管理机器来说，情况可能也是如此。然而，计算机科学系可能确实希望运行自己的DNS服务器，因为这个部门可能比其他部门拥有更多的计算机，而且员工可能会将运行DNS服务器作为课程的一部分。
- en: In this case, you might want yourself, the administrator for googleplex.edu,
    to maintain authority for the finearts.googleplex.edu and admin.googleplex.edu
    subdomains and everything within them, while delegating authority for compsci.
    googleplex.edu to whomever in the Computer Science department is designated for
    the task. DNS is specifically designed to allow these divisions between the name
    hierarchy and the authority structure to be created.
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，你可能希望你自己，即googleplex.edu的管理员，维护finearts.googleplex.edu和admin.googleplex.edu子域及其内部的一切的权限，同时将compsci.googleplex.edu的权限委托给计算机科学部门中指定的任何人。DNS被特别设计为允许在名称层次结构和权限结构之间创建这些划分。
- en: Methods of Dividing a Name Space into Zones of Authority
  id: totrans-520
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将命名空间划分为权限区域的方法
- en: The complete DNS name structure is divided by making *cuts* (as RFC 1034 calls
    them) between adjacent nodes to create groups of contiguous nodes in the structure.
    Each group is called a *zone of authority*, or more commonly, just a *zone*. Each
    zone is usually identified by the domain name of the highest-level node in the
    zone; that is, the one closest to the root. The zones in DNS are by definition
    *non-overlapping*—every domain or subdomain is in exactly one zone. The division
    of the name space into zones can be made in an arbitrary way. At one extreme,
    we could place a cut between every node, and thereby divide the entire name space
    so each domain (and subdomain, and so on) was a separate zone. If we did this,
    the name hierarchy and authority hierarchy would indeed be the same for the entire
    DNS tree. At the other end of the scale, we could use no cuts at all, defining
    a single zone encompassing the entire DNS structure. This would mean the root
    was the authority for the entire tree.
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的DNS名称结构是通过在相邻节点之间进行“切割”（如RFC 1034所称呼的）来划分的，从而在结构中创建连续节点的组。每个组被称为“权限区域”，或者更常见的是，简单地称为“区域”。每个区域通常由区域中最高级节点的域名来标识；即，离根节点最近的那个。DNS中的区域在定义上是“非重叠”的——每个域或子域都恰好属于一个区域。命名空间划分为区域的方式可以是任意的。在一种极端情况下，我们可以在每个节点之间放置一个切割，从而将整个命名空间划分为每个域（以及子域等）都是一个单独区域的区域。如果我们这样做，整个DNS树中的名称层次结构和权限层次结构确实会是相同的。在另一端，我们可能一个切割都不用，定义一个包含整个DNS结构的单个区域。这意味着根节点是整个树的权限。
- en: Of course in practice, neither of these methods is particularly useful, as neither
    reflects how the real-world administration of DNS works. Instead, we generally
    divide the name structure in a variety of places, depending on the needs of different
    parts of the name space. There are many cases where we might want to create a
    subdomain that is responsible for its own DNS server operation; there are others
    where we might not want to do that. The significance of a cut in the name hierarchy
    is that making such a cut represents, in essence, a *declaration of DNS independence*
    by the node below the cut from the one above the cut.
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，在实践中，这两种方法都不是特别有用，因为它们都没有反映现实世界中DNS管理的方式。相反，我们通常根据命名空间不同部分的需求，在多个地方划分名称结构。有许多情况，我们可能想要创建一个负责其自身DNS服务器操作的子域；也有其他情况，我们可能不希望这样做。在名称层次结构中的这种划分的意义在于，这种划分本质上代表了被划分节点相对于其上方节点的“DNS独立声明”。
- en: Returning to our example, if googleplex.edu is in charge of its own DNS servers,
    then there would be a cut in the name space between googleplex.edu and .EDU at
    the next-higher level. This means that the DNS server for .EDU is no longer in
    charge of DNS for the googleplex.edu domain; instead, either the unversity itself
    or someone hired as a third party must provide DNS for it. In this case, we are
    assuming the folks at Googleplex U. themselves run their own DNS. Without making
    any other cuts, the googleplex.edu domain would be a single zone containing everything
    below that name, including both finearts.googleplex.edu and compsci.googleplex.edu.
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: 回到我们的例子，如果googleplex.edu负责其自己的DNS服务器，那么在下一个更高级别的名称空间中，将在googleplex.edu和.EDU之间进行切割。这意味着.EDU的DNS服务器不再负责googleplex.edu域的DNS；相反，要么是大学本身，要么是雇佣的第三方必须提供DNS服务。在这种情况下，我们假设Googleplex大学的员工自己运行他们的DNS。如果没有进行其他切割，googleplex.edu域将是一个包含该名称以下所有内容的单个区域，包括finearts.googleplex.edu和compsi.googleplex.edu。
- en: 'In our example, however, we would make another cut, between googleplex.edu
    and compsci.googleplex.edu. This, in effect, *liberates* compsci.googleplex.edu,
    allowing its administrators to be in charge of their own DNS server. In doing
    this, we end up with two distinct zones: one encompassing googleplex.edu, finearts.googleplex.edu,
    and admin.googleplex.edu (and everything underneath them) and another for compsci.googleplex.edu
    (and everything below it). This is illustrated in [Figure 54-2](ch54s06.html#dns_zones_of_authority_cuts_can_be_made_
    "Figure 54-2. DNS zones of authority Cuts can be made between nodes in the DNS
    name tree to create an arbitrary hierarchy of name authorities. This example shows
    the DNS tree branch for googleplex.edu, with each zone indicated using a different
    shading. IANA/ICANN is responsible for the root domain, and a separate authority
    named Educause takes care of .EDU. The third zone covers much of googleplex.edu,
    except that a cut has been made between googleplex and compsci to create an independent
    zone of authority for compsci.googleplex.edu.").'
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在我们的例子中，我们会在googleplex.edu和compsi.googleplex.edu之间进行另一个切割。这实际上*解放*了compsi.googleplex.edu，允许其管理员负责他们自己的DNS服务器。这样做，我们最终得到两个不同的区域：一个包括googleplex.edu、finearts.googleplex.edu和admin.googleplex.edu（以及它们下面的所有内容），另一个是compsi.googleplex.edu（以及它下面的所有内容）。这如图[图54-2](ch54s06.html#dns_zones_of_authority_cuts_can_be_made_
    "图54-2. DNS区域的授权切割可以在DNS名称树中的节点之间进行，以创建任意名称授权的层次结构。此示例显示了googleplex.edu的DNS树分支，每个区域使用不同的阴影表示。IANA/ICANN负责根域名，一个名为Educause的独立机构负责.EDU。第三个区域覆盖了googleplex.edu的大部分，除了在googleplex和compsi之间进行了切割，以创建一个独立的compsi.googleplex.edu授权区域。")所示。
- en: 'The Impact of Zones on Name Resolution: Authoritative Servers'
  id: totrans-525
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 区域对名称解析的影响：授权服务器
- en: The concept of zones is critical to understanding how DNS name servers work,
    and therefore, how name resolution is performed. All of the information about
    the subdomains and individual devices in the zone is represented using a set of
    resource records stored on a DNS name server. Usually, this name server is associated
    with the highest-level domain name in the zone. A name server that contains the
    definitive information for the zone is said to be *authoritative* for the zone.
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: 区域的概念对于理解DNS名称服务器的工作方式至关重要，因此，对于名称解析的执行方式也是如此。区域中关于子域和单个设备的所有信息都是通过在DNS名称服务器上存储的一组资源记录来表示的。通常，这个名称服务器与区域中最高级别的域名相关联。包含区域最终信息的名称服务器被称为该区域的*授权*服务器。
- en: '![DNS zones of authority Cuts can be made between nodes in the DNS name tree
    to create an arbitrary hierarchy of name authorities. This example shows the DNS
    tree branch for googleplex.edu, with each zone indicated using a different shading.
    IANA/ICANN is responsible for the root domain, and a separate authority named
    Educause takes care of .EDU. The third zone covers much of googleplex.edu, except
    that a cut has been made between googleplex and compsci to create an independent
    zone of authority for compsci.googleplex.edu.](httpatomoreillycomsourcenostarchimages288165.png)'
  id: totrans-527
  prefs: []
  type: TYPE_IMG
  zh: '![DNS区域的授权切割可以在DNS名称树中的节点之间进行，以创建任意名称授权的层次结构。此示例显示了googleplex.edu的DNS树分支，每个区域使用不同的阴影表示。IANA/ICANN负责根域名，一个名为Educause的独立机构负责.EDU。第三个区域覆盖了googleplex.edu的大部分，除了在googleplex和compsi之间进行了切割，以创建一个独立的compsi.googleplex.edu授权区域。](httpatomoreillycomsourcenostarchimages288165.png)'
- en: Figure 54-2. DNS zones of authority Cuts can be made between nodes in the DNS
    name tree to create an arbitrary hierarchy of name authorities. This example shows
    the DNS tree branch for googleplex.edu, with each zone indicated using a different
    shading. IANA/ICANN is responsible for the root domain, and a separate authority
    named Educause takes care of .EDU. The third zone covers much of googleplex.edu,
    except that a cut has been made between googleplex and compsci to create an independent
    zone of authority for compsci.googleplex.edu.
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: 图54-2. DNS授权区域划分可以在DNS名称树中的节点之间进行，以创建名称权威的任意层次结构。此示例显示了googleplex.edu的DNS树分支，每个区域使用不同的阴影表示。IANA/ICANN负责根域，一个名为Educause的独立权威机构负责.EDU。第三个区域覆盖了googleplex.edu的大部分，除了在googleplex和compsci之间进行了切割，以创建compsci.googleplex.edu的独立授权区域。
- en: An authoritative server for a zone is one that maintains the official information
    about the zone, and the one that is ultimately responsible for providing name
    resolution information about it. We'll discuss this in the section on DNS servers
    and name resolution in [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION CONCEPTS
    AND RESOLVER OPERATIONS").
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: 一个区域的权威服务器是指维护该区域官方信息的服务器，以及最终负责提供关于该区域名称解析信息的服务器。我们将在第56章关于DNS服务器和名称解析的部分中讨论这一点。
- en: Tip
  id: totrans-530
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The DNS name registration hierarchy is divided into regions
    called *zones of authority*. Each zone represents an area that is administered
    independently and consists of a contiguous segment of the DNS name tree.'
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS名称注册层次结构被划分为称为*授权区域*的区域。每个区域代表一个独立管理的区域，由DNS名称树的连续段组成。'
- en: Every DNS zone has a set of authoritative servers, which are usually a pair
    called the *primary* (or *master*) and *secondary* (or *slave*) servers. However,
    it is also possible for a single DNS name server to be authoritative for more
    than one zone.
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: 每个DNS区域都有一组权威服务器，通常是一对称为*主服务器*（或*主服务器*）和*辅助服务器*（或*从服务器*）。然而，单个DNS名称服务器也可能对多个区域具有权威性。
- en: As mentioned earlier, it is not always necessary for the actual owner of a domain
    to provide DNS services for it. Very often, especially for the domains owned by
    small businesses or individuals, DNS services are provided by a third party, often
    an ISP. For example, I have had pcguide.com registered as a domain since 1997,
    but my long-time web-hosting provider, pair Networks, has provided DNS services
    for me since the beginning. This means that pair's DNS servers in the pair.com
    hierarchy are responsible for pcguide.com. They are also responsible for many
    other domains for the company's customers.
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，域的实际所有者并不总是需要为其提供DNS服务。非常常见的是，特别是对于由小型企业或个人拥有的域，DNS服务通常由第三方提供，通常是ISP。例如，自从1997年以来，我就已经将pcguide.com注册为一个域，但我的长期网络托管提供商pair
    Networks从一开始就为我提供了DNS服务。这意味着pair的DNS服务器在pair.com的层次结构中负责pcguide.com。它们还负责该公司客户的其他许多域。
- en: DNS Private Name Registration
  id: totrans-534
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS私有名称注册
- en: We have now reviewed the hierarchical nature of the DNS name space and the authority
    structure that administers it. Name registration begins with the generic and country
    code TLDs within the root of the name hierarchy, then proceeds to second-level
    domains within the TLDs and then lower-level subdomains below those. As we progress
    down the name tree, we move from the most general, public authority (IANA/ICANN,
    which runs all of DNS), through the high-level TLD authorities, and eventually
    down to the level of individual organizations, corporations, and individuals.
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经审查了DNS名称空间的层次结构性质以及管理它的权威结构。名称注册从名称层次结构根部的通用和国家代码顶级域开始，然后继续到顶级域内的二级域，然后是那些二级域下的更低级子域。随着我们沿着名称树向下移动，我们从最一般的公共权威（IANA/ICANN，它运行所有的DNS）通过高级顶级域权威，最终下降到个人组织、公司和个人的层面。
- en: This dividing line between public authorities and private authorities occurs
    in many different places in the name structure. Wherever it does occur, below
    that line, responsibility for the domain becomes that of the organization that
    registered it. The organization can further subdivide the name space, granting
    parts of it to other organizations, or even reselling it. Alternatively, an organization
    may decide to use the name space to create a purely internal structure. I call
    this *private name registration*, in contrast to the *public name registration*
    described earlier in this chapter.
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: 公共当局和私人当局之间的这种界限在名称结构中的许多不同地方都会出现。无论它出现在哪里，在该线以下，域的责任就变成了注册该域的组织。该组织可以进一步细分名称空间，将其部分授予其他组织，甚至可以转售。或者，一个组织可能决定使用名称空间来创建一个纯粹内部的结构。我称这种做法为*私有名称注册*，与本章前面描述的*公共名称注册*相对。
- en: 'For example, if a company called XYZ Industries registers xyzindustries.com,
    that company becomes the owner of not just that domain name, but any subdomain
    structure or named items within it that the company may choose to create. This
    is the beauty and power of authority delegation and the hierarchical structure.
    The company has an important decision to make, however: whether they want to create
    names that are part of the global DNS name structure or use names within the structure
    purely privately.'
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果一家名为XYZ工业的公司注册了xyzindustries.com，那么该公司不仅成为该域名名的所有者，而且成为该公司可能选择创建的任何子域结构或命名项的所有者。这是授权委派和分层结构的美丽和强大之处。然而，该公司必须做出一个重要的决定：他们是否希望创建成为全球DNS名称结构一部分的名称，或者是否仅在结构内部使用名称。
- en: Using Publicly Accessible Private Names
  id: totrans-538
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用公开可访问的私有名称
- en: If an organization's administrators want names within their domain to be part
    of the global DNS name structure, they must perform the work required to properly
    set up and manage these names so they fit into DNS. The most common example is
    creating a public World Wide Web server. Most companies name such servers beginning
    with www, so XYZ Industries would probably wish to have the name www.xyzindustries.com
    for its web server address.
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个组织的管理员希望其域内的名称成为全球DNS名称结构的一部分，他们必须完成必要的设置和管理工作，以确保这些名称适合DNS。最常见的例子是创建一个公共的万维网服务器。大多数公司以www开头命名此类服务器，因此XYZ工业公司可能希望将其Web服务器地址命名为www.xyzindustries.com。
- en: Obviously, the XYZ Industries owners want and need anyone on the Internet to
    be able to locate this server. Thus, even though they have private control of
    the xyzindustries.com domain, and own the name www.xyzindustries.com, they must
    follow proper procedures for ensuring that DNS resource records are set up for
    their www subdomain so everyone on the Internet can find it. They may do this
    themselves, if they run their own DNS servers, or may have an ISP or other third
    party do it for them, as described earlier.
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，XYZ工业公司的所有者希望并且需要互联网上的任何人都能找到这个服务器。因此，尽管他们拥有xyzindustries.com域的私人控制权，并且拥有www.xyzindustries.com的名称，但他们必须遵循适当的程序来确保为他们的www子域设置DNS资源记录，以便互联网上的每个人都能找到它。如果他们运行自己的DNS服务器，他们可以自己这样做，或者可以由ISP或其他第三方代为完成，如前所述。
- en: Using Private Names for Internal Use
  id: totrans-541
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用于内部使用的私有名称
- en: The alternative is to create purely private names for use only within the organization.
    For example, it is likely that even if XYZ wants a public web server, the administrators
    may wish to name many other machines that are to be accessed only within the company
    itself. In this case, they don't need to set up these machines so they are publicly
    recognizable. They can create private machine names and manage them internally
    within their own network.
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种选择是为仅在组织内部使用的名称创建纯粹私有的名称。例如，即使XYZ希望有一个公共的Web服务器，管理员可能也希望为仅在公司内部访问的其他许多机器命名。在这种情况下，他们不需要设置这些机器以便它们可以被公开识别。他们可以创建私有机器名称，并在自己的网络内部管理它们。
- en: Tip
  id: totrans-543
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Once an organization registers a particular domain name, it
    becomes the owner of that name and can decide whether and how to create a substructure
    within that domain. If an organization wants objects in the domain to be accessible
    on the public Internet, it must structure its domain to be consistent with Internet
    DNS standards. Alternately, it can create a purely private domain using any structure
    and rules it prefers.'
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 一旦一个组织注册了特定的域名，它就成为了该域名的所有者，并可以决定是否以及如何在该域名内创建子结构。如果一个组织希望域名内的对象可以在公共互联网上访问，它必须将其域名结构化以符合互联网DNS标准。或者，它可以创建一个完全私有的域名，使用它喜欢的任何结构和规则。'
- en: One common way to do this is to make use of the older host table name system.
    This system is now archaic for large internetworks, but is often still used in
    smaller companies due to its simplicity. A name is *registered* by being added
    to the host tables on each of the computers within the organization, and *resolved*
    when the operating system on a host checks this file prior to using standard DNS
    resolution methods. The host table supplements DNS in this case (it is not really
    a part of DNS). The two systems are complementary and can work together, as explained
    in [Chapter 51](ch51.html "Chapter 51. TCP/IP NAME SYSTEMS OVERVIEW AND THE HOST
    TABLE NAME SYSTEM").
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: 常见的做法之一是利用较旧的宿主表名称系统。这个系统现在对于大型互连网络来说已经过时，但由于其简单性，在较小的公司中仍然经常使用。通过将其添加到组织内每台计算机的宿主表中，一个名称就会被*注册*，当宿主机的操作系统在执行标准DNS解析方法之前检查此文件时，该名称就会被*解析*。在这种情况下，宿主表补充了DNS（它实际上不是DNS的一部分）。这两个系统是互补的，可以一起工作，如[第51章](ch51.html
    "第51章。TCP/IP名称系统概述和宿主表名称系统")中所述。
- en: Using Private Names on Networks Not Connected to the Internet
  id: totrans-546
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在不连接到互联网的网络中使用私有名称
- en: Note that if you are running a purely private network not connected to the Internet
    at all, you can actually set up your own entirely private name hierarchy and run
    DNS yourself. In this case, you are in charge of the DNS root and can use any
    naming system you like.
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，如果你正在运行一个完全私有的网络，完全不连接到互联网，你实际上可以设置自己的完全私有的名称层次结构并自行运行DNS。在这种情况下，你是DNS根的负责人，可以使用你喜欢的任何命名系统。
- en: This approach is sometimes considered attractive, because you can then use very
    simple machine names on small networks, without needing to perform any public
    registration or use names that correspond to the global hierarchy. Instead of
    the accounting computer in XYZ Industries being named accounting.xyzindustries.com,
    internally it could be named accounting. You can mix these with real DNS names,
    too, when accessing resources. For example, Joe's machine could be called just
    joe, while the website of UPS would, of course, still be www.ups.com.
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法有时被认为很有吸引力，因为你可以然后在小型网络中使用非常简单的机器名称，而无需进行任何公共注册或使用与全球层次结构相对应的名称。例如，XYZ工业的会计计算机可以命名为accounting，而不是accounting.xyzindustries.com，在内部它可以是accounting。在访问资源时，你也可以将这些名称与真实DNS名称混合使用。例如，Joe的机器可以简单地称为joe，而UPS的网站当然仍然是www.ups.com。
- en: The most common example of this mixing of private and public names is the definition
    of the private local name for the loopback address of a computer. Most Windows
    and UNIX machines define the name *localhost* to be the address 127.0.0.1, which
    means "this computer" on any TCP/IP machine.
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: 这种私有和公共名称混合的最常见例子是为计算机的环回地址定义私有本地名称。大多数Windows和UNIX机器将名称*localhost*定义为地址127.0.0.1，这意味着在任何TCP/IP机器上都是“这台计算机”。
- en: Chapter 55. DNS NAME SERVER CONCEPTS AND OPERATION
  id: totrans-550
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第55章。DNS名称服务器概念和操作
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-551
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: Of all the components and functional elements that combine to form the Domain
    Name System (DNS), name servers are arguably the most important. These servers,
    which may be either dedicated devices or software processes running on machines
    that also perform other tasks, are the workhorses of DNS. They store and manage
    information about domains, and respond to resolution requests for clients—in some
    cases, millions of times each day. Understanding how they perform this most basic
    task and the many support jobs for which they are also responsible is crucial
    to understanding DNS as a whole.
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有组合起来形成域名系统（DNS）的组件和功能元素中，名称服务器可能是最重要的。这些服务器可以是专用设备，也可以是在执行其他任务的机器上运行的软件进程。它们存储和管理有关域的信息，并响应用户的解析请求——在某些情况下，每天可能数百万次。了解它们如何执行这项最基本的工作以及它们负责的许多支持性工作对于理解DNS的整体运作至关重要。
- en: In this chapter, I describe the concepts related to DNS name servers and explain
    how they operate. I begin with an overview of DNS name server functions and general
    operation. I describe the way that DNS name server data is stored in resource
    records and the role of classes. I discuss the different roles of name servers
    in DNS and explain the all-important root name servers. I discuss how DNS zones
    are managed, the notions of domain contacts and zone transfers, and how caching
    and load balancing are used to improve efficiency in DNS. I conclude with a brief
    outline of several enhancements to basic DNS server operation, including the new
    Notify and Update message types and incremental zone transfers.
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我将介绍与DNS名称服务器相关的概念，并解释它们是如何运作的。我首先概述DNS名称服务器功能和一般操作。我描述了DNS名称服务器数据如何存储在资源记录中以及类别的角色。我讨论了DNS中名称服务器的不同角色，并解释了至关重要的根名称服务器。我还讨论了DNS区域的管理、域名联系和区域传输的概念，以及如何使用缓存和负载均衡来提高DNS的效率。最后，我简要概述了几个对基本DNS服务器操作进行改进的增强功能，包括新的Notify和Update消息类型以及增量区域传输。
- en: Tip
  id: totrans-554
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**RELATED INFORMATION** *The information in this section should be considered
    complementary to that in the following chapter on DNS resolvers*.'
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关信息** *本节中的信息应被视为与以下章节中DNS解析器相关的补充信息*。'
- en: DNS General Operation
  id: totrans-556
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS一般操作
- en: The three major functions of a name system are creating a name space, performing
    name registration, and providing name resolution services. The previous chapters
    describe how DNS uses a hierarchical tree structure for its name space ([Chapter 53](ch53.html
    "Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY")), and a hierarchical
    tree for name authorities and registration ([Chapter 54](ch54.html "Chapter 54. DNS
    NAME REGISTRATION, PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES")). I'm sure
    that, given this, you will have to struggle to contain your surprise when I tell
    you that name resolution is also oriented around the notion of a hierarchical
    structure.
  id: totrans-557
  prefs: []
  type: TYPE_NORMAL
  zh: 命名系统的三个主要功能是创建命名空间、执行命名注册以及提供命名解析服务。前几章描述了DNS如何使用分层树结构来构建其命名空间（[第53章](ch53.html
    "第53章。DNS命名空间、架构和术语"）），以及用于名称权威和注册的分层树结构（[第54章](ch54.html "第54章。DNS注册、公共管理、区域和权威"））。我相信，在了解这些之后，当我告诉你命名解析也是围绕分层结构这一概念时，你一定会感到惊讶。
- en: The devices that are primarily charged with performing the functions required
    to enable name resolution are *name servers*. They are arranged in a hierarchy
    that is closely related to the authority structure of the name system. Just as
    the authority structure complements the name structure but is not exactly the
    same as it, the name server architecture complements both the authority structure
    and the name structure, but may be different from them in its actual composition.
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: 主要负责执行使命名解析成为可能的功能的设备是**名称服务器**。它们被组织在一个与命名系统权威结构紧密相关的层次结构中。正如权威结构补充了名称结构但并不完全相同一样，名称服务器架构既补充了权威结构也补充了名称结构，但在其实际组成上可能有所不同。
- en: DNS Name Server Architecture and the Distributed Name Database
  id: totrans-559
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS名称服务器架构和分布式名称数据库
- en: In a large DNS implementation, information about domains is not centralized
    in a single database run by one authority. Instead, it is *distributed* across
    many different authorities that manage particular top-level domains (TLDs), second-level
    domains, or lower-level subdomains. In the case of the global Internet, literally
    millions of different authorities, many of them responsible only for their own
    local domain space, participate cooperatively in running the DNS system.
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: 在大型DNS实现中，关于域的信息并不是集中在一个由单一权威机构运行的单一数据库中。相反，它被*分布式*在许多不同的权威机构之间，这些权威机构管理特定的顶级域名（TLD）、二级域名或更低级别的子域名。在全球互联网的情况下，实际上有数以百万计的不同权威机构，其中许多只负责他们自己的本地域名空间，他们合作运行DNS系统。
- en: With authority for registration distributed in this manner, the information
    about domains is similarly spread among many entities, resulting in a *distributed
    database*. A key concept in DNS name resolution is that each entity that maintains
    responsibility for a part of the name space must also arrange to have that information
    stored on a DNS server. This is required so that the server can provide the information
    about that part of the name space when resolution is performed. As you can see,
    the existence of a structured hierarchy of authorities directly implies the need
    for a hierarchy of servers that store that hierarchical name information.
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: 以这种方式分配注册权限，域名信息也相应地分散在许多实体之间，从而形成一个*分布式数据库*。DNS名称解析中的一个关键概念是，每个负责名称空间一部分的实体必须安排将相关信息存储在DNS服务器上。这是必要的，以便在解析时，服务器可以提供该部分名称空间的信息。正如你所看到的，存在一个结构化的授权层次结构直接暗示了需要存储该层次名称信息的服务器层次结构。
- en: Each DNS zone of authority is required to have one or more DNS servers that
    are in charge of managing information about that zone. These servers are said
    to be *authoritative* for the zone. Storing information about the domains, subdomains,
    and objects in the zone is done by recording the data in special resource records
    that are read from DNS master lists maintained by administrators. Servers then
    respond to requests for this information.
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: 每个授权的DNS区域都需要一个或多个负责管理该区域信息的DNS服务器。这些服务器被称为该区域的*授权服务器*。通过记录在管理员维护的特殊资源记录中，存储区域中域名、子域名和对象的信息。然后，服务器响应对该信息的请求。
- en: Tip
  id: totrans-563
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** DNS public name information is stored in a *distributed database*
    of DNS name servers that are structured in a hierarchy comparable to the hierarchy
    of authorities. Each zone has one or more DNS name servers in charge of the zone''s
    information, called *authoritative name servers*.'
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS公共名称信息存储在结构化层次结构与授权层次结构相当的DNS名称服务器组成的*分布式数据库*中。每个区域都有一个或多个负责该区域信息的DNS名称服务器，称为*授权名称服务器*。'
- en: Since information in DNS is stored in a distributed form, there is no single
    server that has information about every domain in the system. As you'll see in
    the next chapter, the process of resolution instead relies on the hierarchy of
    name servers. At the top of the DNS hierarchy is the *root* domain, and in that
    domain are root name servers. These are the most important servers, because they
    maintain information about the TLDs within the root. They also have knowledge
    of the servers that can be used to resolve domains one level below them. Those
    servers, in turn, are responsible for the TLDs and can reference servers that
    are responsible for second-level domains. Thus, a DNS resolution may require that
    requests be sent to more than one server.
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: 由于DNS中的信息以分布式形式存储，系统中没有单个服务器拥有关于每个域的信息。正如你将在下一章中看到的，解析过程依赖于名称服务器的层次结构。DNS层次结构的顶部是*根*域名，在该域名中有根名称服务器。这些是最重要的服务器，因为它们维护根域内TLD的信息。它们还了解可以用于解析低于它们级别的域的服务器。这些服务器反过来又负责TLD，并可以引用负责二级域的服务器。因此，DNS解析可能需要向多个服务器发送请求。
- en: DNS Server Support Functions
  id: totrans-566
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS服务器支持功能
- en: 'The storing and serving of name data (through responses to requests from DNS
    resolvers) is the main function of a DNS server. However, other support jobs are
    also typically required of a DNS server:'
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: 域名数据的存储和提供（通过响应DNS解析器的请求）是DNS服务器的主要功能。然而，DNS服务器通常还需要执行其他支持性工作：
- en: '**Interacting with Other Servers** Because the DNS resolution process often
    requires that multiple servers be involved, servers must maintain not just name
    information, but information about the existence of other servers. Depending on
    the type of DNS request, servers may themselves become clients and generate requests
    to other servers.'
  id: totrans-568
  prefs: []
  type: TYPE_NORMAL
  zh: '**与其他服务器交互** 由于DNS解析过程通常需要多个服务器参与，服务器不仅需要维护名称信息，还需要维护其他服务器存在的信息。根据DNS请求的类型，服务器本身可能成为客户端并向其他服务器生成请求。'
- en: '**Zone Management and Transfers** The server must provide a way for DNS information
    within the zone to be managed. A facility also exists to allow a *zone transfer*
    to be performed between the master (primary) server for a zone and slave (secondary)
    servers.'
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: '**区域管理和传输** 服务器必须提供一种方式来管理区域内的DNS信息。同时，也存在一种机制，允许在区域的主（主）服务器和从（辅助）服务器之间执行*区域传输*。'
- en: '**Performance Enhancement Functions** Due to the large number of requests servers
    handle, they employ numerous techniques to reduce the time required to respond
    to queries. The most important of these is caching of name information. A variation
    of regular caching called *negative caching* may also be used to improve performance,
    and load balancing is a feature that can be used to improve efficiency of busy
    devices registered within the DNS system.'
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: '**性能提升功能** 由于服务器处理了大量的请求，它们采用了多种技术来减少响应查询所需的时间。其中最重要的是名称信息的缓存。一种称为*负缓存*的常规缓存变体也可以用来提高性能，负载均衡是提高DNS系统中注册的繁忙设备效率的功能之一。'
- en: '**Administration** Various other administrative details are required of name
    servers, such as storing information about the different types of contacts (humans)
    who are responsible for certain tasks related to management of a domain or zone.'
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: '**管理** 域名服务器还需要处理各种其他管理细节，例如存储有关负责管理域名或区域相关任务的不同类型联系人（人类）的信息。'
- en: As you'll see later in this chapter, not all name servers perform all of these
    tasks described; some perform only a subset.
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你将在本章后面看到的那样，并非所有名称服务器都执行所有这些描述的任务；有些只执行其中的一部分。
- en: The Logical Nature of the DNS Name Server Hierarchy
  id: totrans-573
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS名称服务器层次结构的逻辑性质
- en: Like the other hierarchies, the name server hierarchy is logical in nature.
    I already mentioned that it often is not exactly the same as the authority hierarchy.
    For one thing, it is common for a single DNS name server to be the authoritative
    server for a number of domains. Even if a particular group has authority for a
    subdomain of a particular domain, it's possible they will share the DNS servers
    with the authority of their parent domain for efficiency reasons. For example,
    a university might delegate control over parts of its domain space to different
    groups (as in the example of DNS zones in [Chapter 54](ch54.html "Chapter 54. DNS
    NAME REGISTRATION, PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES")) but still
    manage all subdomains on the same server. In practice, the lower the level of
    the subdomain in the DNS name hierarchy, the less likely that subdomain has its
    own DNS server.
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: 与其他层次结构一样，域名服务器层次结构在本质上具有逻辑性。我已经提到，它通常并不完全等同于权威层次结构。一方面，单个DNS名称服务器通常是一个域名多个域名的权威服务器。即使某个特定组对特定域的子域拥有权威，出于效率的考虑，他们也可能与父域的权威共享DNS服务器。例如，一所大学可能会将域空间的部分控制权委托给不同的组（如第54章中DNS区域的示例），但仍然在同一个服务器上管理所有子域名。在实践中，子域名在DNS名称层次结构中的级别越低，该子域名拥有自己的DNS服务器的可能性就越小。
- en: Another important aspect of the logical nature of the name server hierarchy
    is that there is no necessary relationship between the structure of the name servers
    and their location. In fact, in many cases, name servers are specifically put
    in different places for reliability reasons. The best example of this is the set
    of root name servers. These are all at the top of the DNS server architecture,
    but they are spread around the globe to prevent a single problem from taking all
    of them out. Also remember not to be fooled by the structure of a name in the
    geopolitical DNS name hierarchy (as discussed in [Chapter 53](ch53.html "Chapter 53. DNS
    NAME SPACE, ARCHITECTURE, AND TERMINOLOGY")). A name server called ns1.blahblah.ca
    might be in Canada, but it very well might not be located there.
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: 域名服务器层次结构的逻辑性质的一个重要方面是，域名服务器的结构与其位置之间没有必然的联系。实际上，在许多情况下，出于可靠性的考虑，域名服务器被特意放置在不同的地方。最好的例子是根域名服务器。这些服务器都位于DNS服务器架构的顶层，但它们分布在全球各地，以防止单个问题导致所有服务器都失效。同时，也要记住不要被地理政治DNS名称层次结构中名称的结构所迷惑（如第53章所述）。一个名为ns1.blahblah.ca的域名服务器可能在加拿大，但它很可能并不位于那里。
- en: Tip
  id: totrans-576
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The DNS name server hierarchy is logical in nature and not
    exactly the same as the DNS name server tree. One server may be responsible for
    many domains and subdomains. Also, the structure of the DNS name server hierarchy
    doesn''t necessarily indicate the physical locations of name servers.'
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS名称服务器层次结构在本质上具有逻辑性，并不完全等同于DNS名称服务器树。一个服务器可能负责许多域名和子域名。此外，DNS名称服务器层次结构的结构并不一定表明名称服务器的物理位置。'
- en: DNS Name Server Data Storage
  id: totrans-578
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称服务器数据存储
- en: One of the most important jobs performed by name servers is the storage of name
    data. Since the authority for registering names is distributed across the internetwork
    using DNS, the database of name information is likewise distributed. An *authoritative*
    server is responsible for storing and managing all the information for the zones
    of authority it is assigned.
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
  zh: 命名服务器执行的最重要任务之一是存储名称数据。由于名称注册的权限是通过DNS在互联网上分布的，因此名称信息的数据库也是分布式的。*权威*服务器负责存储和管理其分配的授权区域的所有信息。
- en: Each DNS server is, in essence, a type of database server. The database contains
    many kinds of information about the subdomains and individual devices within the
    domain or zone for which the server is responsible. In DNS, the database entries
    that contain this name information are called *resource records (RRs)*. A specific
    set of RRs is associated with each node within the zone.
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 每个DNS服务器本质上是一种数据库服务器。数据库包含有关服务器负责的域或区域内的子域和单个设备的大量信息。在DNS中，包含此类名称信息的数据库条目被称为*资源记录（RRs）*。每个区域内的节点都关联着特定的RR集合。
- en: Binary and Text Representations of Resource Records
  id: totrans-581
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 资源记录的二进制和文本表示
- en: 'The entire point of DNS is to allow humans to work with names and computers
    to work with numbers. This principle is further reflected in the two very different
    representations that exist for the DNS RRs themselves (see [Figure 55-1](ch55s02.html#dns_rr_master_file_and_binary_field_form
    "Figure 55-1. DNS RR master file and binary field formats")):'
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: DNS的整个目的就是允许人类使用名称，而计算机使用数字。这一原则在DNS RRs本身的两种非常不同的表示中得到了进一步体现（参见[图55-1](ch55s02.html#dns_rr_master_file_and_binary_field_form
    "图55-1. DNS RR主文件和二进制字段格式"))：
- en: '**RR Field Format (Binary) Representation** Name servers are required to respond
    to queries for name information by sending RRs within DNS messages. Obviously,
    we want to do this in as efficient a way as possible, so each RR is internally
    stored using a special field format that is similar to the many field formats
    used for messages in other protocols. All RRs use a general field format for some
    of their fields and then have a unique portion that is specific to the RR type.'
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: '**RR字段格式（二进制）表示** 命名服务器需要通过在DNS消息中发送RR来响应对名称信息的查询。显然，我们希望尽可能高效地完成这项工作，因此每个RR都使用一种特殊的字段格式内部存储，这种格式类似于其他协议中用于消息的许多字段格式。所有RR都使用一种通用的字段格式来表示它们的一些字段，然后有一个特定于RR类型的独特部分。'
- en: '**Master File (Text) Representation** Computers are happy to exchange binary-encoded
    field formats and have no problem remembering that, for example, RR type 15 corresponds
    to a mail exchange (MX) record. However, human administrators want to be able
    to quickly and easily maintain DNS information without needing to remember cryptic
    codes or work with binary values. For this reason, DNS uses a *master file* format
    for its user-machine interface, which allows RRs to be specified in text form
    for easier maintenance.'
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: '**主文件（文本）表示** 计算机乐于交换二进制编码的字段格式，并且没有问题记住例如，RR类型15对应于邮件交换（MX）记录。然而，人类管理员希望能够快速轻松地维护DNS信息，而无需记住难以理解的代码或处理二进制值。因此，DNS使用*主文件*格式作为其用户-机器界面，这使得可以以文本形式指定RR，以便更容易维护。'
- en: '![DNS RR master file and binary field formats](httpatomoreillycomsourcenostarchimages288167.png.jpg)'
  id: totrans-585
  prefs: []
  type: TYPE_IMG
  zh: '![DNS RR主文件和二进制字段格式](httpatomoreillycomsourcenostarchimages288167.png.jpg)'
- en: Figure 55-1. DNS RR master file and binary field formats
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: 图55-1. DNS RR主文件和二进制字段格式
- en: To meet the needs of humans and computers, DNS uses two representations for
    the data stored in RRs. Administrators enter and maintain information in textual
    DNS master files. These are read by DNS server software and internally stored
    in binary format for answering DNS requests.
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: 为了满足人类和计算机的需求，DNS为RR中存储的数据使用两种表示形式。管理员在文本DNS主文件中输入和维护信息。这些文件由DNS服务器软件读取，并在内部以二进制格式存储，以回答DNS请求。
- en: Use of RRs and Master Files
  id: totrans-588
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: RRs和主文件的使用
- en: Each node may have a variable number of records, depending on the node type
    and what information is being kept for it. The RRs are added, changed, or deleted
    when DNS information changes, by administrators who make modifications to the
    text master files on the server computer. These files are then read into memory
    by the DNS server software, parsed (interpreted), and converted into binary form.
    Then they are ready for use in resolving DNS name requests and other queries.
    I describe both the binary RR field formats and master file format in [Chapter 57](ch57.html
    "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD, AND MASTER FILE FORMATS").
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: 每个节点可能具有可变数量的记录，具体取决于节点类型和为其保留的信息。当 DNS 信息发生变化时，通过修改服务器计算机上的文本主文件的管理员添加、更改或删除
    RR。然后，DNS 服务器软件将这些文件读入内存，解析（解释），并转换为二进制形式。然后它们就准备好用于解决 DNS 名称请求和其他查询。我在 [第 57
    章](ch57.html "第 57 章. DNS 消息和消息、资源记录和主文件格式") 中描述了二进制 RR 字段格式和主文件格式。
- en: Tip
  id: totrans-590
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** DNS name servers store DNS information in the form of *resource
    records (RRs)*. Each RR contains a particular type of information about a node
    in the DNS tree. There are two representations for RRs: Conventional binary field
    formats are used for communication between DNS name servers and resolvers, and
    text *master files* are edited by administrators to manage DNS zones.'
  id: totrans-591
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS 命名服务器以 *资源记录 (RR)* 的形式存储 DNS 信息。每个 RR 包含 DNS 树中节点特定类型的信息。RR 有两种表示形式：传统的二进制字段格式用于
    DNS 命名服务器和解析器之间的通信，而文本 *主文件* 由管理员编辑以管理 DNS 区域。'
- en: Common RR Types
  id: totrans-592
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 常见 RR 类型
- en: The main DNS standards, RFC 1034 and 1035, defined a number of RR types. Over
    time, the list has changed, with new RR types being created in subsequent standards
    and the use of others changed. Like other Internet parameters, the list of DNS
    RR types is maintained in a file by the Internet Assigned Numbers Authority (IANA).
    Also like other Internet parameters, there are actually several dozen defined
    RRs in DNS, but only a few are commonly used; others are now obsolete, used for
    special purposes, or experimental in nature. The current list of DNS resource
    records is maintained in a file that can be found at [http://www.iana.org/assignments/dns-parameters](http://www.iana.org/assignments/dns-parameters).
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: 主要 DNS 标准，RFC 1034 和 1035，定义了多种 RR 类型。随着时间的推移，该列表已发生变化，新的 RR 类型在后续标准中被创建，而其他
    RR 的使用方式发生了变化。与其他互联网参数一样，DNS RR 类型的列表由互联网数字分配机构 (IANA) 维护。同样，与其他互联网参数一样，DNS 中实际上定义了数十种
    RR，但只有少数被广泛使用；其他现在已过时，用于特殊目的或具有实验性质。当前 DNS 资源记录列表维护在一个文件中，该文件可以在 [http://www.iana.org/assignments/dns-parameters](http://www.iana.org/assignments/dns-parameters)
    找到。
- en: '[Table 55-1](ch55s02.html#summary_of_common_dns_resource_records "Table 55-1. Summary
    of Common DNS Resource Records") summarizes the most important RR types. For each,
    I have shown the numeric Type value for the record, which is used to identify
    the RR type in message exchanges, and the text code used for the RR in master
    files.'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 55-1](ch55s02.html#summary_of_common_dns_resource_records "表 55-1. 常见 DNS
    资源记录摘要") 总结了最重要的 RR 类型。对于每一种类型，我都展示了记录的数值类型值，该值用于在消息交换中识别 RR 类型，以及在主文件中使用的文本代码。'
- en: Table 55-1. Summary of Common DNS Resource Records
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: 表 55-1. 常见 DNS 资源记录摘要
- en: '| RR Type Value | RR Text Code | RR Type | Description |'
  id: totrans-596
  prefs: []
  type: TYPE_TB
  zh: '| RR 类型值 | RR 文本代码 | RR 类型 | 描述 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-597
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| 1 | A | Address | Contains a 32-bit IP address. This is the "meat and potatoes"
    of DNS, since it is where the address of a node is stored for name resolution
    purposes. |'
  id: totrans-598
  prefs: []
  type: TYPE_TB
  zh: '| 1 | A | 地址 | 包含一个 32 位 IP 地址。这是 DNS 的“精髓”，因为它是存储节点地址以进行名称解析的地方。 |'
- en: '| 2 | NS | Name Server | Specifies the name of a DNS name server that is authoritative
    for the zone. Each zone must have at least one NS record that points to its primary
    name server, and that name must also have a valid Address (A) record. |'
  id: totrans-599
  prefs: []
  type: TYPE_TB
  zh: '| 2 | NS | 命名服务器 | 指定权威于该区域的 DNS 命名服务器名称。每个区域必须至少有一个指向其主 DNS 服务器的 NS 记录，并且该名称也必须有一个有效的地址
    (A) 记录。 |'
- en: '| 5 | CNAME | Canonical Name | Used to allow aliases to be defined that point
    to the real name of a node. The CNAME record provides a mapping between this alias
    and the canonical (real) name of the node. It is commonly used to hide changes
    in the internal DNS structure from outside users, by letting them use an unchanging
    alias, while the internal names are modified based on the needs of the organization.
    See the discussion of name resolution in [Chapter 56](ch56.html "Chapter 56. DNS
    RESOLUTION CONCEPTS AND RESOLVER OPERATIONS") for an example. |'
  id: totrans-600
  prefs: []
  type: TYPE_TB
  zh: '| 5 | CNAME | 规范名称 | 用于定义指向节点真实名称的别名。CNAME 记录提供了此别名与节点规范（真实）名称之间的映射。它通常用于通过让外部用户使用不变的别名来隐藏内部
    DNS 结构的变化，同时根据组织的需求修改内部名称。有关示例，请参阅第 56 章中关于名称解析的讨论。[第 56 章](ch56.html "Chapter
    56. DNS 解析概念和解析器操作")。|'
- en: '| 6 | SOA | Start Of Authority | Used to mark the start of a DNS zone and provide
    important information about it. Every zone must have exactly one SOA record, which
    contains the name of the zone, its primary (master) authoritative server name,
    and technical details such as the email address of its administrator and parameters
    for how often slave (secondary) name servers are updated. |'
  id: totrans-601
  prefs: []
  type: TYPE_TB
  zh: '| 6 | SOA | 权限起始 | 用于标记 DNS 区域的开始并提供有关该区域的重要信息。每个区域必须恰好有一个 SOA 记录，其中包含区域名称、其主（主）授权服务器名称以及技术细节，例如管理员电子邮件地址和从（辅助）名称服务器更新的参数。|'
- en: '| 12 | PTR | Pointer | Provides a pointer to another location in the name space.
    These records are best known for their use in reverse resolution through the IN-ADDR.ARPA
    domain (described in [Chapter 54](ch54.html "Chapter 54. DNS NAME REGISTRATION,
    PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES")). |'
  id: totrans-602
  prefs: []
  type: TYPE_TB
  zh: '| 12 | PTR | 指针 | 提供对名称空间中另一个位置的指针。这些记录最著名的用途是通过 IN-ADDR.ARPA 域（在第 54 章中描述）进行反向解析。|'
- en: '| 15 | MX | Mail Exchange | Specifies the location (device name) that is responsible
    for handling email sent to the domain. |'
  id: totrans-603
  prefs: []
  type: TYPE_TB
  zh: '| 15 | MX | 邮件交换 | 指定负责处理发送到该域的电子邮件的位置（设备名称）。|'
- en: '| 16 | TXT | Text String | Allows arbitrary additional text associated with
    the domain to be stored. |'
  id: totrans-604
  prefs: []
  type: TYPE_TB
  zh: '| 16 | TXT | 文本字符串 | 允许存储与域名相关联的任意附加文本。|'
- en: All of these RRs are used in different ways to define zones and devices within
    them and then permit name resolution and other functions to take place. You'll
    see how they are used in more detail in [Chapter 56](ch56.html "Chapter 56. DNS
    RESOLUTION CONCEPTS AND RESOLVER OPERATIONS"), which covers name resolution. You
    can also find a more lengthy description of some of them in the section in [Chapter 57](ch57.html
    "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD, AND MASTER FILE FORMATS")
    devoted to RR field formats.
  id: totrans-605
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些 RR 都以不同的方式用于定义区域及其内部的设备，然后允许进行名称解析和其他功能。您将在第 56 章（涵盖名称解析）中详细了解它们的使用方法。您还可以在第
    57 章（专门介绍 RR 字段格式）中找到一些更详细的描述。[第 57 章](ch57.html "Chapter 57. DNS 消息和消息、资源记录和主文件格式")。
- en: Tip
  id: totrans-606
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**RELATED INFORMATION** *See the topic on IPv6 DNS support near the end of
    [Chapter 57](ch57.html "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD,
    AND MASTER FILE FORMATS") for IPv6-specific RR types*.'
  id: totrans-607
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关信息** *有关 IPv6 DNS 支持的特定 RR 类型，请参阅第 57 章末尾的主题。[第 57 章](ch57.html "Chapter
    57. DNS 消息和消息、资源记录和主文件格式")。*'
- en: RR Classes
  id: totrans-608
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: RR 类别
- en: Finally, I would like to mention a historical note about RRs. When DNS was first
    created, its inventors wanted it to be as generic as possible. To that end, they
    designed it so that a DNS server could, theoretically, provide name service for
    more than one type of underlying protocol; that is, DNS could support TCP/IP as
    well as other protocols simultaneously.
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我想提及关于资源记录（RR）的一个历史性注释。当 DNS 首次创建时，其发明者希望它尽可能通用。为此，他们设计得使其能够理论上为多种底层协议提供名称服务；也就是说，DNS
    可以同时支持 TCP/IP 以及其他协议。
- en: Of course, protocols have different addressing schemes and also varying needs
    for name resolution. Therefore, DNS was defined so that each protocol could have
    a distinct set of RR types. Each set of RR types was called a *class*. Technically,
    an RR must be identified using both a class identifier and an RR type. Like the
    RR types, classes have a numeric code number and a text abbreviation. The class
    for TCP/IP uses the number 1, with the text code IN (for Internet).
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，协议有不同的寻址方案，对名称解析的需求也各不相同。因此，DNS被定义为每个协议都可以有一组独特的RR类型。每组RR类型被称为一个*类别*。技术上，必须使用类别标识符和RR类型来标识RR。与RR类型一样，类别有一个数字代码和一个文本缩写。TCP/IP的类别使用数字1，文本代码为IN（代表互联网）。
- en: 'In practice, this notion of multiple classes of RRs never took off. Today,
    DNS is, to my knowledge, used only for TCP/IP. (There may be some obscure exceptions.)
    Several other classes have been defined by RFC 1035 and are in the IANA DNS parameters
    list, but they are for relatively obscure, experimental, or obsolete network types,
    with names such as CSNET, CHAOS, and Hesiod. You''ll still see this concept of
    class in the specification of DNS message and RR formats, but there really is
    only class today: IN for TCP/IP. For this reason, in most cases, the class name
    can be omitted in DNS-related commands and data entries, and IN will be assumed
    by default.'
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，这种关于多个RR类别的概念从未流行起来。据我所知，今天DNS仅用于TCP/IP。（可能有少数例外。）RFC 1035定义了几个其他类别，并在IANA
    DNS参数列表中列出，但它们是相对不为人知的、实验性的或过时的网络类型，例如CSNET、CHAOS和Hesiod。你仍然会在DNS消息和RR格式的规范中看到这个类别的概念，但今天实际上只有一个类别：IN，代表TCP/IP。因此，在大多数情况下，可以在DNS相关命令和数据条目中省略类别名称，默认情况下将假设为IN。
- en: Tip
  id: totrans-612
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The DNS standards were originally created to allow them to
    work with multiple protocols, by specifying the class of each RR. Today, the only
    class commonly used is that for TCP/IP, which is called IN (for Internet).'
  id: totrans-613
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS标准最初是为了允许它们与多个协议一起工作而创建的，通过指定每个RR的类别。今天，唯一常用的类别是TCP/IP的类别，称为IN（代表互联网）。'
- en: DNS Name Server Types and Roles
  id: totrans-614
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称服务器类型和角色
- en: So far, we have looked at the functions of DNS servers, focusing on the important
    job of storing name server information. There are many thousands of DNS servers
    on the Internet, and not all are used in the same way. Each DNS server has a particular
    role in the overall operation of the name system. The different kinds of servers
    also interact with each other in a variety of ways.
  id: totrans-615
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经探讨了DNS服务器的功能，重点是存储名称服务器信息的重要任务。互联网上有数以千计的DNS服务器，并且它们并不都以相同的方式使用。每个DNS服务器在名称系统的整体运行中都有特定的角色。不同类型的服务器也以各种方式相互交互。
- en: Master (Primary)/Slave (Secondary) Servers
  id: totrans-616
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主（主）/从（辅助）服务器
- en: Every zone needs to have at least one DNS name server that is responsible for
    it. These DNS name servers are called *authoritative* servers for the zone, because
    they contain the full set of RRs that describe the zone. When any device on the
    Internet wants to know something about a zone, it consults one of its authoritative
    servers.
  id: totrans-617
  prefs: []
  type: TYPE_NORMAL
  zh: 每个区域至少需要一个负责该区域的DNS名称服务器。这些DNS名称服务器被称为该区域的*权威*服务器，因为它们包含描述该区域的完整RR集合。当任何互联网设备想要了解有关区域的信息时，它会咨询其权威服务器之一。
- en: 'From a strictly theoretical perspective, having one name server for each zone
    or domain is sufficient to provide name resolution services for the entire DNS
    name structure. From an implementation standpoint, however, having only one name
    server for each part of the name space is not a wise idea. Instead, each zone
    usually has associated with it at least two name servers: one *primary* or *master*
    name server, and one *secondary* or *slave* name server. Some zones may have more
    than one secondary name server.'
  id: totrans-618
  prefs: []
  type: TYPE_NORMAL
  zh: 从严格的理论角度来看，每个区域或域有一个名称服务器就足以提供整个DNS名称结构的名称解析服务。然而，从实现的角度来看，每个名称空间部分只有一个名称服务器并不是一个明智的选择。相反，每个区域通常至少与两个名称服务器相关联：一个*主*或*主控*名称服务器，以及一个*辅助*或*从属*名称服务器。一些区域可能有多个辅助名称服务器。
- en: Note
  id: totrans-619
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*The terms primary and secondary are used often in the DNS standards to refer
    to the roles of the two authoritative servers for a zone. However, master and
    slave are now the preferred terms, because primary and secondary are somewhat
    ambiguous and used in other contexts. You should be prepared to see both terms
    used*.'
  id: totrans-620
  prefs: []
  type: TYPE_NORMAL
  zh: '*在DNS标准中，经常使用主和从术语来指代区域两个权威服务器的角色。然而，现在主和从是首选术语，因为主和从有些含糊不清，并在其他上下文中使用。你应该准备好看到这两个术语都被使用*。'
- en: 'The master name server is obviously the most essential server. It is on this
    name server that the master files for the zone''s RRs are maintained, so the master
    name server is the final word on information on the zone. However, there are several
    reasons why slave servers are also important:'
  id: totrans-621
  prefs: []
  type: TYPE_NORMAL
  zh: 主域名服务器显然是最重要的服务器。该区域的RR主文件保存在这个域名服务器上，因此主域名服务器是关于该区域信息的最终权威。然而，有几个原因说明从服务器也很重要：
- en: '**Redundancy** If there were only one name server and it failed, no one would
    be able to resolve names such as [www.xyzindustries.com](http://www.xyzindustries.com)
    into IP addresses, and that would be a Bad Thing. Slave name servers act as a
    backup for the masters they support. Redundancy is the most important consideration
    in setting up master and slave name servers. Sticking two machines side by side
    in a server room, plugged into the same electrical service, both connected to
    the Internet with the same Internet service provider (ISP), and making one your
    master DNS server and the other your slave is not a smart move. Ideally, the primary
    and secondary servers should be as independent as possible; they should be physically
    distant and have separate connections to the Internet.'
  id: totrans-622
  prefs: []
  type: TYPE_NORMAL
  zh: '**冗余** 如果只有一个域名服务器并且它失败了，将没有人能够将诸如[www.xyzindustries.com](http://www.xyzindustries.com)之类的名称解析为IP地址，这将是一件糟糕的事情。从域名服务器作为它们支持的主服务器的备份。冗余是在设置主从域名服务器时最重要的考虑因素。在服务器室中将两台机器并排放置，连接到相同的电源服务，都连接到互联网，使用相同的互联网服务提供商（ISP），并将一台作为主DNS服务器，另一台作为从服务器并不是一个明智的选择。理想情况下，主服务器和辅助服务器应该尽可能独立；它们应该在物理上相距很远，并且有独立的互联网连接。'
- en: '**Maintenance** With more than one server, we can easily take the primary server
    down for maintenance when needed without name resolution service being disrupted.'
  id: totrans-623
  prefs: []
  type: TYPE_NORMAL
  zh: '**维护** 当有多个服务器时，我们可以在需要时轻松地将主服务器关闭进行维护，而不会中断域名解析服务。'
- en: '**Load Handling** Busy zones can use multiple servers to spread the load of
    name resolution requests to improve performance.'
  id: totrans-624
  prefs: []
  type: TYPE_NORMAL
  zh: '**负载处理** 忙碌的区域可以使用多个服务器来分散域名解析请求的负载，以提高性能。'
- en: '**Efficiency** There are many cases where there is an advantage to positioning
    a name server in a particular geographical location for the sake of efficiency.
    For example, a company may have an office in a distant location connected using
    a low-speed wide area network link. To reduce name resolution traffic across that
    link, it makes sense to have that zone''s information available in a name server
    on both sides of the connection, which would require two physical servers.'
  id: totrans-625
  prefs: []
  type: TYPE_NORMAL
  zh: '**效率** 在许多情况下，为了提高效率，将域名服务器放置在特定的地理位置是有利的。例如，一家公司可能在遥远的地方有一个办公室，使用低速广域网链路连接。为了减少通过该链路的域名解析流量，让该区域的信息在连接两端的域名服务器上可用是有意义的，这需要两个物理服务器。'
- en: Just as the names *master* and *slave* suggest, the secondary name servers are
    not the original source of information about a zone. They normally obtain their
    RRs not from human-edited master files, but from updates from the master server.
    This is accomplished using a process called a *zone transfer*. These transfers
    are performed on a regular basis to ensure that the slave servers are kept up-to-date.
    The slaves can then respond to name resolution requests with current information.
    Both the master and the slave are considered authoritative for the zone.
  id: totrans-626
  prefs: []
  type: TYPE_NORMAL
  zh: 正如“master”和“slave”这两个名称所暗示的，辅助域名服务器不是关于一个区域信息的原始来源。它们通常不是从人工编辑的主文件中获取RR，而是从主服务器的更新中获取。这是通过一个称为“区域传输”的过程来完成的。这些传输定期执行，以确保从服务器保持最新。从服务器然后可以响应带有当前信息的域名解析请求。主服务器和从服务器都被认为是该区域的权威。
- en: Name Server Roles
  id: totrans-627
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 域名服务器角色
- en: 'The master and slave roles for a zone are logical and do not always correspond
    to individual physical hardware devices. A single physical name server can play
    multiple roles in the following cases:'
  id: totrans-628
  prefs: []
  type: TYPE_NORMAL
  zh: 一个区域的master和slave角色是逻辑上的，并不总是对应于单个物理硬件设备。在以下情况下，单个物理域名服务器可以扮演多个角色：
- en: It can be the master name server for more than one zone. Each zone in this case
    has a distinct set of RRs maintained in separate master files.
  id: totrans-629
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以是一个区域的主域名服务器，也可以是多个区域的主域名服务器。在这种情况下，每个区域都有一个独特的RR集合，这些RR集合被保存在单独的主文件中。
- en: It can be a slave name server for more than one zone.
  id: totrans-630
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以是为多个区域提供从域名服务器。
- en: It can be a slave name server for certain zones as well as a primary for others.
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它也可以是某些区域的主域名服务器，同时也是其他区域的主域名服务器。
- en: Note, however, that a single physical name server cannot be a master and a slave
    server for the same zone.
  id: totrans-632
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，请注意，单个物理名称服务器不能是同一区域的master和slave服务器。
- en: Tip
  id: totrans-633
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The master DNS server for a zone is its primary server, which
    maintains the master copy of DNS information. Most DNS zones also have at least
    one slave or secondary DNS server. These are important because they serve as backups
    for the primary server, and they can also help share the load of responding to
    requests in busy zones. Secondary name servers get their information from primary
    servers on a routine basis. Both master and slave servers are considered authoritative
    for the zones whose data they maintain.'
  id: totrans-634
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念**一个区域的master DNS服务器是其主服务器，它维护DNS信息的主副本。大多数DNS区域也至少有一个从服务器或辅助DNS服务器。这些服务器很重要，因为它们作为主服务器的备份，还可以帮助分担繁忙区域中响应请求的负载。辅助名称服务器定期从主服务器获取信息。主服务器和从服务器都被认为是它们维护的数据所在区域的权威服务器。'
- en: Caching-Only Name Servers
  id: totrans-635
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 仅缓存名称服务器
- en: For efficiency, all DNS servers—both masters and slaves—perform caching of DNS
    information so it can be used again if requested in the near future. (Caching
    is described in the "Name Server Caching" section later in this chapter.) The
    importance of caching is so significant that some servers are set up only to cache
    information from other DNS servers. Unsurprisingly, these are called *caching-only*
    name servers.
  id: totrans-636
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提高效率，所有DNS服务器——无论是主服务器还是从服务器——都会执行DNS信息的缓存，以便在不久的将来如果需要再次使用。 (缓存将在本章后面的“名称服务器缓存”部分中描述。)缓存的重要性非常显著，以至于一些服务器仅用于从其他DNS服务器缓存信息。不出所料，这些被称为*仅缓存*名称服务器。
- en: These name servers are not authoritative for any zone or domain, and they don't
    maintain any RRs of their own. They can answer name resolution requests only by
    contacting other name servers that *are* authoritative and then relaying the information.
    They then store the information for future requests. Why bother? The reason is
    performance. Through strategic placement, a caching-only server can increase DNS
    resolution performance substantially in some networks by cutting down on requests
    to authoritative servers.
  id: totrans-637
  prefs: []
  type: TYPE_NORMAL
  zh: 这些名称服务器对任何区域或域名都不是权威的，并且它们不维护任何RR。它们只能通过联系其他权威的名称服务器来回答名称解析请求，然后转达信息。然后它们将信息存储起来以供未来的请求使用。为什么这样做？原因在于性能。通过战略性的放置，仅缓存服务器可以通过减少对权威服务器的请求来显著提高某些网络中的DNS解析性能。
- en: Tip
  id: totrans-638
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** There are DNS servers that do not maintain DNS RRs of their
    own but solely hold recently used information from other zones. These are called
    *caching-only* name servers and are not authoritative for any zone.'
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念**有一些DNS服务器不维护自己的DNS RR，但仅保留来自其他区域的最近使用的信息。这些被称为*仅缓存*名称服务器，并且对任何区域都不是权威的。'
- en: DNS Zone Management, Contacts, and Zone Transfers
  id: totrans-640
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS区域管理、联系人和区域传输
- en: 'The authority for a particular DNS zone is responsible for performing a variety
    of tasks to manage it. *Zone management* encompasses the entire gamut of jobs
    related to a zone: deciding on the name hierarchy within the zone, specifying
    procedures for name registration, technical work related to keeping DNS servers
    running, and other administrative overhead of all sorts. This job can be either
    very small or incredibly large, depending on the type of organization. A small
    domain owned by an individual doesn''t require much work to manage, while one
    for a huge company might require a dedicated staff to maintain.'
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: 特定DNS区域的权威性负责执行各种任务以管理它。*区域管理*包括与区域相关的所有工作的范围：决定区域内的名称层次结构、指定名称注册的程序、与保持DNS服务器运行相关的技术工作，以及各种类型的行政开销。这项工作可能非常小，也可能非常大，具体取决于组织的类型。个人拥有的小型域名不需要太多工作来管理，而大型公司的域名可能需要专门的员工来维护。
- en: Domain Contacts
  id: totrans-642
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 域名联系人
- en: 'It is important that it be possible for anyone on an internetwork to be able
    to determine who the owner of a domain is, so that person can be reached for whatever
    reason. On the Internet, each DNS domain has associated with it a set of three
    *contacts* that are responsible for different facets of managing a domain:'
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是，任何在互联网上的人都能确定域的所有者是谁，这样那个人就可以因为任何原因被找到。在互联网上，每个DNS域都与一组三个*联系人*相关联，这些联系人负责管理域的不同方面：
- en: '**Administrative Contact** The main contact, responsible for the domain as
    a whole. This individual or organization is considered the overall owner of the
    domain.'
  id: totrans-644
  prefs: []
  type: TYPE_NORMAL
  zh: '**管理联系人**主要联系人，负责整个域名。这个个人或组织被认为是域的总体所有者。'
- en: '**Billing Contact** A contact responsible for handling payment for domain services
    and other accounting matters.'
  id: totrans-645
  prefs: []
  type: TYPE_NORMAL
  zh: '**账单联系人** 负责处理域名服务和其他会计事项的付款。'
- en: '**Technical Contact** A contact who handles the technical details of setting
    up DNS for the domain and making sure it works.'
  id: totrans-646
  prefs: []
  type: TYPE_NORMAL
  zh: '**技术联系人** 负责处理为域名设置DNS并确保其正常工作的技术细节的联系人。'
- en: For smaller domains, there usually is no separate billing contact; it is the
    same as the administrative contact. In contrast, the technical contact is often
    different from the administrative contact in both large and small domains. Large
    organizations will make the technical contact someone in their information technology
    department. Small organizations often let their ISP provide DNS services, and
    in that case, the technical contact will be someone at that ISP.
  id: totrans-647
  prefs: []
  type: TYPE_NORMAL
  zh: 对于较小的域名，通常没有单独的账单联系人；它与行政联系人相同。相比之下，在大型和小型域名中，技术联系人通常与行政联系人不同。大型组织会将技术联系人指定为信息技术部门的人员。小型组织通常让他们的ISP提供DNS服务，在这种情况下，技术联系人将是该ISP的某位人员。
- en: Tip
  id: totrans-648
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Each DNS domain has associated with it a set of three contact
    names that indicate who is responsible for managing it. The *administrative* contact
    is the person with overall responsibility for the domain. The *billing contact*
    is responsible for payment issues; this may be the same as the administrative
    contact. The *technical contact* is in charge of technical matters for the domain
    and is often a different person than the administrative contact, especially when
    DNS services are outsourced.'
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 每个DNS域名都与一组三个联系人名称相关联，指示谁负责管理它。*行政联系人*是对域名负有总体责任的个人。*账单联系人*负责付款问题；这可能与行政联系人相同。*技术联系人*负责域的技术事宜，通常与行政联系人不同，尤其是在DNS服务外包的情况下。'
- en: Zone Transfers
  id: totrans-650
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 区域传输
- en: The ultimate purpose of zone management is to ensure that information about
    the zone is kept current on the zone's master and slave name servers, so it can
    be efficiently provided to name resolvers. Thus, the management of a zone begins
    with decision-making and administrative actions that result in changes to the
    RRs for the zone. These are reflected in changes made to the DNS master files
    on the master (primary) DNS server for the zone.
  id: totrans-651
  prefs: []
  type: TYPE_NORMAL
  zh: 区域管理的最终目的是确保区域的信息在区域的主和从域名服务器上保持最新，以便可以有效地提供给名称解析器。因此，区域管理始于决策和行政行动，这些行动导致区域RR的变化。这些变化反映在区域主（主）DNS服务器上的DNS主文件的变化中。
- en: In contrast, each zone's secondary DNS server(s) act as slaves to the master
    primary server. They carry information about the zone, but do not load it from
    local master files that are locally edited. Instead, they obtain their information
    from the master name server on a regular basis. The procedure responsible for
    this is called a *zone transfer*.
  id: totrans-652
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，每个区域的二级DNS服务器作为主主服务器的从服务器。它们携带有关区域的信息，但不会从本地编辑的本地主文件中加载信息。相反，它们定期从主域名服务器获取信息。负责此过程的程序称为*区域传输*。
- en: The records on the master name server can be updated at any time. As soon as
    the master name server's records have been changed, the information at the slave
    name servers becomes partially out-of-date. This is not generally a big deal,
    because most of the data will still be accurate, and the secondary server will
    continue to respond to resolution requests using the most current information
    it has. However, it is obviously important that we update the slave servers on
    a regular basis; if this is not done, eventually their data will become stale
    and unreliable. To this end, it is necessary that zone transfers be performed
    on a regular basis.
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: 主域名服务器的记录可以随时更新。一旦主域名服务器的记录被更改，从域名服务器的信息就会变得部分过时。这通常不是什么大问题，因为大部分数据仍然准确，二级服务器将继续使用它所拥有的最新信息来响应解析请求。然而，定期更新从服务器显然很重要；如果不这样做，最终它们的数据将变得陈旧且不可靠。为此，有必要定期执行区域传输。
- en: Control of When Zone Transfers Occur
  id: totrans-654
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 控制区域传输发生的时间
- en: Controlling when zone transfers happen requires implementation of a communication
    process between the servers that consists of two basic parts. First, we need a
    mechanism to allow slave servers to regularly check for changes to the data on
    the master. Second, we must have a mechanism for copying the RRs for the zone
    from the primary name server to the secondary server when needed.
  id: totrans-655
  prefs: []
  type: TYPE_NORMAL
  zh: 控制区域传输发生的时间需要实现在服务器之间的通信过程，该过程包括两个基本部分。首先，我们需要一个机制，允许从属服务器定期检查主服务器上的数据变化。其次，当需要时，我们必须有一个机制从主域名服务器复制区域记录（RR）到从服务器。
- en: Both mechanisms make use of standard DNS query/response facilities and special
    fields in the RRs for the zone. Of particular importance is the Start Of Authority
    (SOA) record for the zone, which contains several parameters that control zone
    status checking and zone transfers. While the formal description of these parameters
    can be found in the description of RR formats in [Chapter 57](ch57.html "Chapter 57. DNS
    MESSAGING AND MESSAGE, RESOURCE RECORD, AND MASTER FILE FORMATS"), I'll discuss
    how they are used here.
  id: totrans-656
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种机制都使用了标准的DNS查询/响应设施和区域RR的特殊字段。特别重要的是区域的权威开始（SOA）记录，它包含几个参数，用于控制区域状态检查和区域传输。虽然这些参数的正式描述可以在RR格式描述的[第57章](ch57.html
    "第57章。DNS消息和消息、资源记录和主文件格式")中找到，但我将在这里讨论它们的使用方法。
- en: When a slave name server starts up, it may have no information about the zone
    at all, or it may have a copy of the zone's RRs stored on its local storage, from
    the last time it was running. In the former case, it must immediately perform
    a full zone transfer, since it has no information. In the latter case, it will
    read its last-known copy of the zone from local storage; it may immediately perform
    a *poll* on the master server to see if the data has changed, depending on configuration.
    A poll is done by requesting the SOA RR for the zone.
  id: totrans-657
  prefs: []
  type: TYPE_NORMAL
  zh: 当从属域名服务器启动时，它可能对区域一无所知，或者它可能在其本地存储中存储了区域RR的副本，这是它上次运行时的情况。在前一种情况下，它必须立即执行完全区域传输，因为它没有任何信息。在后一种情况下，它将从本地存储中读取其最后已知的区域副本；根据配置，它可能立即在主服务器上执行一个*轮询*以查看数据是否已更改。轮询是通过请求区域的SOA
    RR来完成的。
- en: The Serial field in the SOA record contains a serial number (which may be arbitrary
    or may be encoded so it has a particular meaning) that acts as the version number
    of the master server's zone database. Each time the master file for the zone is
    modified (either manually by editing or automatically through another means),
    this serial number is increased. Therefore, a slave server can detect when changes
    have been made on the master by seeing if the Serial field in the most recent
    SOA record is greater than the one the slave stored the last time it polled the
    master. If the serial number has changed, the slave begins a zone transfer.
  id: totrans-658
  prefs: []
  type: TYPE_NORMAL
  zh: SOA记录中的序列号字段包含一个序列号（可能是任意的，也可能被编码以具有特定的含义），它充当主服务器区域数据库的版本号。每当区域的主文件被修改（无论是通过手动编辑还是通过其他方式自动修改）时，此序列号都会增加。因此，从属服务器可以通过查看最近SOA记录中的序列号是否大于从属服务器上次轮询主服务器时存储的序列号来检测主服务器上的更改。如果序列号已更改，从属服务器将开始区域传输。
- en: 'Three other fields in the SOA record control the timing that slave name servers
    use for polling and updating their information:'
  id: totrans-659
  prefs: []
  type: TYPE_NORMAL
  zh: SOA记录中的其他三个字段控制从属域名服务器用于轮询和更新其信息的时机：
- en: '**Refresh** This field specifies how many seconds a slave server waits between
    attempts to check for an update on the master. Assuming the slave can make contact,
    this is the longest period of time that data on a slave will become stale when
    the master changes.'
  id: totrans-660
  prefs: []
  type: TYPE_NORMAL
  zh: '**刷新** 此字段指定从属服务器在尝试检查主服务器上的更新之间等待的秒数。假设从属服务器可以建立联系，这是从属服务器上的数据在主服务器发生变化时可能变得过时的最长时间段。'
- en: '**Retry** This field controls how long the slave must wait before trying again
    to check in with the master if its last attempt failed. This is used to prevent
    rapid-fire attempts to contact a master that may clog the network.'
  id: totrans-661
  prefs: []
  type: TYPE_NORMAL
  zh: '**重试** 此字段控制从属服务器在尝试再次与主服务器联系之前必须等待多长时间，如果其最后一次尝试失败。这用于防止快速连续尝试联系主服务器，这可能会阻塞网络。'
- en: '**Expire** If, for whatever reason, the slave name server is not able to make
    contact with the master for a number of seconds given by this field''s value,
    it must assume that the information it has is stale and stop using it. This means
    that it will stop acting as an authoritative name server for the zone until it
    receives an update.'
  id: totrans-662
  prefs: []
  type: TYPE_NORMAL
  zh: '**过期** 如果由于任何原因，从属名称服务器无法与主服务器联系给定字段值表示的几秒钟，它必须假设它拥有的信息已过时，并停止使用它。这意味着它将停止作为该区域的权威名称服务器行事，直到它收到更新。'
- en: The fact that these parameters are part of the SOA record for the zone gives
    the administrator of the zone complete control over how often master name servers
    are updated. In a small zone where changes are rare, the interval between checks
    made by the slave servers can be increased; for larger zones or ones that are
    changed often, the Refresh interval can be decreased.
  id: totrans-663
  prefs: []
  type: TYPE_NORMAL
  zh: 这些参数是区域SOA记录的一部分，这使区域管理员完全控制主名称服务器更新的频率。在一个变化很少的小区域中，从属服务器进行检查的间隔可以增加；对于较大的区域或经常更改的区域，刷新间隔可以减少。
- en: Zone Transfer Mechanism
  id: totrans-664
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区域传输机制
- en: When a zone transfer is required, it is accomplished using a DNS query sent
    to the master server using the regular DNS query/response messaging method used
    for name resolution (discussed in the next section). A special DNS question type,
    called AXFR (address transfer) is used to initiate the zone transfer. The server
    will then transfer the RRs for the zone using a series of DNS response messages
    (assuming that the server that requested the transfer is authorized to do so).
    Since it's important that zone transfers be received reliably, and since the amount
    of data to be sent is large and needs to be managed, a Transmission Control Protocol
    (TCP) session must first be established and used for zone transfers. This is in
    contrast to the simpler User Datagram Protocol (UDP) transport used for regular
    DNS messages (as described in the section discussing the use of UDP and TCP for
    DNS at the start of [Chapter 57](ch57.html "Chapter 57. DNS MESSAGING AND MESSAGE,
    RESOURCE RECORD, AND MASTER FILE FORMATS")).
  id: totrans-665
  prefs: []
  type: TYPE_NORMAL
  zh: 当需要区域传输时，它通过向主服务器发送DNS查询来完成，使用的是用于名称解析的常规DNS查询/响应消息方法（下一节将讨论）。用于启动区域传输的特殊DNS问题类型称为AXFR（地址传输）。服务器随后将使用一系列DNS响应消息传输该区域的RR（假设请求传输的服务器有权这样做）。由于区域传输必须可靠地接收，并且要发送的数据量很大且需要管理，因此必须首先建立并使用传输控制协议（TCP）会话来执行区域传输。这与用于常规DNS消息的更简单的用户数据报协议（UDP）传输方式形成对比（如[第57章](ch57.html
    "第57章。DNS消息、消息、资源记录和主文件格式")开头讨论的DNS中使用UDP和TCP的部分所述）。
- en: Once the zone transfer is complete, the slave name server will update its database
    and return to regular operation. It will continue to perform regular polls of
    the master server every Refresh seconds. If it has a problem with a regular poll,
    it will try again after Retry seconds. Finally, if an amount of time equal to
    Expires seconds elapses, the master name server will stop serving data from the
    zone until it reestablishes contact with the primary name server.
  id: totrans-666
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦区域传输完成，从属名称服务器将更新其数据库并返回常规操作。它将继续每刷新秒对主服务器进行常规轮询。如果它遇到常规轮询的问题，它将在重试秒后再次尝试。最后，如果经过的时间等于过期秒数，主名称服务器将停止从该区域提供数据，直到它与主名称服务器重新建立联系。
- en: Tip
  id: totrans-667
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Slave name servers do not have their DNS information managed
    directly by an administrator. Instead, they obtain information from their master
    name server on a periodic basis through a process called a *zone transfer*. Several
    fields in the Start Of Authority (SOA) DNS RR control the zone transfer process,
    including specifying how often transfers are done and how slave name servers handle
    problem conditions such as an inability to contact the master server.'
  id: totrans-668
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 从属名称服务器不是由管理员直接管理其DNS信息。相反，它们通过称为区域传输的过程定期从其主名称服务器获取信息。在权威起始（SOA）DNS
    RR中的几个字段控制区域传输过程，包括指定传输的频率以及从属名称服务器如何处理无法联系主服务器等问题条件。'
- en: Note that the DNS *Notify* feature is an enhancement to the basic zone status
    check/zone transfer model. It allows the master server to notify a slave server
    when the master's database has changed. Another new feature allows only part of
    a zone to be transferred instead of the entire zone. See the discussion of DNS
    name server enhancements later in this chapter for more information.
  id: totrans-669
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，DNS *通知*功能是对基本区域状态检查/区域传输模型的增强。它允许主服务器在主数据库发生变化时通知从服务器。另一个新功能允许只传输区域的一部分而不是整个区域。有关更多信息，请参阅本章后面关于DNS名称服务器增强的讨论。
- en: DNS Root Name Servers
  id: totrans-670
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS根名称服务器
- en: DNS is strongly oriented around the notion of hierarchical structure. The name
    space, registration authorities, and name servers are all arranged in a tree structure.
    Like these structures, the name resolution process is also hierarchical. As explained
    in [Chapter 53](ch53.html "Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY"),
    a fully qualified domain name (FQDN) is resolved by starting with the least specific
    domain name element (label) and working toward the most specific one.
  id: totrans-671
  prefs: []
  type: TYPE_NORMAL
  zh: DNS强烈围绕分层结构的概念。名称空间、注册机构和名称服务器都排列成树状结构。像这些结构一样，名称解析过程也是分层的。正如[第53章](ch53.html
    "第53章。DNS名称空间、架构和术语")中解释的那样，完全合格域名（FQDN）是通过从最不具体的域名元素（标签）开始，逐步向最具体的一个进行解析。
- en: 'Naturally, the least specific portion of every name is the root node under
    which the entire DNS structure exists. This means that, absent caching and other
    performance enhancements, all name resolution begins with the root of the name
    tree. We find here a set of name servers that are responsible for name server
    functions for the DNS root: the DNS *root name servers*.'
  id: totrans-672
  prefs: []
  type: TYPE_NORMAL
  zh: 自然地，每个名称的最不具体部分是整个DNS结构存在的根节点。这意味着，如果没有缓存和其他性能增强，所有名称解析都从名称树的根开始。我们在这里找到一组负责DNS根的名称服务器功能：DNS
    *根名称服务器*。
- en: Like all name servers, DNS root name servers store information about and provide
    name resolution services for all the nodes within the root zone. This includes
    certain specific TLDs and subdomains. Most TLDs, however, are in their own zones.
    The root name servers are used as the "go-to" spot to obtain the names and addresses
    of the authoritative servers for each of these TLDs. For example, if we want to
    resolve the name [www.xyzindustries.co.uk](http://www.xyzindustries.co.uk), the
    root name servers are where a resolver would find the identity of the name server
    that is responsible for .UK.
  id: totrans-673
  prefs: []
  type: TYPE_NORMAL
  zh: 像所有名称服务器一样，DNS根名称服务器存储有关根区域内所有节点的信息，并提供名称解析服务。这包括某些特定的顶级域名（TLD）和子域名。然而，大多数TLD都有自己的区域。根名称服务器被用作获取每个这些TLD的权威服务器的名称和地址的“首选”地点。例如，如果我们想解析名称[www.xyzindustries.co.uk](http://www.xyzindustries.co.uk)，根名称服务器就是解析器找到负责.UK的名称服务器的地方。
- en: Root Name Server Redundancy
  id: totrans-674
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 根名称服务器冗余
- en: Clearly, these root name servers are extremely important to the functioning
    of the DNS system as a whole. If anything were to ever happen to cause the root
    name servers to stop operating, the entire DNS system would essentially shut down.
    For this reason, there obviously isn't just one root server, nor are there two
    or three; there are (at present) thirteen different root name servers.
  id: totrans-675
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，这些根名称服务器对于整个DNS系统的运行至关重要。如果发生任何导致根名称服务器停止运行的情况，整个DNS系统将基本关闭。因此，显然不仅仅有一个根服务器，也不是两个或三个；目前有（目前）十三台不同的根名称服务器。
- en: In fact, there are actually far more than 13 physical servers. Most of the 13
    name servers are implemented as clusters of several independent physical hardware
    servers. Some are distributed collections of servers that are in different physical
    locations. The best example is the F root server, which has been implemented as
    a set of more than a dozen *mirrors* in various places around the world, to provide
    better service.
  id: totrans-676
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，实际上物理服务器的数量远超过13台。这13个名称服务器中的大多数都是几个独立物理硬件服务器的集群实现。有些是分布在不同物理位置的分布式服务器集合。最好的例子是F根服务器，它已经在世界各地以超过一打的*镜像*形式实现，以提供更好的服务。
- en: The principles of redundancy that are a good idea for choosing a secondary name
    server for a regular domain obviously apply that much more to the root. This is
    why the various physical devices that compose the 13 root servers are all located
    in different places all around the globe. Many of them are in the United States,
    but even these are in many locations throughout the country (albeit concentrated
    in a couple of hot spots in California and near Washington, DC) and are set up
    to use different networks to connect to the Internet.
  id: totrans-677
  prefs: []
  type: TYPE_NORMAL
  zh: 对于选择一个常规域的辅助域名服务器而言，冗余原则是一个好主意，显然这一点在根域名服务器上更是如此。这就是为什么组成13个根服务器的各种物理设备都分布在全球不同的地方。其中许多位于美国，但这些服务器遍布全国许多地方（尽管集中在加利福尼亚的几个热点地区以及华盛顿特区附近），并且配置了不同的网络来连接互联网。
- en: The root name servers are, of course, rather powerful. Despite there being several
    dozen pieces of hardware to spread the load, they must each handle large amounts
    of data, 24 hours a day. They are run by networking professionals who ensure that
    they function efficiently. An Internet standard, RFC 2870, "Root Name Server Operational
    Requirements," spells out the basic rules and practices for the operation of these
    name servers. It specifies extensive procedures for ensuring the security of the
    servers and for avoiding performance problems due to their pivotal role.
  id: totrans-678
  prefs: []
  type: TYPE_NORMAL
  zh: 根域名服务器当然非常强大。尽管有几十台硬件设备来分散负载，但它们必须每天24小时处理大量数据。它们由网络专业人员运行，确保它们高效运行。互联网标准RFC
    2870，“根域名服务器操作要求”，规定了这些域名服务器的基本规则和实践。它规定了确保服务器安全以及避免由于它们的关键作用而导致的性能问题的详细程序。
- en: Tip
  id: totrans-679
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Information about the DNS root and its TLDs is managed by a
    set of *root name servers*. These servers are essential to the operation of DNS.
    They are arranged into 13 groups and physically distributed around the world.'
  id: totrans-680
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS根及其顶级域（TLD）的信息由一组*根域名服务器*管理。这些服务器对于DNS的运行至关重要。它们被安排成13个组，并在全球范围内物理分布。'
- en: Despite all the efforts taken to ensure that the root servers are widely distributed
    and secure, they still collectively represent a point of weakness in the global
    Internet. Millions and millions of people depend on these servers. There have
    been incidents in the past where rogue elements on the Internet have attempted
    to disrupt DNS by attacking the root name servers. One widely publicized incident
    was a denial-of-service (DoS) attack against the root servers on October 21, 2002\.
    The attack failed, but it significantly raised awareness of the importance of
    these servers and how essential DNS security is.
  id: totrans-681
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管已经采取了所有努力以确保根服务器广泛分布且安全，但它们仍然共同代表了全球互联网的一个弱点。数以百万计的人依赖于这些服务器。过去曾发生过互联网上的恶意元素试图通过攻击根域名服务器来破坏DNS的事件。一个广为人知的事件是2002年10月21日对根服务器的拒绝服务（DoS）攻击。攻击失败了，但它显著提高了人们对这些服务器重要性的认识以及DNS安全的重要性。
- en: Current Root Name Servers
  id: totrans-682
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 当前根域名服务器
- en: 'Originally, the root name servers were given domain names reflecting the organizations
    that ran them. In these historical names, we can see a veritable who''s who of
    the big players in the development of the Internet: the Information Sciences Institute
    (ISI), National Aeronautics and Space Administration (NASA), United States military,
    and others. Several of the servers are still run by government agencies or the
    United States military, where added security can be put into place to protect
    them. For convenience, however, all the root name servers are now given alphabetical
    letter names in the special domain root-servers.net.'
  id: totrans-683
  prefs: []
  type: TYPE_NORMAL
  zh: 最初，根域名服务器被赋予了反映运行它们的组织的域名。在这些历史名称中，我们可以看到互联网发展中的大玩家的名单：信息科学研究所（ISI）、国家航空航天局（NASA）、美国军事以及其他机构。其中一些服务器仍然由政府机构或美国军事运行，在这些机构中可以实施额外的安全措施来保护它们。然而，为了方便起见，现在所有根域名服务器都在特殊域名root-servers.net中赋予字母名称。
- en: '[Table 55-2](ch55s05.html#internet_dns_root_name_servers "Table 55-2. Internet
    DNS Root Name Servers") shows the most current information about the DNS root
    name servers as of the date of publishing of this book. For your interest and
    amusement, I have also mapped the locations of these servers in [Figure 55-2](ch55s05.html#geographic_locations_of_internet_dns_roo
    "Figure 55-2. Geographic locations of Internet DNS root name servers").'
  id: totrans-684
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 55-2](ch55s05.html#internet_dns_root_name_servers "表 55-2. 因特网 DNS 根域名服务器")
    显示了截至本书出版日期的 DNS 根域名服务器的最新信息。为了您的兴趣和娱乐，我还将这些服务器的位置绘制在 [图 55-2](ch55s05.html#geographic_locations_of_internet_dns_roo
    "图 55-2. 因特网 DNS 根域名服务器的地理位置") 中。'
- en: Table 55-2. Internet DNS Root Name Servers
  id: totrans-685
  prefs: []
  type: TYPE_NORMAL
  zh: 表 55-2. 因特网 DNS 根域名服务器
- en: '| Root Server Name | IP Address | Historical Name | Location(s) |'
  id: totrans-686
  prefs: []
  type: TYPE_TB
  zh: '| 根服务器名称 | IP 地址 | 历史名称 | 位置 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-687
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| a.root-servers.net | 198.41.0.4 | ns.internic.net | Dulles, VA, U.S. |'
  id: totrans-688
  prefs: []
  type: TYPE_TB
  zh: '| a.root-servers.net | 198.41.0.4 | ns.internic.net | Dulles, VA, U.S. |'
- en: '| b.root-servers.net | 128.9.0.107 | ns1.isi.edu | Marina Del Rey, CA, U.S.
    |'
  id: totrans-689
  prefs: []
  type: TYPE_TB
  zh: '| b.root-servers.net | 128.9.0.107 | ns1.isi.edu | Marina Del Rey, CA, U.S.
    |'
- en: '| c.root-servers.net | 192.33.4.12 | c.psi.net | Herndon, VA and Los Angeles,
    CA, U.S. |'
  id: totrans-690
  prefs: []
  type: TYPE_TB
  zh: '| c.root-servers.net | 192.33.4.12 | c.psi.net | Herndon, VA and Los Angeles,
    CA, U.S. |'
- en: '| d.root-servers.net | 128.8.10.90 | terp.umd.edu | College Park, MD, U.S.
    |'
  id: totrans-691
  prefs: []
  type: TYPE_TB
  zh: '| d.root-servers.net | 128.8.10.90 | terp.umd.edu | College Park, MD, U.S.
    |'
- en: '| e.root-servers.net | 192.203.230.10 | ns.nasa.gov | Mountain View, CA, U.S.
    |'
  id: totrans-692
  prefs: []
  type: TYPE_TB
  zh: '| e.root-servers.net | 192.203.230.10 | ns.nasa.gov | Mountain View, CA, U.S.
    |'
- en: '| f.root-servers.net | 192.5.5.241 | ns.isc.org | Auckland, New Zealand; Sao
    Paulo, Brazil; Hong Kong, China; Johannesburg, South Africa; Los Angeles, CA,
    U.S.; New York, NY, U.S.; Madrid, Spain; Palo Alto, CA, U.S.; Rome, Italy; Seoul,
    Korea; San Francisco, CA, U.S.; San Jose, CA, U.S.; Ottawa, ON, Canada |'
  id: totrans-693
  prefs: []
  type: TYPE_TB
  zh: '| f.root-servers.net | 192.5.5.241 | ns.isc.org | Auckland, New Zealand; Sao
    Paulo, Brazil; Hong Kong, China; Johannesburg, South Africa; Los Angeles, CA,
    U.S.; New York, NY, U.S.; Madrid, Spain; Palo Alto, CA, U.S.; Rome, Italy; Seoul,
    Korea; San Francisco, CA, U.S.; San Jose, CA, U.S.; Ottawa, ON, Canada |'
- en: '| g.root-servers.net | 192.112.36.4 | ns.nic.ddn.mil | Vienna, VA, U.S. |'
  id: totrans-694
  prefs: []
  type: TYPE_TB
  zh: '| g.root-servers.net | 192.112.36.4 | ns.nic.ddn.mil | Vienna, VA, U.S. |'
- en: '| h.root-servers.net | 128.63.2.53 | aos.arl.army.mil | Aberdeen, MD, U.S.
    |'
  id: totrans-695
  prefs: []
  type: TYPE_TB
  zh: '| h.root-servers.net | 128.63.2.53 | aos.arl.army.mil | Aberdeen, MD, U.S.
    |'
- en: '| i.root-servers.net | 192.36.148.17 | nic.nordu.net | Stockholm, Sweden; Helsinki,
    Finland |'
  id: totrans-696
  prefs: []
  type: TYPE_TB
  zh: '| i.root-servers.net | 192.36.148.17 | nic.nordu.net | Stockholm, Sweden; Helsinki,
    Finland |'
- en: '| j.root-servers.net | 192.58.128.30 | — | Dulles, VA, U.S.; Mountain View,
    CA, U.S.; Sterling, VA, U.S.; Seattle, WA, U.S.; Atlanta, GA, U.S.; Los Angeles,
    CA, U.S.; Amsterdam, The Netherlands |'
  id: totrans-697
  prefs: []
  type: TYPE_TB
  zh: '| j.root-servers.net | 192.58.128.30 | — | Dulles, VA, U.S.; Mountain View,
    CA, U.S.; Sterling, VA, U.S.; Seattle, WA, U.S.; Atlanta, GA, U.S.; Los Angeles,
    CA, U.S.; Amsterdam, The Netherlands |'
- en: '| k.root-servers.net | 193.0.14.129 | — | London, UK; Amsterdam, The Netherlands
    |'
  id: totrans-698
  prefs: []
  type: TYPE_TB
  zh: '| k.root-servers.net | 193.0.14.129 | — | London, UK; Amsterdam, The Netherlands
    |'
- en: '| l.root-servers.net | 198.32.64.12 | — | Los Angeles, CA, U.S. |'
  id: totrans-699
  prefs: []
  type: TYPE_TB
  zh: '| l.root-servers.net | 198.32.64.12 | — | Los Angeles, CA, U.S. |'
- en: '| m.root-servers.net | 202.12.27.33 | — | Tokyo, Japan |'
  id: totrans-700
  prefs: []
  type: TYPE_TB
  zh: '| m.root-servers.net | 202.12.27.33 | — | Tokyo, Japan |'
- en: '![Geographic locations of Internet DNS root name servers](httpatomoreillycomsourcenostarchimages288169.png.jpg)'
  id: totrans-701
  prefs: []
  type: TYPE_IMG
  zh: '![因特网 DNS 根域名服务器的地理位置](httpatomoreillycomsourcenostarchimages288169.png.jpg)'
- en: Figure 55-2. Geographic locations of Internet DNS root name servers
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: 图 55-2. 因特网 DNS 根域名服务器的地理位置
- en: The current list of root name servers can be found in the file [ftp://ftp.rs.internic.net/domain/named.root](ftp://ftp.rs.internic.net/domain/named.root).
    You can also find the information in a more user-friendly format at [http://www.root-servers.org](http://www.root-servers.org).
  id: totrans-703
  prefs: []
  type: TYPE_NORMAL
  zh: 当前根域名服务器的列表可以在文件 [ftp://ftp.rs.internic.net/domain/named.root](ftp://ftp.rs.internic.net/domain/named.root)
    中找到。您也可以在 [http://www.root-servers.org](http://www.root-servers.org) 以更用户友好的格式找到这些信息。
- en: DNS Name Server Caching
  id: totrans-704
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS 命名服务器缓存
- en: Most of the grunt work done by name servers is responding to name resolution
    requests. Busy servers—like the root name servers, the ones that carry zone information
    for the TLDs, and ones that serve very busy zones—must handle hundreds or even
    thousands of name resolution requests each *second*. Each of these requests takes
    time and resources to resolve and takes internetwork bandwidth away from the business
    of transferring data. It is essential, therefore, that DNS server implementations
    employ mechanisms to improve their efficiency and cut down on unnecessary name
    resolution requests. One of the most important of these is *caching*.
  id: totrans-705
  prefs: []
  type: TYPE_NORMAL
  zh: 名称服务器所做的大部分基础工作是对名称解析请求做出响应。繁忙的服务器——如根名称服务器、携带顶级域名（TLD）区域信息的那些服务器，以及服务于非常繁忙区域的服务器——必须每秒处理数百甚至数千个名称解析请求。每个请求都需要时间和资源来解析，并且会占用网络带宽来传输数据。因此，DNS
    服务器实现必须采用机制来提高其效率并减少不必要的名称解析请求。其中最重要的机制之一就是 *缓存*。
- en: Name Server Caching
  id: totrans-706
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称服务器缓存
- en: The word *cache* refers to a store, or a place where something is kept. In the
    computer world, the term usually refers to an area of memory set aside for storing
    information that has been recently obtained so it can be used again. In the case
    of DNS, caching is used by DNS name servers to store the results of recent name
    resolution and other requests, so that if the request occurs again, it can be
    satisfied from the cache without requiring another complete run of the name resolution
    process. Due to how most people use computers, a particular request is often followed
    by another request for the same name, so caching can significantly reduce the
    number of requests that result in complete name resolution procedures.
  id: totrans-707
  prefs: []
  type: TYPE_NORMAL
  zh: 单词 *cache* 指的是存储的地方，或者存放某物的场所。在计算机世界中，这个术语通常指的是为存储最近获取的信息而保留的内存区域，以便再次使用。在 DNS
    的情况下，缓存是由 DNS 名称服务器用来存储最近名称解析和其他请求的结果，这样如果请求再次发生，就可以从缓存中满足请求，而不需要再次完整地运行名称解析过程。由于大多数人使用计算机的方式，一个特定的请求通常会被对同一名称的另一个请求所跟随，因此缓存可以显著减少导致完整名称解析过程的请求数量。
- en: An example is the best way to illustrate this. Suppose you are using a host
    on your company's local network. This host is probably configured to use your
    company's DNS name server to handle resolution requests. You type [www.xyzindustries.com](http://www.xyzindustries.com)
    into your web browser, which causes a resolution attempt to be made for that address.
    Most likely, your local DNS server doesn't know that name, so it will follow the
    complete name resolution process (described in [Chapter 56](ch56.html "Chapter 56. DNS
    RESOLUTION CONCEPTS AND RESOLVER OPERATIONS")) to get its address. After doing
    this, your local DNS server will *cache* the name [www.xyzindustries.com](http://www.xyzindustries.com)
    and the address associated with it.
  id: totrans-708
  prefs: []
  type: TYPE_NORMAL
  zh: 举例说明是最好的方式。假设你正在使用公司局域网上的一个主机。这个主机可能被配置为使用公司的 DNS 名称服务器来处理解析请求。你将 [www.xyzindustries.com](http://www.xyzindustries.com)
    输入到你的网络浏览器中，这会导致对该地址进行解析尝试。很可能你的本地 DNS 服务器不知道这个名称，因此它将遵循完整的名称解析过程（在 [第 56 章](ch56.html
    "第 56 章。DNS 解析概念和解析器操作") 中描述）来获取其地址。完成这些后，你的本地 DNS 服务器将 *缓存* 名称 [www.xyzindustries.com](http://www.xyzindustries.com)
    及其相关的地址。
- en: If you click a link for a page at that website, that new page will also probably
    be somewhere at the [www.xyzindustries.com](http://www.xyzindustries.com) site.
    This will result in another DNS resolution request being sent off to your local
    DNS server. However, this time, the local server will not need to perform a resolution.
    It remembers that this name is in its cache and returns the saved address for
    the name immediately. Voilà! You get your answer faster, and unnecessary Internet
    traffic is avoided.
  id: totrans-709
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击该网站页面的链接，新页面可能也位于 [www.xyzindustries.com](http://www.xyzindustries.com)
    网站上。这将导致另一个 DNS 解析请求被发送到你的本地 DNS 服务器。然而，这一次，本地服务器不需要执行解析。它记得这个名称已经在它的缓存中，并立即返回保存的地址。哇！你得到了更快的答案，并且避免了不必要的互联网流量。
- en: Tip
  id: totrans-710
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** *Caching* is an essential efficiency feature that reduces DNS
    message traffic by eliminating unnecessary requests for recently resolved names.
    Whenever a name is resolved, the resulting DNS information is cached so it can
    be used for subsequent requests that occur shortly thereafter.'
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** *缓存* 是一个提高效率的重要特性，通过消除对最近已解析名称的不必要请求来减少 DNS 消息流量。每当解析一个名称时，产生的 DNS
    信息就会被缓存，以便在之后不久发生的后续请求中使用。'
- en: Of course, things aren't entirely this simple. One very important issue that
    comes up with every caching system, including the one used in DNS, is the matter
    of the *freshness* of the cache.
  id: totrans-712
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，事情并不完全这么简单。在包括DNS中使用的缓存系统在内的每个缓存系统中都会出现一个非常重要的问题，那就是缓存的新鲜度问题。
- en: Caching Data Persistence and the Time to Live Interval
  id: totrans-713
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 缓存数据持久性和生存时间间隔
- en: Suppose your local DNS server resolves the name [www.xyzindustries.com](http://www.xyzindustries.com),
    and then caches its address. In this example, where you click a link a few seconds
    after the XYZ Industries home page loads, you aren't likely to be too concerned
    about how fresh the DNS data is. But how about if you shut down your computer
    to go on vacation for two weeks, and then come back to work and type the name
    into your browser again. If your local server still has the name in its cache,
    how do you know the IP address of [www.xyzindustries.com](http://www.xyzindustries.com)
    hasn't changed during that two-week period?
  id: totrans-714
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您的本地DNS服务器解析了名称[www.xyzindustries.com](http://www.xyzindustries.com)，然后缓存了其地址。在这个例子中，如果您在XYZ
    Industries主页加载后几秒钟点击链接，您可能不太关心DNS数据的新鲜程度。但如果您关闭计算机去度假两周，然后回来工作并在浏览器中再次输入该名称，如果您的本地服务器仍然在缓存中保留该名称，您如何知道[www.xyzindustries.com](http://www.xyzindustries.com)的IP地址在那两周期间没有发生变化？
- en: Two different mechanisms are used to address this issue. The first is that when
    data is cached, the caching server also makes a note of the authoritative server
    from which it came. When a resolver (client) asks for a name resolution and the
    address is drawn from the cache, the server marks the answer as *non-authoritative*
    to clearly tell the client that the name came from the cache. The server also
    supplies the name of the authoritative server that originally supplied the data.
  id: totrans-715
  prefs: []
  type: TYPE_NORMAL
  zh: 使用两种不同的机制来解决这个问题。第一种机制是，当数据被缓存时，缓存服务器也会记录下数据来源的授权服务器。当一个解析器（客户端）请求域名解析，并且地址是从缓存中获取的，服务器会将答案标记为*非授权的*，以清楚地告诉客户端该名称来自缓存。服务器还会提供最初提供数据的授权服务器名称。
- en: 'The client then has a choice: It can either use the non-authoritative answer
    or issue a request for a fresh name resolution from the authoritative server.
    This is a trade-off between performance (using the cached data) and currency (asking
    for a fresh resolution each time). Usually, the cached data can be used safely,
    because DNS information doesn''t change very often.'
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端然后有选择权：它可以使用非授权的答案，或者从授权服务器发出请求以获取新的名称解析。这是性能（使用缓存数据）和时效性（每次都请求新的解析）之间的权衡。通常，可以安全地使用缓存数据，因为DNS信息并不经常改变。
- en: The second technique for ensuring that caching data doesn't get too old is a
    procedure for limiting the *persistence* of DNS cached data. Each RR has associated
    with it a time interval, called the *Time to Live (TTL)*. Whenever an RR is read
    from a server, the TTL for the record is also read. Any server caching the record
    is supposed to discard the record after that time interval expires.
  id: totrans-717
  prefs: []
  type: TYPE_NORMAL
  zh: 确保缓存数据不会过时的第二种技术是限制DNS缓存数据的*持久性*的程序。每个RR都与一个时间间隔相关联，称为*生存时间（TTL）*。每当从服务器读取RR时，记录的TTL也会被读取。任何缓存记录的服务器都应该在该时间间隔过期后丢弃该记录。
- en: Each zone also has associated with it a default value for the TTL field to be
    applied to all records in the zone. This allows an administrator to select a TTL
    value for all records in a zone without needing to enter TTL numbers for each
    record individually. At the same time, the administrator can assign an override
    TTL value to any records that need a number that is different from the default.
    This default TTL was originally kept in the special SOA RR for each zone, but
    is now handled using a special directive in the zone's master file.
  id: totrans-718
  prefs: []
  type: TYPE_NORMAL
  zh: 每个区域也与应用于该区域所有记录的TTL字段的默认值相关联。这允许管理员为区域中的所有记录选择一个TTL值，而无需为每个记录单独输入TTL数字。同时，管理员可以为需要不同默认值的任何记录分配一个覆盖TTL值。这个默认TTL最初保存在每个区域的特殊SOA
    RR中，但现在使用区域主文件中的特殊指令来处理。
- en: Note
  id: totrans-719
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*This Time to Live (TTL) field is not related to the one used in Internet Protocol
    (IP) datagrams (see [Chapter 21](ch21.html "Chapter 21. INTERNET PROTOCOL DATAGRAM
    ENCAPSULATION AND FORMATTING")). Obviously, IP and DNS are totally different protocols,
    but more than that, the TTL fields in IP and DNS don''t have the same meaning
    at all*.'
  id: totrans-720
  prefs: []
  type: TYPE_NORMAL
  zh: '*这个生存时间（TTL）字段与在互联网协议（IP）数据报中使用的字段无关（见[第21章](ch21.html "第21章。互联网协议数据报封装和格式化")).
    显然，IP和DNS是完全不同的协议，而且不仅如此，IP和DNS中的TTL字段根本不具有相同的含义*。'
- en: It's worth emphasizing that DNS gives control over caching to the owner of the
    record, not whoever is running the DNS server doing the caching. While it is possible
    for a particular caching server to override the TTL and specify how long data
    will be held in its own cache, DNS is not supposed to work that way. The ability
    to specify a TTL on a record-by-record basis allows the persistence of cache data
    to be tailored to the needs of the individual data elements. Data that changes
    often can be given a small TTL value; infrequently modified records can be given
    a higher TTL. Selecting the TTL value must be done carefully. This is another
    trade-off between performance (which is optimized with higher TTL values, reducing
    the number of queries made for cached data) and freshness of the data (which increases
    as the TTL values are lowered).
  id: totrans-721
  prefs: []
  type: TYPE_NORMAL
  zh: 值得强调的是，DNS将缓存控制权交给了记录的所有者，而不是运行DNS服务器进行缓存的人。虽然特定的缓存服务器可以覆盖TTL并指定数据在其缓存中保留的时间，但DNS不应该这样工作。按记录指定TTL的能力允许根据个别数据元素的需求调整缓存数据的持久性。经常变化的数据可以分配较小的TTL值；不常修改的记录可以分配较高的TTL。选择TTL值必须谨慎。这是性能（通过较高的TTL值优化，减少对缓存数据的查询次数）和数据新鲜度（随着TTL值的降低而增加）之间的另一个权衡。
- en: Tip
  id: totrans-722
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Cached information can become stale over time and result in
    incorrect responses sent to queries. Each RR can have associated with it a time
    interval, called the *Time to Live (TTL)*, that specifies how long the record
    may be held in a cache. The value of this field is controlled by the owner of
    the RR, who can tailor it to the specific needs of each RR type.'
  id: totrans-723
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 缓存信息可能会随着时间的推移而变得过时，并导致向查询发送错误响应。每个RR都可以与一个时间间隔相关联，称为*生存时间（TTL）*，它指定记录可以在缓存中保留多长时间。此字段的值由RR的所有者控制，可以针对每种RR类型的具体需求进行调整。'
- en: Negative Caching
  id: totrans-724
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 负缓存
- en: Classic DNS caching stores only the results of successful name resolutions.
    It is also possible for DNS servers to cache the results of *unsuccessful* name
    resolution attempts; this is called *negative caching*. To extend the example
    we've been using in this section, suppose you mistakenly thought the name of the
    company's website was [www.xyz-industries.com](http://www.xyz-industries.com)
    and typed that into your browser. Your local DNS server would be unable to resolve
    the name and would mark that name as unresolvable in its cache—a negative cache
    entry.
  id: totrans-725
  prefs: []
  type: TYPE_NORMAL
  zh: 经典DNS缓存只存储成功的名称解析结果。DNS服务器也可以缓存名称解析尝试失败的结果；这被称为*负缓存*。为了扩展本节中使用的示例，假设你错误地认为公司网站的名称是[www.xyz-industries.com](http://www.xyz-industries.com)并将其输入到浏览器中。你的本地DNS服务器将无法解析该名称，并将其标记为无法解析的缓存条目——一个负缓存条目。
- en: Suppose you typed the name in incorrectly because someone mistyped it on an
    internal memo. If a colleague later tried the same name, the DNS server would
    say, "I already know this is a bogus name," and not try to resolve it again. Since
    there is no RR for an invalid name, the server itself must decide how long to
    cache this negative information. Negative caching improves performance because
    resolving a name that doesn't exist takes resources, just as resolving an existing
    one does. Note that regular caching is sometimes called *positive caching* to
    contrast it with negative caching.
  id: totrans-726
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你因为有人在内部备忘录中打字错误而错误地输入了名称。如果同事后来尝试了相同的名称，DNS服务器会说：“我已经知道这是一个无效的名称，”并且不会再次尝试解析它。由于没有无效名称的RR，服务器本身必须决定缓存这些负面信息的时间。负缓存可以提高性能，因为解析一个不存在的名称需要资源，就像解析一个现有的名称一样。请注意，常规缓存有时被称为*正缓存*，以区别于负缓存。
- en: The value to be used for negative caching in a zone is now specified by the
    Minimum field in the SOA RR for each zone. As mentioned in the previous section,
    this was formerly used to specify the default TTL for a zone.
  id: totrans-727
  prefs: []
  type: TYPE_NORMAL
  zh: 在区域中用于负缓存的值现在由每个区域的SOA RR中的最小字段指定。如前所述，这以前用于指定区域的默认TTL。
- en: DNS Name Server Load Balancing
  id: totrans-728
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称服务器负载均衡
- en: The Address (A) RR is the most fundamental one in DNS, since it records an actual
    mapping between a domain name and an IP address. Let's consider for a moment one
    of the words in that sentence in more detail. No, I don't mean *address* or *RR*
    or *mapping*. I mean the word *an*!
  id: totrans-729
  prefs: []
  type: TYPE_NORMAL
  zh: 地址记录（A）RR 是 DNS 中最基本的一个，因为它记录了域名与 IP 地址之间的实际映射。让我们暂时详细考虑这个句子中的一个单词。不，我的意思不是
    *address* 或 *RR* 或 *mapping*。我是指单词 *an*！
- en: The Address record mentions only a single address for each domain name. This
    means that each domain name maps to only a single physical hardware device. When
    the number of requests that a particular server or other device needs to handle
    is relatively small, this is not a problem; the function can usually be implemented
    using a single physical hardware device. If the server gets busier, the usual
    solution is to throw more hardware at the problem—get a bigger machine.
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: 地址记录只提及每个域名的一个地址。这意味着每个域名只映射到单个物理硬件设备。当特定服务器或其他设备需要处理的请求数量相对较少时，这并不是问题；通常可以使用单个物理硬件设备来实现该功能。如果服务器变得更繁忙，通常的解决方案是向问题投入更多硬件——获得更大的机器。
- en: However, some hosts on a large internetwork, especially the Internet, feature
    servers that must handle tremendous amounts of traffic from many clients. There
    simply is no single hardware device that can readily handle the traffic of a site
    like [www.cnn.com](http://www.cnn.com) or [www.microsoft.com](http://www.microsoft.com),
    for example, without becoming unwieldy. Sites like these must use a technique
    called *load balancing* to spread requests across multiple hardware servers.
  id: totrans-731
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在大型互联网上的一些主机，特别是互联网，拥有必须处理来自许多客户端的大量流量的服务器。例如，像 [www.cnn.com](http://www.cnn.com)
    或 [www.microsoft.com](http://www.microsoft.com) 这样的网站，根本不存在可以轻松处理这些流量而不变得难以管理的单个硬件设备。这些网站必须使用一种称为
    *负载均衡* 的技术来分散对多个硬件服务器的请求。
- en: Using Multiple Address Records to Spread Out Requests to a Domain
  id: totrans-732
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用多个地址记录来分散对域名的请求
- en: One simple way to do load balancing would be to have multiple machine names.
    For example, CNN could create several different websites called [www1.cnn.com](http://www1.cnn.com),
    [www2.cnn.com](http://www2.cnn.com), and so on, each pointing to a different hardware
    device. DNS certainly supports this type of solution. The problem with this solution
    is that it is cumbersome; it requires users to remember multiple server names.
  id: totrans-733
  prefs: []
  type: TYPE_NORMAL
  zh: 实现负载均衡的一种简单方法是有多个机器名称。例如，CNN 可以创建几个不同的网站，称为 [www1.cnn.com](http://www1.cnn.com)、[www2.cnn.com](http://www2.cnn.com)
    等，每个网站都指向不同的硬件设备。DNS 当然支持这种类型的解决方案。这种解决方案的问题在于它很麻烦；它要求用户记住多个服务器名称。
- en: It would be better if we could balance the load automatically. DNS supports
    this by providing a simple way to implement load balancing. Instead of specifying
    a single Address RR for a name, we can create several such records, thereby associating
    more than one IP address with a particular DNS name. When we do this, each time
    the authoritative name server for the zone in which that name exists resolves
    that name, it sends all the addresses on the list back to the requester. The server
    changes the order of the addresses supplied in the response, choosing the order
    randomly or in a sequential, round-robin fashion. The client will usually use
    the first address in the list returned by the server, so by changing the list,
    the server ensures that requests for that device's name are resolved to multiple
    hardware units.
  id: totrans-734
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们能自动平衡负载那就更好了。DNS 通过提供一种简单的方式来实施负载均衡来支持这一点。而不是为名称指定单个地址记录，我们可以创建多个这样的记录，从而将多个
    IP 地址与特定的 DNS 名称关联起来。当我们这样做时，每次该名称存在的区域的主权名称服务器解析该名称时，它都会将列表上的所有地址发送回请求者。服务器会改变响应中提供的地址的顺序，随机或顺序、循环方式选择顺序。客户端通常会使用服务器返回的列表中的第一个地址，因此通过改变列表，服务器确保对该设备名称的请求被解析到多个硬件单元。
- en: Tip
  id: totrans-735
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Rather than creating a single Address (A) RR for a DNS domain
    name, it is possible to create multiple ones. This associates several IP addresses
    with one name, which can be used to spread a large number of requests for one
    domain name over many physical IP devices. This allows DNS to implement load balancing
    for busy Internet servers.'
  id: totrans-736
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 与为 DNS 域名创建单个地址（A）RR 相比，可以创建多个。这会将多个 IP 地址与一个名称关联起来，可以用来将一个域名的多个请求分散到多个物理
    IP 设备上。这允许 DNS 为繁忙的互联网服务器实现负载均衡。'
- en: As Internet traffic increases, load balancing is becoming more popular. In early
    2003, I saw a survey that indicated approximately 10 percent of Internet names
    at that time used load balancing—a fairly significant number. Most employed either
    two or three addresses, but some used as many as sixty addresses! Incidentally,
    at last check, [www.cnn.com](http://www.cnn.com) was associated with eight different
    IP addresses. (You can check the number of addresses associated with a name using
    the `host` command, as described in [Chapter 88](ch88.html "Chapter 88. TCP/IP
    ADMINISTRATION AND TROUBLESHOOTING UTILITIES AND PROTOCOLS").)
  id: totrans-737
  prefs: []
  type: TYPE_NORMAL
  zh: '随着互联网流量的增加，负载均衡变得越来越流行。在2003年初，我看到一项调查表明，当时大约有10%的互联网名称使用了负载均衡——这是一个相当大的数字。大多数使用了两个或三个地址，但有些使用了多达六十个地址！顺便说一下，在最后一次检查时，[www.cnn.com](http://www.cnn.com)与八个不同的IP地址相关联。（您可以使用描述在[第88章](ch88.html
    "第88章。TCP/IP 管理和故障排除工具与协议")中的`host`命令来检查与名称相关联的地址数量。） '
- en: Using Multiple DNS Servers to Spread Out DNS Requests
  id: totrans-738
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用多个DNS服务器分散DNS请求
- en: The term *DNS load balancing* also has a completely different meaning from what
    I described in the previous section. In the discussion of DNS server roles, I
    talked about how each zone should have at least one slave (secondary) DNS server
    in addition to the master (primary) server. The usually stated main reason for
    this is redundancy, in case something happens to cause the master server to fail.
    However, having a slave server can also allow the load of DNS resolution requests
    to be balanced between the servers. In fact, some busy domains have more than
    two servers specifically for this reason.
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: 术语*DNS负载均衡*与我在上一节中描述的含义完全不同。在讨论DNS服务器角色时，我提到了每个区域除了主（主）服务器外，至少应该有一个从（辅助）DNS服务器。通常认为这样做的主要原因是冗余，以防主服务器出现故障。然而，拥有一个从服务器还可以允许DNS解析请求的负载在服务器之间进行平衡。实际上，一些繁忙的域名正是因为这个原因而拥有超过两个服务器。
- en: Thus, *DNS load balancing* can refer to either using DNS to spread the load
    of requests (such as web page requests) to a device that is named using DNS or
    to spreading the load of DNS requests themselves.
  id: totrans-740
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，*DNS负载均衡*可以指使用DNS将请求（如网页请求）的负载分散到使用DNS命名的设备，或者是指将DNS请求本身的负载进行分散。
- en: DNS Name Server Enhancements
  id: totrans-741
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称服务器增强
- en: The fundamentals of operation of DNS servers, as explained in the preceding
    sections in this chapter, are specified in the main DNS standards, RFC 1034 and
    1035\. These documents are pretty old by computer industry standards; they were
    published in 1987\. To the credit of the designers of DNS, most of what they originally
    put into the DNS protocol is still valid and in use today. The creators of DNS
    knew that it had to be able to scale to a large size, and the system has successfully
    handled the expansion of the Internet to a degree far beyond what anyone could
    have imagined 15 or so years ago.
  id: totrans-742
  prefs: []
  type: TYPE_NORMAL
  zh: DNS服务器操作的基本原理，如本章前面各节所述，已在主要的DNS标准RFC 1034和1035中指定。按照计算机行业的标准，这些文件相当古老；它们是在1987年发布的。DNS的设计者值得赞扬，他们最初在DNS协议中放入的大部分内容至今仍然有效并在使用中。DNS的创造者知道它必须能够扩展到非常大的规模，并且该系统已经成功处理了互联网扩展到远远超出15年前任何人所能想象的程度。
- en: 'As originally defined, DNS requires that DNS information be updated manually
    by editing master files on the master server for a zone. The zone is then copied
    in its entirety to slave servers using the polling/zone-transfer mechanism described
    earlier in this chapter. This method is satisfactory when the internetwork is
    relatively small and changes to a zone are made infrequently. However, in the
    modern Internet, large zones may require nearly constant changes to their RRs.
    Hand-editing and constantly copying master files can be impractical, especially
    when they grow large, and having slave servers get out of date between zone transfers
    may lead to reliability and performance concerns. For these reasons, several enhancements
    to the operation of DNS servers have been proposed over the years. We''ll take
    a closer look at three of them here: DNS Notify, incremental zone transfers, and
    Dynamic DNS.'
  id: totrans-743
  prefs: []
  type: TYPE_NORMAL
  zh: 如最初定义的那样，DNS要求通过编辑主服务器上的主文件来手动更新区域的信息。然后，使用本章前面描述的轮询/区域传输机制，将整个区域复制到从服务器。当互联网相对较小且区域变化不频繁时，这种方法是令人满意的。然而，在现代互联网中，大型区域可能需要几乎持续不断地更改其RR。手动编辑和不断复制主文件可能不切实际，尤其是当它们变得很大时，而从服务器在区域传输之间过时可能会导致可靠性和性能问题。因此，多年来提出了对DNS服务器操作的几个改进。在这里，我们将更详细地探讨其中的三个：DNS
    Notify、增量区域传输和动态DNS。
- en: 'Automating Zone Transfers: DNS Notify'
  id: totrans-744
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自动化区域传输：DNS Notify
- en: 'The first problem that many DNS administrators wanted to tackle was the reliance
    on polling for updating slave name servers. Imagine that you placed an order for
    a new music CD at your favorite online music store, but it was out of stock—backordered.
    Which makes more sense: having you call them every six hours to ask if your CD
    has arrived yet, or having the store simply call you when it shows up?'
  id: totrans-745
  prefs: []
  type: TYPE_NORMAL
  zh: 许多DNS管理员想要解决的第一个问题是依赖轮询来更新从服务器。想象一下，你在你最喜欢的在线音乐商店订购了一张新的音乐CD，但它缺货——已预订。哪种方式更有意义：每六小时给你打电话询问你的CD是否到了，还是商店在CD出现时直接给你打电话？
- en: 'The answer is so obvious that the question seems ridiculous. Yet DNS uses the
    first model: slave name servers must constantly call up their zone masters and
    ask them, "Has anything changed yet?" This both generates unnecessary traffic
    and results in the slave name server being out of date from the time the master
    *does* change until the next poll is performed. Tweaking the Refresh time for
    the zone allows only the choice between more polls or more staleness when changes
    happen; neither is really good.'
  id: totrans-746
  prefs: []
  type: TYPE_NORMAL
  zh: 答案如此明显，以至于问题似乎很荒谬。然而，DNS使用第一种模型：从服务器必须不断调用其区域主服务器并询问他们：“有什么变化吗？”这不仅产生了不必要的流量，而且导致从服务器在主服务器*确实*更改直到下一次轮询执行期间过时。调整区域的刷新时间只允许在变化发生时在更多轮询和更多陈旧性之间做出选择；两者都不是真正的好方法。
- en: To improve this situation, a new technique was developed and formalized in RFC
    1996, published in 1996 (weird coincidence!). This standard, "A Mechanism for
    Prompt Notification of Zone Changes (DNS NOTIFY)," defines a new DNS message type
    called *Notify* and describes a protocol for its use. The Notify message is a
    variation on the standard DNS message type, with some of the fields redefined
    to support this new feature.
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: 为了改善这种情况，一种新的技术被开发并在1996年发布的RFC 1996中正式化（奇怪的巧合！）。这个标准，“一种用于快速通知区域变化的机制（DNS NOTIFY）”，定义了一种新的DNS消息类型，称为*Notify*，并描述了其使用协议。Notify消息是标准DNS消息类型的一种变体，其中一些字段被重新定义以支持这个新特性。
- en: If both the master and slave name servers support this feature, when a modification
    is made to an RR, the master server will automatically send a Notify message to
    its slave server(s), saying, "Your CD has arrived!" er… "The database has changed."
    The slave then acts as if its Refresh timer had just expired. Enabling this feature
    allows the Refresh interval to be dramatically increased, since slave servers
    don't need to constantly poll the master for changes.
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: 如果主服务器和从服务器都支持这个特性，当对一个RR进行修改时，主服务器将自动向其从服务器发送一个Notify消息，说：“你的CD已经到了！”嗯…“数据库已经更改。”然后从服务器就像其刷新计时器刚刚到期一样行动。启用此功能允许刷新间隔显著增加，因为从服务器不需要不断轮询主服务器以获取更改。
- en: Tip
  id: totrans-749
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The optional DNS Notify feature allows a master name server
    to inform slave name servers when changes are made to a zone. This has two advantages:
    It cuts down on unnecessary polling by the slave servers to find out if changes
    have occurred to DNS information, and it also reduces the amount of time that
    slave name servers have out-of-date records.'
  id: totrans-750
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 可选的 DNS Notify 功能允许主名称服务器在区域中更改时通知从属名称服务器。这有两个优点：它减少了从属服务器查找 DNS 信息是否已更改的不必要轮询，并且它还减少了从属名称服务器具有过时记录的时间。'
- en: 'Improving Zone Transfer Efficiency: Incremental Transfers'
  id: totrans-751
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 提高区域传输效率：增量传输
- en: The second issue with regular DNS is the need to transfer the entire zone whenever
    a change to any part of it is made. There are many zones on the Internet that
    have truly enormous master files that change constantly. Consider the master files
    for the .COM zone, for example. Having to copy the entire database to slave name
    servers every time there is a change to even one record is beyond inefficient—it's
    downright insane!
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: 正常 DNS 的第二个问题是，每当对区域任何部分进行更改时，都需要传输整个区域。互联网上有许多区域具有真正巨大的主文件，这些文件不断变化。例如，考虑 .COM
    区域的主文件。每次更改甚至一条记录时都必须将整个数据库复制到从属名称服务器，这效率低下——简直是疯狂！
- en: RFC 1995, "Incremental Zone Transfer in DNS," specifies a new type of zone transfer
    called an *incremental zone transfer*. When this feature is implemented on master
    and slave name servers in a zone, the master server keeps track of the most recent
    changes made to the database. Each time a slave server determines that a change
    has occurred and the slave's database needs to be updated, it sends an IXFR (incremental
    transfer) query to the master, which contains the serial number of the slave's
    current copy of the database. The master then looks to see what RRs have changed
    since that serial number was the current one and sends only the updated RRs to
    the slave server.
  id: totrans-753
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 1995，“DNS 中的增量区域传输”指定了一种新的区域传输类型，称为 *增量区域传输*。当在区域的名称服务器上实现此功能时，主服务器会跟踪对数据库所做的最新更改。每次从属服务器确定已发生更改并且从属服务器的数据库需要更新时，它都会向主服务器发送一个包含从属服务器当前数据库副本序列号的
    IXFR（增量传输）查询。然后主服务器查看自该序列号以来哪些 RR 已更改，并将仅更新的 RR 发送到从属服务器。
- en: To conserve storage, the master server obviously doesn't keep all the changes
    made to its database forever. It will generally track the last few modifications
    to the database, with the serial number associated with each. If the slave sends
    an IXFR request that contains a serial number for which recent change information
    is still on the master server, only the changes are sent in reply. If the request
    has a serial number so old that the master server no longer has information about
    some of the changes since that version of the database, a complete zone transfer
    is performed instead of an incremental one.
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: 为了节省存储空间，主服务器显然不会永远保留对其数据库所做的所有更改。它通常会跟踪数据库的最后几次修改，并关联每个修改的序列号。如果从属服务器发送一个包含序列号的
    IXFR 请求，该序列号对应的主服务器上仍有最近更改的信息，则只发送更改作为回复。如果请求的序列号如此之旧，以至于主服务器不再具有自该数据库版本以来某些更改的信息，则执行完整区域传输而不是增量传输。
- en: Tip
  id: totrans-755
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The DNS *incremental zone transfer* enhancement uses a special
    message type that allows a slave name server to determine what changes have occurred
    since it last synchronized with the master server. By transferring only the changes,
    the amount of time and bandwidth used for zone transfers can be significantly
    reduced.'
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS 的 *增量区域传输* 增强功能使用一种特殊的消息类型，允许从属名称服务器确定自上次与主服务器同步以来发生了哪些变化。通过仅传输更改，可以显著减少区域传输所需的时间和带宽。'
- en: 'Dealing with Dynamic IP Addresses: DNS Update/Dynamic DNS'
  id: totrans-757
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 处理动态 IP 地址：DNS 更新/动态 DNS
- en: The third problem with classic DNS is that it assumes changes are made infrequently
    to zones, so they can be handled by hand-editing master files. Some zones are
    so large that hand-editing of the master files would be nearly continuous. However,
    the problem goes beyond just inconvenience. Regular DNS assumes that the IP address
    for a host is relatively static. Modern networks, however, make use of host technologies
    such as the Dynamic Host Configuration Protocol (DHCP) (described in [Part III-3](pt14.html
    "Part III-3. HOST CONFIGURATION AND TCP/IP HOST CONFIGURATION PROTOCOLS")), to
    assign IP addresses dynamically to devices. When DHCP is used, the IP address
    of each host in a zone could change on a weekly, daily, or even hourly basis!
    Clearly, there would be no hope of keeping up with this rate of change using a
    human being and a text editor.
  id: totrans-758
  prefs: []
  type: TYPE_NORMAL
  zh: 经典DNS的第三个问题是它假设对区域的更改不频繁，因此可以通过手动编辑主文件来处理。有些区域非常大，手动编辑主文件几乎会持续不断。然而，问题不仅仅是不便。常规DNS假设主机的IP地址相对静态。然而，现代网络利用诸如动态主机配置协议（DHCP）等主机技术（在[第三部分-3](pt14.html
    "第三部分-3. 主机配置和TCP/IP主机配置协议")中描述），动态地为设备分配IP地址。当使用DHCP时，一个区域中每个主机的IP地址可能每周、每天甚至每小时都会改变！显然，使用人类和文本编辑器跟上这种变化速度是不可能的。
- en: In April 1997, RFC 2136, "Dynamic Updates in the Domain Name System (DNS UPDATE),"
    was published. This standard describes an enhancement to basic DNS operation that
    allows DNS information to be dynamically updated. When this feature is implemented,
    the resulting system is sometimes called *Dynamic DNS (DDNS)*.
  id: totrans-759
  prefs: []
  type: TYPE_NORMAL
  zh: 1997年4月，RFC 2136，“域名系统（DNS）中的动态更新（DNS UPDATE）”被发布。该标准描述了基本DNS操作的一个增强，允许DNS信息动态更新。当此功能实现时，所得到的系统有时被称为*动态DNS（DDNS）*。
- en: 'RFC 2136 defines a new DNS message type: the Update message. Like the Notify
    message, the Update message is designed around the structure of regular DNS messages,
    but with changes to the meanings of several of the fields. As the name implies,
    Update messages allow RRs to be selectively changed within the master name server
    for a zone. Using a special message syntax, it is possible to add, delete, or
    modify RRs.'
  id: totrans-760
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 2136定义了一种新的DNS消息类型：更新消息。像通知消息一样，更新消息是围绕常规DNS消息的结构设计的，但对几个字段的含义进行了更改。正如其名所示，更新消息允许在区域的权威名称服务器中选择性地更改RR。使用特殊消息语法，可以添加、删除或修改RR。
- en: Obviously, care must be taken in how this feature is used, since we don't want
    just anyone to be making changes willy-nilly to our master records. The standard
    specifies a detailed process for verifying Update messages, as well as security
    procedures that must be put into place so the server accepts such messages from
    only certain individuals or systems.
  id: totrans-761
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，在使用此功能时必须谨慎，因为我们不希望任何人都可以随意更改我们的主记录。标准指定了一个详细的过程来验证更新消息，以及必须实施的安全程序，以确保服务器只从某些个人或系统接受此类消息。
- en: 'Dynamic DNS allows administrators to make changes much more easily, but its
    true power becomes evident only when it is used to integrate DNS with other address-related
    protocols and services. Dynamic DNS solves a major weakness with traditional DNS:
    the inability to easily associate a host name with an address assigned using a
    protocol like DHCP.'
  id: totrans-762
  prefs: []
  type: TYPE_NORMAL
  zh: 动态DNS允许管理员更容易地进行更改，但它的真正力量只有在将其用于将DNS与其他地址相关协议和服务集成时才会显现。动态DNS解决了传统DNS的一个主要弱点：无法轻松地将主机名与使用类似DHCP协议分配的地址关联起来。
- en: With DNS servers supporting this feature, DNS and DHCP can be integrated, allowing
    automatic address and name assignment, and automatic update of DNS records when
    a host's IP address changes. One common application of Dynamic DNS is to allow
    the use of DNS names by those who access the Internet using a service provider
    that dynamically assigns IP addresses. Dynamic DNS is similarly used by certain
    directory services, notably Microsoft's Active Directory, to associate addresses
    with device names.
  id: totrans-763
  prefs: []
  type: TYPE_NORMAL
  zh: 当DNS服务器支持此功能时，DNS和DHCP可以集成，允许自动地址和名称分配，并在主机的IP地址更改时自动更新DNS记录。动态DNS的一个常见应用是允许那些使用动态分配IP地址的服务提供商接入互联网的人使用DNS名称。动态DNS也被某些目录服务使用，特别是微软的Active
    Directory，以将地址与设备名称关联起来。
- en: Tip
  id: totrans-764
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**KEY CONCEPT** An enhancement to DNS, commonly called *Dynamic DNS (DDNS)*,
    allows DNS information in a server''s database to be updated automatically, rather
    than always requiring hand-editing of master files. This can not only save time
    and energy on the part of administrators, but it also allows DNS to better handle
    dynamic address assignment, such as the type performed by host configuration protocols
    like DHCP.'
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 域名系统的一个增强功能，通常称为*动态DNS（DDNS）*，允许服务器数据库中的DNS信息自动更新，而不是总是需要手动编辑主文件。这不仅可以为管理员节省时间和精力，而且还能使DNS更好地处理动态地址分配，例如DHCP等主机配置协议所执行的类型。'
- en: Chapter 56. DNS RESOLUTION CONCEPTS AND RESOLVER OPERATIONS
  id: totrans-766
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第56章。DNS解析概念和解析器操作
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-767
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: 'In the preceding three chapters, I have described the Domain Name System (DNS)
    name space, authorities, registration mechanism, and name servers. These elements
    can all be considered part of the infrastructure of DNS; they are the parts of
    the system that must be established first to enable it to be used. Once we have
    these components in place, we can actually get down to the business at hand: name
    resolution. This is accomplished using a specific set of procedures carried out
    by DNS clients called *resolvers*.'
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: 在前三个章节中，我描述了域名系统（DNS）的命名空间、授权、注册机制和名称服务器。所有这些元素都可以被认为是DNS基础设施的一部分；它们是系统必须首先建立的部分，以便能够使用。一旦我们有了这些组件，我们就可以真正着手处理手头的工作：名称解析。这是通过DNS客户端执行的一系列特定程序来完成的，这些程序被称为*解析器*。
- en: 'In this chapter, I describe DNS name resolvers and the process of name resolution
    itself. I begin with an overview of the functions performed by DNS resolvers and
    how they work in general terms. I then describe the two fundamental methods of
    name resolution used in DNS: iterative and recursive resolution. I discuss the
    way that resolvers improve efficiency through local resolution and caching. I
    describe the steps in the actual name resolution algorithm. I then cover two special
    cases of name resolution: reverse name resolution using the special IN-ADDR.ARPA
    domain, and the way that DNS provides mail support using Mail Exchange resource
    records.'
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我描述了DNS名称解析器和名称解析的过程。我首先概述了DNS解析器执行的功能以及它们在一般意义上的工作方式。然后，我描述了DNS中使用的两种基本名称解析方法：迭代解析和递归解析。我讨论了解析器如何通过本地解析和缓存来提高效率。我描述了实际名称解析算法的步骤。然后，我涵盖了名称解析的两个特殊情况：使用特殊IN-ADDR.ARPA域的逆向名称解析，以及DNS如何使用邮件交换资源记录提供邮件支持。
- en: Tip
  id: totrans-770
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**RELATED INFORMATION** *The information in this section complements that in
    the previous chapter on DNS name servers. I assume in the topics here that you
    have at least basic familiarity with DNS servers*.'
  id: totrans-771
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关信息** *本节的信息补充了上一章关于DNS名称服务器的信息。在此，我假设你对DNS服务器至少有基本的了解*。'
- en: DNS Resolver Functions and General Operation
  id: totrans-772
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS解析器功能和一般操作
- en: Name servers are arguably the most important part of the DNS system as a whole.
    After all, they store all the data on the system and actually provide the addresses
    we need when names are given to them. Without these servers, there would be no
    DNS at all. Of course, what use is a server if nobody is asking for service? The
    clients in the system, called *resolvers*, are also important, because they initiate
    the process of name resolution. Resolvers are where the rubber meets the road,
    so to speak.
  id: totrans-773
  prefs: []
  type: TYPE_NORMAL
  zh: 名称服务器可以说是DNS系统整体中最重要的部分。毕竟，它们存储了系统上的所有数据，并在名称被提供时实际上提供了我们需要的地址。没有这些服务器，DNS将不复存在。当然，如果没有人请求服务，服务器有什么用呢？系统中的客户端，称为*解析器*，也很重要，因为它们启动了名称解析的过程。可以说，解析器是“接触地面”的地方。
- en: The operation of DNS resolvers is explained in the two main DNS standards. RFC
    1034 describes the functions performed by resolvers and how they work in general
    terms. This includes a discussion of the algorithm used to conduct name resolution.
    RFC 1035 deals more with the implementation details of resolvers and the fine
    points of how they do their jobs. Several subsequent standards have modified these
    base standards, changing some of the ways that resolvers work in different ways.
  id: totrans-774
  prefs: []
  type: TYPE_NORMAL
  zh: DNS解析器的操作在两个主要的DNS标准中进行了说明。RFC 1034描述了解析器执行的功能以及它们在一般意义上的工作方式，包括讨论用于执行名称解析的算法。RFC
    1035更多地涉及解析器的实现细节以及它们如何完成工作的细微之处。几个后续标准对这些基本标准进行了修改，以不同的方式改变了解析器的工作方式。
- en: Name Resolution Services
  id: totrans-775
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称解析服务
- en: 'Just as the main job of a DNS server is to store DNS name data and serve it
    when it receives requests, the main job of a DNS resolver is to, well, resolve.
    While most people think of name resolution as only the process of transforming
    a DNS name into an IP address, this is just one of several types of resolution
    services performed by DNS. The following are a few of the most typical types of
    DNS resolution:'
  id: totrans-776
  prefs: []
  type: TYPE_NORMAL
  zh: 就像DNS服务器的主要工作是存储DNS名称数据并在收到请求时提供服务一样，DNS解析器的主要工作就是解析。虽然大多数人认为名称解析仅仅是将DNS名称转换为IP地址的过程，但这只是DNS执行的多种解析服务类型之一。以下是一些最常见的DNS解析类型：
- en: '**Standard Name Resolution** Taking a DNS name as input and determining its
    corresponding IP address.'
  id: totrans-777
  prefs: []
  type: TYPE_NORMAL
  zh: '**标准名称解析** 以DNS名称作为输入，并确定其对应的IP地址。'
- en: '**Reverse Name Resolution** Taking an IP address and determining what name
    is associated with it.'
  id: totrans-778
  prefs: []
  type: TYPE_NORMAL
  zh: '**反向名称解析** 以IP地址作为输入，并确定与之关联的名称。'
- en: '**Electronic Mail Resolution** Determining where to send electronic mail (email)
    messages based on the email address used in a message.'
  id: totrans-779
  prefs: []
  type: TYPE_NORMAL
  zh: '**电子邮件解析** 根据消息中使用的电子邮件地址确定发送电子邮件（email）消息的位置。'
- en: Functions Performed by Name Resolvers
  id: totrans-780
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称解析器执行的功能
- en: 'There are other types of resolution activities as well, though again, most
    name resolution requests are of the standard variety, making it the primary focus
    in our discussion. To accomplish this task, name resolvers perform a number of
    related functions:'
  id: totrans-781
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他类型的解析活动，尽管再次强调，大多数名称解析请求都是标准类型的，这使得它成为我们讨论的主要焦点。为了完成这项任务，名称解析器执行一系列相关功能：
- en: '**Providing the User Interface** Normal name resolution usually doesn''t involve
    explicitly running a piece of resolver software. In your web browser, you don''t
    have to say, "Please find the IP address for [www.xyzindustries.com](http://www.xyzindustries.com),"
    and then say, "Please connect to this IP address for XYZ Industries." You just
    type [www.xyzindustries.com](http://www.xyzindustries.com), and the name resolution
    happens. There is no magic involved. The resolver is just called *implicitly*
    instead of explicitly. The web browser recognizes that a name has been entered
    instead of an IP address and feeds it to the resolver, saying, "I need you to
    resolve this name, please." (Hey, it never hurts to be polite.) The resolver takes
    care of resolution and provides the IP address to the web browser, which connects
    to the site. Thus, the resolver is the interface between the user (both the human
    user and the software user, the browser) and the DNS system.'
  id: totrans-782
  prefs: []
  type: TYPE_NORMAL
  zh: '**提供用户界面** 正常的名称解析通常不需要显式运行解析器软件。在你的网页浏览器中，你不必说，“请找到[www.xyzindustries.com](http://www.xyzindustries.com)的IP地址，”然后说，“请连接到这个IP地址以访问XYZ
    Industries。”你只需输入[www.xyzindustries.com](http://www.xyzindustries.com)，名称解析就会发生。这里没有魔法。解析器只是被隐式地调用，而不是显式地调用。网页浏览器识别到输入的是名称而不是IP地址，并将其传递给解析器，说，“我需要你解析这个名称，请。”（嘿，礼貌一点总是好的。）解析器负责解析并提供IP地址给网页浏览器，浏览器连接到该网站。因此，解析器是用户（无论是人类用户还是软件用户，即浏览器）和DNS系统之间的接口。'
- en: '**Forming and Sending Queries** Given a name to resolve, the DNS resolver must
    create an appropriate query using the DNS messaging system, determine what type
    of resolution to perform, and send the query to the appropriate name server.'
  id: totrans-783
  prefs: []
  type: TYPE_NORMAL
  zh: '**形成和发送查询** 给定一个要解析的名称，DNS解析器必须使用DNS消息系统创建一个适当的查询，确定要执行哪种解析类型，并将查询发送到相应的名称服务器。'
- en: '**Processing Responses** The resolver must accept back responses from the DNS
    server to which it sent its query and decide what to do with the information within
    the reply. As you''ll see, it may be necessary for more than one server to be
    contacted for a particular name resolution.'
  id: totrans-784
  prefs: []
  type: TYPE_NORMAL
  zh: '**处理响应** 解析器必须接收来自其发送查询的DNS服务器的响应，并决定如何处理回复中的信息。正如你将看到的，可能需要联系多个服务器才能完成特定的名称解析。'
- en: Tip
  id: totrans-785
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The primary clients in DNS are software modules called DNS
    *name resolvers*. They are responsible for accepting names from client software,
    generating resolution requests to DNS servers, and processing and returning responses.'
  id: totrans-786
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS中的主要客户端是称为DNS *名称解析器*的软件模块。它们负责从客户端软件接收名称，向DNS服务器生成解析请求，并处理和返回响应。'
- en: These tasks seem fairly simple, and they are in some ways, but implementation
    can become rather complicated. The resolver may need to juggle several outstanding
    name resolutions simultaneously. It must keep track of the different requests,
    queries, and responses and make sure everything is kept straight.
  id: totrans-787
  prefs: []
  type: TYPE_NORMAL
  zh: 这些任务看起来相当简单，在某些方面确实如此，但实施起来可能会相当复杂。解析器可能需要同时处理多个未完成的名称解析。它必须跟踪不同的请求、查询和响应，并确保一切保持清晰。
- en: Name resolvers don't need to perform nearly as many administrative jobs as name
    servers do; clients are usually simpler than servers in this regard. One important
    support function that many name resolvers do perform, however, is caching. Like
    name servers, name resolvers can cache the results of the name resolutions they
    perform to save time if the same resolution is required again. (Not all resolvers
    perform caching, however.)
  id: totrans-788
  prefs: []
  type: TYPE_NORMAL
  zh: 名称解析器不需要执行像名称服务器那样多的管理任务；在这一点上，客户端通常比服务器简单。然而，许多名称解析器执行的一个重要支持功能是缓存。像名称服务器一样，名称解析器可以缓存它们执行的名称解析结果，以节省时间，如果需要再次进行相同的解析。但是，并非所有解析器都执行缓存。
- en: Even though resolvers are the DNS components that are most associated with name
    resolution, name servers can also act as clients in certain types of name resolution.
    In fact, it is possible to set up a network so that the resolvers on each of the
    client machines do nothing more than hand resolution requests to a local DNS server
    and let the server take care of it. In this case, the client resolver becomes
    little more than a shell, sometimes called a *stub resolver*. This has the advantage
    of centralizing name resolution for the network, but a potential disadvantage
    of performance reduction.
  id: totrans-789
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管解析器是与名称解析最相关的DNS组件，但名称服务器也可以在某些类型的名称解析中充当客户端。实际上，可以设置一个网络，使得每个客户端机器上的解析器除了将解析请求提交给本地DNS服务器外，别无他事。在这种情况下，客户端解析器几乎只是一个外壳，有时被称为*stub解析器*。这有利于集中网络中的名称解析，但可能存在性能降低的潜在缺点。
- en: 'DNS Name Resolution Techniques: Iterative and Recursive Resolution'
  id: totrans-790
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称解析技术：迭代和递归解析
- en: 'Conventional name resolution transforms a DNS name into an IP address. At the
    highest level, this process can be considered to have two phases. In the first
    phase, we locate a DNS name server that has the information we need: the address
    that goes with a particular name. In the second phase, we send that server a request
    containing the name we want to resolve, and it sends back the address required.'
  id: totrans-791
  prefs: []
  type: TYPE_NORMAL
  zh: 传统名称解析将DNS名称转换为IP地址。在最高层次上，这个过程可以被认为有两个阶段。在第一阶段，我们找到拥有所需信息的DNS名称服务器：与特定名称相对应的地址。在第二阶段，我们向该服务器发送包含我们想要解析的名称的请求，然后它返回所需的地址。
- en: Somewhat ironically, the second phase (the actual mapping of the name into an
    address) is fairly simple. It is the first phase—finding the right server—that
    is potentially difficult and represents most of the work in DNS name resolution.
    While perhaps surprising, this is a predictable result of how DNS is structured.
    Name information in DNS is not centralized, but rather distributed throughout
    a hierarchy of servers, each of which is responsible for one zone in the DNS name
    space. This means we must follow a special sequence of steps to find the server
    that has the information we need.
  id: totrans-792
  prefs: []
  type: TYPE_NORMAL
  zh: 有点讽刺的是，第二阶段（将名称映射到地址的实际过程）相当简单。第一阶段——找到正确的服务器——可能是困难的，并且代表了DNS名称解析中的大部分工作。虽然这可能令人惊讶，但这却是DNS结构的一个可预测的结果。DNS中的名称信息不是集中的，而是分布在整个服务器层次结构中，每个服务器负责DNS名称空间中的一个区域。这意味着我们必须遵循一系列特殊的步骤来找到拥有所需信息的服务器。
- en: The formal process of name resolution parallels the treelike hierarchy of the
    DNS name space, authorities, and servers. Resolution of a particular DNS name
    starts with the most general part of the name and proceeds to the most specific
    part. Naturally, the most general part of every name is the *root* of the DNS
    tree, represented in a name as a trailing dot (.), sometimes omitted. The next
    most specific part is the top-level domain (TLD), then the second-level domain,
    and so forth. The DNS name servers are linked in that the DNS server at one level
    knows the name of the servers that are responsible for subdomains in zones below
    it at the next level.
  id: totrans-793
  prefs: []
  type: TYPE_NORMAL
  zh: 域名解析的正式过程与DNS名称空间、权威机构和服务器类似树状层次结构。特定DNS名称的解析从名称的最一般部分开始，逐步到最具体部分。自然地，每个名称的最一般部分是DNS树的*根*，在名称中以尾随点（.）表示，有时省略。下一个最具体的部分是顶级域名（TLD），然后是二级域名，依此类推。DNS名称服务器之间是相互连接的，即某一层的DNS服务器知道下一层负责子域的服务器的名称。
- en: 'Suppose we start with C.B.A. as the fully qualified domain name (FQDN). Formally,
    every name resolution begins with the root of the tree—this is why the root name
    servers are so important. It''s possible that the root name servers are authoritative
    for this name, but this is probably not the case; that''s not what the root name
    servers are usually used for. What the root name server does know is the name
    of the server responsible for the TLD: A.. The name server for A. may have the
    information to resolve C.B.A., but it''s still fairly high level, so C.B.A. is
    probably not directly within its zone. In that case, it will not know the address
    we seek, but it will know the name of the server responsible for B.A.. In turn,
    that name server may be authoritative for C.B.A., or it may just know the address
    of the server for C.B.A., which will have the information we need. As you can
    see, it is very possible that several different servers may be needed in a name
    resolution.'
  id: totrans-794
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们以C.B.A.作为完全限定域名（FQDN）。正式来说，每次名称解析都从树的根开始——这就是为什么根名称服务器如此重要的原因。根名称服务器可能对这个名称有权威性，但这可能不是情况；这不是根名称服务器通常被用于的目的。根名称服务器知道的是负责TLD的服务器名称：A..
    A.的名称服务器可能拥有解析C.B.A.所需的信息，但它仍然处于较高层次，所以C.B.A.可能不在其区域内。在这种情况下，它将不知道我们寻求的地址，但它将知道负责B.A.的服务器名称。反过来，那个名称服务器可能对C.B.A.有权威性，或者它可能只知道C.B.A.服务器的地址，该服务器将拥有我们所需的信息。正如你所看到的，在名称解析中可能需要几个不同的服务器。
- en: Tip
  id: totrans-795
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Since DNS name information is stored as a distributed database
    spread across many servers, name resolution cannot usually be performed using
    a single request/response communication. It is first necessary to find the server
    that has the information that the resolver requires. This usually requires a sequence
    of message exchanges, starting from a root name server and proceeding down to
    the specific server containing the resource records (RRs) that the client requires.'
  id: totrans-796
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 由于DNS名称信息存储为分布式的数据库，分布在许多服务器上，因此通常不能使用单个请求/响应通信来执行名称解析。首先需要找到拥有解析器所需信息的服务器。这通常需要一系列的消息交换，从根名称服务器开始，逐步向下到包含客户端所需资源记录（RRs）的特定服务器。'
- en: The DNS standards actually define two distinct ways of following this hierarchy
    of servers to discover the correct one. They both eventually lead to the right
    device, but they differ in how they assign responsibility for resolution when
    it requires multiple steps. The two techniques are *iterative resolution* and
    *recursive resolution*.
  id: totrans-797
  prefs: []
  type: TYPE_NORMAL
  zh: DNS标准实际上定义了两种不同的方法来遵循这个服务器层次结构以发现正确的一个。它们最终都会到达正确的设备，但在需要多个步骤进行解析时，它们在分配解析责任的方式上有所不同。这两种技术是*迭代解析*和*递归解析*。
- en: Iterative Resolution
  id: totrans-798
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 迭代解析
- en: When a client sends an iterative request to a name server, the server responds
    with either the answer to the request (for a regular resolution, the IP address
    we want) *or* the name of another server that has the information or is closer
    to it. The original client must then *iterate* by sending a new request to this
    referred server, which again may either answer it or provide another server name.
    The process continues until the correct server is found. The iterative resolution
    method is illustrated in [Figure 56-1](ch56s02.html#iterative_dns_name_resolution_in_this_ex
    "Figure 56-1. Iterative DNS name resolution In this example, the client is performing
    a name resolution for C.B.A. using strictly iterative resolution. It is thus responsible
    for forming all DNS requests and processing all replies. It starts by sending
    a request to the root name server for this mythical hierarchy. That server doesn't
    have the address of C.B.A., so it instead returns the address of the name server
    for A. The client then sends its query to that name server, which points the client
    to the server for B.A. That name server refers the client to the name server that
    actually has the address for C.B.A., which returns it to the client. Contrast
    this to Figure 56-2.").
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: 当客户端向域名服务器发送迭代请求时，服务器会以以下两种方式之一响应：*或*提供请求的答案（对于常规解析，是我们想要的IP地址）或者提供另一个拥有信息或更接近该信息的服务器名称。原始客户端随后必须通过向该引用服务器发送新的请求来进行*迭代*，该服务器再次可能回答它或提供另一个服务器名称。这个过程会一直持续，直到找到正确的服务器。迭代解析方法在[图56-1](ch56s02.html#iterative_dns_name_resolution_in_this_ex
    "图56-1. 迭代DNS名称解析 在本例中，客户端正在使用严格迭代解析对C.B.A.进行名称解析。因此，它负责形成所有DNS请求并处理所有回复。它首先向这个神话般的根域名服务器发送请求。该服务器没有C.B.A.的地址，因此它返回了A域名服务器的地址。然后客户端向该域名服务器发送查询，该域名服务器将客户端指向B.A.的服务器。那个域名服务器将客户端引荐给实际上拥有C.B.A.地址的域名服务器，该服务器将其返回给客户端。与此相对比的是图56-2。")中说明。
- en: '![Iterative DNS name resolution In this example, the client is performing a
    name resolution for C.B.A. using strictly iterative resolution. It is thus responsible
    for forming all DNS requests and processing all replies. It starts by sending
    a request to the root name server for this mythical hierarchy. That server doesn''t
    have the address of C.B.A., so it instead returns the address of the name server
    for A. The client then sends its query to that name server, which points the client
    to the server for B.A. That name server refers the client to the name server that
    actually has the address for C.B.A., which returns it to the client. Contrast
    this to .](httpatomoreillycomsourcenostarchimages288171.png.jpg)'
  id: totrans-800
  prefs: []
  type: TYPE_IMG
  zh: '![迭代DNS名称解析 在本例中，客户端正在使用严格迭代解析对C.B.A.进行名称解析。因此，它负责形成所有DNS请求并处理所有回复。它首先向这个神话般的根域名服务器发送请求。该服务器没有C.B.A.的地址，因此它返回了A域名服务器的地址。然后客户端向该域名服务器发送查询，该域名服务器将客户端指向B.A.的服务器。那个域名服务器将客户端引荐给实际上拥有C.B.A.地址的域名服务器，该服务器将其返回给客户端。与此相对比的是。](httpatomoreillycomsourcenostarchimages288171.png.jpg)'
- en: Figure 56-1. Iterative DNS name resolution In this example, the client is performing
    a name resolution for C.B.A. using strictly iterative resolution. It is thus responsible
    for forming all DNS requests and processing all replies. It starts by sending
    a request to the root name server for this mythical hierarchy. That server doesn't
    have the address of C.B.A., so it instead returns the address of the name server
    for A. The client then sends its query to that name server, which points the client
    to the server for B.A. That name server refers the client to the name server that
    actually has the address for C.B.A., which returns it to the client. Contrast
    this to [Figure 56-2](ch56s02.html#recursive_dns_name_resolution_this_is_th "Figure 56-2. Recursive
    DNS name resolution This is the same theoretical DNS resolution shown in Figure 56-1,
    but this time, the client asks for the name servers to perform recursive resolution,
    and they agree to do so. As in the iterative case, the client sends its initial
    request to the root name server. That server doesn't have the address of C.B.A.,
    but instead of merely returning to the client the address of the name server for
    A., it sends a request to that server itself. That name server sends a request
    to the server for B.A., which sends a request to the server for C.B.A.. The address
    of C.B.A. is then carried back up the chain of requests, from the server of C.B.A.
    to that of B.A., then A., then the root, and then finally, back to the client.").
  id: totrans-801
  prefs: []
  type: TYPE_NORMAL
  zh: 图56-1. 迭代DNS名称解析在这个例子中，客户端正在使用严格迭代解析对C.B.A.进行名称解析。因此，它负责形成所有DNS请求并处理所有回复。它首先向这个神话般的根域名服务器发送请求。该服务器没有C.B.A.的地址，因此它不是仅仅将A.名称服务器的地址返回给客户端，而是向该服务器本身发送请求。该名称服务器然后将客户端指向B.A.的服务器。该名称服务器将客户端引荐给实际拥有C.B.A.地址的名称服务器，该服务器将其返回给客户端。这与[图56-2](ch56s02.html#recursive_dns_name_resolution_this_is_th
    "图56-2. 递归DNS名称解析这是与图56-1相同的理论DNS解析，但这次客户端请求名称服务器执行递归解析，并且它们同意这样做。与迭代情况一样，客户端将其初始请求发送到根域名服务器。该服务器没有C.B.A.的地址，但它不是仅仅将A.名称服务器的地址返回给客户端，而是向该服务器本身发送请求。该名称服务器向B.A.的服务器发送请求，该服务器再向C.B.A.的服务器发送请求。然后，C.B.A.的地址沿着请求链路返回，从C.B.A.的服务器到B.A.的服务器，再到A.，然后是根服务器，最后返回到客户端。"）形成对比。
- en: Recursive Resolution
  id: totrans-802
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 递归解析
- en: When a client sends a recursive request to a name server, the server responds
    with the answer if it has the information sought. If it doesn't, the server takes
    responsibility for finding the answer by becoming a client on behalf of the original
    client and sending new requests to other servers. The original client sends only
    one request and eventually gets the information it wants (or an error message
    if it is not available). This technique is shown in [Figure 56-2](ch56s02.html#recursive_dns_name_resolution_this_is_th
    "Figure 56-2. Recursive DNS name resolution This is the same theoretical DNS resolution
    shown in Figure 56-1, but this time, the client asks for the name servers to perform
    recursive resolution, and they agree to do so. As in the iterative case, the client
    sends its initial request to the root name server. That server doesn't have the
    address of C.B.A., but instead of merely returning to the client the address of
    the name server for A., it sends a request to that server itself. That name server
    sends a request to the server for B.A., which sends a request to the server for
    C.B.A.. The address of C.B.A. is then carried back up the chain of requests, from
    the server of C.B.A. to that of B.A., then A., then the root, and then finally,
    back to the client.").
  id: totrans-803
  prefs: []
  type: TYPE_NORMAL
  zh: 当客户端向域名服务器发送递归请求时，如果服务器拥有所需信息，它会给出答案。如果没有，服务器会承担责任，通过代表原始客户端成为客户端并向其他服务器发送新请求来寻找答案。原始客户端只发送一个请求，最终获得所需信息（或者如果不可用，则收到错误消息）。这种技术在[图56-2](ch56s02.html#recursive_dns_name_resolution_this_is_th
    "图56-2. 递归DNS名称解析这是与图56-1相同的理论DNS解析，但这次客户端请求名称服务器执行递归解析，并且它们同意这样做。与迭代情况一样，客户端将其初始请求发送到根域名服务器。该服务器没有C.B.A.的地址，但它不是仅仅将A.名称服务器的地址返回给客户端，而是向该服务器本身发送请求。该名称服务器向B.A.的服务器发送请求，该服务器再向C.B.A.的服务器发送请求。然后，C.B.A.的地址沿着请求链路返回，从C.B.A.的服务器到B.A.的服务器，再到A.，然后是根服务器，最后返回到客户端。"中展示）。
- en: Contrasting Iterative and Recursive Resolution
  id: totrans-804
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对比迭代和递归解析
- en: To help explain the difference between iterative and recursive resolution, let's
    take a side trip to a real-world case. Suppose you are trying to find the phone
    number of your old friend Carol, with whom you haven't spoken in years. You call
    your friend Joe. He doesn't have Carol's number, but he gives you John's number,
    suggesting you call him. So you call John. He doesn't have the information, but
    he knows the number of Carol's best friend, Debbie, and gives that to you. You
    call Debbie, and she gives you Carol's information. This is an example of an iterative
    process.
  id: totrans-805
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助解释迭代和递归解析之间的区别，让我们通过一个现实世界的案例进行一次侧游。假设你试图找到多年未联系的老朋友Carol的电话号码。你给朋友Joe打电话。他没
    Carol 的电话号码，但他给你提供了 John 的电话号码，建议你给他打电话。于是你给 John 打电话。他没有这个信息，但他知道 Carol 最好的朋友
    Debbie 的电话号码，并把它告诉你。你给 Debbie 打电话，她给你提供了 Carol 的信息。这是一个迭代过程的例子。
- en: '![Recursive DNS name resolution This is the same theoretical DNS resolution
    shown in , but this time, the client asks for the name servers to perform recursive
    resolution, and they agree to do so. As in the iterative case, the client sends
    its initial request to the root name server. That server doesn''t have the address
    of C.B.A., but instead of merely returning to the client the address of the name
    server for A., it sends a request to that server itself. That name server sends
    a request to the server for B.A., which sends a request to the server for C.B.A..
    The address of C.B.A. is then carried back up the chain of requests, from the
    server of C.B.A. to that of B.A., then A., then the root, and then finally, back
    to the client.](httpatomoreillycomsourcenostarchimages288173.png.jpg)'
  id: totrans-806
  prefs: []
  type: TYPE_IMG
  zh: '![递归 DNS 名称解析 这是与图 56-1 中显示的理论 DNS 解析相同，但这次，客户端请求名称服务器执行递归解析，并且它们同意这样做。与迭代情况一样，客户端将其初始请求发送到根名称服务器。该服务器没有
    C.B.A. 的地址，但它没有仅仅返回给客户端 A 名称服务器的地址，而是向该服务器本身发送了一个请求。该名称服务器向 B.A. 的服务器发送请求，该服务器再向
    C.B.A. 的服务器发送请求。C.B.A. 的地址随后沿着请求链向上传递，从 C.B.A. 的服务器到 B.A. 的服务器，然后是 A.，然后是根，最后回到客户端。](httpatomoreillycomsourcenostarchimages288173.png.jpg)'
- en: Figure 56-2. Recursive DNS name resolution This is the same theoretical DNS
    resolution shown in [Figure 56-1](ch56s02.html#iterative_dns_name_resolution_in_this_ex
    "Figure 56-1. Iterative DNS name resolution In this example, the client is performing
    a name resolution for C.B.A. using strictly iterative resolution. It is thus responsible
    for forming all DNS requests and processing all replies. It starts by sending
    a request to the root name server for this mythical hierarchy. That server doesn't
    have the address of C.B.A., so it instead returns the address of the name server
    for A. The client then sends its query to that name server, which points the client
    to the server for B.A. That name server refers the client to the name server that
    actually has the address for C.B.A., which returns it to the client. Contrast
    this to Figure 56-2."), but this time, the client asks for the name servers to
    perform recursive resolution, and they agree to do so. As in the iterative case,
    the client sends its initial request to the root name server. That server doesn't
    have the address of C.B.A., but instead of merely returning to the client the
    address of the name server for A., it sends a request to that server itself. That
    name server sends a request to the server for B.A., which sends a request to the
    server for C.B.A.. The address of C.B.A. is then carried back up the chain of
    requests, from the server of C.B.A. to that of B.A., then A., then the root, and
    then finally, back to the client.
  id: totrans-807
  prefs: []
  type: TYPE_NORMAL
  zh: 图 56-2. 递归 DNS 名称解析 这与图 56-1 中显示的理论 DNS 解析相同（[图 56-1](ch56s02.html#iterative_dns_name_resolution_in_this_ex
    "图 56-1. 迭代 DNS 名称解析 在这个例子中，客户端正在使用严格的迭代解析对 C.B.A. 进行名称解析。因此，它负责形成所有 DNS 请求并处理所有回复。它首先向这个神话般等级结构的根名称服务器发送请求。该服务器没有
    C.B.A. 的地址，因此它没有仅仅返回给客户端 A 名称服务器的地址，而是向该服务器本身发送了一个请求。该名称服务器向 B.A. 的服务器发送请求，该服务器再向
    C.B.A. 的服务器发送请求。C.B.A. 的地址随后沿着请求链向上传递，从 C.B.A. 的服务器到 B.A. 的服务器，然后是 A.，然后是根，最后回到客户端。"),
    但这次，客户端请求名称服务器执行递归解析，并且它们同意这样做。与迭代情况一样，客户端将其初始请求发送到根名称服务器。该服务器没有 C.B.A. 的地址，但它没有仅仅返回给客户端
    A 名称服务器的地址，而是向该服务器本身发送了一个请求。该名称服务器向 B.A. 的服务器发送请求，该服务器再向 C.B.A. 的服务器发送请求。C.B.A.
    的地址随后沿着请求链向上传递，从 C.B.A. 的服务器到 B.A. 的服务器，然后是 A.，然后是根，最后回到客户端。
- en: In contrast, suppose you call Joe and Joe says, "I don't know, but I think I
    know how to find out." He calls John, and then Debbie, and then calls you back
    with the phone number. That would be like recursive resolution.
  id: totrans-808
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，假设你打电话给乔，乔说：“我不知道，但我认为我知道怎么找到答案。”他打电话给约翰，然后是黛比，然后给你打电话，告诉你电话号码。这就像递归解析。
- en: So, in essence, iteration is like doing the job yourself, while recursion is
    like passing the buck. You might think that everyone would always want to use
    recursion since it makes the other guy do the work. This is true, but passing
    the buck is not considered good form if it is not done with permission. Not all
    name servers support recursion, especially servers near the top of the hierarchy.
    Obviously, we don't want to bog down certain name servers—such as the root name
    servers, the ones that handle .COM, and other critical TLDs—with doing recursion.
    It is for this reason that clients must request that name servers perform recursion
    for them. One place where recursion is often used is with the local name server
    on a network. Rather than making client machine resolvers perform iterative resolution,
    it is common for the resolver to generate a recursive request to the local DNS
    server, which then generates iterative requests to other servers as needed. As
    you can see, recursive and iterative requests can be combined in a single resolution,
    providing significant flexibility to the process as a whole. This is demonstrated
    in a more realistic example in the "DNS Name Resolution Process" section later
    in this chapter.
  id: totrans-809
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，本质上，迭代就像是亲自做这项工作，而递归则像是推卸责任。你可能认为每个人都会总是想使用递归，因为这样可以让别人做工作。这是真的，但如果没有得到允许就推卸责任，这并不被视为好的行为。并不是所有的域名服务器都支持递归，尤其是那些处于层级顶部的服务器。显然，我们不希望某些域名服务器——如根域名服务器、处理.COM的域名服务器和其他关键顶级域名服务器——因为递归而变得低效。正因为如此，客户端必须请求域名服务器为他们执行递归。递归经常被用在网络上的本地域名服务器中。而不是让客户端的解析器执行迭代解析，解析器通常会产生一个递归请求到本地DNS服务器，然后根据需要生成迭代请求到其他服务器。正如你所看到的，递归和迭代请求可以在单个解析过程中结合使用，为整个过程提供显著的灵活性。这一点在本书后面的“DNS名称解析过程”部分的一个更现实的例子中得到了演示。
- en: Again, remember that for the purpose of understanding resolution, a DNS server
    can act as a client. As soon as a DNS server accepts a recursive request for resolution
    on a name it cannot resolve itself, it becomes a client in the process. Also,
    it is common for resolvers to know the names of not one, but two local DNS servers,
    so if a problem occurs reaching the first, they can try the second.
  id: totrans-810
  prefs: []
  type: TYPE_NORMAL
  zh: 再次提醒，为了理解解析的目的，DNS服务器可以充当客户端。一旦DNS服务器接受了一个它自己无法解析的名称的递归解析请求，它就成为了该过程中的客户端。此外，解析器通常知道不止一个本地DNS服务器的名称，所以如果到达第一个服务器有问题，他们可以尝试第二个。
- en: Tip
  id: totrans-811
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** The two methods of name resolution in DNS are *iterative resolution*
    and *recursive resolution*. In iterative resolution, if a client sends a request
    to a name server that does not have the information the client needs, the server
    returns a pointer to a different name server, and the client sends a new request
    to that server. In recursive resolution, if a client sends a request to a server
    that doesn''t have the requested information, that server takes on the responsibility
    for sending requests to other servers to find the necessary records, and then
    returns them to the client. A server doing this takes on the role of client for
    its requests to other servers.'
  id: totrans-812
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS中的名称解析有两种方法：*迭代解析*和*递归解析*。在迭代解析中，如果客户端向一个没有所需信息的域名服务器发送请求，服务器会返回一个指向不同域名服务器的指针，客户端会向那个服务器发送新的请求。在递归解析中，如果客户端向一个没有所需信息的服务器发送请求，该服务器会承担向其他服务器发送请求以找到必要记录的责任，然后将它们返回给客户端。执行此操作的服务器在其对其他服务器的请求中扮演客户端的角色。'
- en: 'DNS Name Resolution Efficiency Improvements: Caching and Local Resolution'
  id: totrans-813
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称解析效率改进：缓存和本地解析
- en: The basic resolution techniques—iterative and recursive—can be considered complete
    from an algorithmic standpoint. By starting at the top (root) and working our
    way down, we are "guaranteed" to always eventually arrive at the server that has
    the information we need. I put *guaranteed* in quotation marks because, as always,
    there are no real guarantees in networking—we might have asked for a nonexistent
    name, or a server might have bad data, for example. But in the absence of such
    atypical problems, the process leads to the information eventually.
  id: totrans-814
  prefs: []
  type: TYPE_NORMAL
  zh: 从算法的角度来看，基本解析技术——迭代和递归——可以被认为是完整的。通过从顶部（根）开始，逐步向下工作，我们“保证”最终会到达拥有所需信息的服务器。我把“保证”这个词加了引号，因为，就像往常一样，在网络上没有真正的保证——我们可能请求了一个不存在的名称，或者服务器可能有错误的数据，例如。但在没有这种典型问题的情况下，这个过程最终会引导我们找到信息。
- en: 'The problem is that last word: *eventually*. Both iterative and recursive resolution
    will get us to the right server, but they take a long time to do it, especially
    if the name we are trying to resolve is in a deep part of the DNS hierarchy (for
    example, F.E.D.C.B.A.). Since resolution is done so often, it is helpful to define
    changes to the basic resolution process that improve efficiency as much as possible.'
  id: totrans-815
  prefs: []
  type: TYPE_NORMAL
  zh: 问题在于最后一个词：“最终”。迭代和递归解析都会带我们到达正确的服务器，但它们需要很长时间才能完成，尤其是如果我们试图解析的名称位于DNS层次结构的深层（例如，F.E.D.C.B.A.）。由于解析经常进行，定义对基本解析过程的改进，尽可能提高效率是有帮助的。
- en: 'The Motivation for Caching: Locality of Reference'
  id: totrans-816
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 缓存的动机：引用局部性
- en: A computer science principle called *locality of reference* describes two common
    phenomena related to how computers (and networks) are used. The first, sometimes
    called *spatial locality of reference*, observes that a resource is more likely
    to be referenced if it is near another resource that was recently referenced.
    The second, *temporal locality of reference*, says a resource is more likely to
    be accessed if it was recently accessed.
  id: totrans-817
  prefs: []
  type: TYPE_NORMAL
  zh: 计算机科学中的一个原则叫做*引用局部性*，它描述了与计算机（和网络）的使用相关的两种常见现象。第一种，有时被称为*空间局部性引用*，观察到如果资源靠近最近被引用的另一个资源，那么它更有可能被引用。第二种，*时间局部性引用*，表示如果资源最近被访问过，那么它更有可能被访问。
- en: We can observe both of these phenomena by using the example of browsing the
    Web. To observe spatial locality of reference, notice what happens when you visit
    a site such as [http://www.tcpipguide.com](http://www.tcpipguide.com). The initial
    request asks the server for the main index document of *The TCP/IP Guide*. However,
    that document contains links to several images and other items, all of which are
    also located at the domain [tcpipguide.com](http://tcpipguide.com). When your
    browser asks for the main document, it will shortly thereafter also ask for a
    number of graphics. As you navigate the site, you will click links to go to other
    web pages. Again, most of these will be at the same domain, [tcpipguide.com](http://tcpipguide.com).
  id: totrans-818
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过浏览网页的例子来观察这两种现象。为了观察空间局部性，注意当你访问像[http://www.tcpipguide.com](http://www.tcpipguide.com)这样的网站时会发生什么。最初的请求是向服务器请求*《TCP/IP指南》*的主索引文档。然而，该文档包含指向几个图像和其他项目的链接，所有这些项目也都位于域名[tcpipguide.com](http://tcpipguide.com)下。当你浏览网站时，你会点击链接转到其他网页。同样，其中大部分也将位于相同的域名[tcpipguide.com](http://tcpipguide.com)下。
- en: What this means is that if we resolve a particular domain name, it is likely
    that we will need to resolve it again very soon in the future. It would be silly
    to need to interrogate the same domain server dozens of times, asking it to resolve
    the same name each time.
  id: totrans-819
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着如果我们解析了一个特定的域名，我们很可能在不久的将来还需要再次解析它。每次都询问同一个域名服务器，要求它解析相同的名称，这将是愚蠢的。
- en: The second phenomenon, *temporal locality of reference*, is one you have probably
    noticed yourself. You are far more likely to access a resource you have used recently
    than one you have not looked at in a year. This means that maintaining information
    about recently used resources can be inherently advantageous.
  id: totrans-820
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种现象，*时间局部性引用*，是你自己可能已经注意到的。你访问最近使用过的资源比访问一年前没有看过的资源更有可能。这意味着维护关于最近使用过的资源的信息可以具有固有的优势。
- en: These two phenomena are the rationale for caching in the computer world in general,
    and as you have seen in [Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER CONCEPTS
    AND OPERATION"), in DNS servers in particular. The same advantages apply to resolvers,
    and many of them perform caching also, in a way rather similar to how it is done
    in servers.
  id: totrans-821
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种现象是计算机世界中缓存的一般理由，尤其是在DNS服务器中，正如你在[第55章](ch55.html "第55章。DNS名称服务器概念和操作")中看到的。相同的优势也适用于解析器，并且许多解析器也以与服务器类似的方式执行缓存。
- en: Name Resolver Caching
  id: totrans-822
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 名称解析器缓存
- en: On a particular client computer, once a particular name is resolved, it is cached
    and remains ready for the next time it is needed. Again, this eliminates traffic
    and load on DNS servers. (Note, however, that not all resolvers perform caching.)
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: 在特定的客户端计算机上，一旦解析了特定的名称，它就会被缓存并准备好下一次需要时使用。再次强调，这减少了DNS服务器上的流量和负载。（注意，然而，并非所有解析器都会执行缓存。）
- en: You might be wondering why we bother having caching on both resolvers and servers.
    This is not redundant, as it may appear. Or rather, it's redundant, but in a good
    way. To understand why, we must recognize that a fundamental trade-off in caching
    is that a cache provides better performance the closer it is the requester of
    the data, but better coverage the farther it is from the user.
  id: totrans-824
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能想知道为什么我们同时在解析器和服务器上设置缓存。这并不是多余的，看起来可能如此。或者更确切地说，它是多余的，但以好的方式。要理解为什么，我们必须认识到缓存的一个基本权衡是，缓存越靠近数据请求者，性能越好，但覆盖范围越广，距离用户越远。
- en: If resolvers didn't cache results but our local server did, we could get the
    information from the server's cache, but it would require waiting for the exchange
    of a query and response. The resolver's cache is closer to the user and so more
    efficient. At the same time, this doesn't obviate the need for caching at our
    network's local DNS server. The server is farther away from the user than the
    resolver, but its cache is shared by many machines. They can all benefit from
    its cache. For example, if you look up a particular name, and then someone else
    does a few minutes later, she can use your cached resolution, even though she
    is typing it for the first time.
  id: totrans-825
  prefs: []
  type: TYPE_NORMAL
  zh: 如果解析器不缓存结果，但我们的本地服务器缓存了，我们可以从服务器的缓存中获取信息，但这需要等待查询和响应的交换。解析器的缓存更靠近用户，因此更高效。同时，这并不免除我们在网络本地DNS服务器上进行缓存的需要。服务器距离用户更远，但它的缓存被许多机器共享。它们都可以从其缓存中受益。例如，如果你查找了特定的名称，然后几分钟后另一个人也查找，她可以使用你的缓存解析，即使她第一次输入这个名称。
- en: Tip
  id: totrans-826
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** In addition to the caching performed by DNS name servers, many
    (but not all) DNS resolvers also cache the results of recent resolution requests.
    This cache is checked prior to beginning a name resolution, to save time when
    multiple requests are made for the same name.'
  id: totrans-827
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 除了DNS名称服务器执行的缓存外，许多（但并非所有）DNS解析器还会缓存最近解析请求的结果。在开始名称解析之前检查此缓存，以在多次请求同一名称时节省时间。'
- en: Caching by name resolvers follows the same general principles and rules as caching
    by name servers, outlined in [Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER
    CONCEPTS AND OPERATION"). The amount of time a resource record (RR) is held in
    the cache is specified by its Time to Live (TTL) value. Also, resolvers will not
    cache the results of certain queries, such as reverse lookups, and may also not
    cache a resolution if they suspect (for whatever reason) that the data returned
    is unreliable or corrupted.
  id: totrans-828
  prefs: []
  type: TYPE_NORMAL
  zh: 名称解析器的缓存遵循与名称服务器缓存相同的一般原则和规则，这些原则和规则在第55章（ch55.html "第55章。DNS名称服务器概念和操作"）中概述。资源记录（RR）在缓存中保留的时间由其生存时间（TTL）值指定。此外，解析器不会缓存某些查询的结果，例如反向查找，并且如果它们怀疑（无论什么原因）返回的数据不可靠或损坏，也可能不会缓存解析。
- en: Local Resolution
  id: totrans-829
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本地解析
- en: One other area where resolution efficiency can be improved is the special case
    where we are trying to resolve the names of computers in our own organizations.
    Suppose that you, an employee at XYZ Industries, want to get some sales information
    using the File Transfer Protocol (FTP) from [sales.xyzindustries.com](http://sales.xyzindustries.com).
    Your FTP client will invoke your local resolver to resolve that name, by sending
    it to your local DNS server. Now, would it be smart for that server, which is
    here inside the company, to start the resolution process up at the root name server?
    Not really.
  id: totrans-830
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个可以提高解析效率的领域是，当我们试图解析我们自身组织中的计算机名称时。假设你是XYZ工业公司的一名员工，想通过文件传输协议（FTP）从[sales.xyzindustries.com](http://sales.xyzindustries.com)获取一些销售信息。你的FTP客户端将调用你的本地解析器来解析该名称，通过将其发送到你的本地DNS服务器。现在，这个位于公司内部的DNS服务器从根域名服务器开始解析过程，这明智吗？实际上并不明智。
- en: The local DNS server that accepts local resolution requests from resolvers on
    the network may be the authoritative name server for [sales.xyzindustries.com](http://sales.xyzindustries.com).
    In other cases, it may know how to answer certain resolution requests directly.
    Obviously, it makes sense for the server to check to see if it can answer a resolver's
    query before heading up to the root server, since this provides a faster answer
    to the client and saves internetwork traffic. This is called *local resolution*.
  id: totrans-831
  prefs: []
  type: TYPE_NORMAL
  zh: 接受来自网络中解析器本地解析请求的本地DNS服务器可能是[sales.xyzindustries.com](http://sales.xyzindustries.com)的权威名称服务器。在其他情况下，它可能知道如何直接回答某些解析请求。显然，在向根服务器发起正式自顶向下的解析过程之前，服务器检查是否能够回答解析器的查询是有意义的，因为这可以为客户端提供更快的答案并节省互联网流量。这被称为*本地解析*。
- en: 'Most DNS servers will perform this check to see if they have the information
    needed for a request before commencing the formal top-down resolution process.
    The exception is DNS servers that do not maintain information about any zones:
    *caching-only servers*. In some cases, DNS resolvers on client machines may also
    have access to certain local zone information, in which case, they can use it
    instead of sending a resolution query at all.'
  id: totrans-832
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数DNS服务器都会在开始正式自顶向下的解析过程之前执行此检查，以查看它们是否拥有请求所需的信息。例外的是不维护任何区域信息的DNS服务器：*仅缓存服务器*。在某些情况下，客户端机器上的DNS解析器也可能有权访问某些本地区域信息，在这种情况下，它们可以使用这些信息而不是发送解析查询。
- en: Note
  id: totrans-833
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Most operating systems support the use of the old host table mechanism (described
    in [Chapter 51](ch51.html "Chapter 51. TCP/IP NAME SYSTEMS OVERVIEW AND THE HOST
    TABLE NAME SYSTEM")), which can be useful for local machines on a network. If
    a host has a host table, the resolver will check the host table to see if it can
    find a mapping for a name before it will bother with the more time-consuming DNS
    resolution process. This is not technically part of DNS, but is often used in
    conjunction with it*.'
  id: totrans-834
  prefs: []
  type: TYPE_NORMAL
  zh: '*大多数操作系统都支持使用旧的主机表机制（在第51章中描述，[第51章](ch51.html "第51章。TCP/IP名称系统概述和主机表名称系统")），这对于网络上的本地机器很有用。如果一个主机有主机表，解析器将在开始耗时更多的DNS解析过程之前检查主机表，看是否可以找到名称的映射。这虽然不是DNS的技术组成部分，但通常与DNS一起使用*。'
- en: DNS Name Resolution Process
  id: totrans-835
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称解析过程
- en: In the first half of this chapter, I have described what name resolvers do,
    explained the basic top-down resolution process using iterative and recursive
    resolution, and discussed how local resolution and caching are used to improve
    resolution performance. Now it's time to tie all this background material together
    and see how the name resolution process works as a whole.
  id: totrans-836
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的前半部分，我描述了名称解析器的作用，解释了使用迭代和递归解析的基本自顶向下的解析过程，并讨论了如何使用本地解析和缓存来提高解析性能。现在，是时候将这些背景材料结合起来，看看整个名称解析过程是如何工作的了。
- en: 'As usual, the best way to do this is by example. Here, I will actually combine
    two examples I have used earlier: the fictitious company XYZ Industries and the
    nonexistent college, Googleplex University.'
  id: totrans-837
  prefs: []
  type: TYPE_NORMAL
  zh: 如同往常，最好的做法是通过例子来说明。在这里，我将结合两个之前用过的例子：虚构的公司XYZ工业公司和不存在的大学，谷歌plex大学。
- en: A Simple Example of DNS Name Resolution
  id: totrans-838
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS名称解析的一个简单例子
- en: Let's say that XYZ Industries runs its own DNS servers for the [xyzindustries.com](http://xyzindustries.com)
    zone. The master name server is called [ns1.xyzindustries.com](http://ns1.xyzindustries.com),
    and the slave is [ns2.xyzindustries.com](http://ns2.xyzindustries.com). These
    are also used as local DNS servers for resolvers on client machines. We'll assume
    for this example that, as is often the case, our DNS servers will accept recursive
    requests from machines within our company, but we will not assume that other machines
    will accept such requests. Let's also assume that both the server and resolver
    perform caching, and that the caches are empty.
  id: totrans-839
  prefs: []
  type: TYPE_NORMAL
  zh: 假设XYZ工业公司运行自己的DNS服务器，用于[xyzindustries.com](http://xyzindustries.com)区域。主域名服务器被称为[ns1.xyzindustries.com](http://ns1.xyzindustries.com)，而从域名服务器是[ns2.xyzindustries.com](http://ns2.xyzindustries.com)。这些也被用作客户端机器上解析器的本地DNS服务器。在这个例子中，我们将假设，正如通常情况那样，我们的DNS服务器将接受公司内部机器的递归请求，但我们不会假设其他机器会接受此类请求。同时，我们也假设服务器和解析器都执行缓存，并且缓存为空。
- en: 'Let''s say that Googleplex University runs its own DNS servers for the googleplex.edu
    domain, as in the example in [Chapter 54](ch54.html "Chapter 54. DNS NAME REGISTRATION,
    PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES"). There are three subdomains: finearts.googleplex.edu,
    compsci.googleplex.edu, and admin.googleplex.edu. Of these, compsci.googleplex.edu
    is in a separate zone with dedicated servers, while the other subdomains are in
    the googleplex.edu zone (see [Figure 54-2](ch54s06.html#dns_zones_of_authority_cuts_can_be_made_
    "Figure 54-2. DNS zones of authority Cuts can be made between nodes in the DNS
    name tree to create an arbitrary hierarchy of name authorities. This example shows
    the DNS tree branch for googleplex.edu, with each zone indicated using a different
    shading. IANA/ICANN is responsible for the root domain, and a separate authority
    named Educause takes care of .EDU. The third zone covers much of googleplex.edu,
    except that a cut has been made between googleplex and compsci to create an independent
    zone of authority for compsci.googleplex.edu.")).'
  id: totrans-840
  prefs: []
  type: TYPE_NORMAL
  zh: 假设Googleplex大学运行自己的DNS服务器，用于googleplex.edu域名，正如[第54章](ch54.html "第54章。DNS名称注册、公共管理、区域和权威")中的示例。有三个子域名：finearts.googleplex.edu、compsci.googleplex.edu和admin.googleplex.edu。在这些子域名中，compsci.googleplex.edu位于一个独立的区域，并使用专用服务器，而其他子域名位于googleplex.edu区域（见[图54-2](ch54s06.html#dns_zones_of_authority_cuts_can_be_made_
    "图54-2。DNS区域权威的划分可以在DNS名称树中的节点之间进行，以创建任意层次的结构名称权威。此示例显示了googleplex.edu的DNS树分支，每个区域使用不同的阴影表示。IANA/ICANN负责根域名，一个名为Educause的独立权威机构负责.EDU。第三个区域覆盖了大部分googleplex.edu，除了在googleplex和compsci之间进行了切割，以创建一个独立的compsci.googleplex.edu权威区域。"））。
- en: 'Now, suppose you are an employee within XYZ Industries and one of your clients
    is in charge of the networking department at Googleplex U. You type into your
    web browser the address of that department''s web server, [www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu).
    In simplified terms, the procedure would involve the following steps ([Figure 56-3](ch56s04.html#example_of_the_dns_name_resolution_proce
    "Figure 56-3. Example of the DNS name resolution process This fairly complex example
    illustrates a typical DNS name resolution using both iterative and recursive resolution.
    The user types a DNS name (www.net.compsci.googleplex.edu) into a web browser,
    which causes a DNS resolution request to be made from her client machine''s resolver
    to a local DNS name server. That name server agrees to resolve the name recursively
    on behalf of the resolver, but uses iterative requests to accomplish it. These
    requests are sent to a DNS root name server, followed in turn by the name servers
    for .edu, googleplex.edu, and compsci.googleplex.edu. The IP address is then passed
    to the local name server and then back to the user''s resolver, and finally, to
    her web browser software.") shows the process graphically):'
  id: totrans-841
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，假设你是XYZ工业公司的一名员工，你的一个客户负责Googleplex U的网络部门。你将那个部门网络服务器的地址输入到你的网络浏览器中，[www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu)。用简化的术语来说，这个过程将涉及以下步骤（[图56-3](ch56s04.html#example_of_the_dns_name_resolution_proce
    "图56-3。DNS名称解析示例这个相当复杂的示例说明了使用迭代和递归解析的典型DNS名称解析。用户将DNS名称（www.net.compsci.googleplex.edu）输入到网络浏览器中，这会导致从她的客户端机器的解析器向本地DNS名称服务器发出DNS解析请求。该名称服务器同意代表解析器递归解析该名称，但使用迭代请求来完成。这些请求被发送到DNS根名称服务器，然后依次是.edu、googleplex.edu和compsci.googleplex.edu的名称服务器。然后IP地址被传递给本地名称服务器，然后返回到用户的解析器，最后到她的网络浏览器软件。"）展示了这个过程。
- en: Your web browser recognizes the request for a name and invokes your local resolver,
    passing to it the name [www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu).
  id: totrans-842
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的网页浏览器识别到对名称的请求并调用您本地的解析器，将名称[www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu)传递给它。
- en: The resolver checks its cache to see if it already has the address for this
    name. If it does, it returns it immediately to the web browser, but in this case,
    we are assuming that it does not. The resolver also checks to see if it has a
    local host table file. If so, it scans the file to see if this name has a static
    mapping. If so, it resolves the name using this information immediately. Again,
    let's assume it does not, since that would be boring.
  id: totrans-843
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解析器检查其缓存以查看是否已经存储了该名称的地址。如果有，它会立即将其返回给网页浏览器，但在这个假设的情况下，我们假设它没有。解析器还会检查是否有本地主机表文件。如果有，它会扫描文件以查看该名称是否有静态映射。如果有，它会立即使用这些信息解析名称。再次假设它没有，因为那样会很无聊。
- en: The resolver generates a recursive query and sends it to [ns1.xyzindustries.com](http://ns1.xyzindustries.com)
    (using that server's IP address, of course, which the resolver knows).
  id: totrans-844
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解析器生成一个递归查询并将其发送到[ns1.xyzindustries.com](http://ns1.xyzindustries.com)（当然使用解析器知道的该服务器的IP地址）。
- en: The local DNS server receives the request and checks its cache. Again, let's
    assume it doesn't have the information needed. If it did, it would return the
    information, marked non-authoritative, to the resolver. The server also checks
    to see if it has in its zone resource records that can resolve [www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu).
    Of course, it does not in this case, since they are in totally different domains.
  id: totrans-845
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地DNS服务器接收请求并检查其缓存。再次假设它没有所需的信息。如果有，它会将信息返回给解析器，并标记为非权威信息。服务器还会检查其区域资源记录中是否有可以解析[www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu)的记录。当然，在这种情况下，它没有，因为它们位于完全不同的域中。
- en: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com) generates an iterative
    request for the name and sends it to a root name server.'
  id: totrans-846
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com)为该名称生成一个迭代请求并将其发送到根名称服务器。'
- en: The root name server does not resolve the name. It returns the name and address
    of the name server for the .edu domain.
  id: totrans-847
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根名称服务器不解析名称。它返回.edu域的名称服务器名称和地址。
- en: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com) generates an iterative
    request and sends it to the name server for .edu.'
  id: totrans-848
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com)生成一个迭代请求并将其发送到.edu域的名称服务器。'
- en: The name server for .edu returns the name and address of the name server for
    the googleplex.edu domain.
  id: totrans-849
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: .edu域的名称服务器返回googleplex.edu域的名称服务器名称和地址。
- en: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com) generates an iterative
    request and sends it to the name server for googleplex.edu.'
  id: totrans-850
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com)生成一个迭代请求并将其发送到googleplex.edu域的名称服务器。'
- en: The name server for googleplex.edu consults its records. It sees, however, that
    this name is in the compsci.googleplex.edu subdomain, which is in a separate zone.
    It returns the name server for that zone.
  id: totrans-851
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: googleplex.edu域的名称服务器查阅其记录。然而，它看到这个名称位于compsci.googleplex.edu子域中，该子域位于一个单独的区域中。它返回那个区域的名称服务器。
- en: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com) generates an iterative
    request and sends it to the name server for compsci.googleplex.edu.'
  id: totrans-852
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com)生成一个迭代请求并将其发送到compsci.googleplex.edu域的名称服务器。'
- en: The name server for compsci.googleplex.edu is authoritative for [www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu).
    It returns the IP address for that host to [ns1.xyzindustries.com](http://ns1.xyzindustries.com).
  id: totrans-853
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: compsci.googleplex.edu的名称服务器是[www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu)的权威名称服务器。它将那个主机的IP地址返回给[ns1.xyzindustries.com](http://ns1.xyzindustries.com)。
- en: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com) caches this resolution.'
  id: totrans-854
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com)缓存了这个解析结果。'
- en: The local name server returns the resolution to the resolver on your local machine.
  id: totrans-855
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地名称服务器将解析结果返回到您本地机器上的解析器。
- en: Your local resolver also caches the information.
  id: totrans-856
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的本地解析器也会缓存信息。
- en: The local resolver gives the address to your browser.
  id: totrans-857
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地解析器将地址提供给您的浏览器。
- en: Your browser commences an HTTP request to the Googleplex machine's IP address.
  id: totrans-858
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的浏览器开始向Googleplex机器的IP地址发起HTTP请求。
- en: This seems rather complicated and slow. Of course, computers work faster than
    you can read (or I can type, for that matter). Even given that, the benefits of
    caching are obvious—if the name were in the cache of the resolver or the local
    DNS server, most of these steps would be avoided.
  id: totrans-859
  prefs: []
  type: TYPE_NORMAL
  zh: 这似乎相当复杂且缓慢。当然，计算机的工作速度比你能读（或者我打字的速度）要快。即使如此，缓存的优点也是显而易见的——如果名称在解析器或本地 DNS 服务器的缓存中，那么大多数这些步骤都可以避免。
- en: Note that this example is highly simplified and also shows only one possible
    way that servers might be set up. For one thing, it is possible that even though
    compsci.googleplex.edu is in a separate zone from googleplex.edu, they might use
    the same server. In that case, one iteration in the process would be skipped.
    The example also doesn't show what happens if an error occurs in the process.
    Also, if the name entered were an alias, indicated by a CNAME record, this would
    change the processing as well.
  id: totrans-860
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，这个例子非常简化，并且只展示了服务器可能设置的一种方式。例如，即使 compsci.googleplex.edu 与 googleplex.edu
    在不同的区域，它们也可能使用相同的服务器。在这种情况下，处理过程中的一个迭代可能会被跳过。这个例子也没有展示如果处理过程中发生错误会发生什么。此外，如果输入的名称是一个别名，由
    CNAME 记录指示，这也会改变处理过程。
- en: '![Example of the DNS name resolution process This fairly complex example illustrates
    a typical DNS name resolution using both iterative and recursive resolution. The
    user types a DNS name (www.net.compsci.googleplex.edu) into a web browser, which
    causes a DNS resolution request to be made from her client machine''s resolver
    to a local DNS name server. That name server agrees to resolve the name recursively
    on behalf of the resolver, but uses iterative requests to accomplish it. These
    requests are sent to a DNS root name server, followed in turn by the name servers
    for .edu, googleplex.edu, and compsci.googleplex.edu. The IP address is then passed
    to the local name server and then back to the user''s resolver, and finally, to
    her web browser software.](httpatomoreillycomsourcenostarchimages288175.png.jpg)'
  id: totrans-861
  prefs: []
  type: TYPE_IMG
  zh: '![DNS 名称解析过程的示例 这个相当复杂的例子说明了使用迭代和递归解析的典型 DNS 名称解析。用户在网页浏览器中输入 DNS 名称 (www.net.compsci.googleplex.edu)，这会导致从她的客户端机器的解析器向本地
    DNS 名称服务器发出 DNS 解析请求。该名称服务器同意代表解析器递归解析该名称，但使用迭代请求来完成。这些请求被发送到 DNS 根名称服务器，然后依次是
    .edu、googleplex.edu 和 compsci.googleplex.edu 的名称服务器。然后，IP 地址被传递到本地名称服务器，然后返回到用户的解析器，最后到达她的网页浏览器软件。](httpatomoreillycomsourcenostarchimages288175.png.jpg)'
- en: Figure 56-3. Example of the DNS name resolution process This fairly complex
    example illustrates a typical DNS name resolution using both iterative and recursive
    resolution. The user types a DNS name ([www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu))
    into a web browser, which causes a DNS resolution request to be made from her
    client machine's resolver to a local DNS name server. That name server agrees
    to resolve the name recursively on behalf of the resolver, but uses iterative
    requests to accomplish it. These requests are sent to a DNS root name server,
    followed in turn by the name servers for .edu, googleplex.edu, and compsci.googleplex.edu.
    The IP address is then passed to the local name server and then back to the user's
    resolver, and finally, to her web browser software.
  id: totrans-862
  prefs: []
  type: TYPE_NORMAL
  zh: 图 56-3. DNS 名称解析过程的示例 这个相当复杂的例子说明了使用迭代和递归解析的典型 DNS 名称解析。用户在网页浏览器中输入 DNS 名称 ([www.net.compsci.googleplex.edu](http://www.net.compsci.googleplex.edu))，这会导致从她的客户端机器的解析器向本地
    DNS 名称服务器发出 DNS 解析请求。该名称服务器同意代表解析器递归解析该名称，但使用迭代请求来完成。这些请求被发送到 DNS 根名称服务器，然后依次是
    .edu、googleplex.edu 和 compsci.googleplex.edu 的名称服务器。然后，IP 地址被传递到本地名称服务器，然后返回到用户的解析器，最后到达她的网页浏览器软件。
- en: Changes to Resolution to Handle Aliases (CNAME Records)
  id: totrans-863
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 处理别名（CNAME 记录）的解析更改
- en: 'CNAME records are used to allow a constant name for a device to be presented
    to the outside world, while allowing the actual device that corresponds to the
    name to vary inside the organization. When a CNAME is used, it changes the name
    resolution process by adding an extra step: First we resolve the alias to the
    canonical name, and then we resolve the canonical name.'
  id: totrans-864
  prefs: []
  type: TYPE_NORMAL
  zh: CNAME 记录用于允许设备向外界展示一个恒定的名称，同时允许与该名称对应的实际设备在组织内部变化。当使用 CNAME 时，它通过添加一个额外的步骤来改变名称解析过程：首先，我们将别名解析为规范名称，然后我们解析规范名称。
- en: For example, web servers are almost always named starting with www., so at XYZ
    Industries, we want people to be able to find our website at [www.xyzindustries.com](http://www.xyzindustries.com).
    However, the web server may be shared with other services on [bigserver.xyzindustries.com](http://bigserver.xyzindustries.com).
    We can set up a CNAME record to point [www.xyzindustries.com](http://www.xyzindustries.com)
    to [bigserver.xyzindustries.com](http://bigserver.xyzindustries.com). Resolution
    of www will result in a CNAME pointing to bigserver, which is then itself resolved.
    If in the future, our business grows and we decide to upgrade our web service
    to run on [biggerserver.xyzindustries.com](http://biggerserver.xyzindustries.com),
    we just change the CNAME record, and users are unaffected.
  id: totrans-865
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，Web服务器几乎总是以www.开头命名，所以在XYZ Industries，我们希望人们能够通过[www.xyzindustries.com](http://www.xyzindustries.com)找到我们的网站。然而，Web服务器可能与[bigserver.xyzindustries.com](http://bigserver.xyzindustries.com)上的其他服务共享。我们可以设置一个CNAME记录，将[www.xyzindustries.com](http://www.xyzindustries.com)指向[bigserver.xyzindustries.com](http://bigserver.xyzindustries.com)。解析www将导致一个指向bigserver的CNAME，然后它本身被解析。如果将来我们的业务增长，我们决定将我们的Web服务升级到在[biggerserver.xyzindustries.com](http://biggerserver.xyzindustries.com)上运行，我们只需更改CNAME记录，用户就不会受到影响。
- en: DNS Reverse Name Resolution Using the IN-ADDR.ARPA Domain
  id: totrans-866
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用IN-ADDR.ARPA域进行DNS逆向名称解析
- en: If most people were asked to identify the core job of DNS to one function, they
    would probably say it was converting the names of objects into the numeric IP
    addresses associated with them. (Well, they would if they knew much about DNS.)
    For this reason, DNS is sometimes compared to a telephone book, or to telephone
    411 (information) service. There are certain problems with this analogy, but at
    the highest level, it is valid. In both cases, we take a name, consult a database
    (of one type or another), and produce from it a number that matches that name.
  id: totrans-867
  prefs: []
  type: TYPE_NORMAL
  zh: 如果大多数人被要求将DNS的核心功能归纳为一个功能，他们可能会说它是将对象的名称转换为与之关联的数字IP地址。 (好吧，如果他们对DNS了解很多的话。)
    因此，DNS有时被比作电话簿，或者电话411（信息服务）。这种类比存在某些问题，但在最高层面上，它是有效的。在两种情况下，我们取一个名字，咨询一个数据库（一种或另一种类型），并从中产生一个与该名字匹配的数字。
- en: In the real world, there are sometimes situations where you don't want to find
    the phone number that goes with a name, but rather, you have a phone number and
    want to know what person it belongs to. For example, this might happen if your
    telephone records the number of incoming calls but you don't have caller ID to
    display the name associated with a number. You might also find a phone number
    on a piece of paper and not remember whose number it is.
  id: totrans-868
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实世界中，有时你可能不想找到与名字对应的电话号码，而是拥有一个电话号码，想知道它属于哪个人。例如，这可能发生在你的电话记录了来电号码，但你没有来电显示来显示与号码关联的名字时。你也可能在一张纸上找到电话号码，但记不起它是谁的。
- en: Similarly, in the networking world, there are many situations where we have
    an IP address and want to know what name goes with it. For example, a World Wide
    Web server records the IP address of each device that connects to it in its server
    logs, but these numbers are generally meaningless to humans, who prefer to see
    the names that go with them. A more serious example might be a hacker trying to
    break into your computer; by converting the IP address into a name, you might
    be able to find out what part of the world he is from, what Internet service provider
    (ISP) he is using, and so forth. There are also many reasons why a network administrator
    might want to find out the name that goes with an address, for setup or troubleshooting
    purposes.
  id: totrans-869
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，在网络世界中，有许多情况下我们有一个IP地址，想知道与之对应的名称。例如，一个万维网服务器在其服务器日志中记录了连接到它的每个设备的IP地址，但这些数字对人类来说通常是没有意义的，他们更喜欢看到与之相关的名字。一个更严重的例子可能是一个试图破解你电脑的黑客；通过将IP地址转换为名称，你可能会发现他来自哪个国家，他使用的是哪个互联网服务提供商（ISP），等等。也有许多原因使得网络管理员可能想要找出与地址对应的名称，用于设置或故障排除目的。
- en: DNS originally included a feature called *inverse querying* that would allow
    this type of "opposite" resolution.
  id: totrans-870
  prefs: []
  type: TYPE_NORMAL
  zh: DNS最初包含一个名为*逆向查询*的功能，它将允许这种“相反”的解析。
- en: 'The Original Method: Inverse Querying'
  id: totrans-871
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 原始方法：逆向查询
- en: For inverse querying, a resolver could send a query which, instead of having
    a name filled in and a space for the server to fill in the IP address, had the
    IP address and a space for the name. The server would check its RRs and return
    the name to the resolver.
  id: totrans-872
  prefs: []
  type: TYPE_NORMAL
  zh: 对于反向查询，解析器可以发送一个查询，其中不包含填入名称和供服务器填入IP地址的空间，而是包含IP地址和供名称填入的空间。服务器会检查其RR（资源记录）并返回名称给解析器。
- en: This works fine in theory, and even in practice, if the internetwork is very
    small. However, remember that due to the distributed nature of DNS information,
    the biggest part of the job of resolution is finding the right server. Now, in
    the case of regular resolution, we can easily find the right server by traversing
    the hierarchy of servers. This is possible because the servers are connected together
    following a hierarchy of names.
  id: totrans-873
  prefs: []
  type: TYPE_NORMAL
  zh: 在理论上，这行得通，甚至在实践中，如果互联网非常小的话。然而，记住，由于DNS信息的分布式特性，解析工作的最大部分是找到正确的服务器。现在，在常规解析的情况下，我们可以通过遍历服务器的层次结构来轻松地找到正确的服务器。这是可能的，因为服务器是按照名称的层次结构连接在一起的。
- en: DNS servers are not, however, arranged based on IP address. This means that
    to use inverse queries, we need to use the right name server for the IP address
    we want to resolve into a name, with no easy way to find out what it is. Sure,
    we could try sending the inverse query to the authoritative DNS server for every
    zone in the hierarchy. If you tried, it would probably take you longer than it
    took to write this book, so let's not go there. The end result of all of this
    is that inverse queries were never popular, except for local server troubleshooting.
    They were formally removed from DNS in November 2002 through the publishing of
    RFC 3425.
  id: totrans-874
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，DNS服务器并不是根据IP地址来排列的。这意味着要使用反向查询，我们需要使用正确的名称服务器来解析我们想要解析成名称的IP地址，而且没有简单的方法可以找到它。当然，我们可以尝试向每个区域的权威DNS服务器发送反向查询。如果你尝试这样做，可能比你写这本书的时间还要长，所以我们不要走那条路。所有这些最终的结果是，反向查询从未流行过，除了用于本地服务器故障排除。它们在2002年11月通过发布RFC
    3425正式从DNS中移除。
- en: 'So, what to do? Well, the problem is that the servers are arranged by name
    and not by IP address. The solution, therefore, is as simple as it sounds: Arrange
    the servers by IP address. This doesn''t mean we remove the name hierarchy, or
    duplicate all the servers, or anything silly like that. Instead, we create an
    additional, numerical hierarchy that coexists with the name hierarchy. We then
    use this to find names from numbers, using a process commonly called *reverse
    name resolution*.'
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们该怎么办呢？问题是服务器是按名称而不是按IP地址排列的。因此，解决方案就像听起来那么简单：按IP地址排列服务器。这并不意味着我们移除名称层次结构，或者复制所有服务器，或者任何愚蠢的事情。相反，我们创建了一个额外的、数字的层次结构，它与名称层次结构共存。然后我们使用这个层次结构从数字中找到名称，这个过程通常称为*反向名称解析*。
- en: The IN-ADDR.ARPA Name Structure for Reverse Resolution
  id: totrans-876
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 反向解析的IN-ADDR.ARPA名称结构
- en: The name hierarchy for the Internet is implemented using a special domain called
    *IN-ADDR.ARPA*, located within the reserved .ARPA TLD (*IN-ADDR* stands for *INternet
    ADDRess*). Recall from the discussion in [Chapter 54](ch54.html "Chapter 54. DNS
    NAME REGISTRATION, PUBLIC ADMINISTRATION, ZONES, AND AUTHORITIES") that .ARPA
    was originally used to transition old Internet hosts to DNS and is now used by
    the folks that run the Internet for various purposes.
  id: totrans-877
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网的名称层次结构是通过一个称为*IN-ADDR.ARPA*的特殊域名实现的，该域名位于保留的.ARPATLD（*IN-ADDR*代表*INternet
    ADDRess*）内部。回想一下[第54章](ch54.html "第54章。DNS名称注册、公共管理、区域和权威")中的讨论，.ARPA最初用于将旧互联网主机过渡到DNS，现在被互联网的运行者用于各种目的。
- en: 'A special numerical hierarchy is created within IN-ADDR.ARPA that covers the
    entire IP address space (see [Figure 56-4](ch56s05.html#the_dns_in-addrarpa_reverse_name_resolut
    "Figure 56-4. The DNS IN-ADDR.ARPA reverse name resolution hierarchy The special
    IN-ADDR.ARPA hierarchy was created to allow easy reverse lookups of DNS names.
    IN-ADDR.ARPA contains 256 subdomains numbered 0 to 255, each of which has 256
    subdomains numbered 0 to 255, and so forth, down to four levels. Thus, each IP
    address is represented in the hierarchy. This example shows the DNS domain name
    www.xyzindustries.com. It would have a conventional RR pointing to its IP address,
    191.27.203.8, as well as a reverse resolution record at 8.203.27.191.IN-ADDR.ARPA,
    pointing to the domain name www.xyzindustries.com.")):'
  id: totrans-878
  prefs: []
  type: TYPE_NORMAL
  zh: 在IN-ADDR.ARPA内部创建了一个特殊的数字层次结构，覆盖了整个IP地址空间（参见[图56-4](ch56s05.html#the_dns_in-addrarpa_reverse_name_resolut
    "图56-4. DNS IN-ADDR.ARPA反向名称解析层次结构 特殊的IN-ADDR.ARPA层次结构是为了允许轻松进行DNS名称的反向查找。IN-ADDR.ARPA包含编号为0到255的256个子域，每个子域又包含编号为0到255的256个子域，以此类推，直到四层。因此，每个IP地址都在这个层次结构中有表示。这个例子显示了DNS域名www.xyzindustries.com。它将有一个指向其IP地址191.27.203.8的传统RR，以及一个在8.203.27.191.IN-ADDR.ARPA的反向解析记录，指向域名www.xyzindustries.com。"）：
- en: At the first level within IN-ADDR.ARPA there are 256 subdomains called 0, 1,
    2, and so on, up to 255; for example, 191.IN-ADDR.ARPA. (Actually, there may not
    be all 256 of these, since some IP addresses are reserved, but let's ignore that
    for now.)
  id: totrans-879
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在IN-ADDR.ARPA的第一级内部，有256个子域，分别命名为0，1，2，以此类推，直到255；例如，191.IN-ADDR.ARPA。（实际上，可能并非所有256个子域都存在，因为一些IP地址已被保留，但在此我们先忽略这一点。）
- en: Within each of the first-level subdomains, there are 256 further subdomains
    at the second level, numbered the same way. So, for example, one of these would
    be 27.191.IN-ADDR.ARPA.
  id: totrans-880
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在每个一级子域内部，有256个二级子域，编号方式相同。例如，其中一个会是27.191.IN-ADDR.ARPA。
- en: Again, there are 256 subdomains at the third level within each of the second-level
    subdomains, such as 203.27.191.IN-ADDR.ARPA.
  id: totrans-881
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 再次强调，每个二级子域内部都有256个子域，例如203.27.191.IN-ADDR.ARPA。
- en: Finally, there are 256 subdomains at the fourth level within each of the third-level
    subdomains, such as 8.203.27.191.IN-ADDR.ARPA.
  id: totrans-882
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，每个三级子域内部都有256个子域，例如8.203.27.191.IN-ADDR.ARPA。
- en: As you can see, within IN-ADDR.ARPA, we have created a name space that parallels
    the address space of the Internet Protocol (IP). Yes, this means there are several
    billion nodes and branches in this part of the Internet DNS name space!
  id: totrans-883
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，在IN-ADDR.ARPA内部，我们创建了一个与互联网协议（IP）地址空间平行的命名空间。是的，这意味着在这个互联网DNS命名空间的部分有数十亿个节点和分支！
- en: RR Setup for Reverse Resolution
  id: totrans-884
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 反向解析的RR设置
- en: 'With this structure in place, we can now associate one entry in this name space
    with each entry in the real DNS name space. We do this using the Pointer (PTR)
    RR type. For example, if [www.xyzindustries.com](http://www.xyzindustries.com)
    has the IP address 191.27.203.8, then the DNS server for its zone will have an
    Address (A) RR indicating this. In master file text format, it will say something
    like this:'
  id: totrans-885
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种结构的基础上，我们现在可以将这个命名空间中的一个条目与真实DNS命名空间中的一个条目关联起来。我们使用指针（PTR）RR类型来完成这项工作。例如，如果[www.xyzindustries.com](http://www.xyzindustries.com)的IP地址是191.27.203.8，那么其区域的DNS服务器将有一个地址（A）RR来指示这一点。在主文件文本格式中，它可能会这样表示：
- en: '[PRE1]'
  id: totrans-886
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![The DNS IN-ADDR.ARPA reverse name resolution hierarchy The special IN-ADDR.ARPA
    hierarchy was created to allow easy reverse lookups of DNS names. IN-ADDR.ARPA
    contains 256 subdomains numbered 0 to 255, each of which has 256 subdomains numbered
    0 to 255, and so forth, down to four levels. Thus, each IP address is represented
    in the hierarchy. This example shows the DNS domain name www.xyzindustries.com.
    It would have a conventional RR pointing to its IP address, 191.27.203.8, as well
    as a reverse resolution record at 8.203.27.191.IN-ADDR.ARPA, pointing to the domain
    name www.xyzindustries.com.](httpatomoreillycomsourcenostarchimages288177.png)'
  id: totrans-887
  prefs: []
  type: TYPE_IMG
  zh: '![DNS IN-ADDR.ARPA反向名称解析层次结构 特殊的IN-ADDR.ARPA层次结构是为了允许轻松进行DNS名称的反向查找。IN-ADDR.ARPA包含编号为0到255的256个子域，每个子域又包含编号为0到255的256个子域，以此类推，直到四层。因此，每个IP地址都在这个层次结构中有表示。这个例子显示了DNS域名www.xyzindustries.com。它将有一个指向其IP地址191.27.203.8的传统RR，以及一个在8.203.27.191.IN-ADDR.ARPA的反向解析记录，指向域名www.xyzindustries.com。](httpatomoreillycomsourcenostarchimages288177.png)'
- en: Figure 56-4. The DNS IN-ADDR.ARPA reverse name resolution hierarchy The special
    IN-ADDR.ARPA hierarchy was created to allow easy reverse lookups of DNS names.
    IN-ADDR.ARPA contains 256 subdomains numbered 0 to 255, each of which has 256
    subdomains numbered 0 to 255, and so forth, down to four levels. Thus, each IP
    address is represented in the hierarchy. This example shows the DNS domain name
    [www.xyzindustries.com](http://www.xyzindustries.com). It would have a conventional
    RR pointing to its IP address, 191.27.203.8, as well as a reverse resolution record
    at 8.203.27.191.IN-ADDR.ARPA, pointing to the domain name [www.xyzindustries.com](http://www.xyzindustries.com).
  id: totrans-888
  prefs: []
  type: TYPE_NORMAL
  zh: 图 56-4. DNS IN-ADDR.ARPA 反向名称解析层次结构 特殊的 IN-ADDR.ARPA 层次结构是为了允许轻松进行 DNS 名称的反向查找而创建的。IN-ADDR.ARPA
    包含 256 个子域，编号从 0 到 255，每个子域又有 256 个子域，编号从 0 到 255，以此类推，直到四个级别。因此，每个 IP 地址都在这个层次结构中有代表。这个例子显示了
    DNS 域名 [www.xyzindustries.com](http://www.xyzindustries.com)。它将有一个指向其 IP 地址 191.27.203.8
    的常规 RR，以及一个在 8.203.27.191.IN-ADDR.ARPA 的反向解析记录，指向域名 [www.xyzindustries.com](http://www.xyzindustries.com)。
- en: 'However, there will also be the following entry for it within the IN-ADDR.ARPA
    domain:'
  id: totrans-889
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在 IN-ADDR.ARPA 域中也会为其创建以下条目：
- en: '[PRE2]'
  id: totrans-890
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Note
  id: totrans-891
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Remember that DNS names are case-insensitive, so* IN-ADDR.ARPA *could also
    be given* as in-addr.arpa.'
  id: totrans-892
  prefs: []
  type: TYPE_NORMAL
  zh: '*请记住，DNS 名称不区分大小写，因此* IN-ADDR.ARPA *也可以写成* in-addr.arpa。'
- en: Once this is done, reverse name resolution can be easily performed by doing
    a name resolution on 8.203.27.191.in-addr.arpa. If we do this, a server for the
    IN-ADDR.ARPA domain will return to us the name [www.xyzindustries.com](http://www.xyzindustries.com).
    This is shown in [Figure 56-4](ch56s05.html#the_dns_in-addrarpa_reverse_name_resolut
    "Figure 56-4. The DNS IN-ADDR.ARPA reverse name resolution hierarchy The special
    IN-ADDR.ARPA hierarchy was created to allow easy reverse lookups of DNS names.
    IN-ADDR.ARPA contains 256 subdomains numbered 0 to 255, each of which has 256
    subdomains numbered 0 to 255, and so forth, down to four levels. Thus, each IP
    address is represented in the hierarchy. This example shows the DNS domain name
    www.xyzindustries.com. It would have a conventional RR pointing to its IP address,
    191.27.203.8, as well as a reverse resolution record at 8.203.27.191.IN-ADDR.ARPA,
    pointing to the domain name www.xyzindustries.com.").
  id: totrans-893
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这一步后，可以通过对 8.203.27.191.in-addr.arpa 进行名称解析来轻松执行反向名称解析。如果我们这样做，IN-ADDR.ARPA
    域的服务器将返回给我们域名 [www.xyzindustries.com](http://www.xyzindustries.com)。这如图 [图 56-4](ch56s05.html#the_dns_in-addrarpa_reverse_name_resolut
    "图 56-4. DNS IN-ADDR.ARPA 反向名称解析层次结构 特殊的 IN-ADDR.ARPA 层次结构是为了允许轻松进行 DNS 名称的反向查找而创建的。IN-ADDR.ARPA
    包含 256 个子域，编号从 0 到 255，每个子域又有 256 个子域，编号从 0 到 255，以此类推，直到四个级别。因此，每个 IP 地址都在这个层次结构中有代表。这个例子显示了
    DNS 域名 www.xyzindustries.com。它将有一个指向其 IP 地址 191.27.203.8 的常规 RR，以及一个在 8.203.27.191.IN-ADDR.ARPA
    的反向解析记录，指向域名 www.xyzindustries.com。") 所示。
- en: Tip
  id: totrans-894
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Most name resolutions require that we transform a DNS domain
    name into an IP address. However, there are cases where we want to perform a *reverse
    name resolution*, by starting with an IP address and finding out what domain name
    matches it. This is difficult to do using the conventional DNS distributed name
    hierarchy, because there is no easy way to find the DNS server containing the
    entries for a particular IP address. To this end, a special hierarchy called *IN-ADDR.ARPA*
    was set up for reverse name lookups. This hierarchy contains four levels of numerical
    subdomains structured so that each IP address has its own node. The node for an
    IP address contains an entry that points to the DNS domain name associated with
    that address.'
  id: totrans-895
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 大多数名称解析都需要我们将 DNS 域名转换为 IP 地址。然而，有些情况下我们希望执行 *反向名称解析*，即从 IP 地址开始，找出与之匹配的域名。使用传统的
    DNS 分布式名称层次结构来做这件事是困难的，因为没有简单的方法可以找到包含特定 IP 地址条目的 DNS 服务器。为此，专门建立了一个名为 *IN-ADDR.ARPA*
    的特殊层次结构，用于反向名称查找。这个层次结构包含四个级别的数字子域，结构是这样的：每个 IP 地址都有一个自己的节点。IP 地址的节点包含一个指向与该地址相关联的
    DNS 域名的条目。'
- en: 'I''m sure you''ve noticed that the numbers are backward in the IN-ADDR.ARPA
    domain. We''ve already seen the reason for this: Name resolution proceeds from
    the least specific to the most specific element, going from right to left. In
    contrast, IP addresses have the least specific octet on the left and the most
    specific on the right. Thus, we reverse them to maintain consistency with the
    DNS name space.'
  id: totrans-896
  prefs: []
  type: TYPE_NORMAL
  zh: 我相信你已经注意到了 IN-ADDR.ARPA 域中的数字是倒序的。我们之前已经看到了这个原因：名称解析是从最不具体到最具体的元素进行的，从右到左进行。相比之下，IP
    地址的最不具体八位字节在左边，最具体的在右边。因此，我们将其反转以保持与 DNS 命名空间的连贯性。
- en: This immediately yields one extra benefit. Just as we can delegate authority
    for portions of the regular name space, for example, letting XYZ Industries be
    in charge of everything in [xyzindustries.com](http://xyzindustries.com), we can
    also delegate authority for parts of the IN-ADDR.ARPA name space. For example,
    since the Massachusetts Institute of Technology (MIT) owns all IP addresses with
    a first octet of 18 (at least, I think it still does), it is possible that if
    MIT wanted to, it could control the 18.IN-ADDR.ARPA domain as well for reverse
    queries. This would not be possible without reversing the octets.
  id: totrans-897
  prefs: []
  type: TYPE_NORMAL
  zh: 这立即带来一个额外的好处。正如我们可以将常规名称空间的部分权限委派出去，例如，让XYZ Industries负责[xyzindustries.com](http://xyzindustries.com)中的所有内容，我们也可以将IN-ADDR.ARPA名称空间的部分权限委派出去。例如，由于麻省理工学院（MIT）拥有所有以18为第一个八位的IP地址（至少，我认为它仍然如此），如果MIT想要的话，它也可以控制18.IN-ADDR.ARPA域名以及反向查询。没有反转八位字节，这是不可能的。
- en: Note that for this system to work reliably, it is essential that the data in
    the regular name space and the reverse name space remain consistent. Whenever
    a new DNS name is registered, an appropriate entry must be made within IN-ADDR.ARPA
    as well. Special procedures have been put into place to allow these pointer entries
    to be created automatically.
  id: totrans-898
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，为了使该系统可靠地工作，确保常规名称空间和反向名称空间中的数据保持一致是至关重要的。每当注册一个新的DNS名称时，必须在IN-ADDR.ARPA中做出适当的条目。已经实施了特殊程序，以允许自动创建这些指针条目。
- en: Tip
  id: totrans-899
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**RELATED INFORMATION** *A similar scheme using a different reverse domain
    is used for DNS under version 6 of the Internet Protocol (IPv6). See the end of
    [Chapter 57](ch57.html "Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD,
    AND MASTER FILE FORMATS") for more information*.'
  id: totrans-900
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关信息** *在互联网协议（IPv6）的第六版中，使用不同反向域的类似方案用于DNS。有关更多信息，请参阅[第57章](ch57.html "第57章。DNS消息和消息、资源记录和主文件格式"的结尾)*。'
- en: DNS Electronic Mail Support and Mail Exchange (MX) Resource Records
  id: totrans-901
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS电子邮件支持及邮件交换（MX）资源记录
- en: Most savvy users of the Internet know that DNS exists, and they usually associate
    it with the most common Internet applications. Of these applications, the "Big
    Kahuna" is the World Wide Web. It's probably the case that the majority of DNS
    name resolution requests are spawned as a result of web server domain names being
    typed into browsers billions of times a day, as well as requests for named pages
    generated by both user mouse clicks and web-based applications.
  id: totrans-902
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数聪明的互联网用户都知道DNS的存在，并且通常将它与最常用的互联网应用联系起来。在这些应用中，“大鲸鱼”就是万维网。可能的情况是，大多数DNS名称解析请求都是由于每天在浏览器中输入数十亿次Web服务器域名，以及由用户鼠标点击和基于Web的应用程序生成的命名页面请求而产生的。
- en: Of course, DNS is not tied specifically to any one application. We can specify
    names in any place where an IP address would go. For example, you can use a DNS
    name instead of an address for an FTP client, or even for a troubleshooting utility
    like traceroute or ping (see [Chapter 88](ch88.html "Chapter 88. TCP/IP ADMINISTRATION
    AND TROUBLESHOOTING UTILITIES AND PROTOCOLS")). The resolver will, in each case,
    take care of translating the name for you.
  id: totrans-903
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，DNS并非特定于任何单一的应用。我们可以在任何需要IP地址的地方指定名称。例如，你可以使用DNS名称而不是地址来指定FTP客户端，甚至用于故障排除工具如traceroute或ping（参见[第88章](ch88.html
    "第88章。TCP/IP管理和故障排除工具及协议")）。在每个情况下，解析器都会为你处理名称的转换。
- en: 'There''s one application that has always used DNS, but it''s one that doesn''t
    usually spring to mind when you think about DNS: electronic mail (discussed in
    [Part III-7](pt18.html "Part III-7. TCP/IP ELECTRONIC MAIL SYSTEM: CONCEPTS AND
    PROTOCOLS")). Electronic mail (email) is, in fact, more reliant on DNS than just
    about any other TCP/IP application. Consider that while you may sometimes type
    an IP address for a command like traceroute, or even type it into a browser, you
    probably have never sent anyone mail by entering [joe@14.194.29.60](mailto:joe@14.194.29.60)
    into your email client. You type something like [joe@xyzindustries.com](mailto:joe@xyzindustries.com),
    and DNS takes care of figuring out where email for XYZ Industries is to go.'
  id: totrans-904
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个应用始终使用DNS，但当你想到DNS时，它通常不会立刻出现在你的脑海中：电子邮件（在第III-7部分[pt18.html "第III-7部分。TCP/IP电子邮件系统：概念和协议"]中讨论）。实际上，电子邮件对DNS的依赖性比其他任何TCP/IP应用都要大。考虑一下，虽然你可能有时会为traceroute之类的命令输入IP地址，或者甚至将其输入浏览器，但你可能从未通过在电子邮件客户端输入[joe@14.194.29.60](mailto:joe@14.194.29.60)来给任何人发送过邮件。你输入的是[joe@xyzindustries.com](mailto:joe@xyzindustries.com)，DNS会负责确定XYZ
    Industries的电子邮件应该发送到哪里。
- en: Special Requirements for Email Name Resolution
  id: totrans-905
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 电子邮件名称解析的特殊要求
- en: 'Name resolution for email addresses is different from other applications in
    DNS, for three reasons (which I describe in more detail in the discussion of TCP/IP
    email addressing and address resolution in [Chapter 75](ch75.html "Chapter 75. TCP/IP
    ELECTRONIC MAIL ADDRESSES AND ADDRESSING")):'
  id: totrans-906
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件地址的名称解析与其他DNS应用不同，原因有三（我在第75章（"第75章. TCP/IP 电子邮件地址和地址解析"）的讨论中详细描述了这些原因）：
- en: We may not want email to go to the exact machine specified by the address.
  id: totrans-907
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可能不希望电子邮件直接发送到地址中指定的确切机器。
- en: We need to be able to change server names without changing everyone's email
    address.
  id: totrans-908
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要能够更改服务器名称，而无需更改每个人的电子邮件地址。
- en: We need to be able to support multiple servers for handling mail.
  id: totrans-909
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要能够支持多个服务器来处理邮件。
- en: For example, XYZ Industries might want to use a dedicated mail server called
    [mail.xyzindustries.com](http://mail.xyzindustries.com) to handle incoming mail,
    but actually construct all of its email addresses to use [@xyzindustries.com](mailto:@xyzindustries.com).
    This makes addresses shorter and allows the server's name to be changed without
    affecting user addresses. If the company wishes, it might decide to use two servers,
    [mail1.xyzindustries.com](http://mail1.xyzindustries.com) and [mail2.xyzindustries.com](http://mail2.xyzindustries.com),
    for redundancy, and again have just [@xyzindustries.com](mailto:@xyzindustries.com)
    for addresses.
  id: totrans-910
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，XYZ工业公司可能希望使用一个名为[mail.xyzindustries.com](http://mail.xyzindustries.com)的专用邮件服务器来处理收件邮件，但实际上构建所有电子邮件地址使用[@xyzindustries.com](mailto:@xyzindustries.com)。这使得地址更短，并且可以在不影响用户地址的情况下更改服务器的名称。如果公司愿意，它可能会决定使用两个服务器，[mail1.xyzindustries.com](http://mail1.xyzindustries.com)和[mail2.xyzindustries.com](http://mail2.xyzindustries.com)，以实现冗余，并且仍然只使用[@xyzindustries.com](mailto:@xyzindustries.com)作为地址。
- en: To allow the flexibility needed for these situations, a special DNS RR type,
    called a *Mail Exchange (MX)* record, is defined.
  id: totrans-911
  prefs: []
  type: TYPE_NORMAL
  zh: 为了允许这些情况下所需的灵活性，定义了一种特殊的DNS RR类型，称为*邮件交换（MX）记录*。
- en: The Mail Exchange (MX) Record and Its Use
  id: totrans-912
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 邮件交换（MX）记录及其用途
- en: 'Each MX record specifies a particular mail server that is to be used to handle
    incoming email for a particular domain. Once this record is established, resolution
    of email messages is pretty much similar to regular resolution. Suppose you want
    to send a message to [joe@xyzindustries.com](mailto:joe@xyzindustries.com). The
    basic process is as follows:'
  id: totrans-913
  prefs: []
  type: TYPE_NORMAL
  zh: 每个MX记录指定了一个特定的邮件服务器，用于处理特定域的收件邮件。一旦这个记录建立，电子邮件消息的解析基本上与常规解析相似。假设您想向[joe@xyzindustries.com](mailto:joe@xyzindustries.com)发送消息。基本过程如下：
- en: Your email client invokes the resolver on your local machine to perform an email
    resolution on [xyzindustries.com](http://xyzindustries.com).
  id: totrans-914
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的电子邮件客户端会在本地机器上调用解析器，以对[xyzindustries.com](http://xyzindustries.com)执行电子邮件解析。
- en: Your local resolver and local DNS server follow the process described earlier
    in this chapter to find the authoritative server for [xyzindustries.com](http://xyzindustries.com),
    which is [ns1.xyzindustries.com](http://ns1.xyzindustries.com).
  id: totrans-915
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的本地解析器和本地DNS服务器将遵循本章前面描述的过程，以找到[xyzindustries.com](http://xyzindustries.com)的授权服务器，即[ns1.xyzindustries.com](http://ns1.xyzindustries.com)。
- en: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com) finds the MX record for
    [xyzindustries.com](http://xyzindustries.com) and replies back indicating that
    [mail.xyzindustries.com](http://mail.xyzindustries.com) should be used for email.'
  id: totrans-916
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[ns1.xyzindustries.com](http://ns1.xyzindustries.com)找到[xyzindustries.com](http://xyzindustries.com)的MX记录，并回复指示应使用[mail.xyzindustries.com](http://mail.xyzindustries.com)进行电子邮件处理。'
- en: The email client can't actually send anything to [mail.xyzindustries.com](http://mail.xyzindustries.com);
    it needs its IP address. So, it would then need to resolve that name. This resolution
    request will likely end up right back at the same DNS name server that just handled
    the MX request. To eliminate the inefficiency of two separate resolutions, the
    DNS name server can combine the information. In our example, [ns1.xyzindustries.com](http://ns1.xyzindustries.com)
    will include the A (Address) RR for [mail.xyzindustries.com](http://mail.xyzindustries.com)
    in the Additional section of the DNS message that it sends in step 3.
  id: totrans-917
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件客户端实际上无法向[mail.xyzindustries.com](http://mail.xyzindustries.com)发送任何内容；它需要其IP地址。因此，它需要解析该名称。这个解析请求很可能会回到刚刚处理MX请求的同一个DNS名称服务器。为了消除两次单独解析的低效率，DNS名称服务器可以将信息合并。在我们的例子中，[ns1.xyzindustries.com](http://ns1.xyzindustries.com)将在它发送的DNS消息的附加部分中包含[mail.xyzindustries.com](http://mail.xyzindustries.com)的A（地址）RR。
- en: Note
  id: totrans-918
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*RFC 1035 originally defined several other RR types related to email as well:
    Mailbox (MB), Mail Group (MG), and Mail Rename (MR). These are called "experimental"
    in the standard. I think the experiment failed, whatever it was, because I don''t
    believe these are used today. There are also two even older mail-related RRs,
    Mail Destination (MD) and Mail Forwarder (MF), which must have been used at one
    time but were already obsolete at the time RFC 1035 itself was written*.'
  id: totrans-919
  prefs: []
  type: TYPE_NORMAL
  zh: '*RFC 1035最初还定义了与电子邮件相关的其他几种RR类型：邮箱（MB）、邮件组（MG）和邮件重命名（MR）。这些在标准中被称为“实验性的”。我认为无论实验是什么，它都失败了，因为这些在今天似乎没有被使用。还有两个更早的与邮件相关的RR，邮件目的地（MD）和邮件转发器（MF），它们肯定曾经被使用过，但在RFC
    1035本身被编写的时候就已经过时了*。'
- en: It is also possible to specify multiple MX records for a particular domain,
    each pointing to a different mail server's name. This provides redundancy, so
    if there is a problem with one mail server, another can pick up the slack. DNS
    allows each mail server to be specified with a *preference* value, so you can
    clearly indicate which is the main mail server, which is the first backup, the
    second backup, and so on. The DNS server will choose the mail server with the
    lowest preference value first, then the next highest one, and so on.
  id: totrans-920
  prefs: []
  type: TYPE_NORMAL
  zh: 对于特定的域名，也可以指定多个MX记录，每个记录指向不同的邮件服务器的名称。这提供了冗余性，因此如果有一个邮件服务器出现问题，另一个可以填补空缺。DNS允许为每个邮件服务器指定一个*优先级*值，这样您可以清楚地指出哪个是主邮件服务器，哪个是第一备份，第二备份，依此类推。DNS服务器将首先选择优先级值最低的邮件服务器，然后是下一个最高优先级的，依此类推。
- en: Tip
  id: totrans-921
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Since email is sent using host names and not IP addresses,
    DNS contains special provisions to support the transfer of email between sites.
    Special *Mail Exchange (MX)* DNS RRs are set up that contain the names of mail
    servers that a domain wants to use for handling incoming email. Before sending
    email to a site, a device performs a name resolution to get that site''s MX record,
    so it knows where to send the message.'
  id: totrans-922
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 由于电子邮件是通过主机名而不是IP地址发送的，因此DNS包含特殊规定以支持站点之间电子邮件的传输。设置了特殊的*邮件交换（MX）*
    DNS RR，其中包含域名想要用于处理传入电子邮件的邮件服务器名称。在向站点发送电子邮件之前，设备执行名称解析以获取该站点的MX记录，以便知道将消息发送到哪里。'
- en: Chapter 57. DNS MESSAGING AND MESSAGE, RESOURCE RECORD, AND MASTER FILE FORMATS
  id: totrans-923
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第57章. DNS消息和消息、资源记录以及主文件格式
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
  id: totrans-924
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages287681.png.jpg)'
- en: Networking is all about the communication of information between connected devices.
    In the case of the Domain Name System (DNS), information about names and objects
    on the internetwork is exchanged during each of the many types of operations DNS
    performs. This involves sending *messages* between devices. Like most protocols,
    DNS uses its own set of messages with distinct field formats, and it follows a
    particular set of rules for generating them and transporting them over the internetwork.
  id: totrans-925
  prefs: []
  type: TYPE_NORMAL
  zh: 网络完全是关于连接设备之间信息交流的。在域名系统（DNS）的情况下，在DNS执行的各种操作中的每一次，都会交换关于互联网上名称和对象的信息。这涉及到在设备之间发送*消息*。像大多数协议一样，DNS使用自己的一套消息，具有独特的字段格式，并遵循特定的规则来生成和通过互联网传输它们。
- en: In this chapter, I explain how messages are generated and sent in DNS, and I
    describe the formats used for messages and resource records (RRs). I begin with
    an overview discussion of DNS messages and how they are generated and transported.
    I provide an overview of the general DNS message format and the five sections
    it contains. I describe the notation used for names and the special compression
    method that helps keep DNS messages down in size. I then show the fields in the
    DNS message Header and Question section. I illustrate the common field format
    used for all RRs and the specific fields in the most important record types. I
    also provide a description of the format used for DNS text master files.
  id: totrans-926
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我解释了DNS中消息的生成和发送方式，并描述了用于消息和资源记录（RR）的格式。我首先对DNS消息及其生成和传输进行概述性讨论。我概述了通用DNS消息格式及其包含的五个部分。我描述了用于名称的表示法以及有助于保持DNS消息大小的特殊压缩方法。然后，我展示了DNS消息头和问题部分中的字段。我说明了用于所有RR的常见字段格式以及最重要的记录类型中的特定字段。我还提供了用于DNS文本主文件的格式描述。
- en: I conclude with a brief discussion of the changes made to DNS to support Internet
    Protocol version 6 (IPv6). Most of these changes (but not all of them) are associated
    with message formats and RRs, the subject of this chapter.
  id: totrans-927
  prefs: []
  type: TYPE_NORMAL
  zh: 我以对DNS为支持互联网协议版本6（IPv6）所做的更改的简要讨论作为结论。其中大部分更改（但并非全部）与消息格式和RR（本章节的主题）相关。
- en: Tip
  id: totrans-928
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**BACKGROUND INFORMATION** *This chapter assumes that you are already familiar
    with DNS concepts and operation as described in Chapters [Chapter 52](ch52.html
    "Chapter 52. DOMAIN NAME SYSTEM (DNS) OVERVIEW, FUNCTIONS, AND CHARACTERISTICS")
    through [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION CONCEPTS AND RESOLVER
    OPERATIONS")*.'
  id: totrans-929
  prefs: []
  type: TYPE_NORMAL
  zh: '**背景信息** *本章假设你已经熟悉DNS概念和操作，这些内容在[第52章](ch52.html "第52章。域名系统（DNS）概述、功能和特性")到[第56章](ch56.html
    "第56章。DNS解析概念和解析器操作")中已有描述*。'
- en: DNS Message Generation and Transport
  id: totrans-930
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS消息生成和传输
- en: 'In the preceding chapters in this part of the book, we have explored the many
    different tasks that servers and resolvers perform: regular name resolution, reverse
    name resolution, email resolution, zone transfers, and more. Each of these operations
    requires that information be exchanged between a pair of DNS devices. Like so
    many other TCP/IP protocols, DNS is designed to accomplish this information transfer
    using a *client/server* model. All DNS exchanges begin with a client sending a
    request and a server responding with an answer.'
  id: totrans-931
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书本部分的先前章节中，我们探讨了服务器和解析器执行的各种不同任务：常规名称解析、反向名称解析、电子邮件解析、区域传输等。这些操作中的每一个都需要在DNS设备对之间交换信息。像许多其他TCP/IP协议一样，DNS被设计用来通过客户端/服务器模型完成这种信息传输。所有DNS交换都以客户端发送请求和服务器响应答案开始。
- en: DNS Client/Server Messaging Overview
  id: totrans-932
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS客户端/服务器消息概述
- en: 'In [Chapter 8](ch08.html "Chapter 8. TCP/IP PROTOCOL SUITE AND ARCHITECTURE")''s
    overview of TCP/IP''s client/server nature, I explained a potential source of
    confusion regarding these terms: the fact that they refer to hardware roles, software
    roles, and transactional roles. This issue definitely applies when it comes to
    DNS. You''ve already seen that DNS implementation consists of two sets of software
    elements: resolvers that act as clients and name servers that are the servers.
    Resolver software usually runs on client machines like PCs, while name server
    software often runs on dedicated server hardware. However, these designations
    are based on the overall role of the hardware and software.'
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第8章](ch08.html "第8章。TCP/IP协议套件和架构概述")中对TCP/IP的客户端/服务器性质的概述中，我解释了关于这些术语的一个潜在的混淆来源：它们指的是硬件角色、软件角色和事务角色。这个问题在DNS的情况下肯定适用。你已经看到DNS实现由两组软件元素组成：作为客户端的解析器和作为服务器的域名服务器。解析器软件通常运行在客户端机器上，如PC，而域名服务器软件通常运行在专用服务器硬件上。然而，这些命名是基于硬件和软件的整体角色的。
- en: From a messaging viewpoint, the client is the initiator of the communication,
    regardless of what type of machine does this initiating, and the server is the
    device that responds to the client. A resolver usually acts as a client and a
    name server as a server. However, in a particular exchange, a DNS name server
    can act as a client, in at least two cases. First, in recursive name resolution,
    a server generates requests to others servers and therefore acts as a client.
    Second, in administrative functions like zone transfers, one server acts as a
    client and sends a request to another server. (There are no cases in DNS that
    I know of where a resolver acts as a server, incidentally.)
  id: totrans-934
  prefs: []
  type: TYPE_NORMAL
  zh: 从消息的角度来看，客户端是通信的发起者，无论这种发起是由哪种类型的机器完成的，服务器是响应客户端的设备。解析器通常充当客户端，域名服务器充当服务器。然而，在特定的交换中，DNS域名服务器可以充当客户端，至少有两种情况。首先，在递归名称解析中，服务器生成对其他服务器的请求，因此充当客户端。其次，在诸如区域传输之类的管理功能中，一个服务器充当客户端并向另一个服务器发送请求。（顺便说一句，据我所知，DNS中没有解析器充当服务器的案例。）
- en: Most transactions in DNS consist of the exchange of a single query message and
    a single response message. The device acting as client for the transaction creates
    the query and sends it to the server; the server then sends back a reply. In certain
    cases where a great deal of data needs to be sent, such as zone transfers, the
    server may send back multiple messages. Multiple such transactions may be required
    to perform a complete name resolution, as the example of the DNS resolution process
    in the previous chapter demonstrated.
  id: totrans-935
  prefs: []
  type: TYPE_NORMAL
  zh: DNS中的大多数事务都由单个查询消息和单个响应消息的交换组成。作为事务客户端的设备创建查询并发送给服务器；然后服务器发送回响应。在某些需要发送大量数据的情况下，例如区域传输，服务器可能会发送多个消息。可能需要多个此类事务才能完成完整的名称解析，正如前一章中DNS解析过程的示例所示。
- en: DNS Message Transport Using UDP and TCP
  id: totrans-936
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用UDP和TCP进行DNS消息传输
- en: 'TCP/IP has two different transport layer protocols: the User Datagram Protocol
    (UDP) and Transmission Control Protocol (TCP) (see [Part II-8](pt11.html "Part II-8. TCP/IP
    TRANSPORT LAYER PROTOCOLS")). UDP and TCP share layer 4 in the TCP/IP model, because
    they are so different in terms of capabilities and operation. Some application
    layer protocols need the services of TCP and can use it to take advantage of them,
    while others are better off with the simpler UDP. DNS is itself a perfect example
    of the valid reasons for having both UDP and TCP in the protocol suite (see [Chapter 42](ch42.html
    "Chapter 42. OVERVIEW AND COMPARISON OF TCP AND UDP")), because it uses both.'
  id: totrans-937
  prefs: []
  type: TYPE_NORMAL
  zh: TCP/IP有两个不同的传输层协议：用户数据报协议（UDP）和传输控制协议（TCP）（见[第二部分-8](pt11.html "第二部分-8. TCP/IP传输层协议")）。UDP和TCP在TCP/IP模型中共享第4层，因为它们在功能和操作方面非常不同。一些应用层协议需要TCP的服务，可以使用它来利用这些服务，而其他协议则更适合使用更简单的UDP。DNS本身就是在协议套件中同时拥有UDP和TCP的有效理由的完美例子（见[第42章](ch42.html
    "第42章. TCP和UDP的概述和比较")），因为它同时使用它们。
- en: UDP is a simple connectionless protocol that provides no real features but is
    very fast. It is ideally suited for small, quick exchanges of information and
    can be faster than TCP because there is no need to establish a connection. This
    makes it a good choice for most of the conventional queries used in DNS, because
    they are normally very short, and fast data exchange is important. For this reason,
    the DNS standards recommend use of UDP for queries and replies as part of regular
    and reverse name resolution. UDP DNS messages are limited to 512 bytes; longer
    messages are truncated, and a special bit in the header is set to indicate that
    this has occurred. If a message being truncated causes a problem for its recipient,
    the query must be repeated using TCP.
  id: totrans-938
  prefs: []
  type: TYPE_NORMAL
  zh: UDP是一种简单的无连接协议，它不提供真正的功能但非常快速。它非常适合小而快速的信息交换，并且可以比TCP更快，因为不需要建立连接。这使得它成为DNS中大多数传统查询的好选择，因为它们通常非常短，快速的数据交换很重要。因此，DNS标准建议在常规和反向名称解析中使用UDP进行查询和回复。UDP
    DNS消息限制为512字节；较长的消息将被截断，并且头部中设置了一个特殊位来指示这种情况。如果被截断的消息对其接收者造成问题，则必须使用TCP重新发送查询。
- en: Note
  id: totrans-939
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*The 512-byte limit on DNS UDP messages can be surpassed if the optional Extension
    Mechanisms for DNS (EDNS0) are implemented. These are described in RFC 2671*.'
  id: totrans-940
  prefs: []
  type: TYPE_NORMAL
  zh: '*DNS UDP消息的512字节限制可以通过实现可选的DNS扩展机制（EDNS0）来超越。这些机制在RFC 2671中有描述*。'
- en: Since UDP does not provide reliable delivery of messages, DNS clients must keep
    track of requests they have sent. If no response is received after a particular
    amount of time, the request must be retransmitted. The need to take care of these
    details is considered an acceptable trade-off for the lower setup costs involved
    with UDP, such as not requiring a connection. The rate at which retransmissions
    are sent is usually set at a minimum of two to five seconds to prevent excessive
    DNS traffic on the internetwork.
  id: totrans-941
  prefs: []
  type: TYPE_NORMAL
  zh: 由于UDP不提供消息的可靠交付，DNS客户端必须跟踪它们已发送的请求。如果在特定时间内没有收到响应，则必须重新发送请求。处理这些细节的需要被认为是与UDP的低设置成本（例如，不需要连接）的可接受的权衡。重传的发送速率通常设置为至少每两到五秒，以防止在互联网上产生过多的DNS流量。
- en: For certain special DNS transactions, UDP is simply inappropriate. The most
    common example of such a transaction is a zone transfer. While the query for a
    zone transfer is small in size, the amount of data sent in response can be quite
    large. The limit of 512 bytes for UDP is not even close to enough. Furthermore,
    we really do need to make sure that a zone transfer is accomplished reliably and
    with flow control and other data transfer management features, or we risk having
    corrupted zone information in our secondary DNS server databases.
  id: totrans-942
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某些特殊的DNS事务，UDP显然是不合适的。这类事务中最常见的例子是区域传输。虽然区域传输的查询大小很小，但响应发送的数据量可能相当大。UDP的512字节限制甚至远远不够。此外，我们确实需要确保区域传输能够可靠地完成，并具有流量控制和其它数据传输管理功能，否则我们可能会在辅助DNS服务器数据库中拥有损坏的区域信息。
- en: The solution is to use TCP for these types of exchanges. TCP allows messages
    to be of arbitrary length, and as a connection-oriented, acknowledged, reliable
    protocol, automatically provides the mechanisms we need to ensure that zone transfers
    and other lengthy operations complete successfully. The cost is the small amount
    of overhead needed to establish the connection, but since zone transfers are infrequent
    (compared to the sheer volume of regular name resolutions), this is not a problem.
  id: totrans-943
  prefs: []
  type: TYPE_NORMAL
  zh: 解决方案是使用TCP进行这些类型的交换。TCP允许消息具有任意长度，作为一个面向连接、确认、可靠的协议，自动提供我们确保区域传输和其他长时间操作成功完成的机制。代价是需要建立连接的小量开销，但鉴于区域传输不频繁（与常规名称解析的巨大数量相比），这并不是问题。
- en: You can see how DNS nicely illustrates the roles of both TCP and UDP in TCP/IP.
    Since both transport protocols can be used, name servers listen for UDP and TCP
    requests on the same well-known port number, 53\. The device acting as the client
    uses an ephemeral port number for the transaction. All DNS messages are sent unicast
    from one device directly to another.
  id: totrans-944
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以了解到DNS如何很好地说明了TCP和UDP在TCP/IP中的作用。由于这两种传输协议都可以使用，域名服务器在同一个众所周知的端口号53上监听UDP和TCP请求。作为客户端的设备使用一个临时端口号进行事务处理。所有DNS消息都是单播从一台设备直接发送到另一台设备。
- en: Tip
  id: totrans-945
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** DNS uses both UDP and TCP to send messages. Conventional message
    exchanges are short, and thus well suited to the use of the very fast UDP; DNS
    itself handles the detection and retransmission of lost requests. For larger or
    more important exchanges of information, especially zone transfers, TCP is used—both
    for its reliability and its ability to handle messages of any size.'
  id: totrans-946
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS使用UDP和TCP发送消息。常规的消息交换很短，因此非常适合使用非常快速的UDP；DNS本身处理丢失请求的检测和重传。对于更大或更重要的信息交换，尤其是区域传输，使用TCP——既因为其可靠性，也因为它能够处理任意大小的消息。'
- en: DNS Message Processing and General Message Format
  id: totrans-947
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS消息处理和通用消息格式
- en: As we've just discussed, DNS message exchanges are all based on the principle
    of client/server computing. In a particular exchange, one device acts as a client,
    initiating the communication by sending a query; the other acts as the server
    by responding to the query with an answer. This query/response behavior is an
    integral part of DNS, and it is reflected in the format used for DNS messages.
  id: totrans-948
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们刚才讨论的，DNS消息交换都是基于客户端/服务器计算的原则。在特定的交换中，一台设备充当客户端，通过发送查询来启动通信；另一台设备充当服务器，通过回答查询来响应。这种查询/响应行为是DNS的一个基本组成部分，并在DNS消息的格式中得到体现。
- en: A common message format is used for DNS queries and responses. This message
    format contains five sections that provide a place for the query asked by the
    client, the answer(s) provided by the server, and header information that controls
    the entire process. [Table 57-1](ch57.html#dns_general_message_format-id001 "Table 57-1. DNS
    General Message Format") describes the DNS general message format, providing a
    brief summary of each of its sections and how they are used. You can also see
    a simplified illustration of the message format in [Figure 57-1](ch57.html#dns_general_message_format-id002
    "Figure 57-1. DNS general message format").
  id: totrans-949
  prefs: []
  type: TYPE_NORMAL
  zh: DNS查询和响应使用一个常见的消息格式。这个消息格式包含五个部分，为客户端提出的查询、服务器提供的答案以及控制整个过程的头部信息提供了位置。[表57-1](ch57.html#dns_general_message_format-id001
    "表57-1. DNS通用消息格式")描述了DNS通用消息格式，提供了每个部分的简要总结及其使用方法。您还可以在[图57-1](ch57.html#dns_general_message_format-id002
    "图57-1. DNS通用消息格式")中看到消息格式的简化示意图。
- en: Table 57-1. DNS General Message Format
  id: totrans-950
  prefs: []
  type: TYPE_NORMAL
  zh: 表57-1. DNS通用消息格式
- en: '| Section Name | Description |'
  id: totrans-951
  prefs: []
  type: TYPE_TB
  zh: '| 部分名称 | 描述 |'
- en: '| --- | --- |'
  id: totrans-952
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Header | Contains fields that describe the type of message and provide important
    information about it. Also contains fields that indicate the number of entries
    in the other sections of the message. |'
  id: totrans-953
  prefs: []
  type: TYPE_TB
  zh: '| 头部 | 包含描述消息类型并提供有关其重要信息的字段。还包含指示消息其他部分条目数的字段。 |'
- en: '| Question | Carries one or more questions—that is, queries for information
    being sent to a DNS name server. |'
  id: totrans-954
  prefs: []
  type: TYPE_TB
  zh: '| 问题 | 包含一个或多个问题——即发送到DNS名称服务器的信息查询。 |'
- en: '| Answer | Carries one or more RRs that answer the question(s) indicated in
    the Question section. |'
  id: totrans-955
  prefs: []
  type: TYPE_TB
  zh: '| 答案 | 包含一个或多个RR（资源记录），用于回答问题部分中指出的一个问题或多个问题。 |'
- en: '| Authority | Contains one or more RRs that point to authoritative name servers
    that can be used to continue the resolution process. |'
  id: totrans-956
  prefs: []
  type: TYPE_TB
  zh: '| 权限 | 包含一个或多个指向权威名称服务器的RR（资源记录），这些服务器可用于继续解析过程。 |'
- en: '| Additional | Conveys one or more RRs that contain additional information
    related to the query that is not strictly necessary to answer the queries (questions)
    in the message. |'
  id: totrans-957
  prefs: []
  type: TYPE_TB
  zh: '| 附加 | 传达一个或多个RR（资源记录），这些RR包含与查询相关的附加信息，这些信息对于严格回答消息中的查询（问题）不是必需的。 |'
- en: The Header section is always present in all messages and is fixed in length.
    In addition to containing important DNS control information, it has a flag (QR)
    that indicates whether a message is a query or a response. It also has four "count"
    fields that tell the recipient the number of entries in the other four sections.
  id: totrans-958
  prefs: []
  type: TYPE_NORMAL
  zh: 头部部分始终存在于所有消息中，并且长度固定。除了包含重要的DNS控制信息外，它还有一个标志（QR），指示消息是查询还是响应。它还具有四个“计数”字段，告诉接收者其他四个部分中的条目数。
- en: When a client initiates a query, it creates a message with the fields in the
    Header section filled in, and one or more queries (requests for information) in
    the Question section. It sets the QR flag to 0 to indicate that this is a query,
    and it places a number in the QDCount field of the header that indicates the number
    of questions in the Question section. The number of entries in the other sections
    are usually 0, so their count fields (ANCount, NSCount, and ARCount) are set to
    0 in the header. (Although more than one question can be put into a query, usually
    only one is included.)
  id: totrans-959
  prefs: []
  type: TYPE_NORMAL
  zh: 当客户端发起查询时，它会创建一个消息，其中包含已填写在头部部分的字段，并在问题部分中包含一个或多个查询（信息请求）。它将QR（查询/响应）标志设置为0，以指示这是一个查询，并在头部部分的QDCount字段中放置一个数字，该数字表示问题部分中的问题数量。其他部分的条目数通常为0，因此它们的计数字段（ANCount、NSCount和ARCount）在头部部分中设置为0。（尽管可以将多个问题放入一个查询中，但通常只包含一个。）
- en: '![DNS general message format](httpatomoreillycomsourcenostarchimages288179.png)'
  id: totrans-960
  prefs: []
  type: TYPE_IMG
  zh: '![DNS通用消息格式](httpatomoreillycomsourcenostarchimages288179.png)'
- en: Figure 57-1. DNS general message format
  id: totrans-961
  prefs: []
  type: TYPE_NORMAL
  zh: 图57-1. DNS通用消息格式
- en: When the server receives the query, it processes it and performs the information
    retrieval operation requested (if it can). It then uses the query as the basis
    for its response message. The Header and Question sections are copied to the response
    message, and the QR flag is set to 1 to indicate that the message is a reply.
    Certain fields are also changed in the Header section to provide information back
    to the client. For example, the server sets the RCode (Response Code) field to
    indicate whether the query was successful or if an error occurred, and if one
    did occur, to indicate what the problem was. The next section of this chapter
    illustrates all the Header fields and indicates how each is used by both client
    and server.
  id: totrans-962
  prefs: []
  type: TYPE_NORMAL
  zh: 当服务器接收到查询时，它会处理它并执行请求的信息检索操作（如果可以的话）。然后，它使用查询作为其响应消息的基础。头部和问题部分被复制到响应消息中，并将QR标志设置为1，以指示该消息是回复。头部部分的一些字段也会更改，以向客户端提供信息。例如，服务器将RCode（响应代码）字段设置为指示查询是否成功或是否发生错误，如果发生错误，则指示问题所在。本章的下一节将说明所有头部字段，并说明客户端和服务器如何使用每个字段。
- en: 'The server is also responsible for filling in the other three sections of the
    message: Answer, Authority, and Additional. These sections share the same basic
    format, each carrying one or more RRs that use a common record format. The number
    of records in each section is indicated using the count fields in the message
    header. The sections differ only in terms of the types of records they carry.
    Answer records are directly related to the question asked, while Authority records
    carry RRs that identify other name servers. Authority records are thus the means
    by which name servers are hierarchically linked when the server doesn''t have
    the information the client requested.'
  id: totrans-963
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器还负责填写消息的其他三个部分：答案、授权和附加。这些部分具有相同的基本格式，每个部分都携带一个或多个使用通用记录格式的RR。每个部分中的记录数量由消息头中的计数字段指示。这些部分的不同之处仅在于它们携带的记录类型。答案记录与提出的问题直接相关，而授权记录携带标识其他名称服务器的RR。因此，当服务器没有客户端请求的信息时，授权记录是名称服务器通过层次结构链接的手段。
- en: The Additional section exists for the specific purpose of improving DNS efficiency.
    There are cases where a server supplies an answer to a query that it has reason
    to believe will lead to a subsequent question that the server can also answer.
    For example, suppose a server provides the name of another name server in the
    Authority section (an NS RR). The client may not have the address for that server,
    which would mean it must perform an extra name resolution to contact the referenced
    server. If the server providing the NS record already knows the IP address for
    this name server, it can include it in the Additional section. The same goes for
    a server providing an MX record as I explained in the discussion of DNS mail support
    in the previous chapter.
  id: totrans-964
  prefs: []
  type: TYPE_NORMAL
  zh: 附加部分的存在是为了特定地提高DNS效率。有些情况下，服务器会提供一个答案，它有理由相信这将导致一个后续问题，该服务器也可以回答。例如，假设服务器在授权部分（一个NS
    RR）中提供了另一个名称服务器的名称。客户端可能没有该服务器的地址，这意味着它必须执行额外的名称解析才能联系引用的服务器。如果提供NS记录的服务器已经知道该名称服务器的IP地址，它可以将它包含在附加部分中。正如我在上一章关于DNS邮件支持的讨论中所解释的，提供MX记录的服务器也是如此。
- en: Tip
  id: totrans-965
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** DNS uses a general message format for all messages. It consists
    of a fixed 12-byte header, a Question section that contains a query, and then
    three additional sections that can carry RRs of different types. The Answer section
    usually contains records that directly answer the question of the message; the
    Authority section holds the names of name servers being sent back to the client;
    and the Additional section holds extra information that may be of value to the
    client, such as the IP address of a name server mentioned in the Authority section.'
  id: totrans-966
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** DNS为所有消息使用一个通用的消息格式。它由一个固定的12字节头部、包含查询的问题部分，以及随后可以携带不同类型RR的三个附加部分组成。答案部分通常包含直接回答消息中问题的记录；授权部分包含发送回客户端的名称服务器名称；附加部分包含可能对客户端有价值的信息，例如在授权部分中提到的名称服务器的IP地址。'
- en: Another optimization by DNS is a special compression technique used to reduce
    the size of DNS messages. This is explained in the "DNS Name Notation and Message
    Compression" section later in this chapter.
  id: totrans-967
  prefs: []
  type: TYPE_NORMAL
  zh: DNS的另一个优化是使用一种特殊的压缩技术来减少DNS消息的大小。这将在本章后面的“DNS名称表示法和消息压缩”部分进行解释。
- en: Note that the special Notify and Update messages use a different format than
    the regular DNS query/response messages. These special messages (whose use is
    described in the section about DNS server enhancements in [Chapter 55](ch55.html
    "Chapter 55. DNS NAME SERVER CONCEPTS AND OPERATION")) are based on the regular
    format but with the meanings of certain fields changed. You can find these field
    formats in RFC 1996 and RFC 2136, respectively.
  id: totrans-968
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，特殊的“通知”和“更新”消息的格式与常规DNS查询/响应消息不同。这些特殊消息（其使用方法在[第55章](ch55.html "第55章。DNS名称服务器概念和操作")中关于DNS服务器增强的部分进行描述）基于常规格式，但某些字段的含义已改变。您可以在RFC
    1996和RFC 2136中找到这些字段格式。
- en: 'The client/server information exchange in DNS is facilitated using query/response
    messaging. Both queries and responses have the same general format, containing
    up to five individual sections carrying information. Of these, two are usually
    found in both queries and responses: the Header section and the Question section.
    We will look at these two sections first, and then examine the RR formats used
    by servers for the other three message sections.'
  id: totrans-969
  prefs: []
  type: TYPE_NORMAL
  zh: DNS中的客户端/服务器信息交换是通过查询/响应消息来实现的。查询和响应具有相同的一般格式，包含最多五个独立部分，携带信息。其中，两个通常在查询和响应中都存在：头部部分和问题部分。我们将首先查看这两个部分，然后检查服务器用于其他三个消息部分的RR格式。
- en: DNS Message Header Format
  id: totrans-970
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS消息头格式
- en: The header is the most important part of any message, since it is where critical
    control fields are carried. In DNS messages, the Header section carries several
    key control flags, and it also indicates which of the other sections are used
    in the message. Examining the Header section can help you understand several of
    the nuances of how messaging works in DNS.
  id: totrans-971
  prefs: []
  type: TYPE_NORMAL
  zh: 头部是任何消息最重要的部分，因为它是关键控制字段携带的地方。在DNS消息中，头部部分携带了几个关键控制标志，并且它还指示消息中使用了哪些其他部分。检查头部部分可以帮助你理解DNS中消息工作的一些细微之处。
- en: The format of the Header section used in all DNS messages is illustrated in
    [Figure 57-2](ch57s02.html#dns_message_header_format-id002 "Figure 57-2. DNS message
    header format") and described in detail in Tables [Table 57-2](ch57s02.html#dns_message_header_format-id001
    "Table 57-2. DNS Message Header Format"), [Table 57-3](ch57s02.html#header_opcode_values
    "Table 57-3. Header OpCode Values"), and [Table 57-4](ch57s02.html#header_rcode_values
    "Table 57-4. Header RCode Values"). Where fields are used differently by the client
    and server in an exchange, I have mentioned in [Table 57-2](ch57s02.html#dns_message_header_format-id001
    "Table 57-2. DNS Message Header Format") how the use is differentiated between
    the two.
  id: totrans-972
  prefs: []
  type: TYPE_NORMAL
  zh: 所有DNS消息中使用的头部部分格式如图[图57-2](ch57s02.html#dns_message_header_format-id002 "图57-2.
    DNS消息头部格式")所示，并在表[表57-2](ch57s02.html#dns_message_header_format-id001 "表57-2.
    DNS消息头部格式")、[表57-3](ch57s02.html#header_opcode_values "表57-3. 头部操作码值")和[表57-4](ch57s02.html#header_rcode_values
    "表57-4. 头部响应码值")中详细描述。在交换中，客户端和服务器使用不同的字段时，我在[表57-2](ch57s02.html#dns_message_header_format-id001
    "表57-2. DNS消息头部格式")中提到了如何在这两个之间区分使用。
- en: Note that the current lists of valid question types, query operation codes,
    and response codes are maintained by the Internet Assigned Numbers Authority (IANA)
    as one of its many lists of Internet parameters. Response codes 0 to 5 are part
    of regular DNS and are defined in RFC 1035; codes 6 to 10 implement Dynamic DNS
    and are defined in RFC 2136.
  id: totrans-973
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，当前有效的查询类型、查询操作码和响应码列表由互联网数字分配机构（IANA）作为其众多互联网参数列表之一维护。响应码0到5是常规DNS的一部分，并在RFC
    1035中定义；码6到10实现了动态DNS，并在RFC 2136中定义。
- en: Table 57-2. DNS Message Header Format
  id: totrans-974
  prefs: []
  type: TYPE_NORMAL
  zh: 表57-2. DNS消息头部格式
- en: '| Field Name | Size (Bytes) | Description |'
  id: totrans-975
  prefs: []
  type: TYPE_TB
  zh: '| 字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-976
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| ID | 2 | Identifier: A 16-bit identification field generated by the device
    that creates the DNS query. It is copied by the server into the response, so it
    can be used by that device to match that query to the corresponding reply received
    from a DNS server. This is used in a manner similar to how the Identifier field
    is used in many of the Internet Control Message Protocol (ICMP) message types.
    |'
  id: totrans-977
  prefs: []
  type: TYPE_TB
  zh: '| ID | 2 | 标识符：由创建DNS查询的设备生成的16位标识字段。服务器将其复制到响应中，因此该设备可以使用它将查询与从DNS服务器收到的相应回复匹配。这类似于在许多互联网控制消息协议（ICMP）消息类型中使用的标识符字段的方式。|'
- en: '| QR | 1/8 (1 bit) | Query/Response Flag: Differentiates between queries and
    responses. Set to 0 when the query is generated; changed to 1 when that query
    is changed to a response by a replying server. |'
  id: totrans-978
  prefs: []
  type: TYPE_TB
  zh: '| QR | 1/8 (1位) | 查询/响应标志：区分查询和响应。当查询生成时设置为0；当响应服务器将该查询转换为响应时，更改为1。|'
- en: '| OpCode | 1/2 (4 bits) | Operation Code: Specifies the type of query the message
    is carrying. This field is set by the creator of the query and copied unchanged
    into the response. See [Table 57-3](ch57s02.html#header_opcode_values "Table 57-3. Header
    OpCode Values") for the OpCode values. |'
  id: totrans-979
  prefs: []
  type: TYPE_TB
  zh: '| OpCode | 1/2 (4位) | 操作码：指定消息携带的查询类型。此字段由查询的创建者设置，并在响应中不变地复制。有关操作码值，请参阅[表57-3](ch57s02.html#header_opcode_values
    "表57-3. 头部操作码值")。|'
- en: '| AA | 1/8 (1 bit) | Authoritative Answer Flag: This bit is set to 1 in a response
    to indicate that the server that created the response is authoritative for the
    zone in which the domain name specified in the Question section is located. If
    it is 0, the response is non-authoritative. |'
  id: totrans-980
  prefs: []
  type: TYPE_TB
  zh: '| AA | 1/8 (1 bit) | 权威回答标志：在响应中设置为1，表示创建响应的服务器是位于问题部分中指定的域名所在区域的权威服务器。如果为0，则响应非权威。
    |'
- en: '| TC | 1/8 (1 bit) | Truncation Flag: When set to 1, indicates that the message
    was truncated due to its length being longer than the maximum permitted for the
    type of transport mechanism used. TCP doesn''t have a length limit for messages;
    UDP messages are limited to 512 bytes, so this bit being sent usually is an indication
    that the message was sent using UDP and was too long to fit. The client may need
    to establish a TCP session to get the full message. On the other hand, if the
    portion truncated was part of the Additional section, it may choose not to bother.
    |'
  id: totrans-981
  prefs: []
  type: TYPE_TB
  zh: '| TC | 1/8 (1 bit) | 截断标志：当设置为1时，表示消息由于长度超过所使用的传输机制允许的最大长度而被截断。TCP没有消息长度限制；UDP消息限制为512字节，因此发送此位通常表示消息使用UDP发送且过长无法适应。客户端可能需要建立TCP会话以获取完整消息。另一方面，如果截断的部分是额外部分的一部分，它可以选择不麻烦。
    |'
- en: '| RD | 1/8 (1 bit) | Recursion Desired: When set in a query, requests that
    the server receiving the query attempt to answer the query recursively, if the
    server supports recursive resolution. The value of this bit is not changed in
    the response. |'
  id: totrans-982
  prefs: []
  type: TYPE_TB
  zh: '| RD | 1/8 (1 bit) | 递归期望：当在查询中设置时，请求接收查询的服务器尝试递归地回答查询，如果服务器支持递归解析。此位的值在响应中不改变。
    |'
- en: '| RA | 1/8 (1 bit) | Recursion Available: Set to 1 or cleared to 0 in a response
    to indicate whether the server creating the response supports recursive queries.
    This can then be noted by the device that sent the query for future use. |'
  id: totrans-983
  prefs: []
  type: TYPE_TB
  zh: '| RA | 1/8 (1 bit) | 递归可用：在响应中设置为1或清除为0，以指示创建响应的服务器是否支持递归查询。这可以由发送查询的设备记录下来以供将来使用。
    |'
- en: '| Z | 3/8 (3 bits) | Zero: Three reserved bits set to 0. |'
  id: totrans-984
  prefs: []
  type: TYPE_TB
  zh: '| Z | 3/8 (3 bits) | 零：三个保留位设置为0。 |'
- en: '| RCode | 1/2 (4 bits) | Response Code: Set to 0 in queries, then changed by
    the replying server in a response to convey the results of processing the query.
    This field is used to indicate if the query was answered successfully or if some
    sort of error occurred. See [Table 57-4](ch57s02.html#header_rcode_values "Table 57-4. Header
    RCode Values") for the RCode values. |'
  id: totrans-985
  prefs: []
  type: TYPE_TB
  zh: '| RCode | 1/2 (4 bits) | 响应代码：在查询中设置为0，然后由响应服务器在响应中更改以传达查询处理的结果。此字段用于指示查询是否成功回答或是否发生了某种错误。请参阅[表57-4](ch57s02.html#header_rcode_values
    "表57-4. Header RCode Values")以获取RCode值。 |'
- en: '| QDCount | 2 | Question Count: Specifies the number of questions in the Question
    section of the message. |'
  id: totrans-986
  prefs: []
  type: TYPE_TB
  zh: '| QDCount | 2 | 问题计数：指定消息中问题部分的题目数量。 |'
- en: '| ANCount | 2 | Answer Record Count: Specifies the number of RRs in the Answer
    section of the message. |'
  id: totrans-987
  prefs: []
  type: TYPE_TB
  zh: '| ANCount | 2 | 答案记录计数：指定消息中答案部分的RR数量。 |'
- en: '| ARCount | 2 | Additional Record Count: Specifies the number of RRs in the
    Additional section of the message. |'
  id: totrans-988
  prefs: []
  type: TYPE_TB
  zh: '| ARCount | 2 | 额外记录计数：指定消息中额外部分的RR数量。 |'
- en: Table 57-3. Header OpCode Values
  id: totrans-989
  prefs: []
  type: TYPE_NORMAL
  zh: 表57-3. Header OpCode Values
- en: '| OpCode Value | Query Name | Description |'
  id: totrans-990
  prefs: []
  type: TYPE_TB
  zh: '| OpCode Value | 查询名称 | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-991
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 0 | Query | A standard query. |'
  id: totrans-992
  prefs: []
  type: TYPE_TB
  zh: '| 0 | Query | 标准查询。 |'
- en: '| 1 | IQuery | An inverse query; now obsolete. RFC 1035 defines the inverse
    query as an optional method for performing inverse DNS lookups; that is, finding
    a name from an IP address. Due to implementation difficulties, the method was
    never widely deployed, however, in favor of reverse mapping using the IN-ADDR.ARPA
    domain. Use of this OpCode value was formally obsoleted in RFC 3425, November
    2002. |'
  id: totrans-993
  prefs: []
  type: TYPE_TB
  zh: '| 1 | IQuery | 反向查询；现已废弃。RFC 1035将反向查询定义为执行反向DNS查找的可选方法；即，从IP地址找到名称。由于实施困难，该方法从未得到广泛部署，而是使用IN-ADDR.ARPA域名进行反向映射。OpCode值的这种使用在RFC
    3425中正式废弃，发布于2002年11月。 |'
- en: '| 2 | Status | A server status request. |'
  id: totrans-994
  prefs: []
  type: TYPE_TB
  zh: '| 2 | Status | 服务器状态请求。 |'
- en: '| 3 | Reserved | Reserved, not used. |'
  id: totrans-995
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 保留 | 保留，未使用。 |'
- en: '| 4 | Notify | A special message type added by RFC 1996\. It is used by a primary
    (master, authoritative) server to tell secondary servers that data for a zone
    has changed and prompt them to request a zone transfer. See the discussion of
    DNS server enhancements in [Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER
    CONCEPTS AND OPERATION") for more details. |'
  id: totrans-996
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 通知 | RFC 1996 添加的一种特殊消息类型。它由主（主服务器、授权服务器）服务器用于告知辅助服务器（从服务器）某个区域的数据已更改，并提示它们请求区域传输。有关
    DNS 服务器增强功能的讨论，请参阅 [第 55 章](ch55.html "第 55 章. DNS 命名服务器概念和操作") 以获取更多详细信息。'
- en: '| 5 | Update | A special message type added by RFC 2136 to implement Dynamic
    DNS. It allows RRs to be added, deleted, or updated selectively. See the discussion
    of DNS server enhancements in [Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER
    CONCEPTS AND OPERATION") for more details. |'
  id: totrans-997
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 更新 | RFC 2136 添加的一种特殊消息类型，用于实现动态 DNS。它允许选择性地添加、删除或更新 RR。有关 DNS 服务器增强功能的讨论，请参阅
    [第 55 章](ch55.html "第 55 章. DNS 命名服务器概念和操作") 以获取更多详细信息。'
- en: Table 57-4. Header RCode Values
  id: totrans-998
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-4. 头部 RCode 值
- en: '| RCode Value | Response Code | Description |'
  id: totrans-999
  prefs: []
  type: TYPE_TB
  zh: '| RCode 值 | 响应代码 | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1000
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | ---'
- en: '| 0 | No Error | No error occurred. |'
  id: totrans-1001
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 无错误 | 未发生错误。'
- en: '| 1 | Format Error | The server was unable to respond to the query due to a
    problem with how it was constructed. |'
  id: totrans-1002
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 格式错误 | 服务器由于查询构建方式的问题无法响应用户查询。'
- en: '| 2 | Server Failure | The server was unable to respond to the query due to
    a problem with the server itself. |'
  id: totrans-1003
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 服务器故障 | 服务器由于自身问题无法响应用户查询。'
- en: '| 3 | Name Error | The name specified in the query does not exist in the domain.
    This code can be used by an authoritative server for a zone (since it knows all
    the objects and subdomains in a domain) or by a caching server that implements
    negative caching. |'
  id: totrans-1004
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 名称错误 | 查询中指定的名称在域名中不存在。此代码可以由区域（因为区域服务器知道域名中的所有对象和子域）的授权服务器或实现负缓存的缓存服务器使用。'
- en: '| 4 | Not Implemented | The type of query received is not supported by the
    server. |'
  id: totrans-1005
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 未实现 | 接收到的查询类型不受服务器支持。'
- en: '| 5 | Refused | The server refused to process the query, generally for policy
    reasons and not technical ones. For example, certain types of operations, such
    as zone transfers, are restricted. The server will honor a zone transfer request
    only from certain devices. |'
  id: totrans-1006
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 拒绝 | 服务器拒绝处理查询，通常是由于策略原因而不是技术原因。例如，某些类型的操作，如区域传输，受到限制。服务器只会从某些设备处尊重区域传输请求。'
- en: '| 6 | YX Domain | A name exists when it should not. |'
  id: totrans-1007
  prefs: []
  type: TYPE_TB
  zh: '| 6 | YX 域 | 当不应存在名称时存在名称。'
- en: '| 7 | YX RR Set | An RR set exists that should not. |'
  id: totrans-1008
  prefs: []
  type: TYPE_TB
  zh: '| 7 | YX RR 集合 | 存在不应存在的 RR 集合。'
- en: '| 8 | NX RR Set | An RR set that should exist does not. |'
  id: totrans-1009
  prefs: []
  type: TYPE_TB
  zh: '| 8 | NX RR 集合 | 应存在的 RR 集合不存在。'
- en: '| 9 | Not Auth | The server receiving the query is not authoritative for the
    zone specified. |'
  id: totrans-1010
  prefs: []
  type: TYPE_TB
  zh: '| 9 | 非授权 | 接收查询的服务器不是指定区域的授权服务器。'
- en: '| 10 | Not Zone | A name specified in the message is not within the zone specified
    in the message. |'
  id: totrans-1011
  prefs: []
  type: TYPE_TB
  zh: '| 10 | 非区域 | 消息中指定的名称不在消息中指定的区域内。'
- en: '![DNS message header format](httpatomoreillycomsourcenostarchimages288181.png.jpg)'
  id: totrans-1012
  prefs: []
  type: TYPE_IMG
  zh: '![DNS 消息头部格式](httpatomoreillycomsourcenostarchimages288181.png.jpg)'
- en: Figure 57-2. DNS message header format
  id: totrans-1013
  prefs: []
  type: TYPE_NORMAL
  zh: 图 57-2. DNS 消息头部格式
- en: DNS Question Section Format
  id: totrans-1014
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS 问题部分格式
- en: DNS queries always contain at least one entry in the Question section that specifies
    what the client in the exchange is trying to find out. These entries are copied
    to the response message unchanged, for reference on the part of the client if
    needed. The format used for each entry in the Question section of a DNS message
    described in detail in Tables [Table 57-5](ch57s03.html#dns_message_question_section_format
    "Table 57-5. DNS Message Question Section Format") and [Table 57-6](ch57s03.html#question_section_qtype_values
    "Table 57-6. Question Section QType Values"), and illustrated in [Figure 57-3](ch57s03.html#dns_message_question_section_forma-id001
    "Figure 57-3. DNS message Question section format").
  id: totrans-1015
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 查询始终包含至少一个在问题部分中的条目，该条目指定了交换中的客户端试图找出什么。这些条目在响应消息中不变地复制，以便在需要时供客户端参考。DNS
    消息问题部分中每个条目所使用的格式在表 [Table 57-5](ch57s03.html#dns_message_question_section_format
    "Table 57-5. DNS Message Question Section Format") 和 [Table 57-6](ch57s03.html#question_section_qtype_values
    "Table 57-6. Question Section QType Values") 中详细描述，并在 [Figure 57-3](ch57s03.html#dns_message_question_section_forma-id001
    "Figure 57-3. DNS message Question section format") 中展示。
- en: Table 57-5. DNS Message Question Section Format
  id: totrans-1016
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-5. DNS 消息问题部分格式
- en: '| Field Name | Size (Bytes) | Description |'
  id: totrans-1017
  prefs: []
  type: TYPE_TB
  zh: '| 字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1018
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | ---'
- en: '| QName | Variable | Question Name: Contains the object, domain, or zone name
    that is the subject of the query, encoded using standard DNS name notation, which
    is explained later in this chapter. |'
  id: totrans-1019
  prefs: []
  type: TYPE_TB
  zh: '| QName | 变量 | 问题名称：包含查询的对象、域名或区域名称，使用标准DNS名称表示法编码，将在本章后面解释。|'
- en: '| QType | 2 | Question Type: Specifies the type of question being asked by
    the device acting as a client. This field may contain a code number corresponding
    to a particular type of RR being requested. ([Table 55-1](ch55s02.html#summary_of_common_dns_resource_records
    "Table 55-1. Summary of Common DNS Resource Records") in [Chapter 55](ch55.html
    "Chapter 55. DNS NAME SERVER CONCEPTS AND OPERATION") contains the numbers for
    the most common RRs.) If so, this means the client is asking for that type of
    record to be sent for the domain name listed in QName. The QType field may also
    contain one of the codes listed in [Table 57-6](ch57s03.html#question_section_qtype_values
    "Table 57-6. Question Section QType Values"), corresponding to a special type
    of requests. |'
  id: totrans-1020
  prefs: []
  type: TYPE_TB
  zh: '| QType | 2 | 问题类型：指定客户端设备所询问的问题类型。此字段可能包含与请求的特定RR类型相对应的代码号。（[表55-1](ch55s02.html#summary_of_common_dns_resource_records
    "表55-1. 常见DNS资源记录摘要")在[第55章](ch55.html "第55章. DNS名称服务器概念和操作")中包含最常见的RR的编号。）如果是这样，这意味着客户端正在请求发送给QName中列出的域名的那种类型的记录。QType字段还可以包含[表57-6](ch57s03.html#question_section_qtype_values
    "表57-6. 问题部分QType值")中列出的代码之一，对应于特殊类型的请求。|'
- en: '| QClass | 2 | Question Class: Specifies the class of the RR being requested,
    normally the value 1 for Internet (IN). See the discussion of classes and RR types
    in [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION CONCEPTS AND RESOLVER OPERATIONS")
    for an explanation. In addition, the QClass value 255 is defined to have the special
    meaning "any class." |'
  id: totrans-1021
  prefs: []
  type: TYPE_TB
  zh: '| QClass | 2 | 问题类：指定请求的RR的类别，通常是因特网（IN）的值1。有关类别和RR类型的讨论，请参阅[第56章](ch56.html
    "第56章. DNS解析概念和解析器操作")中的解释。此外，QClass值255被定义为具有特殊意义“任何类别”。|'
- en: Table 57-6. Question Section QType Values
  id: totrans-1022
  prefs: []
  type: TYPE_NORMAL
  zh: 表57-6. 问题部分QType值
- en: '| QType Value | Question Type | Description |'
  id: totrans-1023
  prefs: []
  type: TYPE_TB
  zh: '| QType值 | 问题类型 | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1024
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 251 | IXFR | A request for an incremental (partial) zone transfer, per RFC
    1995 |'
  id: totrans-1025
  prefs: []
  type: TYPE_TB
  zh: '| 251 | IXFR | 按照RFC 1995请求增量（部分）区域传输|'
- en: '| 252 | AXFR | A request for a zone transfer |'
  id: totrans-1026
  prefs: []
  type: TYPE_TB
  zh: '| 252 | AXFR | 请求区域传输|'
- en: '| 253 | MAILB | A request for mailbox-related records (RR types MB, MG, or
    MR; now obsolete) |'
  id: totrans-1027
  prefs: []
  type: TYPE_TB
  zh: '| 253 | MAILB | 请求与邮箱相关的记录（RR类型MB、MG或MR；现已废弃）|'
- en: '| 254 | MAILA | A request for mail agent RR (now obsolete; MX records are used
    instead) |'
  id: totrans-1028
  prefs: []
  type: TYPE_TB
  zh: '| 254 | MAILA | 请求邮件代理RR（现已废弃；现在使用MX记录代替）|'
- en: '| 255 | * (asterisk) | A request for all records |'
  id: totrans-1029
  prefs: []
  type: TYPE_TB
  zh: '| 255 | * (星号) | 请求所有记录|'
- en: '![DNS message Question section format](httpatomoreillycomsourcenostarchimages288183.png.jpg)'
  id: totrans-1030
  prefs: []
  type: TYPE_IMG
  zh: '![DNS消息问题部分格式](httpatomoreillycomsourcenostarchimages288183.png.jpg)'
- en: Figure 57-3. DNS message Question section format
  id: totrans-1031
  prefs: []
  type: TYPE_NORMAL
  zh: 图57-3. DNS消息问题部分格式
- en: DNS Message Resource Record Field Formats
  id: totrans-1032
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS消息资源记录字段格式
- en: As you've learned in this and the previous chapter, the exchange of information
    in DNS consists of a series of client/server transactions. Clients send requests,
    or *queries*, to servers, and the servers send back *responses*. DNS servers are
    database servers, and they store DNS name database information in the form of
    RRs. The questions asked by clients are requests for information from a DNS server's
    database, and they are answered by the DNS server looking up the requested RRs
    and putting them into the DNS response message.
  id: totrans-1033
  prefs: []
  type: TYPE_NORMAL
  zh: 如你在本章和上一章所学，DNS中的信息交换由一系列客户端/服务器事务组成。客户端向服务器发送请求，或称为*查询*，服务器则返回*响应*。DNS服务器是数据库服务器，它们以RR（资源记录）的形式存储DNS名称数据库信息。客户端提出的问题是从DNS服务器数据库请求信息，并由DNS服务器通过查找请求的RR并将它们放入DNS响应消息中回答。
- en: The Answer, Authority, and Additional sections of the overall DNS message format
    are the places where servers put DNS RRs to be sent back to a client. Each section
    consists of zero or more records, and in theory, any record can be placed in any
    section. The sections differ only in the semantics (meaning) that the client draws
    from a record being in one section rather than in another section.
  id: totrans-1034
  prefs: []
  type: TYPE_NORMAL
  zh: DNS消息格式的答案、授权和附加部分是服务器放置要发送回客户端的DNS RR的地方。每个部分由零个或多个记录组成，理论上，任何记录都可以放置在任何部分。这些部分的不同之处仅在于客户端从记录在某一部分而不是另一部分中得出的语义（意义）。
- en: 'RRs have two representations: binary and text. The text format is used for
    master files edited by humans and is discussed in the "DNS Master File Format"
    section later in this chapter. The binary representation consists of regular numeric
    and text fields, just like the other fields in the DNS message format.'
  id: totrans-1035
  prefs: []
  type: TYPE_NORMAL
  zh: RRs有两种表示形式：二进制和文本。文本格式用于由人类编辑的主文件，将在本章后面的“DNS主文件格式”部分讨论。二进制表示由常规数字和文本字段组成，就像DNS消息格式中的其他字段一样。
- en: DNS Common RR Format
  id: totrans-1036
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS通用RR格式
- en: There are certain types of information that are common to all RRs and other
    types that are unique to each type of record. To handle this, all RRs are represented
    using a common field format, which contains a single RData field that varies by
    record type. The common RR format is described in [Table 57-7](ch57s04.html#dns_common_resource_record_format
    "Table 57-7. DNS Common Resource Record Format") and illustrated in [Figure 57-4](ch57s04.html#dns_common_rr_format-id001
    "Figure 57-4. DNS common RR format").
  id: totrans-1037
  prefs: []
  type: TYPE_NORMAL
  zh: 存在着某些类型的信息是所有RR共有的，而其他类型的信息是每种记录类型独有的。为了处理这种情况，所有RR都使用一个通用的字段格式来表示，该格式包含一个随记录类型而变化的单个RData字段。通用RR格式在[表57-7](ch57s04.html#dns_common_resource_record_format
    "表57-7. DNS通用资源记录格式")中描述，并在[图57-4](ch57s04.html#dns_common_rr_format-id001 "图57-4.
    DNS通用RR格式")中展示。
- en: Table 57-7. DNS Common Resource Record Format
  id: totrans-1038
  prefs: []
  type: TYPE_NORMAL
  zh: 表57-7. DNS通用资源记录格式
- en: '| Field Name | Size (Bytes) | Description |'
  id: totrans-1039
  prefs: []
  type: TYPE_TB
  zh: '| Field Name | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1040
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Name | Variable | Name: Contains the object, domain, or zone name that is
    the subject of the RR, encoded using standard DNS name notation, which is explained
    later in this chapter. All of the information in the RR is associated with this
    object, which I call the named object for the record. |'
  id: totrans-1041
  prefs: []
  type: TYPE_TB
  zh: '| Name | 可变 | 名称：包含RR的主题对象、域名或区域名称，使用标准DNS名称表示法编码，将在本章后面解释。RR中的所有信息都与该对象相关联，我将其称为记录的命名对象。|'
- en: '| Type | 2 | Type: A code value specifying the type of resource record. The
    type values for the most common kinds of RRs are shown in [Table 55-1](ch55s02.html#summary_of_common_dns_resource_records
    "Table 55-1. Summary of Common DNS Resource Records"), in [Chapter 55](ch55.html
    "Chapter 55. DNS NAME SERVER CONCEPTS AND OPERATION") and also in the following
    sections of this chapter. |'
  id: totrans-1042
  prefs: []
  type: TYPE_TB
  zh: '| Type | 2 | 类型：指定资源记录类型的代码值。最常见RR的类型值在[表55-1](ch55s02.html#summary_of_common_dns_resource_records
    "表55-1. 常见DNS资源记录摘要")中显示，在[第55章](ch55.html "第55章. DNS名称服务器概念和操作")中，以及本章的以下各节中。|'
- en: '| Class | 2 | Class: Specifies the class of the RR being requested, normally
    the value 1 for Internet (IN). See [Chapter 55](ch55.html "Chapter 55. DNS NAME
    SERVER CONCEPTS AND OPERATION") for an explanation. |'
  id: totrans-1043
  prefs: []
  type: TYPE_TB
  zh: '| Class | 2 | 类：指定请求的RR的类别，通常为因特网（IN）的值1。参见[第55章](ch55.html "第55章. DNS名称服务器概念和操作")以了解解释。|'
- en: '| TTL | 4 | Time to Live: Specifies the number of seconds that the record should
    be retained in the cache of the device reading the record. See the discussion
    of DNS name server caching in [Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER
    CONCEPTS AND OPERATION") for a full explanation. A value of 0 means to use this
    information for the current name resolution only; do not cache it. |'
  id: totrans-1044
  prefs: []
  type: TYPE_TB
  zh: '| TTL | 4 | 存活时间：指定记录应在读取记录的设备的缓存中保留的秒数。参见[第55章](ch55.html "第55章. DNS名称服务器概念和操作")中关于DNS名称服务器缓存的讨论，以获得完整解释。值为0表示仅为此当前名称解析使用此信息；不要缓存它。|'
- en: '| RDLength | 2 | Resource Data Length: Indicates the size of the RData field,
    in bytes. |'
  id: totrans-1045
  prefs: []
  type: TYPE_TB
  zh: '| RDLength | 2 | 资源数据长度：指示RData字段的大小，以字节为单位。|'
- en: '| RData | Variable | Resource Data: The data portion of the RR. |'
  id: totrans-1046
  prefs: []
  type: TYPE_TB
  zh: '| RData | 可变 | 资源数据：RR的数据部分。|'
- en: RData Field Formats for Common RRs
  id: totrans-1047
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通用RR的RData字段格式
- en: The RData field consists of one or more subfields that carry the actual payload
    for the RR. The following sections present the most common RR types. For each,
    I have indicated the RR text code, name, and type value; provided a brief summary
    of the RR's use; and shown the structure of the RData field in a table.
  id: totrans-1048
  prefs: []
  type: TYPE_NORMAL
  zh: RData字段由一个或多个子字段组成，这些子字段携带RR的实际有效负载。以下各节介绍了最常见的RR类型。对于每种类型，我都指出了RR的文本代码、名称和类型值；提供了RR用途的简要概述；并在表中显示了RData字段的结构。
- en: '![DNS common RR format](httpatomoreillycomsourcenostarchimages288185.png)'
  id: totrans-1049
  prefs: []
  type: TYPE_IMG
  zh: '![DNS通用RR格式](httpatomoreillycomsourcenostarchimages288185.png)'
- en: Figure 57-4. DNS common RR format
  id: totrans-1050
  prefs: []
  type: TYPE_NORMAL
  zh: 图57-4. DNS通用RR格式
- en: A (Address) RR (Type Value 1)
  id: totrans-1051
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A (地址) RR (类型值 1)
- en: A (Address) is the primary RR type in DNS. It contains a 32-bit IP address associated
    with a domain name, as shown in [Table 57-8](ch57s04.html#dns_address_rr_data_format
    "Table 57-8. DNS Address RR Data Format").
  id: totrans-1052
  prefs: []
  type: TYPE_NORMAL
  zh: A (地址) 是 DNS 中的主要 RR 类型。它包含与域名关联的 32 位 IP 地址，如[表 57-8](ch57s04.html#dns_address_rr_data_format
    "表 57-8. DNS 地址 RR 数据格式")所示。
- en: Table 57-8. DNS Address RR Data Format
  id: totrans-1053
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-8. DNS 地址 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1054
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1055
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Address | 4 | Address: The 32-bit IP address corresponding to this record''s
    named object. |'
  id: totrans-1056
  prefs: []
  type: TYPE_TB
  zh: '| Address | 4 | 地址：与该记录的命名对象对应的 32 位 IP 地址。|'
- en: NS (Name Server) RR (Type Value 2)
  id: totrans-1057
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: NS (名称服务器) RR (类型值 2)
- en: The NSDName data field carries the domain name of a name server, as shown in
    [Table 57-9](ch57s04.html#dns_name_server_rr_data_format "Table 57-9. DNS Name
    Server RR Data Format").
  id: totrans-1058
  prefs: []
  type: TYPE_NORMAL
  zh: The NSDName 数据字段携带名称服务器的域名，如[表 57-9](ch57s04.html#dns_name_server_rr_data_format
    "表 57-9. DNS 名称服务器 RR 数据格式")所示。
- en: Table 57-9. DNS Name Server RR Data Format
  id: totrans-1059
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-9. DNS 名称服务器 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1060
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1061
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| NSDName | Variable | Name Server Domain Name: A variable-length name of a
    name server that should be authoritative for this record''s named object. Like
    all names, this name is encoded using standard DNS name notation. A request for
    this RR type normally results in an A record for the name server specified also
    being returned in the Additional section of the response, if available. |'
  id: totrans-1062
  prefs: []
  type: TYPE_TB
  zh: '| NSDName | 可变 | 名称服务器域名：一个名称服务器的可变长度名称，该名称服务器应负责该记录的命名对象。像所有名称一样，此名称使用标准的
    DNS 名称表示法编码。请求此 RR 类型通常会导致在响应的附加部分返回指定的名称服务器的 A 记录，如果可用的话。|'
- en: CName (Canonical Name) RR (Type Value 5)
  id: totrans-1063
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CName (规范名称) RR (类型值 5)
- en: The CName data field contains the real name of a named object that has been
    referenced using an alias, as shown in [Table 57-10](ch57s04.html#dns_canonical_name_rr_data_format
    "Table 57-10. DNS Canonical Name RR Data Format").
  id: totrans-1064
  prefs: []
  type: TYPE_NORMAL
  zh: CName 数据字段包含使用别名引用的命名对象的实际名称，如[表 57-10](ch57s04.html#dns_canonical_name_rr_data_format
    "表 57-10. DNS 规范名称 RR 数据格式")所示。
- en: Table 57-10. DNS Canonical Name RR Data Format
  id: totrans-1065
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-10. DNS 规范名称 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1066
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1067
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| CName | Variable | Canonical Name: The canonical (real) name of the named
    object. This name is then resolved using the standard DNS resolution procedure
    to get the address for the originally specified name. |'
  id: totrans-1068
  prefs: []
  type: TYPE_TB
  zh: '| CName | 可变 | 规范名称：命名对象的规范（实际）名称。然后使用标准的 DNS 解析过程解析此名称，以获取最初指定的名称的地址。|'
- en: SOA (Start Of Authority) RR (Type Value 6)
  id: totrans-1069
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SOA (授权开始) RR (类型值 6)
- en: The SOA record marks the start of a DNS zone and contains key information about
    how it is to be managed and used. The SOA record is the most complex of the DNS
    RR types. Its format is explained in [Table 57-11](ch57s04.html#dns_start_of_authority_rr_data_format
    "Table 57-11. DNS Start Of Authority RR Data Format") and illustrated in [Figure 57-5](ch57s04.html#dns_start_of_authority_soa_rr_data_forma
    "Figure 57-5. DNS Start Of Authority (SOA) RR Data Format"). See the discussion
    of zone transfers in [Chapter 55](ch55.html "Chapter 55. DNS NAME SERVER CONCEPTS
    AND OPERATION") for information about how the fields in this RR are used.
  id: totrans-1070
  prefs: []
  type: TYPE_NORMAL
  zh: SOA 记录标记 DNS 区域的开始，并包含有关如何管理和使用区域的关键信息。SOA 记录是 DNS RR 类型中最复杂的。其格式在[表 57-11](ch57s04.html#dns_start_of_authority_rr_data_format
    "表 57-11. DNS 授权开始 RR 数据格式")中解释，并在[图 57-5](ch57s04.html#dns_start_of_authority_soa_rr_data_forma
    "图 57-5. DNS 授权开始 (SOA) RR 数据格式")中说明。有关此 RR 中字段的使用信息，请参阅[第 55 章](ch55.html "第
    55 章. DNS 名称服务器概念和操作")中关于区域传输的讨论。
- en: Table 57-11. DNS Start Of Authority RR Data Format
  id: totrans-1071
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-11. DNS 授权开始 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1072
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1073
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| MName | Variable | Master Name: The domain name of the name server that is
    the source of the data for the zone. This is normally the primary authoritative
    server for the zone. It is encoded using the standard DNS name format. |'
  id: totrans-1074
  prefs: []
  type: TYPE_TB
  zh: '| MName | 可变 | 主名称：提供区域数据的数据源名称服务器的域名。这通常是区域的主授权服务器。它使用标准的 DNS 名称格式编码。|'
- en: '| RName | Variable | Responsible Name: The email address of the person responsible
    for this zone. Email addresses in DNS are encoded using a special variation of
    the regular DNS name notation, discussed later in this chapter. |'
  id: totrans-1075
  prefs: []
  type: TYPE_TB
  zh: '| RName | 可变 | 负责人名称：负责此区域的人员的电子邮件地址。DNS 中的电子邮件地址使用本章后面讨论的特殊变体编码的常规 DNS 名称表示法。|'
- en: '| Serial | 4 | Serial Number: The serial number, or version number, of the
    RR database for this zone. Used to determine when changes have been made to the
    database to trigger zone transfers. |'
  id: totrans-1076
  prefs: []
  type: TYPE_TB
  zh: '| 序列号 | 4 | 序列号：此区域RR数据库的序列号或版本号。用于确定何时对数据库进行了更改以触发区域传输。|'
- en: '| Refresh | 4 | Refresh Interval: The number of seconds that secondary name
    servers for this zone will wait between attempts to check for changes made to
    the zone database on the primary name server. |'
  id: totrans-1077
  prefs: []
  type: TYPE_TB
  zh: '| 刷新 | 4 | 刷新间隔：此区域二级域名服务器在尝试检查主域名服务器上对区域数据库所做的更改之间等待的秒数。|'
- en: '| Retry | 4 | Retry Interval: The number of seconds a secondary name server
    waits before trying again to check with a primary for changes if its previous
    attempt failed. |'
  id: totrans-1078
  prefs: []
  type: TYPE_TB
  zh: '| 重试 | 4 | 重试间隔：二级域名服务器在尝试再次检查主域名服务器以查找更改之前等待的秒数，如果其之前的尝试失败。|'
- en: '| Expire | 4 | Expire Interval: The number of seconds that can elapse between
    successful contacts with the primary name server before a secondary name server
    must consider the information it holds stale. |'
  id: totrans-1079
  prefs: []
  type: TYPE_TB
  zh: '| 过期 | 4 | 过期间隔：在二级域名服务器必须认为其持有的信息已过时之前，可以经过的成功联系主域名服务器的秒数。|'
- en: '| Minimum | 4 | Negative Caching TTL: Originally carried the default TTL value
    for records where no explicit TTL value was specified. Now represents the zone''s
    negative cache TTL. See the discussion of DNS name server caching in [Chapter 55](ch55.html
    "Chapter 55. DNS NAME SERVER CONCEPTS AND OPERATION"). |'
  id: totrans-1080
  prefs: []
  type: TYPE_TB
  zh: '| 最小值 | 4 | 负缓存TTL：最初携带未指定显式TTL值的记录的默认TTL值。现在表示区域的负缓存TTL。请参阅[第 55 章](ch55.html
    "第 55 章。DNS 名称服务器概念和操作")中关于DNS名称服务器缓存的讨论。|'
- en: PTR (Pointer) RR (Type Value 12)
  id: totrans-1081
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PTR (指针) RR (类型值 12)
- en: The PTR record carries a pointer to an RR. It's used for reverse address lookups.
    It contains one data field, shown in [Table 57-12](ch57s04.html#dns_pointer_rr_data_format
    "Table 57-12. DNS Pointer RR Data Format").
  id: totrans-1082
  prefs: []
  type: TYPE_NORMAL
  zh: PTR记录携带一个指向RR的指针。它用于反向地址查找。它包含一个数据字段，如[表 57-12](ch57s04.html#dns_pointer_rr_data_format
    "表 57-12。DNS 指针 RR 数据格式")所示。
- en: Table 57-12. DNS Pointer RR Data Format
  id: totrans-1083
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-12. DNS 指针 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1084
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1085
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| PTRDName | Variable | Pointer Domain Name: A variable-length domain name.
    This is a name pointed to by the RR. See the description of reverse resolution
    in [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION CONCEPTS AND RESOLVER OPERATIONS")
    for the most common way that this record type is used. |'
  id: totrans-1086
  prefs: []
  type: TYPE_TB
  zh: '| PTRDName | 可变 | 指针域名：一个可变长度的域名。这是由RR指向的名称。有关此记录类型最常见使用方式的描述，请参阅[第 56 章](ch56.html
    "第 56 章。DNS 解析概念和解析器操作")。|'
- en: '![DNS Start Of Authority (SOA) RR Data Format](httpatomoreillycomsourcenostarchimages288187.png)'
  id: totrans-1087
  prefs: []
  type: TYPE_IMG
  zh: '![DNS 起始授权 (SOA) RR 数据格式](httpatomoreillycomsourcenostarchimages288187.png)'
- en: Figure 57-5. DNS Start Of Authority (SOA) RR Data Format
  id: totrans-1088
  prefs: []
  type: TYPE_NORMAL
  zh: 图 57-5. DNS 起始授权 (SOA) RR 数据格式
- en: MX (Mail Exchange) RR (Type Value 15)
  id: totrans-1089
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MX (邮件交换) RR (类型值 15)
- en: The special MX record contains information about the mail server(s) to be used
    for sending email to the domain (see [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION
    CONCEPTS AND RESOLVER OPERATIONS")). Each record contains two fields, as shown
    in [Table 57-13](ch57s04.html#dns_mail_exchange_rr_data_format "Table 57-13. DNS
    Mail Exchange RR Data Format").
  id: totrans-1090
  prefs: []
  type: TYPE_NORMAL
  zh: 特殊的MX记录包含有关用于向域名发送电子邮件的邮件服务器（请参阅[第 56 章](ch56.html "第 56 章。DNS 解析概念和解析器操作")）的信息。每个记录包含两个字段，如[表
    57-13](ch57s04.html#dns_mail_exchange_rr_data_format "表 57-13。DNS 邮件交换 RR 数据格式")所示。
- en: Table 57-13. DNS Mail Exchange RR Data Format
  id: totrans-1091
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-13. DNS 邮件交换 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1092
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1093
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Preference | 2 | Preference Value: The preference level for this mail exchange.
    Lower values signify higher preference. |'
  id: totrans-1094
  prefs: []
  type: TYPE_TB
  zh: '| 优先级 | 2 | 优先级值：此邮件交换的优先级级别。较低的值表示较高的优先级。|'
- en: '| Exchange | Variable | Exchange Domain Name: The domain name, encoded using
    standard DNS name notation, of a host willing to provide mail exchange services
    for this named object. |'
  id: totrans-1095
  prefs: []
  type: TYPE_TB
  zh: '| 交换 | 变量 | 交换域名：愿意为该命名对象提供邮件交换服务的宿主机的域名，使用标准DNS名称表示法编码。|'
- en: TXT (Text) RR (Type Value 16)
  id: totrans-1096
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: TXT (文本) RR (类型值 16)
- en: The TXT record contains additional descriptive information about the named object,
    as shown in [Table 57-14](ch57s04.html#dns_text_rr_data_format "Table 57-14. DNS
    Text RR Data Format").
  id: totrans-1097
  prefs: []
  type: TYPE_NORMAL
  zh: TXT记录包含有关命名对象的附加描述信息，如[表 57-14](ch57s04.html#dns_text_rr_data_format "表 57-14。DNS
    文本 RR 数据格式")所示。
- en: Table 57-14. DNS Text RR Data Format
  id: totrans-1098
  prefs: []
  type: TYPE_NORMAL
  zh: 表 57-14. DNS 文本 RR 数据格式
- en: '| Subfield Name | Size (Bytes) | Description |'
  id: totrans-1099
  prefs: []
  type: TYPE_TB
  zh: '| 子字段名称 | 大小（字节） | 描述 |'
- en: '| --- | --- | --- |'
  id: totrans-1100
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| TXT-Data | Variable | Text Data: Variable-length descriptive text. |'
  id: totrans-1101
  prefs: []
  type: TYPE_TB
  zh: '| TXT-数据 | 可变 | 文本数据：可变长度的描述性文本。 |'
- en: DNS Name Notation and Message Compression
  id: totrans-1102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS名称表示法和消息压缩
- en: Obviously, the entire DNS protocol is oriented around dealing with names for
    domains, subdomains, and objects. As you've seen in the preceding topics, there
    are many fields in DNS messages and RRs that carry the names of objects, name
    servers, and so forth. DNS uses a special notation for encoding names in RRs and
    fields, a variation of this notation for email addresses, and a special compression
    method that reduces the size of messages for efficiency.
  id: totrans-1103
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，整个DNS协议都是围绕处理域名、子域名和对象名称来设计的。正如你在前面的主题中看到的，DNS消息和RR中有许多字段携带对象、名称服务器等的名称。DNS在RR和字段中使用特殊的编码名称表示法，这是电子邮件地址表示法的变体，以及一种特殊的压缩方法，该方法可以减少消息的大小以提高效率。
- en: Standard DNS Name Notation
  id: totrans-1104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 标准DNS名称表示法
- en: In [Chapter 53](ch53.html "Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY"),
    you learned how DNS names are constructed. Each node in the name hierarchy has
    a label associated with it. The fully qualified domain name (FQDN) for a particular
    device consists of the sequence of labels that starts from the root of the tree
    and progresses down to that device. The labels at each level in the hierarchy
    are listed in sequence, starting with the highest level, from right to left, separated
    by dots. This results in the domain names we are used to working with, such as
    [www.xyzindustries.com](http://www.xyzindustries.com).
  id: totrans-1105
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第53章](ch53.html "第53章。DNS名称空间、架构和术语")中，你学习了DNS名称是如何构建的。名称层次结构中的每个节点都与一个标签相关联。特定设备的完全限定域名（FQDN）由从树根开始并向下到该设备的标签序列组成。层次结构中每个级别的标签按顺序列出，从最高级别开始，从右到左，由点分隔。这产生了我们习惯使用的域名，例如[www.xyzindustries.com](http://www.xyzindustries.com)。
- en: 'It would be possible to encode these names into RRs or other DNS message fields
    directly: Put the letter *w* into each of the first three bytes of the name, then
    put a dot (.) into the fourth byte, an *x* into the fifth byte, and so on. The
    disadvantage of this is that as a computer was reading the name, it wouldn''t
    be able to tell when each name was finished. We would need to include a length
    field for each name.'
  id: totrans-1106
  prefs: []
  type: TYPE_NORMAL
  zh: 将这些名称直接编码到RR或其他DNS消息字段中是可能的：将字母*W*放入名称的前三个字节中，然后在第四个字节中放入一个点（.），在第五个字节中放入一个*x*，依此类推。这种方法的缺点是，当计算机读取名称时，它无法判断每个名称何时结束。我们需要为每个名称包含一个长度字段。
- en: Instead, DNS uses a special notation for DNS names. Each label is encoded, one
    after the next, in the name field. Before each label, a single byte is used that
    holds a binary number indicating the number of characters in the label. Then the
    label's characters are encoded, one per byte. The end of the name is indicated
    by a null label, representing the root; this has a length of zero, so each name
    ends with just a 0 character, indicating this zero-length root label.
  id: totrans-1107
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，DNS使用特殊的表示法来表示DNS名称。每个标签按顺序编码在名称字段中。在每个标签之前，使用一个字节来表示标签中的字符数。然后，将标签的字符编码，每个字节一个字符。名称的结束由一个空标签表示，代表根；这个长度为零，因此每个名称都以一个0字符结束，表示这个零长度的根标签。
- en: Note that the dots between the labels aren't necessary, since the length numbers
    delineate the labels. The computer reading the name also knows how many bytes
    are in each label as it reads the name, so it can easily allocate space for the
    label as it reads it from the name.
  id: totrans-1108
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，标签之间的点是不必要的，因为长度数字界定了标签。读取名称的计算机也知道自己正在读取的每个标签中有多少字节，因此它可以在读取名称时轻松地为标签分配空间。
- en: 'For example, [www.xyzindustries.com](http://www.xyzindustries.com) would be
    encoded as follows:'
  id: totrans-1109
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，[www.xyzindustries.com](http://www.xyzindustries.com)将被编码如下：
- en: '[PRE3]'
  id: totrans-1110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: I have shown the label lengths in square brackets to distinguish them. Remember
    that these label lengths are binary encoded numbers, so a single byte can hold
    a value from 0 to 255; that [13] is one byte, not two, as you can see in [Figure 57-6](ch57s05.html#dns_standard_name_notation_in_dns_every_
    "Figure 57-6. DNS standard name notation In DNS, every named object or other name
    is represented by a sequence of label lengths and then labels, with each label
    length taking one byte and each label taking one byte per character. This example
    shows the encoding of the name www.xyzindustries.com."). Labels are actually limited
    to a maximum of 63 characters, and you'll see shortly why this is significant.
  id: totrans-1111
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经用方括号标出了标签长度以区分它们。请记住，这些标签长度是二进制编码的数字，所以一个字节可以存储从 0 到 255 的值；[13] 是一个字节，而不是两个，正如你在
    [图 57-6](ch57s05.html#dns_standard_name_notation_in_dns_every_ "图 57-6. DNS 标准名称表示法
    在 DNS 中，每个命名对象或其他名称都由一系列标签长度和标签组成，每个标签长度占用一个字节，每个标签占用一个字符的字节。本例显示了名称 www.xyzindustries.com
    的编码。") 中看到的。标签实际上限制在最多 63 个字符，你很快就会看到这一点的重要性。
- en: '![DNS standard name notation In DNS, every named object or other name is represented
    by a sequence of label lengths and then labels, with each label length taking
    one byte and each label taking one byte per character. This example shows the
    encoding of the name www.xyzindustries.com.](httpatomoreillycomsourcenostarchimages288189.png)'
  id: totrans-1112
  prefs: []
  type: TYPE_IMG
  zh: '![DNS 标准名称表示法 在 DNS 中，每个命名对象或其他名称都由一系列标签长度和标签组成，每个标签长度占用一个字节，每个标签占用一个字符的字节。本例显示了名称
    www.xyzindustries.com 的编码。](httpatomoreillycomsourcenostarchimages288189.png)'
- en: Figure 57-6. DNS standard name notation In DNS, every named object or other
    name is represented by a sequence of label lengths and then labels, with each
    label length taking one byte and each label taking one byte per character. This
    example shows the encoding of the name [www.xyzindustries.com](http://www.xyzindustries.com).
  id: totrans-1113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 57-6. DNS 标准名称表示法 在 DNS 中，每个命名对象或其他名称都由一系列标签长度和标签组成，每个标签长度占用一个字节，每个标签占用一个字符的字节。本例显示了名称
    [www.xyzindustries.com](http://www.xyzindustries.com) 的编码。
- en: DNS Electronic Mail Address Notation
  id: totrans-1114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 电子邮件地址表示法
- en: 'Email addresses are used in certain DNS resource records, such as the RName
    field in the SOA RR. Email addresses take the form <*name*>@<*domain-name*>. DNS
    encodes these in exactly the same way as regular DNS domains, simply treating
    the @ like another dot. So, [johnny@somewhere.org](mailto:johnny@somewhere.org)
    would be treated as johnny.somewhere.org and encoded as follows:'
  id: totrans-1115
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件地址用于某些 DNS 资源记录中，例如 SOA RR 中的 RName 字段。电子邮件地址的形式为 <*name*>@<*domain-name*>。DNS
    以与常规 DNS 域名完全相同的方式对这些进行编码，只是将 @ 视为另一个点。因此，[johnny@somewhere.org](mailto:johnny@somewhere.org)
    将被视为 johnny.somewhere.org，并按以下方式编码：
- en: '[PRE4]'
  id: totrans-1116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note that there is no specific indication that this is an email address. The
    name is interpreted as an email address instead of a device name based on context.
  id: totrans-1117
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，这里没有特定的指示表明这是一个电子邮件地址。根据上下文，该名称被解释为电子邮件地址而不是设备名称。
- en: DNS Message Compression
  id: totrans-1118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 消息压缩
- en: A single DNS message may contain many domain names. Now, consider that when
    a particular name server sends a response containing multiple domain names, they
    are all usually in the same zone or are related to the zone. Most of these names
    will have common elements to their names.
  id: totrans-1119
  prefs: []
  type: TYPE_NORMAL
  zh: 单个 DNS 消息可能包含许多域名。现在，考虑当某个名称服务器发送包含多个域名的响应时，它们通常都在同一个区域或与该区域相关。这些名称中的大多数将具有它们名称的共同元素。
- en: 'Consider our previous mail example of a client asking for an MX record for
    [xyzindustries.com](http://xyzindustries.com). The response to this client will
    contain, among other things, these two records:'
  id: totrans-1120
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑我们之前邮件示例中客户请求的 [xyzindustries.com](http://xyzindustries.com) 的 MX 记录。对此客户的回复将包含以下两个记录：
- en: '**MX Record** An MX record that has [xyzindustries.com](http://xyzindustries.com)
    in the Name field of the record and [mail.xyzindustries.com](http://mail.xyzindustries.com)
    in the RData field.'
  id: totrans-1121
  prefs: []
  type: TYPE_NORMAL
  zh: '**MX 记录** 记录中的名称字段包含 [xyzindustries.com](http://xyzindustries.com)，而 RData
    字段包含 [mail.xyzindustries.com](http://mail.xyzindustries.com)。'
- en: '**A Record** Assuming the name server knows the IP address of [mail.xyzindustries.com](http://mail.xyzindustries.com),
    the Additional section will contain an A record that has [mail.xyzindustries.com](http://mail.xyzindustries.com)
    in the Name field and its address in the RData field.'
  id: totrans-1122
  prefs: []
  type: TYPE_NORMAL
  zh: '**A 记录** 假设域名服务器知道 [mail.xyzindustries.com](http://mail.xyzindustries.com)
    的 IP 地址，附加部分将包含一个 A 记录，名称字段包含 [mail.xyzindustries.com](http://mail.xyzindustries.com)，而
    RData 字段包含其地址。'
- en: This is just one small example of name duplication. It can be much more extreme
    with other types of DNS messages, with certain string patterns being repeated
    many times. Normally, this would require that each name be spelled out fully using
    the encoding method described here. But this would be wasteful, since a large
    portion of these names is common. To cut down on this duplication, a special technique
    called *message compression* is used.
  id: totrans-1123
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是名称重复的一个小例子。在其他类型的DNS消息中，它可能更加极端，某些字符串模式可能会重复多次。通常，这需要使用这里描述的编码方法将每个名称完整拼写出来。但这样做将是浪费的，因为这些名称中的大部分是通用的。为了减少这种重复，使用了一种称为*消息压缩*的特殊技术。
- en: Using Message Compression to Avoid Duplication of a Full Name
  id: totrans-1124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用消息压缩避免完整名称重复
- en: Using message compression, instead of a DNS name encoded using the combination
    of labels and label lengths, a two-byte subfield represents a *pointer* to another
    location in the message where the name can be found. The first two bits of this
    subfield are set to 1 (the value 11 in binary), and the remaining 14 bits contain
    an *offset* that specifies where in the message the name can be found, counting
    the first byte of the message (the first byte of the ID field) as 0.
  id: totrans-1125
  prefs: []
  type: TYPE_NORMAL
  zh: 使用消息压缩，而不是使用标签和标签长度的组合来编码DNS名称，一个两字节的子字段代表指向消息中另一个位置的*指针*。这个子字段的第一个两位被设置为1（二进制中的值11），剩余的14位包含一个*偏移量*，它指定了在消息中可以找到名称的位置，以消息的第一个字节（ID字段的第一个字节）为0开始计数。
- en: 'Let''s go back to our example. Suppose that in the DNS message, the RData field
    of the MX record, containing [mail.xyzindustries.com](http://mail.xyzindustries.com),
    begins at byte 47\. In this first instance, we would find the name encoded in
    full as follows:'
  id: totrans-1126
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到我们的例子。假设在DNS消息中，MX记录的RData字段，包含[mail.xyzindustries.com](http://mail.xyzindustries.com)，从字节47开始。在这个第一个实例中，我们会找到名称按如下方式完整编码：
- en: '[PRE5]'
  id: totrans-1127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: However, in the second instance, where [mail.xyzindustries.com](http://mail.xyzindustries.com)
    shows up in the Name field of the A record, we would instead put two 1 bits, followed
    by the number 47 encoded in binary. So, this would be the 16-bit binary pattern
    11000000 00101111, or two numeric byte values 192 and 47\. This second instance
    now takes 2 bytes instead of duplicating the 24 bytes needed for the first instance
    of the name.
  id: totrans-1128
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在第二个实例中，当[mail.xyzindustries.com](http://mail.xyzindustries.com)出现在A记录的名称字段中时，我们会用两个1位，然后是47的二进制编码。所以，这将是一个16位的二进制模式11000000
    00101111，或者两个数值字节192和47。这个第二个实例现在只占用2个字节，而不是像第一个实例那样需要重复24个字节。
- en: How does a device reading a Name field differentiate a pointer from a real name?
    This is the reason that 11 is used at the start of the field. Doing this guarantees
    that the first byte of the pointer will always have a value of 192 or larger.
    Since labels are restricted to a length of 63 or less, when the host reads the
    first byte of a name, if it sees a value of 63 or less in a byte, it knows this
    is a real name; a value of 192 or more means it is a pointer.
  id: totrans-1129
  prefs: []
  type: TYPE_NORMAL
  zh: 读取名称字段的设备如何区分指针和真实名称？这就是为什么字段开始处使用11的原因。这样做可以保证指针的第一个字节总是具有192或更大的值。由于标签的长度限制在63或更短，当主机读取名称的第一个字节时，如果它看到一个字节中的值为63或更少，它知道这是一个真实名称；值为192或更多表示它是一个指针。
- en: Using Message Compression to Avoid Duplication of Part of a Name
  id: totrans-1130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用消息压缩避免名称部分重复
- en: 'The previous example shows how pointers can be used to eliminate duplication
    of a whole name: The name [mail.xyzindustries.com](http://mail.xyzindustries.com)
    was used in two places, and a pointer was used instead of the second. Pointers
    are even more powerful than this, however. They can also be used to point to only
    part of a real name or can be combined with additional labels to provide a compressed
    representation of a name related to another name in a RR. This provides even greater
    space savings.'
  id: totrans-1131
  prefs: []
  type: TYPE_NORMAL
  zh: 之前的例子展示了如何使用指针来消除整个名称的重复：名称[mail.xyzindustries.com](http://mail.xyzindustries.com)在两个地方使用，而第二个地方使用了指针。然而，指针的功能甚至更强大。它们也可以用来指向真实名称的一部分，或者可以与额外的标签结合，以提供与RR中另一个名称相关的名称的压缩表示。这提供了更大的空间节省。
- en: 'In the previous example, this means that even the first instance of [mail.xyzindustries.com](http://mail.xyzindustries.com)
    can be compressed. Recall that the MX record will have [xyzindustries.com](http://xyzindustries.com)
    in the Name field and [mail.xyzindustries.com](http://mail.xyzindustries.com)
    in the RData field. If the Name field of that record starts at byte 19, then we
    can encode the RData field as follows:'
  id: totrans-1132
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的例子中，这意味着即使是 [mail.xyzindustries.com](http://mail.xyzindustries.com) 的第一个实例也可以被压缩。回想一下，MX
    记录将在名称字段中包含 [xyzindustries.com](http://xyzindustries.com)，在 RData 字段中包含 [mail.xyzindustries.com](http://mail.xyzindustries.com)。如果该记录的名称字段从字节
    19 开始，那么我们可以将 RData 字段编码如下：
- en: '[PRE6]'
  id: totrans-1133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The device reading the record will get "mail" for the first label and then read
    "[xyzindustries.com](http://xyzindustries.com)" from the Name field to get the
    complete name, [mail.xyzindustries.com](http://mail.xyzindustries.com).
  id: totrans-1134
  prefs: []
  type: TYPE_NORMAL
  zh: 读取记录的设备将获取第一个标签的 "mail"，然后从名称字段读取 "[xyzindustries.com](http://xyzindustries.com)"
    以获取完整名称，[mail.xyzindustries.com](http://mail.xyzindustries.com)。
- en: 'Similarly, suppose we had a record in this same message that contained a reference
    to the parent domain for [xyzindustries.com](http://xyzindustries.com), which
    is "com." This could simply be encoded as follows:'
  id: totrans-1135
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，假设我们在这个消息中有一个包含对 [xyzindustries.com](http://xyzindustries.com) 的父域 "com."
    的引用的记录，这可以简单地编码如下：
- en: '[PRE7]'
  id: totrans-1136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The reason is that byte 33 is where we find the `[3] c o m [0]` part of the
    Name field containing `[13] x y z i n d u s t r i e s [3] c o m [0]`.
  id: totrans-1137
  prefs: []
  type: TYPE_NORMAL
  zh: 原因是字节 33 是我们找到名称字段中包含 `[13] x y z i n d u s t r i e s [3] c o m [0]` 的 `[3]
    c o m [0]` 部分。
- en: DNS Master File Format
  id: totrans-1138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS 主文件格式
- en: DNS servers answer queries from clients by sending reply messages containing
    RRs. You have already seen in this chapter the binary message formats used to
    encode these RRs. These message formats are great for transmitted messages, because
    they are compact and efficient. Computers have no problem reading fields very
    quickly and knowing how to interpret a particular string of ones and zeros.
  id: totrans-1139
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 服务器通过发送包含 RR 的回复消息来响应用户的查询。您在本章中已经看到了用于编码这些 RR 的二进制消息格式。这些消息格式非常适合传输消息，因为它们紧凑且高效。计算机可以快速读取字段并知道如何解释特定的字符串。
- en: Humans, on the other hand, don't deal well with cryptic codes in binary. Before
    an RR can be provided by a server, it is necessary for a human administrator to
    tell the server what those records are and what information they contain. To make
    this job easier, DNS includes a special text representation for zones and RRs.
    Administrators edit special *master files* that describe the zone and the records
    it contains. These files are then read into memory by the server's DNS software
    and converted into binary form for responding to client requests. This is described
    in more detail in [Chapter 56](ch56.html "Chapter 56. DNS RESOLUTION CONCEPTS
    AND RESOLVER OPERATIONS").
  id: totrans-1140
  prefs: []
  type: TYPE_NORMAL
  zh: 与此相反，人类并不擅长处理二进制中的晦涩代码。在服务器可以提供 RR 之前，需要人类管理员告诉服务器这些记录是什么以及它们包含的信息。为了使这项工作更容易，DNS
    包含一个用于区域和 RR 的特殊文本表示。管理员编辑描述区域及其包含的记录的特殊 *主文件*。然后，这些文件被服务器的 DNS 软件读入内存，并转换为二进制形式以响应用户请求。这更详细地描述在
    [第 56 章](ch56.html "第 56 章。DNS 解析概念和解析器操作")。
- en: Each master file consists of a simple, flat text file that can be created with
    any sort of text editor. Each file contains a number of lines expressed using
    a simple set of syntax rules that describe a zone and the records within it. The
    basic syntactic rules for DNS master files are specified in RFC 1035, Section
    5.1\. Certain DNS implementations use their own variations on the syntax in the
    standard, though they are all pretty similar.
  id: totrans-1141
  prefs: []
  type: TYPE_NORMAL
  zh: 每个主文件由一个简单、扁平的文本文件组成，可以使用任何类型的文本编辑器创建。每个文件包含使用一组简单的语法规则表示的若干行，这些规则描述了一个区域及其中的记录。DNS
    主文件的基本语法规则在 RFC 1035 的第 5.1 节中指定。尽管某些 DNS 实现在其标准语法上有所变化，但它们都非常相似。
- en: DNS Common Master File Record Format
  id: totrans-1142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 常见主文件记录格式
- en: 'Just as all RRs are stored internally using a common field format, they also
    use a common master file format. Each record normally appears on a separate line
    of the file. This format is as follows, with optional fields shown in square brackets:'
  id: totrans-1143
  prefs: []
  type: TYPE_NORMAL
  zh: 正如所有 RR 都使用一个共同的字段格式存储在内部一样，它们也使用一个共同的主文件格式。每个记录通常在文件的单独一行上出现。此格式如下，方括号中显示的是可选字段：
- en: '[PRE8]'
  id: totrans-1144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The fields are as follows:'
  id: totrans-1145
  prefs: []
  type: TYPE_NORMAL
  zh: 字段如下：
- en: '``<*`domain-name`*>`` A DNS domain name, which may be either an FQDN or a partially
    qualified name (PQDN).'
  id: totrans-1146
  prefs: []
  type: TYPE_NORMAL
  zh: '``<*`域名`*>`` DNS 域名，可以是完全合格域名 (FQDN) 或部分合格域名 (PQDN)。'
- en: '``<*`ttl`*>`` A TTL value, in seconds, for the record. If omitted, the default
    TTL value for the zone is used. In fact, most RRs do not have a specified TTL
    and just use the default provided by the SOA record.'
  id: totrans-1147
  prefs: []
  type: TYPE_NORMAL
  zh: '``<*ttl*>`` 记录的 TTL 值，以秒为单位。如果省略，则使用区域默认的 TTL 值。实际上，大多数 RR 没有指定的 TTL，而是使用 SOA
    记录提供的默认值。'
- en: '``<*`class`*>`` The RR class. For modern DNS, this field is optional, and it
    defaults to IN, for Internet.'
  id: totrans-1148
  prefs: []
  type: TYPE_NORMAL
  zh: '``<*class*>`` RR 类。对于现代 DNS，此字段是可选的，默认为 IN，代表互联网。'
- en: '``<*`type`*>`` The RR type, specified using a text code such as A or NS, not
    the numeric code.'
  id: totrans-1149
  prefs: []
  type: TYPE_NORMAL
  zh: '``<*type*>`` RR 类型，使用文本代码（如 A 或 NS）指定，而不是数字代码。'
- en: '``<*`rdata`*>`` RR data, which is a set of space-separated entries that depends
    on the record type.'
  id: totrans-1150
  prefs: []
  type: TYPE_NORMAL
  zh: '``<*rdata*>`` RR 数据，它是一组由空格分隔的条目，这取决于记录类型。'
- en: The `<`*`rdata`*`>` can be either a single piece of information or a set of
    entries, depending on the record type. In the case of longer record types, especially
    the SOA record, multiple entry `<`*`rdata`*`>` fields are spread over several
    lines and enclosed in parentheses; the parentheses make all the entries act as
    if they were on a single line. Note that if the `<`*`ttl`*`>` field is present,
    the order of it and the `<`*`class`*`>` field may be switched without any problems,
    because one is a number and the other text (IN).
  id: totrans-1151
  prefs: []
  type: TYPE_NORMAL
  zh: '`<rdata>` 可以是单个信息或一组条目，具体取决于记录类型。在较长的记录类型中，特别是 SOA 记录的情况下，多个 `<rdata>` 字段会分布在几行中，并用括号括起来；括号使得所有条目都像在单行上一样。请注意，如果存在
    `<ttl>` 字段，则 `<ttl>` 字段和 `<class>` 字段的顺序可以互换，而不会出现任何问题，因为一个是数字，另一个是文本（IN）。'
- en: Use and Interpretation of Partially Qualified Domain Names (PQDNs)
  id: totrans-1152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 部分限定域名（PQDNs）的使用和解释
- en: Domain names may be mixed between FQDNs and PQDNs (described in [Chapter 53](ch53.html
    "Chapter 53. DNS NAME SPACE, ARCHITECTURE, AND TERMINOLOGY")). PQDNs are used
    to make master files faster to create and more readable, by cutting down on the
    common parts of names. They are sort of the human equivalent of DNS message compression.
    An FQDN is shown as a full domain name ending in a dot (.) to represent the DNS
    name tree root. A PQDN is given as just a partial name with no root, and is interpreted
    as an FQDN by the software reading the master file. (See the description of the
    `$ORIGIN` directive in the next section for more information.)
  id: totrans-1153
  prefs: []
  type: TYPE_NORMAL
  zh: 域名可以在 FQDNs 和 PQDNs（在第 53 章中描述）之间混合使用。PQDNs 用于使主文件创建更快、更易读，通过减少名称的公共部分。它们在某种程度上是
    DNS 消息压缩的人类等效物。FQDN 以点（.）结尾的完整域名表示，以表示 DNS 名称树的根。PQDN 只给出一个没有根的局部名称，并由读取主文件的软件解释为
    FQDN。（有关更多信息，请参阅下一节中 `$ORIGIN` 指令的描述。）
- en: It is important to remember the trailing dot to mark FQDNs. If the origin is
    [xyzindustries.com](http://xyzindustries.com) and in its zone file the name bigisp.net
    appears, the server will read this as [bigisp.net.xyzindustries.com](http://bigisp.net.xyzindustries.com)—probably
    not what you want. Also, email addresses, such as the `<`*`r-name`*`>` field in
    the SOA record, have the @ of the email address converted to a dot, following
    the standard DNS convention.
  id: totrans-1154
  prefs: []
  type: TYPE_NORMAL
  zh: 记住使用尾随点来标记完全限定域名（FQDNs）是很重要的。如果原始域名是 [xyzindustries.com](http://xyzindustries.com)
    并且在其区域文件中出现了 bigisp.net 这个名称，服务器将读取为 [bigisp.net.xyzindustries.com](http://bigisp.net.xyzindustries.com)——这很可能不是你想要的。此外，电子邮件地址，如
    SOA 记录中的 `<r-name>` 字段，将电子邮件地址的 @ 符号转换为点，遵循标准的 DNS 习惯。
- en: Master File Directives
  id: totrans-1155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主文件指令
- en: 'In addition to RRs, most master file implementations also support the use of
    *directives*. These are commands that specify certain important pieces of information
    to guide how the master file is to be interpreted. The following are three of
    the most common directives:'
  id: totrans-1156
  prefs: []
  type: TYPE_NORMAL
  zh: 除了资源记录（RRs）之外，大多数主文件实现还支持使用 *指令*。这些是用于指定某些重要信息以指导如何解释主文件的命令。以下是最常见的三个指令：
- en: '`$ORIGIN` Specifies the domain name that is appended to unqualified specifications.
    This is the base used to convert PQDNs to FQDNs. For example, if the origin is
    [xyzindustries.com](http://xyzindustries.com)., then a PQDN such as "sales" will
    be interpreted as [sales.xyzindustries.com](http://sales.xyzindustries.com). Once
    defined, the origin can be referenced by just using @ in place of a name, as you
    will see in the example of a sample master file shown at the end of this section.'
  id: totrans-1157
  prefs: []
  type: TYPE_NORMAL
  zh: '`$ORIGIN` 指定附加到未限定规范中的域名。这是将 PQDN 转换为 FQDN 的基础。例如，如果起源是 [xyzindustries.com](http://xyzindustries.com)，则
    PQDN “sales” 将被解释为 [sales.xyzindustries.com](http://sales.xyzindustries.com)。一旦定义，起源可以通过仅使用
    @ 而不是名称来引用，正如你将在本节末尾显示的示例主文件中看到的那样。'
- en: '`$TTL` Specifies the default TTL value to be used for any RRs that do not specify
    a TTL value in the record itself. (This value was formerly specified by the Minimum
    field in the SOA record.)'
  id: totrans-1158
  prefs: []
  type: TYPE_NORMAL
  zh: '`$TTL` 指定用于任何未在记录本身中指定 TTL 值的 RR 的默认 TTL 值。（此值以前由 SOA 记录中的最小字段指定。）'
- en: '`$INCLUDE` Allows one master file to include the contents of another. This
    is sometimes used to save the duplication of certain entries that are common between
    zones.'
  id: totrans-1159
  prefs: []
  type: TYPE_NORMAL
  zh: '`$INCLUDE` 允许一个主文件包含另一个文件的 内容。这有时用于在区域之间保存某些条目的重复。'
- en: Syntax Rules for Master Files
  id: totrans-1160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主文件语法规则
- en: 'There are a few other syntax rules for DNS master files, some of which are
    intended to save time or energy on the part of administrators:'
  id: totrans-1161
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 主文件有一些其他的语法规则，其中一些是为了节省管理员的时间和精力：
- en: '**Multiple-Record Shorthand** If multiple consecutive records pertain to the
    same domain, the `<`*`domain-name`*`>` is specified for the first one and can
    be then be left blank for the subsequent ones. The server will assume that any
    RRs without a `<`*`domain-name`*`>` indicated apply to the last `<`*`domain-name`*`>`
    it saw.'
  id: totrans-1162
  prefs: []
  type: TYPE_NORMAL
  zh: '**多记录缩写** 如果多个连续的记录属于同一域名，则第一个记录指定 `<`*`域名`*`>`，然后后续的可以留空。服务器将假设任何没有 `<`*`域名`*`>`
    标示的 RR 应用于它最后看到的 `<`*`域名`*`>`。'
- en: '**Comments** A semicolon (;) marks a comment. Any text from the semicolon until
    the end of the line is ignored.'
  id: totrans-1163
  prefs: []
  type: TYPE_NORMAL
  zh: '**注释** 分号 (;) 标记注释。从分号到行尾的任何文本都将被忽略。'
- en: '**Escape Character** A backslash (\) is used to "escape" the special meaning
    of a character. For example, a double-quotation (quote) mark (") is used to delimit
    text strings; a literal double-quote character is indicated by a backslash–double-quote
    combination (\").'
  id: totrans-1164
  prefs: []
  type: TYPE_NORMAL
  zh: '**转义字符** 反斜杠 (\) 用于“转义”字符的特殊含义。例如，双引号 (quote) 标记用于分隔文本字符串；字面双引号字符由反斜杠-双引号组合
    (\") 表示。'
- en: '**White Space** Tabs and spaces are used as delimiters and blank lines are
    ignored. For readability, most smart administrators indent using tabs to clarify
    which records belong with which names, and group records using blank lines and
    comments.'
  id: totrans-1165
  prefs: []
  type: TYPE_NORMAL
  zh: '**空白** 制表符和空格用作分隔符，空白行将被忽略。为了可读性，大多数智能管理员使用制表符缩进来明确哪些记录属于哪些名称，并使用空白行和注释来分组记录。'
- en: '**Case** Like DNS domain names, master file entries are case-insensitive.'
  id: totrans-1166
  prefs: []
  type: TYPE_NORMAL
  zh: '**大小写** 与 DNS 域名一样，主文件条目不区分大小写。'
- en: Specific RR Syntax and Examples
  id: totrans-1167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 特定 RR 语法和示例
- en: The following sections show the specific formats and examples for each of the
    common RR types. The fields are basically the same as the ones explained in the
    NS binary record formats. The examples include explanatory comments using the
    DNS comment format. Assume that these examples are for the zone googleplex.edu.
  id: totrans-1168
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分展示了每种常见 RR 类型的特定格式和示例。字段基本上与在 NS 二进制记录格式中解释的字段相同。示例中使用了 DNS 注释格式进行说明。假设这些示例适用于
    googleplex.edu 区域。
- en: A (Address) RR
  id: totrans-1169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A (地址) RR
- en: 'The format for an A record is as follows:'
  id: totrans-1170
  prefs: []
  type: TYPE_NORMAL
  zh: A 记录的格式如下：
- en: '[PRE9]'
  id: totrans-1171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Here is an example:'
  id: totrans-1172
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例：
- en: '[PRE10]'
  id: totrans-1173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: NS (Name Server) RR
  id: totrans-1174
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: NS (域名服务器) RR
- en: 'The format for an NS record is as follows:'
  id: totrans-1175
  prefs: []
  type: TYPE_NORMAL
  zh: NS 记录的格式如下：
- en: '[PRE11]'
  id: totrans-1176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Here is an example:'
  id: totrans-1177
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例：
- en: '[PRE12]'
  id: totrans-1178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: CName (Canonical Name) RR
  id: totrans-1179
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CName (规范名称) RR
- en: 'The format for a CName record is as follows:'
  id: totrans-1180
  prefs: []
  type: TYPE_NORMAL
  zh: CName 记录的格式如下：
- en: '[PRE13]'
  id: totrans-1181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Here is an example:'
  id: totrans-1182
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例：
- en: '[PRE14]'
  id: totrans-1183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: SOA (Start Of Authority) RR
  id: totrans-1184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SOA (授权开始) RR
- en: 'The format for an SOA record is as follows:'
  id: totrans-1185
  prefs: []
  type: TYPE_NORMAL
  zh: SOA 记录的格式如下：
- en: '[PRE15]'
  id: totrans-1186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Here is an example:'
  id: totrans-1187
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例：
- en: '[PRE16]'
  id: totrans-1188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: PTR (Pointer) RR
  id: totrans-1189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PTR (指针) RR
- en: 'The format for a PTR record is as follows:'
  id: totrans-1190
  prefs: []
  type: TYPE_NORMAL
  zh: PTR 记录的格式如下：
- en: '[PRE17]'
  id: totrans-1191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Here is an example:'
  id: totrans-1192
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例：
- en: '[PRE18]'
  id: totrans-1193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Note that the PTR record would actually be in the IN-ADDR.ARPA domain.
  id: totrans-1194
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，PTR 记录实际上位于 IN-ADDR.ARPA 域。
- en: MX (Mail Exchange) RR
  id: totrans-1195
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MX (邮件交换) RR
- en: 'The format of an MX record is as follows:'
  id: totrans-1196
  prefs: []
  type: TYPE_NORMAL
  zh: MX 记录的格式如下：
- en: '[PRE19]'
  id: totrans-1197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Here is an example:'
  id: totrans-1198
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例：
- en: '[PRE20]'
  id: totrans-1199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: TXT (Text) RR
  id: totrans-1200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: TXT (文本) RR
- en: 'The format of a TXT record is as follows:'
  id: totrans-1201
  prefs: []
  type: TYPE_NORMAL
  zh: TXT记录的格式如下：
- en: '[PRE21]'
  id: totrans-1202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Here is an example:'
  id: totrans-1203
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个例子：
- en: '[PRE22]'
  id: totrans-1204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Sample Master File
  id: totrans-1205
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 样本主文件
- en: The following is a real-world example of a DNS master file, taken from my own
    [pcguide.com](http://pcguide.com) server (slightly modified), hosted by (and DNS
    information provided by) the fine folks at [pair.com](http://pair.com). Note the
    use of @ as a shortcut to mean "this domain" ([pcguide.com](http://pcguide.com)).
  id: totrans-1206
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个DNS主文件的真实世界示例，取自我的[pcguide.com](http://pcguide.com)服务器（略有修改），由[pair.com](http://pair.com)的优秀人士托管（并提供DNS信息）。注意使用@作为“此域名”的快捷方式（[pcguide.com](http://pcguide.com)）。
- en: '[PRE23]'
  id: totrans-1207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: DNS Changes to Support IPv6
  id: totrans-1208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持IPv6的DNS更改
- en: Version 4 of the Internet Protocol (IPv4) is the basis of today's Internet and
    the foundation upon which the TCP/IP protocol suite is built. While IPv4 has served
    us well for over two decades, it has certain important drawbacks that would limit
    internetworks of the future if it were to continue to be used. For this reason,
    the next generation of IP, IP version 6 (IPv6), has been in development for many
    years. IPv6 will eventually replace IPv4 and take TCP/IP into the future.
  id: totrans-1209
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网协议第4版（IPv4）是今天互联网的基础，也是TCP/IP协议套件建立的基础。虽然IPv4在过去二十多年里为我们服务得很好，但它有一些重要的缺点，如果继续使用，将限制未来的互连网络。因此，下一代IP，即IP版本6（IPv6），已经开发多年。IPv6最终将取代IPv4并将TCP/IP带入未来。
- en: The change from IPv4 to IPv6 will have effects that ripple to other TCP/IP protocols,
    including DNS. DNS is a higher-level protocol, so you might think that based on
    the principle of layering, a change to IP should not affect it. However, this
    is another example of how strict layering doesn't always apply. DNS works directly
    with IP addresses, and one of the most significant modifications that IPv6 makes
    to IP is in the area of addressing, so this means that using DNS on IPv6 requires
    some changes to how the protocol works.
  id: totrans-1210
  prefs: []
  type: TYPE_NORMAL
  zh: 从IPv4到IPv6的转换将对其他TCP/IP协议产生影响，包括DNS。DNS是一个高级协议，因此根据分层原理，IP的变化不应该影响它。然而，这又是分层并不总是适用的另一个例子。DNS直接与IP地址工作，IPv6对IP的最重要修改之一是在地址领域，这意味着在IPv6上使用DNS需要对协议的工作方式做出一些更改。
- en: IPv6 DNS Extensions
  id: totrans-1211
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IPv6 DNS扩展
- en: 'In fact, because DNS is so architecturally distant from IP down there at layer
    3, the changes required are not extensive. RFC 1886, "IPv6 DNS Extensions," published
    in December 1995, was the Internet Engineering Task Force''s (IETF''s) first formalized
    attempt to describe the changes needed in DNS to support IPv6\. It defines three
    specific modifications to DNS for IPv6:'
  id: totrans-1212
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，由于DNS在第三层的IP架构上与IP相距甚远，所需的变化并不广泛。1995年12月发布的RFC 1886，“IPv6 DNS扩展”，是互联网工程任务组（IETF）首次正式尝试描述DNS在支持IPv6方面所需的变化。它定义了DNS在IPv6中的三个具体修改：
- en: '**New RR Type—AAAA (IPv6 Address)** The regular DNS Address (A) RR is defined
    for a 32-bit IPv4 address, so a new one was created to allow a domain name to
    be associated with a 128-bit IPv6 address. The four *A*s (AAAA) are a mnemonic
    to indicate that the IPv6 address is four times the size of the IPv4 address.
    The AAAA record is structured in very much the same way as the A record in both
    binary and master file formats; it is just much larger. The DNS RR Type value
    for AAAA is 28.'
  id: totrans-1213
  prefs: []
  type: TYPE_NORMAL
  zh: '**新的RR类型—AAAA（IPv6地址）** 常规DNS地址（A）RR是为32位IPv4地址定义的，因此创建了一个新的类型，以便将域名与128位IPv6地址关联起来。四个*A*（AAAA）是一个助记符，表示IPv6地址是IPv4地址的四倍大小。AAAA记录的结构与二进制和主文件格式中的A记录非常相似；只是更大。AAAA的DNS
    RR类型值为28。'
- en: '**New Reverse Resolution Hierarchy** A new hierarchical structure similar to
    IN-ADDR.ARPA is defined for IPv6 reverse lookups, but the IETF put it in a different
    top-level domain (TLD). The new domain is *IP6.INT* and is used in a way similar
    to how IN-ADDR.ARPA works. However, since IPv6 addresses are expressed in hexadecimal
    instead of dotted-decimal, IP6.INT has 16 subdomains 0 through F, and each of
    those has 16 subdomains 0 through F, and so on, 16 layers deep. Yes, this leads
    to a potentially frightfully large reverse resolution database!'
  id: totrans-1214
  prefs: []
  type: TYPE_NORMAL
  zh: '**新的反向解析层次结构** 为IPv6反向查找定义了一个类似于IN-ADDR.ARPA的新层次结构，但IETF将其放在了一个不同的顶级域名（TLD）中。新域名是*IP6.INT*，其使用方式与IN-ADDR.ARPA类似。然而，由于IPv6地址是用十六进制表示而不是点分十进制，IP6.INT有16个子域0到F，每个子域也有16个子域0到F，以此类推，共16层深。是的，这可能导致一个潜在的巨大反向解析数据库！'
- en: '**Changes to Query Types and Resolution Procedure** All query types that work
    with A records or result in A records being included in the Additional section
    of a reply must be changed to also handle AAAA records. Also, queries that would
    normally result in A records being returned in the Additional section must return
    the corresponding AAAA records only in the Answer section, not in the Additional
    section.'
  id: totrans-1215
  prefs: []
  type: TYPE_NORMAL
  zh: '**查询类型和解析程序的更改** 所有与A记录一起工作或导致A记录包含在回复的附加部分中的查询类型都必须更改，以处理AAAA记录。此外，通常会导致在附加部分返回A记录的查询必须仅在答案部分返回相应的AAAA记录，而不是在附加部分。'
- en: Tip
  id: totrans-1216
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**KEY CONCEPT** Even though DNS resides far above IP in the TCP/IP protocol
    suite architecture, it works intimately with IP addresses. For this reason, changes
    are required to allow it to support the new IPv6\. These changes include the definition
    of a new IPv6 address RR (AAAA), a new reverse resolution domain hierarchy, and
    certain changes to how messaging is performed.'
  id: totrans-1217
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键概念** 尽管DNS位于TCP/IP协议栈架构中IP之上，但它与IP地址紧密协作。因此，需要进行一些更改以使其能够支持新的IPv6。这些更改包括定义一个新的IPv6地址RR（AAAA）、一个新的反向解析域层次结构以及某些对消息传递方式的更改。'
- en: Proposed Changes to the IPv6 DNS Extensions
  id: totrans-1218
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对IPv6 DNS扩展的提议性更改
- en: In 2000, the IETF published RFC 2874, "DNS Extensions to Support IPv6 Address
    Aggregation and Renumbering." This standard proposed a replacement for the IPv6
    support introduced in RFC 1886, using a new record type, A6, instead of RFC 1886's
    AAAA. The main difference between AAAA and A6 records is that the former are just
    whole addresses like A records, while A6 records can contain either a whole or
    partial address.
  id: totrans-1219
  prefs: []
  type: TYPE_NORMAL
  zh: 2000年，IETF发布了RFC 2874，“支持IPv6地址聚合和重新编号的DNS扩展”。该标准提出用新的记录类型A6来替代RFC 1886中引入的IPv6支持，而不是使用RFC
    1886的AAAA。AAAA记录与A6记录的主要区别在于，前者只是像A记录一样的完整地址，而A6记录可以包含完整或部分地址。
- en: The idea behind RFC 2874 was that A6 records could be set up in a manner that
    complements the IPv6 format for unicast addresses (see [Chapter 25](ch25.html
    "Chapter 25. IPV6 ADDRESSING")). Then name resolution would involve a technique
    called *chaining* to determine a full address for a name from a set of partially
    specified address components. In essence, this would make the addresses behave
    much the way hierarchical names themselves work, providing some potential flexibility
    benefits.
  id: totrans-1220
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 2874背后的想法是，A6记录可以以补充IPv6单播地址格式（见[第25章](ch25.html "第25章。IPv6寻址"））的方式设置。然后，名称解析将涉及一种称为*链式*的技术，从一组部分指定的地址组件中确定名称的完整地址。本质上，这将使地址的行为与分层名称本身的工作方式非常相似，提供一些潜在的灵活性优势。
- en: For a couple of years, both RFC 1886 and RFC 2874 were proposed standards, and
    this led to considerable confusion. In August 2002, RFCs 3363 and 3364 were published,
    which clarified the situation with these two proposals. RFC 3363 represents the
    "Supreme Court decision," which was that RFC 2874 and the A6 record be changed
    to experimental status and the AAAA record of RFC 1886 be kept as the DNS IPv6
    standard.
  id: totrans-1221
  prefs: []
  type: TYPE_NORMAL
  zh: 在几年时间里，RFC 1886和RFC 2874都被提出作为标准，这导致了相当大的混淆。2002年8月，发布了RFC 3363和RFC 3364，这些文件澄清了这两个提案的情况。RFC
    3363代表了“最高法院的决定”，即RFC 2874和A6记录应改为实验性状态，而RFC 1886的AAAA记录应保留为DNS IPv6标准。
- en: The full explanation for the decision can be found in RFC 3364\. In a nutshell,
    it boiled down to the IETF believing that there were significant potential risks
    in the successful implementation of RFC 2874\. While the capabilities of the A6
    record were interesting, it was not clear that they were needed, and given those
    risks, the IETF felt that sticking with RFC 1886 was the better move.
  id: totrans-1222
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这一决定的完整解释可以在RFC 3364中找到。简而言之，它归结为IETF认为RFC 2874的成功实施存在重大潜在风险。虽然A6记录的功能很有趣，但并不清楚它们是否是必需的，考虑到这些风险，IETF认为坚持使用RFC
    1886是更好的选择。
