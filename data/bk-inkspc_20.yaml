- en: 'Chapter 20. Tutorial: Creating an Animation'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 20 章。教程：创建动画
- en: From the start, SVG was designed as a language for both static and animated
    vector graphics. At one time dubbed “a Flash killer,” it is indeed suitable for
    a wide variety of scripted and declarative animations. Unfortunately, even several
    years after the introduction of SVG, real SVG animations (as opposed to static
    SVG) are hard to find on the Web. There are several reasons for this, the most
    important being the lack of a single standard player that would offer a significant
    competitive advantage over Adobe’s (formerly Macromedia’s) Flash. Currently, almost
    all of the animations on the Web are either in Flash or in animated GIF formats—just
    as they were five years ago.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 从一开始，SVG 就被设计为一种用于静态和动画矢量图形的语言。一度被称为“Flash 杀手”，它确实适合各种脚本和声明性动画。不幸的是，即使 SVG 介绍了几年后，真正的
    SVG 动画（与静态 SVG 相比）在网络上仍然很难找到。这有几个原因，其中最重要的是缺乏一个单一的播放器标准，它将提供比 Adobe（前 Macromedia）的
    Flash 显著的竞争优势。目前，网络上几乎所有的动画要么是 Flash 格式，要么是动画 GIF 格式——就像五年前一样。
- en: From Inkscape’s perspective, however, this may be a good thing. Inkscape does
    not yet support creating animated SVG documents (except if you add animation attributes
    manually via XML Editor) and can only display SVG documents statically. But you
    still can use Inkscape to create static frames and then combine them into a GIF
    or Flash animation with some other software. This method may seem awkward at first,
    but it is in fact workable and may deliver very good results. Why is this worth
    the trouble, and what kinds of animations are best suited for this technique?
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Inkscape 的角度来看，这或许是一件好事。Inkscape 目前还不支持创建动画 SVG 文档（除非你通过 XML 编辑器手动添加动画属性），并且只能静态地显示
    SVG 文档。但你可以使用 Inkscape 创建静态帧，然后使用其他软件将它们组合成 GIF 或 Flash 动画。这种方法一开始可能看起来有些笨拙，但实际上是可行的，并且可能产生非常好的效果。为什么这值得麻烦，哪些类型的动画最适合这种技术？
- en: Any animation including complex natural or interacting movements is perhaps
    out of reach for the Inkscape-based animation technique described in this tutorial.
    Without a timeline control, it’s difficult to work on anything but simple repeating
    animations several frames long. But then, many animations for the Web—banners,
    headings, blog avatars—fit this description perfectly.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 任何包括复杂自然或交互运动的动画可能都超出了本教程中描述的基于 Inkscape 的动画技术所能达到的范围。没有时间轴控制，很难制作除了简单重复动画之外的内容。然而，对于
    Web 上的许多动画——横幅、标题、博客头像——这种描述非常合适。
- en: 20.1 Creating the Template
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.1 创建模板
- en: 'The most natural way to represent animation frames in Inkscape is by putting
    them on separate layers (**[4.6 Layers](ch04s06.html "4.6 Layers")**). You can
    easily toggle visibility of each layer to see how your frames stack up and control
    what changes from one frame to the next. However, creating many layers manually
    (**Layer** ▸ **Add Layer**) is very tedious. I wrote a simple Python script that
    creates a 200-by-200 px document with 100 empty layers:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Inkscape 中表示动画帧最自然的方式是将它们放在单独的图层上（**[4.6 图层](ch04s06.html "4.6 图层")**）。你可以轻松切换每个图层的可见性，以查看你的帧是如何堆叠的，并控制从一个帧到下一个帧的变化。然而，手动创建许多图层（**图层**
    ▸ **添加图层**）是非常繁琐的。我编写了一个简单的 Python 脚本，它创建了一个 200x200 像素的文档，包含 100 个空图层：
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'All layers are created hidden (that’s what `display="none"` is for), so in
    Inkscape, you will need to unhide them one by one (**[4.6.3 The Current Layer
    Indicator](ch04s06.html#fourdot6dot3_the_current_layer_indicator "4.6.3 The Current
    Layer Indicator")**) to draw on them. You can vary the number of layers created
    by the script (`range(100)`) as well as the dimensions of the artboard (`width="200"
    height="200"`). Save the script into the file *generate-layers.py* and, in a command-line
    (or “terminal”) window of your OS, run it and capture its output to an SVG file.
    (You will need the Python language interpreter to be installed on your computer;
    you can get it at *[http://python.org](http://python.org)*.) Then, run Inkscape
    on this file:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 所有图层都是默认隐藏的（这就是 `display="none"` 的作用），所以在 Inkscape 中，你需要逐个显示它们（**[4.6.3 当前图层指示器](ch04s06.html#fourdot6dot3_the_current_layer_indicator
    "4.6.3 当前图层指示器")**)才能在上面绘制。你可以通过脚本创建的图层数量（`range(100)`）以及画布的尺寸（`width="200" height="200"`）来调整。将脚本保存到文件
    *generate-layers.py* 中，然后在你的操作系统命令行（或“终端”）窗口中运行它，并将输出捕获到 SVG 文件中。（你需要在你的计算机上安装
    Python 语言解释器；你可以在 *[http://python.org](http://python.org)* 获取它。）然后，在这个文件上运行 Inkscape：
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You can also put the resulting file (*ani.svg*) into your *~/.inkscape/templates*
    folder where it will work as a template, so the next time you will be able to
    create an empty 100-layer file by choosing it from the **File** ▸ **New** list.
    Here is Inkscape’s **Layers** dialog (**[4.6.4 The Layers Dialog](ch04s06.html#fourdot6dot4_the_layers_dialog
    "4.6.4 The Layers Dialog")**) which is essential for working with such a multilayer
    file:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以将生成的文件（*ani.svg*）放入您的 *~/.inkscape/templates* 文件夹中，它将作为一个模板使用，因此下次您可以从 **文件**
    ▸ **新建** 列表中选择它来创建一个空的 100 层文件。以下是 Inkscape 的 **图层** 对话框（**[4.6.4 图层对话框](ch04s06.html#fourdot6dot4_the_layers_dialog
    "4.6.4 图层对话框")**），这对于处理这样的多层文件是必不可少的：
- en: '![A 100-layer animation template loaded into Inkscape](httpatomoreillycomsourcenostarchimages1736404.png.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![加载到 Inkscape 中的 100 层动画模板](httpatomoreillycomsourcenostarchimages1736404.png.jpg)'
- en: Figure 20-1. A 100-layer animation template loaded into Inkscape
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 图 20-1. 加载到 Inkscape 中的 100 层动画模板
- en: 20.2 First Frames
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.2 第一帧
- en: 'Let’s make an animation of a dancing man—something catchy yet simple enough
    to not require much drawing skill and to fit the small format of the animation
    (and this brief tutorial). Our hero’s claim to fame will be in his movements,
    so we don’t need to make his countenance too sophisticated. Something as primitive
    as this stick figure will do:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们制作一个跳舞人物的动画——既吸引人又足够简单，不需要太多的绘画技巧，并且适合动画的小格式（以及这个简短的教程）。我们英雄的成名之处将在于他的动作，所以我们不需要让他看起来太复杂。像这样的原始棍状人物就足够了：
- en: '![The stick figure we’re starting with, showing its nodes in the Node tool](httpatomoreillycomsourcenostarchimages1736406.png.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![我们开始使用的棍状人物，显示节点在节点工具中的情况](httpatomoreillycomsourcenostarchimages1736406.png.jpg)'
- en: Figure 20-2. The stick figure we’re starting with, showing its nodes in the
    Node tool
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 图 20-2. 我们开始使用的棍状人物，显示节点在节点工具中的情况
- en: It is made of three simple paths (hands, legs, and body) and one ellipse (head).
    Use the Pen tool (**[14.1 The Pen Tool](ch14s01.html "14.1 The Pen Tool")**) with
    ![](httpatomoreillycomsourcenostarchimages1735328.png.jpg) to draw horizontal/vertical
    straight lines; then use the Ellipse tool (**[11.4 Ellipses](ch11s04.html "11.4
    Ellipses")**) to create the head. Then, to facilitate interpolation, do **Path**
    ▸ **Combine** on the body and limbs so they become one path, and use ![](httpatomoreillycomsourcenostarchimages1735556.png.jpg)-click
    in the Node tool (**[12.5.3 Deleting and Creating Nodes](ch12s05.html#one2dot5dot3_deleting_and_creating_nodes
    "12.5.3 Deleting and Creating Nodes")**) to add nodes in his elbow and knee joints.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 它由三条简单的路径（手、腿和身体）和一个椭圆（头部）组成。使用钢笔工具（**[14.1 钢笔工具](ch14s01.html "14.1 钢笔工具")**)和
    ![钢笔工具](httpatomoreillycomsourcenostarchimages1735328.png.jpg) 绘制水平/垂直的直线；然后使用椭圆工具（**[11.4
    椭圆](ch11s04.html "11.4 椭圆")**)创建头部。然后，为了便于插值，在身体和四肢上执行 **路径** ▸ **合并**，使它们成为一条路径，并在节点工具（**[12.5.3
    删除和创建节点](ch12s05.html#one2dot5dot3_deleting_and_creating_nodes "12.5.3 删除和创建节点")**)中点击
    ![节点工具](httpatomoreillycomsourcenostarchimages1735556.png.jpg) 以在其肘部和膝部关节处添加节点。
- en: 20.3 Tweening
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.3 缓动
- en: Now make a copy of the character by duplicating it (![](httpatomoreillycomsourcenostarchimages1735374.png.jpg)
    with both head and body selected), move it to the right and play with its nodes
    (in the Node tool) to give our man a funky dancing pose. We thus get two *keyframes*,
    and the entire animation could be as simple as alternating between them.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 现在通过复制角色（![复制角色](httpatomoreillycomsourcenostarchimages1735374.png.jpg) 选择头部和身体），将其移动到右侧，并调整其节点（在节点工具中），以给我们的男子一个有趣的舞蹈姿势。因此，我们得到两个
    *关键帧*，整个动画可以简单到只是在这两个帧之间交替。
- en: '![Two keyframes](httpatomoreillycomsourcenostarchimages1736408.png.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![两个关键帧](httpatomoreillycomsourcenostarchimages1736408.png.jpg)'
- en: Figure 20-3. Two keyframes
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 图 20-3. 两个关键帧
- en: 'However, it would be much better to add intermediate frames to make the transition
    between the keyframes smoother. Animators call this *tweening* (derived from *between*),
    and Inkscape can to some extent automate this process: Select both bodies (i.e.,
    two path objects) and do **Extensions** ▸ **Generate from Path** ▸ **Interpolate**.
    Specify the number of **Interpolation steps** (say, 4), select **Interpolation
    method 1**, and, if desired, use a nonzero **Exponent** value to make the movement
    speed up or slow down nonlinearly. Then, the head ellipses can be placed over
    the tweened bodies by another interpolation using the same number of steps and
    the same **Exponent** ([Figure 20-4](ch20s03.html#interpolating_the_keyframes
    "Figure 20-4. Interpolating the keyframes")).'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，添加中间帧以使关键帧之间的过渡更平滑会更好。动画师称之为*tweening*（源自*between*），Inkscape可以在一定程度上自动化此过程：选择两个身体（即，两个路径对象），然后执行**扩展**
    ▸ **从路径生成** ▸ **插值**。指定**插值步数**（例如，4），选择**插值方法 1**，如果需要，可以使用非零的**指数**值来使运动速度非线性地加快或减慢。然后，可以通过使用相同数量的步骤和相同的**指数**值进行另一个插值，将头部椭圆放置在插值后的身体上（[图20-4](ch20s03.html#interpolating_the_keyframes
    "图20-4. 插值关键帧")）。
- en: If the tweening steps don’t look right to you, you can undo the interpolation,
    tweak the keyframes, and reinterpolate until you get what you like. **Interpolation
    method 1** (**[13.3 Path Extensions](ch13s03.html "13.3 Path Extensions")**) matches
    the nodes that are at the same position along the path, so it is preferable when
    one of the keyframe paths was created by tweaking the other one without adding
    or removing nodes (as in our case). If two paths are of different origin and have
    incompatible nodes, **method 2** is better.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果插值步骤看起来不正确，您可以撤销插值，调整关键帧，然后重新插值，直到您满意为止。**插值方法 1**（**[13.3 路径扩展](ch13s03.html
    "13.3 路径扩展")**）与路径上相同位置的节点匹配，因此当其中一个关键帧路径是通过调整另一个路径而没有添加或删除节点（如我们的情况）创建时，它更可取。如果两个路径来自不同的来源并且具有不兼容的节点，则**方法
    2**更好。
- en: '![Interpolating the keyframes](httpatomoreillycomsourcenostarchimages1736410.png.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![插值关键帧](httpatomoreillycomsourcenostarchimages1736410.png.jpg)'
- en: Figure 20-4. Interpolating the keyframes
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-4. 插值关键帧
- en: 20.4 Compositing and Creating Frames
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.4 合成和创建帧
- en: 'Now it’s time to place our animation on its proper place on the canvas and
    distribute the frames across layers. Remove the tweening once again and place
    the second keyframe right over the first. (Note that the dancer’s right foot coincides
    in both keyframes because it rests on the floor.) Select both overlapping figures
    and place them onto the canvas, scaling them if necessary and taking into account
    whatever other elements you plan to add (such as a text heading). Finally, interpolate
    the bodies and the heads again—right in place:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候将我们的动画放置在画布的正确位置，并将帧分布到各个层上。再次取消插值，并将第二个关键帧直接放在第一个上面。（注意，舞者的右脚在两个关键帧中都是一致的，因为它
    resting on the floor.) 选择两个重叠的图形并将它们放置在画布上，如果需要，进行缩放，并考虑您计划添加的其他元素（例如，文本标题）。最后，再次在原地插值身体和头部：
- en: '![Interpolating in place](httpatomoreillycomsourcenostarchimages1736412.png.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![原地插值](httpatomoreillycomsourcenostarchimages1736412.png.jpg)'
- en: Figure 20-5. Interpolating in place
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-5. 原地插值
- en: 'The next task to do in Inkscape is a bit boring (it may be automated in future
    versions). You need to ungroup the group of the interpolation paths and manually
    place each one on its layer from 002 to 005, with the keyframes occupying layers
    001 and 006\. Then, duplicate the frames in the reverse order: Frames 005 to 001
    go into the range 007 to 011, to make the dancer smoothly return into the original
    position.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在Inkscape中接下来要做的任务有点无聊（未来版本可能会自动化）。您需要取消组合插值路径的组，并将每个路径从002到005手动放置在其层上，关键帧占据001和006层。然后，以相反的顺序复制帧：从005到001的帧进入007到011的范围，使舞者平滑地回到原始位置。
- en: Use ![](httpatomoreillycomsourcenostarchimages1735516.png.jpg) and ![](httpatomoreillycomsourcenostarchimages1735518.png.jpg)
    to move the selected objects one layer up/down, and watch the status bar that
    tells you in which layer your selected objects are. Alternatively, you can cut
    (![](httpatomoreillycomsourcenostarchimages1735496.png.jpg)) an object, switch
    to the destination layer, and paste it in place (![](httpatomoreillycomsourcenostarchimages1735500.png.jpg)).
    Finally, make sure all the layers you’ve used are visible, and save the SVG file.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 使用![http://atomoreillycomsourcenostarchimages1735516.png.jpg](http://atomoreillycomsourcenostarchimages1735516.png.jpg)和![http://atomoreillycomsourcenostarchimages1735518.png.jpg]将选定的对象向上/向下移动一层，并观察状态栏，它会告诉您选定的对象位于哪一层。或者，您可以将对象剪切(![](http://atomoreillycomsourcenostarchimages1735496.png.jpg))，切换到目标层，并粘贴到原位(![](http://atomoreillycomsourcenostarchimages1735500.png.jpg))。最后，确保所有使用的层都是可见的，并保存SVG文件。
- en: 20.5 Export and Production
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.5 导出和生产
- en: You can export the layers manually, but that would be rather frustrating—especially
    since you may need to do it more than once after viewing the result and making
    changes to the source. Since Inkscape offers a powerful set of command-line parameters,
    I wrote another Python script to automate the export. The script takes as parameters
    the name of source file, the numbers of the start and end layers to export, and
    the name of the resulting GIF; it then calls Inkscape to export each layer separately.
    After exporting, this script calls the convert utility from ImageMagick for combining
    the frames into an animated GIF file which can then be viewed in any graphic web
    browser.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以手动导出层，但这可能会相当令人沮丧——尤其是如果您在查看结果并对源文件进行更改后需要多次这样做。由于Inkscape提供了一组强大的命令行参数，我编写了另一个Python脚本来自动化导出。该脚本接受源文件名、要导出的起始和结束层的编号以及结果GIF的名称作为参数；然后调用Inkscape分别导出每个层。导出后，此脚本调用ImageMagick的convert实用程序将帧组合成动画GIF文件，然后可以在任何图形网页浏览器中查看。
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Save it as *produce-gif.py* and run:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 保存为*produce-gif.py*并运行：
- en: '[PRE3]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Our output so far can be viewed online at *[http://www.kirsanov.com/inkscape-animation/stick.gif](http://www.kirsanov.com/inkscape-animation/stick.gif)*.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们到目前为止的输出可以在网上查看*[http://www.kirsanov.com/inkscape-animation/stick.gif](http://www.kirsanov.com/inkscape-animation/stick.gif)*。
- en: Note
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Instead of the convert utility from ImageMagick, you can use the open source
    Gifsicle program* ([http://www.lcdf.org/gifsicle](http://www.lcdf.org/gifsicle))
    *for composing frames into an animated GIF file. Its advantage is that it can
    optimize the animation, reducing its file size.*'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '*您可以使用开源的Gifsicle程序[http://www.lcdf.org/gifsicle](http://www.lcdf.org/gifsicle)代替ImageMagick的convert实用程序来将帧组合成动画GIF文件。它的优点是它可以优化动画，减小文件大小。*'
- en: Note
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*If you want your animation to be in Flash format instead of an animated GIF,
    a straightforward way to do it is to convert your SVG to static SWF frames (for
    example, using the svg2swf utility,* [http://robla.net/1996/svg2swf](http://robla.net/1996/svg2swf)*)
    and then combine the frames into an animation, for which I recommend the SWF Tools
    package* ([http://swftools.org](http://swftools.org)). *The resulting SWF file
    will not be very efficient but it will work.*'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果您希望动画以Flash格式而不是动画GIF格式，一个简单的方法是将您的SVG转换为静态SWF帧（例如，使用svg2swf工具，[http://robla.net/1996/svg2swf](http://robla.net/1996/svg2swf)）然后组合帧以创建动画，我推荐使用SWF
    Tools包[http://swftools.org](http://swftools.org)）。生成的SWF文件可能不是非常高效，但它会工作。*'
- en: 20.6 Hatching
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.6 绘制阴影
- en: Our stick-figure animation looks at most mildly engaging. This smooth, vectory
    style is good for technical animations, such as demonstrating the workings of
    a machine, but is not too inspiring for an animated dance. Can we do something
    about it?
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的棍状动画看起来最多只是轻微吸引人。这种平滑的矢量风格适合技术动画，例如演示机器的工作原理，但对于动画舞蹈来说并不太有启发性。我们能做些什么来改善它吗？
- en: Hide all layers except `001`, select the figure and lower its opacity. Then
    arm yourself with the Calligraphic pen (**[14.3 The Calligraphic Pen Tool](ch14s03.html
    "14.3 The Calligraphic Pen Tool")**), select the **Width** of 20 with **Tremor**
    of 40, and draw over the stick figure trying to make it more random, funky, personalized.
    While at it, you can also add more pronounced feet and fists and more human-like
    body forms in general.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 隐藏除`001`之外的所有层，选择图形并降低其不透明度。然后，使用书法笔（**[14.3 书法笔工具](ch14s03.html "14.3 书法笔工具")**），选择宽度为20，颤动为40，并在棍状图形上绘制，试图使其更加随机、有趣、个性化。在此过程中，您还可以添加更明显的脚和拳头，以及更符合人体形态的身体。
- en: '![Hatching with Calligraphic pen](httpatomoreillycomsourcenostarchimages1736414.png.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![使用书法笔进行阴影处理](http://atomoreilly.com/source/nostarch/images/1736414.png.jpg)'
- en: Figure 20-6. Hatching with Calligraphic pen
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-6. 使用书法笔进行阴影处理
- en: When done, delete the original skeleton figure—it’s served its function of a
    blueprint and is no longer needed. The result is not bad, but it looks a bit foreign
    in its roughness upon the immaculate white background. To fix this, reduce the
    width of the pen to 1 and add some thin random strokes around the dancer, hinting
    at his limbs’ motion and shadows on the floor. Don’t worry if this looks *too*
    random to your taste—when you’ll see him move, this randomness will come live
    and natural.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，删除原始的骨架图——它已经完成了蓝图的功能，不再需要。结果还不错，但在洁白的背景上，它的粗糙感显得有些突兀。为了解决这个问题，将笔的宽度减少到1，并在舞者周围添加一些细的随机线条，暗示他的肢体动作和地板上的阴影。如果你觉得这看起来*太随机*了，不用担心——当你看到他移动时，这种随机性会变得生动而自然。
- en: '![Skeleton removed, motion noise added](httpatomoreillycomsourcenostarchimages1736416.png.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![移除骨架，添加运动噪声](http://atomoreilly.com/source/nostarch/images/1736416.png.jpg)'
- en: Figure 20-7. Skeleton removed, motion noise added
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-7. 移除骨架，添加运动噪声
- en: The main rule in this kind of the project is, *Don’t copy*. Freehand roughness
    cannot be recycled; no matter how similar is one frame to another, you need to
    sketch each frame entirely from scratch, using nothing but the stick figure as
    your guide. Duplicating the freehand strokes (even if you move or scale them)
    will instantly kill the rough, natural feel and make your animation wooden and
    dull. Don’t be lazy; the more you draw the easier it gets.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '在这种类型的项目中的主要规则是，*不要复制*。手绘的粗糙感不能回收；无论一帧与另一帧多么相似，你都需要从头开始绘制每一帧，除了用作引导的棍状人物外，不使用任何其他东西。复制自由手绘的线条（即使你移动或缩放它们）会立即杀死粗糙的自然感，使你的动画显得生硬而乏味。不要偷懒；你画得越多，就越容易。 '
- en: 'And the result is certainly worth the labor: See *[http://www.kirsanov.com/inkscape-animation/rough.gif](http://www.kirsanov.com/inkscape-animation/rough.gif)*
    for the complete hand-drawn animation. Much more inspiring than the interpolated
    stick figure!'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 结果当然值得付出努力：查看*[http://www.kirsanov.com/inkscape-animation/rough.gif](http://www.kirsanov.com/inkscape-animation/rough.gif)*以查看完整的手绘动画。这比插值后的棍状人物更有启发性！
- en: Note
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Using the same technique, you can manually trace with Calligraphic pen over
    any imported bitmap. Make the bitmap half-transparent and sketch on top of it,
    trying to highlight the most important features and ignore the rest. In an animation,
    the source bitmaps might be frames of a video, still photos, or rendered 3D images.*'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '*使用相同的技巧，你可以用书法笔手动在导入的位图中绘制轮廓。将位图设置为半透明，并在其上方绘制草图，尝试突出最重要的特征并忽略其余部分。在动画中，源位图可能是视频的帧、静止照片或渲染的3D图像。*'
- en: If necessary, you can move your entire animation—for example, to free up space
    for a heading above it—by unhiding all layers, selecting the whole bunch of shapes,
    and moving/transforming them as needed on the canvas.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，你可以通过取消隐藏所有图层，选择所有形状，并在画布上根据需要移动/变换它们来移动整个动画——例如，为上面的标题腾出空间。
- en: 20.7 Text
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.7 文本
- en: Now, let’s add a textual banner to our animation—just a single word, “dance!”.
    Can we do something more interesting than copying the same static text object
    into each frame?
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们给我们的动画添加一个文本横幅——只是一个单词，“dance!”。我们能否比将相同的静态文本对象复制到每一帧做得更有趣？
- en: 'Once again, we could use the Calligraphic pen to draw ruffled handwritten letters
    over some text object used as a guide, so that the entire animation is in a common
    style. However, for the purpose of demonstration, let’s try another approach:
    Make the text banner smoothly billowing as if on a flag. To distort the text,
    you can use the **Envelope Deformation** path effect (**[13.1.8 Envelope Deformation](ch13s01.html#one3dot1dot8_envelope_deformation
    "13.1.8 Envelope Deformation")**); however, it is probably faster to apply some
    node sculpting instead (**[12.5.7.2 Node Sculpting](ch12s05.html#one2dot5dot7dot2_node_sculpting
    "12.5.7.2 Node Sculpting")**).'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，我们可以使用书法笔在用作引导的一些文本对象上绘制皱褶的书写字母，从而使整个动画风格统一。然而，为了演示目的，让我们尝试另一种方法：让文本横幅像旗帜一样平滑地飘动。要扭曲文本，可以使用**包络变形**路径效果（**[13.1.8
    包络变形](ch13s01.html#one3dot1dot8_envelope_deformation "13.1.8 包络变形")**）；然而，可能更快的方法是应用一些节点雕刻（**[12.5.7.2
    节点雕刻](ch12s05.html#one2dot5dot7dot2_node_sculpting "12.5.7.2 节点雕刻")**）。
- en: Create a text object using a nice-looking font, convert it to path (![](httpatomoreillycomsourcenostarchimages1735780.png.jpg)),
    ungroup (![](httpatomoreillycomsourcenostarchimages1735506.png.jpg)), union (![](httpatomoreillycomsourcenostarchimages1735892.png.jpg)),
    switch to the Node tool (![](httpatomoreillycomsourcenostarchimages1735782.png.jpg)),
    select all nodes (![](httpatomoreillycomsourcenostarchimages1735370.png.jpg)),
    and ![](httpatomoreillycomsourcenostarchimages1735550.png.jpg)-drag one of them.
    The entire shape will smoothly bend and stretch. If the lettershapes get too much
    distorted, undo the drag and press ![](httpatomoreillycomsourcenostarchimages1735734.png.jpg)
    a couple times, each time doubling the number of nodes—this usually helps make
    the path you’re sculpting behave more naturally.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 使用一款好看的字体创建一个文本对象，将其转换为路径（![图](httpatomoreillycomsourcenostarchimages1735780.png.jpg)），取消组合（![图](httpatomoreillycomsourcenostarchimages1735506.png.jpg)），合并（![图](httpatomoreillycomsourcenostarchimages1735892.png.jpg)），切换到节点工具（![图](httpatomoreillycomsourcenostarchimages1735782.png.jpg)），选择所有节点（![图](httpatomoreillycomsourcenostarchimages1735370.png.jpg)），然后![图](httpatomoreillycomsourcenostarchimages1735550.png.jpg)-拖动其中一个。整个形状将平滑地弯曲和拉伸。如果字母形状扭曲得太厉害，撤销拖动并按![图](httpatomoreillycomsourcenostarchimages1735734.png.jpg)几次，每次加倍节点数量——这通常有助于使你雕刻的路径表现得更加自然。
- en: '![Node sculpting on a text banner](httpatomoreillycomsourcenostarchimages1736418.png.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![文本旗帜上的节点雕刻](httpatomoreillycomsourcenostarchimages1736418.png.jpg)'
- en: Figure 20-8. Node sculpting on a text banner
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-8. 文本旗帜上的节点雕刻
- en: Now make two copies of the text object, sculpt each one differently so they
    look like two shots of a banner floating in the wind, and interpolate between
    them. Then, just as we did for the dancer figure, distribute the interpolation
    steps into layers, placing them above the figure on the canvas ([Figure 20-9](ch20s07.html#interpolating_the_banner
    "Figure 20-9. Interpolating the banner")). Don’t worry about absolute precise
    placement; slight wobbling of the banner is not a problem (and will even add some
    character).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 现在将文本对象复制两份，分别对每一份进行不同的雕刻，使它们看起来像两面旗帜在风中飘扬，然后在它们之间进行插值。接着，就像我们对舞者形象所做的那样，将插值步骤分配到不同的层级中，将它们放置在画布上的形象上方（[图20-9](ch20s07.html#interpolating_the_banner
    "图20-9. 插值旗帜")). 不要担心绝对精确的位置；旗帜轻微的晃动不是问题（甚至还会增加一些个性）。
- en: '![Interpolating the banner](httpatomoreillycomsourcenostarchimages1736420.png.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![插值旗帜](httpatomoreillycomsourcenostarchimages1736420.png.jpg)'
- en: Figure 20-9. Interpolating the banner
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-9. 插值旗帜
- en: 'To see where to place each object relative to the previous layer, use the **Opacity**
    control on the **Layers** dialog to make the previous layer temporarily half-transparent.
    Compose the animated GIF again using the *produce-gif.py* script. The result so
    far can be seen at *[http://www.kirsanov.com/inkscape-animation/with-banner.gif](http://www.kirsanov.com/inkscape-animation/with-banner.gif)*;
    here are the frames 001 to 005:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要确定每个对象相对于前一个层的位置，请使用“图层”对话框中的**不透明度**控制，使前一个层临时变为半透明。再次使用`*produce-gif.py*`脚本来组合动画GIF。到目前为止的结果可以在*[http://www.kirsanov.com/inkscape-animation/with-banner.gif](http://www.kirsanov.com/inkscape-animation/with-banner.gif)*上查看；以下是001到005帧：
- en: '![Half of the animation’s frames (forward movement)](httpatomoreillycomsourcenostarchimages1736422.png.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![动画的一半帧（前进运动）](httpatomoreillycomsourcenostarchimages1736422.png.jpg)'
- en: Figure 20-10. Half of the animation’s frames (forward movement)
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图20-10. 动画的一半帧（前进运动）
- en: 20.8 Background
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 20.8 背景
- en: 'The only thing not to like about our animation is its total lack of color.
    You can fix this by adding a different colored background to each frame, for a
    real stroboscopic dancefloor effect. Choosing these random colors can be automated,
    too: Create a rectangle with an unset color and use the **Create Tiled Clones**
    dialog (**[16.6 Tiling Clones](ch16s06.html "16.6 Tiling Clones")**) to multiply
    it with some hue variation.'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 我们动画唯一不令人满意的地方就是它完全没有颜色。你可以通过给每一帧添加不同的背景颜色来解决这个问题，以获得真正的频闪舞池效果。选择这些随机颜色也可以自动化：创建一个未设置颜色的矩形，并使用**创建平铺克隆**对话框（**[16.6
    平铺克隆](ch16s06.html "16.6 平铺克隆")**)来对其进行一些色调变化。
- en: Paint the “dance!” banner with a contrasting acid color, also varying from frame
    to frame. Finally, to make the dancing man stand out from the background, add
    an elliptic gradient “spotlight” behind him; randomly move, scale, and rotate
    the spotlight on each frame for an additional energizing effect. The very final
    version is at *[http://www.kirsanov.com/inkscape-animation/final.gif](http://www.kirsanov.com/inkscape-animation/final.gif)*.
    Enjoy!
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 用对比鲜明的酸性颜色绘制“舞蹈！”横幅，并且每一帧都有所变化。最后，为了让跳舞的人从背景中脱颖而出，在他身后添加一个椭圆形的渐变“聚光灯”；在每一帧中随机移动、缩放和旋转聚光灯，以增加额外的活力效果。最终版本可在*[http://www.kirsanov.com/inkscape-animation/final.gif](http://www.kirsanov.com/inkscape-animation/final.gif)*查看。请享受吧！
