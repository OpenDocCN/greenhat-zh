- en: '![](../images/159-1.jpg)'
  id: totrans-0
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/159-1.jpg)'
- en: '[**DESIGNING A COMMAND LINE INTERFACE**](toc.html#chapter9)'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '[**设计命令行界面**](toc.html#chapter9)'
- en: '![](../images/as.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/as.jpg)'
- en: A command line interface (CLI) gives your customers a secure, low-bandwidth,
    easily scripted way to configure and manage your appliance. As a Linux developer,
    you are already familiar with bash, Linux’s most popular CLI.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 命令行界面（CLI）为您的客户提供了一种安全、低带宽、易于脚本化的方式来配置和管理您的设备。作为一名Linux开发者，您已经熟悉bash，这是Linux最受欢迎的CLI。
- en: For the same reasons that you would not want to manage a Linux box without a
    bash command line, your customers might not want to manage your appliance without
    a similarly easy-to-manage CLI.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您不希望在没有bash命令行的情况下管理Linux服务器一样，您的客户可能也不希望在没有类似易于管理的CLI的情况下管理您的设备。
- en: 'This chapter covers the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖以下主题：
- en: Why you need a CLI
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么你需要CLI
- en: Types of CLIs
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CLI类型
- en: Giving users access to a CLI
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向用户提供CLI访问权限
- en: The Laddie CLI
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Laddie CLI
- en: Code review for the test command
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试命令的代码审查
- en: '[**Why You Need a CLI**](toc.html#chapter9.1)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[**为什么你需要CLI**](toc.html#chapter9.1)'
- en: 'Despite their age, CLIs are still one of the most-requested features for Linux
    appliances, especially network appliances that will be installed in a server room
    or network operations center. Let’s look in turn at each of the major reasons
    to have a CLI on your appliance:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管CLI已经存在了一段时间，但它仍然是Linux设备最常请求的功能之一，尤其是那些将被安装在服务器室或网络操作中心的网络设备。让我们依次探讨在您的设备上拥有CLI的每个主要原因：
- en: Security
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全性
- en: Availability
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可用性
- en: Bandwidth
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带宽
- en: Scriptability
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可脚本化
- en: Configuration backup and restore
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置备份和恢复
- en: '[***Security***](toc.html#chapter9.2)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[***安全性***](toc.html#chapter9.2)'
- en: Many service providers will reject an appliance that places its control and
    status protocol on the same wire as user data; the setup they prefer is an entirely
    separate physical channel that is dedicated to management of the appliance. Historically,
    this separate channel has been an RS-232 interface with a CLI on it. The RS-232
    lines are routed to the control center using terminal servers or port concentrators.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 许多服务提供商将拒绝将控制和状态协议放置在与用户数据相同线缆上的设备；他们更喜欢的设置是完全独立的物理通道，专门用于设备管理。历史上，这个独立通道是一个带有CLI的RS-232接口。RS-232线路通过终端服务器或端口集线器路由到控制中心。
- en: When an appliance has a serial port, users expect it to also have a character
    or command line interface. Of course, you could attach a PPP daemon to the serial
    port and make it a network interface, but this is seldom done. Newer network appliances
    feature a second (or even third) Ethernet interface to provide the separate physical
    channel required for appliance control and status. Separate LANs that are dedicated
    to secure control and status are starting to appear, but the installed base of
    Network Management Systems (NMS) that deal with serial ports will make CLIs and
    appliance serial ports standard requirements for some time to come.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个设备有串行端口时，用户期望它也拥有字符或命令行界面。当然，你可以将PPP守护进程附加到串行端口上，使其成为网络接口，但这种做法很少见。较新的网络设备具有第二个（甚至第三个）以太网接口，以提供设备控制和状态所需的独立物理通道。专门用于安全控制和状态的独立局域网开始出现，但现有的网络管理系统（NMS）处理串行端口将使CLI和设备串行端口成为一段时间内的标准要求。
- en: '[***Availability***](toc.html#chapter9.3)'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[***可用性***](toc.html#chapter9.3)'
- en: Network-based UIs, such as web interfaces, require that the network be correctly
    configured and running before the UI becomes accessible. The problem with this
    is that if something goes wrong with the network configuration, you can lose all
    ability to fix the configuration. A serial port, on the other hand, does not need
    an address, so a UI running on it is always available.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 基于网络的UI，如Web界面，要求在UI变得可访问之前网络必须正确配置并运行。问题是，如果网络配置出现问题，您可能会失去修复配置的所有能力。另一方面，串行端口不需要地址，因此在其上运行的UI始终可用。
- en: There is another popular solution for unavailability due to a miscon-figured
    network. Many appliances have a hidden or difficult-to-reach switch that will
    reset the appliance to its factory default configuration if it remains in the
    closed position while the appliance boots up. If you don’t intend to use a serial
    port, you should consider having a hidden switch or some other mechanism to allow
    the user to reset the appliance’s configuration.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 由于网络配置错误导致不可用，还有一个流行的解决方案。许多设备都有一个隐藏的或难以触及的开关，如果在设备启动时保持关闭状态，则会将设备重置为其出厂默认配置。如果您不打算使用串行端口，您应该考虑有一个隐藏的开关或其他机制，以便用户可以重置设备的配置。
- en: '[***Bandwidth***](toc.html#chapter9.4)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[***带宽***](toc.html#chapter9.4)'
- en: CLIs are useful when you want to access an appliance over a low-bandwidth channel.
    A low-bandwidth channel might be a slow radio link or an otherwise fast network
    that is overloaded or failing. Low bandwidth capabilities can also be advantageous
    if your appliances are to be dispersed geographically but managed centrally.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 当您想要通过低带宽通道访问设备时，CLI 很有用。低带宽通道可能是一个慢速无线电链路，或者是一个通常快速但过载或失败的其它网络。如果您的设备需要在地理上分散但集中管理，低带宽功能也可能是有利的。
- en: '[***Scriptability***](toc.html#chapter9.5)'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '[***脚本化能力***](toc.html#chapter9.5)'
- en: One of the biggest advantages of a CLI is that it usually allows you to collect
    a series of command lines into a file, or *script*, and execute the commands as
    if a user had interactively entered them. This can offer huge advantages over
    web or other graphical UIs, which are difficult to automate. Scripts are particularly
    useful to help automate repetitive or tedious tasks. A CLI can allow users to
    build their own commands, using the commands in your CLI as their primitives or
    base operations.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 命令行界面（CLI）的一个最大优点是它通常允许您将一系列命令行收集到一个文件中，或者称为*脚本*，并像用户交互式输入一样执行这些命令。这可以提供比网页或其他图形用户界面（UI）巨大的优势，后者难以自动化。脚本特别有助于帮助自动化重复或繁琐的任务。CLI
    可以允许用户构建自己的命令，使用 CLI 中的命令作为其原语或基本操作。
- en: Not all CLIs are equal in their ability to be scripted. We’ll have more to say
    about this later in the chapter.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有 CLI 在脚本化能力上都是平等的。我们将在本章后面更多地讨论这个问题。
- en: '[***Configuration Backup and Restore***](toc.html#chapter9.6)'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[***配置备份和恢复***](toc.html#chapter9.6)'
- en: One of the biggest problems you should anticipate as an appliance developer
    is your customer’s need to preserve or migrate configuration data across a software
    upgrade. We’ve approached this problem several ways, and the worst of our solutions
    was to give users a web page where they could initiate an FTP transfer of a binary
    file that contained the configuration data. This was a disaster for several reasons.
    Customers objected to the hassle of setting up an FTP site to accept files, and
    they *really* objected to not being able to see the configuration.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 作为设备开发者，您应该预见到的一个最大的问题是您的客户需要在软件升级过程中保留或迁移配置数据。我们以几种方式处理了这个问题，我们最糟糕的解决方案是给用户提供一个网页，他们可以在其中启动一个
    FTP 传输，传输包含配置数据的二进制文件。这有几个原因造成了灾难。客户反对设置 FTP 站点以接受文件的麻烦，他们*真的*反对无法看到配置。
- en: Upgrades were a hassle, as well. We had to write and distribute programs to
    read the binary file and convert it to the format required by the new software.
    Paying attention to version numbers, finding a place to run the converter, and
    getting the new file back onto the appliance was a real mess. Saving the configuration
    as XML helped, but it didn’t help that much.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 升级也是一个麻烦。我们必须编写和分发程序来读取二进制文件并将其转换为新软件所需的格式。注意版本号、找到一个运行转换器的地方，以及将新文件放回设备上，这真是一团糟。将配置保存为
    XML 有所帮助，但这并没有太大的帮助。
- en: The solution that really worked was providing a web page that displayed the
    entire configuration as a list of CLI commands. Our customers loved this. They
    could see the configuration at a glance, and making a backup of the configuration
    was as simple as visiting a web page and selecting Save As in the browser. Of
    course, we also had a matching web form in which users could paste the CLI commands
    of the saved configuration and so easily restore the original settings. Tools
    such as wget allow configuration backups to be automated, too. You’ll see an example
    later in the chapter when we review the Laddie CLI command that dumps Laddie’s
    configuration as a series of CLI commands.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 真正解决问题的方法是为用户提供一个显示整个配置作为 CLI 命令列表的网页。我们的客户非常喜欢这个。他们可以一目了然地看到配置，备份配置就像访问网页并在浏览器中选择“另存为”一样简单。当然，我们还有一个匹配的网页表单，用户可以粘贴已保存配置的
    CLI 命令，从而轻松恢复原始设置。例如，wget 工具允许自动化配置备份。您将在本章后面当我们回顾 Laddie CLI 命令时看到示例，该命令将 Laddie
    的配置作为一系列 CLI 命令输出。
- en: This approach made upgrades easier for us as well. The CLI was fairly stable,
    and changes to it were almost always backward-compatible extensions. After switching
    to this approach, we no longer had to write and distribute programs to convert
    one version of a configuration file to the next version of the file.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法也使我们的升级变得更加容易。CLI 相对稳定，对其的更改几乎总是向后兼容的扩展。在采用这种方法之后，我们不再需要编写和分发程序来将配置文件的一个版本转换为下一个版本的文件。
- en: Having the appliance configuration saved as a list of CLI commands in a script
    has other advantages. One of our customers wanted the master copy of all his configurations
    to reside in his NMS. He configured our appliances to use DHCP and set up his
    DHCP and NMS to use wget to send the appropriate configuration to our appliances
    as soon as he received an IP address from the DHCP server. In one instance, he
    ordered 10 new servers, and we gave him the Ethernet MAC addresses before shipment.
    He had the configurations for the 10 new servers ready for download before the
    appliances arrived, and all of the new appliances were configured and running
    within a few minutes of initial power on.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 将设备配置保存为 CLI 命令列表的脚本还有其他优点。我们的一位客户希望所有配置的主副本都存储在他的 NMS 中。他配置我们的设备使用 DHCP，并设置他的
    DHCP 和 NMS 使用 wget 将适当的配置发送到我们的设备，一旦他从 DHCP 服务器收到 IP 地址。在一个实例中，他订购了 10 台新服务器，我们在发货前提供了这些新服务器的以太网
    MAC 地址。在设备到达之前，他已经准备好了 10 台新服务器的配置供下载，所有新设备在初次通电后几分钟内就配置并运行起来了。
- en: '[**Types of CLIs**](toc.html#chapter9.7)'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '[**CLI 类型**](toc.html#chapter9.7)'
- en: 'The default CLI on most Linux systems is bash, but bash is just one type of
    CLI. There are other types that might be more applicable to your needs, and your
    CLI may switch from one type to another, as you choose the type to match the task
    at hand. Let’s look at the different types of CLIs: sentences, menus, and wizards,
    and at two CLI attributes: statefulness and whether the CLI is line- or character-oriented.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数 Linux 系统上的默认 CLI 是 bash，但 bash 只是 CLI 的一种类型。还有其他类型可能更适合您的需求，并且您的 CLI 可能会根据您选择的类型从一种类型切换到另一种类型，以匹配手头的任务。让我们来看看不同类型的
    CLI：句子、菜单和向导，以及两个 CLI 属性：状态性和 CLI 是否面向行或面向字符。
- en: '[***Sentences***](toc.html#chapter9.8)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '[***句子***](toc.html#chapter9.8)'
- en: 'The sentence CLI, the most common type of CLI, maps actions and objects in
    the appliance into verbs and nouns. Consider a simple bash command:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 句子 CLI 是最常见的 CLI 类型，它将设备中的动作和对象映射为动词和名词。考虑一个简单的 bash 命令：
- en: rm -f backup.sxw
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: rm -f backup.sxw
- en: Here, rm is the verb, -f is an adverb, and backup.sxw is the noun. The key to
    a successful CLI of this type is to select the verbs and nouns that map well into
    the customer’s understanding of the appliance.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，rm 是动词，-f 是副词，backup.sxw 是名词。这种类型成功的 CLI 的关键是选择那些能够很好地映射到客户对设备理解的动词和名词。
- en: Of course, you can use other sentence structures like verb-adverb-noun, verb-noun-adjective,
    or noun-verb-adjective—it’s up to you. The idea is to make reading the CLI line
    sound like a sentence. You’ll know that you’ve gotten it right when customers,
    field support, and engineers all describe a configuration using the same vocabulary
    and syntax as that of your CLI.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，您可以使用其他句子结构，如动词-副词-名词、动词-名词-形容词或名词-动词-形容词——这取决于您。目的是让阅读 CLI 行看起来像是一个句子。当客户、现场支持和工程师都使用与您的
    CLI 相同的词汇和语法来描述配置时，您就会知道您已经做对了。
- en: Typically, you will need verbs to view status or statistics, to change the configuration,
    and to initiate actions. For example, the verbs in the Laddie CLI are *view, set,
    test,* and *clear.*
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，你需要动词来查看状态或统计信息、更改配置和启动操作。例如，Laddie CLI 中的动词是 *查看、设置、测试* 和 *清除*。
- en: The big advantage of the sentence CLI is that it is the most easily and reliably
    scripted type of CLI. The major disadvantage of this CLI is that there can be
    a steep learning curve for it. The user has to remember a fair amount of vocabulary
    and syntax in order to use this type of CLI effectively. However, users who spend
    a lot of time in the CLI usually prefer the sentence CLI.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 句子 CLI 的主要优点是它是最容易和最可靠脚本的 CLI 类型。这种 CLI 的主要缺点是它有一个陡峭的学习曲线。为了有效地使用这种类型的 CLI，用户必须记住相当数量的词汇和语法。然而，在
    CLI 中花费大量时间的用户通常更喜欢句子 CLI。
- en: '[***Wizards***](toc.html#chapter9.9)'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '[***向导***](toc.html#chapter9.9)'
- en: A *wizard* is a type of interface that prompts the user with a series of questions,
    usually giving the user some descriptive text before asking the question. For
    example, the following might appear as part of a wizard configuration for Laddie.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 *巫师* 是一种界面类型，它会向用户提出一系列问题，通常在提问之前给出一些描述性文本。例如，以下内容可能是 Laddie 的向导配置的一部分。
- en: '![](../images/163-1.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/163-1.jpg)'
- en: If there is a reasonable default value, you should show it in the prompt for
    the question. The convention is to show the default in all caps. You should also
    give the user the ability to abort the wizard at any point in the series of questions.
    Common abort sequences include q and ctrl-C. At the end of the series of questions,
    you should display a summary of the responses and ask the user to confirm that
    these are the values he or she wants.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有一个合理的默认值，你应该在问题的提示中显示它。惯例是在大写字母中显示默认值。你还应该允许用户在任何时候中断向导的问题序列。常见的中断序列包括 q
    和 ctrl-C。在问题序列的末尾，你应该显示响应的摘要，并要求用户确认这些是他们或她想要的值。
- en: Here is a tip to help the user and yourself. Your web interface has forms with
    fields that the user fills in before hitting the *Submit* button. If you are building
    a wizard, map the same fields from the web form to the wizard. For example, if
    the web form for network configuration asks for host name, boot protocol, and
    default gateway, the network wizard should ask for host name, boot protocol, and
    default gateway. This helps the user by letting him or her transfer training from
    one interface (web) to another (CLI). It also helps you because your back-end
    processing only needs to deal with one type of request, regardless of the source
    of the request.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个帮助用户和你的小贴士。你的网页界面有用户在点击 *提交* 按钮之前填写的表单字段。如果你正在构建一个向导，应该将网页表单中的相同字段映射到向导中。例如，如果网络配置的网页表单要求输入主机名、引导协议和默认网关，则网络向导应该要求输入主机名、引导协议和默认网关。这通过让用户将从一个界面（网页）到另一个界面（CLI）的培训转移过来帮助用户。这也帮助你，因为你的后端处理只需要处理一种类型的请求，无论请求的来源是什么。
- en: Wizards are a great way to help a new or infrequent user through a configuration.
    Wizards are also nice if you need a synchronous update of all of the fields presented
    in the wizard. For example, you would probably want to change a static IP address
    and its associated netmask with one atomic update.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 向导是帮助新用户或偶尔使用用户通过配置的好方法。如果你需要同步更新向导中展示的所有字段，向导也非常有用。例如，你可能希望通过一次原子更新来更改静态 IP
    地址及其关联的子网掩码。
- en: Since wizards are used only to collect configuration information, they are usually
    used in conjunction with one of the other types of CLIs that offer better scriptability
    and easier access to system status.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 由于向导仅用于收集配置信息，因此它们通常与其他提供更好脚本性和更容易访问系统状态的 CLI 类型结合使用。
- en: '[***Menus***](toc.html#chapter9.10)'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '[***菜单***](toc.html#chapter9.10)'
- en: A menu CLI offers the user a well-defined list of commands or choices at each
    step. For example, if we were to give Laddie a menu CLI, the top menu might look
    like this.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 菜单 CLI 在每个步骤都向用户提供一个定义良好的命令或选择列表。例如，如果我们给 Laddie 一个菜单 CLI，顶级菜单可能看起来像这样。
- en: '![](../images/163-2.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/163-2.jpg)'
- en: '![](../images/164-1.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/164-1.jpg)'
- en: Selecting one item in the menu might prompt the user with a sub-menu or drop
    him into a wizard to collect configuration information.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 选择菜单中的一个项目可能会提示用户一个子菜单，或者将其放入一个向导中以收集配置信息。
- en: Menu CLIs have fallen from favor but remain the right choice if you expect your
    CLI to be used infrequently or by untrained users. There is practically no learning
    curve to using a menu CLI.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 菜单式 CLI 已经不再受欢迎，但如果预期 CLI 将很少使用或由未经培训的用户使用，它仍然是一个合适的选择。使用菜单式 CLI 几乎没有学习曲线。
- en: Menu CLIs can be scripted, but the scripts are fragile since they can be broken
    by even a small change to the menu layout.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 菜单式 CLI 可以被脚本化，但脚本很脆弱，因为即使是菜单布局的微小变化也可能导致脚本损坏。
- en: '[***Stateful***](toc.html#chapter9.11)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '[***状态式***](toc.html#chapter9.11)'
- en: Stateful CLIs maintain a sense of where the user is. For example, bash is stateful
    in that it supports a current working directory with the cd verb to manipulate
    its state. Another good example of a stateful CLI is the help system in the graphics
    package gnuplot. However, statefulness may be more accurately described as a property
    of CLIs rather than a separate type of them, since wizard, menu, and sentence
    CLIs can all be stateful.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 状态式 CLI 维护用户的位置感。例如，bash 是状态式的，因为它支持使用 cd 命令来操作当前工作目录的状态。另一个状态式 CLI 的好例子是图形包
    gnuplot 中的帮助系统。然而，状态性可能更准确地描述为 CLI 的一个属性，而不是它们的一个独立类型，因为向导式、菜单式和句子式 CLI 都可以是状态式的。
- en: Stateful CLIs are nice if you expect your users to spend a lot of time in your
    CLI. They help the user by presenting context-sensitive help (i.e., help based
    on state or location) and by reducing how much typing the user has to do.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你预期用户会在 CLI 中花费大量时间，状态式 CLI 是很不错的。它们通过提供上下文相关的帮助（即基于状态或位置的帮助）以及减少用户需要输入的字符数量来帮助用户。
- en: Stateful CLIs require more documentation and training to explain the states
    and state manipulation, and they can be a little tricky in scripts since it is
    easy to forget to set the state as part of the script. (How many of us have forgotten
    to put a cd at the top of a bash script?)
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 状态式 CLI 需要更多的文档和培训来解释状态和状态操作，并且在脚本中可能会有些棘手，因为很容易忘记在脚本中设置状态。（我们中有多少人忘记在 bash
    脚本的顶部添加 cd 命令？）
- en: '[***Character vs. Line Interfaces***](toc.html#chapter9.12)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '[***字符界面与行界面***](toc.html#chapter9.12)'
- en: A term coming into popular usage is *character interface,* which refers to an
    interface that looks at each character as it is entered. In contrast, a classic
    line interface looks at the command only when the newline is entered. The editor
    vi has a character interface, while its precursor, ed, has a CLI in the classic
    sense. Another common example of character interface is bash, with its tab-completion
    and line-editing capabilities.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 正在流行起来的一种术语是 *字符界面*，它指的是将每个输入的字符视为一个单独的界面。相比之下，经典的行界面只在输入换行符时查看命令。编辑器 vi 有字符界面，而它的前身
    ed 则具有经典的 CLI。另一个常见的字符界面例子是 bash，它具有自动补全和行编辑功能。
- en: Character interfaces, such as the one in vi, can greatly reduce the amount of
    typing a user needs to do, and tab completion can be a great help to new and infrequent
    users; however, character interfaces require a lot of work on the part of the
    interface designers and coders.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 字符界面，例如 vi 中的界面，可以大大减少用户需要输入的字符数量，并且自动补全功能对于新用户和不常使用用户来说非常有帮助；然而，字符界面需要界面设计师和编码者投入大量的工作。
- en: '[**Giving Users Access to a CLI**](toc.html#chapter9.13)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '[**为用户提供 CLI 访问权限**](toc.html#chapter9.13)'
- en: Once you have a CLI, you need to give your users access to it. One way to do
    this is to let them log in and have them start the CLI from a bash prompt. This
    can make scripting easier, but few appliances allow direct access to a Linux login.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你有了 CLI，你需要让你的用户能够访问它。一种方法就是让他们登录，并从 bash 提示符启动 CLI。这可以使脚本编写更容易，但很少设备允许直接访问
    Linux 登录。
- en: Perhaps the most common type of access is to add the path to the CLI executable
    to the /etc/shells file and to create a user with the login shell set to the CLI.
    The advantage of this is that the CLI is equally accessible on the serial port,
    over telnet, and over SSH. This is the approach we take for Laddie.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 可能最常见的一种访问方式是将 CLI 可执行文件的路径添加到 /etc/shells 文件中，并创建一个登录 shell 设置为 CLI 的用户。这种方式的优势是
    CLI 在串行端口、telnet 和 SSH 上都可以同样访问。这是我们为 Laddie 采取的方法。
- en: A very small appliance might not support logins. In this case you can tie standard-in
    and standard-out of the CLI directly to a serial port. The security model here
    is that of physical access to the serial port.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 非常小的设备可能不支持登录。在这种情况下，你可以将 CLI 的标准输入和标准输出直接连接到串行端口。这里的网络安全模型是物理访问串行端口。
- en: As we’ll see in the next section, a CLI can be useful even if it is used only
    for configuration backup and is only accessible from a web page.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们将在下一节中看到的，CLI 即使仅用于配置备份并且只能从网页访问，也是有用的。
- en: '[**The Laddie CLI**](toc.html#chapter9.14)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[**Laddie CLI**](toc.html#chapter9.14)'
- en: Laddie’s CLI uses a verb-adjective-noun approach; it is not stateful, and it
    is line oriented, not character oriented. Our commands allow the CLI user to view
    status, view logs, set the configuration, and get help. Laddie’s CLI is not complete
    in that it does not allow the user to configure, view, or set the appliance’s
    network, SNMP, or logging configuration.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: Laddie 的 CLI 使用动词-形容词-名词的方法；它不是状态性的，并且是面向行的，而不是面向字符的。我们的命令允许 CLI 用户查看状态、查看日志、设置配置和获取帮助。Laddie
    的 CLI 并不完整，因为它不允许用户配置、查看或设置设备的网络、SNMP 或日志配置。
- en: You can get to the Laddie CLI several ways. You can telnet to 192.188.1.11 as
    user cli without a password. You can also telnet to Laddie as root and start Laddie’s
    CLI from the bash prompt with the command cli.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过多种方式访问 Laddie CLI。您可以无密码以用户 cli 身份 telnet 到 192.188.1.11，也可以以 root 身份 telnet
    到 Laddie，然后在 bash 提示符下使用命令 cli 启动 Laddie 的 CLI。
- en: '[***Laddie Command Summary***](toc.html#chapter9.15)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '[***Laddie 命令摘要***](toc.html#chapter9.15)'
- en: Here are all of the Laddie CLI commands with their syntax and brief descriptions.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 这里列出了所有的 Laddie CLI 命令及其语法和简要描述。
- en: '![](../images/165-1.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/165-1.jpg)'
- en: You are already familiar with the configuration of Laddie, so we won’t give
    a detailed explanation of every command. There are, however, a few commands that
    deserve special mention.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经熟悉 Laddie 的配置，因此我们不会对每个命令进行详细解释。然而，有一些命令值得特别提及。
- en: '[***set logs on***](toc.html#chapter9.16)'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '[***set logs on***](toc.html#chapter9.16)'
- en: One of the nice features of Laddie’s logger is that you can open a telnet connection
    to it and have log messages sent to you over the connection. The set logs command
    opens (or closes) a connection to the logger to receive these messages. A sample
    session might make this more clear.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: Laddie 的日志记录器的一个优点是您可以打开到它的 telnet 连接，并通过该连接接收日志消息。set logs 命令打开（或关闭）到记录器的连接以接收这些消息。一个示例会话可能会使这一点更加清晰。
- en: '![](../images/166-1.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/166-1.jpg)'
- en: Note that no log messages were displayed after the clear all command, since
    we had closed the connection to the logger with the set logs off command.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，在执行 clear all 命令后没有显示任何日志消息，因为我们已经使用 set logs off 命令关闭了到记录器的连接。
- en: The system prints log messages as they occur, and the output of a log message
    can appear in the middle of a command that is being entered. This can be annoying,
    so you might suggest that your users open two xterm windows and start a CLI session
    in each, using one for log messages and the other for interactive commands.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 系统按发生顺序打印日志消息，日志消息的输出可能会出现在正在输入的命令中间。这可能会令人烦恼，因此您可能建议您的用户打开两个 xterm 窗口，并在每个窗口中启动一个
    CLI 会话，一个用于日志消息，另一个用于交互式命令。
- en: Having log messages appear in a CLI session can be a plus for your appliance.
    Your customers can use the CLI as a way to send log messages from the appliance
    to their network management system. Also, having log messages appear in the CLI
    is a big help to anyone trying to remotely manage the appliance.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 日志消息出现在 CLI 会话中可能会对您的设备有所帮助。您的客户可以使用 CLI 将设备上的日志消息发送到他们的网络管理系统。此外，日志消息出现在 CLI
    中对于尝试远程管理设备的人来说也是一个很大的帮助。
- en: '[***dump***](toc.html#chapter9.17)'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '[***dump***](toc.html#chapter9.17)'
- en: The dump command displays Laddie’s configuration as a list of CLI commands that
    can be fed back into the CLI. The first line of output is a comment to identify
    what is being displayed, and more importantly, when it was displayed. Although
    we didn’t include the CLI version number in the top comment line, it would be
    helpful to do so.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: dump 命令以 CLI 命令列表的形式显示 Laddie 的配置，这些命令可以反馈到 CLI 中。输出第一行是一个注释，用于标识显示的内容，更重要的是，显示的时间。尽管我们没有在顶部注释行中包含
    CLI 版本号，但这样做会有所帮助。
- en: '![](../images/166-2.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/166-2.jpg)'
- en: '![](../images/167-1.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/167-1.jpg)'
- en: A few Linux commands, such as setserial, also have an option to print configuration
    information in a way that can be fed back into the command.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 一些 Linux 命令，如 setserial，也有一个选项可以以可反馈到命令的方式打印配置信息。
- en: '[***help***](toc.html#chapter9.18)'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '[***帮助***](toc.html#chapter9.18)'
- en: The Laddie CLI provides a help command to give the user a quick way to see which
    commands are available. Without any parameters, help gives suggestions for other
    help commands.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: Laddie CLI 提供了一个帮助命令，让用户能够快速查看哪些命令可用。如果没有任何参数，帮助会提供其他帮助命令的建议。
- en: '![](../images/167-1.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/167-1.jpg)'
- en: The help intro command gives a brief description of the Laddie alarm system,
    and help commands gives a list of all CLI commands with a brief description for
    each.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 帮助简介命令提供了 Laddie 报警系统的简要描述，而帮助命令则列出了所有 CLI 命令及其简要描述。
- en: We initially tried to make our help *single source*—that is, we tried to make
    the help system use the same source files for both CLI help and web help. While
    we hope you succeed where we failed, we found that there were too many differences
    in the body of the help text for each interface and that the code and libraries
    that needed to use a shared file format were too big and too complex. Our CLI
    help text is in a single file; it uses a file format built for the Laddie CLI.
    Laddie’s help file format is pretty simple, leaving open the possibility of authoring
    the help text with OpenOffice.org and writing a simple output filter to convert
    it to the help file format. Since help text is meant to be read by end users,
    we recommend that you give responsibility for the help text to the technical writers
    in your group.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最初尝试使我们的帮助信息为“单源”——也就是说，我们尝试使帮助系统使用相同的源文件来为 CLI 帮助和网页帮助。虽然我们希望你在我们失败的地方取得成功，但我们发现每个接口的帮助文本正文之间存在太多差异，而且需要使用共享文件格式进行使用的代码和库太大、太复杂。我们的
    CLI 帮助文本在一个文件中；它使用为 Laddie CLI 构建的文件格式。Laddie 的帮助文件格式相当简单，这为使用 OpenOffice.org
    编写帮助文本并编写一个简单的输出过滤器将其转换为帮助文件格式留下了可能性。由于帮助文本是供最终用户阅读的，我们建议您将帮助文本的责任交给您团队中的技术作家。
- en: '[**Code Review for the test Command**](toc.html#chapter9.19)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '[**测试命令的代码审查**](toc.html#chapter9.19)'
- en: We implemented the Laddie CLI using lex, yacc, and RTA. The vocabulary of Laddie’s
    verb-adjective-noun CLI is recognized by a parser generated by lex, and the grammar
    of the CLI is recognized in a C file generated by yacc. A tutorial on lex or yacc
    or a full code review of the CLI is beyond the scope of this book, but we can
    give an overview of our code and look at all of the incremental code used to implement
    one command. This review might make a nice introduction to yacc and lex if you’ve
    never used them, as it will give you a sense of their power and elegance.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 lex、yacc 和 RTA 实现了 Laddie CLI。Laddie 的动词-形容词-名词 CLI 词汇表由 lex 生成的解析器识别，CLI
    的语法由 yacc 生成的 C 文件识别。关于 lex 或 yacc 的教程或 CLI 的完整代码审查超出了本书的范围，但我们可以概述我们的代码，并查看实现一个命令所使用的所有增量代码。如果你从未使用过它们，这次审查可能会是一个很好的
    yacc 和 lex 的介绍，因为它会给你一种它们的力量和优雅的感觉。
- en: 'The code is broken into four files: main.c, syntax.y, token.l, and commands.c.
    The file main.c has the main() routine, which is select()-based, since the CLI
    needs to listen for both user input and log messages. The file syntax.y is a yacc
    input file that has the syntax of the CLI commands. The file to ken.l is a lex
    file with the definitions of the key words used in the CLI vocabulary. The file
    commands.c has the C code that actually implements the commands. Both yacc and
    lex produce C files that are compiled into the CLI. Entering make in the source
    directory uses the following commands to translate, compile, and link the four
    source files.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 代码被分成四个文件：main.c、syntax.y、token.l 和 commands.c。文件 main.c 包含 main() 例程，它是基于 select()
    的，因为 CLI 需要监听用户输入和日志消息。文件 syntax.y 是一个 yacc 输入文件，其中包含 CLI 命令的语法。文件 token.l 是一个
    lex 文件，其中包含 CLI 词汇中使用的关键字定义。文件 commands.c 包含实际实现命令的 C 代码。yacc 和 lex 都会生成 C 文件，这些文件被编译成
    CLI。在源目录中输入 make 使用以下命令来转换、编译和链接四个源文件。
- en: '![](../images/168-1.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/168-1.jpg)'
- en: '[***CLI Vocabulary: token.l***](toc.html#chapter9.20)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '[***CLI 词汇：token.l***](toc.html#chapter9.20)'
- en: The file token.l has a series of regular expressions which define the words
    in the vocabulary of our CLI. The lex program translates the regular expressions
    in token.l into a C program, which implements a finite state machine that recognizes
    words in our vocabulary.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 文件 token.l 包含一系列正则表达式，这些表达式定义了我们的 CLI 词汇表中的单词。lex 程序将 token.l 中的正则表达式转换为 C 程序，该程序实现了一个有限状态机，该状态机可以识别我们的词汇表中的单词。
- en: The form of the Laddie test command is test [zone id], where the zone ID is
    a number between one and five. Our lex input file, token.l, contains the following
    code to define both a zone ID and the CLI verb *test.*
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: Laddie 测试命令的格式为 test [区域 ID]，其中区域 ID 是一个介于 1 和 5 之间的数字。我们的 lex 输入文件 token.l
    包含以下代码来定义区域 ID 和 CLI 动词 *test*。
- en: '![](../images/168-2.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/168-2.jpg)'
- en: The [1-5] indicates a number in the range of one to five, inclusive. The [ \t]
    indicates either a space or a tab. The * following [ \t] indicates that there
    can be zero or more spaces or tabs following the zone ID. The yytext variable
    points into the command line at the start of the token, so (int) (*yytext - '0')
    is the zone ID as an integer. The code sets the global variable Zone before returning
    ZONE_ID to indicate that a valid zone ID was found.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '[1-5] 表示一个介于 1 到 5（包括 5）之间的数字。[ \t] 表示空格或制表符。* 后跟 [ \t] 表示区域 ID 后可以有零个或多个空格或制表符。yytext
    变量指向命令行中标记的起始位置，因此 (int) (*yytext - ''0'') 是作为整数的区域 ID。代码在返回 ZONE_ID 之前设置全局变量
    Zone，以指示找到了有效的区域 ID。'
- en: The lex pattern test[ \t]+ indicates the word *test* followed by one or more
    spaces or tabs. At least one space or tab is required to separate the test token
    from the zone ID token.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: lex 模式 test[ \t]+ 表示单词 *test* 后跟一个或多个空格或制表符。至少需要一个空格或制表符来分隔测试标记和区域 ID 标记。
- en: '[***CLI Grammar: syntax.y***](toc.html#chapter9.21)'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '[***CLI 语法：syntax.y***](toc.html#chapter9.21)'
- en: Just as a grammar describes valid sentences in a language, a grammar defined
    in the yacc file syntax.y defines valid command lines in our CLI. yacc converts
    the grammar in syntax.y into a C-based state machine to recognize valid command
    lines.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 正如语法描述了一种语言中的有效句子一样，在语法文件 syntax.y 中定义的语法定义了我们的 CLI 中的有效命令行。yacc 将 syntax.y
    中的语法转换为基于 C 的状态机，以识别有效的命令行。
- en: The grammar for the test command is defined by the following lines.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 测试命令的语法由以下行定义。
- en: '![](../images/169-1.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/169-1.jpg)'
- en: 'The token definitions for ZONE_ID and TEST are converted to #define statements
    and passed into the lex file token.l. The syntax definition for the test command
    requires a TEST token followed by a ZONE_ID token. If the command line has a valid
    test command, the C subroutine test_zone() is called with the zone ID passed as
    a parameter.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 'ZONE_ID 和 TEST 的标记定义被转换为 #define 语句并传递到 lex 文件 token.l 中。测试命令的语法定义需要一个 TEST
    标记后跟一个 ZONE_ID 标记。如果命令行有一个有效的测试命令，则 C 子例程 test_zone() 将区域 ID 作为参数调用。'
- en: '[***C Code***](toc.html#chapter9.22)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '[***C 代码***](toc.html#chapter9.22)'
- en: The C subroutine test_zone(), in commands.c, is where the real work is done
    to test a zone; it sets the alarm field in the Zone table to one. The routine,
    test_zone(), is presented below in its entirety.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在 commands.c 中的 C 子例程 test_zone() 是测试区域实际工作的地方；它将区域表中的警报字段设置为 1。test_zone()
    子例程的完整内容如下所示。
- en: '![](../images/169-2.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/169-2.jpg)'
- en: The update() subroutine is a utility routine that sends a PostgreSQL update
    command to the ladd daemon. The code for this routine is almost identical to the
    SQL update code presented in Chapter 5, so we will not present the code for the
    routine here.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: update() 子例程是一个实用程序，它向 ladd 守护进程发送 PostgreSQL 更新命令。此例程的代码几乎与第 5 章中展示的 SQL 更新代码相同，因此我们在此不展示例程的代码。
- en: '[***Code Review Notes***](toc.html#chapter9.23)'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '[***代码审查笔记***](toc.html#chapter9.23)'
- en: By our count, the incremental cost of adding the test command was about 15 lines
    of code. Not bad. Clearly yacc, lex, and RTA can make building a CLI fairly straightforward.
    The danger, in fact, might be the tendency to add a lot of CLI commands. Don’t
    forget that each new command places a larger burden on your users to learn that
    command, which can thus slow the adoption of your CLI.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我们的计算，添加测试命令的增量成本大约是 15 行代码。还不错。显然，yacc、lex 和 RTA 可以使构建 CLI 相当直接。事实上，危险可能在于添加大量
    CLI 命令的倾向。别忘了每个新命令都会给用户带来更大的负担去学习该命令，这可能会因此减缓 CLI 的采用速度。
- en: '[**Summary**](toc.html#chapter9.24)'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '[**总结**](toc.html#chapter9.24)'
- en: In this chapter we looked at the reasons to include a CLI in your appliance
    and the types of CLIs available to you. We presented the CLI for Laddie and gave
    a minimalist code review for the test command.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了在您的设备中包含 CLI 的原因以及可用的 CLI 类型。我们展示了 Laddie 的 CLI 并对测试命令进行了最小化代码审查。
- en: Knowing that you would not want to use the Laddie CLI as is, the programmer
    for our CLI was particularly careful to document the source code to make it easy
    for you to modify. Also, the help system was built to easily port to your appliance.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 了解您不会想直接使用Laddie CLI，我们CLI的程序员特别小心地记录了源代码，以便您能够轻松修改。此外，帮助系统也被构建得易于移植到您的设备上。
- en: In the next chapter, we continue our discussion of UIs by presenting techniques
    for incorporating buttons, light-emitting diodes (LEDs), and simple text-based
    liquid crystal displays (LCDs) into your appliance. While the next chapter won’t
    call it a CLI, we consider the LCD interface to be a menu system with a character
    interface.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们继续讨论UI，通过介绍将按钮、发光二极管（LEDs）和简单的基于文本的液晶显示器（LCDs）集成到您的设备中的技术。虽然下一章不会将其称为CLI，但我们认为LCD界面是一个具有字符界面的菜单系统。
