- en: Chapter 26\. PURE - FTPD SERVER 1.0.21
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 26 章．PURE - FTPD 服务器 1.0.21
- en: '[HTTP://WWW.PUREFTPD.ORG](HTTP://WWW.PUREFTPD.ORG)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[HTTP://WWW.PUREFTPD.ORG](HTTP://WWW.PUREFTPD.ORG)'
- en: 26.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.1\. 摘要
- en: FTP (File Transfer Protocol) is used for transferring files between a server
    and a client system. According to RFC 959,^([[]](#CHP-26-1)) the four objectives
    of FTP are to promote the sharing of files, encourage use of remote computers,
    shield users from variations in file storage systems, and transfer data reliably
    and efficiently.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: FTP（文件传输协议）用于在服务器和客户端系统之间传输文件。根据 RFC 959，^([[]](#CHP-26-1)）FTP 的四个目标是促进文件共享、鼓励使用远程计算机、保护用户免受文件存储系统差异的影响，以及可靠高效地传输数据。
- en: ^([]) J. Postel and J. Reynolds, "File Transfer Protocol (FTP)," Internet Engineering
    Task Force, [http://www.ietf.org/rfc/rfc959.txt](http://www.ietf.org/rfc/rfc959.txt).
  id: totrans-4
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ^([]) J. Postel 和 J. Reynolds，"文件传输协议 (FTP)"，互联网工程任务组，[http://www.ietf.org/rfc/rfc959.txt](http://www.ietf.org/rfc/rfc959.txt)。
- en: FTP was first developed in 1971 by the US Department of Defense for use in its
    network at DARPA. It is regarded as one of the Internet's first protocols.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: FTP 首次于 1971 年由美国国防部开发，用于其在 DARPA 网络中的使用。它被认为是互联网最早的协议之一。
- en: Pure-FTPd is an open source FTP server that conforms to the original FTP standards
    with some additional functionality. These include a virtual user system, SSL/TLS
    encryption support, bandwidth throttling, and upload/download ratios, to name
    a few. Pure-FTPd supports both virtual users and users that exist on system-level
    accounts. This guide will exclusively focus on the virtual user scheme as it offers
    a larger feature set.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Pure-FTPd 是一个开源的 FTP 服务器，它符合原始的 FTP 标准，并具有一些额外的功能。这些包括虚拟用户系统、SSL/TLS 加密支持、带宽限制以及上传/下载比率等。Pure-FTPd
    支持虚拟用户和存在于系统级别账户上的用户。本指南将专门关注虚拟用户方案，因为它提供了更丰富的功能集。
- en: Pure-FTPd is based on Troll-FTPd, originally written by Arnt Gulbrandsen in
    1995\. Active development of Troll-FTPd stagnated in the late '90s, prompting
    Frank Denis to create the Pure-FTPd project. Denis made some modifications to
    the Troll-FTPd code, wrote new documentation, and released Pure-FTPd in 2001\.
    A team of nine, led by Denis, continues development of the Pure-FTPd project.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Pure-FTPd 基于 1995 年由 Arnt Gulbrandsen 编写的 Troll-FTPd。Troll-FTPd 在 90 年代后期的发展停滞，促使
    Frank Denis 创建了 Pure-FTPd 项目。Denis 对 Troll-FTPd 代码进行了修改，编写了新的文档，并于 2001 年发布了 Pure-FTPd。Denis
    领导的九人团队继续开发 Pure-FTPd 项目。
- en: 26.2\. RESOURCES
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.2\. 资源
- en: Pure-FTPd Documentation
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Pure-FTPd 文档
- en: '[http://www.pureftpd.org/project/pure-ftpd/doc](http://www.pureftpd.org/project/pure-ftpd/doc)'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.pureftpd.org/project/pure-ftpd/doc](http://www.pureftpd.org/project/pure-ftpd/doc)'
- en: RFC 959 - File Transfer Protocol
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 959 - 文件传输协议
- en: '[http://tools.ietf.org/html/rfc959](http://tools.ietf.org/html/rfc959)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://tools.ietf.org/html/rfc959](http://tools.ietf.org/html/rfc959)'
- en: 26.3\. REQUIRED
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.3\. 必需
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![FreeBSD 7.0-RELEASE](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)（参见
    "[FreeBSD 7.0](freebsd_7_0_split_000.html#freebsd_7_0)"）'
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![Updated ports collection](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)（参见
    "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)"）'
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Internet
    connection'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '![网络连接](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)'
- en: 26.4\. OPTIONAL
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.4\. 可选
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) OpenSSL with
    a signed SSL Certificate, if you wish to enable encryption of the FTP control
    channel (see "[OpenSSL 0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)")'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![OpenSSL with a signed SSL Certificate](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)
    如果您想启用 FTP 控制通道的加密（参见 "[OpenSSL 0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)"）'
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Registered
    domain name'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![Registered domain name](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)'
- en: 26.5\. PREPARATION
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.5\. 准备
- en: Become the superuser.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: '* * *'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** This guide provides instructions for using the virtual user system
    to manage and control users. This system provides a larger feature set and allows
    administration of FTP accounts without affecting system accounts.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 本指南提供了使用虚拟用户系统管理和控制用户的说明。该系统提供更丰富的功能集，并允许在不影响系统账户的情况下管理 FTP 账户。'
- en: '* * *'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 26.6\. INSTALL
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.6\. 安装
- en: 'To begin the Pure-FTPd installation process, enter the following commands:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始 Pure-FTPd 安装过程，请输入以下命令：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu containing pure-ftpd options will appear. Leave these options at their
    defaults, then press [tab] to select OK and [enter] to continue.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 将出现一个包含 pure-ftpd 选项的菜单。保留这些选项的默认值，然后按 [tab] 键选择 OK，按 [enter] 键继续。
- en: 26.7\. CONFIGURE
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.7\. 配置
- en: Once the installation process is complete, it's time to configure Pure-FTPd
    for use on your system.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候为您的系统配置 Pure-FTPd 了。
- en: Copy the sample configuration file named pure-ftpd.conf.sample to pure-ftpd.conf
    in /usr/local/etc. This file will be used to set configuration options.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将名为 pure-ftpd.conf.sample 的示例配置文件复制到 /usr/local/etc 下的 pure-ftpd.conf。此文件将用于设置配置选项。
- en: '[PRE1]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Specify the location of the virtual users database. Scroll down to the `PureDB`
    statement (~126), uncomment it (remove the leading hash mark) and change the path
    to /usr/local/etc/pureftpd.pdb. The `PureDB` statement should appear as follows:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定虚拟用户数据库的位置。向下滚动到 `PureDB` 语句 (~126)，取消注释它（移除前面的井号），并将路径更改为 /usr/local/etc/pureftpd.pdb。`PureDB`
    语句应如下所示：
- en: '[PRE2]'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'To make adding new virtual users easier, configure Pure-FTPd to automatically
    create a user''s home directory upon login (if it doesn''t already exist). Uncomment
    the `CreateHomeDir` statement (~336) to enable this feature. The `CreateHomeDir`
    statement should look like this:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了使添加新虚拟用户更容易，配置 Pure-FTPd 在登录时自动创建用户的主目录（如果尚未存在）。取消注释 `CreateHomeDir` 语句 (~336)
    以启用此功能。`CreateHomeDir` 语句应如下所示：
- en: '[PRE3]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Pure-FTPd is automatically compiled with SSL/TLS support. It is, however, disabled
    by default. If you do not wish to enable SSL/TLS encryption, save, exit, and skip
    to step 8.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Pure-FTPd 自动编译了 SSL/TLS 支持。然而，默认情况下它是禁用的。如果您不想启用 SSL/TLS 加密，请保存、退出并跳到步骤 8。
- en: 26.7.1\. Configuring SSL/TLS
  id: totrans-38
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 26.7.1\. 配置 SSL/TLS
- en: An FTP session utilizes a control channel and a data channel. The control channel
    is responsible for handling the initial authentication, commands to the server,
    and the server's responses. The data channel is used to transmit data during file
    transfers.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: FTP 会话使用控制通道和数据通道。控制通道负责处理初始身份验证、向服务器发送的命令以及服务器的响应。数据通道用于在文件传输期间传输数据。
- en: Pure-FTPd, if configured with SSL/TLS, can provide encryption for the control
    channel, although information on the data channel is still transmitted "in the
    clear." For a higher level of security, look at other solutions like SFTP, which
    is part of OpenSSH.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果配置了 SSL/TLS，Pure-FTPd 可以提供控制通道的加密，尽管数据通道上的信息仍然以明文形式传输。为了更高的安全性，请考虑其他解决方案，如
    SFTP，它是 OpenSSH 的一部分。
- en: 'NaN.  Uncomment the `TLS` declaration (~422) and specify 1 or 2\. There are
    two possible SSL/TLS configurations: The first (option 1) allows both unencrypted
    and encrypted connections to occur, while the second (option 2) allows only encrypted
    connections. The example below enables both encrypted and unencrypted connections:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: NaN.  取消注释 `TLS` 声明 (~422) 并指定 1 或 2。有两种可能的 SSL/TLS 配置：第一种（选项 1）允许未加密和加密连接同时发生，而第二种（选项
    2）只允许加密连接。下面的示例启用了加密和未加密连接：
- en: '[PRE4]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: NaN.  Save and exit.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: NaN.  保存并退出。
- en: 'NaN.  Pure-FTPd needs your server certificate and key file combined into a
    single file to function properly. We will assume your certificates and private
    key reside in /usr/local/openssl/certs. The following commands will merge your
    server''s private key file with your server certificate file into a new file that
    Pure-FTPd can use:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: NaN.  Pure-FTPd 需要您的服务器证书和密钥文件合并成一个文件才能正常工作。我们将假设您的证书和私钥位于 /usr/local/openssl/certs。以下命令将合并您的服务器私钥文件与您的服务器证书文件到一个新的文件，供
    Pure-FTPd 使用：
- en: '[PRE5]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '* * *'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Replace the filenames above to match the naming conventions used
    when you created your server key and certificate files with OpenSSL (see "[OpenSSL
    0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)").'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 将上述文件名替换为您使用 OpenSSL 创建服务器密钥和证书文件时使用的命名约定（请参阅 "[OpenSSL 0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)"）。'
- en: '* * *'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '[host.example.com-unencrypted-key.pem](http://host.example.com-unencrypted-key.pem)
    Your server''s unencrypted private key file'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[host.example.com-unencrypted-key.pem](http://host.example.com-unencrypted-key.pem)
    您服务器的未加密私钥文件'
- en: '[host.example.com-cert.pem](http://host.example.com-cert.pem) Your server''s
    public certificate file'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[host.example.com-cert.pem](http://host.example.com-cert.pem) 您服务器的公共证书文件'
- en: '[/etc/ssl/private/pure-ftpd.pem](http:///etc/ssl/private/pure-ftpd.pem) Pure-FTPd
    looks for the SSL Certificate here'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[/etc/ssl/private/pure-ftpd.pem](http:///etc/ssl/private/pure-ftpd.pem) Pure-FTPd
    在此处查找 SSL 证书'
- en: 26.7.2\. Importing and Adding Users
  id: totrans-52
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 26.7.2\. 导入和添加用户
- en: 'NaN.  You may either import users with system-level accounts (those listed
    in /etc/master.passwd) en masse or create new users manually. To create users
    manually, skip to step 9\. To import users that already exist on your system into
    the virtual user database, enter these commands:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: NaN. 您可以批量导入具有系统级账户（在/etc/master.passwd中列出）的用户，或者手动创建新用户。要手动创建用户，请跳到步骤9。要将已存在于您系统中的用户导入虚拟用户数据库，请输入以下命令：
- en: '[PRE6]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '* * *'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** This utility will only import accounts that have shell access.
    Accounts with their shell set to `*nologin*` will need to be added manually.'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 此实用程序只会导入具有shell访问权限的账户。如果账户的shell设置为`*nologin*`，则需要手动添加。'
- en: '* * *'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'NaN.  To add users to the Pure-FTPd virtual user database manually, we need
    to create a system-level account that will be associated with virtual users. Create
    a new user named vftp like this:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: NaN. 要手动将用户添加到Pure-FTPd虚拟用户数据库，我们需要创建一个系统级账户，该账户将与虚拟用户关联。创建一个名为vftp的新用户，如下所示：
- en: '[PRE7]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: We are now able to add users to the virtual users database using the commands
    below. Replace `*user*` with the username you want to create.
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在我们可以使用以下命令将用户添加到虚拟用户数据库。将`*user*`替换为您想要创建的用户名。
- en: '[PRE8]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: To add additional users, simply repeat the commands above with a different user.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要添加更多用户，只需使用不同的用户重复上述命令即可。
- en: 26.7.3\. Configuring Anonymous FTP
  id: totrans-63
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 26.7.3. 配置匿名FTP
- en: We'll configure anonymous FTP access in the next step. If you do not wish to
    configure anonymous FTP, skip to "[Testing](testing-id16.html#testing-id16)".
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一步配置匿名FTP访问。如果您不想配置匿名FTP，请跳转到"[Testing](testing-id16.html#testing-id16)"。
- en: '* * *'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Take great care when running an anonymous FTP server. A single
    ill-configured option can compromise your system''s security.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 在运行匿名FTP服务器时请格外小心。单个配置不当的选项可能会危及您系统的安全。'
- en: '* * *'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'NaN.  Create a new system-level user named ftp like this:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: NaN. 创建一个名为ftp的新系统级用户，如下所示：
- en: '[PRE9]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You may create a directory structure of your choice in /usr/home/ftp. To create
    directories that anonymous users can upload to, use a mode of 777 on the directory.
    For read-only access to files, use a mode of 444\. For read-only access to directories,
    use a mode of 555.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以在/usr/home/ftp中创建您选择的目录结构。要创建匿名用户可以上传到的目录，请在目录上使用777权限。对于文件的只读访问，使用444权限。对于目录的只读访问，使用555权限。
- en: 'For example, you could allow upload access to the directory /usr/home/ftp/upload.
    The following commands will make the home directory read only, create the upload
    directory, and give anonymous users write permissions there:'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，您可以为目录/usr/home/ftp/upload允许上传访问。以下命令将使主目录只读，创建上传目录，并授予匿名用户在该目录的写权限：
- en: '[PRE10]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '* * *'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Be sure to monitor the files in the /usr/home/ftp/upload directory,
    since you can be held responsible if users place illegal content there. Consult
    the pure-ftpd.conf file in /usr/local/etc for anonymous login-related options.
    Refer to "[chown](general.html#chown)" and "[chmod](general.html#chmod)" for details
    on setting file ownership and permissions.'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 请务必监控/usr/home/ftp/upload目录中的文件，因为如果用户在该目录放置非法内容，您可能会承担责任。请查阅/usr/local/etc中的pure-ftpd.conf文件以获取匿名登录相关选项。有关设置文件所有权和权限的详细信息，请参阅"[chown](general.html#chown)"和"[chmod](general.html#chmod)"。'
- en: '* * *'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 26.8\. TESTING
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.8. 测试
- en: In this section we'll perform some basic tests to confirm that Pure-FTPd functions
    properly.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将执行一些基本测试以确认Pure-FTPd正常运行。
- en: 'Enter this command to start Pure-FTPd:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入此命令以启动Pure-FTPd：
- en: '[PRE11]'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Initiate an FTP connection with this command (use your system''s hostname):'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用此命令启动FTP连接（使用您的系统主机名）：
- en: '[PRE12]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The login message should look like this:'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 登录消息应如下所示：
- en: '[PRE13]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Log in with a user account you created earlier and get a directory listing with
    the `ls` command. If the directory listing is successful, the test succeeds. Enter
    `**quit**` to exit the FTP session.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用您之前创建的用户账户登录，并使用`ls`命令获取目录列表。如果目录列表成功，则测试通过。输入`**quit**`退出FTP会话。
- en: '* * *'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** In order to test TLS/SSL functionality, you''ll need a TLS/SSL-capable
    FTP client like Cyberduck for the Macintosh or FileZilla for Windows.'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 为了测试TLS/SSL功能，您需要一个支持TLS/SSL的FTP客户端，例如Macintosh的Cyberduck或Windows的FileZilla。'
- en: '* * *'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'If the test was successful, configure Pure-FTPd to start automatically at system
    startup. To do so, open etc/rc.conf:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果测试成功，请配置Pure-FTPd在系统启动时自动启动。为此，打开etc/rc.conf：
- en: '[PRE14]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'and add the following line:'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下行：
- en: '[PRE15]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Save, exit, and restart Pure-FTPd:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存、退出并重新启动Pure-FTPd：
- en: '[PRE16]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 26.9\. UTILITIES
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.9. 工具
- en: Following is brief information on the pure-pw and pure-ftpwho utilities.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是对 pure-pw 和 pure-ftpwho 工具的简要信息。
- en: 26.9.1\. pure-pw
  id: totrans-96
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 26.9.1\. pure-pw
- en: The pure-pw utility adds, deletes, modifies, and displays information about
    the Pure-FTPd virtual user database.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: pure-pw 工具添加、删除、修改并显示 Pure-FTPd 虚拟用户数据库的信息。
- en: Command
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`pure-pw`'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '`pure-pw`'
- en: Syntax
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`pure-pw` `*command*` `*user*` `-``*options*`'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '`pure-pw` `*command*` `*user*` `-``*options*`'
- en: Commands
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '[PRE17]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Adds a virtual user to pureftpd.passwd file
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 将虚拟用户添加到 pureftpd.passwd 文件
- en: '[PRE18]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Modifies a virtual user entry in pureftpd.passwd file
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 修改 pureftpd.passwd 文件中的虚拟用户条目
- en: '[PRE19]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Deletes a virtual user
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 删除虚拟用户
- en: '[PRE20]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Changes a virtual user password
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 更改虚拟用户密码
- en: '[PRE21]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Displays details about the specified user
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 显示指定用户的详细信息
- en: '[PRE22]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Displays a list of users in the pureftpd.passwd file
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 显示 pureftpd.passwd 文件中的用户列表
- en: '[PRE23]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Exports the pureftpd.passwd file to the pureftpd.pdb database file; this command
    must be run after making any modifications to pureftpd.passwd
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 将 pureftpd.passwd 文件导出到 pureftpd.pdb 数据库文件；此命令必须在修改 pureftpd.passwd 后运行
- en: Options
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE24]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: System user ID
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 系统用户 ID
- en: '[PRE25]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: System group ID
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 系统组 ID
- en: '[PRE26]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Home directory
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 家目录
- en: Examples
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To delete a virtual user named jill from the virtual user database, enter:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 要从虚拟用户数据库中删除名为 jill 的虚拟用户，请输入：
- en: '[PRE27]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'To change the password of a virtual user named jack, enter:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 要更改名为 jack 的虚拟用户的密码，请输入：
- en: '[PRE28]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 26.9.2\. pure-ftpwho
  id: totrans-129
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 26.9.2\. pure-ftpwho
- en: The pure-ftpwho utility monitors current FTP client sessions.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: pure-ftpwho 工具监控当前的 FTP 客户端会话。
- en: Command
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`pure-ftpwho`'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '`pure-ftpwho`'
- en: Syntax
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`pure-ftpwho -``*options*`'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '`pure-ftpwho -``*options*`'
- en: Option
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE29]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Verbose mode (adds local IP address, port, and transfer stats to output)
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 详细模式（将本地 IP 地址、端口和传输统计信息添加到输出）
- en: Example
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To display the current FTP client sessions with transfer statistics, enter:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 要显示具有传输统计信息的当前FTP客户端会话，请输入：
- en: '[PRE30]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 26.10\. CONFIG FILES
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.10\. 配置文件
- en: /usr/local/etc/pure-ftpd.conf
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/pure-ftpd.conf
- en: This is the primary configuration file. It contains options that the pure-config.pl
    script passes to the Pure-FTP daemon upon startup.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这是主要配置文件。它包含 pure-config.pl 脚本在启动时传递给 Pure-FTP 守护进程的选项。
- en: /usr/local/etc/pureftpd.passwd
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/pureftpd.passwd
- en: This file contains usernames, hashed passwords, and directory information on
    virtual users.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 此文件包含虚拟用户的用户名、散列密码和目录信息。
- en: .banner
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: .banner
- en: This is a text file that is automatically displayed at login when put into a
    user's home directory.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个文本文件，当放入用户家目录时，会在登录时自动显示。
- en: .message
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: .message
- en: This text file is automatically displayed when a user enters its parent directory.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个文本文件，当用户进入其父目录时，会自动显示。
- en: 26.11\. LOG FILES
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.11\. 日志文件
- en: /var/log/xferlog
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/xferlog
- en: Stores FTP session information and error messages
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 存储FTP会话信息和错误消息
- en: /var/log/messages
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/messages
- en: Records error messages reported by Pure-FTPd
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 记录 Pure-FTPd 报告的错误消息
- en: /var/log/debug.log
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/debug.log
- en: Stores a log of all client commands if the `VerboseLog` declaration is set to
    yes in pure-ftpd.conf
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在 pure-ftpd.conf 中将 `VerboseLog` 声明设置为 yes，则存储所有客户端命令的日志
- en: 26.12\. NOTES
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 26.12\. 注意事项
- en: 'By default all user accounts are caged, or restricted, to their respective
    home directories. If you need to allow access to a specific directory outside
    a user''s home directory, symbolic links may be used. For example, say a webmaster,
    Michelle (username michelle), needs access to the /usr/local/www/apache22/data
    directory to upload web content. You can create a symbolic link to this directory
    like this:'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认情况下，所有用户帐户都被限制在其各自的 home 目录中。如果您需要允许访问用户家目录外的特定目录，可以使用符号链接。例如，假设网站管理员 Michelle（用户名
    michelle）需要访问 /usr/local/www/apache22/data 目录以上传网页内容。您可以创建指向此目录的符号链接，如下所示：
- en: '[PRE31]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Michelle will have the permissions of the associated userID and groupID you
    specified when you added her to the pureftpd.passwd file. You may need to change
    her associated userID and/or groupID with the pure-pw utility to allow appropriate
    read/write/execute access to the newly linked directory. (If so, you might change
    her user and group IDs to www.) You may also choose to change user or group ownership
    of files and directories to accommodate her existing userID and groupID.
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Michelle 将拥有您在将她在 pureftpd.passwd 文件中添加时指定的关联 userID 和 groupID 的权限。您可能需要使用 pure-pw
    工具更改她的关联 userID 和/或 groupID，以便允许适当的读写执行访问新链接的目录。（如果是这样，您可能需要更改她的用户和组 ID 为 www。）您还可以选择更改文件和目录的所有权，以适应她现有的
    userID 和 groupID。
- en: '* * *'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Be sure you understand file ownership and permissions prior to
    implementing a scheme like this, as it may have security implications.'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 在实施此类方案之前，请确保您理解文件所有权和权限，因为它可能具有安全影响。'
- en: '* * *'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: If your server is behind a firewall (such as a NAT router), problems may arise
    with clients trying to initiate connections because the Pure-FTP daemon tries
    to establish data connections on arbitrary ports when in active mode. If you encounter
    this, configure your FTP client to use passive mode.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您的服务器位于防火墙（如 NAT 路由器）后面，当 Pure-FTP 守护进程在主动模式下尝试在任意端口建立数据连接时，客户端尝试发起连接可能会出现问题。如果您遇到这种情况，请配置您的
    FTP 客户端使用被动模式。
- en: 'Pure-FTPd contains dozens of other features not documented here. Consult the
    Pure-FTPd project webpage [http://www.pureftpd.org/project/pure-ftpd](http://www.pureftpd.org/project/pure-ftpd)
    or manual page for details. The following command displays Pure-FTPd''s man page:'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pure-FTPd 包含了数十个在此处未记录的其他功能。请查阅 Pure-FTPd 项目网页 [http://www.pureftpd.org/project/pure-ftpd](http://www.pureftpd.org/project/pure-ftpd)
    或手册页面以获取详细信息。以下命令显示 Pure-FTPd 的手册页面：
- en: '[PRE32]'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
