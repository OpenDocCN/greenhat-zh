- en: 'Program 3: Early Morning Surprise'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 程序3：凌晨惊喜
- en: This program was written by a friend of mine while we were both at college.
    The homework assignment was to write a matrix-multiply routine. However, the function
    itself had to be written in assembly language. In order to make it run as fast
    as possible, he used an algorithm that I designed, which vectorized the matrix.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这个程序是我的一位朋友在我们上大学时编写的。作业要求编写一个矩阵乘法例程。然而，该函数本身必须用汇编语言编写。为了使其尽可能快地运行，他使用了我为矩阵矢量化设计的算法。
- en: In order to test the system, he wrote a short test function in SAIL ^([[2](#ftn.N18)]).
    When we tested the program, we got the wrong answers. Both of us poured over every
    line of that code from 8:00 p.m. until 2:00 a.m. the next morning. When we finally
    found the error, we both burst out laughing because it was such a silly mistake.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试系统，他在SAIL ^([[2](#ftn.N18)])中编写了一个简短的测试函数。当我们测试程序时，得到了错误的答案。我们俩从晚上8点一直检查到第二天凌晨2点，翻阅了那段代码的每一行。当我们最终找到错误时，我们都忍不住笑出声来，因为那是一个如此愚蠢的错误。
- en: The program below is a simplified version of that famous code. It's written
    entirely in one language (C) and uses a much simpler multiplication algorithm.
    But the original bug still remains. What's going on?
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的程序是那个著名代码的简化版本。它完全用一种语言（C）编写，并使用了一个更简单的乘法算法。但原始的bug仍然存在。这是怎么回事？
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: (Next [Hint 34](LiB0120.html#170). [Answer 53](LiB0121.html#551).)
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: (下一个[提示 34](LiB0120.html#170)。[答案 53](LiB0121.html#551)。)
- en: ^([[2](#N18)])SAIL was an old system programming language for the PDP-10\. The
    debugger was called BAIL. Later a machine independent version of the language
    was created called MAIN SAIL. It pre-dated C by several years.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: ^([[2](#N18)])SAIL是用于PDP-10的旧系统编程语言。调试器被称为BAIL。后来，创建了一个语言的不依赖机器版本，称为MAIN SAIL。它比C语言早几年。
