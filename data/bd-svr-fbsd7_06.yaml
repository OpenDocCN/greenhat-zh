- en: Chapter 1\. FREEBSD 7.0
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 1 章. FREEBSD 7.0
- en: '[HTTP://WWW.FREEBSD.ORG](HTTP://WWW.FREEBSD.ORG)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[HTTP://WWW.FREEBSD.ORG](HTTP://WWW.FREEBSD.ORG)'
- en: 1.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1. 总结
- en: FreeBSD is a free, UNIX-like operating system based on BSD (the Berkeley Software
    Distribution), which was originally developed at the University of California,
    Berkeley. FreeBSD is open source software; the source code (software blueprint)
    is freely available to the public to be modified or improved upon.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: FreeBSD 是基于 BSD（伯克利软件发行版）的免费、类 UNIX 操作系统，最初在加州大学伯克利分校开发。FreeBSD 是开源软件；源代码（软件蓝图）对公众免费开放，以便修改或改进。
- en: FreeBSD is developed as an entire operating system that includes the kernel
    (the core of the operating system), a shell (the user interface), and device drivers
    (software that controls hardware). The Linux kernel, on the other hand, is developed
    separately from the Linux userland. In other words, the shell, system utilities,
    and applications are developed separately and are packaged with the kernel as
    various distributions (Ubuntu, Red Hat, SUSE, and so on).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: FreeBSD 是作为一个完整的操作系统开发的，它包括内核（操作系统的核心）、外壳（用户界面）和设备驱动程序（控制硬件的软件）。另一方面，Linux 内核是独立于
    Linux 用户空间开发的。换句话说，外壳、系统实用程序和应用程序是分别开发的，并以各种发行版（如 Ubuntu、Red Hat、SUSE 等）的形式与内核打包。
- en: 1.1.1\. License
  id: totrans-5
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.1. 许可证
- en: Linux is licensed under version 2 of the GPL (the GNU General Public License);
    FreeBSD is released under the new BSD license. Visit [http://www.opensource.org](http://www.opensource.org)
    for details about the GPL and BSD licenses.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 根据 GPL（GNU 通用公共许可证）的第 2 版授权；FreeBSD 则在新 BSD 许可证下发布。有关 GPL 和 BSD 许可证的详细信息，请访问
    [http://www.opensource.org](http://www.opensource.org)。
- en: 1.1.2\. The Ports Collection
  id: totrans-7
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.2. Ports 收集
- en: The standard FreeBSD distribution includes a proven array of powerful utilities
    together with a massive library of dynamically developed third-party software
    known as the ports collection.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 标准的 FreeBSD 发行版包括一系列经过验证的强大实用程序，以及一个庞大的动态开发第三方软件库，称为 ports 收集。
- en: The ports collection is one of the most convenient features of FreeBSD. It is
    laid out as a hierarchy of categorical directories containing makefiles (scripts
    that build software from source code). Each makefile contains scripts that patch,
    compile, and install applications automatically, making it relatively easy to
    install and track software.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Ports 收集是 FreeBSD 最方便的特性之一。它被组织成一系列分类目录的层次结构，包含 makefile（从源代码构建软件的脚本）。每个 makefile
    包含自动修补、编译和安装应用程序的脚本，使得安装和跟踪软件相对容易。
- en: 1.1.3\. FreeBSD's Roots, Briefly
  id: totrans-10
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.3. FreeBSD 的根源，简要概述
- en: FreeBSD had its beginnings when Bell Labs employees Ken Thompson and Dennis
    Ritchie presented a paper on UNIX at the ACM (Association for Computing Machinery)
    Symposium on Operating Systems Principles in 1973\. A UC Berkeley professor, Robert
    Fabry, heard their presentation and convinced staff at UC Berkeley to purchase
    a PDP-11 (a 16-bit computer built by Digital Equipment Corporation, costing nearly
    $11,000 at the time) to run Thompson's AT&T UNIX. The system's popularity grew
    and Berkeley faculty and students set up a system to share time on the PDP-11.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: FreeBSD 的起源可以追溯到 1973 年，当时贝尔实验室的员工 Ken Thompson 和 Dennis Ritchie 在 ACM（计算机机械协会）操作系统原理研讨会上提交了一篇关于
    UNIX 的论文。加州大学伯克利分校的一位教授 Robert Fabry 听了他们的演讲，并说服伯克利分校的员工购买了一台 PDP-11（由数字设备公司制造的
    16 位计算机，当时价值近 11,000 美元）来运行 Thompson 的 AT&T UNIX。该系统的受欢迎程度不断提高，伯克利学院的教师和学生建立了一个系统，以便在
    PDP-11 上共享时间。
- en: With UNIX running on the PDP-11, two Berkeley graduate students, Bill Joy and
    Chuck Haley, began to write programs for UNIX. UNIX development at Berkeley eventually
    caught the eye of the US government, and the Department of Defense awarded UC
    Berkeley a contract to create a customized version of UNIX for use by its contractors
    working with DARPA (the Defense Advanced Research Projects Agency). Code developed
    at Berkeley was integrated into the existing AT&T UNIX system to meet the needs
    of the DARPA project, and Joy was chosen to lead the project, which he did until
    mid-1982 when he left to co-found Sun Microsystems. (Bill Joy was also the creator
    of the vi text editor and developed the TCP/IP stack for UNIX.)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 当 UNIX 在 PDP-11 上运行时，两位加州大学伯克利分校的毕业生 Bill Joy 和 Chuck Haley 开始为 UNIX 编写程序。伯克利分校的
    UNIX 开发最终引起了美国政府的注意，国防部授予加州大学伯克利分校一份合同，为其与 DARPA（国防高级研究计划局）合作的承包商创建一个定制的 UNIX
    版本。在伯克利开发的代码被整合到现有的 AT&T UNIX 系统中，以满足 DARPA 项目的需求，Joy 被选为项目负责人，直到 1982 年中他离开去共同创立
    Sun Microsystems 为止。（Bill Joy 还创造了 vi 文本编辑器，并为 UNIX 开发了 TCP/IP 堆栈。）
- en: Corporate interest in using Berkeley's BSD Unix grew. However, at the time,
    BSD Unix contained source code from AT&T UNIX, requiring that a license fee be
    paid to AT&T for its use. This fee was cost-prohibitive for many small companies
    and liberation from AT&T's license became a priority. Developers were called upon
    en masse to rewrite and replace the AT&T kernel and utilities.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 企业对使用伯克利的BSD Unix的兴趣日益增长。然而，当时，BSD Unix包含了AT&T UNIX的源代码，使用时需要向AT&T支付许可费。这笔费用对于许多小公司来说是难以承受的，摆脱AT&T的许可成为了一项优先任务。开发者们被大量召集起来重写和替换AT&T内核和实用工具。
- en: After considerable coding effort, BSD Unix was free of AT&T code in 1991, but
    it still lacked six kernel files needed to make it fully functional. These files,
    originally coded by AT&T, were not easily rewritable. In late 1991, Bill and Lynne
    Jolitz (two UC Berkeley alumni) coded the six missing files and released 386/BSD.
    The FreeBSD Project, responsible for development of the FreeBSD operating system,
    was formed a few months later and based its initial code on the Jolitzes' 386/BSD.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 经过大量的编码工作，1991年BSD Unix已经摆脱了AT&T代码，但仍然缺少六个内核文件才能使其完全功能化。这些文件最初由AT&T编写，不易重写。1991年底，比尔和林恩·约尔茨（两位加州大学伯克利分校校友）编写了六个缺失的文件，并发布了386/BSD。几个月后，FreeBSD项目成立，负责FreeBSD操作系统的开发，其初始代码基于约尔茨的386/BSD。
- en: In January of 1992, Berkeley Software Design Inc. (BSDI) began to sell a commercial
    version of Unix that was also based on 386/BSD. In late 1992 UNIX System Labs
    (a subsidiary of AT&T responsible for UNIX development) filed a lawsuit against
    both BSDI and UC Berkeley citing copyright infringement and unauthorized release
    of trade secrets. A settlement was reached in January of 1994 that required small
    modifications to be made to the Berkeley code. The resultant code, released as
    4.4BSD-Lite, is the foundation of the current FreeBSD.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 1992年1月，伯克利软件开发公司（BSDI）开始销售基于386/BSD的商业版Unix。1992年底，UNIX系统实验室（AT&T的子公司，负责UNIX开发）对BSDI和加州大学伯克利分校提起诉讼，指控其侵犯版权和未经授权泄露商业机密。1994年1月达成和解，要求对伯克利代码进行少量修改。结果发布的代码，作为4.4BSD-Lite发布，是当前FreeBSD的基础。
- en: 1.2\. RESOURCES
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2\. 资源
- en: Official FreeBSD Handbook
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 官方FreeBSD手册
- en: '[http://www.freebsd.org/doc/en/books/handbook](http://www.freebsd.org/doc/en/books/handbook)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.freebsd.org/doc/en/books/handbook](http://www.freebsd.org/doc/en/books/handbook)'
- en: Why FreeBSD by Frank Pohlmann
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 《为什么选择FreeBSD》—— 摩根·波尔曼著
- en: '[http://www.ibm.com/developerworks/opensource/library/os-freebsd](http://www.ibm.com/developerworks/opensource/library/os-freebsd)'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.ibm.com/developerworks/opensource/library/os-freebsd](http://www.ibm.com/developerworks/opensource/library/os-freebsd)'
- en: A Brief History of FreeBSD by Jordan Hubbard
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 《FreeBSD简史》—— 贾森·哈伯德著
- en: '[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/history.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/history.html)'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/history.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/history.html)'
- en: 1.3\. REQUIRED
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3\. 必需项
- en: The following are minimum hardware and software requirements needed for a CD
    install of the FreeBSD operating system. For an official list of supported hardware,
    visit [http://www.freebsd.org/releases/7.0R/hardware.html](http://www.freebsd.org/releases/7.0R/hardware.html).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是为FreeBSD操作系统的CD安装所需的最低硬件和软件要求。有关支持的硬件的官方列表，请访问[http://www.freebsd.org/releases/7.0R/hardware.html](http://www.freebsd.org/releases/7.0R/hardware.html)。
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) x86 based
    computer with a i80486 processor or higher, or an AMD Am486 processor or higher;
    32MB of RAM; at least 2GB hard drive space; a system BIOS that supports booting
    from CD'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '![基于x86的计算机](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg)
    拥有i80486处理器或更高版本的x86计算机，或者AMD Am486处理器或更高版本；32MB的RAM；至少2GB的硬盘空间；支持从CD启动的系统BIOS'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) CD drive'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '![CD驱动器](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg)'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    install CD1 (ISO image available at [http://www.freebsd.org/where.html](http://www.freebsd.org/where.html))'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![FreeBSD 7.0-RELEASE安装CD1](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg)
    （ISO镜像可在[http://www.freebsd.org/where.html](http://www.freebsd.org/where.html)获取）'
- en: 1.4\. OPTIONAL
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4\. 可选项
- en: 'The following are not required for a basic installation of FreeBSD, but may
    be needed to run a functional network server:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 以下内容对于FreeBSD的基本安装不是必需的，但可能需要运行功能性的网络服务器：
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Network adapter
    and Internet connection, if you wish to use the ports collection'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '![网络适配器和互联网连接](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg)
    如果您想使用ports集合'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Registered
    domain name, if you wish to host a server on the Internet'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '![注册域名](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 如果您希望在互联网上托管服务器'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) A second
    physical hard drive of comparable size to store backups or to mirror the primary
    hard drive'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '![第二个物理硬盘](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 一个与主硬盘大小相当的第二个物理硬盘，用于存储备份或镜像主硬盘'
- en: 1.5\. PREPARATION
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.5\. 准备
- en: Back up all data you wish to retain on the system in which you intend to install
    FreeBSD. This guide assumes that FreeBSD will be the sole operating system in
    use on the computer. Make sure that booting from CD is enabled in your system's
    BIOS settings.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在您打算安装FreeBSD的系统上备份所有您希望保留的数据。本指南假设FreeBSD将是计算机上使用的唯一操作系统。请确保您的系统BIOS设置中已启用从CD引导。
- en: 1.6\. INSTALL
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.6\. 安装
- en: Below are the steps needed to begin the FreeBSD installation process.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是开始FreeBSD安装过程所需的步骤。
- en: Insert the FreeBSD CD into the system and reboot. A Welcome to FreeBSD menu
    should appear. You can either press [enter] or let the timer run down to zero.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将FreeBSD CD插入系统并重新启动。应该会出现一个欢迎使用FreeBSD的菜单。您可以按[enter]键或让计时器倒数到零。
- en: After booting, the country selection menu should appear. Choose your country
    using the arrow keys and press [enter].
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动后，应该会出现国家选择菜单。使用箭头键选择您的国家并按[enter]键。
- en: The sysinstall Main Menu should appear. Choose the Standard Install option with
    the arrow keys and press [enter].
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该会显示sysinstall主菜单。使用箭头键选择“标准安装”选项，然后按[enter]键。
- en: A message should appear with details about different partitioning schemes. Press
    [enter]. You may see another dialog appear with a warning about incorrect geometry;
    if so, sysinstall should automatically adjust this. Press [enter].
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该会显示一个包含不同分区方案详细信息的消息。按[enter]键。您可能会看到一个包含关于不正确几何形状警告的另一个对话框；如果是这样，sysinstall应自动调整此设置。按[enter]键。
- en: For simplicity's sake, we will devote the entire disk to FreeBSD. To do so,
    press A, then press Q to finish.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了简化，我们将整个磁盘分配给FreeBSD。要这样做，请按A键，然后按Q键完成。
- en: Select Standard in the Boot Manager dialog to make the drive we just partitioned
    bootable.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在引导管理器对话框中选择“标准”以使刚刚分区的驱动器可引导。
- en: The next dialog will explain that we need to create BSD partitions inside the
    new partition. Press [enter], then press A to have the editor automatically create
    the standard partitions. Press Q to exit and continue.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个对话框将解释我们需要在新的分区内创建BSD分区。按[enter]键，然后按A键让编辑器自动创建标准分区。按Q键退出并继续。
- en: A dialog will appear asking you to select a distribution type. Scroll down to
    User and press [spacebar] to select it. Another dialog will appear asking if you
    would like to install the FreeBSD ports collection. Select yes and press [enter]
    to proceed. After returning to the Choose Distributions menu, press [tab] to highlight
    OK and press [enter].
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将出现一个对话框，要求您选择分发类型。使用箭头键向下滚动到“用户”并按[空格键]选择它。另一个对话框将出现，询问您是否要安装FreeBSD端口集合。选择“是”并按[enter]键继续。返回到“选择分发”菜单后，按[tab]键高亮显示“确定”并按[enter]键。
- en: The next screen will ask you to choose installation media. Since we are using
    the CD, choose CD/DVD and press [enter].
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个屏幕将要求您选择安装介质。由于我们使用的是CD，请选择CD/DVD并按[enter]键。
- en: Finally, you are asked to confirm that you are ready to install. Choose yes
    if you are and press [enter]. sysinstall should copy all necessary files to your
    hard drive.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，您将被要求确认您已准备好安装。如果您是，请选择“是”并按[enter]键。sysinstall应将所有必要的文件复制到您的硬盘上。
- en: 1.7\. CONFIGURE
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.7\. 配置
- en: Once sysinstall finishes copying the necessary files to the hard drive, it is
    time to configure FreeBSD's options.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦sysinstall完成将必要的文件复制到硬盘上，就是时候配置FreeBSD的选项了。
- en: The Congratulations dialog should appear. Press [enter].
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该会出现恭喜对话框。按[enter]键。
- en: Now you may configure your Ethernet adapter. If you have one installed, select
    yes and press [enter]. Otherwise select no and proceed to step 5.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您可以配置您的以太网适配器。如果您已安装，请选择“是”并按[enter]键。否则选择“否”并继续到第5步。
- en: The next dialog lists the available interfaces. Your installed Ethernet adapter
    is most likely at the top of the list. If so, simply press [enter]; if not, select
    it and press [enter]. sysinstall will ask you if you want to try IPv6 configuration.
    Select no and press [enter].
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个对话框列出了可用的接口。您安装的以太网适配器很可能是列表顶部的。如果是这样，只需按[enter]键；如果不是，请选择它并按[enter]键。sysinstall将询问您是否要尝试IPv6配置。选择“否”并按[enter]键。
- en: You are asked if you want to try DHCP (Dynamic Host Configuration Protocol).
    Choose yes and press [enter]. (To do this manually, select no and enter your settings.)
    A screen appears with the cursor at the position labeled host. Enter the fully
    qualified domain name (FQDN) here (for example, [server.example.com](http://server.example.com)).
    Replace `*server*` with a name of your choice and [example.com](http://example.com)
    with your registered domain name. If this computer will be a server on a domain,
    enter the domain name in the domain field. If you have not registered a domain
    name yet or want to set this up later, just leave the domain name field blank
    and continue (See "[Configuring a Static IP](configuring_a_static_ip.html#configuring_a_static_ip)"
    to configure later). Finally, press [tab] until OK is highlighted, then press
    [enter] to continue.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会被要求尝试DHCP（动态主机配置协议）。选择“是”并按[回车键]。（要手动完成，选择“否”并输入你的设置。）会出现一个带有光标位于标记为“主机”位置的屏幕。在这里输入完全限定域名（FQDN）（例如，[server.example.com](http://server.example.com)）。将`*server*`替换为你选择的名字，将[example.com](http://example.com)替换为你注册的域名。如果这台计算机将是域上的服务器，请在域名字段中输入域名。如果你还没有注册域名或想稍后设置，只需将域名字段留空并继续（有关稍后配置的详细信息，请参阅"[配置静态IP](configuring_a_static_ip.html#configuring_a_static_ip)"）。最后，按[Tab键]直到“确定”被高亮，然后按[回车键]继续。
- en: When asked if you want the machine to be a network gateway, choose no and press
    [enter]. A dialog asking if you would like to configure inetd should appear. Choose
    no and press [enter].
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否想要将机器作为网络网关时，选择“否”并按[回车键]。会出现一个询问你是否想要配置inetd的对话框。选择“否”并按[回车键]。
- en: sysinstall will ask if you want to enable SSH (secure shell) login. Choose yes
    and press [enter].
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: sysinstall会询问你是否想要启用SSH（安全壳）登录。选择“是”并按[回车键]。
- en: When asked if you would like to allow anonymous FTP access, choose no and press
    [enter].
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否想要允许匿名FTP访问时，选择“否”并按[回车键]。
- en: When asked if you would like to configure the machine as an NFS server, choose
    no and press [enter].
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否想要将机器配置为NFS服务器时，选择“否”并按[回车键]。
- en: When asked if you want to configure the machine as a NFS client, choose no and
    press [enter]. sysinstall will ask to customize system console settings. Choose
    no and press [enter].
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否想要将机器配置为NFS客户端时，选择“否”并按[回车键]。sysinstall会要求自定义系统控制台设置。选择“否”并按[回车键]。
- en: When asked to set the time zone, choose yes and press [enter]. A dialog appears
    asking if the CMOS clock is set to UTC. Most likely it is not, so choose no and
    press [enter]. Choose the region/country/time zone that your computer is set to
    and press [enter]. sysinstall will ask you to confirm your selections; choose
    yes if everything looks okay and press [enter].
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当被要求设置时区时，选择“是”并按[回车键]。会出现一个对话框询问CMOS时钟是否设置为UTC。很可能不是，所以选择“否”并按[回车键]。选择你的计算机设置的地区/国家/时区并按[回车键]。sysinstall会要求你确认你的选择；如果一切看起来都正常，选择“是”并按[回车键]。
- en: When asked if you would like to enable Linux binary compatibility, choose no
    and press [enter].
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否想要启用Linux二进制兼容性时，选择“否”并按[回车键]。
- en: You are asked if you have a mouse. Since this install is from the command line,
    choose no and press [enter].
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否拥有鼠标时。由于这个安装是从命令行进行的，选择“否”并按[回车键]。
- en: When asked if you would like to browse the applications, choose no and press
    [enter].
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当询问你是否想要浏览应用程序时，选择“否”并按[回车键]。
- en: The next dialog asks if you want to add a user account. Choose yes and press
    [enter]. Select user from the menu and press [enter]. The cursor should now be
    at the login ID field in the following screen. Enter a username of your choice
    (this will be the account you will use to manage the system), then press [tab]
    until the cursor is at the password field and enter a password for this account
    (a strong one, preferably a combination of numbers and letters, avoiding guessable
    words), then press [tab] until the cursor is at the full name field and type in
    your full name. Now tab again to the field labeled member groups and enter the
    word `**wheel**` to allow the user to become root/administrator with the `su`
    command (See "[su](general.html#su)" for details). Tab to OK and press [enter].
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个对话框会询问你是否想要添加一个用户账户。选择“是”并按[回车键]。从菜单中选择“用户”并按[回车键]。现在光标应该位于下一个屏幕中的登录ID字段。输入你选择的用户名（这将是你用来管理系统账户的用户名），然后按[Tab键]直到光标位于密码字段，并为此账户输入一个密码（最好是数字和字母的组合，避免可猜测的单词），然后按[Tab键]直到光标位于全名字段，并输入你的全名。现在再次按[Tab键]到标记为“成员组”的字段，并输入单词`**wheel**`以允许用户使用`su`命令成为root/administrator（有关详细信息，请参阅"[su](general.html#su)"）。按[Tab键]到“确定”并按[回车键]。
- en: You are returned to the User/Group Management menu. Select exit and press [enter].
    A notification will come up telling you to set the system manager's (i.e., root)
    password. Press [enter] and enter a password of your choice. (Use a strong one,
    preferably a combination of numbers and letters, avoiding guessable words.) Retype
    your password for verification.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将返回到用户/组管理菜单。选择退出并按[enter]键。将弹出一个通知，告诉您设置系统管理员（即root）的密码。按[enter]键并输入您选择的密码。（请使用强密码，最好是数字和字母的组合，避免可猜测的单词。）为验证重新输入您的密码。
- en: Finally, sysinstall asks if you would like to set any last options. Choose no
    and press [enter]. You should now be at the main menu. Press [tab] until exit
    install is highlighted and press [enter]. When asked if you are sure, choose yes
    before removing the FreeBSD CD from the CD drive. The system should now reboot.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，sysinstall会询问您是否要设置任何最后选项。选择“否”并按[enter]键。现在您应该处于主菜单。按[tab]键直到退出安装选项高亮，然后按[enter]键。当询问您是否确定时，在从CD驱动器中移除FreeBSD
    CD之前选择“是”。系统现在应该会重启。
- en: 1.7.1\. Logging In
  id: totrans-65
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.7.1\. 登录
- en: Once the system reboots, a login prompt will appear. You may log in as root
    to perform administrative tasks. When logging in remotely through SSH, you will
    need to log in as a normal user and then switch user identity to that of the root
    user using the `su` command (See "[su](general.html#su)" for details).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 系统重启后，将出现登录提示。您可以用root身份登录以执行管理任务。当通过SSH远程登录时，您需要以普通用户身份登录，然后使用`su`命令切换用户身份到root用户（详情请见"[su](general.html#su)"）。
- en: 1.7.2\. Default Search Path
  id: totrans-67
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.7.2\. 默认搜索路径
- en: When you type a command at the command prompt, FreeBSD looks in a list of directories
    for the name of the command you entered and runs the program if a match is found.
    This list of directories is called the default search path or path environment
    variable.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 当您在命令提示符下输入命令时，FreeBSD会在一系列目录中查找您输入的命令名称，如果找到匹配项，则会运行该程序。这个目录列表被称为默认搜索路径或路径环境变量。
- en: 'The order in which FreeBSD searches this path is important when installing
    third-party software, which this book concentrates on. Most third-party program
    files are put into subdirectories of /usr/local. The default position of the /usr/local
    directory is near the end of the path statement. If a command that is part of
    a third-party application has the same name as a command that is part of the base
    FreeBSD command set, it will never run because the FreeBSD command will be found
    first and always take precedence. Since we''ll be installing third-party applications
    to extend and/or update FreeBSD''s base system, it is beneficial to invert the
    order of the search path. Let''s change the order of the default search path for
    the root user using Easy Editor:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当安装第三方软件时，FreeBSD搜索此路径的顺序很重要，本书将重点介绍这一点。大多数第三方程序文件都放在/usr/local的子目录中。/usr/local目录的默认位置在路径语句的末尾附近。如果一个第三方应用程序的命令与基础FreeBSD命令集的命令同名，它将永远不会运行，因为FreeBSD命令将首先被找到并始终具有优先权。由于我们将安装第三方应用程序以扩展和/或更新FreeBSD的基本系统，因此反转搜索路径的顺序是有益的。让我们使用Easy
    Editor更改root用户的默认搜索路径顺序：
- en: '[PRE0]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'We''ll comment out (disable) the default set path statement and enter our own
    customized one. Scroll down to the `set path` declaration (~17) and precede it
    with a hash mark (`#`) to disable it, then add the alternative path below so that
    your third-party programs will run even if they have the same names as native
    FreeBSD commands. The `set path` statement should now appear as follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将注释掉（禁用）默认的set path语句，并输入我们自己的自定义语句。向下滚动到`set path`声明（约第17行），在其前面加上井号（`#`）以禁用它，然后添加下面的替代路径，以便即使第三方程序与本地FreeBSD命令同名，它们也能运行。`set
    path`语句现在应如下所示：
- en: '[PRE1]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '* * *'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** The text is wrapped above but each `*set path*` statement should
    only occupy a single line in the .cshrc file.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 文本已换行，但每个`*set path*`语句应仅占用.cshrc文件中的一行。'
- en: '* * *'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Save, exit, log out, and log in. You can display the current search path with
    this command:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 保存、退出、注销和登录。您可以使用此命令显示当前搜索路径：
- en: '[PRE2]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: By default, non-root users use the sh shell (interface), and root defaults to
    the tcsh shell. The default search path can be modified for non-root users in
    the same way. The sh shell stores this setting in the .profile file of each user's
    home directory.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，非root用户使用sh shell（界面），而root默认使用tcsh shell。非root用户的默认搜索路径可以以相同的方式修改。sh
    shell将此设置存储在每个用户家目录的.profile文件中。
- en: 1.7.3\. Limiting SSH Access
  id: totrans-79
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.7.3\. 限制SSH访问
- en: By default, all users (except the root account) have remote SSH access. To limit
    SSH access to specific users add `AllowUsers` `*username*` to the /etc/ssh/sshd_config
    file, separating multiple users with spaces. Only users who appear on this line
    will have remote SSH access.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，所有用户（除了root账户）都有远程SSH访问。要限制SSH访问到特定用户，请将`AllowUsers` `*username*`添加到`/etc/ssh/sshd_config`文件中，多个用户之间用空格分隔。只有出现在此行上的用户才能进行远程SSH访问。
- en: 'To do so, open sshd_config with Easy Editor:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 要这样做，请使用Easy Editor打开sshd_config：
- en: '[PRE3]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Add the following line (substitute your names for the usernames in italics):'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 添加以下行（用斜体中的用户名替换您的用户名）：
- en: '[PRE4]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Save and exit (press [esc] for Easy Editor''s main menu). For the above setting
    to take effect you''ll need to reboot (see below) or restart the ssh daemon using
    the following command:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 保存并退出（按[esc]键进入Easy Editor的主菜单）。为了使上述设置生效，您需要重新启动（见下文）或使用以下命令重新启动ssh守护进程：
- en: '[PRE5]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 1.7.4\. Shutting Down
  id: totrans-87
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.7.4\. 关闭系统
- en: 'When shutting down the system, use the `shutdown` command to safely flush the
    filesystem cache to disk and allow processes to properly terminate. If your system''s
    BIOS supports ACPI (Advanced Configuration and Power Interface), power will also
    be removed. Log in as root, then enter:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 关闭系统时，使用`shutdown`命令安全地将文件系统缓存刷新到磁盘，并允许进程正确终止。如果您的系统BIOS支持ACPI（高级配置和电源接口），则会移除电源。以root身份登录，然后输入：
- en: '[PRE6]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 1.7.5\. Rebooting
  id: totrans-90
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.7.5\. 重新启动
- en: To reboot the system you may use the `reboot` command as shown below (you will
    need to be logged in as root).
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 要重新启动系统，您可以使用以下所示的`reboot`命令（您需要以root身份登录）。
- en: '[PRE7]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 1.8\. CONFIGURING A STATIC IP
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.8\. 配置静态IP
- en: 'It is important for a server to have a static IP or permanent address for much
    the same reason a person needs a phone number: It allows callers or clients to
    reach the recipient. FreeBSD uses a file named rc.conf to establish the system''s
    IP address, among other settings, during system startup. In this section we''ll
    customize the rc.conf file to reflect your server''s intended configuration.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器拥有静态IP或永久地址对于服务器来说非常重要，这与一个人需要电话号码的原因大致相同：它允许呼叫者或客户端找到接收者。FreeBSD使用名为rc.conf的文件在系统启动时确定系统的IP地址以及其他设置。在本节中，我们将自定义rc.conf文件以反映服务器预期的配置。
- en: The rc.conf file contains configuration settings for the computer's hostname,
    network interface cards, and which services to start at boot time. It is important
    that the settings in this file are correct; a typo here could hamper the system's
    functionality.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: rc.conf文件包含计算机的主机名、网络接口卡和启动时启动的服务配置设置。确保此文件中的设置正确；这里的错误可能会妨碍系统的功能。
- en: '* * *'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** The following discussion assumes that you''re building your FreeBSD
    system to function as an Internet server. If this is not the case, then the options
    we selected during installation should be sufficient and you can skip this section.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：***以下讨论假设您正在构建FreeBSD系统以作为互联网服务器运行。如果不是这种情况，那么在安装过程中选择的选项应该足够，您可以跳过本节。'
- en: '* * *'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'We will cover two scenarios for configuring a static IP address:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将涵盖配置静态IP地址的两个场景：
- en: Server behind a NAT (Network Address Translation) router
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 位于NAT（网络地址转换）路由器后的服务器
- en: Server directly connected to the Internet
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接连接到互联网的服务器
- en: 1.8.1\. A. FreeBSD Server Behind a NAT Router
  id: totrans-102
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.8.1\. A. 位于NAT路由器后的FreeBSD服务器
- en: A small office or home network commonly has one Internet connection that needs
    to be shared by multiple computers. A NAT router allows the sharing of a single
    Internet connection within the local (private) network. The router functions as
    a firewall, creating a protected zone in the private network by allowing all traffic
    out, but only allowing known or solicited traffic in.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 小型办公室或家庭网络通常有一个需要由多台计算机共享的互联网连接。NAT路由器允许在本地（私有）网络内共享单个互联网连接。路由器作为防火墙，通过允许所有流量出去，但只允许已知或请求的流量进入，在私有网络中创建一个受保护的区域。
- en: Port Forwarding
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 端口转发
- en: Most NAT routers provide a port-forward function that forwards traffic received
    at the router to a computer with a static IP address inside the private network.
    If, for example, you were hosting a web server, you would need to forward TCP
    port 80 (the IANA standard for HTTP) to the IP address of your FreeBSD server.
    (See your router's documentation for details on port forwarding.)
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数NAT路由器提供端口转发功能，该功能将路由器接收到的流量转发到私有网络内具有静态IP地址的计算机。例如，如果您正在托管一个Web服务器，您需要将TCP端口80（HTTP的IANA标准）转发到您的FreeBSD服务器的IP地址。（有关端口转发的详细信息，请参阅路由器的文档。）
- en: Most NAT routers that support port forwarding have built-in DHCP servers that
    assign computers in the private network a dynamic IP address, one that may change
    each time the computer logs on to the network.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数支持端口转发的 NAT 路由器都内置了 DHCP 服务器，为私有网络中的计算机分配一个动态 IP 地址，这个地址可能会在计算机每次登录网络时改变。
- en: DHCP works when machines simply need to connect to a network and get the first
    available IP address, but it's no help to you if you want to use your FreeBSD
    system as a server. You'll need a static (permanent) IP address so that information
    destined for your server will arrive.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 当机器只需要连接到网络并获得第一个可用的 IP 地址时，DHCP 会起作用，但如果您想将您的 FreeBSD 系统用作服务器，它对您就没有帮助了。您需要一个静态（永久）IP
    地址，以便信息能够到达您的服务器。
- en: Modifying rc.conf to Specify a Static IP Address
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 修改 rc.conf 以指定静态 IP 地址
- en: To specify your server's static IP address you'll modify rc.conf. But first
    you need to tell the DHCP server to assign IP addresses in a range that doesn't
    conflict with the server's IP address.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 要指定服务器的静态 IP 地址，您需要修改 rc.conf。但首先，您需要告诉 DHCP 服务器分配一个不与服务器 IP 地址冲突的 IP 地址范围。
- en: Your router's DHCP options should allow you to set the starting IP address (consult
    your router's documentation for details). For this example, we'll use 192.168.1.12
    as the starting address for the range of addresses that can be assigned to machines,
    knowing that numbers are assigned from this address up (.13, .14, .15, and so
    on). We'll assign 192.168.1.11 as your server's static IP address since it is
    outside the range of the DHCP server.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 您的路由器的 DHCP 选项应该允许您设置起始 IP 地址（有关详细信息，请参阅路由器的文档）。在这个例子中，我们将使用 192.168.1.12 作为可以分配给机器的地址范围的起始地址，知道数字是从这个地址分配的（.13、.14、.15
    等等）。我们将分配 192.168.1.11 作为服务器的静态 IP 地址，因为它不在 DHCP 服务器的范围内。
- en: 'Now let''s set this in rc.conf. Open rc.conf:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们在 rc.conf 中设置它。打开 rc.conf：
- en: '[PRE8]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: You should see something like the following in your rc.conf file (~7). Your
    FQDN should be here if specified during setup; the `*xl0*` may be different.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该在您的 rc.conf 文件中看到以下内容（约 7）。如果设置时指定了 FQDN，则应在此处；`*xl0*` 可能不同。
- en: '[PRE9]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '* * *'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** If you don''t already have the hostname set, be sure to set it
    correctly. The hostname should be your system''s fully qualified domain name;
    `host` is the name of the machine and [example.com](http://example.com) is your
    registered domain name.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 如果您尚未设置主机名，请务必正确设置。主机名应该是您系统的完全合格域名；`host` 是机器的名称，[example.com](http://example.com)
    是您注册的域名。'
- en: '* * *'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Insert your router''s IP address in the `defaultrouter` statement as shown
    below (~7). Using our example scenario above, the `hostname`, `ifconfig`, and
    `defaultrouter` statements should now look like this:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如下所示，在 `defaultrouter` 语句中插入您的路由器的 IP 地址（约 7）。使用我们上面的示例场景，`hostname`、`ifconfig`
    和 `defaultrouter` 语句现在应该看起来像这样：
- en: '[PRE10]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Notice that we have replaced "DHCP" with our static IP address and added the
    netmask address (255.255.255.0 is the default netmask address in most configurations).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们已经将 "DHCP" 替换为我们的静态 IP 地址，并添加了子网掩码地址（255.255.255.0 是大多数配置中的默认子网掩码地址）。
- en: We've also added a `defaultrouter` line which points to the NAT router's IP
    address. This address, 192.168.1.1, will be the IP address you enter into your
    web browser to access the router web configuration; this is also called the default
    gateway.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还添加了一条 `defaultrouter` 行，该行指向 NAT 路由器的 IP 地址。此地址 192.168.1.1 将是您在网页浏览器中输入以访问路由器网页配置的
    IP 地址；这也被称为默认网关。
- en: Now save and exit. (Skip to "[Dynamic DNS](#dynamic_dns)".)
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 现在保存并退出。（跳转到 "[动态 DNS](#dynamic_dns)"。）
- en: 1.8.2\. B. FreeBSD Server Connected Directly to the Internet
  id: totrans-123
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.8.2\. B. 直接连接到互联网的 FreeBSD 服务器
- en: If your FreeBSD system is connected directly to a cable or DSL modem and you
    have correctly entered your FQDN during configuration step 4 above, no further
    configuration is necessary. However, if you did not enter a hostname during the
    DHCP configuration, then you will need to edit /etc/rc.conf to include your FQDN.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的 FreeBSD 系统直接连接到电缆或 DSL 调制解调器，并且在上述配置步骤 4 中正确输入了您的 FQDN，则不需要进一步配置。然而，如果您在
    DHCP 配置过程中没有输入主机名，那么您将需要编辑 /etc/rc.conf 以包含您的 FQDN。
- en: 'Open rc.conf with Easy Editor:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Easy Editor 打开 rc.conf：
- en: '[PRE11]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'rc.conf (~7) should look like this (replace [host.example.com](http://host.example.com)
    with your FQDN):'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: rc.conf （约 7）应如下所示（将 [host.example.com](http://host.example.com) 替换为您的 FQDN）：
- en: '[PRE12]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 1.8.3\. Dynamic DNS
  id: totrans-129
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.8.3\. 动态 DNS
- en: Dynamic DNS is a service provided by third-party companies that keeps track
    of a computer's public IP address. These providers automatically update your domain
    name's associated IP address if it changes for any reason. Most Internet service
    providers use DHCP servers to assign public IP addresses to their customers dynamically.
    Unless you pay for a static IP address, this dynamically assigned address may
    change from time to time.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 动态DNS是由第三方公司提供的一项服务，用于跟踪计算机的公共IP地址。如果由于任何原因IP地址发生变化，这些提供商会自动更新与域名关联的IP地址。大多数互联网服务提供商使用DHCP服务器动态地为他们的客户分配公共IP地址。除非您支付静态IP地址的费用，否则这个动态分配的地址可能会不时地发生变化。
- en: When you register your domain name, you can specify the target IP address of
    your server if you wish to host your own services. Many people mistakenly assume
    that their current, dynamic IP address will be theirs indefinitely. When your
    dynamic IP address changes (which may happen frequently or once every few months),
    you appear to "drop off " the Internet since your domain registrar's records point
    to the previous IP address, which is no longer valid. You would then have to go
    back to your domain registrar and notify them of your new IP address to regain
    your Internet presence (this is usually accomplished through a web-based control
    panel).
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 当您注册域名时，如果您希望托管自己的服务，可以指定服务器的目标IP地址。许多人错误地认为他们的当前动态IP地址将无限期地属于他们。当您的动态IP地址发生变化（这可能会频繁发生或每几个月发生一次）时，您似乎“从互联网上消失”，因为您的域名注册商的记录指向的旧IP地址已不再有效。然后您必须回到您的域名注册商那里，通知他们您的新IP地址以恢复您的互联网存在（这通常通过基于Web的控制面板完成）。
- en: This is where dynamic DNS service providers become useful. These third-party
    companies allow you to keep your IP address updated by using a client program
    on your server to detect when the IP changes. When it does, the client program
    automatically contacts the dynamic DNS service to update your DNS record so you
    stay "live." When using these services you need to point your domain registrar
    to your dynamic DNS service's servers, which then point to your updated IP address.
    Most dynamic DNS providers charge a fee for their services, though there are a
    few free ones, like ZoneEdit ([http://zoneedit.com](http://zoneedit.com)). By
    combining a dynamic DNS service provider with a dynamic DNS updating client like
    ddclient, you can provide a static IP-like Internet presence. See "[ddclient 3.7.3](ddclient_3.7.3.html#ddclient_3.7.3)"
    for information on ddclient.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是动态DNS服务提供商变得有用的地方。这些第三方公司允许您通过在服务器上使用客户端程序来检测IP地址的变化，从而保持您的IP地址更新。当IP地址发生变化时，客户端程序会自动联系动态DNS服务以更新您的DNS记录，这样您就可以保持“在线”。当使用这些服务时，您需要将您的域名注册商指向动态DNS服务的服务器，然后这些服务器指向您更新的IP地址。大多数动态DNS提供商对其服务收费，尽管有一些是免费的，例如ZoneEdit
    ([http://zoneedit.com](http://zoneedit.com))。通过结合动态DNS服务提供商和像ddclient这样的动态DNS更新客户端，您可以提供一个类似于静态IP的互联网存在。有关ddclient的信息，请参阅"[ddclient
    3.7.3](ddclient_3.7.3.html#ddclient_3.7.3)"。
- en: 1.9\. HOSTS AND RESOLV.CONF
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.9. 主机文件和resolv.conf
- en: 'The hosts and resolv.conf files are used to control how FreeBSD performs DNS
    lookups. A DNS lookup is like calling a telephone operator: You give the operator
    a person''s name and she gives you a phone number in return. For example, if a
    web page like [http://www.google.com](http://www.google.com) is requested, FreeBSD
    (by default) first consults the hosts file (/etc/hosts), then the DNS servers
    specified in resolv.conf in order to translate [www.google.com](http://www.google.com)
    into an IP address like 66.102.7.99.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 主机文件和resolv.conf文件用于控制FreeBSD如何执行DNS查找。DNS查找就像打电话给电话接线员：您给接线员一个名字，她给您一个电话号码作为回报。例如，如果请求一个像[http://www.google.com](http://www.google.com)这样的网页，FreeBSD（默认情况下）首先咨询主机文件(/etc/hosts)，然后是resolv.conf中指定的DNS服务器，以便将[www.google.com](http://www.google.com)转换为像66.102.7.99这样的IP地址。
- en: Let's take a closer look at each of these files and see how to set them up.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更详细地看看这些文件，并了解如何设置它们。
- en: 1.9.1\. hosts
  id: totrans-136
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.9.1. hosts
- en: The hosts file resolves (translates) hostnames to IP addresses. At minimum,
    the hosts file should be modified to reflect your system's domain name and hostname.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 主机文件将主机名解析（转换）为IP地址。至少，主机文件应该修改以反映您系统的域名和主机名。
- en: 'Open the hosts file in a text editor:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在文本编辑器中打开主机文件：
- en: '[PRE13]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Your hosts file (~14) should look like this (replace [example.com](http://example.com)
    with your domain name, [host.example.com](http://host.example.com) with your hostname,
    and `*192.168.1.11*` with your IP address):'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 您的主机文件（~14）应如下所示（将[example.com](http://example.com)替换为您的域名，[host.example.com](http://host.example.com)替换为您的主机名，以及`*192.168.1.11*`替换为您的IP地址）：
- en: '[PRE14]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Save and exit.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: Settings in this file only affect the local system. The hosts file supplies
    basic hostname resolution for daemons and other system processes. If you need
    to provide DNS services, you'll need to use a DNS server. (See "ISC BIND DNS Server
    9.4.2" for more information.)
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 此文件中的设置仅影响本地系统。主机文件为守护进程和其他系统进程提供基本的域名解析。如果您需要提供DNS服务，您需要使用DNS服务器。（有关更多信息，请参阅“ISC
    BIND DNS服务器9.4.2”）
- en: 1.9.2\. resolv.conf
  id: totrans-144
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.9.2. resolv.conf
- en: 'The resolv.conf file contains the IP addresses of the DNS servers that your
    system will query when trying to resolve any hostname whose IP address is not
    found in the hosts file. The addresses in this file are automatically set if you
    chose DHCP to configure your network adapter during the initial FreeBSD installation.
    To set this file manually, open it:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: resolv.conf文件包含系统在尝试解析不在主机文件中找到IP地址的主机名时将查询的DNS服务器的IP地址。如果您在初始FreeBSD安装过程中选择DHCP来配置网络适配器，则这些地址将自动设置。要手动设置此文件，请打开它：
- en: '[PRE15]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The resolv.conf file should look something like this, where [example.com](http://example.com)
    is your domain name, `*206.12.29.11*` is the IP address of the DNS server, and
    `*192.168.1.11*` is the IP address of the backup DNS server (both IP addresses
    are provided by your ISP):'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: resolv.conf文件应如下所示，其中[example.com](http://example.com)是您的域名，`*206.12.29.11*`是DNS服务器的IP地址，`*192.168.1.11*`是备份DNS服务器的IP地址（这两个IP地址均由您的ISP提供）：
- en: '[PRE16]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 1.10\. CONFIG FILES
  id: totrans-149
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.10. 配置文件
- en: 'Following are a few common FreeBSD configuration files important to basic FreeBSD
    administration:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些对基本FreeBSD管理重要的常用FreeBSD配置文件：
- en: /etc/rc.conf
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: /etc/rc.conf
- en: Contains most of the common configuration and startup options for daemons, which
    are programs that run in the background to provide a service, such as a web server
    (Apache) or mail server (Postfix).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 包含大多数守护进程的常见配置和启动选项，这些守护进程是在后台运行的程序，用于提供服务，例如Web服务器（Apache）或邮件服务器（Postfix）。
- en: /etc/resolv.conf
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: /etc/resolv.conf
- en: The resolver configuration file. This contains the DNS servers to query when
    resolving a hostname to an IP address.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 解析器配置文件。此文件包含解析主机名到IP地址时将查询的DNS服务器。
- en: /etc/hosts
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: /etc/hosts
- en: The system's hostname to IP address table. This file contains manually entered
    hostnames and their associated IP addresses. FreeBSD will look at this file prior
    to querying a DNS server listed in the resolv.conf file.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 系统的主机名到IP地址表。此文件包含手动输入的主机名及其关联的IP地址。FreeBSD在查询resolv.conf文件中列出的DNS服务器之前会查看此文件。
- en: The following two directories contain startup scripts that execute automatically
    at boot time. These scripts are designed to consult the rc.conf file for instructions
    on whether or not to start services. For example, the /etc/rc.d/sshd script will
    look for `SSHD_ENABLE="YES"` in rc.conf. If an enable line exists, `rc` starts
    the specified service; otherwise it does not.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 以下两个目录包含在启动时自动执行的启动脚本。这些脚本旨在根据rc.conf文件中的指令确定是否启动服务。例如，/etc/rc.d/sshd脚本将在rc.conf中查找`SSHD_ENABLE="YES"`。如果存在启用行，`rc`将启动指定的服务；否则不会。
- en: /etc/rc.d
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: /etc/rc.d
- en: This directory contains system startup scripts that execute at boot time.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 此目录包含在启动时执行的系统启动脚本。
- en: /usr/local/etc/rc.d
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/rc.d
- en: This directory contains third-party startup scripts that execute at boot time.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 此目录包含在启动时执行的第三方启动脚本。
- en: 1.11\. NOTES
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.11. 注意事项
- en: If you aren't familiar with Unix commands, make sure you consult [Appendix A](commands.html#commands)
    before attempting to go any further in this guide. You'll save yourself a lot
    of time and frustration. [Appendix B](backup_and_restore.html#backup_and_restore)
    contains details on backup and restore, which are very important to any server
    setup. [Appendix D](the_protocols.html#the_protocols) contains details on protocols
    and terms mentioned throughout this book.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您不熟悉Unix命令，在尝试继续本指南之前，请务必查阅[附录A](commands.html#commands)。这将为您节省大量时间和精力。[附录B](backup_and_restore.html#backup_and_restore)包含有关备份和恢复的详细信息，这对于任何服务器设置都非常重要。[附录D](the_protocols.html#the_protocols)包含有关本书中提到的协议和术语的详细信息。
- en: It is important to monitor FreeBSD security advisories for up-to-date information
    on known security issues. Security advisories are documents that detail security
    issues with the FreeBSD operating system. To have FreeBSD security advisories
    emailed to you, visit [http://lists.freebsd.org/mailman/listinfo/freebsd-security-notifications](http://lists.freebsd.org/mailman/listinfo/freebsd-security-notifications).
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控 FreeBSD 安全公告对于获取已知安全问题的最新信息非常重要。安全公告是详细说明 FreeBSD 操作系统安全问题的文档。若想通过电子邮件接收
    FreeBSD 安全公告，请访问 [http://lists.freebsd.org/mailman/listinfo/freebsd-security-notifications](http://lists.freebsd.org/mailman/listinfo/freebsd-security-notifications)。
- en: 'Additionally, check FreeBSD''s security page: [http://www.freebsd.org/security](http://www.freebsd.org/security).'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，请检查 FreeBSD 的安全页面：[http://www.freebsd.org/security](http://www.freebsd.org/security)。
- en: If a security issue requires a software update, you can update your system with
    the `freebsd-update` command instead of compiling the source manually.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如果安全问题需要软件更新，您可以使用 `freebsd-update` 命令来更新系统，而不是手动编译源代码。
- en: '* * *'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** This is meant for binary installations of FreeBSD as mentioned
    in this book. Visit [http://www.daemonology.net/freebsd-update](http://www.daemonology.net/freebsd-update)
    for additional information on `*freebsd-update*`. It is prudent to back up your
    system before any update.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 这适用于本书中提到的 FreeBSD 的二进制安装。有关 `*freebsd-update*` 的更多信息，请访问 [http://www.daemonology.net/freebsd-update](http://www.daemonology.net/freebsd-update)。在更新之前备份系统是明智之举。'
- en: '* * *'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '[PRE17]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'After rebooting, display the release level using the following command:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 重启后，使用以下命令显示版本级别：
- en: '[PRE18]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The release level should match or supersede the release level mentioned in the
    security advisory.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 版本级别应与安全公告中提到的版本级别相匹配或更高。
- en: See "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)"
    for more information on the ports collection.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关端口集合的更多信息，请参阅 "[FreeBSD 端口集合](freebsd_ports_collection.html#freebsd_ports_collection)"。
