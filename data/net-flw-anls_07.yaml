- en: Chapter 7. FLOWVIEWER
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 7 章. FLOWVIEWER
- en: '![image with no caption](httpatomoreillycomsourcenostarchimages651574.png.jpg)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![无标题图片](httpatomoreillycomsourcenostarchimages651574.png.jpg)'
- en: Almost everybody likes pretty pictures of network traffic. FlowScan and CUFlow
    graph common, expected traffic types in a user-friendly manner. Your network is
    anything but common or expected, however. In addition to CUFlow, you'll also need
    a more customizable analysis tool, whether because you need a one-time report,
    insight into traffic that you never expected to see, or a close-up view of last
    year's traffic. As you'll learn in this chapter, the FlowViewer suite ([http://ensight.eos.nasa.gov/FlowViewer/](http://ensight.eos.nasa.gov/FlowViewer/))
    is one such customizable tool that can quickly create and access web-based reports.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 几乎每个人都喜欢网络流量的漂亮图片。FlowScan 和 CUFlow 以用户友好的方式绘制常见的、预期的流量类型。然而，你的网络却并非如此普通或预期。除了
    CUFlow 之外，你还需要一个更可定制的分析工具，无论是因为你需要一次性报告、对从未期望看到的流量进行洞察，还是对去年流量的近距离观察。正如你将在本章中学到的，FlowViewer
    套件 ([http://ensight.eos.nasa.gov/FlowViewer/](http://ensight.eos.nasa.gov/FlowViewer/))
    是这样的可定制工具之一，它可以快速创建和访问基于网络的报告。
- en: 'FlowViewer includes three separate components: FlowViewer, FlowTracker, and
    FlowGrapher. *FlowViewer* is a web interface for `flow-print` and `flow-nfilter`
    that, once you''ve defined filters in a web form, will print out the matching
    flows. *FlowGrapher* lets you graph subsets of data on an ad hoc basis. *FlowTracker*
    is a simple way to build and view RRDs, much like CUFlow, but it lets you filter
    graphed traffic very specifically. If you want to continuously track HTTPS and
    telnet traffic to and from your enterprise resource planning (ERP) system, FlowTracker
    is your friend. As a whole, these three tools offer a great deal of visibility
    into the network.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 包含三个独立的组件：FlowViewer、FlowTracker 和 FlowGrapher。*FlowViewer* 是 `flow-print`
    和 `flow-nfilter` 的网络界面，一旦你在网页表单中定义了过滤器，就会打印出匹配的流量。*FlowGrapher* 允许你根据需要绘制数据子集。*FlowTracker*
    是一种简单的方式来构建和查看 RRDs，就像 CUFlow 一样，但它允许你非常具体地过滤绘制的流量。如果你想持续跟踪企业资源规划 (ERP) 系统的 HTTPS
    和 telnet 流量，FlowTracker 就是你的好朋友。总体而言，这三个工具为网络提供了大量的可见性。
- en: Note
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: FlowViewer has an extensive manual that includes more detail than I've been
    able to fit into one chapter. See the FlowViewer manual for more in-depth information.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 拥有一份详尽的用户手册，其中包含的信息比我能够在一个章节中容纳的要多。请参阅 FlowViewer 手册以获取更深入的信息。
- en: FlowTracker and FlowGrapher vs. CUFlow
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FlowTracker 和 FlowGrapher 与 CUFlow 的比较
- en: If FlowTracker, FlowGrapher, and CUFlow have similar functions, why not use
    only one or the other? Primarily for reasons of ease of use.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 FlowTracker、FlowGrapher 和 CUFlow 有类似的功能，为什么不只使用其中一个呢？主要原因是易用性。
- en: CUFlow is easily understood. You can give your customers access to a CUFlow
    graph, and with minimal explanation they can interpret the results fairly accurately.
    Your most feeble-brained co-worker can understand CUFlow output. But at the same
    time, this ease of understanding costs you flexibility. The user gets only the
    features and reports configured by the network administrator, and older reports
    suffer from RRD database compression, as discussed in [Chapter 6](ch06.html "Chapter 6. PERL,
    FLOWSCAN, AND CFLOW.PM").
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: CUFlow 很容易理解。你可以给你的客户访问 CUFlow 图表，并且只需最少的解释，他们就可以相当准确地解释结果。即使是最笨拙的同事也能理解 CUFlow
    的输出。但与此同时，这种易于理解也牺牲了灵活性。用户只能获得网络管理员配置的功能和报告，而旧的报告则受到第 6 章中讨论的 RRD 数据库压缩的影响。
- en: 'On the other hand, FlowViewer''s graphing and tracking functions are more powerful
    than those of CUFlow but also more confusing. Reports are almost infinitely customizable,
    adjustable, and configurable, and this broad feature set means that you really
    need to know what you''re doing in order to get useful information. Also, FlowViewer
    has no concept of a read-only user: Anyone who can access your FlowViewer website
    gets full access to all of its features. FlowViewer is meant for network administrators,
    not general users.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，FlowViewer 的绘图和跟踪功能比 CUFlow 更强大，但也更复杂。报告几乎可以无限定制、调整和配置，这一广泛的功能集意味着你真的需要知道自己在做什么才能获取有用的信息。此外，FlowViewer
    没有只读用户的观念：任何可以访问你的 FlowViewer 网站的人都可以完全访问其所有功能。FlowViewer 是为网络管理员设计的，而不是为普通用户。
- en: FlowViewer Security
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FlowViewer 安全性
- en: 'As mentioned, anyone who can access FlowViewer can see everything about your
    internal network. A skilled intruder would find this irresistible. Others will
    just annoy you: Unskilled visitors, such as your help-desk staff, will probably
    misinterpret FlowViewer''s results and make you spend time explaining why they''re
    wrong. For this reason, I strongly recommend password protecting the FlowViewer
    website and restricting the IP addresses permitted to access the server. Using
    HTTPS, even with a self-signed certificate, will protect your user credentials
    and data in transit.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，任何可以访问FlowViewer的人都可以看到您内部网络的所有信息。一个熟练的入侵者会认为这是无法抗拒的。其他人可能只是打扰您：不熟练的访客，例如您的帮助台工作人员，可能会错误地解释FlowViewer的结果，让您花费时间解释为什么它们是错误的。因此，我强烈建议对FlowViewer网站进行密码保护，并限制允许访问服务器的IP地址。即使使用自签名证书，HTTPS也能保护您的用户凭据和数据在传输过程中的安全。
- en: FlowViewer's default install also uses a world-writable directory to store reports.
    This is a security risk, particularly on a multiuser system. If you're using a
    shared system as your analysis workstation, you must restrict permissions more
    tightly than FlowViewer's defaults.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer的默认安装还使用一个可由世界写入的目录来存储报告。这在多用户系统中是一个安全风险。如果您使用共享系统作为您的分析工作站，您必须比FlowViewer的默认设置更严格地限制权限。
- en: Installing FlowViewer
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装FlowViewer
- en: If possible, install FlowViewer from a package provided by your OS vendor. If
    your vendor doesn't provide a FlowViewer package, you'll need to install by hand,
    of course.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可能，请从您的操作系统供应商提供的软件包中安装FlowViewer。如果您的供应商不提供FlowViewer软件包，您当然需要手动安装。
- en: Prerequisites
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 先决条件
- en: 'Install the following software packages before installing FlowViewer, all of
    which should be available as packages for most operating systems:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装FlowViewer之前安装以下软件包，这些软件包在大多数操作系统中都应作为软件包提供：
- en: Web server, such as any recent Apache
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web服务器，例如任何最近的Apache
- en: Perl
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Perl
- en: RRDtool ([http://oss.oetiker.ch/rrdtool/](http://oss.oetiker.ch/rrdtool/)) with
    Perl shared module support
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RRDtool ([http://oss.oetiker.ch/rrdtool/](http://oss.oetiker.ch/rrdtool/)) 支持Perl共享模块
- en: GD Graphics Library ([http://www.boutell.com/gd/](http://www.boutell.com/gd/))
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GD图形库 ([http://www.boutell.com/gd/](http://www.boutell.com/gd/))
- en: The gd::graph Perl module
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: gd::graph Perl模块
- en: The GDBM Perl module (might be packaged as GDBM_File)
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GDBM Perl模块（可能打包为GDBM_File）
- en: You'll also need to know the system user who runs your web pages. This is probably
    a user named *www*, *http*, or *www-data*. If your web server is running, enter
    **`ps -axe`** or **`ps -axj`** to get the name of the user running the server.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 您还需要知道运行您的网页的系统用户。这可能是名为 *www*、*http* 或 *www-data* 的用户。如果您的Web服务器正在运行，请输入 **`ps
    -axe`** 或 **`ps -axj`** 以获取运行服务器的用户名。
- en: FlowViewer Installation Process
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlowViewer安装过程
- en: To install FlowViewer, first download the latest version of FlowViewer from
    [http://ensight.eos.nasa.gov/FlowViewer/](http://ensight.eos.nasa.gov/FlowViewer/).
    The compressed installation file includes a FlowViewer directory with several
    files containing the entire package. Untar it in a directory under your web server.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装FlowViewer，首先从 [http://ensight.eos.nasa.gov/FlowViewer/](http://ensight.eos.nasa.gov/FlowViewer/)
    下载FlowViewer的最新版本。压缩的安装文件包含一个包含整个包的FlowViewer目录，将其解压到您的Web服务器下的一个目录中。
- en: 'Now configure your web server to permit CGI execution in that directory. For
    example, here''s how to configure Apache to support FlowViewer in the directory
    */usr/local/www/flowviewer*:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 现在配置您的Web服务器以允许在该目录中执行CGI。例如，以下是如何配置Apache以在目录 */usr/local/www/flowviewer* 中支持FlowViewer的示例：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The alias definition at ❶ maps the web location [http://servername/FlowViewer/](http://servername/FlowViewer/)
    to the local directory */usr/local/www/flowviewer/*. Then, at ❷ you assign specific
    permissions to the FlowViewer directory, permitting CGI execution and client access.
    Finally, restart Apache.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在❶处的别名定义将Web位置 [http://servername/FlowViewer/](http://servername/FlowViewer/)
    映射到本地目录 */usr/local/www/flowviewer/。然后，在❷处您为FlowViewer目录分配特定的权限，允许CGI执行和客户端访问。最后，重新启动Apache。
- en: That's it for installation. The more difficult part of FlowViewer is configuration.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 安装部分到此结束。FlowViewer更困难的部分是配置。
- en: Configuring FlowViewer
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置FlowViewer
- en: 'All the tools in the FlowViewer suite use the *FlowViewer_Configuration.pm*
    configuration file. Although this file contains many settings, only a few are
    required for proper operation; the others allow you to tweak the application''s
    appearance and the behavior of FlowTracker''s RRD files. If you''re interested
    in settings not discussed here, see FlowViewer''s extensive manual. I''ll cover
    only the settings needed to make FlowViewer work. (Some operating system packages
    set these for you as part of their install process.) Without further ado, here
    are the settings that you''ll need to make:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer套件中的所有工具都使用*FlowViewer_Configuration.pm*配置文件。尽管此文件包含许多设置，但只有少数是正确操作所必需的；其他设置允许你调整应用程序的外观和FlowTracker的RRD文件的行为。如果你对这里未讨论的设置感兴趣，请参阅FlowViewer的详细手册。我将仅介绍使FlowViewer工作所需的设置。（某些操作系统包在安装过程中为你设置这些设置。）不再多言，以下是你将需要的设置：
- en: The `$ENV{PATH}` variable includes only the paths for system commands that FlowViewer
    requires. On almost all systems, you should leave this alone. You do not need
    to have flow-tools and RRDtool in these directories; they have their own path
    variables that you'll set later.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$ENV{PATH}`变量仅包括FlowViewer所需的系统命令的路径。在几乎所有系统中，你应该保持这个设置不变。你不需要在这些目录中有flow-tools和RRDtool；它们有自己的路径变量，你将在稍后设置。'
- en: The `$FlowViewer_server` variable tells FlowViewer the hostname of your website.
    For example, to make my test collector visible at [https://netflow.blackhelicopters.org/](https://netflow.blackhelicopters.org/),
    I set `$FlowViewer_server` to `netflow.blackhelicopters.org`.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$FlowViewer_server`变量告诉FlowViewer你网站的域名。例如，为了使我的测试收集器在[https://netflow.blackhelicopters.org/](https://netflow.blackhelicopters.org/)可见，我将`$FlowViewer_server`设置为`netflow.blackhelicopters.org`。'
- en: The `$FlowViewer_service` variable helps FlowViewer construct web pages. Set
    this to either `http` or `https`, as appropriate for your website.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$FlowViewer_service`变量帮助FlowViewer构建网页。根据你网站的适当情况将其设置为`http`或`https`。'
- en: Directories and Site Paths
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 目录和网站路径
- en: FlowViewer stores files on the web server, and all file storage directories
    must be writable by the web server user. Create these directories, and change
    their ownership to the web server user. (Unwritable directories are a common cause
    of FlowViewer problems.)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer将文件存储在Web服务器上，所有文件存储目录都必须可由Web服务器用户写入。创建这些目录，并将它们的所有权更改为Web服务器用户。（不可写入的目录是FlowViewer问题的一个常见原因。）
- en: Most directory variables also have a "short" version that defines where a web
    browser can find that directory on the server. FlowViewer uses this short name
    to create links to generated content. I'll walk you through examples when you
    set the first few variables.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数目录变量还有一个“简短”版本，它定义了网络浏览器可以在服务器上找到该目录的位置。FlowViewer使用这个简短名称来创建指向生成内容的链接。当我带你设置前几个变量时，我会通过例子来展示。
- en: SEARCH-AND-REPLACE CONFIGURATION
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 搜索和替换配置
- en: The default *FlowViewer_Configuration.pm* assumes that Apache's *DocumentRoot*
    directory is */htp/htdocs* and that the CGI directory where FlowViewer is installed
    is */htp/cgi-bin*. You might do a simple search and replace on these values, replacing
    them with the correct *DocumentRoot* and *FlowViewer* installation directories
    for your environment. In all of the following examples, my website root directory
    is */var/www/ssl*, and FlowViewer is installed in */usr/local/www/flowviewer*.
    You must create all the directories you tell FlowViewer to use.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的*FlowViewer_Configuration.pm*假定Apache的*DocumentRoot*目录是*/htp/htdocs*，而FlowViewer安装的CGI目录是*/htp/cgi-bin*。你可能需要对这些值进行简单的搜索和替换，将它们替换为你环境中正确的*DocumentRoot*和*FlowViewer*安装目录。在所有以下示例中，我的网站根目录是*/var/www/ssl*，FlowViewer安装在*/usr/local/www/flowviewer*。你必须创建FlowViewer告诉你要使用的所有目录。
- en: '`$reports_directory` tells FlowViewer where to store reports, and `$reports_short`
    gives the location on the website where a client would find the *$reports* directory.
    The report directory must be under Apache''s *DocumentRoot* or another directory
    accessible to Apache. Here, I''ve created a *FlowViewer* directory in my *DocumentRoot*:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '`$reports_directory`告诉FlowViewer报告的存储位置，而`$reports_short`给出客户端在网站上找到*$reports*目录的位置。报告目录必须在Apache的*DocumentRoot*或另一个Apache可访问的目录下。在这里，我在我的*DocumentRoot*中创建了一个*FlowViewer*目录：'
- en: '[PRE1]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: FlowViewer stores generated graphs in *$graphs_directory*, and `$graphs_short`
    defines the location on the website where a client would find *$graphs_directory*.
    Like *$reports_directory*, *$graphs_directory* must be accessible on the website.
    I use the directory */var/www/ssl/FlowGrapher*.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer将生成的图形存储在`$graphs_directory`中，`$graphs_short`定义了客户端在网站上找到`$graphs_directory`的位置。像`$reports_directory`一样，`$graphs_directory`必须在网站上可访问。我使用目录`/var/www/ssl/FlowGrapher`。
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The FlowTracker tool stores files in *$tracker_directory*, which is accessible
    on the website as *$tracker_short*. I use the directory */var/www/ssl/FlowTracker*.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: FlowTracker工具将文件存储在`$tracker_directory`中，该目录在网站上可通过`$tracker_short`访问。我使用目录`/var/www/ssl/FlowTracker`。
- en: '[PRE3]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The `$cgi_bin_directory` variable points to the directory that contains the
    FlowViewer software. You could choose to copy this to your web server''s regular
    CGI executable directory, but I suggest installing FlowViewer in its own directory
    and then configuring your web server to run CGI scripts in that directory. For
    example, as you can see here, my FlowViewer install is in */usr/local/www/flowviewer*,
    and I configured the web server to offer this as [http://servername/flowviewer](http://servername/flowviewer):'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '`$$cgi_bin_directory`变量指向包含FlowViewer软件的目录。您可以选择将其复制到您的Web服务器的常规CGI可执行目录，但我建议在单独的目录中安装FlowViewer，然后配置您的Web服务器在该目录中运行CGI脚本。例如，正如您在这里可以看到的，我的FlowViewer安装在`/usr/local/www/flowviewer`，我已配置Web服务器提供[http://servername/flowviewer](http://servername/flowviewer)：'
- en: '[PRE4]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'FlowViewer saves temporary files in *$work_directory*, which is accessible
    on the web server as *$work_short*. Here I''m using */var/www/ssl/FlowWorking*:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer将临时文件保存在`$work_directory`中，该目录在Web服务器上可通过`$work_short`访问。这里我使用`/var/www/ssl/FlowWorking`：
- en: '[PRE5]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Reports and filters saved for later are stored in *$save_directory*, which is
    accessible to web clients as *$save_short*. Create */var/www/ssl/FlowViewer_Saves*
    for this.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 为以后保存的报告和过滤器存储在`$save_directory`中，该目录可通过Web客户端作为`$save_short`访问。为此创建`/var/www/ssl/FlowViewer_Saves`。
- en: '[PRE6]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The remaining directories do not have "short" variables for their path on the
    website. FlowViewer uses them for internal tracking or to find key software, and
    the client should never access them directly.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 剩余的目录在网站上的路径上没有“短”变量。FlowViewer使用它们进行内部跟踪或查找关键软件，客户端不应直接访问它们。
- en: When a user asks FlowViewer to resolve the names of IP addresses, it caches
    the results in *$names_directory*. For example, I put my names cache in */usr/local/www/flowviewer/names*.
    Remember, any cached DNS data slowly becomes obsolete as hosts change IP addresses.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当用户要求FlowViewer解析IP地址的名称时，它将在`$names_directory`中缓存结果。例如，我把我的名称缓存放在`/usr/local/www/flowviewer/names`。记住，任何缓存的DNS数据随着主机更改IP地址而逐渐变得过时。
- en: FlowTracker stores the filters it uses to create trackers in *$filter_directory*
    and stores the RRD files in *$rrdtool_directory*.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FlowTracker将其用于创建跟踪器的过滤器存储在`$filter_directory`中，并将RRD文件存储在`$rrdtool_directory`中。
- en: The *$flow_bin_directory* directory is where flow-tools is installed. This is
    usually something like */usr/local/bin* or */usr/local/flow-tools/bin*.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$flow_bin_directory`目录是flow-tools安装的位置。这通常是类似`/usr/local/bin`或`/usr/local/flow-tools/bin`的东西。'
- en: Similarly, *rrdtool_bin_directory* is where RRDtool is installed, which is usually
    */usr/local/bin* or */usr/local/rrdtool/bin*.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类似地，`rrdtool_bin_directory`是RRDtool安装的位置，通常是`/usr/local/bin`或`/usr/local/rrdtool/bin`。
- en: 'Here''s how they look in the configuration:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置中，它们看起来是这样的：
- en: '[PRE7]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Website Setup
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网站设置
- en: 'The next four values set some basic properties in FlowViewer''s web interface:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的四个值在FlowViewer的Web界面中设置了一些基本属性：
- en: FlowTracker automatically generates a web page listing all trackers currently
    running. The default file is *index.html* in *$tracker_directory*. Change this
    by setting `$actives_webpage` to the desired filename.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FlowTracker自动生成一个网页，列出当前正在运行的跟踪器。默认文件是`$tracker_directory`中的`index.html`。通过将`$actives_webpage`设置为所需的文件名来更改此设置。
- en: The autogenerated tracker page lists your organization name as the value of
    `$trackings_title`.
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动生成的跟踪页面将您的组织名称作为`$trackings_title`的值列出。
- en: To put your company logo next to the FlowViewer graphic at the top of each page,
    create a logo file 86 pixels high, and copy it to *$reports_directory*.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要将您的公司标志放在每个页面顶部的FlowViewer图形旁边，创建一个高度为86像素的标志文件，并将其复制到`$reports_directory`。
- en: Then assign `$user_logo` the filename. The logo will link to a website defined
    in `$user_hyperlink`.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 然后将`$user_logo`分配给文件名。标志将链接到在`$user_hyperlink`中定义的网站。
- en: 'They''ll look like this in the configuration:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置中，它们将看起来像这样：
- en: '[PRE8]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Devices and Exporters
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设备和导出器
- en: In [Chapter 2](ch02.html "Chapter 2. COLLECTORS AND SENSORS"), you decided to
    use either a single collector that accepted flow records from all your sensors
    or a separate collector for each sensor. FlowViewer can support either configuration,
    but you must tell it which one it's using.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第 2 章](ch02.html "第 2 章。收集器和传感器")中，您决定使用一个接受来自所有传感器的流量记录的单个收集器，或者为每个传感器设置一个单独的收集器。FlowViewer
    可以支持这两种配置，但您必须告诉它它使用的是哪一种。
- en: The simplest scenario is a single sensor and a single collector when you expect
    to never have more, but I don't recommend making this assumption. Networks change
    over time, and your FlowViewer install should accommodate that change. If you
    insist that you'll have only one collector and one sensor, though, see the FlowViewer
    manual for information on changing `$no_devices_or_exporters`.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的情况是单个传感器和单个收集器，当您预期永远不会更多时，但我不建议做出这个假设。网络会随着时间的推移而变化，您的 FlowViewer 安装应该适应这种变化。如果您坚持只有一个收集器和单个传感器，尽管如此，请参阅
    FlowViewer 手册了解有关更改 `$no_devices_or_exporters` 的信息。
- en: One Collector per Sensor
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 每个传感器一个收集器
- en: In [Chapter 2](ch02.html "Chapter 2. COLLECTORS AND SENSORS"), I recommended
    setting up one collector per sensor. Your flow data would go into a directory
    such as */var/db/flows*, with a subdirectory for each device. You'd wind up with
    directories such as */var/db/flows/router1* for the sensor router1, */var/db/flows/router2*
    for the sensor router2, and so on.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第 2 章](ch02.html "第 2 章。收集器和传感器")中，我建议为每个传感器设置一个收集器。您的流量数据将进入一个目录，例如 */var/db/flows*，每个设备都有一个子目录。您最终会得到如下目录：*/var/db/flows/router1*（用于传感器路由器1），*/var/db/flows/router2*（用于传感器路由器2），等等。
- en: For this setup, assign the flow data root directory to `$flow_data_directory`.
    In my setup, `$flow_data_directory` is */var/db/flows*. Now assign the variable
    `@devices` the list of directory names that represent sensors. For example, my
    network has the sensors router1, router2, and router3\. I would assign the following
    values to `@devices`. (FlowViewer offers everything in `@devices` as an option
    in a drop-down menu.)
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个设置，将流量数据根目录分配给 `$flow_data_directory`。在我的设置中，`$flow_data_directory` 是 */var/db/flows*。现在将变量
    `@devices` 分配给代表传感器的目录名称列表。例如，我的网络有传感器路由器1、路由器2和路由器3。我会将以下值分配给 `@devices`。（FlowViewer
    将 `@devices` 中的所有内容作为下拉菜单中的选项提供。）
- en: '[PRE9]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: One Collector for All Sensors
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为所有传感器分配一个收集器
- en: 'If all your sensors send their data to a single collector, don''t set `@devices`
    or `$flow_data_directory`. Instead, set `$exporter_directory` to the location
    of your consolidated flow data. If you ran a single collector and all your data
    went into */var/db/flows*, set `$exporter_directory` to */var/db/flows*. Also,
    uncomment `@exporters`, and set it to the list of sensors in the collector, listing
    exporters by IP address and hostname, as shown here:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如果所有您的传感器都将数据发送到单个收集器，请不要设置 `@devices` 或 `$flow_data_directory`。相反，将 `$exporter_directory`
    设置为您的综合流量数据的位置。如果您运行了一个单独的收集器并且所有数据都进入了 */var/db/flows*，则将 `$exporter_directory`
    设置为 */var/db/flows*。此外，取消注释 `@exporters`，并将其设置为收集器中的传感器列表，按 IP 地址和主机名列出导出器，如下所示：
- en: '[PRE10]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: FlowViewer is now configured and ready for use. Point your web browser to *FlowViewer.cgi*
    to see its initial screen.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 现在已配置并准备好使用。将您的网络浏览器指向 *FlowViewer.cgi* 以查看其初始屏幕。
- en: Troubleshooting the FlowViewer Suite
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 流览器套件故障排除
- en: FlowViewer has many setup options, and you'll probably make mistakes during
    your first install. I strongly recommend keeping a terminal window open and running
    `tail -f` on your web server error log to display errors as they occur. In my
    experience, the most common errors are incorrect directory variables and directory
    permissions.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 有许多设置选项，您在第一次安装时可能会犯错。我强烈建议保持一个终端窗口打开，并在您的 Web 服务器错误日志上运行 `tail -f`
    以显示错误。根据我的经验，最常见的问题是目录变量不正确和目录权限问题。
- en: Watch the error log as you use FlowViewer, and correct errors as they appear.
    Follow these procedures, and within a few moments of testing, you should have
    a correctly working FlowViewer install.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 FlowViewer 时，请监视错误日志，并在错误出现时进行纠正。遵循这些程序，在测试几分钟内，您应该有一个正确工作的 FlowViewer 安装。
- en: Using FlowViewer
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 FlowViewer
- en: Once properly installed, FlowViewer should look something like [Figure 7-1](ch07s05.html#default_flowviewer_interface
    "Figure 7-1. Default FlowViewer interface").
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 正确安装后，FlowViewer 应该看起来像[图 7-1](ch07s05.html#default_flowviewer_interface "图
    7-1。默认 FlowViewer 界面")。
- en: '![Default FlowViewer interface](httpatomoreillycomsourcenostarchimages651590.png.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![默认 FlowViewer 界面](httpatomoreillycomsourcenostarchimages651590.png.jpg)'
- en: Figure 7-1. Default FlowViewer interface
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-1. 默认 FlowViewer 界面
- en: The upper part of the screen, Filter Criteria, controls traffic selection. This
    is essentially an interface to `flow-nfilter` that lets you choose exactly which
    flows you want to examine. FlowGrapher and FlowTracker share most of FlowViewer's
    filter interface. The lower part of the screen, Reporting Parameters, controls
    the display of results. You can run reports on traffic or just view the matching
    flows.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 屏幕上半部分，过滤条件，控制流量选择。这基本上是`flow-nfilter`的接口，让您选择您想要检查的确切流量。FlowGrapher和FlowTracker与FlowViewer的过滤接口共享大部分功能。屏幕下半部分，报告参数，控制结果的显示。您可以对流量运行报告或仅查看匹配的流量。
- en: In the following sections, I'll cover how to use the filtering interface first
    and then the viewing options.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下章节中，我将首先介绍如何使用过滤界面，然后是查看选项。
- en: Filtering Flows with FlowViewer
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用FlowViewer过滤流量
- en: Each field you modify in the Filter Criteria section is fed to `flow-nfilter`.
    Most fields accept multiple entries, separated by commas. You can also negate
    an entry by prefixing it with a minus sign. (If you have general questions on
    filtering flows, see [Chapter 4](ch04.html "Chapter 4. FILTERING FLOWS").)
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 您在过滤条件部分修改的每个字段都会传递给`flow-nfilter`。大多数字段接受多个条目，条目之间用逗号分隔。您还可以通过在条目前加负号来否定一个条目。（如果您对过滤流量有一般性问题，请参阅[第4章](ch04.html
    "第4章。过滤流量")。）
- en: Device
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设备
- en: If you have multiple sensors, you must first select the device that provides
    the data you want to examine. This drop-down menu is taken directly from the devices
    or exporters list you configured for FlowViewer, and it's the only field that
    requires you to enter anything.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有多个传感器，您必须首先选择提供您想要检查的数据的设备。此下拉菜单直接来自您为FlowViewer配置的设备或导出列表，并且是唯一需要您输入内容的字段。
- en: Next Hop IP
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 下一跳IP
- en: This is the IP address where the sensor sends traffic. Remember that only hardware
    flow sensors, such as routers and switches, include next-hop address information
    in flows. Software flow sensors do not have access to this information.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这是传感器发送流量的IP地址。请记住，只有硬件流量传感器（如路由器和交换机）在流中包含下一跳地址信息。软件流量传感器无法访问此信息。
- en: Start and End Date and Time
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 开始和结束日期和时间
- en: Here you set the time you're interested in. Times are in 24-hour-clock format.
    FlowViewer defaults to offering the most recent complete hour. See [Include Flow
    If](ch07s05.html#include_flow_if "Include Flow If") in [Include Flow If](ch07s05.html#include_flow_if
    "Include Flow If") for a discussion on how FlowViewer handles flows that cross
    the start or end times.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您设置您感兴趣的时间。时间以24小时制格式表示。FlowViewer默认提供最近的完整小时。请参阅[包含流量如果](ch07s05.html#include_flow_if
    "包含流量如果")中的[包含流量如果](ch07s05.html#include_flow_if "包含流量如果")，了解FlowViewer如何处理跨越开始或结束时间的流量。
- en: TOS Field, TCP Flag, and Protocol
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: TOS字段、TCP标志和协议
- en: FlowViewer's Type of Service (DSCP) and TCP flags filtering accepts both decimal
    values (16) and hexadecimals (0x10).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer的服务类型（DSCP）和TCP标志过滤接受十进制值（16）和十六进制值（0x10）。
- en: You can enter the IP protocol either by name (TCP, UDP, and so on) or by number
    (6, 17, and so on).
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过名称（TCP、UDP等）或数字（6、17等）输入IP协议。
- en: Source and Dest IP
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 源和目标IP
- en: You can report on either a single address, a hostname, multiple comma-separated
    addresses, or networks with a netmask in prefix length (slash) notation. For example,
    to report on traffic from the network 192.0.2.0 with a netmask of 255.255.255.128,
    you would enter **192.0.2.0/25**.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以报告单个地址、主机名、多个以逗号分隔的地址，或者带有前缀长度的网络（斜杠表示法）中的网络。例如，要报告来自网络192.0.2.0且子网掩码为255.255.255.128的流量，您将输入**192.0.2.0/25**。
- en: Note
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: Be very careful when using hostnames for network analysis. Some hosts have multiple
    IP addresses. In this case, you're better off using actual IP addresses to reduce
    ambiguity.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用主机名进行网络分析时，请务必非常小心。一些主机有多个IP地址。在这种情况下，您最好使用实际的IP地址以减少歧义。
- en: Source and Dest Interface
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 源和目标接口
- en: If you think you know how your traffic flowed, you can filter by source or destination
    interface. When you do, remember that interfaces are numbered by index number,
    which you can get from SNMP. You can add interface names to FlowViewer, as I'll
    discuss at the end of this chapter.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您认为您知道您的流量是如何流动的，您可以通过源或目标接口进行过滤。当您这样做时，请记住接口是通过索引号进行编号的，您可以从SNMP中获取这些索引号。您可以将接口名称添加到FlowViewer中，我将在本章末尾讨论这一点。
- en: I most often use FlowViewer when analyzing problems and outages. When doing
    so, I recommend against filtering by interface because traffic flowing incorrectly
    is a common cause of problems and outages, and filtering by interface can filter
    away the problem traffic.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我最常在分析问题和故障时使用FlowViewer。在这种情况下，我建议不要按接口过滤，因为流量错误是问题和故障的常见原因，按接口过滤可能会过滤掉问题流量。
- en: Source and Dest Port and AS
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 源和目的端口以及AS
- en: FlowViewer can filter by TCP or UDP port. You can also encode ICMP types and
    codes as a port, as discussed in [ICMP Types and Codes and Flow Records](ch03s04.html
    "ICMP Types and Codes and Flow Records") in [ICMP Types and Codes and Flow Records](ch03s04.html
    "ICMP Types and Codes and Flow Records"), and use that to filter ICMP flows. Further,
    if your sensor exports BGP information, you can filter by source and destination
    AS number.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer可以按TCP或UDP端口进行过滤。您还可以将ICMP类型和代码编码为端口，如[ICMP类型和代码及流量记录](ch03s04.html
    "ICMP Types and Codes and Flow Records")中所述，并使用它来过滤ICMP流量。此外，如果您的传感器导出BGP信息，您还可以按源和目的AS号进行过滤。
- en: Reporting Parameters
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 报告参数
- en: FlowViewer can provide either statistical reports or printed reports. Both types
    of reports share the remaining optional settings. I'll cover the options first
    and then discuss the two types of reports. You can run one report at a time, but
    if you select both a statistics report and a printed report, FlowViewer will return
    an error.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer可以提供统计报告或打印报告。这两种类型的报告共享剩余的选项设置。我将首先介绍选项，然后讨论两种类型的报告。您一次可以运行一个报告，但如果您同时选择统计报告和打印报告，FlowViewer将返回错误。
- en: Include Flow If
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 包含流量条件
- en: This setting determines how FlowViewer selects flows to report on. The default,
    Any Part in Specified Time Span, includes a flow record if any part of the flow
    is within the time you specify. For example, if you're interested in flow data
    from 9 to 10, your raw data might include a flow that starts at 8:59:30 and ends
    at 9:01:30 and also one that starts at 9:59:59 and ends at 10:05:59, with part
    of these flows trailing off either end of your chosen time window.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 此设置确定FlowViewer如何选择要报告的流量。默认的“指定时间段内任何部分”设置，如果流量的任何部分在您指定的时间范围内，就会包含流量记录。例如，如果您对9到10点的流量数据感兴趣，您的原始数据可能包括一个从8:59:30开始到9:01:30结束的流量，以及一个从9:59:59开始到10:05:59结束的流量，其中这些流量的部分在您选择的时间窗口两端。
- en: Most of the time, the default setting gives the best view of traffic during
    your chosen time. When using the default setting, these flows will be included
    in the filtered data. On the other hand, the End Time in Specified Time Span setting
    chops off anything that trails past the closing window. Specifically, in this
    example, the flow that starts at 9:59:59 and ends at 10:05:59 would not be included
    in the selected data. The Start Time in Specified Time Span setting slices off
    the flow that begins at 8:59:30, and the Entirely in Specified Time Span setting
    excludes both of those trailing flows.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，默认设置可以提供您选择时间段内交通状况的最佳视图。当使用默认设置时，这些流量将会包含在过滤后的数据中。另一方面，指定时间段结束时间设置会截断任何超出关闭窗口的流量。具体来说，在这个例子中，从9:59:59开始到10:05:59结束的流量将不会包含在所选数据中。指定时间段开始时间设置会截断从8:59:30开始的流量，而完全在指定时间段设置会排除这两段尾随流量。
- en: Sort Field, Resolve Addresses, and Oct Conv, and Sampling Multip
  id: totrans-112
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 排序字段、解析地址、字节转换和采样倍数
- en: Like `flow-report`, FlowViewer can sort its output on any field with the output
    columns numbered starting from 1\. To sort by a particular field, give the number
    of the column you want to sort by in the Sort Field space.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 与`flow-report`类似，FlowViewer可以根据任何字段对输出进行排序，输出列从1开始编号。要按特定字段排序，请在排序字段区域输入您想要排序的列号。
- en: Some reports can replace IP addresses with hostnames, but, by default, FlowViewer
    resolves names. To make FlowViewer show only IP addresses, change Resolve Addresses
    to **N**. Similarly, FlowViewer by default displays large octet counts as kilobytes,
    megabytes, or gigabytes instead of raw counts of millions or billions of bytes.
    To see raw byte counts, set Oct. Conv to **N**. (Displaying results as kilobytes,
    megabytes, or gigabytes won't affect sorting; FlowViewer is smart enough to sort
    different units correctly.)
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 一些报告可以将IP地址替换为主机名，但默认情况下，FlowViewer会解析名称。要使FlowViewer只显示IP地址，请将解析地址更改为**N**。同样，FlowViewer默认将大字节数显示为千字节、兆字节或吉字节，而不是数百万或数十亿字节的原始计数。要查看原始字节数，请将字节转换设置为**N**。（以千字节、兆字节或吉字节显示结果不会影响排序；FlowViewer足够智能，可以正确地对不同单位进行排序。）
- en: If your sensors sample traffic, you know that the traffic levels shown in your
    reports are only a fraction of your real traffic. FlowViewer will multiply its
    results by the number you enter in Sampling Multip to approximate your real-world
    traffic.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的传感器采样流量，你知道你报告中显示的流量水平只是你实际流量的一个小部分。FlowViewer 会将其结果乘以你在采样倍数中输入的数字，以近似你的真实世界流量。
- en: Pie Charts
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 饼图
- en: FlowViewer's statistical reports can generate pie charts of their results, but
    pie charts are not useful for FlowViewer reports; they're like making a pie chart
    of the phone book. For statistical reports, you can choose to include an "other"
    catchall category in your graph. Try both ways to see which generates the most
    useful graph in your environment.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 的统计报告可以生成结果饼图，但饼图对于 FlowViewer 报告来说并不实用；它们就像制作电话簿的饼图。对于统计报告，你可以选择在你的图表中包含一个“其他”的通用类别。尝试两种方法，看看哪种在你的环境中生成最有用的图表。
- en: Cutoffs
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 截止值
- en: If you have a busy router, even a well-filtered report might include hundreds
    of thousands of flows. In such case, cutoffs prove useful because they tell FlowViewer
    when to stop printing results. You can cut off reports either by the number of
    lines of output or by the number of octets.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个繁忙的路由器，即使是经过良好过滤的报告也可能包含数十万个流量。在这种情况下，截止值非常有用，因为它们告诉 FlowViewer 何时停止打印结果。你可以通过输出行数或字节数来截断报告。
- en: If you really want to have all that data, consider running the report from the
    command line and saving the results to a file for later analysis.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你真的想拥有所有这些数据，考虑从命令行运行报告并将结果保存到文件以供以后分析。
- en: Printed Reports
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 打印报告
- en: FlowViewer's printed reports are a web interface of `flow-print`. [Table 7-1](ch07s05.html#printed_reports_and_flow-print_formats
    "Table 7-1. Printed Reports and flow-print Formats") maps FlowViewer's printed
    reports to `flow-print` formats. [Chapter 3](ch03.html "Chapter 3. VIEWING FLOWS")
    covers the various print formats in detail.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 的打印报告是 `flow-print` 的网络界面。[表 7-1](ch07s05.html#printed_reports_and_flow-print_formats
    "表 7-1. 打印报告和 flow-print 格式") 将 FlowViewer 的打印报告映射到 `flow-print` 格式。[第 3 章](ch03.html
    "第 3 章. 查看流量") 详细介绍了各种打印格式。
- en: Table 7-1. Printed Reports and flow-print Formats
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 表 7-1. 打印报告和 flow-print 格式
- en: '| Printed Report | flow-print Format |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| 打印报告 | flow-print 格式 |'
- en: '| --- | --- |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Flow Times | `-f 1` |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| 流量时间 | `-f 1` |'
- en: '| AS Numbers | `-f 4` |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| AS 号码 | `-f 4` |'
- en: '| 132 Columns | `-f 5` |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| 132 列 | `-f 5` |'
- en: '| 1 Line with Tags | `-f 9` |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| 带标签的 1 行 | `-f 9` |'
- en: '| AS Aggregation | `-f 10` |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '| AS 聚合 | `-f 10` |'
- en: '| Protocol Port Aggregation | `-f 11` |'
  id: totrans-131
  prefs: []
  type: TYPE_TB
  zh: '| 协议端口聚合 | `-f 11` |'
- en: '| Source Prefix Aggregation | `-f 12` |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '| 源前缀聚合 | `-f 12` |'
- en: '| Destination Prefix Aggregation | `-f 13` |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| 目的端口前缀聚合 | `-f 13` |'
- en: '| Prefix Aggregation | `-f 14` |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| 前缀聚合 | `-f 14` |'
- en: '| Full (Catalyst) | `-f 24` |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| 完整（Catalyst） | `-f 24` |'
- en: Note that not all reports will produce output. For example, if your flow data
    does not include BGP information and you run a BGP-based report, you'll get an
    empty report.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，并非所有报告都会产生输出。例如，如果你的流量数据不包含 BGP 信息，而你运行了一个基于 BGP 的报告，你将得到一个空报告。
- en: Statistics Reports
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 统计报告
- en: FlowViewer's statistics reports are based on `flow-stat`, the predecessor to
    `flow-report`. `flow-stat` is much less flexible than `flow-report`, but some
    of its reports are more suitable for a web application. Most `flow-stat` analyses
    are available as subsets of `flow-report` output formats, as listed in [Table 7-2](ch07s05.html#flowviewer_statistics_reports_and_corres
    "Table 7-2. FlowViewer Statistics Reports and Corresponding flow-reports").
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: FlowViewer 的统计报告基于 `flow-stat`，它是 `flow-report` 的前身。`flow-stat` 相比 `flow-report`
    要少很多灵活性，但其中一些报告更适合用于网络应用。大多数 `flow-stat` 分析都可以作为 `flow-report` 输出格式的子集使用，具体请参见
    [表 7-2](ch07s05.html#flowviewer_statistics_reports_and_corres "表 7-2. FlowViewer
    统计报告和相应的 flow-reports")。
- en: Table 7-2. FlowViewer Statistics Reports and Corresponding flow-reports
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 表 7-2. FlowViewer 统计报告和相应的 flow-reports
- en: '| Statistics Report | flow-report |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| 统计报告 | flow-report |'
- en: '| --- | --- |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Summary | summary (default) |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| 摘要 | summary (默认) |'
- en: '| UDP/TCP Destination Port | ip-destination-port |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| UDP/TCP 目的端口 | ip-destination-port |'
- en: '| UDP/TCP Source Port | ip-source-port |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| UDP/TCP 源端口 | ip-source-port |'
- en: '| UDP/TCP Port | ip-port |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '| UDP/TCP 端口 | ip-port |'
- en: '| Destination IP | ip-destination-address |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '| 目的 IP | ip-destination-address |'
- en: '| Source IP | ip-source-address |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| 源 IP | ip-source-address |'
- en: '| Source/Destination IP | ip-source/destination-address |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| 源/目的 IP | ip-source/destination-address |'
- en: '| Source or Destination IP | ip-address |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| 源或目的 IP | ip-address |'
- en: '| IP Protocol | ip-protocol |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| IP 协议 | ip-protocol |'
- en: '| Input Interface | input-interface |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| 输入接口 | input-interface |'
- en: '| Output Interface | output-interface |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| 输出接口 | output-interface |'
- en: '| Input/Output Interface | input/output-interface |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 输入/输出接口 | input/output-interface |'
- en: '| Source AS | source-as |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 源 AS | source-as |'
- en: '| Destination AS | destination-as |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 目的 AS | destination-as |'
- en: '| Source/Destination AS | source/destination-as |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 源/目的 AS | source/destination-as |'
- en: '| IP ToS | ip-tos |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| IP ToS | ip-tos |'
- en: '| Source Prefix | like ip-source-address with ip-source-address-format set
    to prefix-len |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| 源地址前缀 | 类似于 ip-source-address，其中 ip-source-address-format 设置为 prefix-len
    |'
- en: '| Destination Prefix | like ip-destination-address with ip-destination-address-format
    set to prefix-len |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| 目的地址前缀 | 类似于 ip-destination-address，其中 ip-destination-address-format 设置为
    prefix-len |'
- en: '| Source/Destination Prefix | like ip-source/destination-address with both
    ip-source-address-format and ip-destination-address-format set to prefix-len |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| 源/目的地址前缀 | 类似于 ip-source/destination-address，其中 ip-source-address-format
    和 ip-destination-address-format 都设置为 prefix-len |'
- en: '| Exporter IP | ip-exporter-address |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| 导出器 IP | ip-exporter-address |'
- en: Note
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you need a report not offered here, use `flow-report` instead.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要这里没有提供的报告，请使用 `flow-report`。
- en: FlowGrapher
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FlowGrapher
- en: FlowGrapher creates graphs of arbitrary flow data. Select the FlowGrapher text
    from the logo at the top of the FlowViewer page to get to FlowGrapher.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: FlowGrapher 创建任意流数据的图表。从 FlowViewer 页面顶部的标志中选择 FlowGrapher 文本，即可进入 FlowGrapher。
- en: FlowGrapher Settings
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlowGrapher 设置
- en: The top part of the FlowGrapher page lets you define packet filters as narrowly
    as necessary. FlowGrapher filters are identical to the FlowViewer filter definitions
    listed in [Figure 7-1](ch07s05.html#default_flowviewer_interface "Figure 7-1. Default
    FlowViewer interface"), so I won't over them again, but the bottom of the FlowGrapher
    page offers new graphing options, as shown in [Figure 7-2](ch07s06.html#flowgrapher_options
    "Figure 7-2. FlowGrapher options").
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: FlowGrapher 页面的上半部分允许您根据需要定义数据包过滤器。FlowGrapher 过滤器与在 [图 7-1](ch07s05.html#default_flowviewer_interface
    "图 7-1. 默认 FlowViewer 接口") 中列出的 FlowViewer 过滤器定义相同，因此我不会再次详细说明，但 FlowGrapher 页面的底部提供了新的图形选项，如图
    [图 7-2](ch07s06.html#flowgrapher_options "图 7-2. FlowGrapher 选项") 所示。
- en: '![FlowGrapher options](httpatomoreillycomsourcenostarchimages651592.png.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![FlowGrapher 选项](httpatomoreillycomsourcenostarchimages651592.png.jpg)'
- en: Figure 7-2. FlowGrapher options
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-2. FlowGrapher 选项
- en: Include Flow if, Resolve Addresses, and Sampling Multiplier work the same way
    as the equivalent fields in FlowViewer. The options unique to FlowGrapher—Detail
    Lines, Graph Width, and Sample Time—determine how your graph is charted, its appearance,
    and how any related data is presented.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 如果包含流、解析地址和采样乘数与 FlowViewer 中的等效字段工作方式相同。FlowGrapher 独有的选项——详细行、图宽和样本时间——决定了您的图表如何绘制、其外观以及如何呈现任何相关数据。
- en: Detail Lines
  id: totrans-171
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 详细行
- en: FlowGrapher prints the first few lines of `flow-print` output for the selected
    flow files beneath the graph. This list lets you verify that the graph includes
    the flows you think should be included by your filter.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: FlowGrapher 在图表下方打印所选流文件的 `flow-print` 输出的前几行。此列表让您验证图表是否包含您认为应该包含的流。
- en: Graph Width
  id: totrans-173
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 图宽
- en: The default FlowGrapher image is 600 pixels wide, but graphs that cover more
    than a couple of hours must be wider in order to show necessary detail. The Graph
    Width setting multiplies the width of a graph by the selected number. For example,
    choosing **3** creates a graph 1,800 pixels wide.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的 FlowGrapher 图像宽度为 600 像素，但覆盖超过几个小时的数据的图表必须更宽，以便显示必要的细节。图宽设置将图表宽度乘以所选的数字。例如，选择
    **3** 将创建一个宽度为 1,800 像素的图表。
- en: Sample Time
  id: totrans-175
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 样本时间
- en: FlowGrapher computes bandwidth in "buckets" of time in order to smooth the data
    and present a more realistic graph. (You'll see why this is important in [Chapter 8](ch08.html
    "Chapter 8. AD HOC FLOW VISUALIZATION").) The default bucket size of five seconds
    is reasonable for almost all environments. A larger bucket size will decrease
    the size of bandwidth spikes and might be more realistic if most of your traffic
    consists of long-lived flows.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: FlowGrapher 通过时间“桶”来计算带宽，以平滑数据并呈现更真实的图表。（您将在 [第 8 章](ch08.html "第 8 章. AD HOC
    流可视化") 中看到为什么这很重要。）默认的桶大小为五秒，对于几乎所有环境来说都是合理的。更大的桶大小将减少带宽峰值的大小，如果您的流量大部分由长时间存在的流组成，这可能更真实。
- en: Graph Type
  id: totrans-177
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 图形类型
- en: You can choose either Bits/second (the default), Flows/second, or Packet/second
    graphs. Most of the time you'll want Bits/second, but if your environment has
    large numbers of small packets, you might find the Packets/second graph useful.
    Flows/second is mostly useful to determine whether you have more or less activity
    than usual.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以选择每秒比特数（默认）、每秒流数或每秒数据包数图表。大多数情况下，您会想要每秒比特数，但如果您的环境中有很多小数据包，您可能会发现每秒数据包数图表很有用。每秒流数主要用于确定您是否有比平时更多的或更少的活动。
- en: FlowGrapher Output
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlowGrapher 输出
- en: '[Figure 7-3](ch07s06.html#sample_traffic_graph "Figure 7-3. Sample traffic
    graph") shows a traffic graph for my server, without the logo or the sample `flow-print`
    output.'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-3](ch07s06.html#sample_traffic_graph "图 7-3. 样本流量图") 展示了我的服务器的流量图，没有标志或样本
    `flow-print` 输出。'
- en: '![Sample traffic graph](httpatomoreillycomsourcenostarchimages651594.png.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![样本流量图](httpatomoreillycomsourcenostarchimages651594.png.jpg)'
- en: Figure 7-3. Sample traffic graph
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-3. 样本流量图
- en: Notice how FlowGrapher prints the selected filter criteria above the graph.
    This information lets you easily re-create the graph with slightly different conditions
    and reminds you what you tried to graph when you return to an image later.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 注意 FlowGrapher 如何在图表上方打印所选的过滤器标准。这些信息让您能够轻松地以略有不同的条件重新创建图表，并在您稍后返回图像时提醒您尝试绘制的内容。
- en: Note
  id: totrans-184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To create a traffic graph that's beyond FlowGrapher's capacity, see [Chapter 8](ch08.html
    "Chapter 8. AD HOC FLOW VISUALIZATION").
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建超出 FlowGrapher 容量的流量图，请参阅[第 8 章](ch08.html "第 8 章. 临时流量可视化")。
- en: FlowTracker
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FlowTracker
- en: FlowTracker generates RRD-based graphs of flow data on an ongoing basis, much
    like FlowScan and CUFlow. Each graph you create is called a *tracker*. One tracker
    graphs either inbound or outbound traffic, but not both. FlowTracker is much more
    flexible than FlowScan, but that flexibility also makes it unsuitable for customers
    or management to access directly.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: FlowTracker 不断生成基于 RRD 的流量数据图表，类似于 FlowScan 和 CUFlow。您创建的每个图表都称为 *跟踪器*。一个跟踪器可以绘制入站或出站流量，但不能同时绘制两者。FlowTracker
    比 FlowScan 更灵活，但这种灵活性也使其不适合客户或管理层直接访问。
- en: FlowTracker Processes
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlowTracker 进程
- en: Like FlowScan, FlowTracker creates RRD files from `flow-capture` files as they're
    created. Rather than moving flow files, however, FlowTracker uses two processes
    to watch the `flow-capture` directories for changes and to read each new flow
    file as it's closed. If these processes stop, FlowTracker will not update RRDs
    for new flows or create new graphs.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 与 FlowScan 类似，FlowTracker 在创建 `flow-capture` 文件时创建 RRD 文件。然而，FlowTracker 不是移动流文件，而是使用两个进程来监视
    `flow-capture` 目录的变化，并在每个新流文件关闭时读取它。如果这些进程停止，FlowTracker 将不会更新新流的 RRD，也不会创建新的图表。
- en: 'Start the `FlowTracker_Collector` and `FlowTracker_Grapher` processes when
    the system boots. The included `flowcap` script might work for your operating
    system, but if not you can start them as shown here:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在系统启动时启动 `FlowTracker_Collector` 和 `FlowTracker_Grapher` 进程。包含的 `flowcap` 脚本可能适用于您的操作系统，如果不适用，您可以按照以下方式启动它们：
- en: '[PRE11]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Start these processes after the network is initialized. Have your network management
    system monitor these processes and either send an alarm or automatically restart
    them if they fail.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络初始化后开始这些进程。让您的网络管理系统监控这些进程，如果它们失败，则发送警报或自动重启它们。
- en: FlowTracker Settings
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlowTracker 设置
- en: FlowTracker offers the same filtering options as FlowViewer and FlowGrapher,
    without the option to select the time you want to cover. (FlowTracker continuously
    processes flow data, so time-based filtering doesn't make sense.) FlowTracker
    creates graphs based on the filters you define, just like FlowGrapher and FlowViewer.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: FlowTracker 提供与 FlowViewer 和 FlowGrapher 相同的过滤选项，但没有选择您想要覆盖的时间的选项。（由于 FlowTracker
    持续处理流数据，基于时间的过滤没有意义。）FlowTracker 根据您定义的过滤器创建图表，就像 FlowGrapher 和 FlowViewer 一样。
- en: '[Figure 7-4](ch07s07.html#flowtracker_options "Figure 7-4. FlowTracker options")
    shows the FlowTracker-specific configuration options.'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 7-4](ch07s07.html#flowtracker_options "图 7-4. FlowTracker 选项") 展示了 FlowTracker
    特定的配置选项。'
- en: '![FlowTracker options](httpatomoreillycomsourcenostarchimages651596.png.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![FlowTracker选项](httpatomoreillycomsourcenostarchimages651596.png.jpg)'
- en: Figure 7-4. FlowTracker options
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7-4. FlowTracker 选项
- en: Once you've entered your desired settings, click **Establish Tracking** to start
    your tracker.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您设置了所需的参数，点击**建立跟踪**以启动您的跟踪器。
- en: Tracking Set Label
  id: totrans-199
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 跟踪集标签
- en: Tracking Set Label is the tracker's name. You should name trackers by the host,
    network, or traffic name and by the direction the traffic is going, such as "Server
    1 Web traffic inbound" or "Server 2 outbound." The text you enter here will appear
    as a link to the actual tracker on the main FlowTracker page.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 跟踪集标签是跟踪器的名称。你应该根据主机、网络或流量名称以及流量流动的方向来命名跟踪器，例如“服务器1 Web流量入站”或“服务器2出站”。你在此处输入的文本将作为链接出现在主FlowTracker页面上，指向实际的跟踪器。
- en: Tracking Type
  id: totrans-201
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 跟踪类型
- en: FlowTracker can aggregate individual trackers into a "group tracker." I'll cover
    group trackers later; for now, all of your trackers should be Individual.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: FlowTracker可以将单个跟踪器聚合为“分组跟踪器”。我将在后面介绍分组跟踪器；现在，所有跟踪器都应该是个体。
- en: Sampling Multiplier
  id: totrans-203
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 采样乘数
- en: Like other parts of FlowViewer, FlowTracker can apply a sampling multiplier
    to approximate correct traffic levels in your graph.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 与FlowViewer的其他部分一样，FlowTracker可以对图表应用采样乘数来近似正确的流量水平。
- en: Alert Threshold
  id: totrans-205
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 警报阈值
- en: As a continuously running process, FlowTracker can monitor total traffic levels
    and send an alarm if traffic exceeds a certain level. To set an alarm at a number
    of bits per second, enter that number here. (Note that your server must have a
    properly configured mail system to send alarms.)
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 作为持续运行的过程，FlowTracker可以监控总流量水平，并在流量超过一定水平时发送警报。在此处输入每秒比特数来设置警报。请注意，你的服务器必须有一个正确配置的邮件系统来发送警报。
- en: Alert Frequency
  id: totrans-207
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 警报频率
- en: Generating an alarm every time the traffic exceeds your critical level can be
    annoying if your traffic load bounces back and forth across that level. Use Alert
    Frequency to tell FlowTracker to send an alarm each time traffic exceeds the critical
    limit, only once per day, or to disable emailed alerts entirely.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 每当流量超过你的临界水平时，如果流量负载在该水平上下波动，频繁地发出警报可能会令人烦恼。使用警报频率来告诉FlowTracker每次流量超过临界限制时发送警报，每天只发送一次，或者完全禁用电子邮件警报。
- en: Alert Destination
  id: totrans-209
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 警报目的地
- en: This is the email address that receives alerts.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 这是接收警报的电子邮件地址。
- en: General Comment
  id: totrans-211
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 一般评论
- en: Any notes or comments here will appear on the finished graph.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 此处任何备注或评论都将出现在完成的图表上。
- en: Viewing Trackers
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 查看跟踪器
- en: Trackers that you've already created will appear at the bottom of the FlowTracker
    page. [Figure 7-5](ch07s07.html#flowtracker_individual_trackings "Figure 7-5. FlowTracker
    individual trackings") shows four trackers, inbound and outbound for two machines.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经创建的跟踪器将出现在FlowTracker页面的底部。[图7-5](ch07s07.html#flowtracker_individual_trackings
    "图7-5. FlowTracker个体跟踪")显示了两个机器的入站和出站跟踪器。
- en: '![FlowTracker individual trackings](httpatomoreillycomsourcenostarchimages651598.png.jpg)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![FlowTracker个体跟踪](httpatomoreillycomsourcenostarchimages651598.png.jpg)'
- en: Figure 7-5. FlowTracker individual trackings
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-5. FlowTracker个体跟踪
- en: To view a tracker, click its name. Trackers include views of the last 24 hours,
    7 days, 4 weeks, 12 months, and 3 years. Each graph looks much like FlowGrapher
    output, so I won't reproduce those graphs here.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看跟踪器，请点击其名称。跟踪器包括过去24小时、7天、4周、12个月和3年的视图。每个图表看起来与FlowGrapher输出非常相似，所以这里不会重现那些图表。
- en: You can edit trackers to update filters or correct mistakes. To do so, click
    the **Revise** link next to a tracker in order to populate a FlowTracker page
    with the tracker's original settings, and then make the desired changes. You can
    also add a note to be displayed on the graphs to show when a tracker was changed.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以编辑跟踪器来更新过滤器或纠正错误。为此，点击跟踪器旁边的**修订**链接，以便在FlowTracker页面上填充跟踪器的原始设置，然后进行所需的更改。你还可以添加一个备注，在图表上显示跟踪器何时被更改。
- en: Archiving a tracker tells FlowTracker to stop processing the current flows for
    this particular tracker, while continuing to update other trackers. It retains
    the archived tracker's configuration and graphs. Archiving lets you retain historical
    information without wasting computing power and lets you easily reactivate the
    tracker if needed.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 存档跟踪器告诉FlowTracker停止处理此特定跟踪器的当前流，同时继续更新其他跟踪器。它保留存档跟踪器的配置和图表。存档让您能够保留历史信息，而不会浪费计算能力，并在需要时轻松重新激活跟踪器。
- en: Finally, you can also entirely remove a tracker by clicking the link. This deletes
    all graphs and the associated databases.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，你也可以通过点击链接完全删除跟踪器。这将删除所有图表和相关数据库。
- en: Group Trackers
  id: totrans-221
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分组跟踪器
- en: FlowTracker lets you combine individual trackers into group trackers to give
    you a unified view of different types of traffic. For example, in [Figure 7-5](ch07s07.html#flowtracker_individual_trackings
    "Figure 7-5. FlowTracker individual trackings") you can see separate inbound and
    outbound trackers for two servers. To view a server's inbound and outbound traffic
    simultaneously, you need to use a group tracker.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: FlowTracker允许您将单个跟踪器组合成组跟踪器，以提供不同类型流量的统一视图。例如，在[图7-5](ch07s07.html#flowtracker_individual_trackings
    "图7-5. FlowTracker单个跟踪")中，您可以看到两个服务器的单独入站和出站跟踪器。要同时查看服务器的入站和出站流量，您需要使用组跟踪器。
- en: To create a group tracker, name the tracker, and select a tracking type of **Group**.
    Next, when you click **Establish Tracking**, FlowTracker will open a separate
    page to define your group tracker, as shown in [Figure 7-6](ch07s07.html#basic_flowtracker_setup
    "Figure 7-6. Basic FlowTracker setup").
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建组跟踪器，请命名跟踪器，并选择**组**类型的跟踪方式。接下来，当您点击**建立跟踪**时，FlowTracker将打开一个单独的页面来定义您的组跟踪器，如图[图7-6](ch07s07.html#basic_flowtracker_setup
    "图7-6. 基本FlowTracker设置")所示。
- en: '![Basic FlowTracker setup](httpatomoreillycomsourcenostarchimages651600.png.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![基本FlowTracker设置](httpatomoreillycomsourcenostarchimages651600.png.jpg)'
- en: Figure 7-6. Basic FlowTracker setup
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-6. 基本FlowTracker设置
- en: The sample graph shown at the top of [Figure 7-6](ch07s07.html#basic_flowtracker_setup
    "Figure 7-6. Basic FlowTracker setup") is not based on actual data but will show
    you how your color choices will look on an actual graph.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '[图7-6](ch07s07.html#basic_flowtracker_setup "图7-6. 基本FlowTracker设置")顶部显示的示例图形不是基于实际数据，但它将展示您的颜色选择在实际图形上的外观。'
- en: Further down in the figure are the critical components. Here you can choose
    individual trackers to include in your group tracker or choose to have the tracker
    appear above or below the x-axis. I try to consistently put inbound trackers above
    the x-axis and outbound trackers below in order to minimize confusion. Switch
    these if you prefer; just pick a standard and stick with it.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图形下方是关键组件。在这里，您可以选择要包含在您的组跟踪器中的单个跟踪器，或者选择跟踪器出现在x轴的上方或下方。我尽量将入站跟踪器放在x轴上方，出站跟踪器放在下方，以减少混淆。如果您更喜欢，可以切换这些设置；只需选择一个标准并坚持下去。
- en: You can assign colors to each tracker in your graph. The Auto choices choose
    colors in the same color family. I recommend using one Auto color for all inbound
    trackers and a different Auto color for all outbound trackers.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以为您的图形中的每个跟踪器分配颜色。自动选项选择同一颜色家族中的颜色。我建议为所有入站跟踪器使用一个自动颜色，并为所有出站跟踪器使用不同的自动颜色。
- en: Once you've added an individual tracker to your group tracker, click **Add this
    Component**. Then, immediately beneath this option, you'll see a list of all the
    individual trackers in this group tracker. For example, [Figure 7-7](ch07s07.html#group_tracker_components
    "Figure 7-7. Group tracker components") displays this group tracker after I've
    added both the inbound and outbound trackers for both individual servers.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您将单个跟踪器添加到您的组跟踪器中，请点击**添加此组件**。然后，立即在此选项下方，您将看到该组跟踪器中所有单个跟踪器的列表。例如，[图7-7](ch07s07.html#group_tracker_components
    "图7-7. 组跟踪器组件")显示了我添加了两个个人服务器的入站和出站跟踪器后的这个组跟踪器。
- en: '![Group tracker components](httpatomoreillycomsourcenostarchimages651602.png.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![组跟踪器组件](httpatomoreillycomsourcenostarchimages651602.png.jpg)'
- en: Figure 7-7. Group tracker components
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 图7-7. 组跟踪器组件
- en: Both the torch and bewilderbeast servers will now appear in this one tracker.
    The inbound trackers will appear above the x-axis, as shown by the long horizontal
    line. The color name appears in the chosen color (which doesn't appear in this
    black-and-white figure, of course). If you don't like the color, change it with
    the New Color drop-down.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 火炬和bewilderbeast服务器现在将出现在这个跟踪器中。入站跟踪器将出现在x轴上方，如长水平线所示。颜色名称出现在所选颜色中（当然，在这个黑白图形中不会出现）。如果您不喜欢这个颜色，可以使用**新颜色**下拉菜单进行更改。
- en: Use the Move drop-down on the far right to rearrange the server order, and then
    click **Adjust the Group** to apply your changes. I recommend having servers in
    the same order on both the inbound and outbound sides of the tracker.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 使用最右侧的**移动**下拉菜单重新排列服务器顺序，然后点击**调整组**以应用您的更改。我建议在跟踪器的入站和出站两侧保持服务器顺序一致。
- en: Once you've configured your group tracker, click **Done** at the bottom of the
    page to create the tracker. You can revise, archive, and remove your group tracker
    as with an individual tracker.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您配置了您的组跟踪器，请点击页面底部的**完成**以创建跟踪器。您可以对您的组跟踪器进行修改、存档和删除，就像对个人跟踪器一样。
- en: ADDITIONAL RRD SOFTWARE
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: ADDITIONAL RRD SOFTWARE
- en: Different tools have different presentations and focus. If you find that FlowTracker
    isn't quite right for your long-term tracking needs, take a look at Webview Netflow
    Reporter, at [http://wvnetflow.sourceforge.net/](http://wvnetflow.sourceforge.net/).
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 不同的工具有不同的展示方式和侧重点。如果你觉得FlowTracker并不完全适合你的长期跟踪需求，可以看看Webview Netflow Reporter，网址为[http://wvnetflow.sourceforge.net/](http://wvnetflow.sourceforge.net/)。
- en: Interface Names and FlowViewer
  id: totrans-237
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 接口名称和FlowViewer
- en: Flows manage interfaces by index number, but humans use the interface name.
    If you tell FlowViewer the name associated with each interface number, it'll offer
    those names as an option in the web interface. If you create the file *NamedInterfaces_Devices*
    in the *FlowViewer* directory, FlowViewer will populate the Interface Names drop-down
    in the filter section of all three tools with information from the file.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 流量通过索引号管理接口，但人类使用接口名称。如果你告诉FlowViewer与每个接口号关联的名称，它将在Web界面中提供这些名称作为选项。如果你在*FlowViewer*目录中创建名为*NamedInterfaces_Devices*的文件，FlowViewer将使用文件中的信息填充所有三个工具过滤器部分的接口名称下拉菜单。
- en: 'Each line in the *NamedInterfaces_Devices* file contains three entries:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '*NamedInterfaces_Devices*文件中的每一行包含三个条目：'
- en: '[PRE12]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'For example, my main router''s gigabit uplink is at SNMP index 5\. The entry
    for this interface might look like this:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我主路由器的千兆上行链路位于SNMP索引号5。这个接口的条目可能看起来像这样：
- en: '[PRE13]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Entering interface information for all your exporters into FlowViewer will save
    you trouble in the future and simplify problem solving. Rather than having to
    look up the number for the interface you're interested in, you can just select
    it from the menu.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 将所有导出器的接口信息输入到FlowViewer中，将为你未来的问题解决带来便利并简化问题。你不必查找你感兴趣的接口的编号，只需从菜单中选择即可。
- en: FlowTracker, FlowViewer, and FlowGrapher will let you visualize most common
    situations, but they don't solve everything. In the next chapter, you'll see how
    to graph data when FlowGrapher isn't powerful or flexible enough.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: FlowTracker、FlowViewer和FlowGrapher可以让你可视化大多数常见情况，但它们并不能解决所有问题。在下一章中，你将看到当FlowGrapher不够强大或不够灵活时如何绘制数据。
