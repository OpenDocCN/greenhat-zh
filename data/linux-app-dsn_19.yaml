- en: '![](../images/355-1.jpg)'
  id: totrans-0
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/355-1.jpg)'
- en: '[**A DB - TO - FILE UTILITY**](toc.html#app4)'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '[**数据库到文件实用程序**](toc.html#app4)'
- en: '![](../images/as.jpg)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/as.jpg)'
- en: 'This appendix describes tbl2filed, a daemon that allows you to use SQL to read
    and write values in Linux configuration files as if those values were in a database
    instead of a file. This utility is convenient if you want to use RTA for new daemons
    and want to keep the same database metaphor for reading and writing values into
    traditional, non-RTA configuration files. Topics discussed in this appendix include:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本附录描述了tbl2filed，这是一个守护进程，允许您使用SQL读取和写入Linux配置文件中的值，就像这些值在数据库中而不是文件中一样。如果您想使用RTA为新守护进程，并希望保持相同的数据库隐喻来读取和写入传统、非RTA配置文件中的值，则此实用程序很方便。本附录讨论了以下主题：
- en: Overview
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概述
- en: Table definitions
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表定义
- en: Usage and API
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用法和API
- en: Security notes
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全注意事项
- en: '[**Overview**](toc.html#app4.1)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[**概述**](toc.html#app4.1)'
- en: 'The goal of the tbl2filed daemon is to allow your UI programs to use a PostgreSQL
    library to read or write (SELECT or UPDATE) an RTA table and have an underlying
    system configuration file scanned or modified as part of the SELECT or UPDATE.
    This utility tries to mimic the common tasks of:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: tbl2filed守护进程的目标是允许您的UI程序使用PostgreSQL库读取或写入（SELECT或UPDATE）RTA表，并使底层系统配置文件作为SELECT或UPDATE的一部分进行扫描或修改。此实用程序试图模拟以下常见任务：
- en: Viewing values in a configuration file (SELECT value . . .)
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看配置文件中的值（SELECT value . . .）
- en: Editing the values in a configuration file (UPDATE value . . .)
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑配置文件中的值（UPDATE value . . .）
- en: Atomically writing a file to disk (UPDATE tbl2file SET do_commit . . .)
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 原子性地将文件写入磁盘（UPDATE tbl2file SET do_commit . . .）
- en: Restarting a service if necessary (UPDATE tbl2file SET do_script . . .)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果需要，重新启动服务（UPDATE tbl2file SET do_script . . .）
- en: The tbl2filed daemon allows you to read and write configuration files by using
    PostgreSQL commands on two RTA tables. The first table, tbl2file, describes the
    files managed by the daemon, and the second table, tbl2field, describes the managed
    fields.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: tbl2filed守护进程允许您通过在两个RTA表上使用PostgreSQL命令来读取和写入配置文件。第一个表，tbl2file，描述了由守护进程管理的文件，第二个表，tbl2field，描述了管理的字段。
- en: Figure D-1 illustrates how this utility maps two tables into text fields inside
    of disk files.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 图D-1说明了此实用程序如何将两个表映射到磁盘文件内的文本字段中。
- en: '![](../images/356-1.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/356-1.jpg)'
- en: '*Figure D-1: Use SQL to access data in files.*'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '*图D-1：使用SQL访问文件中的数据。*'
- en: This daemon also lets us put all of the restart scripts for system services
    in a single file and use a single method (a write callback) to invoke them. This
    approach might help security because it allows a non-privileged UI program to
    safely change the system configuration files.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 此守护进程还允许我们将系统服务的所有重启脚本放入一个文件中，并使用单一方法（写入回调）来调用它们。这种方法可能有助于安全性，因为它允许非特权UI程序安全地更改系统配置文件。
- en: '[**Table Definitions**](toc.html#app4.2)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[**表定义**](toc.html#app4.2)'
- en: An example is given later in this appendix, but for that example to make sense,
    you need some understanding of the contents of the two tbl2filed tables. Laddie
    uses tbl2filed to help with the networking configuration, and you may find the
    tables easier to understand by looking at them in a running Laddie system. Boot
    the Laddie CD and follow the tbl2filed link at 192.168.1.11/table_editor/rta/rta_apps.html.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在本附录的后面给出了一个示例，但为了使该示例有意义，您需要对两个tbl2filed表的内容有所了解。Laddie使用tbl2filed来帮助网络配置，您可以通过查看运行中的Laddie系统中的表来更容易地理解这些表。启动Laddie
    CD，并遵循192.168.1.11/table_editor/rta/rta_apps.html上的tbl2filed链接。
- en: '[***The tbl2file Table***](toc.html#app4.3)'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[***tbl2file表***](toc.html#app4.3)'
- en: 'The table of managed file information, tbl2file, has the following columns:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 管理的文件信息表，tbl2file，有以下列：
- en: '![](../images/357-1.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/357-1.jpg)'
- en: The name of the file is the name as seen by the UI. It is also used as part
    of the index into tbl2field table. This can just be shorthand or a mnemonic for
    the file, for example, *resolv.*
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 文件名是用户界面看到的名称。它也用作tbl2field表的索引的一部分。这可以仅仅是文件的简称或助记符，例如，*resolv.*
- en: The path is the full path to the file, including the filename. For example,
    the name field might be *resolv,* while the path might be */etc/resolv. conf.*
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 路径是文件的完整路径，包括文件名。例如，名称字段可能是 *resolv*，而路径可能是 */etc/resolv.conf*。
- en: Writing a 1 to the do_commit flag causes the managed file’s values to be written
    back to the disk file. The file is written to a temporary file first and then
    rename() is called to move the temporary file to the destination file. This mechanism
    helps maintain consistency in the system by trying to make a write of the entire
    file as atomic as possible. A SELECT on do_commit always returns a zero.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 将1写入do_commit标志会导致管理文件的值写回到磁盘文件。首先将文件写入临时文件，然后调用rename()将临时文件移动到目标文件。这种机制通过尽可能使整个文件的写入原子化来帮助维护系统的一致性。对do_commit的SELECT查询始终返回零。
- en: Reading and parsing the values from a file is expensive in terms of time and
    CPU cycles. Since the files won’t change often, we can improve the system’s responsiveness
    by caching the file’s values in the tbl2field table and only rereading the file
    if it has been modified since the last time we read it. The timestamp marks the
    last time we read and parsed the file; time is measured as the number of seconds
    since the last write. When a UI asks for a value, our daemon compares the mtime
    (time of last modification) in the file’s inode to our time stamp, and either
    rescans the file if necessary or returns the values directly from the fields table,
    if the cached values are still valid.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 从文件中读取和解析值在时间和CPU周期上都是昂贵的。由于文件不会经常改变，我们可以通过在tbl2field表中缓存文件的值来提高系统的响应速度，并且只有在文件自上次读取以来被修改时才重新读取文件。时间戳标记了我们上次读取和解析文件的时间；时间是以自上次写入以来的秒数来衡量的。当一个UI请求一个值时，我们的守护进程会将文件inode中的mtime（最后修改时间）与我们的时间戳进行比较，如果需要，则重新扫描文件，或者如果缓存的值仍然有效，则直接从字段表中返回值。
- en: Setting do_script to 1 starts the script /usr/local/tbl2filed/tbl2script.sh.
    (The script location is set in the tbl2filed Makefile.) The script_parms field
    has a set of space-separated parameters that are passed to the script. The parameters
    are not passed on the command line; rather, they are passed in on standard input
    and parsed into parameters using a cut command. This script is spawned and forgotten—that
    is, we ignore any return value from it. The script is only run by an explicit
    write of 1 to the do_script column, and the column is only used for its write
    callback. A SELECT on this column will always return a zero. Laddie uses this
    script, for example, to restart networking when the user changes the appliance’s
    IP address.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 将do_script设置为1将启动脚本/usr/local/tbl2filed/tbl2script.sh。（脚本位置在tbl2filed Makefile中设置。）script_parms字段包含一系列用空格分隔的参数，这些参数传递给脚本。参数不是通过命令行传递的；相反，它们通过标准输入传递，并使用cut命令解析为参数。此脚本被启动并遗忘——也就是说，我们忽略从它那里返回的任何返回值。此脚本仅在显式写入1到do_script列时运行，并且该列仅用于其写入回调。对该列的SELECT查询始终返回零。Laddie使用此脚本，例如，在用户更改设备的IP地址时重新启动网络。
- en: '[***The tbl2field Table***](toc.html#app4.4)'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[***The tbl2field Table***](toc.html#app4.4)'
- en: 'The tbl2field table that holds the values for the individual fields and has
    the following columns:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 存储单个字段值的tbl2field表具有以下列：
- en: '![](../images/358-1.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/358-1.jpg)'
- en: The name is the name of the file and must match the name column in the tbl2file
    table.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 名称是文件的名称，必须与tbl2file表中的名称列匹配。
- en: The field is the name of the field as seen by all of the UI programs. This is
    always used in a WHERE clause to identify the exact field to read and update.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 字段是所有UI程序看到的字段名称。这始终用于WHERE子句中，以标识要读取和更新的确切字段。
- en: 'The pattern is a regular expression that, in combination with the skip count,
    uniquely identifies the field in the file. The pattern should include exactly
    one set of parentheses to extract the value from the text of the line. For example,
    to get the first DNS name server from the resolv.conf file, we might use the following
    regular expression:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 模式是一个正则表达式，与跳过计数结合使用，可以唯一地标识文件中的字段。模式应包含恰好一组括号，以从文本行中提取值。例如，要从resolv.conf文件中获取第一个DNS名称服务器，我们可能使用以下正则表达式：
- en: ^nameserver[ \t]+([0-9\.]+)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ^nameserver[ \t]+([0-9\.]+)
- en: The regerr field is nonzero if the pattern can not be parsed as a regular expression.
    It should be necessary to examine regerr only during development.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果模式不能解析为正则表达式，则regerr字段不为零。在开发期间，通常只需要检查regerr。
- en: The skip column tells the daemon how many of the above patterns to skip before
    selecting a line as the source of the value. For example, we’d use a skip value
    of 1 to read the second DNS nameserver from resolv.conf. This would skip over
    one nameserver and read the second one.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 跳过列告诉守护进程在将行作为值的来源选择之前要跳过上述模式中的多少个。例如，我们会使用跳过值为1来从resolv.conf中读取第二个DNS名称服务器。这将跳过一个名称服务器并读取第二个。
- en: The format field is used to reproduce the line of configuration data in the
    target file. We could get this from the regular expression, but having a printf
    format string is a lot easier. If this column is left blank, the field is considered
    a read-only field. Any of the read-only values in /proc or /sys should have a
    blank format field. You can see a good example of a read-only value by looking
    at the uptime field in tbl2field table. For a nameserver line in resolv.conf,
    the format string would be nameserver %s. There’s no need for a \n in the format
    string, since it is added automatically by the print statement.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 格式字段用于在目标文件中重现配置数据行。我们可以从正则表达式获取这个值，但使用printf格式字符串要容易得多。如果这个字段留空，则该字段被视为只读字段。/proc或/sys中的任何只读值都应该有一个空白的格式字段。你可以通过查看tbl2field表中的uptime字段来查看一个只读值的良好示例。对于resolv.conf中的名称服务器行，格式字符串将是nameserver
    %s。格式字符串中不需要\n，因为它会被print语句自动添加。
- en: The value is the current value of the field as a string. Doing a SELECT on this
    column will cause the file to be read and parsed if necessary (see timestamp in
    tbl2file above). If the cached value is still valid, the value is taken directly
    from the table. A write on this column saves the value in the table but does not
    actually write the value to the file; writing a 1 to do_commit does that.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 值是该字段当前值的字符串表示。对这一列进行SELECT操作将导致如果需要（参见tbl2file上面的时间戳）读取并解析文件。如果缓存的值仍然有效，则直接从表中获取值。对这一列的写入将保存表中的值，但不会实际写入文件；将do_commit设置为1来执行写入操作。
- en: '[**A tbl2filed Example**](toc.html#app4.5)'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '[**一个tbl2filed示例**](toc.html#app4.5)'
- en: 'Let’s look at a complete example by continuing with the nameserver configuration
    for Laddie. The /etc/resolv.conf file on a running Laddie system looks like this:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过继续Laddie的名称服务器配置来查看一个完整的示例。运行中的Laddie系统上的/etc/resolv.conf文件看起来如下所示：
- en: nameserver 204.117.214.10
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: nameserver 204.117.214.10
- en: nameserver 199.2.252.10
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: nameserver 199.2.252.10
- en: nameserver 65.173.40.10
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: nameserver 65.173.40.10
- en: 'Our goal is to be able to read the first DNS nameserver with a SELECT statement
    as follows:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目标是能够使用以下SELECT语句读取第一个DNS名称服务器：
- en: psql -h localhost -p 8885
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: psql -h localhost -p 8885
- en: SELECT * FROM tbl2field where name = "nameserver_1";
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: SELECT * FROM tbl2field where name = "nameserver_1";
- en: \q
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: \q
- en: 'Similarly, to modify the second DNS server, Laddie uses the following UPDATE
    statement:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，为了修改第二个DNS服务器，Laddie使用以下UPDATE语句：
- en: '![](../images/359-1.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/359-1.jpg)'
- en: You can verify the above by booting the Laddie CD, exiting from the frame-buffer
    menu, logging in as root, and executing the commands given above. Be sure to verify
    that the file has been modified after the UPDATE command.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过启动Laddie CD，退出frame-buffer菜单，以root身份登录，并执行上述命令来验证上述内容。务必验证UPDATE命令后文件是否已被修改。
- en: 'Now let’s look at the tbl2file and tbl2field configuration that gives us the
    ability to read and write the nameserver IP addresses as if they were in a PostgreSQL
    database. We’ll start by listing the file we want to manage in the tbl2file table:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看tbl2file和tbl2field配置，它使我们能够像在PostgreSQL数据库中一样读取和写入名称服务器IP地址。我们首先在tbl2file表中列出我们想要管理的文件：
- en: UPDATE tbl2file SET name=resolv, path=/etc/resolv.conf, script_parms="" LIMIT
    1 OFFSET 0
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: UPDATE tbl2file SET name=resolv, path=/etc/resolv.conf, script_parms="" LIMIT
    1 OFFSET 0
- en: We don’t need to run a script after editing the resolv.conf file, so we can
    leave script_parms blank. You can use either full or relative path names, but
    as a security precaution, it is a good idea to use the full path name.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不需要在编辑完resolv.conf文件后运行脚本，因此我们可以留script_parms为空。你可以使用完整路径或相对路径名称，但作为一个安全预防措施，使用完整路径名称是个好主意。
- en: 'In this example, we want to manage the three DNS nameservers. The SQL for this
    is taken from tbl2field.sql (perhaps use the full path, i.e., /opt/laddie/tbl2filed/.
    . .) and is as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们想要管理三个DNS名称服务器。这个SQL语句是从tbl2field.sql文件中获取的（可能需要使用完整路径，例如，/opt/laddie/tbl2filed/...）如下所示：
- en: '![](../images/359-2.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/359-2.jpg)'
- en: The pattern recognizes the line with the parameter, and the single set of parentheses
    in the pattern extracts the actual field value. In the above examples, the value
    of a nameserver field must have only the digits zero through nine and/or decimal
    points. The parentheses are not part of the recognition—they are only used to
    extract the field value.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 模式识别带有参数的行，并且模式中的单个括号对提取实际的字段值。在上面的示例中，命名服务器字段的值必须只包含数字零到九和/或小数点。括号不是识别的一部分——它们仅用于提取字段值。
- en: One nice feature of the tbl2filed daemon is that when you write a value to a
    field, the daemon uses the format string to build a copy of what the new configuration
    line will look like. Then it runs the pattern against the new line and rejects
    the update if the pattern doesn’t recognize the new line. In this example, an
    update for a nameserver of 11.22.33.44 would succeed, since it contains the required
    digits and decimal points; however a nameserver update of Bob's fun house would
    fail, since it does not contain the required digits and decimals.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: tbl2filed守护进程的一个优点是，当您向字段写入值时，守护进程使用格式字符串构建新配置行的副本。然后它对新行运行模式，如果模式不识别新行，则拒绝更新。在这个例子中，对11.22.33.44的命名服务器更新将成功，因为它包含所需的数字和小数点；然而，Bob的娱乐屋的命名服务器更新将失败，因为它不包含所需的数字和小数点。
- en: The nameserver example also illustrates the use of the skip column. The primary
    nameserver has skip set to zero, meaning that we use the first line with a matching
    pattern. The secondary nameserver is specified with skip set to 1, meaning we
    skip one matching line and use the second matching line.¹
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 命名服务器示例也说明了跳过列的使用。主命名服务器将跳过设置为零，这意味着我们使用第一个匹配模式的行。辅助命名服务器指定跳过设置为1，意味着我们跳过一条匹配行并使用第二条匹配行。¹
- en: '[**Security Notes**](toc.html#app4.6)'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '[**安全注意事项**](toc.html#app4.6)'
- en: Depending on how you use it, this daemon can either enhance or hurt your system
    security. At first glance, having a daemon that runs with root privileges and
    accepts database connections seems like a bad idea. On the other hand, this might
    allow you to improve security by running only *one* daemon as root and running
    each of the UI programs as a non-root user. This way, if an attacker breaks into
    one of your UI programs, he or she only gains the privileges of that non-root
    user. Compare this to most Linux appliances, in which a UI needs to run as root
    in order to make system changes.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您如何使用它，这个守护进程可能会增强或损害您的系统安全性。乍一看，拥有一个以root权限运行并接受数据库连接的守护进程似乎是个坏主意。另一方面，这可能会让您通过只运行一个作为root运行的守护进程并作为非root用户运行每个UI程序来提高安全性。这样，如果攻击者入侵了您的UI程序之一，他或她只能获得该非root用户的权限。与大多数需要以root身份运行以进行系统更改的Linux设备相比，这是一个对比。
- en: The daemon reads tbl2file.sql and tbl2field.sql when it starts, and then marks
    all of its configuration columns as read-only. Not allowing updates to the managed
    files or script parameters helps security, but it also means that you cannot update
    any part of the configuration after the program starts. You must edit the tbl2file.sql
    and tbl2field.sql files directly before starting the tbl2filed daemon. If you
    must mark any column as read-write to make development easier, be sure to change
    it back to read-only before you ship your product. Also, be sure to protect the
    write privileges on the directory and files with the daemon’s initial configuration.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 守护进程在启动时读取tbl2file.sql和tbl2field.sql，然后将其所有配置列标记为只读。不允许更新受管理的文件或脚本参数有助于提高安全性，但也意味着您在程序启动后无法更新配置的任何部分。您必须在启动tbl2filed守护进程之前直接编辑tbl2file.sql和tbl2field.sql文件。如果您必须将任何列标记为读写以简化开发，请确保在发布产品之前将其改回只读。此外，请确保保护目录和文件的写权限，以防止守护进程的初始配置被篡改。
- en: __________________
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: __________________
- en: ¹ The resolv.conf file is different from most Linux configuration files in that
    switching to or from DHCP as the boot configuration protocol can completely destroy
    any values you’ve previously written into it. The simple solution to this problem
    is to keep a template file and copy it to /etc/resolv.conf when necessary.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ¹ resolv.conf文件与大多数Linux配置文件不同，因为将引导配置协议从DHCP切换到或从DHCP切换，可以完全破坏您之前写入的所有值。解决这个问题的一个简单方法是在必要时将模板文件复制到/etc/resolv.conf。
