- en: Chapter 27\. SAMBA 3.0.28
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第27章\. SAMBA 3.0.28
- en: '[HTTP://WWW.SAMBA.ORG](HTTP://WWW.SAMBA.ORG)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[Samba 网站](HTTP://WWW.SAMBA.ORG)'
- en: 27.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.1\. 摘要
- en: Samba is an open source implementation of the SMB (Server Message Block) and
    CIFS (Common Internet File System) protocols, which are used for sharing files
    and printers over a Microsoft network. Samba was created to provide Windows-compatible
    file and printer sharing services with UNIX-like systems.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Samba 是 SMB（服务器消息块）和 CIFS（通用互联网文件系统）协议的开源实现，这些协议用于在 Microsoft 网络上共享文件和打印机。Samba
    的创建是为了在 UNIX-like 系统上提供与 Windows 兼容的文件和打印机共享服务。
- en: SMB was originally developed to run atop the NetBIOS (Network Basic Input/Output
    System) protocol. However, because NetBIOS was conceived for small networks, it
    lacked routing capabilities, which limited SMB to local area networks. In 1996,
    Microsoft modified SMB so that it would not rely on NetBIOS, and renamed it Common
    Internet File System (CIFS). With the release of Windows 2000, SMB/CIFS was able
    to run atop TCP/IP.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: SMB 最初是为了在 NetBIOS（网络基本输入/输出系统）协议之上运行而开发的。然而，由于 NetBIOS 是为小型网络设计的，它缺乏路由功能，这限制了
    SMB 仅限于局域网。在 1996 年，微软修改了 SMB，使其不依赖于 NetBIOS，并将其重命名为通用互联网文件系统（CIFS）。随着 Windows
    2000 的发布，SMB/CIFS 能够在 TCP/IP 之上运行。
- en: Samba shares appear just like other shared folders in a Windows network. Access
    privileges can be cascaded over the normal Unix file permissions, and configurable
    restrictions based on login may be implemented as well. Unix users may also mount
    and access shares with the Samba client, which is similar to an FTP client. Samba
    consists of two daemons, namely smbd and nmbd. The SMB daemon handles file and
    print services as well as authentication. The NMB daemon handles name resolution
    and file browsing capability.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Samba 共享在 Windows 网络中看起来就像其他共享文件夹。访问权限可以继承自常规 Unix 文件权限，并且可以根据登录配置限制。Unix 用户也可以使用
    Samba 客户端挂载和访问共享，这类似于 FTP 客户端。Samba 由两个守护进程组成，即 smbd 和 nmbd。SMB 守护进程处理文件和打印服务以及身份验证。NMB
    守护进程处理名称解析和文件浏览功能。
- en: Dr. Barry Feigenbaum of IBM developed the SMB protocol in the early '80s as
    a solution for building small local area networks. Microsoft later built on the
    original SMB foundation and became the dominant user of the technology. Andrew
    Tridgell developed Samba in 1992 by reverse-engineering the SMB protocol to fit
    his needs. The Samba project is now a multi-national team and continues to develop
    new features.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: IBM 的巴里·费根鲍姆博士在20世纪80年代初开发了 SMB 协议，作为构建小型局域网的解决方案。微软后来在原始 SMB 基础上进行了扩展，并成为该技术的主导用户。安德鲁·特里德尔于1992年通过逆向工程
    SMB 协议来满足他的需求开发了 Samba。Samba 项目现在是一个跨国团队，并继续开发新功能。
- en: 27.2\. RESOURCES
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.2\. 资源
- en: Samba Documentation
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Samba 文档
- en: '[http://samba.org/samba/docs](http://samba.org/samba/docs)'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[Samba 文档](http://samba.org/samba/docs)'
- en: The Server Message Block Protocol
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器消息块协议
- en: '[http://ubiqx.org/cifs/SMB.html](http://ubiqx.org/cifs/SMB.html)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[SMB协议](http://ubiqx.org/cifs/SMB.html)'
- en: 27.3\. REQUIRED
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.3\. 必需的
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![FreeBSD 7.0-RELEASE](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)
    FreeBSD 7.0-RELEASE (参见 "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![更新后的端口集合](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) （参见
    "[FreeBSD 端口集合](freebsd_ports_collection.html#freebsd_ports_collection)"）'
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) Internet
    connection'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '![互联网连接](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)'
- en: 27.4\. OPTIONAL
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.4\. 可选
- en: '![](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg) CUPS, for
    printer sharing capability (see "[CUPS Print Server 1.3.3](cups_print_server_1.3.3.html#cups_print_server_1.3.3)")'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![CUPS 打印机共享功能](N2QyLy9jZ3QvODFzcGVtaTlnNTRmOTk1N2kzMWFyczMvZzAwcC5uVQ--.jpg)
    （参见 "[CUPS 打印服务器 1.3.3](cups_print_server_1.3.3.html#cups_print_server_1.3.3)"）'
- en: 27.5\. PREPARATION
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.5\. 准备
- en: Become the superuser.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: System accounts should exist for users you want to allow access to Samba. If
    they don't exist, add them now with the `adduser` command. (See [Appendix C](managing_user_accounts.html#managing_user_accounts)
    for details on the `adduser` command.)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 应该为想要允许访问 Samba 的用户存在系统账户。如果它们不存在，现在使用 `adduser` 命令添加它们。（有关 `adduser` 命令的详细信息，请参见
    [附录C](managing_user_accounts.html#managing_user_accounts)）
- en: 27.6\. INSTALL
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.6\. 安装
- en: 'To begin the Samba installation process, enter the following commands:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始 Samba 安装过程，请输入以下命令：
- en: '[PRE0]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu should appear with the available options for samba. Highlight LDAP and
    press [spacebar] to deselect it. Leave the other options at their defaults by
    pressing [tab] to select OK and then [enter] to continue.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 应该会出现一个菜单，列出 samba 的可用选项。选中 LDAP 并按 [空格键] 取消选中。通过按 [Tab] 键选择 OK 并然后按 [Enter]
    键继续，保持其他选项为默认设置。
- en: 27.7\. CONFIGURE
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.7\. 配置
- en: Once the installation process completes, it is time to configure Samba for use
    on your system.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装过程完成，就是时候配置 Samba 以在您的系统上使用了。
- en: 'Change the smb.conf file in the /usr/local/etc directory to suit your system.
    First, open the file:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将位于 /usr/local/etc 目录下的 smb.conf 文件修改为适合您系统的配置。首先，打开该文件：
- en: '[PRE1]'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Scroll down to the `workgroup` declaration (~26) and replace `MYGROUP` with
    a workgroup name that matches your client systems. This line would appear as follows
    if you used a workgroup named `EXAMPLE`:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到 `workgroup` 声明 (~26) 并将 `MYGROUP` 替换为与您的客户端系统匹配的工作组名称。如果您使用的工作组名称为 `EXAMPLE`，则此行将如下所示：
- en: '[PRE2]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '* * *'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** You can determine the workgroup name of a Windows PC by right-clicking
    My Computer and then selecting Properties. The workgroup name will be shown in
    the Name tab. You can also enter `*net config workstation*` at the command prompt
    to retrieve the workgroup name.'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 您可以通过右键单击我的电脑并选择属性来确定 Windows PC 的工作组名称。工作组名称将在名称选项卡中显示。您还可以在命令提示符中输入
    `*net config workstation*` 来检索工作组名称。'
- en: '* * *'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Scroll down to the `server string` declaration (~29) and replace `Samba Server`
    with a name you would like to assign the server. The line should appear as follows:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到 `server string` 声明 (~29) 并将 `Samba Server` 替换为您希望分配给服务器的名称。该行应如下所示：
- en: '[PRE3]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Scroll down to the `hosts allow` statement (~41). Samba will allow access to
    the IP addresses entered here. To allow connections from all clients, leave this
    line unmodified. To enable SMB connections on the local network, list `192.168.1.`
    (leaving the last octet blank means any addresses from .01 to .255) and `127.`
    (this means any address beginning with 127\. is allowed), as shown in the example
    below. Be sure to uncomment this line by removing the semicolon (`;`) at the beginning
    of the line. The line should appear as follows:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到 `hosts allow` 语句 (~41)。Samba 将允许访问在此处输入的 IP 地址。要允许所有客户端连接，请保持此行不变。要启用本地网络上的
    SMB 连接，列出 `192.168.1.`（最后一个八位字节留空表示从 .01 到 .255 的任何地址）和 `127.`（这意味着以 127. 开头的任何地址都是允许的），如下例所示。务必取消注释此行，通过删除行首的分号
    (`;`) 来实现。该行应如下所示：
- en: '[PRE4]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '* * *'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** You may enter full IP addresses here to limit connections to a
    specific client IP, separating each IP with a space, comma, or tab.'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 您可以在此处输入完整的 IP 地址以限制连接到特定的客户端 IP，每个 IP 地址之间用空格、逗号或制表符分隔。'
- en: '* * *'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 27.7.1\. Configuring Shares
  id: totrans-41
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.7.1\. 配置共享
- en: Now we'll create definitions that specify how directories will be shared. There
    are a variety of different configurations possible, but for now just create a
    simple share using one of these examples.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将创建定义，指定目录如何共享。有多种不同的配置方式，但现阶段只需使用以下示例之一创建一个简单的共享。
- en: Public Shares
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 公共共享
- en: The following example is a share that allows all users to log into, read, delete,
    create, and modify files. This type of share is useful for users who wish to share
    files without restrictions. To implement this type of share, add the lines below
    to the end of the smb.conf file. (You may substitute a different share name and
    path.)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例是一个允许所有用户登录、读取、删除、创建和修改文件的共享。此类共享适用于希望无限制共享文件的用户。要实现此类共享，请将以下行添加到 smb.conf
    文件的末尾。（您可以使用不同的共享名称和路径替换。）
- en: 'Code View:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 代码视图：
- en: '[PRE5]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Private Shares
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 私有共享
- en: With the following configuration, only the users john and jane are allowed access.
    The files each user creates will have owner permissions of `read`, `write`, and
    `execute`. The group and world permissions will be read-only by default. This
    type of share is useful for sharing within small groups of people who wish to
    retain control of their files. To implement this type of share, add the lines
    below to the end of smb.conf (substituting your choice of share name, path, and
    list of valid users).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下配置，只有用户 john 和 jane 被允许访问。每个用户创建的文件将拥有者权限 `read`、`write` 和 `execute`。默认情况下，组和世界权限为只读。此类共享适用于希望保留对其文件控制的小组人员之间的共享。要实现此类共享，请将以下行添加到
    smb.conf 文件的末尾（用您选择的共享名称、路径和有效用户列表替换）。
- en: 'Code View:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 代码视图：
- en: '[PRE6]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Read-Only Shares
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 只读共享
- en: The configuration below allows everyone read-only access to the share without
    a password. Only users on the write list can create, modify, and delete files
    they own in the share. This type of share is useful to publish files for public
    access while giving authors or administrators the ability to retain control of
    their content. To implement this type of share, add the lines below to the end
    of smb.conf, substituting your choice of share name, path, and list of users with
    write access.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 以下配置允许所有人无需密码即可以只读方式访问共享。只有写入列表中的用户可以创建、修改和删除他们在共享中拥有的文件。此类共享适用于发布供公众访问的文件，同时让作者或管理员保留对其内容的控制权。要实现此类共享，请将以下行添加到smb.conf文件的末尾，用你选择的共享名称、路径和具有写入访问权限的用户列表替换。
- en: 'Code View:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 代码视图：
- en: '[PRE7]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Printers
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 打印机
- en: By default, all configured printers in CUPS are shared and available to authenticated
    users. If you need to apply access restrictions to printers, please see "[Notes](notes.html#notes)"
    .
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，CUPS中配置的所有打印机都是共享的，并且可供认证用户使用。如果你需要将访问限制应用于打印机，请参阅“[注意事项](notes.html#notes)”。
- en: Finishing
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 完成
- en: When you are satisfied with your shares configuration, save and exit.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 当你对共享配置满意时，保存并退出。
- en: 'Test the smb.conf file for syntax errors:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 测试smb.conf文件是否存在语法错误：
- en: '[PRE8]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Examine the output for any errors and correct them if necessary. Make sure the
    paths you specified in your share definitions exist. If they don't, create them
    now.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 检查输出是否有任何错误，并在必要时进行纠正。确保你在共享定义中指定的路径存在。如果它们不存在，请现在创建它们。
- en: 27.7.2\. Setting Share Permissions
  id: totrans-62
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.7.2. 设置共享权限
- en: The sections below correspond to the example share configurations mentioned
    previously. For example, if you created a public share in the last section, proceed
    to "Public Share Permissions." When you have completed setting permissions for
    your configured shares, proceed to "[Testing](testing-id17.html#testing-id17)".
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '下面的部分对应于之前提到的示例共享配置。例如，如果你在上一个部分中创建了一个公共共享，请转到“公共共享权限”。当你完成配置共享的权限设置后，请转到“[测试](testing-id17.html#testing-id17)”。 '
- en: Public Share Permissions
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 公共共享权限
- en: 'If you will be hosting a public share, you will need to set the permissions
    on the public share directory to mode `777` in order to allow all users the ability
    to create, modify, and delete files. For example, the command below would set
    the required permissions on the /usr/home/samba/public directory:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将托管一个公共共享，你需要将公共共享目录的权限设置为模式`777`，以便允许所有用户创建、修改和删除文件。例如，下面的命令将设置`/usr/home/samba/public`目录所需的权限：
- en: '[PRE9]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Private Share Permissions
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 私有共享权限
- en: If you will be hosting a private share, you will need to set the permissions
    on the private share directory to mode `770`. This will allow root and the members
    of the group full access to the directory (we will also create the group).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将托管一个私有共享，你需要将私有共享目录的权限设置为模式`770`。这将允许root和该组的成员完全访问目录（我们也将创建该组）。
- en: Because we want only the users we specify to access this directory, we need
    to create a new group and add them as members. As an example, we'll create a group
    called smbprivate with the users john and jane as members.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们只想让指定的用户访问这个目录，我们需要创建一个新的组并将他们添加为成员。例如，我们将创建一个名为smbprivate的新组，其成员为john和jane。
- en: The following commands will create the group smbprivate, change the /usr/home/samba/private
    directory's ownership to this new group, and set the correct permissions. (You
    can use any group name you like.)
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令将创建smbprivate组，将`/usr/home/samba/private`目录的所有权更改为该新组，并设置正确的权限。（你可以使用你喜欢的任何组名。）
- en: '[PRE10]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Substitute your own usernames, group name, and path as appropriate.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 根据需要替换你自己的用户名、组名和路径。
- en: Read-Only Share Permissions
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 只读共享权限
- en: If you will be hosting a read-only share, you will need to set the permissions
    on the read-only share directory to mode `770`. This will allow root and the members
    of the group full access to the directory.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将托管一个只读共享，你需要将只读共享目录的权限设置为模式`770`。这将允许root和该组的成员完全访问目录。
- en: Because we want only the users we specified in the write list to access this
    directory, we need to create a new group and add these users as members. As an
    example, we will create a new group called smbreadonly with users bert and ernie
    as members.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们只想让我们在写入列表中指定的用户访问这个目录，所以我们需要创建一个新的组并将这些用户添加为成员。例如，我们将创建一个名为smbreadonly的新组，其成员为bert和ernie。
- en: The following commands will create the group, change the /usr/home/samba/private
    directory's ownership to this new group, and set the correct permissions.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令将创建组，将 /usr/home/samba/private 目录的所有权更改为新组，并设置正确的权限。
- en: '[PRE11]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Substitute your own usernames, group name, and path as appropriate.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 根据需要替换自己的用户名、群组名和路径。
- en: 27.7.3\. Adding Users
  id: totrans-79
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.7.3. 添加用户
- en: 'Create Samba user accounts and passwords for the users you wish to allow Samba
    access. The usernames you specify should match those of their existing system
    accounts. To set up a new user, use the `smbpasswd` command (replacing `*username*`
    with the username you wish to create):'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 为希望允许Samba访问的用户创建Samba用户账户和密码。您指定的用户名应与他们的现有系统账户匹配。要设置新用户，请使用 `smbpasswd` 命令（将
    `*用户名*` 替换为您希望创建的用户名）：
- en: '[PRE12]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'After entering a password, you should see:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 输入密码后，您应该看到：
- en: '[PRE13]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Repeat this for any other users you'd like to add.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 对您想要添加的任何其他用户重复此操作。
- en: 27.8\. TESTING
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.8. 测试
- en: In this section, we'll perform some basic tests to confirm that Samba answers
    SMB/CIFS requests properly.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将执行一些基本测试以确认Samba能够正确响应SMB/CIFS请求。
- en: 'Enter this command to start the SMB daemon for testing:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入此命令以启动SMB守护进程进行测试：
- en: '[PRE14]'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'To list the available shares Samba is hosting, use the following command:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要列出Samba托管的所有可用共享，请使用以下命令：
- en: '[PRE15]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Replace `*username*` with a valid Samba user. After entering the user's password,
    you should see the list of shares you configured earlier.
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将 `*用户名*` 替换为有效的Samba用户。输入用户密码后，您应该看到您之前配置的共享列表。
- en: 'To log in and browse a share, enter:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要登录并浏览共享，请输入：
- en: '[PRE16]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Once login is complete, you should see an `smb: \>` prompt. You may then navigate
    the share with common Unix commands, such as `cd` and `ls`. Enter `**quit**` to
    exit.'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '登录完成后，您应该看到 `smb: \>` 提示符。然后您可以使用常见的Unix命令，如 `cd` 和 `ls`，来导航共享。输入 `**退出**`
    以退出。'
- en: 'If the tests were successful, configure the Samba server to start automatically
    at boot time. Open /etc/rc.conf:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果测试成功，配置Samba服务器在启动时自动启动。打开 /etc/rc.conf：
- en: '[PRE17]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'and then add the following line:'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 然后添加以下行：
- en: '[PRE18]'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Save, exit, and restart Samba:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存、退出并重新启动Samba：
- en: '[PRE19]'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '* * *'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** You can run the `*status*` command for confirmation that the Samba
    service started.'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 您可以运行 `*状态*` 命令以确认Samba服务已启动。'
- en: '* * *'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 27.9\. UTILITIES
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.9. 工具
- en: Following is brief information on the smbpasswd and pdbedit utilities, which
    are used to maintain user passwords and policies. This section also covers SWAT,
    an alternative interface for Samba administration.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是对smbpasswd和pdbedit实用程序的简要信息，这些实用程序用于维护用户密码和策略。本节还涵盖了SWAT，它是Samba管理的替代接口。
- en: 27.9.1\. smbpasswd
  id: totrans-106
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.9.1. smbpasswd
- en: This utility manages users' Samba passwords.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 此实用程序管理用户的Samba密码。
- en: Command
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`smbpasswd`'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '`smbpasswd`'
- en: Syntax
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`smbpasswd -``*options username*`'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '`smbpasswd -``*选项 用户名*`'
- en: Options
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE20]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Adds a user to the Samba password file
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 将用户添加到Samba密码文件
- en: '[PRE21]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Deletes a user from the Samba password file
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 从Samba密码文件中删除用户
- en: '[PRE22]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Disables a user
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 禁用用户
- en: '[PRE23]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Enables a user if previously disabled
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 如果之前已禁用，则启用用户
- en: Examples
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To add the user jake to the Samba password file, enter:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 要将用户jake添加到Samba密码文件，请输入：
- en: '[PRE24]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'To disable the user webster, enter:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 要禁用用户webster，请输入：
- en: '[PRE25]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '* * *'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** If a user has shell access to your server, he may change his password
    by entering `*smbpasswd*` with no arguments.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '***注意：*** 如果用户有权访问您的服务器shell，他可以通过不带参数输入 `*smbpasswd*` 来更改密码。'
- en: '* * *'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 27.9.2\. pdbedit
  id: totrans-129
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.9.2. pdbedit
- en: This utility manages users in the Samba user database. It is usable by root
    only.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 此实用程序管理Samba用户数据库中的用户。它只能由root使用。
- en: Command
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`pdbedit`'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '`pdbedit`'
- en: Syntax
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`pdbedit -``*option*` `*argument*`'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '`pdbedit -``*选项*` `*参数*`'
- en: Options
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE26]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Adds a user
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 添加用户
- en: '[PRE27]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Specifies user to manage
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 指定要管理的用户
- en: '[PRE28]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Specifies user's full name
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 指定用户的全名
- en: '[PRE29]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Verbose listing format
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 详细列表格式
- en: '[PRE30]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Lists all users in the database
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 列出数据库中的所有用户
- en: '[PRE31]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Deletes a user
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 删除用户
- en: '[PRE32]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Displays account policy and current value. Valid arguments include:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 显示账户策略和当前值。有效的参数包括：
- en: '| `minimum password age` | `bad lockout attempt` |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| `最小密码年龄` | `不良锁定尝试` |'
- en: '| --- | --- |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `maximum password age` | `reset count minutes` |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| `最大密码年龄` | `重置计数分钟` |'
- en: '| --- | --- |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `min password length` | `disconnect time` |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| `最小密码长度` | `断开连接时间` |'
- en: '| --- | --- |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `password history` | `user must logon to change password` |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| `密码历史` | `用户必须登录才能更改密码` |'
- en: '| --- | --- |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `lockout duration` | `refuse machine password change` |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| `锁定持续时间` | `拒绝机器密码更改` |'
- en: '| --- | --- |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '[PRE33]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Changes account policy value
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 更改账户策略值
- en: Examples
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To add a user John Doe to the Samba database with the username john, enter:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 要将用户John Doe添加到Samba数据库中，用户名为john，请输入：
- en: '[PRE34]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'To list all users in the database verbosely, enter:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 要详细列出数据库中的所有用户，请输入：
- en: '[PRE35]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'To display the minimum password length account policy, enter:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 要显示最小密码长度账户策略，请输入：
- en: '[PRE36]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'To change the minimum password length to 8, enter:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 要将最小密码长度更改为8，请输入：
- en: '[PRE37]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'See pdbedit''s man page for more options:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 查看pdbedit的手册页以获取更多选项：
- en: '[PRE38]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 27.9.3\. Enabling SWAT
  id: totrans-173
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.9.3\. 启用SWAT
- en: SWAT (Samba Web Administration Tool) provides an easy-to-use alternative interface
    for Samba administration. SWAT is run from FreeBSD's built-in Internet super-server
    (inetd). To enable SWAT, follow these steps.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: SWAT（Samba Web管理工具）提供了一个易于使用的Samba管理替代接口。SWAT通过FreeBSD内置的Internet超级服务器（inetd）运行。要启用SWAT，请按照以下步骤操作。
- en: 'Open inetd.conf:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开inetd.conf：
- en: '[PRE39]'
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Uncomment the `swat` declaration (~120). It should appear now as follows:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 取消注释`swat`声明（~120）。现在它应该如下所示：
- en: '[PRE40]'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: Save and exit.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 'Unless you''ve specifically configured inetd to run at boot time, enter the
    following to start the service:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 除非您已特别配置inetd在启动时运行，否则请输入以下内容以启动服务：
- en: '[PRE41]'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: To access the SWAT interface, navigate to [http://host.example.com:901](http://host.example.com:901)
    with a web browser (substitute your server's hostname). Log in as root to access
    the administrative functions.
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要访问SWAT界面，使用网页浏览器导航到[http://host.example.com:901](http://host.example.com:901)（用您的服务器主机名替换）。以root身份登录以访问管理功能。
- en: '* * *'
  id: totrans-183
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Be aware that your login and password are transmitted in the clear.
    If you cannot ensure the security of your network, do not use this utility. Use
    a secure solution like manual configuration via SSH or a browser, like Lynx (see
    "[Lynx 2.8.6](lynx_2.8.6.html#lynx_2.8.6)"), on the server console. Do not use
    this utility from outside your network unless you have taken steps to encrypt
    the transmission of your root password using something like a secure VPN tunnel.'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 请注意，您的登录名和密码将以明文形式传输。如果您无法确保网络的安全性，请不要使用此实用程序。使用安全的解决方案，例如通过SSH或浏览器（如Lynx（见"[Lynx
    2.8.6](lynx_2.8.6.html#lynx_2.8.6)"））手动配置服务器控制台。除非您已经采取措施使用类似安全VPN隧道的东西加密root密码的传输，否则不要从您的网络外部使用此实用程序。'
- en: '* * *'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Once configuration of Samba with SWAT is complete, you may terminate inetd
    as follows:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦使用SWAT完成Samba的配置，您可以按照以下方式终止inetd：
- en: '[PRE42]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'To start inetd automatically at boot time, add the following line to /etc/rc.conf
    :'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 要在启动时自动启动inetd，请将以下行添加到/etc/rc.conf中：
- en: '[PRE43]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 27.10\. CONFIG FILES
  id: totrans-190
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.10\. 配置文件
- en: /usr/local/etc/smb.conf
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/smb.conf
- en: The main configuration file for Samba
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: Samba的主要配置文件
- en: /usr/local/etc/samba/smbpasswd
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/samba/smbpasswd
- en: The Samba encrypted password file; it is created by the smbpasswd utility and
    contains usernames and hashed passwords for SMB users
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: Samba加密密码文件；它由smbpasswd实用程序创建，包含SMB用户的用户名和散列密码
- en: 27.11\. LOG FILES
  id: totrans-195
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.11\. 日志文件
- en: /var/log/samba
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/samba
- en: Contains log files for Samba activity and hosts that have connected to a Samba
    share
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 包含Samba活动日志和连接到Samba共享的主机
- en: 27.12\. NOTES
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.12\. 备注
- en: 'If you have CUPS installed and configured without access restrictions, all
    authenticated Samba users will have permission to print to any installed printer.
    To restrict printing privileges to specific users, you must modify /etc/smb.conf.
    First, open smb.conf :'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您已安装并配置了CUPS打印而没有设置访问限制，所有经过身份验证的Samba用户都将有权打印到任何已安装的打印机。要限制打印权限到特定用户，您必须修改/etc/smb.conf。首先，打开smb.conf：
- en: '[PRE44]'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Scroll to the bottom of smb.conf using [ctrl-U] and add the following lines:'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用[ctrl-U]滚动到smb.conf文件的底部并添加以下行：
- en: '[PRE45]'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Replace `*username*` with the username(s) of the person(s) you want to allow
    print privileges (separate multiple users with spaces).
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将`*username*`替换为你想要允许打印权限的用户名（多个用户名之间用空格分隔）。
- en: 'Save, exit, and restart Samba:'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存、退出并重新启动Samba：
- en: '[PRE46]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'If you configured CUPS printing without access restrictions, consider disabling
    IPP (Internet Printing Protocol) since you are trying to restrict printing access
    to specific users. To prevent CUPS from accepting direct IPP print requests, edit
    the cupsd.conf file. First, open cupsd.conf:'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您在未设置访问限制的情况下配置了CUPS打印，考虑到您正在尝试限制打印访问权限到特定用户，请考虑禁用IPP（互联网打印协议）。为了防止CUPS接受直接IPP打印请求，编辑cupsd.conf文件。首先，打开cupsd.conf：
- en: '[PRE47]'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Scroll down to the bottom of the cupsd.conf file using [ctrl-U] and add the
    following lines:'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用[ctrl-U]滚动到cupsd.conf文件的底部并添加以下行：
- en: '[PRE48]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: This directive will cause CUPS to reject all direct IPP printing requests and
    instead accept only Samba-relayed print jobs.
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此指令将导致CUPS拒绝所有直接IPP打印请求，并仅接受Samba中继的打印作业。
- en: 'Save, exit, and restart CUPS:'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存、退出并重新启动CUPS：
- en: '[PRE49]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Windows XP SP2 systems may experience a delay when selecting a Samba printer
    in some applications or when attempting to access printer properties. This may
    be resolved by removing Windows registry entries that refer to the Samba hosted
    printer. The locations of the registry entries are as follows:'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows XP SP2系统在选择某些应用程序中的Samba打印机或在尝试访问打印机属性时可能会出现延迟。这可以通过删除指向Samba托管打印机的Windows注册表条目来解决。注册表条目的位置如下：
- en: HKEY_CURRENT_USER\Printers\DevModePerUser
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: HKEY_CURRENT_USER\Printers\DevModePerUser
- en: HKEY_CURRENT_USER\Printers\DevModes2
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: HKEY_CURRENT_USER\Printers\DevModes2
- en: Delete \\ samba_server_name \ printer_name.
  id: totrans-216
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 删除 \\ samba_server_name \ printer_name.
- en: '* * *'
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Use caution when modifying the Windows registry.'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 修改Windows注册表时请谨慎操作。'
- en: '* * *'
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
