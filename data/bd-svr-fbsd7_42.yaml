- en: Chapter 17\. OPENSSH SERVER 4.7P1
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第17章. OPENSSH 服务器 4.7P1
- en: '[HTTP://WWW.OPENSSH.COM](HTTP://WWW.OPENSSH.COM)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[HTTP://WWW.OPENSSH.COM](HTTP://WWW.OPENSSH.COM)'
- en: 17.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.1. 摘要
- en: OpenSSH is a set of open source utilities that implement the SSH (Secure Shell)
    protocol. SSH is a secure version of telnet; it's a protocol used to access the
    console or command line of remote systems. SSH provides administrators and users
    with access to a remote system as if they were physically at the console.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: OpenSSH是一组开源实用程序，实现了SSH（安全外壳）协议。SSH是telnet的安全版本；它是一种用于访问远程系统控制台或命令行的协议。SSH为管理员和用户提供访问远程系统的权限，就像他们物理上位于控制台一样。
- en: SSH uses encryption to prevent eavesdropping on connections made between a client
    and server. The telnet protocol lacks encryption; this gives eavesdroppers the
    ability to capture usernames and passwords with a packet sniffer. (A packet sniffer
    is a program designed to monitor and capture network traffic.)
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: SSH使用加密来防止客户端和服务器之间连接的窃听。telnet协议没有加密；这给了窃听者使用数据包嗅探器捕获用户名和密码的能力。（数据包嗅探器是一种用于监控和捕获网络流量的程序。）
- en: OpenSSH commands an overwhelming 87 percent of the SSH market, according to
    a survey conducted in November 2005.^([[]](#CHP-17-1)) It is included in virtually
    every distribution of Linux and BSD, as well as Apple's Mac OS X.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 根据2005年11月进行的一项调查，OpenSSH命令控制了87%的SSH市场。它几乎包含在所有Linux和BSD的发行版中，以及苹果的Mac OS X。
- en: ^([]) OpenBSD, "SSH Usage Profiling," [http://www.openssh.com/usage/index.html](http://www.openssh.com/usage/index.html).
  id: totrans-6
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ^([]) OpenBSD, "SSH 使用分析," [http://www.openssh.com/usage/index.html](http://www.openssh.com/usage/index.html).
- en: The SSH protocol was first developed in 1995 by Tatu Ylönen, a researcher from
    Helsinki University of Technology. Ylönen founded SSH Communications Security
    in late 1995 to develop and market SSH. His company currently markets the SSH
    Tectia Server/Client.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: SSH协议最初于1995年由赫尔辛基工业大学的研究员Tatu Ylönen开发。Ylönen于1995年底成立了SSH Communications Security公司，以开发和推广SSH。他的公司目前销售SSH
    Tectia服务器/客户端。
- en: OpenSSH was originally conceived by the OpenBSD team as part of the OpenBSD
    2.6 release in December 1999\. The team used code from Tatu Ylönen's SSH project,
    which was originally open source. Bugs were fixed and features were added to the
    OpenSSH release. Soon after the release of OpenSSH, its developers decided to
    split into two teams. One group concentrated on the development of OpenSSH for
    OpenBSD while the other group developed a portable version of OpenSSH for use
    on other platforms. The portable edition has the letter P appended to the version
    to signify this. OpenSSH is still developed by the OpenBSD team and is led by
    its founder, Theo de Raadt.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: OpenSSH最初由OpenBSD团队在1999年12月的OpenBSD 2.6版本中构思，作为该版本的一部分。该团队使用了来自Tatu Ylönen的SSH项目的代码，该项目最初是开源的。在OpenSSH版本中修复了错误并添加了功能。OpenSSH发布后不久，其开发者决定分成两个团队。一个团队专注于为OpenBSD开发OpenSSH，而另一个团队开发了适用于其他平台的便携式OpenSSH版本。便携版版本号后附加了字母P以表示这一点。OpenSSH仍然由OpenBSD团队开发，并由其创始人Theo
    de Raadt领导。
- en: 17.2\. RESOURCES
  id: totrans-9
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.2. 资源
- en: OpenSSH Manual Pages
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: OpenSSH 手册页
- en: '[http://www.openssh.com/manual.html](http://www.openssh.com/manual.html)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.openssh.com/manual.html](http://www.openssh.com/manual.html)'
- en: RFC 4251 - The Secure Shell (SSH) Protocol Architecture
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: RFC 4251 - 安全外壳（SSH）协议架构
- en: '[http://tools.ietf.org/html/rfc4251](http://tools.ietf.org/html/rfc4251)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://tools.ietf.org/html/rfc4251](http://tools.ietf.org/html/rfc4251)'
- en: 17.3\. REQUIRED
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.3. 必需的
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) FreeBSD
    7.0-RELEASE（见"[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)"）'
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) 更新的ports集合（见"[FreeBSD
    Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)"）'
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) Internet
    connection'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) 互联网连接'
- en: '![](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) OpenSSL (see
    "[OpenSSL 0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)")'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![图片](OWlnMmQvN2ZtYXI4dGMvaWVnL3MxOTU5MzE0NTdwc3BuVTAvLjNnMA--.jpg) OpenSSL（见"[OpenSSL
    0.9.8g](openssl_0.9.8g.html#openssl_0.9.8g)"）'
- en: 17.4\. PREPARATION
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.4. 准备
- en: Become the superuser.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: 17.5\. INSTALL
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.5. 安装
- en: OpenSSH 4.5.p1 is part of the standard FreeBSD 7.0 distribution. In this guide,
    we will replace the base version with an updated version of OpenSSH from the ports
    collection.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: OpenSSH 4.5.p1是FreeBSD 7.0标准发行版的一部分。在本指南中，我们将用ports集合中更新的OpenSSH版本替换基本版本。
- en: 'To begin the OpenSSH installation process, enter:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始OpenSSH安装过程，请输入：
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu with options for OpenSSH will appear. We will leave them at their defaults,
    so press [tab] to highlight OK and then press [enter] to start the installation.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 将显示一个包含OpenSSH选项的菜单。我们将保留它们的默认设置，因此按[tab]键高亮显示“OK”，然后按[enter]键开始安装。
- en: 17.6\. CONFIGURE
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.6. 配置
- en: Once the installation process is complete, it's time to configure OpenSSH for
    use on your system.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候配置OpenSSH以在您的系统上使用了。
- en: 'The line `"NO_OPENSSH = YES"` must be added to the make.conf file in /etc.
    This tells make not to build the base version of OpenSSH if you rebuild FreeBSD
    from source (i.e., this prevents the system from downgrading OpenSSH to the older
    base version). The following commands will add this line to make.conf:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 必须将“`NO_OPENSSH = YES`”行添加到位于/etc中的make.conf文件中。这告诉make在从源代码重新构建FreeBSD时不要构建OpenSSH的基本版本（即，这防止系统将OpenSSH降级到较旧的基本版本）。以下命令将此行添加到make.conf中：
- en: '[PRE1]'
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: OpenSSH's default configuration file has changed slightly from the base version
    to increase security. We'll replace the base configuration file with this newly
    installed file.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: OpenSSH的默认配置文件与基本版本略有不同，以提高安全性。我们将用新安装的文件替换基本配置文件。
- en: '[PRE2]'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '* * *'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** You may need to re-modify the sshd_config file if you previously
    made any customizations.'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 如果您之前进行了任何自定义设置，可能需要重新修改sshd_config文件。'
- en: '* * *'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 17.7\. TESTING
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.7. 测试
- en: In this section, we'll perform some basic tests to confirm that OpenSSH answers
    SSH requests properly.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将进行一些基本测试，以确认OpenSSH能够正确响应SSH请求。
- en: 'To start OpenSSH Server automatically at boot time, open rc.conf:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在启动时自动启动OpenSSH服务器，请打开rc.conf：
- en: '[PRE3]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'and add the following line (if it''s not already present):'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下行（如果尚未存在）：
- en: '[PRE4]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Save and exit.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 'To test if OpenSSH is answering properly on port 22, connect via telnet and
    examine the response. Use the following command:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要测试OpenSSH是否在端口22上正确响应，请通过telnet连接并检查响应。使用以下命令：
- en: '[PRE5]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '* * *'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** You may replace `localhost` with the FQDN or IP address of your
    server if you are testing from a different system.'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 如果您从不同的系统进行测试，可以将`localhost`替换为服务器的FQDN或IP地址。'
- en: '* * *'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'The connection should yield the following banner:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 连接应该产生以下标语：
- en: '[PRE6]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Verify that the correct version appears in the banner (SSH-2.0 and OpenSSH_4.7p1
    or later). Press [enter] to quit and return to the command prompt. You should
    now be able to connect with any SSH-capable client and any valid user account
    other than root.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 确认正确的版本出现在标语中（SSH-2.0和OpenSSH_4.7p1或更高版本）。按[enter]键退出并返回到命令提示符。现在您应该能够使用任何具有SSH功能的客户端和除root以外的任何有效用户账户进行连接。
- en: 17.8\. UTILITIES
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.8. 工具
- en: OpenSSH includes an SSH client, SFTP (secure file transfer) client, and SCP
    (secure copy) client. Each program is designed to operate similarly to the original,
    but insecure, telnet and FTP protocols. The SSH client enables users to securely
    log in to remote systems and the SFTP and SCP clients make secure file transfers
    possible.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: OpenSSH包括SSH客户端、SFTP（安全文件传输）客户端和SCP（安全复制）客户端。每个程序都设计得与原始的、不安全的telnet和FTP协议类似。SSH客户端允许用户安全地登录到远程系统，而SFTP和SCP客户端使安全文件传输成为可能。
- en: 17.8.1\. SSH Client
  id: totrans-52
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 17.8.1. SSH客户端
- en: This program is used to securely log in to the console of a remote system (i.e.,
    start a terminal session).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 此程序用于安全地登录到远程系统的控制台（即，启动一个终端会话）。
- en: Command
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`ssh`'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '`ssh`'
- en: Syntax
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`ssh -``*options*` `*user@host*`'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '`ssh -``*options*` `*user@host*`'
- en: Options
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE7]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Specify a port in which to connect to the remote host (the OpenSSH server must
    be configured for the port you specify).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 指定要连接到远程主机的端口（OpenSSH服务器必须配置为指定的端口）。
- en: '[PRE8]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '`**localport:host:remoteport**` Forward a specified local port to a specified
    host port over the secure connection.'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '`**localport:host:remoteport**` 在安全连接中转发指定的本地端口到指定的主机端口。'
- en: '[PRE9]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Do not execute remote commands (used for port forwarding).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 不要执行远程命令（用于端口转发）。
- en: '[PRE10]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Run the SSH client as a background process.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 将SSH客户端作为后台进程运行。
- en: Examples
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To log in to a remote host named [host.example.com](http://host.example.com)
    as user johnny, enter the following command:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 要以用户johnny的身份登录到名为[host.example.com](http://host.example.com)的远程主机，请输入以下命令：
- en: '[PRE11]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'To log in to a remote host named [fluffy.net](http://fluffy.net) as user cat
    on port 23, enter:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 要以用户 cat 身份通过端口 23 登录到名为 [fluffy.net](http://fluffy.net) 的远程主机，请输入：
- en: '[PRE12]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'To create an SSH tunnel from local port 1234 to remote port 110 on host [host.example.com](http://host.example.com)
    as user aeron, enter:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 要从本地端口 1234 到远程主机 [host.example.com](http://host.example.com) 的端口 110 创建SSH隧道，以用户
    aeron 身份执行，请输入：
- en: '[PRE13]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'To close this tunnel later, enter:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 要稍后关闭此隧道，请输入：
- en: '[PRE14]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 17.8.2\. Secure Copy Client
  id: totrans-76
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 17.8.2\. 安全复制客户端
- en: This utility securely copies files and directories to or from a remote host.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 此实用程序安全地将文件和目录从远程主机复制到或从远程主机复制到。
- en: Command
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`scp`'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '`scp`'
- en: Syntax `scp -``*options filename user@host:path*`
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 语法 `scp -``*options filename user@host:path*`
- en: Options
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE15]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Enable data compression.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 启用数据压缩。
- en: '[PRE16]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Specify a port in which to connect to the remote host (the OpenSSH server must
    be configured for the port you specify).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 指定连接到远程主机（指定的端口OpenSSH服务器必须配置）的端口。
- en: '[PRE17]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Preserve the original file's modification times, access times, and file modes.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 保留原始文件的修改时间、访问时间和文件模式。
- en: '[PRE18]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Recursively copy directories.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 递归复制目录。
- en: Examples
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To copy a file named example.doc from the current working directory to the
    /usr/home directory on a remote system [example.com](http://example.com) as user
    author, enter:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 要将当前工作目录中的名为 example.doc 的文件复制到远程系统 [example.com](http://example.com) 的 /usr/home
    目录，以用户 author 身份执行，请输入：
- en: '[PRE19]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'To copy everything within the local /usr/samba directory to /usr/home on a
    remote system [example.com](http://example.com) as user author while preserving
    file modes and enabling data compression, enter:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 要将本地 /usr/samba 目录中的所有内容复制到远程系统 [example.com](http://example.com) 的 /usr/home
    目录，以用户 author 身份执行，同时保留文件模式和启用数据压缩，请输入：
- en: '[PRE20]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'To copy a file named /usr/example.doc to the /usr directory on the local system
    using port 23, using the author account on a host named [server1.example.com](http://server1.example.com),
    enter:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用名为 [server1.example.com](http://server1.example.com) 的主机上的作者账户，通过端口 23 将名为
    /usr/example.doc 的文件复制到本地系统的 /usr 目录，请输入：
- en: '[PRE21]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 17.8.3\. Secure File Transfer Client
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 17.8.3\. 安全文件传输客户端
- en: This program is an interactive and secure file transfer client. It can be used
    as an alternative to FTP, which is inherently insecure.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 此程序是一个交互式且安全的文件传输客户端。它可以作为FTP的替代方案，FTP本身是不安全的。
- en: Command
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 命令
- en: '`sftp`'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '`sftp`'
- en: Syntax
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 语法
- en: '`sftp -``*options user@host*`'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '`sftp -``*options user@host*`'
- en: Options
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 选项
- en: '[PRE22]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Specify a port in which to connect to the remote host (the OpenSSH server must
    be configured for the port you specify).
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 指定连接到远程主机（指定的端口OpenSSH服务器必须配置）的端口。
- en: '[PRE23]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Enable data compression.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 启用数据压缩。
- en: Examples
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: 'To initiate a connection to a host named [server.example.com](http://server.example.com)
    as user test, enter:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 要以用户 test 身份连接到名为 [server.example.com](http://server.example.com) 的主机，请输入：
- en: '[PRE24]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'To connect to a host named [example.com](http://example.com) over port 23 as
    user wilson with compression enabled, enter:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要以用户 wilson 身份通过端口 23 连接到名为 [example.com](http://example.com) 的主机，并启用压缩，请输入：
- en: '[PRE25]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 17.9\. CONFIG FILES
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.9\. 配置文件
- en: /etc/ssh/sshd_config
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: /etc/ssh/sshd_config
- en: Contains general settings for sshd (SSH server daemon). It is generally safe
    to leave this file at its defaults.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 包含sshd（SSH服务器守护进程）的一般设置。通常可以安全地保留此文件的默认设置。
- en: /etc/ssh/ssh_config
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: /etc/ssh/ssh_config
- en: Contains general settings for ssh (SSH client program).
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 包含ssh（SSH客户端程序）的一般设置。
- en: 17.10\. LOG FILES
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.10\. 日志文件
- en: /var/log/auth.log
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/auth.log
- en: A general log of SSH server activity
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: SSH服务器活动的一般日志
- en: 17.11\. NOTES
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 17.11\. 注意事项
- en: 'By default, all user accounts with shell access on your server will have SSH
    access (except for root). If you want to limit SSH access to specific users, you
    will need to add a line to the sshd_config file located in /etc/ssh. Open it like
    so:'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认情况下，您的服务器上所有具有shell访问权限的用户账户都将拥有SSH访问权限（root用户除外）。如果您想限制SSH访问权限仅限于特定用户，您需要向位于
    /etc/ssh 的 sshd_config 文件中添加一行。打开方式如下：
- en: '[PRE26]'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'and add the following line:'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下行：
- en: '[PRE27]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Replace `*username*` with the login name of the user you want to allow SSH access.
    Separate multiple users with spaces. Only users who appear on this line will have
    access to SSH-based services.
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将 `*username*` 替换为您想要允许SSH访问的用户的登录名。多个用户之间用空格分隔。只有出现在此行上的用户才能访问基于SSH的服务。
- en: '* * *'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: '***Note:*** Be aware that this line is case sensitive. Confirm that the usernames
    are correct, especially if you are making this change from a remote location.
    You can lock yourself out if this is misconfigured!'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '***注意：*** 请注意，此行区分大小写。请确认用户名正确，尤其是如果您是从远程位置进行此更改。如果配置错误，您可能会被锁定在外部！'
- en: '* * *'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Save, exit, and restart sshd:'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存、退出并重新启动sshd：
- en: '[PRE28]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Host keys are usually created after the initial FreeBSD installation process,
    if SSH logins were enabled. If you need to re-create them, it is easiest to remove
    the old keys and restart the SSH daemon. The SSH daemon will recreate the keys
    automatically. These commands will accomplish this:'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主机密钥通常在初始FreeBSD安装过程之后创建，如果启用了SSH登录。如果您需要重新创建它们，最简单的方法是删除旧密钥并重新启动SSH守护进程。SSH守护进程将自动重新创建密钥。以下命令将完成此操作：
- en: '[PRE29]'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'By default, OpenSSH Server will not allow root logins. If you need root privileges,
    you will need to log in as a normal user who is a member of the wheel group and
    then use the `su` command to become the superuser. see "[su](general.html#su)"
    for details. To add a user named lucky to the wheel group, log in as root and
    enter:'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认情况下，OpenSSH服务器不允许root登录。如果您需要root权限，您需要以wheel组成员的正常用户身份登录，然后使用`su`命令成为超级用户。有关详细信息，请参阅"[su](general.html#su)"。要将名为lucky的用户添加到wheel组，以root身份登录并输入：
- en: '[PRE30]'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
