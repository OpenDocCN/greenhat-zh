- en: Chapter 4\. COURIER - AUTHLIB 0.60.2
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第4章\. COURIER - AUTHLIB 0.60.2
- en: '[HTTP://WWW.COURIER-MTA.ORG/AUTHLIB](HTTP://WWW.COURIER-MTA.ORG/AUTHLIB)'
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[HTTP://WWW.COURIER-MTA.ORG/AUTHLIB](HTTP://WWW.COURIER-MTA.ORG/AUTHLIB)'
- en: 4.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.1\. 摘要
- en: Courier-authlib (the Courier Authentication Library) provides authentication
    functionality for Courier-IMAP Server (see "Courier-IMAP Server 4.3.0" page 43).
    This package makes it possible for Courier-IMAP to authenticate users against
    the system password file in /etc/master.passwd. The master password file stores
    passwords for all user accounts on the system.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-authlib（Courier认证库）为Courier-IMAP服务器提供认证功能（见“Courier-IMAP服务器4.3.0”页面43）。此软件包使得Courier-IMAP能够对位于`/etc/master.passwd`的系统密码文件进行用户认证。主密码文件存储系统中所有用户账户的密码。
- en: Courier-IMAP Server includes both an IMAP (Internet Message Access Protocol)
    and POP3 (Post Office Protocol version 3) server implementation, and both rely
    on Courier-authlib for authentication. Username and password information is compared
    against the system password file located in /etc/master.passwd using Courier-authlib's
    `authpam` authentication module. Courier-authlib then consults FreeBSD's built-in
    PAM (Pluggable Authentication Modules) library to authenticate. If authentication
    is successful, the user is allowed to access services offered by Courier-IMAP.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-IMAP服务器包含IMAP（互联网消息访问协议）和POP3（邮局协议第3版）服务器实现，并且两者都依赖于Courier-authlib进行认证。用户名和密码信息将与位于`/etc/master.passwd`的系统密码文件进行比较，使用Courier-authlib的`authpam`认证模块。然后Courier-authlib将咨询FreeBSD内置的PAM（可插拔认证模块）库进行认证。如果认证成功，用户将被允许访问Courier-IMAP提供的服务。
- en: 4.2\. RESOURCES
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.2\. 资源
- en: Courier Authentication Library Documentation
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Courier认证库文档
- en: '[http://www.courier-mta.org/authlib/documentation.html](http://www.courier-mta.org/authlib/documentation.html)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.courier-mta.org/authlib/documentation.html](http://www.courier-mta.org/authlib/documentation.html)'
- en: 4.3\. REQUIRED
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.3\. 必需
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![图片](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD
    7.0-RELEASE（见“[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)”）'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![图片](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 更新的ports集合（见“[FreeBSD
    Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)”）'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 互联网连接'
- en: 4.4\. PREPARATION
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.4\. 准备
- en: Become the superuser.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: 4.5\. INSTALL
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.5\. 安装
- en: 'To begin the Courier-authlib installation process, enter the following commands:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始Courier-authlib的安装过程，请输入以下命令：
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A menu should appear showing options for Courier-authlib. We will not need any
    of these optional authentication modules, so press [tab] to highlight OK and then
    press [enter].
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 应该会出现一个菜单，显示Courier-authlib的选项。我们不需要这些可选认证模块，所以按[tab]键高亮显示“确定”，然后按[enter]键。
- en: 4.6\. CONFIGURE
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.6\. 配置
- en: Once the installation process is complete, it's time to configure the authentication
    daemon for use on your system.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候为您的系统配置认证守护进程了。
- en: We will only use the `authpam` method of authentication.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将仅使用`authpam`认证方法。
- en: The next steps remove extraneous authentication modules listed in the authdaemonrc
    configuration file to prevent authdaemond from generating errors in the maillog
    file.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步将移除authdaemonrc配置文件中列出的多余认证模块，以防止authdaemond在maillog文件中生成错误。
- en: 'Open authdaemonrc:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开authdaemonrc：
- en: '[PRE1]'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Remove the names of all authentication modules in the `authmodulelist` declaration
    (~27) except for `authpam`. The `authmodulelist` declaration should now look like
    this:'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`authmodulelist`声明中（~27）移除所有认证模块的名称，除了`authpam`。`authmodulelist`声明现在应如下所示：
- en: '[PRE2]'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Save and exit.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 4.7\. TESTING
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.7\. 测试
- en: In this section, we'll perform a basic test to confirm that Courier-authlib
    starts properly.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将进行基本测试以确认Courier-authlib启动正常。
- en: 'Configure Courier-authlib to start automatically at system startup. To load
    the Courier-authlib daemon at boot time, open rc.conf:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Courier-authlib配置为在系统启动时自动启动。要加载Courier-authlib守护进程在启动时，打开rc.conf：
- en: '[PRE3]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'and add the following line:'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下行：
- en: '[PRE4]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Save and exit.
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 'Start the Courier-authlib daemon and verify that it is running:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动Courier-authlib守护进程并验证其是否正在运行：
- en: '[PRE5]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'If startup is successful, the output of the second command should read:'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果启动成功，第二个命令的输出应读取：
- en: '[PRE6]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Your pid (process ID) will be different.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您的进程ID（PID）将不同。
- en: 4.8\. CONFIG FILES
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.8. 配置文件
- en: /usr/local/etc/authlib/authdaemonrc
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/authlib/authdaemonrc
- en: Contains configuration information for authdaemond
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 包含 authdaemond 的配置信息
- en: 4.9\. LOG FILES
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.9. 日志文件
- en: /var/log/maillog
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/maillog
- en: A general log of email activity that includes information from authdaemond
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 包含来自 authdaemond 信息的电子邮件活动通用日志
