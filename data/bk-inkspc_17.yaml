- en: Chapter 17. Filters
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第17章。过滤器
- en: 'Inkscape filters are a way to apply complex bitmap processing algorithms to
    the objects in your drawing. True to the vector spirit, filters are nondestructive:
    You can always change the parameters of any filter, and the original vector object
    remains fully editable. Examples of what filters can do include blurring, sharpening,
    color adjustments, adding texture, various distortions, 3D-like effects such as
    bevels, and many others. Moreover, you can combine filters into arbitrarily complex
    *filter stacks*.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Inkscape的过滤器是一种将复杂的位图处理算法应用于绘图对象中的方法。忠实于矢量精神，过滤器是非破坏性的：您可以随时更改任何过滤器的参数，原始矢量对象仍然可以完全编辑。过滤器可以做到的事情包括模糊、锐化、颜色调整、添加纹理、各种扭曲、类似于3D的斜面效果以及许多其他效果。此外，您可以将过滤器组合成任意复杂的*过滤器堆栈*。
- en: SVG filters (as defined by the SVG standard and implemented by Inkscape) are
    extremely powerful; a whole book could be written on their uses and capabilities.
    Unfortunately, they can also be quite technical, especially if you’re trying to
    compose your own filter stacks. Therefore, in this chapter, we will start by looking
    at some simple ways to use filters, such as the **Blur** control (**[17.1 Blur](ch17s01.html
    "17.1 Blur")**) and preset filter effects (**[17.3 Preset Filters](ch17s03.html
    "17.3 Preset Filters")**). Then, for those who seek more flexibility and are not
    afraid to go technical, we will discuss the powerful **Filter Editor** dialog
    (**[17.4 The Filter Editor Dialog](ch17s04.html "17.4 The Filter Editor Dialog")**),
    which enables you to create your own filter stacks from standard filter primitives.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: SVG过滤器（由SVG标准定义并由Inkscape实现）非常强大；一本整本书都可以写它们的用途和能力。不幸的是，它们也可能相当技术性，尤其是如果您试图自己组合过滤器堆栈。因此，在本章中，我们将首先探讨一些简单使用过滤器的方法，例如**模糊**控制（**[17.1
    模糊](ch17s01.html "17.1 模糊")**）和预设过滤器效果（**[17.3 预设过滤器](ch17s03.html "17.3 预设过滤器")**）。然后，对于那些寻求更多灵活性和不怕技术性的人，我们将讨论强大的**过滤器编辑器**对话框（**[17.4
    过滤器编辑器对话框](ch17s04.html "17.4 过滤器编辑器对话框")**），它允许您从标准过滤器原语创建自己的过滤器堆栈。
- en: 17.1 Blur
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 17.1 模糊
- en: 'We have seen blurring used many times throughout this book. Properly called
    *Gaussian blur* (named after Carl Friedrich Gauss, a German mathematician), this
    effect smoothly “dissolves” the object, as if viewing it through an out-of-focus
    lens. **Blur** is only one of the 14 filter primitives that Inkscape supports—but
    of all these primitives, **Blur** has by far the most user-friendly interface:
    You can adjust it, for any object at any time, with a simple slider in the **Fill
    and Stroke** dialog:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本书中多次看到了模糊的使用。正确地称为*高斯模糊*（以德国数学家卡尔·弗里德里希·高斯命名），这种效果平滑地“溶解”了对象，就像通过一个失焦的镜头观看它一样。**模糊**是Inkscape支持的14个过滤器原语之一——但在所有这些原语中，**模糊**拥有最用户友好的界面：您可以在**填充和描边**对话框中，通过简单的滑块随时调整任何对象：
- en: '![The Blur slider in the Fill and Stroke dialog](httpatomoreillycomsourcenostarchimages1736286.png.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![填充和描边对话框中的模糊滑块](httpatomoreillycomsourcenostarchimages1736286.png.jpg)'
- en: Figure 17-1. The Blur slider in the Fill and Stroke dialog
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-1。填充和描边对话框中的模糊滑块
- en: 'One might thus say that Inkscape treats blur as a fundamental property of an
    object, just like its opacity. Why this special treatment? On one hand, it is
    because blurring an object is such a natural, basic operation. Blurring is everywhere
    in the physical world: Non-crisp shadows, glows, and things viewed out of focus
    or in motion are all renderable with blur. This filter is therefore absolutely
    essential if you want to draw anything photorealistic. On the other hand, blur
    is not something you can easily imitate with regular vector shapes or gradients.
    So, by adding just one easily accessible slider, Inkscape’s capabilities expand
    enormously.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，可以说Inkscape将模糊视为对象的基本属性之一，就像它的不透明度一样。为什么会有这种特殊处理？一方面，这是因为模糊对象是一种非常自然、基本操作。模糊在物理世界中无处不在：非清晰的阴影、发光以及模糊或移动中的物体都可以通过模糊来渲染。因此，如果您想绘制任何逼真的图像，这个过滤器是绝对必要的。另一方面，模糊不是您可以用常规矢量形状或渐变轻松模仿的东西。因此，通过添加一个易于访问的滑块，Inkscape的功能得到了极大的扩展。
- en: The **Blur** slider controls the *amount* of blur in a range from 0 to 100 percent;
    the setting of 1 percent barely changes the appearance of an object, and 100 percent
    turns any object into a shapeless puff. The percentage makes sure that this scale
    works the same for objects of any size; in other words, a large object blurred
    by 10% has a larger *absolute* amount of blur (larger *blur radius*), but it looks
    exactly proportional to a small object that is also blurred by 10 percent. If
    you want to get the same blur radius in objects of different sizes, you need to
    use different blur amounts.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '**模糊**滑块控制模糊的**量**，范围从0到100%；1%的设置几乎不会改变对象的外观，而100%则将任何对象变成无形状的团块。百分比确保这个比例对任何大小的对象都起作用；换句话说，一个被10%模糊的大对象有更大的**绝对**模糊量（更大的模糊半径），但它看起来与也被10%模糊的小对象完全成比例。如果你想在不同大小的对象中获得相同的模糊半径，你需要使用不同的模糊量。'
- en: '![Blur amount (same in A and B) and blur radius (same in A and C)](httpatomoreillycomsourcenostarchimages1736288.png.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![模糊量（A和B相同）和模糊半径（A和C相同）](httpatomoreillycomsourcenostarchimages1736288.png.jpg)'
- en: Figure 17-2. Blur amount (same in A and B) and blur radius (same in A and C)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-2. 模糊量（A和B相同）和模糊半径（A和C相同）
- en: As you will notice, blurring an object affects its bounding box (only if the
    visual bounding box type is used, **[4.2 The Bounding Box](ch04s02.html "4.2 The
    Bounding Box")**). The expanded bounding box will cover all of the blurred fringe
    of the object.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 你会注意到，模糊一个对象会影响其边界框（只有当使用视觉边界框类型时，**[4.2 边界框](ch04s02.html "4.2 边界框")**）。扩展的边界框将覆盖对象的全部模糊边缘。
- en: Each blurred object is processed separately, as if on its own, fully transparent
    layer, and thus it never “smears” any adjacent nonblurred objects. Since that
    per-object layer is by itself transparent, the edges of a blurred object become
    partially translucent. However, you can blur a group, and in that case, all members
    of the group are blurred together, as if placed on a single layer that is blurred
    as a whole. In [Figure 17-3](ch17s01.html#blurring_separate_objects_vsdot_blurring
    "Figure 17-3. Blurring separate objects vs. blurring a group"), on the left there
    are two adjacent rectangles with no gap between them and no blur. In the middle,
    each rectangle is blurred by 20 percent separately; as you can see, the striped
    background can be seen through the blurry gap between the objects. On the right,
    however, the same two rectangles are first grouped and then the group is blurred
    by 20 percent; now there is no gap—blurring only adds transparency at the edges,
    but it cannot reveal what was completely covered by the center of the opaque group.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 每个模糊的对象都是单独处理的，就像它自己的完全透明的层一样，因此它永远不会“涂抹”任何相邻的非模糊对象。由于该对象的每一层本身是透明的，模糊对象的边缘就变得部分半透明。然而，你可以模糊一个组，在这种情况下，组中的所有成员都会一起模糊，就像它们被放置在一个整体模糊的单层上。在[图17-3](ch17s01.html#blurring_separate_objects_vsdot_blurring
    "图17-3. 模糊单独的对象与模糊一个组")中，左侧有两个相邻的矩形，它们之间没有间隙也没有模糊。在中间，每个矩形分别模糊了20%；正如你所看到的，条纹背景可以通过物体之间的模糊间隙看到。然而，在右侧，相同的两个矩形首先被分组，然后整个组以20%的百分比模糊；现在没有间隙——模糊只会在边缘添加透明度，但它不能揭示被不透明组中心完全覆盖的内容。
- en: '![Blurring separate objects vs. blurring a group](httpatomoreillycomsourcenostarchimages1736290.png.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![模糊单独的对象与模糊一个组](httpatomoreillycomsourcenostarchimages1736290.png.jpg)'
- en: Figure 17-3. Blurring separate objects vs. blurring a group
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-3. 模糊单独的对象与模糊一个组
- en: Also, grouping allows you to apply several layers of blurring to the same object.
    For example, you can blur the object itself, then group it (possibly even just
    with itself, that is, placing a single object into the group) and blur the group.
    Naturally, by blurring a group, you can make any member objects *more* blurred
    than they were before, but not *less*. (Similarly, as we saw in **[16.3 Styling
    Clones](ch16s03.html "16.3 Styling Clones")**, you can blur a clone more than
    its original object was blurred, but not less.)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，分组允许你将多个模糊层应用于同一对象。例如，你可以先模糊对象本身，然后将其分组（可能甚至只是与自身分组，即把单个对象放入组中）并模糊该组。自然地，通过模糊一个组，你可以使任何成员对象比之前更模糊，但不能更模糊。（同样，正如我们在**[16.3
    样式克隆](ch16s03.html "16.3 样式克隆")**中看到的，你可以使克隆比原始对象模糊更多，但不能更少。）
- en: Note
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Blur is not the same as* feathering*. Blur affects all of the object; in particular,
    the lines on a bitmap object or the object boundaries inside a complex group are
    all blurred. Feathering, on the other hand, is simply blurred transparency that
    masks out the outermost edges of an object (such as a photo). Inkscape can do
    feathering as well, using a predefined composite filter (**[17.3 Preset Filters](ch17s03.html
    "17.3 Preset Filters")**).*'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '*模糊与羽化不同**。模糊影响整个对象；特别是位图对象上的线条或复杂组内的对象边界都会被模糊。另一方面，羽化仅仅是模糊的透明度，它遮盖了对象的边缘（如照片）。Inkscape
    也可以使用预定义的复合滤镜进行羽化（**[17.3 预设滤镜](ch17s03.html "17.3 预设滤镜")**）。*'
- en: '![Blurring vs. feathering](httpatomoreillycomsourcenostarchimages1736292.png.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![模糊与羽化](httpatomoreillycomsourcenostarchimages1736292.png.jpg)'
- en: Figure 17-4. Blurring vs. feathering
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-4. 模糊与羽化
- en: 17.1.1 Blur and Transformations
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 17.1.1 模糊和变换
- en: What happens if you transform a blurred object?
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你变换一个模糊对象会发生什么？
- en: 'Moving a blurred object is not very interesting: The object just moves as a
    whole, remaining as blurred as ever. Proportional (uniform) scaling also scales
    the object as a whole, including the blur radius, so that the amount of blur stays
    the same as it is relative to the object size (i.e., the percentage indicator
    in the **Fill and Stroke** dialog does not change).'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 移动一个模糊的对象并不很有趣：对象只是整体移动，保持与之前一样的模糊。成比例（均匀）缩放也会将对象整体缩放，包括模糊半径，因此模糊量相对于对象大小保持不变（即，**填充和描边**对话框中的百分比指示器不会改变）。
- en: 'Nonuniform scaling is more interesting. For example, if you squeeze a blurred
    object vertically, its blur will squeeze with it and become *nonuniform*—now the
    object is more blurred horizontally than vertically. Such nonuniform blur is sometimes
    called *motion blur* because it approximates the way the object would look on
    a photo when captured in fast motion (in this case, horizontal). So, if you want
    to apply a motion blur to the original nonsqueezed object, simply start by stretching
    it in the opposite direction, then blur it, and squeeze it back into shape (this
    only works for paths and bitmaps):'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 非均匀缩放更有趣。例如，如果你垂直挤压一个模糊对象，它的模糊也会随之挤压并变得**非均匀**——现在对象在水平方向上的模糊比垂直方向上更多。这种非均匀模糊有时被称为**运动模糊**，因为它近似了在快速运动（在这种情况下，水平方向）中捕捉到的对象在照片上的外观。因此，如果你想对原始未挤压的对象应用运动模糊，只需先将其向相反方向拉伸，然后模糊它，最后将其挤压回形状（这仅适用于路径和位图）：
- en: '![Motion blur, step-by-step](httpatomoreillycomsourcenostarchimages1736294.png.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![逐步展示运动模糊](httpatomoreillycomsourcenostarchimages1736294.png.jpg)'
- en: Figure 17-5. Motion blur, step-by-step
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-5. 逐步展示运动模糊
- en: Another way to create nonuniform motion blur is by adjusting the parameters
    of the **Gaussian Blur** filter in the **Filter Editor** dialog (**[17.4 The Filter
    Editor Dialog](ch17s04.html "17.4 The Filter Editor Dialog")**), but the stretch/squeeze
    method described here is usually easier.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种创建非均匀运动模糊的方法是通过调整**滤镜编辑器**对话框中**高斯模糊**滤镜的参数（**[17.4 滤镜编辑器对话框](ch17s04.html
    "17.4 滤镜编辑器对话框")**），但这里描述的拉伸/挤压方法通常更容易。
- en: Note
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*If you’re interested in how this works at the SVG level, the trick is to make
    sure the blur is applied to an object with a* `transform` *attribute (**[A.7 Transformations](apas07.html
    "A.7 Transformations")**), which assures that the blur will be affected by that
    transform as well. When you stretch a path object without blur, this stretching
    is by default embedded into the points of the path (**[12.5.7.3 Transforming Nodes](ch12s05.html#one2dot5dot7dot3_transforming_nodes
    "12.5.7.3 Transforming Nodes")**); but once you apply the blur, reverse squeezing
    will instead add the* `transform` *attribute, affecting the blur as well.*'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果你对在 SVG 层面上如何实现这一点感兴趣，关键是要确保模糊应用于具有* `transform` *属性的**对象**（**[A.7 变换](apas07.html
    "A.7 变换")**），这样可以确保模糊也会受到该变换的影响。当你拉伸一个没有模糊的路径对象时，这种拉伸默认嵌入到路径的点中（**[12.5.7.3 节点变换](ch12s05.html#one2dot5dot7dot3_transforming_nodes
    "12.5.7.3 节点变换")**）；但是一旦应用了模糊，反向挤压将相反地添加* `transform` *属性，影响模糊。*'
- en: 'To create motion blur on a group or text object (i.e., not a path or bitmap),
    use this trick: Stretch the object, then group it (![](httpatomoreillycomsourcenostarchimages1735504.png.jpg),
    **[4.5 Groups](ch04s05.html "4.5 Groups")**), apply a blur to the group, and squeeze
    it back. The grouping step makes sure that in the end, you get an object with
    the correct proportions but also with the squeezing `transform` attribute affecting
    the blur.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要在组或文本对象（即不是路径或位图）上创建运动模糊，请使用这个技巧：拉伸对象，然后将其分组（![](httpatomoreillycomsourcenostarchimages1735504.png.jpg)，**[4.5
    组](ch04s05.html "4.5 组")**），对组应用模糊，然后将其挤压回去。分组步骤确保最终得到一个具有正确比例的对象，同时挤压`转换`属性也会影响模糊效果。
- en: Similar remarks apply to the way many other filters behave when transformed.
    For example, squeezing and/or rotating objects allows you to create perspective-distorted
    variants of the texture filters (**[17.3 Preset Filters](ch17s03.html "17.3 Preset
    Filters")**) for applying to walls and floors in 3D scenes (**[11.3 3D Boxes](ch11s03.html
    "11.3 3D Boxes")**). Of course, transforming filters by stretching and squeezing
    objects is not as convenient as dragging handles on canvas would be—but it works.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 类似的评论也适用于许多其他过滤器在转换时的行为。例如，挤压和/或旋转对象可以使你创建纹理过滤器的透视扭曲变体（**[17.3 预设过滤器](ch17s03.html
    "17.3 预设过滤器")**），以便应用于3D场景中的墙壁和地板（**[11.3 3D盒子](ch11s03.html "11.3 3D Boxes")**）。当然，通过拉伸和挤压对象来转换过滤器并不像在画布上拖动手柄那样方便——但它有效。
- en: Note
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Filters work on the rendered image of the object on your screen—that is, they
    are always given as input a bitmap that is created for the current zoom level.
    This is why filters may be so slow: Every time you zoom in or out, the filter
    is reapplied to the new rendering of the object. This also explains why some filters
    may look somewhat different depending on zoom. For example, a sharpening filter,
    when applied to a bitmap object at 100 percent zoom, works on the image features
    as you would expect it to. However, if you zoom in close enough, you will see
    the pixels of the bitmap object as rectangles (**[1.1 What Vector Graphics Is
    and Why It Matters](ch01s01.html "1.1 What Vector Graphics Is and Why It Matters")**),
    and the sharpening will now apply to the borders of these pixel rectangles!*'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '*过滤器作用于屏幕上对象的渲染图像——也就是说，它们总是以位图的形式作为输入，这是为当前缩放级别创建的。这就是为什么过滤器可能如此慢的原因：每次你放大或缩小，过滤器都会重新应用于对象的新的渲染。这也解释了为什么某些过滤器可能根据缩放看起来有些不同。例如，当在100%缩放时应用于位图对象的锐化过滤器，其工作方式正如你所期望的那样。然而，如果你足够接近地放大，你将看到位图对象的像素作为矩形（**[1.1
    矢量图形是什么以及为什么它很重要](ch01s01.html "1.1 矢量图形是什么以及为什么它很重要")**），锐化现在将应用于这些像素矩形的边缘！*'
- en: 17.1.2 Tweaking for Blur
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 17.1.2 模糊调整
- en: The Blur mode of the Tweak tool blurs the selected objects under the brush more
    (by default) or less (with ![](httpatomoreillycomsourcenostarchimages1735338.png.jpg)
    pressed). The amount of blur added or removed depends on **Force**, pen pressure
    (if you’re using a tablet pen), the closeness of the object to the center of brush,
    and how long you apply the brush.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 调整工具的模糊模式会在画笔下的所选对象上应用更多的模糊（默认情况下）或更少的模糊（当按下![](httpatomoreillycomsourcenostarchimages1735338.png.jpg)时）。添加或移除的模糊量取决于**力量**、笔压（如果你使用的是平板笔）、对象与画笔中心的接近程度以及你应用画笔的时间。
- en: 17.2 Blend Modes
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 17.2 混合模式
- en: Blend modes are another type of filter for which Inkscape has a dedicated control.
    Choosing a blend mode affects how the colors of an object *blend* (i.e., mix)
    with those of the background objects beneath it.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 混合模式是另一种类型的过滤器，Inkscape有专门的控件来处理。选择混合模式会影响对象的颜色如何与下方的背景对象混合（即混合）。
- en: However, unlike blur, which can be applied to any single object, Inkscape allows
    you to assign blend modes only to layers (**[4.6 Layers](ch04s06.html "4.6 Layers")**);
    the corresponding control is in the **Layers** dialog. This has its reasons in
    the way SVG treats these filters; for you, this means that you can only change
    the blending mode of all objects in a layer at once, and that blending mode will
    affect how the objects in this layer blend with those in layers below, not between
    themselves.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，与可以应用于任何单个对象的模糊不同，Inkscape只允许你将混合模式分配给图层（**[4.6 图层](ch04s06.html "4.6 图层")**）；相应的控件在**图层**对话框中。这在SVG处理这些过滤器的方式中有其原因；对你来说，这意味着你只能一次性更改图层中所有对象的混合模式，并且该混合模式将影响该图层中的对象如何与下层的对象混合，而不是它们之间。
- en: 'The five blend modes are: Normal (default; switch to this option to remove
    any unusual blending), Multiply, Screen, Darken, and Lighten. In Normal mode,
    only non-100 percent opacity allows the objects in the top layer to be translucent;
    in all other modes, bottom-layer objects can “show through” even without any transparency.
    Here is a demonstration:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 五种混合模式包括：正常（默认；切换到此选项以移除任何不寻常的混合），乘法，屏幕，变暗，和变亮。在正常模式下，只有非100%不透明度才能使顶层中的对象呈现半透明；在其他所有模式下，底层对象即使没有任何透明度也能“透过来”。以下是一个演示：
- en: '![All large rectangles are in the background layer, all small rectangles are
    in foreground layers with various blend modes set; opacity is 100% everywhere.](httpatomoreillycomsourcenostarchimages1736296.png.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![所有大矩形都在背景层，所有小矩形都在前景层，并设置了各种混合模式；各处的透明度都是100%。](httpatomoreillycomsourcenostarchimages1736296.png.jpg)'
- en: Figure 17-6. All large rectangles are in the background layer, all small rectangles
    are in foreground layers with various blend modes set; opacity is 100% everywhere.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-6。所有大矩形都在背景层，所有小矩形都在前景层，并设置了各种混合模式；各处的透明度都是100%。
- en: Perhaps the most common application of blend modes is for tinting bitmaps. For
    example, imagine you have a color photo but want to render it completely or nearly
    monochrome, for example, in sepia or blue tones, to match the color scheme of
    your composition.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 混合模式最常见的一个应用可能是用于着色位图。例如，想象你有一张彩色照片，但想将其完全或几乎变为单色，例如，使用棕褐色或蓝色色调，以匹配你的构图色彩方案。
- en: Of course, you can just overlay a semi-transparent rectangle of the target color
    over your bitmap, but that does not entirely get rid of the bitmap’s own color;
    worse, the bitmap fades out and loses contrast. You can also adjust the colors
    of the bitmap in an external bitmap editor (if it’s not yet embedded into your
    SVG, **[18.2 Linking vs. Embedding](ch18s02.html "18.2 Linking vs. Embedding")**),
    or you can use a predefined composite filter such as Sepia, but these options
    are not as flexible. Instead, place the photo on one layer and the colored rectangle
    on its own layer above, and change the blend mode of that top layer (see Figure
    13 on the color insert).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你可以在位图上叠加一个半透明的目标颜色矩形，但这并不能完全去除位图本身的颜色；更糟糕的是，位图会褪色并失去对比度。你还可以在外部位图编辑器中调整位图的颜色（如果它尚未嵌入到你的SVG中，**[18.2
    链接与嵌入](ch18s02.html "18.2 链接与嵌入")**），或者你可以使用预定义的合成过滤器，如棕褐色，但这些选项不够灵活。相反，将照片放在一个层上，将着色矩形放在其上方的单独层上，并更改该顶层（见图13的颜色插入）的混合模式。
- en: The **Multiply** and **Darken** modes apply tinting primarily to the *light*
    areas of the photo. Therefore, if the tint color is itself light, it will nicely
    color your photo while preserving its contrast; if the tint color is dark, the
    result will likely be too dark.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**乘法**和**变暗**模式主要对照片的**亮**区域进行着色。因此，如果着色颜色本身较亮，它将很好地着色你的照片同时保留其对比度；如果着色颜色较暗，结果可能会过暗。'
- en: The difference between Multiply and Darken is that for each pixel, Darken just
    chooses whichever of the background and foreground colors is darker, whereas Multiply
    actually combines the two colors. Try both and choose whichever suits your photo.
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 乘法和变暗之间的区别在于，对于每个像素，变暗只是选择背景和前景颜色中较暗的一个，而乘法实际上是将两种颜色结合起来。尝试两者，并选择适合你照片的一个。
- en: The **Screen** and **Lighten** modes apply tinting primarily to the *dark* areas
    of the photo. Therefore, if the tint color is itself dark, it will nicely color
    the photo while preserving its contrast; if the tint color is light, it will just
    “bleach out” the photo, making it too light overall.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**屏幕**和**变亮**模式主要对照片的**暗**区域进行着色。因此，如果着色颜色本身较暗，它将很好地着色照片同时保留其对比度；如果着色颜色较亮，它将只是“漂白”照片，使其整体过亮。'
- en: Again, the difference between Screen and Lighten is that for each pixel, Lighten
    just chooses whichever of the background and foreground colors is lighter, whereas
    Screen actually combines the two colors. Try both and choose whichever suits your
    photo.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 再次，屏幕和变亮之间的区别在于，对于每个像素，变亮只是选择背景和前景颜色中较亮的一个，而屏幕实际上是将两种颜色结合起来。尝试两者，并选择适合你照片的一个。
- en: Summarizing, if your tint color is dark, use the Screen or Lighten modes; if
    it is light, use Multiply or Darken. Change the opacity of the tint layer object
    to adjust the amount of tinting.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，如果你的着色颜色较暗，使用屏幕或变亮模式；如果它较亮，使用乘法或变暗模式。通过调整着色层对象的透明度来调整着色量。
- en: 17.3 Preset Filters
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 17.3 预设过滤器
- en: 'Inkscape comes with an extensive collection of preset composite filters. To
    apply a preset filter to any number of selected objects, just choose a command
    from the submenus of the **Filters** menu. Most filters will apply immediately;
    a few will first display a simple dialog where you can adjust their parameters,
    similar to any other extension effects (see **[13.3 Path Extensions](ch13s03.html
    "13.3 Path Extensions")**; such filters have an “. . .” at the end of their names
    in the menu):'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 'Inkscape 随附了大量的预设组合过滤器。要将预设过滤器应用于任意数量的选定对象，只需从**过滤器**菜单的子菜单中选择一个命令。大多数过滤器将立即应用；少数过滤器首先会显示一个简单的对话框，您可以在其中调整它们的参数，类似于任何其他扩展效果（见**[13.3
    路径扩展](ch13s03.html "13.3 路径扩展")**；此类过滤器在菜单中的名称末尾有“...”）： '
- en: '![Preset filter effects](httpatomoreillycomsourcenostarchimages1736298.png.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![预设过滤器效果](httpatomoreillycomsourcenostarchimages1736298.png.jpg)'
- en: Figure 17-7. Preset filter effects
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-7. 预设过滤器效果
- en: 'To get a brief description of an individual preset filter (or of any menu command,
    for that matter), just hover the mouse over its command in the menu and read the
    status bar. I will not describe all preset filters here; there are dozens of them,
    and more are added with each Inkscape version. Instead, here is a brief description
    of the submenus that group together similar filters:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取单个预设过滤器的简要描述（或任何菜单命令，无论如何），只需将鼠标悬停在菜单中的命令上并阅读状态栏。在此处，我将不会描述所有预设过滤器；它们有数十个，并且每个
    Inkscape 版本都会添加更多。相反，这里是对分组相似过滤器的子菜单的简要描述：
- en: 'The **ABCs** submenu collects the most used, simple, basic filters that typically
    contain just one or two primitives. They include:'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ABC**子菜单收集了最常用的简单基本过滤器，通常只包含一个或两个基本形状。它们包括：'
- en: Smoke-like “fractal noise” texture applied either to fill (**Noise Fill**) or
    to transparency (**Noise Transparency**).
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类似烟雾的“分形噪声”纹理应用于填充（**噪声填充**）或透明度（**噪声透明度**）。
- en: 3D bevel with gloss (**Specular Light**) or without gloss (**Diffuse Light**).
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有光泽（**镜面光**）或无光泽（**漫射光**）的3D斜面。
- en: '**Feather** ([Figure 17-4](ch17s01.html#blurring_vsdot_feathering "Figure 17-4. Blurring
    vs. feathering")) applies a blurred opacity mask to the edges of the object.'
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**羽毛** ([图17-4](ch17s01.html#blurring_vsdot_feathering "图17-4. 模糊与羽化")) 将模糊的不透明度蒙版应用于对象的边缘。'
- en: '**Roughen** randomly distorts the shape of the object.'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**粗糙化**随机扭曲对象的形状。'
- en: '**Simple Blur** adds a small amount of Gaussian blur (**[17.1 Blur](ch17s01.html
    "17.1 Blur")**).'
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**简单模糊**添加少量高斯模糊（**[17.1 模糊](ch17s01.html "17.1 模糊")**）。'
- en: Most often, these filters are used not on their own but as components in more
    complex filters that you can build just by layering multiple preset filters on
    top of one another. You can even roughly adjust the amount of a filter by applying
    it multiple times to the same object (for more precise adjustments of filter parameters,
    you will need to visit the **Filter Editor**, **[17.4 The Filter Editor Dialog](ch17s04.html
    "17.4 The Filter Editor Dialog")**).
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通常，这些过滤器不是单独使用，而是作为更复杂过滤器的组成部分，您只需通过将多个预设过滤器堆叠在一起即可构建这些过滤器。您甚至可以通过多次将过滤器应用于同一对象来大致调整过滤器的数量（对于更精确的过滤器参数调整，您需要访问**过滤器编辑器**，**[17.4
    过滤器编辑器对话框](ch17s04.html "17.4 过滤器编辑器对话框")**）。
- en: '![Filters from the ABCs submenu](httpatomoreillycomsourcenostarchimages1736300.png.jpg)'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![ABC子菜单中的过滤器](httpatomoreillycomsourcenostarchimages1736300.png.jpg)'
- en: Figure 17-8. Filters from the ABCs submenu
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-8. ABC子菜单中的过滤器
- en: 'The **Bevels** submenu presents many variations on the theme of bevels (pseudo-3D
    raised edges): Here you will find opaque and translucent materials, glossy and
    matte finishes, bevels lit by multiple sources of light, with and without shadows,
    with depressions in the middle and with raised border, and so on. All these filters
    mostly preserve the original color of the object, though they may make it lighter
    or darker in places for the 3D effect.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**斜面**子菜单展示了斜面主题（伪3D凸边）的许多变体：在这里，您将找到不透明和半透明的材料，有光泽和无光泽的表面处理，由多个光源照亮的斜面，带阴影和不带阴影，中间有凹槽和凸边等。所有这些过滤器大多保留了对象的原始颜色，尽管它们可能在某些地方使其变亮或变暗以产生3D效果。'
- en: '![Filters from the Bevels submenu](httpatomoreillycomsourcenostarchimages1736302.png.jpg)'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![斜面子菜单中的过滤器](httpatomoreillycomsourcenostarchimages1736302.png.jpg)'
- en: Figure 17-9. Filters from the Bevels submenu
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-9. 斜面子菜单中的过滤器
- en: Note
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*If you want to change the direction of the light cast upon a bevelled object,
    open the **Filter Editor**, select the **Specular Light** or **Diffuse Light**
    primitive in the filter stack applied to the object, and adjust the **Azimuth**
    parameter.*'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*如果您想改变投射到斜面对象上的光的方向，打开**过滤器编辑器**，选择应用在对象上的过滤器堆栈中的**镜面光**或**漫射光**原语，并调整**方位角**参数。*'
- en: The **Blurs** submenu offers horizontal and vertical motion blur, soft blurry
    glow behind an object, different approaches to blurring the inside color boundary
    of the object while keeping its outline crisp (**Evanescence**, **Blur Content**,
    and **Cross-Smooth**), **Noisy Blur** that combines shape distortion with blurring,
    and some other filters ([Figure 17-10](ch17s03.html#filters_from_the_blurs_submenu
    "Figure 17-10. Filters from the Blurs submenu")).
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模糊**子菜单提供水平和垂直运动模糊，对象后面的柔和模糊光，不同的方法来模糊对象内部的颜色边界同时保持其轮廓清晰（**消逝**，**模糊内容**和**交叉平滑**），**噪点模糊**结合形状扭曲和模糊，以及一些其他过滤器（[图17-10](ch17s03.html#filters_from_the_blurs_submenu
    "图17-10. 来自“模糊”子菜单的过滤器")）。'
- en: '![Filters from the Blurs submenu](httpatomoreillycomsourcenostarchimages1736304.png.jpg)'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“模糊”子菜单的过滤器](httpatomoreillycomsourcenostarchimages1736304.png.jpg)'
- en: Figure 17-10. Filters from the Blurs submenu
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-10. 来自“模糊”子菜单的过滤器
- en: '**Color** submenu contains filters that only modify the colors of the object
    they apply to. Here you will find **Desaturate** for turning any object to grayscale,
    **Sepia**, **Invert** and **Invert Hue**, various colorization filters (**Colorize**,
    **Solarize**, **Moonarize**), and others.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**颜色**子菜单包含仅修改应用对象颜色的过滤器。在这里，您可以找到将任何对象转换为灰度的**去饱和度**，**棕褐色**，**反转**和**反转色调**，各种着色过滤器（**着色**，**太阳能化**，**月亮化**），以及其他。'
- en: '**Distort** filters distort the shape of the object using horizontally stretched
    jitter, like a reflection in water (**Ripple**), random roughening of edges (**Torn
    Edges**), scattering of disconnected bits (**Chalk and Sponge**), or edge distortion
    in combination with uneven texture (**Pixel Smear**). The **Roughen Inside** filter
    leaves the outline intact but roughens any color boundaries inside the object.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扭曲**过滤器通过水平拉伸抖动扭曲对象的形状，就像水中的反射（**涟漪**），边缘的随机粗糙化（**撕裂边缘**），不连接的块的散射（**粉笔和海绵**），或者与不均匀纹理结合的边缘扭曲（**像素涂抹**）。**粗糙内部**过滤器保持轮廓完整，但粗糙化对象内部的任何颜色边界。'
- en: '![Filters from the Distort submenu](httpatomoreillycomsourcenostarchimages1736306.png.jpg)'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“扭曲”子菜单的过滤器](httpatomoreillycomsourcenostarchimages1736306.png.jpg)'
- en: Figure 17-11. Filters from the Distort submenu
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-11. 来自“扭曲”子菜单的过滤器
- en: '**Image Effects** are the filters that largely make sense for bitmaps, such
    as **Sharpen**, **Edge Detect**, **Emboss**, or **Oil Painting**.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**图像效果**是主要适用于位图的过滤器，例如**锐化**，**边缘检测**，**浮雕**或**油画**。'
- en: '![Filters from the Image Effects submenu](httpatomoreillycomsourcenostarchimages1736308.png.jpg)'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“图像效果”子菜单的过滤器](httpatomoreillycomsourcenostarchimages1736308.png.jpg)'
- en: Figure 17-12. Filters from the Image Effects submenu
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-12. 来自“图像效果”子菜单的过滤器
- en: The **Masking Tools** submenu contains several effects that make parts of objects
    transparent. The most basic of these, **Eraser**, makes every white area in the
    object transparent. For example, if you overlay a small white circle over a black
    rectangle, group them together, and apply **Eraser** to the group, the white circle
    will turn into a hole through which the background will show.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**遮罩工具**子菜单包含几个使对象部分透明的效果。其中最基本的是**橡皮擦**，它使对象中的所有白色区域透明。例如，如果您在黑色矩形上叠加一个小白圆圈，将它们组合在一起，并应用**橡皮擦**到组上，白色圆圈将变成一个洞，背景将通过这个洞显示出来。'
- en: 'The **Materials** submenu presents a gallery of imitations of various materials:
    wood, gold splatter, marble, wax, leopard fur, and many others. Most these filters
    discard the original color of the object and use their own color.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**材料**子菜单展示了一系列各种材料的模仿：木材，金色飞溅，大理石，蜡，豹皮，等等。大多数这些过滤器丢弃对象的原始颜色并使用它们自己的颜色。'
- en: '![Filters from the Materials submenu](httpatomoreillycomsourcenostarchimages1736310.png.jpg)'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“材料”子菜单的过滤器](httpatomoreillycomsourcenostarchimages1736310.png.jpg)'
- en: Figure 17-13. Filters from the Materials submenu
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-13. 来自“材料”子菜单的过滤器
- en: The **Morphology** submenu contains filters that deal with the shape of the
    object by cutting holes in it, adding outlines, and so on.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**形态学**子菜单包含通过在对象中切割孔洞，添加轮廓等方式处理对象形状的过滤器。'
- en: The **Non Realistic Shaders** submenu filters take a flat-colored object and
    add soft or crisp shading to it, highlighting some areas and darkening others,
    as may be useful for cartoons. This is a bit similar to thick bevels, but it goes
    deeper and produces more interesting and believable shapes.
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**非现实着色器**子菜单中的滤镜将单色对象添加柔和或清晰的阴影，突出某些区域并使其他区域变暗，这可能对卡通很有用。这与厚斜面有点相似，但它更深入，产生更有趣和逼真的形状。'
- en: '**Overlays** do not change the object itself, but treat it as a pad for displaying
    some kind of texture, adding it as an overlay on the object’s original color.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**叠加**不会改变对象本身，而是将其视为显示某种纹理的垫子，将其作为叠加添加到对象的原始颜色上。'
- en: '![Filters from the Overlays submenu](httpatomoreillycomsourcenostarchimages1736312.png.jpg)'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“叠加”子菜单的滤镜](httpatomoreillycomsourcenostarchimages1736312.png.jpg)'
- en: Figure 17-14. Filters from the Overlays submenu
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-14. 来自“叠加”子菜单的滤镜
- en: The **Ridges** submenu filters turn an object into a narrow ridge along the
    edge and treat this ridge in various ways.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**脊**子菜单中的滤镜将对象变成边缘上的狭窄脊，并以各种方式处理这个脊。'
- en: '![Filters from the Ridges submenu](httpatomoreillycomsourcenostarchimages1736314.png.jpg)'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“脊”子菜单的滤镜](httpatomoreillycomsourcenostarchimages1736314.png.jpg)'
- en: Figure 17-15. Filters from the Ridges submenu
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-15. 来自“脊”子菜单的滤镜
- en: The **Scatter** submenu filters explode an object into variously shaped fragments—tree
    leaves, cubes (looking more like squares), random spray splotches—and scatter
    these fragments randomly around.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**散射**子菜单中的滤镜将对象分解成各种形状的碎片——树叶、立方体（看起来更像正方形）、随机的喷溅斑驳，并将这些碎片随机散布。'
- en: The **Shadows and Glows** submenu filters treat the edges of the object in some
    way, usually making use of Gaussian blur. Perhaps the most widely used filters
    in this category are **Drop Shadow** and **Drop Glow**, which are identical except
    that the former creates a black shadow and the latter, a white glow (invisible
    unless you have dark background under your object). For these two filters, you
    can adjust the amount of blur, the opacity of the shadow or glow, and its offset.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**阴影和发光**子菜单中的滤镜以某种方式处理对象的边缘，通常使用高斯模糊。在这个类别中，最广泛使用的滤镜可能是**投影阴影**和**投影发光**，它们除了前者创建黑色阴影而后者创建白色发光（除非你的对象下面有深色背景，否则不可见）之外，其他都相同。对于这两个滤镜，你可以调整模糊量、阴影或发光的不透明度以及其偏移量。'
- en: '![Filters from the Shadows and Glows submenu](httpatomoreillycomsourcenostarchimages1736316.png.jpg)'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“阴影和发光”子菜单的滤镜](httpatomoreillycomsourcenostarchimages1736316.png.jpg)'
- en: Figure 17-16. Filters from the Shadows and Glows submenu
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-16. 来自“阴影和发光”子菜单的滤镜
- en: 'The **Textures** submenu contains all kinds of naturalistic textures: crumpled
    plastic, jam spread, bark, horizontally striped carpet, and many others (see [Figure 17-17](ch17s03.html#filters_from_the_textures_submenu
    "Figure 17-17. Filters from the Textures submenu")).'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**纹理**子菜单包含各种自然纹理：皱巴巴的塑料、果酱涂抹、树皮、水平条纹地毯，以及许多其他纹理（见[图17-17](ch17s03.html#filters_from_the_textures_submenu
    "图17-17. 纹理子菜单中的滤镜")）。'
- en: '![Filters from the Textures submenu](httpatomoreillycomsourcenostarchimages1736318.png.jpg)'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![来自“纹理”子菜单的滤镜](httpatomoreillycomsourcenostarchimages1736318.png.jpg)'
- en: Figure 17-17. Filters from the Textures submenu
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图17-17. 纹理子菜单中的滤镜
- en: To remove any filters applied to the selected objects, use the **Filters** ▸
    **Remove Filters** command. You can also combine preset filters in any order just
    by applying them on top of one another; for example, after you change the texture
    of an object, you can add a drop shadow to it. The **Remove Filters** command
    will remove all filters you have applied, not just the one you added last.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 要移除应用于所选对象的任何滤镜，请使用**滤镜** ▸ **移除滤镜**命令。你还可以通过将它们叠加在一起以任何顺序组合预设滤镜；例如，在你更改对象的纹理之后，你可以向其添加投影阴影。**移除滤镜**命令将移除你应用的所有滤镜，而不仅仅是最后添加的那个。
- en: 'If the scale of the applied filter is not what you need (e.g., the bubbles
    or the feathered edges are too large or too small for your object) and the filter
    does not allow you to adjust that with a dialog, you can use this simple trick:
    Scale your object up (or down), for example by pressing ![](httpatomoreillycomsourcenostarchimages1736320.png.jpg)
    or ![](httpatomoreillycomsourcenostarchimages1735600.png.jpg) a few times, then
    apply the filter, and scale the result back down (or up) by the same multiplier.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果应用过滤器的比例不是您需要的（例如，气泡或羽化边缘对于您的对象来说太大或太小）并且过滤器不允许您通过对话框进行调整，您可以使用这个简单的技巧：将对象放大（或缩小），例如通过按
    ![](httpatomoreillycomsourcenostarchimages1736320.png.jpg) 或 ![](httpatomoreillycomsourcenostarchimages1735600.png.jpg)
    几次，然后应用过滤器，并将结果按相同的倍数缩小（或放大）。
- en: The illustrations and descriptions here cover only a subset of the preset filters
    available. If you want to review all of the preset filters, load the file *filters.svg*
    from the *share/examples* directory of your Inkscape installation.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这里所述的说明和插图仅涵盖了预设过滤器的一部分。如果您想查看所有预设过滤器，请从 Inkscape 安装目录的 *share/examples* 目录中加载
    *filters.svg* 文件。
- en: Note
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*You can easily add your own preset filters to the menu—no programming required!
    Once you have an SVG file with the filters you’d like to be able to reuse, simply
    place that file in the* Filters *subdirectory of your Inkscape’s profile directory
    (*~/.config/inkscape *on Linux,* Documents and Settings\<your username>\Application
    Data\Inkscape *on Windows; create the* Filters *subdirectory there if it does
    not yet exist). After that, any filters defined in that file will be listed in
    a **Personal** submenu under **Filters**. (All these filters will apply immediately;
    unfortunately, you cannot at this time create a filter with an adjustment dialog
    without doing some programming.)*'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '*您可以轻松地将自己的预设过滤器添加到菜单中——无需编程！一旦您有一个包含您想要重复使用的过滤器的 SVG 文件，只需将该文件放置在 Inkscape
    配置目录的* Filters *子目录中（Linux 上的 *~/.config/inkscape*，Windows 上的 *Documents and Settings\<your
    username>\Application Data\Inkscape*；如果尚不存在，请在那里创建* Filters *子目录）。之后，该文件中定义的所有过滤器都将列在
    **过滤器** 下的 **个人** 子菜单中。（所有这些过滤器将立即应用；不幸的是，您目前无法不进行一些编程就创建带有调整对话框的过滤器。）*'
- en: Note
  id: totrans-101
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*The preset filters that come with Inkscape are useful not only by themselves
    but also as starting points for your own derivative filters. Once you are familiar
    with filter primitives and the **Filter Editor** dialog, choosing one of the preset
    filters—closest to what you want to get—and working from it is usally much easier
    than starting from scratch.*'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '*Inkscape 附带的自定义过滤器不仅本身很有用，而且也是创建您自己的派生过滤器的起点。一旦您熟悉了过滤器原语和**过滤器编辑器**对话框，选择一个预设过滤器——最接近您想要得到的效果——并从它开始工作通常比从头开始要容易得多。*'
- en: 17.4 The Filter Editor Dialog
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 17.4 过滤器编辑器对话框
- en: 'Now, let’s have a look at the principal filter powerhouse of Inkscape: the
    **Filter Editor** dialog (shown in [Figure 17-18](ch17s04.html#major_areas_of_the_filter_editor_dialog
    "Figure 17-18. Major areas of the Filter Editor dialog")). Open it with the **Filters**
    ▸ **Filter Editor . . .** command.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看 Inkscape 的主要过滤器功能：**过滤器编辑器**对话框（如图 17-18 所示 [Figure 17-18](ch17s04.html#major_areas_of_the_filter_editor_dialog
    "Figure 17-18. Major areas of the Filter Editor dialog")). 使用 **过滤器** ▸ **过滤器编辑器
    . . .** 命令打开它。
- en: '![Major areas of the Filter Editor dialog](httpatomoreillycomsourcenostarchimages1736322.png.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![过滤器编辑器对话框的主要区域](httpatomoreillycomsourcenostarchimages1736322.png.jpg)'
- en: Figure 17-18. Major areas of the Filter Editor dialog
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-18. 过滤器编辑器对话框的主要区域
- en: 17.4.1 The Filters List
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 17.4.1 过滤器列表
- en: The list in the top-left corner of the dialog contains all filters defined in
    your document. You can highlight any filter and edit its structure and parameters
    in the dialog. If the currently selected object has a filter applied, that filter
    will have a checkmark in the list; so, by setting or removing the checkmark, you
    can apply or unapply any filter to any object. (Note that even unused filters
    remain in the list; to remove them from the document, use the **File** ▸ **Vacuum
    Defs** command.)
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 对话框左上角列表中包含您文档中定义的所有过滤器。您可以选择任何过滤器，并在对话框中编辑其结构和参数。如果当前选定的对象应用了过滤器，该过滤器将在列表中有一个勾选标记；因此，通过设置或移除勾选标记，您可以为任何对象应用或取消应用任何过滤器。（注意，即使未使用的过滤器也会保留在列表中；要从文档中删除它们，请使用
    **文件** ▸ **清除定义** 命令。）
- en: Under the list, there is a **New** button for adding a new filter. If you opened
    this dialog in an empty document, the list of filters is also empty; now, press
    **New** to create a new empty filter, usually called `filter1` (to rename it to
    something else, just click the selected name in the list and type). You can also
    duplicate or delete a filter in the list by right-clicking it and using the corresponding
    pop-up menu commands.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在列表下方，有一个**新建**按钮用于添加新的过滤器。如果你在一个空文档中打开了这个对话框，过滤器列表也是空的；现在，按**新建**来创建一个新的空过滤器，通常称为`filter1`（要重命名，只需在列表中点击选中的名称并输入）。你也可以通过右键点击列表中的过滤器并使用相应的弹出菜单命令来复制或删除过滤器。
- en: After that, you can create or select some object in the document and check the
    checkbox for your new filter. Nothing changes—an empty filter does not affect
    the rendering of an object. For the filter to actually do something, we need to
    add some primitives to it.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，你可以在文档中创建或选择某个对象，并勾选你的新过滤器旁边的复选框。没有任何变化——一个空过滤器不会影响对象的渲染。为了让过滤器真正发挥作用，我们需要向其中添加一些原始元素。
- en: 17.4.2 The Stack of Primitives
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 17.4.2 原语堆栈
- en: Turn your attention to the area to the right of the filter list. This is the
    main filter construction board where you list, arrange, and connect the stack
    of *primitives* that constitute a filter. Initially, it is empty because we haven’t
    yet added any primitives to our filter.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 将你的注意力转向过滤器列表右侧的区域。这是主要的过滤器构建板，在这里你可以列出、排列和连接构成过滤器的原始元素堆栈。最初，它是空的，因为我们还没有向我们的过滤器添加任何原始元素。
- en: The 14 different primitives supported by Inkscape are listed in a drop-down
    list below the construction board. When you choose a primitive in the list, it
    displays a brief description and illustration below. You can read the description
    in the dialog to get an initial idea of what each primitive does. A detailed explanation
    of all primitives is beyond the scope of this book; if you want all the gory technical
    details, refer to the SVG specification (*[http://w3.org/TR/SVG11](http://w3.org/TR/SVG11)*).
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: Inkscape 支持的 14 个不同原始元素列在构建板下方的下拉列表中。当你从列表中选择一个原始元素时，它会在下方显示一个简短的描述和插图。你可以在对话框中阅读描述，以获得每个原始元素的基本概念。所有原始元素的详细解释超出了本书的范围；如果你想要所有详细的技术细节，请参考
    SVG 规范（*[http://w3.org/TR/SVG11](http://w3.org/TR/SVG11)*）。
- en: Instead, let’s go through the step-by-step process of creating a fairly complex
    filter that uses several different primitives to get an integral idea of how it
    all works. The filter we’ll construct is called Sandy Blur; I designed it for
    the background coloring of the Rose image (see [Figure 24-5](ch24.html#building_up_the_quotation_markrealistic
    "Figure 24-5. Building up the “realistic watercolor” filter for the background")).
    This filter aims to imitate blurry watercolor strokes on a rough paper.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，让我们逐步创建一个相当复杂的过滤器，它使用几个不同的原始元素来获得对整个工作流程的整体理解。我们将构建的过滤器称为Sandy Blur；我为玫瑰图像的背景着色设计了它（见[图24-5](ch24.html#building_up_the_quotation_markrealistic
    "图24-5. 构建“现实主义水彩”过滤器用于背景")). 这个过滤器旨在模仿粗糙纸张上的模糊水彩笔触。
- en: 'Plain Gaussian blur is not satisfactory: It is too smooth, too computer-generated,
    too boring. For an acceptable watercolor imitation, we need to model both the
    small-scale roughness of the paper texture and the larger-scale “blotches” resulting
    from the watercolor paint flowing and sticking differently in different places.
    For both these sources of unevenness, we will use the **Turbulence** primitive,
    which creates random fractal “noise” at the given scale.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 简单的高斯模糊不够满意：它太平滑，太像计算机生成的，太无聊了。为了达到可接受的水彩模仿效果，我们需要模拟纸张纹理的小尺度粗糙度和水彩颜料在不同地方流动和粘附不同而产生的较大尺度“斑驳”。对于这两种不均匀性的来源，我们将使用**湍流**原语，它在给定的尺度上创建随机的分形“噪声”。
- en: '![The two Turbulence primitives](httpatomoreillycomsourcenostarchimages1736324.png.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![两个湍流原语](httpatomoreillycomsourcenostarchimages1736324.png.jpg)'
- en: Figure 17-19. The two Turbulence primitives
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-19. 两个湍流原语
- en: The two **Turbulence** primitives are the first two components of our filter—the
    two topmost boxes in the stack. Each filter primitive has one or more *inputs*
    and one *output*; in the list, the input is depicted by a line coming into the
    primitive box horizontally from the right, and the output is the line going from
    the box vertically downward. As you can see, the outputs of some primitives are
    the inputs for others.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 两个**湍流**原语是我们过滤器的第一个两个组件——堆栈中最顶部的两个盒子。每个过滤器原语都有一个或多个*输入*和一个*输出*；在列表中，输入是通过从右侧水平进入原语框的线条表示的，而输出是从框垂直向下的线条。正如你所见，一些原语的输出是其他原语的输入。
- en: You can wire the connections yourself by dragging; start by dragging from the
    input triangle at the right-hand edge of a primitive’s box. Generally, information
    flows from top to bottom in the stack of primitives; the output of the bottommost
    primitive is what you see rendered in the document window. You can also rearrange
    the primitives by dragging; a right-click menu allows you to duplicate or delete
    a primitive.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过拖动来自定义连接；首先从原语框右侧的输入三角形开始拖动。通常，信息在原语堆栈中从上到下流动；最底层原语的输出是你看到在文档窗口中渲染的内容。你也可以通过拖动来重新排列原语；右键菜单允许你复制或删除一个原语。
- en: What are the vertically stacked boxes on the right? These are the predefined
    sources that any primitive can use as input. The most useful (and, as of version
    0.47, the only ones fully implemented) are **Source Graphic** and **Source Alpha**.
    **Source Graphic**, as the name implies, supplies the original rendered image
    of the object we’re filtering, at the current zoom’s resolution. The **Source
    Alpha** is different in that it provides a grayscale representation of the original
    object’s opacity (alpha) mask; so, points that are fully opaque (regardless of
    color) in the **Source Graphic** will be opaque black on the **Source Alpha**
    image, and points that are transparent will be transparent black.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 右侧垂直堆叠的盒子是什么？这些是任何原语都可以用作输入的预定义源。最有用（并且，截至版本 0.47，是唯一完全实现的）是**源图形**和**源 Alpha**。**源图形**，正如其名所示，提供了我们正在过滤的对象的原始渲染图像，以当前缩放的分辨率。**源
    Alpha**则不同，它提供了原始对象的不透明度（alpha）遮罩的灰度表示；因此，在**源图形**中完全不透明（无论颜色如何）的点在**源 Alpha**图像上将是完全不透明的黑色，而透明的点将是透明的黑色。
- en: 17.4.3 The Parameters of a Primitive
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 17.4.3 原语的参数
- en: Let’s look again at the two **Turbulence** primitives at the top of the stack.
    They both take **Source Alpha** as input and pass their result—random noise—down
    to other primitives. What differentiates them are the parameters of these filters.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次看看堆栈顶部的两个**湍流**原语。它们都接受**源 Alpha**作为输入，并将它们的输出（随机噪声）传递给其他原语。将它们区分开来的是这些过滤器的参数。
- en: 'When you select a filter primitive in the stack, its parameters are displayed
    in the bottom area of the dialog. Here are the parameters of the two **Turbulence**
    primitives:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在堆栈中选择一个过滤器原语时，其参数将显示在对话框的底部区域。以下是两个**湍流**原语的参数：
- en: '![The parameters of the two Turbulence primitives](httpatomoreillycomsourcenostarchimages1736326.png.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![两个湍流原语的参数](httpatomoreillycomsourcenostarchimages1736326.png.jpg)'
- en: Figure 17-20. The parameters of the two Turbulence primitives
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-20. 两个湍流原语的参数
- en: 'As you see, these two primitives have the same **Type** (**Fractal Noise**,
    which looks better in our case than the other option, **Turbulence**) but differ
    in **Base Frequency** and **Octaves**. The **Base Frequency** parameter determines
    the scale of the turbulence; higher frequency results in smaller, sand-like texture,
    while lower frequency produces larger clouds. The number of **Octaves** specifies,
    in fractal terminology, how deep is the recursion in the algorithm: Increasing
    **Octaves** produces sharper unevenness with more small details; decreasing this
    value gives a smoother, more nebulous image.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所见，这两个原语具有相同的**类型**（**分形噪声**，在我们的情况下比另一个选项**湍流**看起来更好）但在**基本频率**和**八度**上有所不同。**基本频率**参数决定了湍流的尺度；频率越高，结果纹理越小，类似沙子；而频率越低，产生的云越大。**八度**的数量在分形术语中指定了算法的递归深度：增加**八度**会产生更尖锐的不均匀性，具有更多的小细节；减少此值将得到更平滑、更模糊的图像。
- en: 'Now, we need to composite our turbulence outputs together. For this, we will
    use another primitive, aptly named **Composite**:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要将我们的湍流输出组合在一起。为此，我们将使用另一个名为**复合**的原语：
- en: '![The Composite primitive](httpatomoreillycomsourcenostarchimages1736328.png.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![复合原语](httpatomoreillycomsourcenostarchimages1736328.png.jpg)'
- en: Figure 17-21. The Composite primitive
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-21. 复合原语
- en: It has two inputs and combines them, pixel by pixel, using one of a number of
    methods. Here, I used the **Arithmetic** method; with the provided numeric values
    for the coefficients (**K1** to **K4**), it results in the large-scale wave and
    small-scale ripples being combined into a composite with somewhat increased contrast,
    as shown in [Figure 17-22](ch17s04.html#result_of_compositing_two_turbulences
    "Figure 17-22. The result of compositing two turbulences").
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 它有两个输入，并使用多种方法中的一种将它们逐像素组合。在这里，我使用了**算术**方法；使用提供的系数数值（**K1**到**K4**），将大尺度波和细小涟漪组合成具有略微增强对比度的复合图像，如图[图17-22](ch17s04.html#result_of_compositing_two_turbulences
    "图17-22. 组合两个湍流的結果")所示。
- en: '![The result of compositing two turbulences](httpatomoreillycomsourcenostarchimages1736330.png.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![组合两个湍流的結果](httpatomoreillycomsourcenostarchimages1736330.png.jpg)'
- en: Figure 17-22. The result of compositing two turbulences
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-22. 组合两个湍流的結果
- en: Note
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Refer to the SVG specification* ([http://w3.org/TR/SVG11](http://w3.org/TR/SVG11))
    *for the detailed formulas used by the **Composite** filter in various modes.*'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '*请参考SVG规范([http://w3.org/TR/SVG11](http://w3.org/TR/SVG11))以获取**复合**过滤器在不同模式下使用的详细公式*。'
- en: 'So far, we didn’t use the image of the object itself to which we will apply
    the filter—that is, didn’t use the **Source Graphic**. Supposedly, that object
    would be some kind of broad brush-like path, likely created with the Calligraphic
    pen tool (**[14.3 The Calligraphic Pen Tool](ch14s03.html "14.3 The Calligraphic
    Pen Tool")**). Of course, the first thing we need do to a flat-color, crisp-edged
    path to make it more like a watercolor stroke is to blur it:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们没有使用我们将要应用滤镜的对象的图像——也就是说，没有使用**源图形**。假设那个对象是一种类似宽画笔的路径，可能使用书法笔工具（**[14.3
    书法笔工具](ch14s03.html "14.3 书法笔工具")**）创建。当然，我们首先需要做的，是将单色、边缘清晰的路径模糊化，使其更像水彩笔触：
- en: '![The Gaussian Blur primitive](httpatomoreillycomsourcenostarchimages1736332.png.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![高斯模糊原语](httpatomoreillycomsourcenostarchimages1736332.png.jpg)'
- en: Figure 17-23. The Gaussian Blur primitive
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-23. 高斯模糊原语
- en: The **Standard Deviation** parameter of **Gaussian Blur** is similar to the
    blur amount you would adjust in the **Fill and Stroke** dialog ([Figure 17-1](ch17s01.html#blur_slider_in_the_fill_and_stroke_dialo
    "Figure 17-1. The Blur slider in the Fill and Stroke dialog")), except that here
    it is measured in absolute `px` units (**[A.6 Coordinates and Units](apas06.html
    "A.6 Coordinates and Units")**) instead of percentages of the object’s size.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '**高斯模糊**的**标准偏差**参数与你在**填充和描边**对话框中调整的模糊量相似（[图17-1](ch17s01.html#blur_slider_in_the_fill_and_stroke_dialo
    "图17-1. 填充和描边对话框中的模糊滑块")），只不过在这里它是用绝对`px`单位测量的（**[A.6 坐标和单位](apas06.html "A.6
    坐标和单位")**）而不是对象大小的百分比。'
- en: How do we combine the blurred stroke with the turbulence? **Composite** won’t
    work here. Any of its modes will just result in a smooth blur being *overlaid*
    with the turbulent ripples, but the underlying smoothness will not go anywhere
    (try it). It won’t look like watercolor on a rough paper at all—it will look more
    like computer-produced blur viewed through a spotted glass.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何将模糊的笔触与湍流结合？**复合**在这里不起作用。它的任何模式都只会导致平滑的模糊与湍流的涟漪**叠加**，但底层的平滑性不会消失（试试看）。它看起来根本不像在粗糙的纸上画的水彩画——它看起来更像是通过有斑点的玻璃看到的计算机生成的模糊。
- en: Let’s consider what happens when you paint with a real brush on a real paper.
    The blurriness of your stroke results from the softness of the brush—you apply
    more pressure in the middle than on the edges of the brush. When a brush meets
    a dimple in the paper, that pressure is changed; if this area of the paper is
    a rise, it will get painted more intensively, as if it were closer to the maximum-pressure
    point of the brush; if it is a depression, it will get less paint. In other words,
    the roughness of the paper jitters the blurred stroke *in the plane of the drawing*,
    as if randomly displacing parts of the stroke sideways. How do we achieve this
    with filters?
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑一下当你用真正的画笔在真正的纸上作画时会发生什么。你的笔触模糊是由画笔的柔软性造成的——你在画笔的中间施加的压力比在边缘大。当画笔遇到纸上的凹坑时，这种压力会改变；如果这个区域的纸是凸起，它会被更强烈地涂上颜色，就像它更接近画笔的最大压力点；如果它是凹陷，它会涂上较少的颜料。换句话说，纸张的粗糙度在绘图平面上使模糊的笔触产生抖动，就像随机地将笔触的部分向侧面移动。我们如何通过过滤器实现这一点？
- en: 'The **Displacement Map** primitive is a perfect match for the job. It takes
    its first input and moves its pixels around according to its second input. You
    can choose which of the channels (Red, Green, Blue, or Alpha) of the second input
    will move the first in each of the two axis directions (X and Y), as well as scale
    this displacement. In our case, the first input is the blurred object, and the
    second input is the composite turbulence field, of which we take the Alpha channel
    for both axes:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '**位移图**原语是这项工作的完美匹配。它根据第二个输入移动其像素。你可以选择第二个输入的哪个通道（红色、绿色、蓝色或Alpha）将在两个轴方向（X和Y）上移动第一个输入，以及缩放这种位移。在我们的情况下，第一个输入是模糊的对象，第二个输入是合成湍流场，我们为两个轴都取Alpha通道：'
- en: '![The Displacement Map primitive](httpatomoreillycomsourcenostarchimages1736334.png.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![位移图原语](httpatomoreillycomsourcenostarchimages1736334.png.jpg)'
- en: Figure 17-24. The Displacement Map primitive
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-24. 位移图原语
- en: As an added bonus, the result looks rougher in some areas and smoother in others.
    This is because in the smooth areas, the displacement map hits the almost-flat
    inner parts of the blurred stroke, and there, the high-frequency jitter just moves
    around pixels of almost the same color without disturbing the smoothness. On the
    edges of the stroke, however, different-color pixels are mixed and jittered, producing
    visible roughness. All this is additionally modulated by the low-frequency noise,
    producing a very convincing watercolor simulation.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 作为额外的奖励，结果在某些区域看起来较为粗糙，而在其他区域则较为平滑。这是因为，在平滑区域，位移图击中了模糊笔触的几乎平坦的内侧部分，在那里，高频抖动只是在几乎相同颜色的像素之间移动，而不会破坏平滑性。然而，在笔触的边缘，不同颜色的像素混合并抖动，产生了明显的粗糙感。所有这些都被低频噪声进一步调制，从而产生了一个非常令人信服的水彩模拟效果。
- en: However, if you apply this filter to a light-colored stroke (and not black as
    in [Figure 17-24](ch17s04.html#displacement_map_primitive "Figure 17-24. The Displacement
    Map primitive")), the result is still not quite perfect. When you’re looking at
    a real rough paper with watercolor strokes on it, what you see is not just the
    distribution of the paint; you also see the roughness itself, which looks like
    a pattern of shades. Without this shading, light-colored strokes with our filter
    still look too unnaturally flat. Fortunately, that is easy to fix; we already
    have the high-frequency turbulence source, which will work nicely as shading if
    we just compose it with our displacement-mapped blur, as shown in [Figure 17-25](ch17s04.html#final_filter_and_the_parameters_of_the_l
    "Figure 17-25. The final filter and the parameters of the last Composite primitive
    which overlays the shading").
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你将这个过滤器应用于浅色笔触（而不是如图 17-24（ch17s04.html#displacement_map_primitive "图 17-24. 位移图原语"）所示的黑色），结果仍然不是非常完美。当你看着一张真正的粗糙纸张上的水彩笔触时，你所看到的不只是油漆的分布；你还看到粗糙本身，它看起来像是一系列的阴影。没有这种阴影，我们的过滤器仍然使浅色笔触看起来过于不自然地平坦。幸运的是，这很容易解决；我们已经有了一个高频湍流源，如果我们只是将它与我们的位移映射模糊组合，它将很好地作为阴影工作，如图 17-25（ch17s04.html#final_filter_and_the_parameters_of_the_l
    "图 17-25. 最终的过滤器和最后覆盖阴影的复合原语的参数"）所示。
- en: Now the filter looks pretty decent, and we can declare it complete. You could
    continue working on it, adding various smears, water leaks, diffusion, and so
    on; however, since my demo image used this filter only for the background, I thought
    it was already good enough for the purpose.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 现在过滤器看起来相当不错，我们可以宣布它完成了。你可以继续工作，添加各种涂抹、水迹、扩散等等；然而，由于我的演示图像只使用了这个过滤器作为背景，我认为它已经足够好了。
- en: '![The final filter and the parameters of the last Composite primitive which
    overlays the shading](httpatomoreillycomsourcenostarchimages1736336.png.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![最终的过滤器和最后覆盖阴影的复合原语的参数](httpatomoreillycomsourcenostarchimages1736336.png.jpg)'
- en: Figure 17-25. The final filter and the parameters of the last Composite primitive
    which overlays the shading
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-25. 最终的过滤器和最后覆盖阴影的复合原语的参数
- en: 17.4.4 The Filter Area
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 17.4.4 过滤区域
- en: The second tab in the filter parameter area in the **Filter Editor** dialog
    is called **Filter General Settings**. It contains parameters that apply to the
    entire filter stack, not any single primitive. Currently, the only thing you can
    change here is the *filter area*—the area which the filter will render into, measured
    in the units of the bounding box of the object to which the filter is applied.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在**过滤器编辑器**对话框中，过滤器参数区域的第二个标签页被称为**过滤器常规设置**。它包含适用于整个过滤器堆栈的参数，而不是任何单个原始参数。目前，您可以在这里更改的唯一内容是**过滤器区域**——过滤器将要渲染到的区域，以应用过滤器的对象的边界框的单位来衡量。
- en: The **Coordinates** line specifies the top-left corner of the area, and the
    **Dimensions** line specifies the bottom-right corner. For example, if you set
    the **Coordinates** to 0/0 in and the **Dimensions** to 1/1, the area will be
    exactly equal to the bounding box. This will work fine if your filter does not
    reach beyond the object in any way—for example, if you’re just performing a color
    change with a **Color Matrix** primitive. However, if you are using something
    like blur in your filter, it will need to paint outside the bounding box, and
    you must provide sufficient margins for this to prevent cropping. When you apply
    blur via the **Fill and Stroke** dialog, these margins are set for you automatically;
    however, when creating a new filter stack from scratch, you must take care of
    it yourself. The default is 0.1/0.1 for **Coordinates** and 1.2/1.2 for **Dimensions**,
    which results in 10 percent margins on all sides of the object, as shown in [Figure 17-26](ch17s04.html#specifying_the_filter_area
    "Figure 17-26. Specifying the filter area").
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '**坐标**行指定区域的左上角，而**尺寸**行指定右下角。例如，如果您将**坐标**设置为0/0，将**尺寸**设置为1/1，则该区域将正好等于边界框。如果您的过滤器以任何方式不超出对象——例如，如果您只是使用**颜色矩阵**原始参数进行颜色更改，这将工作得很好。然而，如果您在过滤器中使用类似模糊这样的功能，它需要超出边界框进行绘制，您必须提供足够的边距以防止裁剪。当您通过**填充和描边**对话框应用模糊时，这些边距会自动为您设置；然而，当从头开始创建新的过滤器堆栈时，您必须自己注意这一点。默认值是**坐标**为0.1/0.1，**尺寸**为1.2/1.2，这会在对象的四周产生10%的边距，如图[图17-26](ch17s04.html#specifying_the_filter_area
    "图17-26. 指定过滤器区域")所示。'
- en: '![Specifying the filter area](httpatomoreillycomsourcenostarchimages1736338.png.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![指定过滤器区域](httpatomoreillycomsourcenostarchimages1736338.png.jpg)'
- en: Figure 17-26. Specifying the filter area
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图17-26. 指定过滤器区域
- en: If the visual bounding box option is used (which is the default, see **[4.2
    The Bounding Box](ch04s02.html "4.2 The Bounding Box")**), the bounding box of
    a filtered object—the frame you see when you select it in Selector—is the enlarged
    filter area. Among other things, this means that, when exporting a selected object
    to bitmap (**[18.9 Bitmap Export](ch18s09.html "18.9 Bitmap Export")**), Inkscape
    will make sure the bitmap contains the blurred edges without cropping.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 如果使用视觉边界框选项（这是默认设置，见**[4.2 边界框](ch04s02.html "4.2 边界框")**），则过滤对象的边界框——您在选择器中选择时看到的框架——是扩大的过滤器区域。这包括其他事情，这意味着，当将选定的对象导出为位图（**[18.9
    位图导出](ch18s09.html "18.9 位图导出")**）时，Inkscape将确保位图包含模糊的边缘而不会裁剪。
- en: 17.5 Filter Rendering Options
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 17.5 过滤器渲染选项
- en: 'As you may have noticed by now, for all their power, filters in Inkscape have
    a significant drawback: They are *slow*. Sometimes, very slow. While future versions
    of the program may to some extent address this (most likely, by enabling Inkscape
    to use the graphics card processor for filter calculations), there’s something
    you can do right now.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 如您现在可能已经注意到的，尽管Inkscape中的过滤器功能强大，但它们有一个显著的缺点：它们**很慢**。有时，非常慢。虽然程序的未来版本可能在某种程度上解决这个问题（最有可能的是，通过使Inkscape能够使用图形卡处理器进行过滤器计算），但您现在可以做一些事情。
- en: First of all, recall that you can always switch to the Outline mode (**[3.11
    Rendering Modes](ch03s11.html "3.11 Rendering Modes")**) to speed up rendering
    while working on a document. There is also the No Filters mode, which is the same
    as normal mode except that no filters are rendered; this is perhaps the best option
    if filters are the main source of slowness for you.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，请记住，您始终可以切换到轮廓模式（**[3.11 渲染模式](ch03s11.html "3.11 渲染模式")**)以加快在文档上工作时渲染的速度。还有无过滤器模式，它与正常模式相同，只是不渲染过滤器；这可能是在过滤器是您速度缓慢的主要来源时最好的选择。
- en: Also, the **Filters** tab of the **Inkscape Preferences** dialog ([Figure 17-27](ch17s05.html#filters_tab_of_the_inkscape_preferences
    "Figure 17-27. The Filters tab of the Inkscape Preferences dialog")) has some
    settings that you can try to tweak to speed up rendering. The first group of radio
    buttons applies to blur and allows you to choose your desired level of the speed/quality
    tradeoff. The default, **Average quality**, looks *almost* perfect and renders
    reasonably fast. At lower quality settings, visible defects appears, but rendering
    becomes even faster; the higher settings bring little quality improvement but
    are significantly slower.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，**Inkscape首选项**对话框中的**过滤器**选项卡（[图 17-27](ch17s05.html#filters_tab_of_the_inkscape_preferences
    "图 17-27. Inkscape首选项对话框中的过滤器选项卡"））有一些设置，您可以尝试调整以加快渲染速度。第一组单选按钮适用于模糊，允许您选择所需的速度/质量权衡水平。默认的**平均质量**看起来几乎完美，渲染速度合理。在较低的质量设置下，会出现可见的缺陷，但渲染速度更快；较高的设置带来很少的质量改进，但速度明显较慢。
- en: Note
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*Bitmap export (**[18.9 Bitmap Export](ch18s09.html "18.9 Bitmap Export")**)
    as well as rasterization of filters for PS/EPS/PDF export always use the highest
    quality of blur, which is why exporting is typically slower that rendering the
    same image on screen at the same resolution.*'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '*位图导出（**[18.9 位图导出](ch18s09.html "18.9 位图导出")**)以及PS/EPS/PDF导出中的过滤器光栅化始终使用最高的模糊质量，这也是为什么导出通常比在相同分辨率下渲染屏幕上的相同图像要慢的原因。'
- en: The second set of radio buttons applies to all filters (including blur). It
    also offers to trade an improvement in rendering speed for worse rendering quality,
    but its speed advantage is less significant, so here the **Best quality** option
    is probably optimal.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 第二组单选按钮适用于所有过滤器（包括模糊）。它还提供以降低渲染质量为代价来提高渲染速度的选项，但它的速度优势并不显著，因此这里**最佳质量**选项可能是最佳选择。
- en: '![The Filters tab of the Inkscape Preferences dialog](httpatomoreillycomsourcenostarchimages1736340.png.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![Inkscape首选项对话框中的过滤器选项卡](httpatomoreillycomsourcenostarchimages1736340.png.jpg)'
- en: Figure 17-27. The Filters tab of the Inkscape Preferences dialog
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-27. Inkscape首选项对话框中的过滤器选项卡
- en: 17.6 Exporting Filters to PS and PDF
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 17.6 将过滤器导出到PS和PDF
- en: Since version 0.47, Inkscape no longer ignores filters when exporting to PostScript
    and PDF formats (which, while being vector, do not support anything like SVG’s
    filters). Now, any object with a filter applied will be by default rasterized
    (i.e., converted into a bitmap object) in the exported file, fully preserving
    the appearance it had in Inkscape (but, potentially, increasing the file size).
    In the export options dialog, you can specify the resolution of the bitmaps, as
    well as turn rasterization off, in which case objects will remain vector but will
    lose any filtering.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 自从0.47版本起，Inkscape在导出为PostScript和PDF格式（虽然它们是矢量格式，但不支持SVG的过滤器功能）时不再忽略过滤器。现在，任何应用了过滤器的对象在导出文件中默认将被光栅化（即转换为位图对象），完全保留在Inkscape中具有的外观（但可能会增加文件大小）。在导出选项对话框中，您可以指定位图的分辨率，以及关闭光栅化，在这种情况下，对象将保持矢量格式但会失去任何过滤效果。
- en: '![Specifying the treatment of filters when exporting](httpatomoreillycomsourcenostarchimages1736342.png.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![导出时指定过滤器处理方式](httpatomoreillycomsourcenostarchimages1736342.png.jpg)'
- en: Figure 17-28. Specifying the treatment of filters when exporting
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17-28. 导出时指定过滤器处理方式
- en: When performing export via the command line (**[C.2 Export](apcs02.html "C.2
    Export")**), the corresponding options are `--export-dpi` to specify the resolution
    and `--export-ignore-filters` to turn off rasterization.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 当通过命令行执行导出操作（**[C.2 导出](apcs02.html "C.2 导出"）**）时，相应的选项是`--export-dpi`用于指定分辨率和`--export-ignore-filters`用于关闭光栅化。
