- en: Chapter 8\. DDCLIENT 3.7.3
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第 8 章\. DDCLIENT 3.7.3
- en: HT TP://DDCLIENT.SOURC E FORGE.NET
  id: totrans-1
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: HT TP://DDCLIENT.SOURC E FORGE.NET
- en: 8.1\. SUMMARY
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.1\. 摘要
- en: ddclient is an open source program written in Perl. It is used to automatically
    update dynamic DNS (domain name system) entries for a variety of dynamic DNS service
    providers. When ddclient detects that the system's IP address has changed, it
    sends the new IP address information to your designated dynamic DNS service provider.
    This enables systems with dynamically assigned IP addresses to maintain resolvability
    (stay reachable) by the Internet domain name system, regardless of IP address
    changes made by their ISPs.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ddclient 是一个用 Perl 编写的开源程序。它用于自动更新各种动态 DNS（域名系统）服务提供商的动态 DNS 条目。当 ddclient 检测到系统的
    IP 地址已更改时，它会将新的 IP 地址信息发送到您指定的动态 DNS 服务提供商。这使得具有动态分配 IP 地址的系统可以通过互联网域名系统保持可解析性（保持可达），无论其
    ISP 做出的 IP 地址更改。
- en: 'ddclient supports many dynamic DNS service providers, including the following:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ddclient 支持许多动态 DNS 服务提供商，包括以下：
- en: BroadbandReports ([http://www.dslreports.com](http://www.dslreports.com))
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: BroadbandReports ([http://www.dslreports.com](http://www.dslreports.com))
- en: DNS Park ([http://dnspark.com](http://dnspark.com))
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: DNS Park ([http://dnspark.com](http://dnspark.com))
- en: DynDNS ([http://www.dyndns.com](http://www.dyndns.com))
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: DynDNS ([http://www.dyndns.com](http://www.dyndns.com))
- en: easyDNS ([http://www.easydns.com](http://www.easydns.com))
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: easyDNS ([http://www.easydns.com](http://www.easydns.com))
- en: Namecheap ([http://www.namecheap.com](http://www.namecheap.com))
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Namecheap ([http://www.namecheap.com](http://www.namecheap.com))
- en: ZoneEdit ([http://zoneedit.com](http://zoneedit.com))
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ZoneEdit ([http://zoneedit.com](http://zoneedit.com))
- en: ddclient includes native support for several brands of NAT routers. It stays
    updated by extracting current IP information from the router's built-in status
    page. If your router is unsupported, ddclient can be configured to retrieve system
    IP address information via the Web. This guide provides information on retrieving
    IP address information via the Web rather than using your router's status page.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ddclient 包括对几种品牌的 NAT 路由器的原生支持。它通过从路由器的内置状态页面提取当前的 IP 信息来保持更新。如果您的路由器不受支持，ddclient
    可以配置为通过 Web 获取系统 IP 地址信息。本指南提供了有关通过 Web 获取 IP 地址信息而不是使用路由器状态页面的信息。
- en: Paul Burry originally wrote ddclient and remains one of five developers who
    maintain the project on SourceForge.net.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Paul Burry 最初编写了 ddclient，并且仍然是维护 SourceForge.net 上项目的五个开发者之一。
- en: 8.2\. RESOURCES
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2\. 资源
- en: Official ddclient Home Page
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 官方 ddclient 主页
- en: '[http://ddclient.sourceforge.net](http://ddclient.sourceforge.net)'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[ddclient 源代码网站](http://ddclient.sourceforge.net)'
- en: 8.3\. REQUIRED
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3\. 必需的
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE
    (see "[FreeBSD 7.0](freebsd_7.0_split_000.html#freebsd_7.0)")'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) FreeBSD 7.0-RELEASE（请参阅
    "[FreeBSD 7.0](freebsd_7_0_split_000.html#freebsd_7_0)"）'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Updated ports
    collection (see "[FreeBSD Ports Collection](freebsd_ports_collection.html#freebsd_ports_collection)")'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 更新的端口集合（请参阅
    "[FreeBSD 端口集合](freebsd_ports_collection.html#freebsd_ports_collection)"）'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Internet
    connection'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 互联网连接'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Registered
    domain name'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 已注册的域名'
- en: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) Dynamic DNS
    update service (see "[Summary](summary_split_001.html#summary)" for a list of
    providers)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](bTM3ZzJkLzhzNHRnOS9lL3BjMWk1OTU3MWk5ZmFycHMwZzMvMC5uVQ--.jpg) 动态 DNS 更新服务（有关提供商列表，请参阅
    "[摘要](summary_split_001.html#summary)"）'
- en: 8.4\. PREPARATION
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.4\. 准备
- en: Become the superuser.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 成为超级用户。
- en: 8.5\. INSTALL
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.5\. 安装
- en: 'To begin the installation of ddclient, enter the following commands:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始安装 ddclient，请输入以下命令：
- en: '[PRE0]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 8.6\. CONFIGURE
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.6\. 配置
- en: Once the installation process is complete, it's time to configure ddclient for
    use on your system.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，是时候为您的系统配置 ddclient 了。
- en: 'Copy the file ddclient.conf.sample to ddclient.conf, where you''ll configure
    it for use. Enter the following commands to accomplish this:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 ddclient.conf.sample 文件复制到 ddclient.conf，您将在其中进行配置。输入以下命令以完成此操作：
- en: '[PRE1]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Scroll down and uncomment the `use=web` declaration (~51) by removing the hash
    mark (`#`) at the beginning of the line. The line should appear as follows:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动并取消注释第 51 行的 `use=web` 声明（通过删除行首的井号 `#`），该行应如下所示：
- en: '[PRE2]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This line tells ddclient to obtain current IP address information from [http://checkip.dyndns.org](http://checkip.dyndns.org).
    DynDNS hosts a public service that returns your public IP address when an HTTP
    request is made to [http://checkip.dyndns.org](http://checkip.dyndns.org). Using
    this information, ddclient keeps your DNS records current.
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这行指示ddclient从[http://checkip.dyndns.org](http://checkip.dyndns.org)获取当前的IP地址信息。当向[http://checkip.dyndns.org](http://checkip.dyndns.org)发起HTTP请求时，DynDNS托管一个公共服务，返回你的公网IP地址。使用这些信息，ddclient保持你的DNS记录是最新的。
- en: 'Scroll down and find your dynamic DNS update provider (~89). Uncomment each
    appropriate line and provide your login, password, and registered domain name
    (or names) as shown in bold below. (Remove the hash mark for each line; do not
    modify lines beginning with two hash marks.) Below is an example of a [dyndns.org](http://dyndns.org)
    configuration:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动并找到你的动态DNS更新提供商（~89）。取消注释每条适当的行，并按照以下加粗内容提供你的登录名、密码和注册的域名（或域名）。（取消每行的井号；不要修改以两个井号开头的行。）以下是一个[dyndns.org](http://dyndns.org)配置的示例：
- en: '[PRE3]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Save and exit.
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: 'Since ddclient.conf contains the password of your dynamic DNS provider, make
    it readable only to root, like this:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于ddclient.conf包含你的动态DNS提供商的密码，请确保只有root可以读取，如下所示：
- en: '[PRE4]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 8.7\. TESTING
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.7\. 测试
- en: The following basic tests will show whether ddclient performs as expected.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 以下基本测试将显示ddclient是否按预期运行。
- en: 'To start ddclient automatically at boot time, edit the rc.conf file in /etc.
    Open rc.conf:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在启动时自动启动ddclient，请编辑/etc中的rc.conf文件。打开rc.conf：
- en: '[PRE5]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'and add the following startup lines:'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 并添加以下启动行：
- en: '[PRE6]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The `ddclient_flags="-daemon 600"` statement means that ddclient will check
    your public IP every 600 seconds (10 minutes), but you may use any value you feel
    is reasonable. (See "[Notes](notes.html#notes)" for details on this value.)
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`ddclient_flags="-daemon 600"`语句表示ddclient将每600秒（10分钟）检查一次你的公网IP，但你可以使用你认为合理的任何值。（有关此值的详细信息，请参阅“[备注](notes.html#notes)”部分。）'
- en: 'Save your changes and run the startup script:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的更改并运行启动脚本：
- en: '[PRE7]'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Enter this command to confirm that ddclient is running:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入此命令以确认ddclient正在运行：
- en: '[PRE8]'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: You may repeat the `ps` command to check the status of ddclient at any time.
    After the sleep time expires, ddclient should check your public IP address and
    make the appropriate changes to your dynamic DNS provider. Status emails will
    be sent to the root account's email address. (If you set up forwarding of root's
    email in the /etc/aliases file, check that email address for status updates.)
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以重复使用`ps`命令来随时检查ddclient的状态。在睡眠时间到期后，ddclient应该检查你的公网IP地址并对你的动态DNS提供商进行适当的更改。状态邮件将被发送到root账户的电子邮件地址。（如果你在/etc/aliases文件中设置了root的电子邮件转发，请检查该电子邮件地址以获取状态更新。）
- en: 8.8\. CONFIG FILES
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.8\. 配置文件
- en: /usr/local/etc/ddclient.conf
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/ddclient.conf
- en: This is the main configuration file for ddclient.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这是ddclient的主要配置文件。
- en: /usr/local/etc/ddclient.cache
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: /usr/local/etc/ddclient.cache
- en: This file saves the last known public IP address of the system so ddclient knows
    when your dynamic DNS provider needs to be updated. This file is located in /var/tmp.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 此文件保存了系统最后已知的公网IP地址，以便ddclient知道何时需要更新你的动态DNS提供商。此文件位于/var/tmp。
- en: 8.9\. LOG FILES
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.9\. 日志文件
- en: /var/log/messages
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: /var/log/messages
- en: ddclient records status messages as well as errors to this file.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: ddclient将状态消息以及错误记录到该文件。
- en: 8.10\. NOTES
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.10\. 备注
- en: Setting the daemon update time to 600 seconds is reasonable. If you set this
    value too low, it will cause unnecessary traffic from your system. Setting this
    value too high will delay DNS updates to your dynamic DNS provider.
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将守护进程更新时间设置为600秒是合理的。如果你设置这个值太低，会导致系统产生不必要的流量。设置这个值太高将延迟向动态DNS提供商的DNS更新。
- en: When creating an account with a dynamic DNS service provider, avoid using a
    login and/or password that matches any account on your system. When ddclient updates
    your public IP address, it may transmit your username and password to your dynamic
    DNS service provider in the clear (unencrypted). If an attacker analyzed your
    network traffic, this information could be used to compromise the security of
    your system. Later versions of ddclient (including version 3.7) support SSL encrypted
    connections to dynamic DNS providers.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当在动态DNS服务提供商处创建账户时，避免使用与你的系统上任何账户匹配的登录名和/或密码。当ddclient更新你的公网IP地址时，它可能会以明文（未加密）的形式将你的用户名和密码传输给你的动态DNS服务提供商。如果攻击者分析了你的网络流量，这些信息可能会被用来危害你系统的安全。ddclient的后续版本（包括3.7版）支持到动态DNS提供商的SSL加密连接。
