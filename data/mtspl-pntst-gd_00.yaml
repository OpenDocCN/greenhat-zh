- en: Introduction
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 引言
- en: Imagine that sometime in the not-so-distant future an attacker decides to attack
    a multinational company’s digital assets, targeting hundreds of millions of dollars
    worth of intellectual property buried behind millions of dollars in infrastructure.
    Naturally, the attacker begins by firing up the latest version of Metasploit.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，在不久的将来，一个攻击者决定攻击一家跨国公司的数字资产，目标是价值数十亿美元的知识产权，这些知识产权隐藏在数百万美元的基础设施背后。自然地，攻击者首先启动了Metasploit的最新版本。
- en: After exploring the target’s perimeter, he finds a soft spot and begins a methodical
    series of attacks, but even after he’s compromised nearly every aspect of the
    network, the fun has only just begun. He maneuvers through systems, identifying
    core, critical business components that keep the company running. With a single
    keystroke, he could help himself to millions of company dollars and compromise
    all their sensitive data.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在探索目标的外围后，他发现了一个薄弱环节，并开始了一系列有计划的攻击，但即使在他几乎破坏了网络的每一个方面之后，乐趣才刚刚开始。他穿梭于系统之间，识别出维持公司运营的核心、关键业务组件。只需一个按键，他就能为自己赚取数百万公司美元，并损害所有敏感数据。
- en: Congratulations on a job well done — you’ve shown true business impact, and
    now it’s time to write the report. Oddly enough, today’s penetration testers often
    find themselves in the role of a fictitious adversary like the one described above,
    performing legal attacks at the request of companies that *need* high levels of
    security. Welcome to the world of penetration testing and the future of security.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜你完成了一项出色的工作——你已经展示了真正的商业影响，现在是时候撰写报告了。奇怪的是，今天的渗透测试员经常发现自己扮演着上述虚构对手的角色，在公司的要求下进行法律攻击，这些公司*需要*高水平的保护。欢迎来到渗透测试的世界和安全的未来。
- en: Why Do a Penetration Test?
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么进行渗透测试？
- en: Companies invest millions of dollars in security programs to protect critical
    infrastructures, identify chinks in the armor, and prevent serious data breaches.
    A penetration test is one of the most effective ways to identify systemic weaknesses
    and deficiencies in these programs. By attempting to circumvent security controls
    and bypass security mechanisms, a penetration tester is able to identify ways
    in which a hacker might be able to compromise an organization’s security and damage
    the organization as a whole.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 公司投入数百万美元用于安全程序，以保护关键基础设施、识别防御漏洞并预防严重的数据泄露。渗透测试是识别这些程序中系统性弱点和不足的最有效方法之一。通过尝试绕过安全控制和绕过安全机制，渗透测试员能够识别黑客可能如何破坏组织的整体安全并损害组织。
- en: As you read through this book, remember that you’re not necessarily targeting
    one system or multiple systems. Your goal is to show, in a safe and controlled
    manner, how an attacker might be able to cause serious harm to an organization
    and impact its ability to, among other things, generate revenue, maintain its
    reputation, and protect its customers.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读这本书的过程中，请记住，你的目标并不是针对一个系统或多个系统。你的目标是安全且可控地展示攻击者可能如何对一个组织造成严重损害，并影响其生成收入、维护声誉和保护客户的能力。
- en: Why Metasploit?
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么选择Metasploit？
- en: Metasploit isn’t just a tool; it’s an entire framework that provides the infrastructure
    needed to automate mundane, routine, and complex tasks. This allows you to concentrate
    on the unique or specialized aspects of penetration testing and on identifying
    flaws within your information security program.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit不仅仅是一个工具；它是一个完整的框架，提供了自动化日常、常规和复杂任务所需的基础设施。这让你可以专注于渗透测试的独特或专业方面，以及识别你信息安全程序中的缺陷。
- en: As you progress through the chapters in this book and establish a well-rounded
    methodology, you will begin to see the many ways in which Metasploit can be used
    in your penetration tests. Metasploit allows you to easily build attack vectors
    to augment its exploits, payloads, encoders, and more in order to create and execute
    more advanced attacks. At various points in this book we explain several third-party
    tools — including some written by the authors of this book — that build on the
    Metasploit Framework. Our goal is to get you comfortable with the Framework, show
    you some advanced attacks, and ensure that you can apply these techniques responsibly.
    We hope you enjoy reading this book as much as we enjoyed creating it. Let the
    fun and games begin.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 随着你在这本书的章节中不断进步并建立一套全面的方法论，你将开始看到Metasploit在渗透测试中可以使用的多种方式。Metasploit允许你轻松构建攻击向量，以增强其漏洞利用、有效载荷、编码器等，从而创建和执行更高级的攻击。在这本书的各个部分，我们解释了几个第三方工具——包括一些由本书作者编写的工具——这些工具建立在Metasploit框架之上。我们的目标是让你熟悉框架，展示一些高级攻击，并确保你能负责任地应用这些技术。我们希望你能像我们享受创作这本书一样享受阅读它。让我们开始享受乐趣和游戏吧。
- en: A Brief History of Metasploit
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Metasploit简史
- en: Metasploit was originally developed and conceived by HD Moore while he was employed
    by a security firm. When HD realized that he was spending most of his time validating
    and sanitizing public exploit code, he began to create a flexible and maintainable
    framework for the creation and development of exploits. He released his first
    edition of the Perl-based Metasploit in October 2003 with a total of 11 exploits.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit最初是由HD Moore在一家安全公司任职期间开发和构思的。当HD意识到他大部分时间都在验证和清理公共漏洞利用代码时，他开始创建一个灵活且可维护的框架，用于漏洞利用的创建和发展。他在2003年10月发布了基于Perl的Metasploit的第一个版本，总共包含11个漏洞利用。
- en: With the help of Spoonm, HD released a total rewrite of the project, Metasploit
    2.0, in April 2004\. This version included 19 exploits and over 27 payloads. Shortly
    after this release, Matt Miller (Skape) joined the Metasploit development team,
    and as the project gained popularity, the Metasploit Framework received heavy
    backing from the information security community and quickly became a necessary
    tool for penetration testing and exploitation.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在Spoonm的帮助下，HD于2004年4月发布了项目的全面重写版，即Metasploit 2.0。这个版本包括19个漏洞利用和超过27个有效载荷。在此发布之后不久，Matt
    Miller（Skape）加入了Metasploit开发团队。随着项目的流行，Metasploit框架得到了信息安全社区的大力支持，并迅速成为渗透测试和利用的必要工具。
- en: Following a complete rewrite in the Ruby programming language, the Metasploit
    team released Metasploit 3.0 in 2007\. The migration of the Framework from Perl
    to Ruby took 18 months and resulted in over 150,000 lines of new code. With the
    3.0 release, Metasploit saw widespread adoption in the security community and
    a big increase in user contributions.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在用Ruby编程语言进行全面重写后，Metasploit团队于2007年发布了Metasploit 3.0。框架从Perl迁移到Ruby耗时18个月，产生了超过15万行的新代码。随着3.0版本的发布，Metasploit在安全社区得到了广泛的应用，并且用户贡献量大幅增加。
- en: 'In fall 2009, Metasploit was acquired by Rapid7, a leader in the vulnerability-scanning
    field, which allowed HD to build a team to focus solely on the development of
    the Metasploit Framework. Since the acquisition, updates have occurred more rapidly
    than anyone could have imagined. Rapid7 released two commercial products based
    on the Metasploit Framework: Metasploit Express and Metasploit Pro. Metasploit
    Express is a lighter version of the Metasploit Framework with a GUI and additional
    functionality, including reporting, among other useful features. Metasploit Pro
    is an expanded version of Metasploit Express that touts collaboration and group
    penetration testing and such features as a one-click virtual private network (VPN)
    tunnel and much more.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在2009年秋季，Metasploit被Rapid7收购，Rapid7是漏洞扫描领域的领导者，这使得HD能够组建一个专注于Metasploit框架开发的团队。自收购以来，更新速度比任何人想象的都要快。Rapid7基于Metasploit框架发布了两个商业产品：Metasploit
    Express和Metasploit Pro。Metasploit Express是带有GUI和额外功能（包括报告等有用功能）的Metasploit框架的轻量级版本。Metasploit
    Pro是Metasploit Express的扩展版本，强调协作和团队渗透测试，以及一键虚拟私人网络（VPN）隧道等功能。
- en: About This Book
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于本书
- en: This book is designed to teach you everything from the fundamentals of the Framework
    to advanced techniques in exploitation. Our goal is to provide a useful tutorial
    for the beginner and a reference for practitioners. However, we won’t always hold
    your hand. Programming knowledge is a definite advantage in the penetration testing
    field, and many of the examples in this book will use either the Ruby or Python
    programming language. Still, while we suggest that you learn a language like Ruby
    or Python to aid in advanced exploitation and customization of attacks, programming
    knowledge is not required.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 本书旨在教你从框架的基础到利用的高级技术的一切。我们的目标是提供一个有用的教程供初学者使用，以及一个实践者的参考。然而，我们不会总是手把手地教你。编程知识在渗透测试领域是一个明显的优势，本书中的许多示例将使用Ruby或Python编程语言。尽管如此，我们建议你学习像Ruby或Python这样的语言来帮助进行高级利用和攻击定制，但编程知识不是必需的。
- en: As you grow more comfortable with Metasploit, you will notice that the Framework
    is frequently updated with new features, exploits, and attacks. This book was
    developed with the knowledge that Metasploit is continually changing and that
    no printed book is likely to be able to keep pace with this rapid development.
    Therefore, we focus on the fundamentals, because once you understand how Metasploit
    works you will be able to ramp up quickly with updates to the Framework.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 随着你对Metasploit越来越熟悉，你会注意到框架经常更新，添加新功能、漏洞利用和攻击。本书的开发是基于Metasploit不断变化的知识，以及任何印刷书籍都不太可能跟上这种快速发展。因此，我们专注于基础知识，因为一旦你了解了Metasploit的工作原理，你将能够快速跟上框架的更新。
- en: What’s in the Book?
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 书中有什么内容？
- en: How can this book help you to get started or take your skills to the next level?
    Each chapter is designed to build on the previous one and to help you build your
    skills as a penetration tester from the ground up.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书如何帮助你开始或提升你的技能水平？每一章都是基于前一章设计的，旨在帮助你从零开始构建渗透测试者的技能。
- en: '[Chapter 1](part0005.html#the_absolute_basics_of_penetration_testi), establishes
    the methodologies around penetration testing.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第1章](part0005.html#the_absolute_basics_of_penetration_testi)建立了渗透测试的方法论。'
- en: '[Chapter 2](part0006.html#metasploit_basics), is your introduction to the various
    tools within the Metasploit Framework.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](part0006.html#metasploit_basics)是Metasploit框架中各种工具的介绍。'
- en: '[Chapter 3](part0007.html#intelligence_gathering-id1), shows you ways to leverage
    Metasploit in the reconnaissance phase of a penetration test.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](part0007.html#intelligence_gathering-id1)展示了如何在渗透测试的侦察阶段利用Metasploit。'
- en: '[Chapter 4](part0008.html#vulnerability_scanning), walks you through identifying
    vulnerabilities and leveraging vulnerability scanning technology.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第4章](part0008.html#vulnerability_scanning)带你了解如何识别漏洞并利用漏洞扫描技术。'
- en: '[Chapter 5](part0009.html#the_joy_of_exploitation), throws you into exploitation.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第5章](part0009.html#the_joy_of_exploitation)让你进入利用阶段。'
- en: '[Chapter 6](part0010.html#meterpreter), walks you through the Swiss Army knife
    of post exploitation: Meterpreter.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第6章](part0010.html#meterpreter)介绍了后利用阶段的瑞士军刀：Meterpreter。'
- en: '[Chapter 7](part0011.html#avoiding_detection), focuses on the underlying concepts
    of antivirus evasion techniques.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第7章](part0011.html#avoiding_detection)侧重于防病毒绕过技术的底层概念。'
- en: '[Chapter 8](part0012.html#exploitation_using_client-side_attacks), covers client-side
    exploitation and browser bugs.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第8章](part0012.html#exploitation_using_client-side_attacks)涵盖了客户端利用和浏览器漏洞。'
- en: '[Chapter 9](part0013.html#metasploit_auxiliary_modules), walks you through
    auxiliary modules.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第9章](part0013.html#metasploit_auxiliary_modules)带你了解辅助模块。'
- en: '[Chapter 10](part0014.html#the_social-engineer_toolkit), is your guide to leveraging
    the Social-Engineer Toolkit in social-engineering attacks.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第10章](part0014.html#the_social-engineer_toolkit)是你的指南，教你如何利用Social-Engineer
    Toolkit进行社会工程攻击。'
- en: '[Chapter 11](part0015.html#fast-track), offers a complete run down on Fast-Track,
    an automated penetration testing framework.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第11章](part0015.html#fast-track)全面介绍了Fast-Track，一个自动化的渗透测试框架。'
- en: '[Chapter 12](part0016.html#karmetasploit), shows you how to leverage Karmetasploit
    for wireless attacks.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第12章](part0016.html#karmetasploit)展示了如何利用Karmetasploit进行无线攻击。'
- en: '[Chapter 13](part0017.html#building_your_own_module), teaches you how to build
    your own exploitation module.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第13章](part0017.html#building_your_own_module)教你如何构建自己的漏洞利用模块。'
- en: '[Chapter 14](part0018.html#creating_your_own_exploits), covers fuzzing and
    creating exploit modules out of buffer overflows.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第14章](part0018.html#creating_your_own_exploits)涵盖了模糊测试和从缓冲区溢出中创建漏洞利用模块。'
- en: '[Chapter 15](part0019.html#porting_exploits_to_the_metasploit_frame), is an
    in-depth look at how to port existing exploits into a Metasploit-based module.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第15章](part0019.html#porting_exploits_to_the_metasploit_frame)深入探讨了如何将现有的漏洞利用代码移植到基于Metasploit的模块中。'
- en: '[Chapter 16](part0020.html#meterpreter_scripting), shows you how to create
    your own Meterpreter scripts.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第16章](part0020.html#meterpreter_scripting)展示了如何创建您自己的Meterpreter脚本。'
- en: '[Chapter 17](part0021.html#simulated_penetration_test), pulls everything together
    as it walks you through a simulated penetration test.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第17章](part0021.html#simulated_penetration_test)在引导您进行模拟渗透测试的过程中，将所有内容整合在一起。'
- en: A Note on Ethics
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于伦理的注意事项
- en: 'Our goal in writing this book is to help you to improve your skills as a penetration
    tester. As a penetration tester, you will be bypassing security measures; that’s
    simply part of the job. When you do, keep the following in mind:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们编写这本书的目标是帮助您提高作为渗透测试者的技能。作为一名渗透测试者，你将绕过安全措施；这仅仅是工作的一部分。当你这样做时，请记住以下几点：
- en: Don’t be malicious.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要恶意行事。
- en: Don’t be stupid.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要愚蠢。
- en: Don’t attack targets without written permission.
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要在没有书面许可的情况下攻击目标。
- en: Consider the consequences of your actions.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑你行为的后果。
- en: If you do things illegally, you can be caught and put in jail!
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你非法行事，你可能会被捕并被关进监狱！
- en: Neither the authors of this book nor No Starch Press, its publisher, condones
    or encourages the misuse of the penetration testing techniques discussed herein.
    Our goal is to make you smarter, not to help you to get into trouble, because
    we won’t be there to get you out.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 本书作者以及其出版社No Starch Press均不认可或鼓励对书中讨论的渗透测试技术的滥用。我们的目标是让你变得更聪明，而不是让你陷入麻烦，因为我们不会在那里帮助你脱身。
